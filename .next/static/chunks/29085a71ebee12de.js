(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,888570,127818,e=>{"use strict";let t=(0,e.i(699528).default)("Bot",[["path",{d:"M12 8V4H8",key:"hb8ula"}],["rect",{width:"16",height:"12",x:"4",y:"8",rx:"2",key:"enze0r"}],["path",{d:"M2 14h2",key:"vft8re"}],["path",{d:"M20 14h2",key:"4cs60a"}],["path",{d:"M15 13v2",key:"1xurst"}],["path",{d:"M9 13v2",key:"rq6x2g"}]]);e.s(["default",()=>t],127818),e.s(["Bot",()=>t],888570)},637567,e=>{"use strict";let t=(0,e.i(699528).default)("Save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]]);e.s(["default",()=>t])},80504,e=>{"use strict";var t=e.i(637567);e.s(["Save",()=>t.default])},539931,e=>{"use strict";let t=(0,e.i(699528).default)("GripVertical",[["circle",{cx:"9",cy:"12",r:"1",key:"1vctgf"}],["circle",{cx:"9",cy:"5",r:"1",key:"hp0tcf"}],["circle",{cx:"9",cy:"19",r:"1",key:"fkjjf6"}],["circle",{cx:"15",cy:"12",r:"1",key:"1tmaij"}],["circle",{cx:"15",cy:"5",r:"1",key:"19l28e"}],["circle",{cx:"15",cy:"19",r:"1",key:"f4zoj3"}]]);e.s(["default",()=>t])},339420,e=>{"use strict";var t=e.i(539931);e.s(["GripVertical",()=>t.default])},704321,e=>{"use strict";let t=(0,e.i(699528).default)("PanelLeftOpen",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M9 3v18",key:"fh3hqa"}],["path",{d:"m14 9 3 3-3 3",key:"8010ee"}]]);e.s(["default",()=>t])},207351,e=>{"use strict";var t=e.i(726151),r=e.i(923041),s=e.i(662582),a=e.i(278124),l=e.i(305583),n=e.i(888570),o=e.i(432827),i=e.i(339492),c=e.i(86066),d=e.i(298130),m=e.i(254862),h=e.i(339420),u=e.i(80504),x=e.i(745834),p=e.i(734545),v=e.i(704321),v=v,f=e.i(591372),b=e.i(975157);let g={start:{icon:(0,t.jsx)(c.Play,{className:"w-4 h-4"}),label:"Start",bgClass:"bg-emerald-500",description:"Workflow entry point"},end:{icon:(0,t.jsx)(d.Square,{className:"w-4 h-4"}),label:"End",bgClass:"bg-rose-500",description:"Workflow completion"},human:{icon:(0,t.jsx)(l.User,{className:"w-4 h-4"}),label:"Human Action",bgClass:"bg-blue-500",description:"Requires human input"},ai:{icon:(0,t.jsx)(n.Bot,{className:"w-4 h-4"}),label:"AI Action",bgClass:"bg-amber-500",description:"Automated AI step"},approval:{icon:(0,t.jsx)(o.CheckCircle,{className:"w-4 h-4"}),label:"Approval",bgClass:"bg-orange-500",description:"Requires approval"},conditional:{icon:(0,t.jsx)(i.GitBranch,{className:"w-4 h-4"}),label:"Conditional",bgClass:"bg-cyan-500",description:"Branch on condition"}};function y({node:e,isSelected:a,onSelect:l,onDelete:n,onUpdate:o,onStartConnection:i,isConnecting:c,onCompleteConnection:d}){let[u,x]=(0,r.useState)(!1),[p,v]=(0,r.useState)(!1),f=(0,r.useRef)(null),y=(0,r.useRef)({x:0,y:0}),j=(0,r.useRef)({x:0,y:0}),w=g[e.type];return(0,r.useEffect)(()=>{if(!u)return;let e=e=>{let t=e.clientX-y.current.x,r=e.clientY-y.current.y;o({x:Math.max(0,j.current.x+t),y:Math.max(0,j.current.y+r)})},t=()=>x(!1);return window.addEventListener("mousemove",e),window.addEventListener("mouseup",t),()=>{window.removeEventListener("mousemove",e),window.removeEventListener("mouseup",t)}},[u,o]),(0,t.jsxs)(s.motion.div,{ref:f,initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.8},className:(0,b.cn)("absolute w-44 rounded-xl border backdrop-blur-xl cursor-move select-none","transition-all duration-200",a?"border-[hsl(var(--theme-primary))] shadow-lg z-20":"border-[hsl(var(--theme-border))] hover:border-[hsl(var(--theme-primary)/0.5)] z-10",c&&"ring-2 ring-[hsl(var(--theme-primary)/0.5)] cursor-pointer"),style:{left:e.x,top:e.y,backgroundColor:"hsl(var(--theme-card))"},onMouseDown:t=>{if(0===t.button){if(t.stopPropagation(),c)return void d();l(),x(!0),y.current={x:t.clientX,y:t.clientY},j.current={x:e.x,y:e.y}}},children:[(0,t.jsxs)("div",{className:(0,b.cn)("flex items-center gap-2 p-2.5 rounded-t-xl",w.bgClass),children:[(0,t.jsx)(h.GripVertical,{className:"w-3.5 h-3.5 text-white/60"}),(0,t.jsxs)("div",{className:"flex-1 flex items-center gap-1.5",children:[w.icon,(0,t.jsx)("span",{className:"text-xs font-medium text-white",children:w.label})]}),"start"!==e.type&&"end"!==e.type&&(0,t.jsx)("button",{onClick:e=>{e.stopPropagation(),n()},className:"p-0.5 rounded hover:bg-white/20 transition-colors",children:(0,t.jsx)(m.Trash2,{className:"w-3 h-3 text-white/60"})})]}),(0,t.jsxs)("div",{className:"p-2.5 space-y-1",children:[p?(0,t.jsx)("input",{type:"text",value:e.title,onChange:e=>o({title:e.target.value}),onBlur:()=>v(!1),onKeyDown:e=>"Enter"===e.key&&v(!1),autoFocus:!0,className:(0,b.cn)("w-full px-2 py-1 text-xs rounded","bg-[hsl(var(--theme-muted))] border border-[hsl(var(--theme-border))]","text-[hsl(var(--theme-foreground))]","focus:outline-none focus:border-[hsl(var(--theme-primary))]"),onClick:e=>e.stopPropagation()}):(0,t.jsx)("p",{className:"text-xs font-medium text-[hsl(var(--theme-foreground))] cursor-text",onClick:e=>{e.stopPropagation(),v(!0)},children:e.title||"Click to edit..."}),(0,t.jsx)("p",{className:"text-[10px] text-[hsl(var(--theme-muted-foreground))]",children:e.description||w.description})]}),(0,t.jsx)("button",{onClick:e=>{e.stopPropagation(),i()},className:(0,b.cn)("absolute -right-1.5 top-1/2 -translate-y-1/2 w-3 h-3 rounded-full","border-2 border-[hsl(var(--theme-border))]","bg-[hsl(var(--theme-card))]","hover:bg-[hsl(var(--theme-primary))] hover:border-[hsl(var(--theme-primary))] transition-colors")}),(0,t.jsx)("div",{className:(0,b.cn)("absolute -left-1.5 top-1/2 -translate-y-1/2 w-3 h-3 rounded-full","border-2 border-[hsl(var(--theme-border))]","bg-[hsl(var(--theme-card))]")})]})}function j({from:e,to:r,isTemp:s}){let a=Math.min(.5*Math.abs(r.x-e.x),80),l=`M ${e.x} ${e.y} C ${e.x+a} ${e.y}, ${r.x-a} ${r.y}, ${r.x} ${r.y}`;return(0,t.jsxs)("svg",{className:"absolute inset-0 pointer-events-none z-0",style:{overflow:"visible"},children:[(0,t.jsx)("path",{d:l,fill:"none",stroke:s?"hsl(var(--theme-primary) / 0.5)":"hsl(var(--theme-border))",strokeWidth:2,strokeDasharray:s?"4,4":void 0}),!s&&(0,t.jsx)("circle",{cx:r.x,cy:r.y,r:3,fill:"hsl(var(--theme-primary))"})]})}function w({onAddNode:e,isOpen:r,onClose:c}){let d=(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h3",{className:"text-xs font-semibold text-[hsl(var(--theme-muted-foreground))] uppercase tracking-wider mb-3",children:"Add Nodes"}),(0,t.jsx)("div",{className:"space-y-2",children:["human","ai","approval","conditional"].map(r=>{let s=g[r];return(0,t.jsxs)("button",{onClick:()=>{e(r),c?.()},className:(0,b.cn)("w-full flex items-center gap-2.5 px-3 py-2 rounded-lg text-left","border border-[hsl(var(--theme-border))]","hover:border-[hsl(var(--theme-primary)/0.5)] hover:bg-[hsl(var(--theme-muted))]","transition-colors"),style:{backgroundColor:"hsl(var(--theme-background))"},children:[(0,t.jsx)("div",{className:(0,b.cn)("p-1.5 rounded-md",s.bgClass),children:s.icon}),(0,t.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,t.jsx)("p",{className:"text-sm font-medium text-[hsl(var(--theme-foreground))]",children:s.label}),(0,t.jsx)("p",{className:"text-[10px] text-[hsl(var(--theme-muted-foreground))] truncate",children:s.description})]})]},r)})})]}),(0,t.jsxs)("div",{className:"pt-4 border-t border-[hsl(var(--theme-border))]",children:[(0,t.jsx)("h3",{className:"text-xs font-semibold text-[hsl(var(--theme-muted-foreground))] uppercase tracking-wider mb-3",children:"Legend"}),(0,t.jsxs)("div",{className:"space-y-2 text-[10px] text-[hsl(var(--theme-muted-foreground))]",children:[(0,t.jsxs)("p",{className:"flex items-center gap-2",children:[(0,t.jsx)(l.User,{className:"w-3 h-3"})," Human intervenes"]}),(0,t.jsxs)("p",{className:"flex items-center gap-2",children:[(0,t.jsx)(n.Bot,{className:"w-3 h-3"})," AI acts autonomously"]}),(0,t.jsxs)("p",{className:"flex items-center gap-2",children:[(0,t.jsx)(o.CheckCircle,{className:"w-3 h-3"})," Approval required"]}),(0,t.jsxs)("p",{className:"flex items-center gap-2",children:[(0,t.jsx)(i.GitBranch,{className:"w-3 h-3"})," Conditional branch"]})]})]})]});return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("div",{className:"hidden md:block w-56 flex-shrink-0 border-r border-[hsl(var(--theme-border))] p-4 space-y-4",style:{backgroundColor:"hsl(var(--theme-card))"},children:d}),(0,t.jsx)(a.AnimatePresence,{children:r&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(s.motion.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:c,className:"md:hidden fixed inset-0 bg-black/50 z-40"}),(0,t.jsxs)(s.motion.div,{initial:{x:"-100%"},animate:{x:0},exit:{x:"-100%"},transition:{type:"spring",damping:25,stiffness:300},className:"md:hidden fixed left-0 top-0 bottom-0 w-72 z-50 p-4 space-y-4 overflow-y-auto",style:{backgroundColor:"hsl(var(--theme-card))"},children:[(0,t.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,t.jsx)("h2",{className:"text-sm font-semibold text-[hsl(var(--theme-foreground))]",children:"Add Nodes"}),(0,t.jsx)("button",{onClick:c,className:"p-2 rounded-lg hover:bg-[hsl(var(--theme-muted))] transition-colors",children:(0,t.jsx)(f.X,{className:"w-5 h-5 text-[hsl(var(--theme-muted-foreground))]"})})]}),d]})]})})]})}function k({initialData:e,onSave:s}){let[l,n]=(0,r.useState)(e?.nodes||[{id:"start",type:"start",title:"Start",description:"Workflow begins",x:50,y:150},{id:"end",type:"end",title:"End",description:"Workflow completes",x:500,y:150}]),[o,i]=(0,r.useState)(e?.connections||[]),[c,d]=(0,r.useState)(null),[m,h]=(0,r.useState)(null),[f,k]=(0,r.useState)({x:0,y:0}),[N,C]=(0,r.useState)(e?.name||"Untitled Workflow"),[S,E]=(0,r.useState)(e?.description||""),[M,A]=(0,r.useState)(!1),L=(0,r.useRef)(null),B=()=>`node_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,R=(0,r.useCallback)(e=>{let t={id:B(),type:e,title:g[e].label,description:"",x:250+100*Math.random(),y:100+100*Math.random()};n(e=>[...e,t]),d(t.id)},[]),P=(0,r.useCallback)((e,t)=>{n(r=>r.map(r=>r.id===e?{...r,...t}:r))},[]),$=(0,r.useCallback)(e=>{"start"!==e&&"end"!==e&&(n(t=>t.filter(t=>t.id!==e)),i(t=>t.filter(t=>t.from!==e&&t.to!==e)),c===e&&d(null))},[c]),U=(0,r.useCallback)(e=>h(e),[]),z=(0,r.useCallback)(e=>{m&&m!==e&&(o.some(t=>t.from===m&&t.to===e)||i(t=>[...t,{id:B(),from:m,to:e}])),h(null)},[m,o]);(0,r.useEffect)(()=>{if(!m)return;let e=e=>{if(!L.current)return;let t=L.current.getBoundingClientRect();k({x:e.clientX-t.left,y:e.clientY-t.top})};return window.addEventListener("mousemove",e),()=>window.removeEventListener("mousemove",e)},[m]),(0,r.useEffect)(()=>{let e=e=>{"Escape"===e.key&&(h(null),d(null)),"Delete"===e.key&&c&&$(c)};return window.addEventListener("keydown",e),()=>window.removeEventListener("keydown",e)},[c,$]);let D=(e,t)=>{let r=l.find(t=>t.id===e);return r?{x:t?r.x+176:r.x,y:r.y+40}:{x:0,y:0}};return(0,t.jsxs)("div",{className:"flex h-full",style:{backgroundColor:"hsl(var(--theme-background))"},children:[(0,t.jsx)(w,{onAddNode:R,isOpen:M,onClose:()=>A(!1)}),(0,t.jsxs)("div",{className:"flex-1 flex flex-col min-w-0",children:[(0,t.jsx)("div",{className:"flex-shrink-0 p-3 sm:p-4 border-b border-[hsl(var(--theme-border))]",style:{backgroundColor:"hsl(var(--theme-card))"},children:(0,t.jsxs)("div",{className:"flex items-center justify-between gap-2 sm:gap-4",children:[(0,t.jsx)("button",{onClick:()=>A(!0),className:(0,b.cn)("md:hidden p-2 rounded-lg","hover:bg-[hsl(var(--theme-muted))] transition-colors"),children:(0,t.jsx)(v.default,{className:"w-5 h-5 text-[hsl(var(--theme-foreground))]"})}),(0,t.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,t.jsx)("input",{type:"text",value:N,onChange:e=>C(e.target.value),className:(0,b.cn)("text-base sm:text-lg font-semibold bg-transparent border-none outline-none w-full","text-[hsl(var(--theme-foreground))] placeholder-[hsl(var(--theme-muted-foreground))]"),style:{fontFamily:"var(--theme-font-heading)"},placeholder:"Workflow name..."}),(0,t.jsx)("input",{type:"text",value:S,onChange:e=>E(e.target.value),className:(0,b.cn)("text-xs sm:text-sm bg-transparent border-none outline-none w-full mt-0.5","text-[hsl(var(--theme-muted-foreground))] placeholder-[hsl(var(--theme-muted-foreground))]"),placeholder:"Add a description..."})]}),(0,t.jsxs)("div",{className:"flex items-center gap-1 sm:gap-2",children:[(0,t.jsxs)("button",{onClick:()=>{let e={nodes:l,connections:o,name:N,description:S};s?.(e),localStorage.setItem("workflow_draft",JSON.stringify(e))},className:(0,b.cn)("flex items-center gap-1 sm:gap-2 px-2 sm:px-3 py-1.5 rounded-lg text-xs sm:text-sm font-medium","bg-[hsl(var(--theme-primary))] text-[hsl(var(--theme-primary-foreground))]","hover:bg-[hsl(var(--theme-primary)/0.9)] transition-colors"),children:[(0,t.jsx)(u.Save,{className:"w-4 h-4"}),(0,t.jsx)("span",{className:"hidden sm:inline",children:"Save"})]}),(0,t.jsxs)("button",{onClick:()=>{let e=new Blob([JSON.stringify({nodes:l,connections:o,name:N,description:S},null,2)],{type:"application/json"}),t=URL.createObjectURL(e),r=document.createElement("a");r.href=t,r.download=`${N.toLowerCase().replace(/\s+/g,"-")}.json`,r.click(),URL.revokeObjectURL(t)},className:(0,b.cn)("flex items-center gap-1 sm:gap-2 px-2 sm:px-3 py-1.5 rounded-lg text-xs sm:text-sm font-medium","bg-[hsl(var(--theme-muted))] text-[hsl(var(--theme-foreground))]","hover:bg-[hsl(var(--theme-muted)/0.8)] transition-colors"),children:[(0,t.jsx)(x.Download,{className:"w-4 h-4"}),(0,t.jsx)("span",{className:"hidden sm:inline",children:"Export"})]})]})]})}),(0,t.jsxs)("div",{ref:L,className:"flex-1 relative overflow-auto",style:{backgroundColor:"hsl(var(--theme-background))",backgroundImage:"radial-gradient(circle at 1px 1px, hsl(var(--theme-border) / 0.3) 1px, transparent 0)",backgroundSize:"32px 32px"},onClick:()=>{d(null),m&&h(null)},children:[o.map(e=>(0,t.jsx)(j,{from:D(e.from,!0),to:D(e.to,!1)},e.id)),m&&(0,t.jsx)(j,{from:D(m,!0),to:f,isTemp:!0}),(0,t.jsx)(a.AnimatePresence,{children:l.map(e=>(0,t.jsx)(y,{node:e,isSelected:c===e.id,onSelect:()=>d(e.id),onDelete:()=>$(e.id),onUpdate:t=>P(e.id,t),onStartConnection:()=>U(e.id),isConnecting:null!==m&&m!==e.id,onCompleteConnection:()=>z(e.id)},e.id))}),l.length<=2&&(0,t.jsx)("div",{className:"absolute inset-0 flex items-center justify-center pointer-events-none",children:(0,t.jsxs)("div",{className:"text-center text-[hsl(var(--theme-muted-foreground))]",children:[(0,t.jsx)(p.Zap,{className:"w-10 h-10 mx-auto mb-3 opacity-40"}),(0,t.jsx)("p",{className:"text-sm font-medium",children:"Build your workflow"}),(0,t.jsx)("p",{className:"text-xs mt-1 opacity-60",children:"Add nodes from the sidebar and connect them"})]})})]}),(0,t.jsx)("div",{className:"flex-shrink-0 px-4 py-2 border-t border-[hsl(var(--theme-border))] text-center",style:{backgroundColor:"hsl(var(--theme-card))"},children:(0,t.jsx)("p",{className:"text-[10px] text-[hsl(var(--theme-muted-foreground))]",children:"Drag to position · Click arrow to connect · Delete to remove · Escape to cancel"})})]})]})}e.s([],767483),e.i(767483),e.s(["WorkflowBuilder",()=>k],207351)},615389,e=>{e.n(e.i(207351))}]);