(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,58977,e=>{"use strict";let s=(0,e.i(699528).default)("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);e.s(["default",()=>s])},271119,e=>{"use strict";var s=e.i(58977);e.s(["ChevronLeft",()=>s.default])},782575,e=>{"use strict";let s=(0,e.i(699528).default)("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);e.s(["default",()=>s])},541956,e=>{"use strict";var s=e.i(782575);e.s(["Upload",()=>s.default])},34345,930344,e=>{"use strict";let s=(0,e.i(699528).default)("Eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);e.s(["default",()=>s],930344),e.s(["Eye",()=>s],34345)},786949,e=>{"use strict";let s=(0,e.i(699528).default)("Database",[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]]);e.s(["default",()=>s])},950717,e=>{"use strict";var s=e.i(786949);e.s(["Database",()=>s.default])},650425,194623,e=>{"use strict";let s=(0,e.i(699528).default)("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);e.s(["default",()=>s],194623),e.s(["TrendingUp",()=>s],650425)},239671,e=>{"use strict";let s=(0,e.i(699528).default)("LogIn",[["path",{d:"M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4",key:"u53s6r"}],["polyline",{points:"10 17 15 12 10 7",key:"1ail0h"}],["line",{x1:"15",x2:"3",y1:"12",y2:"12",key:"v6grx8"}]]);e.s(["default",()=>s])},847562,e=>{"use strict";var s=e.i(239671);e.s(["LogIn",()=>s.default])},47093,e=>{"use strict";let s=(0,e.i(699528).default)("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]);e.s(["default",()=>s])},856625,e=>{"use strict";var s=e.i(47093);e.s(["Filter",()=>s.default])},405541,e=>{"use strict";let s;var t=e.i(726151),l=e.i(923041),a=e.i(662582),r=e.i(278124),i=e.i(140113),o=e.i(850402),n=e.i(946200),c=e.i(895579);e.i(621586);var d=e.i(910158),m=e.i(902146),h=e.i(158095),u=e.i(271119),x=e.i(678295),p=e.i(746115),y=e.i(950717),v=e.i(843762),f=e.i(610724),g=e.i(541956),j=e.i(413698),b=e.i(254862),N=e.i(745834),w=e.i(92768),k=e.i(856625),C=e.i(734545),S=e.i(954621),T=e.i(827447),M=e.i(293485),L=e.i(650425),D=e.i(974478),A=e.i(34345),I=e.i(517703),U=e.i(801365),O=e.i(129828),E=e.i(847562);let F=null;try{let e=(()=>{let e=Error("Cannot find module '../../../convex/_generated/api'");throw e.code="MODULE_NOT_FOUND",e})().api;F=e?.memories}catch{}try{s=(()=>{let e=Error("Cannot find module '../../../convex/_generated/api'");throw e.code="MODULE_NOT_FOUND",e})().api?.userManagement}catch{s=null}function $(){let{user:e,isLoaded:h}=(0,n.useUser)(),{designTheme:b}=(0,m.useDesignTheme)(),[N,D]=(0,l.useState)("memories"),[A,I]=(0,l.useState)(""),[U,$]=(0,l.useState)(null),H=e?.id,K=(0,o.useQuery)(s?.getManagedUserByClerkId,H?{clerkId:H}:"skip"),Q=!h||H&&void 0===K,Y=(0,l.useMemo)(()=>!!e&&!!K&&("owner"===K.role||"admin"===K.role),[e,K]),V=(0,o.useQuery)(F?.getMemoryStats??null,F&&Y?{userId:e?.id??""}:"skip"),J=(0,o.useQuery)(F?.getRecentEpisodic??null,F&&Y?{userId:e?.id??"",limit:20}:"skip"),Z=(0,o.useQuery)(F?.getAllSemantic??null,F&&Y?{userId:e?.id??""}:"skip"),X=(0,o.useMutation)(F?.deleteEpisodic??null),ee=(0,o.useMutation)(F?.deleteSemantic??null);if(Q)return(0,t.jsx)("div",{className:"min-h-screen flex items-center justify-center",style:{backgroundColor:"hsl(var(--theme-background))"},"data-design-theme":b,children:(0,t.jsx)(p.Loader2,{className:"w-8 h-8 animate-spin",style:{color:"hsl(var(--theme-primary))"}})});if(!Y)return(0,t.jsx)(d.PageTransition,{children:(0,t.jsx)("div",{className:"min-h-screen flex flex-col items-center justify-center p-4",style:{backgroundColor:"hsl(var(--theme-background))"},"data-design-theme":b,children:(0,t.jsxs)("div",{className:"text-center max-w-md",children:[(0,t.jsx)("div",{className:"w-16 h-16 rounded-2xl flex items-center justify-center mx-auto mb-6",style:{backgroundColor:"hsl(var(--theme-primary) / 0.1)"},children:(0,t.jsx)(O.Lock,{className:"w-8 h-8",style:{color:"hsl(var(--theme-primary))"}})}),(0,t.jsx)("h1",{className:"text-2xl font-bold mb-2",style:{color:"hsl(var(--theme-foreground))"},children:"Memory Control Center"}),(0,t.jsx)("p",{className:"mb-8",style:{color:"hsl(var(--theme-muted-foreground))"},children:e?"Owner access required. This feature is only available to the owner.":"Sign in with your account to access memories."}),e?null:(0,t.jsx)(c.SignInButton,{mode:"modal",children:(0,t.jsxs)("button",{className:"inline-flex items-center gap-2 px-6 py-3 rounded-xl font-medium transition-colors",style:{backgroundColor:"hsl(var(--theme-primary))",color:"hsl(var(--theme-primary-foreground))"},children:[(0,t.jsx)(E.LogIn,{className:"w-4 h-4"}),"Sign In"]})}),(0,t.jsxs)(i.default,{href:"/",className:"mt-4 inline-flex items-center gap-1 text-sm hover:underline",style:{color:"hsl(var(--theme-muted-foreground))"},children:[(0,t.jsx)(u.ChevronLeft,{className:"w-4 h-4"}),"Back to home"]})]})})});let es=[{id:"memories",label:"Memories",icon:y.Database},{id:"insights",label:"Insights",icon:v.Sparkles},{id:"upload",label:"Upload",icon:g.Upload},{id:"settings",label:"Settings",icon:j.Settings}],et={interaction:T.MessageSquare,decision:S.Target,preference:M.Lightbulb,feedback:L.TrendingUp,milestone:C.Zap},el=async s=>{if(!X)return void console.error("Delete mutation not available");try{await X({memoryId:s,userId:e?.id??""})}catch(e){console.error("Failed to delete memory:",e)}},ea=async s=>{if(!ee)return void console.error("Delete mutation not available");try{await ee({memoryId:s,userId:e?.id??""})}catch(e){console.error("Failed to delete memory:",e)}};return(0,t.jsx)(d.PageTransition,{children:(0,t.jsxs)("div",{className:"min-h-screen transition-colors duration-500",style:{backgroundColor:"hsl(var(--theme-background))",color:"hsl(var(--theme-foreground))",fontFamily:"var(--theme-font)"},"data-design-theme":b,children:[(0,t.jsx)("header",{className:"sticky top-0 z-40 backdrop-blur-xl border-b",style:{backgroundColor:"hsl(var(--theme-background) / 0.8)",borderColor:"hsl(var(--theme-border))"},children:(0,t.jsxs)("div",{className:"max-w-6xl mx-auto px-4 py-4",children:[(0,t.jsxs)("div",{className:"flex items-center gap-4",children:[(0,t.jsx)(i.default,{href:"/",className:"p-2 -ml-2 rounded-xl transition-colors hover:opacity-80",style:{backgroundColor:"hsl(var(--theme-muted) / 0.5)"},"aria-label":"Go back",children:(0,t.jsx)(u.ChevronLeft,{className:"w-5 h-5"})}),(0,t.jsxs)("div",{className:"flex-1",children:[(0,t.jsx)("h1",{className:"text-xl font-semibold",children:"Memory Control Center"}),(0,t.jsx)("p",{className:"text-xs",style:{color:"hsl(var(--theme-muted-foreground))"},children:"RLM Self-Learning System"})]}),(0,t.jsx)("div",{className:"w-10 h-10 rounded-xl flex items-center justify-center",style:{background:"linear-gradient(135deg, hsl(var(--theme-primary)), hsl(var(--theme-accent)))"},children:(0,t.jsx)(x.Brain,{className:"w-5 h-5 text-white"})})]}),(0,t.jsx)("div",{className:"flex gap-2 mt-4 overflow-x-auto pb-2 -mb-2",children:es.map(e=>{let s=e.icon,l=N===e.id;return(0,t.jsxs)(a.motion.button,{onClick:()=>D(e.id),whileHover:{scale:1.02},whileTap:{scale:.98},className:"flex items-center gap-2 px-4 py-2 rounded-xl text-sm font-medium transition-colors whitespace-nowrap",style:{backgroundColor:l?"hsl(var(--theme-primary))":"hsl(var(--theme-muted) / 0.5)",color:l?"hsl(var(--theme-primary-foreground))":"hsl(var(--theme-muted-foreground))"},children:[(0,t.jsx)(s,{className:"w-4 h-4"}),e.label]},e.id)})})]})}),(0,t.jsx)("main",{className:"max-w-6xl mx-auto px-4 py-6",children:(0,t.jsxs)(r.AnimatePresence,{mode:"wait",children:["memories"===N&&(0,t.jsxs)(a.motion.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},transition:{duration:.3},children:[(0,t.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mb-6",children:[(0,t.jsx)(P,{icon:y.Database,label:"Episodic",value:V?.episodicCount??0,subtitle:"memories"}),(0,t.jsx)(P,{icon:v.Sparkles,label:"Semantic",value:V?.semanticCount??0,subtitle:"facts"}),(0,t.jsx)(P,{icon:f.Clock,label:"Active",value:V?.activeWorkingSessions??0,subtitle:"sessions"}),(0,t.jsx)(P,{icon:L.TrendingUp,label:"Avg Confidence",value:`${((V?.avgSemanticConfidence??0)*100).toFixed(0)}%`,subtitle:"semantic"})]}),(0,t.jsxs)("div",{className:"flex gap-3 mb-6",children:[(0,t.jsxs)("div",{className:"flex-1 flex items-center gap-2 px-4 py-3 rounded-xl",style:{backgroundColor:"hsl(var(--theme-muted) / 0.5)",borderColor:"hsl(var(--theme-border))"},children:[(0,t.jsx)(w.Search,{className:"w-4 h-4",style:{color:"hsl(var(--theme-muted-foreground))"}}),(0,t.jsx)("input",{type:"text",placeholder:"Search memories...",value:A,onChange:e=>I(e.target.value),className:"flex-1 bg-transparent outline-none text-sm",style:{color:"hsl(var(--theme-foreground))"}})]}),(0,t.jsx)(a.motion.button,{whileHover:{scale:1.02},whileTap:{scale:.98},className:"flex items-center gap-2 px-4 py-3 rounded-xl",style:{backgroundColor:"hsl(var(--theme-muted) / 0.5)"},children:(0,t.jsx)(k.Filter,{className:"w-4 h-4"})})]}),(0,t.jsxs)("div",{className:"flex gap-2 mb-6 overflow-x-auto pb-2",children:[(0,t.jsx)(R,{label:"All",isActive:null===U,onClick:()=>$(null)}),Object.entries(V?.episodicByType??{}).map(([e,s])=>(0,t.jsx)(R,{label:`${e} (${s})`,isActive:U===e,onClick:()=>$(e),icon:et[e]},e))]}),(0,t.jsxs)("div",{className:"mb-8",children:[(0,t.jsx)("h2",{className:"text-lg font-semibold mb-4",children:"Recent Memories"}),(0,t.jsxs)("div",{className:"space-y-3",children:[J?.filter(e=>!U||e.memoryType===U)?.filter(e=>!A||e.content.toLowerCase().includes(A.toLowerCase()))?.map(e=>{let s=et[e.memoryType]||x.Brain;return(0,t.jsx)(B,{icon:s,type:e.memoryType,content:e.content,importance:e.importance,timestamp:e.timestamp,onDelete:()=>el(e._id)},e._id)}),(!J||0===J.length)&&(0,t.jsx)(_,{message:"No memories yet. Start chatting to build your memory layer."})]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("h2",{className:"text-lg font-semibold mb-4",children:"What I Know About You"}),(0,t.jsxs)("div",{className:"space-y-3",children:[Z?.map(e=>(0,t.jsx)(G,{category:e.category,memoryKey:e.key,value:e.value,confidence:e.confidence,accessCount:e.accessCount,onDelete:()=>ea(e._id)},e._id)),(!Z||0===Z.length)&&(0,t.jsx)(_,{message:"No learned facts yet. The system learns from your interactions."})]})]})]},"memories"),"insights"===N&&(0,t.jsx)(a.motion.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},transition:{duration:.3},children:(0,t.jsx)(q,{stats:V,semantic:Z})},"insights"),"upload"===N&&(0,t.jsx)(a.motion.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},transition:{duration:.3},children:(0,t.jsx)(W,{})},"upload"),"settings"===N&&(0,t.jsx)(a.motion.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},transition:{duration:.3},children:(0,t.jsx)(z,{stats:V})},"settings")]})})]})})}function P({icon:e,label:s,value:l,subtitle:a}){return(0,t.jsxs)(h.LiquidGlass,{variant:"card",intensity:"subtle",className:"p-4",children:[(0,t.jsx)("div",{className:"flex items-start justify-between mb-2",children:(0,t.jsx)(e,{className:"w-5 h-5",style:{color:"hsl(var(--theme-primary))"}})}),(0,t.jsx)("div",{className:"text-2xl font-bold",style:{color:"hsl(var(--theme-foreground))"},children:l}),(0,t.jsxs)("div",{className:"text-xs",style:{color:"hsl(var(--theme-muted-foreground))"},children:[s," ",a]})]})}function R({label:e,isActive:s,onClick:l,icon:r}){return(0,t.jsxs)(a.motion.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:l,className:"flex items-center gap-1.5 px-3 py-1.5 rounded-full text-xs font-medium whitespace-nowrap transition-colors",style:{backgroundColor:s?"hsl(var(--theme-primary))":"hsl(var(--theme-muted) / 0.5)",color:s?"hsl(var(--theme-primary-foreground))":"hsl(var(--theme-muted-foreground))"},children:[r&&(0,t.jsx)(r,{className:"w-3 h-3"}),e]})}function B({icon:e,type:s,content:r,importance:i,timestamp:o,onDelete:n}){let[c,d]=(0,l.useState)(!1);return(0,t.jsx)(a.motion.div,{layout:!0,initial:{opacity:0,y:10},animate:{opacity:1,y:0},exit:{opacity:0,x:-100},className:"p-4 rounded-2xl border transition-colors",style:{backgroundColor:"hsl(var(--theme-card))",borderColor:"hsl(var(--theme-border))"},children:(0,t.jsxs)("div",{className:"flex items-start gap-3",children:[(0,t.jsx)("div",{className:"w-8 h-8 rounded-lg flex items-center justify-center flex-shrink-0",style:{backgroundColor:"hsl(var(--theme-primary) / 0.1)"},children:(0,t.jsx)(e,{className:"w-4 h-4",style:{color:"hsl(var(--theme-primary))"}})}),(0,t.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2 mb-1",children:[(0,t.jsx)("span",{className:"text-xs font-medium px-2 py-0.5 rounded-full",style:{backgroundColor:"hsl(var(--theme-muted) / 0.5)",color:"hsl(var(--theme-muted-foreground))"},children:s}),(0,t.jsx)("span",{className:"text-xs",style:{color:"hsl(var(--theme-muted-foreground))"},children:new Date(o).toLocaleDateString()}),(0,t.jsx)("div",{className:"flex-1"}),(0,t.jsxs)("div",{className:"text-xs font-medium",style:{color:`hsl(var(--theme-primary) / ${i})`},children:[(100*i).toFixed(0),"%"]})]}),(0,t.jsx)("p",{className:"text-sm",style:{color:"hsl(var(--theme-foreground))"},children:r})]}),c?(0,t.jsxs)("div",{className:"flex gap-1",children:[(0,t.jsx)(a.motion.button,{whileTap:{scale:.95},onClick:n,className:"p-2 rounded-lg text-red-500 hover:bg-red-500/10",children:(0,t.jsx)(b.Trash2,{className:"w-4 h-4"})}),(0,t.jsx)(a.motion.button,{whileTap:{scale:.95},onClick:()=>d(!1),className:"p-2 rounded-lg hover:opacity-70",style:{color:"hsl(var(--theme-muted-foreground))"},children:"✕"})]}):(0,t.jsx)(a.motion.button,{whileTap:{scale:.95},onClick:()=>d(!0),className:"p-2 rounded-lg opacity-0 group-hover:opacity-100 hover:opacity-70 transition-opacity",style:{color:"hsl(var(--theme-muted-foreground))"},children:(0,t.jsx)(b.Trash2,{className:"w-4 h-4"})})]})})}function G({category:e,memoryKey:s,value:r,confidence:i,accessCount:o,onDelete:n}){let[c,d]=(0,l.useState)(!1),m={preference:"hsl(280 70% 50%)",skill:"hsl(150 70% 40%)",pattern:"hsl(200 70% 50%)",fact:"hsl(40 70% 50%)"};return(0,t.jsx)(a.motion.div,{layout:!0,initial:{opacity:0,y:10},animate:{opacity:1,y:0},exit:{opacity:0,x:-100},className:"p-4 rounded-2xl border transition-colors group",style:{backgroundColor:"hsl(var(--theme-card))",borderColor:"hsl(var(--theme-border))"},children:(0,t.jsxs)("div",{className:"flex items-start gap-3",children:[(0,t.jsx)("div",{className:"w-8 h-8 rounded-lg flex items-center justify-center flex-shrink-0",style:{backgroundColor:`${m[e]}20`},children:(0,t.jsx)(v.Sparkles,{className:"w-4 h-4",style:{color:m[e]}})}),(0,t.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2 mb-1",children:[(0,t.jsx)("span",{className:"text-xs font-medium px-2 py-0.5 rounded-full",style:{backgroundColor:`${m[e]}20`,color:m[e]},children:e}),(0,t.jsx)("span",{className:"text-xs font-mono",style:{color:"hsl(var(--theme-muted-foreground))"},children:s})]}),(0,t.jsx)("p",{className:"text-sm mb-2",style:{color:"hsl(var(--theme-foreground))"},children:r}),(0,t.jsxs)("div",{className:"flex items-center gap-4",children:[(0,t.jsxs)("div",{className:"flex items-center gap-1",children:[(0,t.jsx)("div",{className:"h-1.5 w-16 rounded-full overflow-hidden",style:{backgroundColor:"hsl(var(--theme-muted) / 0.5)"},children:(0,t.jsx)(a.motion.div,{className:"h-full rounded-full",style:{backgroundColor:m[e]},initial:{width:0},animate:{width:`${100*i}%`},transition:{duration:.5,delay:.2}})}),(0,t.jsxs)("span",{className:"text-xs",style:{color:"hsl(var(--theme-muted-foreground))"},children:[(100*i).toFixed(0),"%"]})]}),(0,t.jsxs)("span",{className:"text-xs",style:{color:"hsl(var(--theme-muted-foreground))"},children:[o," accesses"]})]})]}),c?(0,t.jsxs)("div",{className:"flex gap-1",children:[(0,t.jsx)(a.motion.button,{whileTap:{scale:.95},onClick:n,className:"p-2 rounded-lg text-red-500 hover:bg-red-500/10",children:(0,t.jsx)(b.Trash2,{className:"w-4 h-4"})}),(0,t.jsx)(a.motion.button,{whileTap:{scale:.95},onClick:()=>d(!1),className:"p-2 rounded-lg hover:opacity-70",style:{color:"hsl(var(--theme-muted-foreground))"},children:"✕"})]}):(0,t.jsx)(a.motion.button,{whileTap:{scale:.95},onClick:()=>d(!0),className:"p-2 rounded-lg opacity-0 group-hover:opacity-100 hover:opacity-70 transition-opacity",style:{color:"hsl(var(--theme-muted-foreground))"},children:(0,t.jsx)(b.Trash2,{className:"w-4 h-4"})})]})})}function _({message:e}){return(0,t.jsxs)("div",{className:"p-8 rounded-2xl text-center",style:{backgroundColor:"hsl(var(--theme-muted) / 0.3)"},children:[(0,t.jsx)(x.Brain,{className:"w-12 h-12 mx-auto mb-3",style:{color:"hsl(var(--theme-muted-foreground))"}}),(0,t.jsx)("p",{className:"text-sm",style:{color:"hsl(var(--theme-muted-foreground))"},children:e})]})}function q({stats:e,semantic:s}){let l=s?.reduce((e,s)=>(e[s.category]=(e[s.category]||0)+1,e),{})??{},r=Object.entries(e?.episodicByType??{}).map(([e,s])=>({label:e,value:s})),i=Object.entries(l).map(([e,s])=>({label:e,value:s})),o={interaction:"hsl(var(--theme-primary))",decision:"hsl(200 70% 50%)",preference:"hsl(280 70% 50%)",feedback:"hsl(150 70% 40%)",milestone:"hsl(40 70% 50%)"},n={preference:"hsl(280 70% 50%)",skill:"hsl(150 70% 40%)",pattern:"hsl(200 70% 50%)",fact:"hsl(40 70% 50%)"};return(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsxs)(h.LiquidGlass,{variant:"panel",intensity:"subtle",children:[(0,t.jsxs)("h2",{className:"text-lg font-semibold mb-6 flex items-center gap-2",children:[(0,t.jsx)(A.Eye,{className:"w-5 h-5",style:{color:"hsl(var(--theme-primary))"}}),"Memory Distribution"]}),(0,t.jsxs)("div",{className:"grid md:grid-cols-2 gap-8",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h3",{className:"text-sm font-medium mb-4",style:{color:"hsl(var(--theme-muted-foreground))"},children:"Episodic Memories by Type"}),(0,t.jsxs)("div",{className:"space-y-3",children:[r.map((e,s)=>{let l=Math.max(...r.map(e=>e.value),1),i=o[e.label]||"hsl(var(--theme-primary))";return(0,t.jsxs)("div",{className:"space-y-1",children:[(0,t.jsxs)("div",{className:"flex justify-between text-xs",children:[(0,t.jsx)("span",{className:"capitalize",children:e.label}),(0,t.jsx)("span",{style:{color:"hsl(var(--theme-muted-foreground))"},children:e.value})]}),(0,t.jsx)("div",{className:"h-3 rounded-full overflow-hidden",style:{backgroundColor:"hsl(var(--theme-muted) / 0.3)"},children:(0,t.jsx)(a.motion.div,{className:"h-full rounded-full",style:{backgroundColor:i},initial:{width:0},animate:{width:`${e.value/l*100}%`},transition:{duration:.8,delay:.1*s,ease:"easeOut"}})})]},s)}),0===r.length&&(0,t.jsx)("p",{className:"text-sm",style:{color:"hsl(var(--theme-muted-foreground))"},children:"No episodic memories yet"})]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("h3",{className:"text-sm font-medium mb-4",style:{color:"hsl(var(--theme-muted-foreground))"},children:"Semantic Knowledge"}),i.length>0?(0,t.jsxs)("div",{className:"flex items-center gap-6",children:[(0,t.jsx)(H,{data:i,colors:n}),(0,t.jsx)("div",{className:"space-y-2",children:i.map((e,s)=>{let l=n[e.label]||"hsl(var(--theme-primary))",a=i.reduce((e,s)=>e+s.value,0);return(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)("div",{className:"w-3 h-3 rounded-sm",style:{backgroundColor:l}}),(0,t.jsx)("span",{className:"text-xs capitalize",children:e.label}),(0,t.jsxs)("span",{className:"text-xs",style:{color:"hsl(var(--theme-muted-foreground))"},children:["(",Math.round(e.value/a*100),"%)"]})]},s)})})]}):(0,t.jsx)("p",{className:"text-sm",style:{color:"hsl(var(--theme-muted-foreground))"},children:"No semantic memories yet"})]})]})]}),(0,t.jsxs)(h.LiquidGlass,{variant:"panel",intensity:"subtle",children:[(0,t.jsxs)("h2",{className:"text-lg font-semibold mb-4 flex items-center gap-2",children:[(0,t.jsx)(L.TrendingUp,{className:"w-5 h-5",style:{color:"hsl(var(--theme-primary))"}}),"Self-Learning Progress"]}),(0,t.jsx)("p",{className:"text-sm mb-6",style:{color:"hsl(var(--theme-muted-foreground))"},children:"Your digital twin is evolving. Each interaction builds deeper understanding."}),(0,t.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mb-6",children:[(0,t.jsx)(K,{label:"Total Knowledge",value:(e?.episodicCount??0)+(e?.semanticCount??0),suffix:"items"}),(0,t.jsx)(K,{label:"Avg Importance",value:((e?.avgEpisodicImportance??0)*100).toFixed(0),suffix:"%"}),(0,t.jsx)(K,{label:"Avg Confidence",value:((e?.avgSemanticConfidence??0)*100).toFixed(0),suffix:"%"}),(0,t.jsx)(K,{label:"Active Sessions",value:e?.activeWorkingSessions??0,suffix:"live"})]}),(0,t.jsx)("div",{className:"flex items-center justify-center py-6",children:(0,t.jsxs)("div",{className:"relative",children:[(0,t.jsxs)("svg",{className:"w-32 h-32 transform -rotate-90",children:[(0,t.jsx)("circle",{cx:"64",cy:"64",r:"56",stroke:"hsl(var(--theme-muted) / 0.3)",strokeWidth:"8",fill:"none"}),(0,t.jsx)(a.motion.circle,{cx:"64",cy:"64",r:"56",stroke:"url(#progressGradient)",strokeWidth:"8",fill:"none",strokeLinecap:"round",initial:{strokeDasharray:"0 352"},animate:{strokeDasharray:`${3.52*Math.min(100,(e?.episodicCount??0)+(e?.semanticCount??0))} 352`},transition:{duration:1.5,ease:"easeOut"}}),(0,t.jsx)("defs",{children:(0,t.jsxs)("linearGradient",{id:"progressGradient",x1:"0%",y1:"0%",x2:"100%",y2:"0%",children:[(0,t.jsx)("stop",{offset:"0%",stopColor:"hsl(var(--theme-primary))"}),(0,t.jsx)("stop",{offset:"100%",stopColor:"hsl(var(--theme-accent))"})]})})]}),(0,t.jsxs)("div",{className:"absolute inset-0 flex flex-col items-center justify-center",children:[(0,t.jsx)("span",{className:"text-2xl font-bold",children:Math.min(100,(e?.episodicCount??0)+(e?.semanticCount??0))}),(0,t.jsx)("span",{className:"text-xs",style:{color:"hsl(var(--theme-muted-foreground))"},children:"memories"})]})]})})]}),(0,t.jsxs)("div",{className:"p-4 rounded-xl border",style:{backgroundColor:"hsl(var(--theme-primary) / 0.05)",borderColor:"hsl(var(--theme-primary) / 0.2)"},children:[(0,t.jsx)("p",{className:"text-sm italic",style:{color:"hsl(var(--theme-muted-foreground))"},children:"“Recursive Memory + Proper Database = Infinite Memory. Infinite Memory = Self-Learning.”"}),(0,t.jsx)("p",{className:"text-xs mt-2",style:{color:"hsl(var(--theme-muted-foreground) / 0.7)"},children:"— RLM Philosophy, MIT OASYS Lab"})]})]})}function H({data:e,colors:s}){let l=e.reduce((e,s)=>e+s.value,0);if(0===l)return null;let r=0,i=e.map(e=>{let t=e.value/l*360,a={...e,color:s[e.label]||"hsl(var(--theme-primary))",startAngle:r,endAngle:r+t};return r+=t,a}).map(e=>`${e.color} ${e.startAngle}deg ${e.endAngle}deg`).join(", ");return(0,t.jsx)(a.motion.div,{className:"w-24 h-24 rounded-full",style:{background:`conic-gradient(${i})`},initial:{scale:0,rotate:-180},animate:{scale:1,rotate:0},transition:{duration:.8,ease:"easeOut"}})}function K({label:e,value:s,suffix:l}){return(0,t.jsxs)("div",{className:"p-4 rounded-xl text-center",style:{backgroundColor:"hsl(var(--theme-muted) / 0.3)"},children:[(0,t.jsx)("div",{className:"text-2xl font-bold",style:{color:"hsl(var(--theme-primary))"},children:s}),(0,t.jsx)("div",{className:"text-xs",style:{color:"hsl(var(--theme-muted-foreground))"},children:l}),(0,t.jsx)("div",{className:"text-xs mt-1 font-medium",children:e})]})}function W(){let[e,s]=(0,l.useState)(!1),[r,i]=(0,l.useState)([]),o=(0,l.useRef)(null),n=async e=>{i(s=>[...s,{name:e.name,status:"processing"}]);try{let s=new FormData;s.append("file",e);let t=await fetch("/api/memory/upload",{method:"POST",body:s}),l=await t.json();t.ok?i(s=>s.map(s=>s.name===e.name?{...s,status:"done",memories:l.memoriesStored}:s)):i(s=>s.map(s=>s.name===e.name?{...s,status:"error",error:l.error}:s))}catch(s){i(s=>s.map(s=>s.name===e.name?{...s,status:"error",error:"Upload failed"}:s))}},c=async e=>{for(let t of(e.preventDefault(),s(!1),Array.from(e.dataTransfer.files)))await n(t)},d=async e=>{for(let s of Array.from(e.target.files||[]))await n(s);o.current&&(o.current.value="")};return(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsx)("input",{ref:o,type:"file",accept:".md,.txt,.json,.csv",multiple:!0,className:"hidden",onChange:d}),(0,t.jsxs)(a.motion.div,{onDrop:c,onDragOver:e=>{e.preventDefault(),s(!0)},onDragLeave:()=>{s(!1)},onClick:()=>o.current?.click(),animate:{scale:e?1.02:1},className:"border-2 border-dashed rounded-3xl p-12 text-center transition-colors cursor-pointer",style:{borderColor:e?"hsl(var(--theme-primary))":"hsl(var(--theme-border))",backgroundColor:e?"hsl(var(--theme-primary) / 0.05)":"transparent"},children:[(0,t.jsx)(g.Upload,{className:"w-12 h-12 mx-auto mb-4",style:{color:e?"hsl(var(--theme-primary))":"hsl(var(--theme-muted-foreground))"}}),(0,t.jsx)("h3",{className:"text-lg font-semibold mb-2",children:"Drop files here or click to upload"}),(0,t.jsx)("p",{className:"text-sm mb-4",style:{color:"hsl(var(--theme-muted-foreground))"},children:"Import your data to build your personal memory layer"}),(0,t.jsx)("div",{className:"flex flex-wrap gap-2 justify-center",children:[".md",".txt",".json",".csv"].map(e=>(0,t.jsx)("span",{className:"px-3 py-1 rounded-full text-xs font-mono",style:{backgroundColor:"hsl(var(--theme-muted) / 0.5)"},children:e},e))})]}),r.length>0&&(0,t.jsxs)(h.LiquidGlass,{variant:"panel",intensity:"subtle",children:[(0,t.jsx)("h3",{className:"text-sm font-semibold mb-4",children:"Recent Uploads"}),(0,t.jsx)("div",{className:"space-y-3",children:r.map((e,s)=>(0,t.jsxs)("div",{className:"flex items-center gap-3 p-3 rounded-xl",style:{backgroundColor:"hsl(var(--theme-muted) / 0.3)"},children:[(0,t.jsx)(I.FileText,{className:"w-5 h-5",style:{color:"hsl(var(--theme-primary))"}}),(0,t.jsx)("span",{className:"flex-1 text-sm font-medium truncate",children:e.name}),"processing"===e.status?(0,t.jsxs)("span",{className:"text-xs flex items-center gap-1",style:{color:"hsl(var(--theme-muted-foreground))"},children:[(0,t.jsx)(p.Loader2,{className:"w-3 h-3 animate-spin"}),"Processing..."]}):"done"===e.status?(0,t.jsxs)("span",{className:"text-xs text-green-500",children:["✓ ",e.memories," memories"]}):(0,t.jsx)("span",{className:"text-xs text-red-500",children:"Error"})]},s))})]}),(0,t.jsxs)("div",{className:"p-4 rounded-xl flex items-start gap-3",style:{backgroundColor:"hsl(var(--theme-primary) / 0.1)"},children:[(0,t.jsx)(U.AlertCircle,{className:"w-5 h-5 flex-shrink-0",style:{color:"hsl(var(--theme-primary))"}}),(0,t.jsxs)("div",{children:[(0,t.jsx)("h4",{className:"text-sm font-medium mb-1",children:"How Upload Works"}),(0,t.jsx)("p",{className:"text-xs",style:{color:"hsl(var(--theme-muted-foreground))"},children:"Files are processed by AI to extract meaningful memories. Text is chunked, classified by type, and stored as episodic or semantic memories with importance scores."})]})]})]})}function z({stats:e}){return(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsxs)(h.LiquidGlass,{variant:"panel",intensity:"subtle",children:[(0,t.jsxs)("h2",{className:"text-lg font-semibold mb-4 flex items-center gap-2",children:[(0,t.jsx)(D.Shield,{className:"w-5 h-5",style:{color:"hsl(var(--theme-primary))"}}),"Privacy Controls"]}),(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsx)(Q,{label:"Store interactions automatically",description:"Learn from your chat interactions",defaultChecked:!0}),(0,t.jsx)(Q,{label:"Extract patterns",description:"Identify and remember your preferences",defaultChecked:!0}),(0,t.jsx)(Q,{label:"Store decision history",description:"Remember choices you've made",defaultChecked:!0})]})]}),(0,t.jsxs)(h.LiquidGlass,{variant:"panel",intensity:"subtle",children:[(0,t.jsxs)("h2",{className:"text-lg font-semibold mb-4 flex items-center gap-2",children:[(0,t.jsx)(y.Database,{className:"w-5 h-5",style:{color:"hsl(var(--theme-primary))"}}),"Data Management"]}),(0,t.jsxs)("div",{className:"space-y-3",children:[(0,t.jsxs)(a.motion.button,{whileHover:{scale:1.01},whileTap:{scale:.99},className:"w-full flex items-center gap-3 p-4 rounded-xl transition-colors",style:{backgroundColor:"hsl(var(--theme-muted) / 0.3)"},children:[(0,t.jsx)(N.Download,{className:"w-5 h-5",style:{color:"hsl(var(--theme-primary))"}}),(0,t.jsxs)("div",{className:"flex-1 text-left",children:[(0,t.jsx)("div",{className:"text-sm font-medium",children:"Export All Memories"}),(0,t.jsxs)("div",{className:"text-xs",style:{color:"hsl(var(--theme-muted-foreground))"},children:["Download as JSON (",(e?.episodicCount??0)+(e?.semanticCount??0)," items)"]})]})]}),(0,t.jsxs)(a.motion.button,{whileHover:{scale:1.01},whileTap:{scale:.99},className:"w-full flex items-center gap-3 p-4 rounded-xl transition-colors text-red-500",style:{backgroundColor:"hsl(0 70% 50% / 0.1)"},children:[(0,t.jsx)(b.Trash2,{className:"w-5 h-5"}),(0,t.jsxs)("div",{className:"flex-1 text-left",children:[(0,t.jsx)("div",{className:"text-sm font-medium",children:"Clear All Memories"}),(0,t.jsx)("div",{className:"text-xs opacity-70",children:"This action cannot be undone"})]})]})]})]}),(0,t.jsxs)("div",{className:"text-center pt-4",children:[(0,t.jsx)("p",{className:"text-xs",style:{color:"hsl(var(--theme-muted-foreground))"},children:"RLM Memory System v1.0"}),(0,t.jsx)("p",{className:"text-xs mt-1",style:{color:"hsl(var(--theme-muted-foreground) / 0.7)"},children:"Inspired by MIT OASYS Lab Research"})]})]})}function Q({label:e,description:s,defaultChecked:r}){let[i,o]=(0,l.useState)(r??!1);return(0,t.jsxs)("div",{className:"flex items-center justify-between py-2",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("div",{className:"text-sm font-medium",children:e}),(0,t.jsx)("div",{className:"text-xs",style:{color:"hsl(var(--theme-muted-foreground))"},children:s})]}),(0,t.jsx)(a.motion.button,{onClick:()=>o(!i),className:"w-12 h-7 rounded-full p-1 transition-colors",style:{backgroundColor:i?"hsl(var(--theme-primary))":"hsl(var(--theme-muted) / 0.5)"},children:(0,t.jsx)(a.motion.div,{className:"w-5 h-5 rounded-full bg-white",animate:{x:20*!!i},transition:{type:"spring",stiffness:500,damping:30}})})]})}e.s(["MemoryClient",()=>$])},98242,e=>{e.n(e.i(405541))},276622,e=>{e.v(s=>Promise.all(["static/chunks/e9a36fd48fa91706.js","static/chunks/6f90eb9222fdcbd4.js"].map(s=>e.l(s))).then(()=>s(556113)))}]);