(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,913515,e=>{"use strict";var t=e.i(726151),a=e.i(750755),s=e.i(923041),i=e.i(662582),n=e.i(278124),r=e.i(403476),l=e.i(140113),o=e.i(242092),c=e.i(902146),d=e.i(86066),m=e.i(576161),u=e.i(298130),x=e.i(593136),p=e.i(754401),h=e.i(574238),f=e.i(165558),b=e.i(684750),g=e.i(122429),y=e.i(207581),j=e.i(555603),w=e.i(531958),v=e.i(953189),v=v,N=e.i(55841),$=e.i(121189),k=e.i(489687),k=k,S=e.i(572445),S=S,C=e.i(170670),M=e.i(617415),A=e.i(804538),F=e.i(51278),R=e.i(541956),P=e.i(745834),B=e.i(591372),T=e.i(746115),E=e.i(843762),U=e.i(279821),I=e.i(310010),D=e.i(459201),z=e.i(790484),L=e.i(685788),L=L,G=e.i(629386),H=e.i(384785),O=e.i(734545),V=e.i(940945);e.i(621586);var _=e.i(910158);let J=["bg-violet-500","bg-cyan-500","bg-pink-500","bg-amber-500","bg-emerald-500","bg-rose-500","bg-blue-500","bg-orange-500","bg-indigo-500","bg-teal-500"],q={"bg-violet-500":"#8b5cf6","bg-cyan-500":"#06b6d4","bg-pink-500":"#ec4899","bg-amber-500":"#f59e0b","bg-emerald-500":"#10b981","bg-rose-500":"#f43f5e","bg-blue-500":"#3b82f6","bg-orange-500":"#f97316","bg-indigo-500":"#6366f1","bg-teal-500":"#14b8a6"};function W(){return`${Date.now()}-${Math.random().toString(36).slice(2,9)}`}function X(e="Untitled Project"){return{id:W(),name:e,bpm:120,timeSignature:[4,4],createdAt:Date.now(),updatedAt:Date.now(),tracks:[],loopStart:0,loopEnd:16,loopEnabled:!0}}function Z(e,t="audio",a){let s=J[a??Math.floor(Math.random()*J.length)];return{id:W(),name:e,type:t,color:s,volume:.8,pan:0,mute:!1,solo:!1,armed:!1,clips:[]}}function K(e,t,a,s){return{id:W(),name:e,startBeat:t,lengthBeats:a,audioUrl:s,gain:1}}function Q(e){let t=e.numberOfChannels,a=e.sampleRate,s=2*t,i=e.length*s,n=44+i,r=new ArrayBuffer(n),l=new DataView(r);Y(l,0,"RIFF"),l.setUint32(4,n-8,!0),Y(l,8,"WAVE"),Y(l,12,"fmt "),l.setUint32(16,16,!0),l.setUint16(20,1,!0),l.setUint16(22,t,!0),l.setUint32(24,a,!0),l.setUint32(28,a*s,!0),l.setUint16(32,s,!0),l.setUint16(34,16,!0),Y(l,36,"data"),l.setUint32(40,i,!0);let o=[];for(let a=0;a<t;a++)o.push(e.getChannelData(a));let c=44;for(let a=0;a<e.length;a++)for(let e=0;e<t;e++){let t=Math.max(-1,Math.min(1,o[e][a])),s=t<0?32768*t:32767*t;l.setInt16(c,s,!0),c+=2}return new Blob([r],{type:"audio/wav"})}function Y(e,t,a){for(let s=0;s<a.length;s++)e.setUint8(t+s,a.charCodeAt(s))}let ee="jamz_project",et="jamz_projects_list",ea=null;async function es(){return ea||(ea=e.A(296462).then(e=>e.default||e)),ea}async function ei(e,t={}){let{sampleRate:a=e.sampleRate,bitRate:s=192,channels:i=e.numberOfChannels}=t,n=new(await es()).Mp3Encoder(Math.min(i,2),a,s),r=[],l=e.getChannelData(0),o=i>1?e.getChannelData(1):l,c=en(l),d=en(o),m=Math.ceil(c.length/1152);for(let e=0;e<m;e++){let t=1152*e,a=Math.min(t+1152,c.length),s=c.subarray(t,a),i=d.subarray(t,a),l=n.encodeBuffer(s,i);l.length>0&&r.push(l)}let u=n.flush();u.length>0&&r.push(u);let x=new Uint8Array(r.reduce((e,t)=>e+t.length,0)),p=0;for(let e of r)x.set(new Uint8Array(e.buffer,e.byteOffset,e.length),p),p+=e.length;return new Blob([x],{type:"audio/mp3"})}function en(e){let t=new Int16Array(e.length);for(let a=0;a<e.length;a++){let s=Math.max(-1,Math.min(1,e[a]));t[a]=s<0?32768*s:32767*s}return t}e.i(478522).default.env.NEXT_PUBLIC_STEM_API_ENDPOINT;var er=e.i(432827),el=e.i(85444),eo=e.i(973493),ec=e.i(23670),ed=e.i(610724),em=e.i(254862),eu=e.i(688399),ex=e.i(613508),ep=e.i(185894),eh=e.i(573138),ef=e.i(975157),eb=e.i(850402),eg=e.i(334905),ey=e.i(885918);let ej=["C major","C minor","C# major","C# minor","D major","D minor","D# major","D# minor","E major","E minor","F major","F minor","F# major","F# minor","G major","G minor","G# major","G# minor","A major","A minor","A# major","A# minor","B major","B minor","Bb major","Bb minor"],ew=["4/4","3/4","6/8","2/4","5/4","7/8"],ev=[{code:"en",label:"English"},{code:"zh",label:"Chinese"},{code:"ja",label:"Japanese"},{code:"ko",label:"Korean"},{code:"es",label:"Spanish"},{code:"fr",label:"French"},{code:"de",label:"German"},{code:"it",label:"Italian"},{code:"pt",label:"Portuguese"},{code:"ru",label:"Russian"},{code:"hi",label:"Hindi"},{code:"ar",label:"Arabic"},{code:"th",label:"Thai"},{code:"vi",label:"Vietnamese"},{code:"nl",label:"Dutch"},{code:"bn",label:"Bengali"}],eN=["mp3","wav","flac"],e$=[{value:"text2music",label:"Text to Music"},{value:"cover",label:"Cover / Style Transfer"},{value:"repaint",label:"Repaint (Edit Section)"}];function ek({onAddToArrange:e,projectId:a,colors:l}){let o=(0,r.useReducedMotion)(),[c,u]=(0,s.useState)(""),[x,p]=(0,s.useState)(""),[h,f]=(0,s.useState)(!1),[b,g]=(0,s.useState)(30),[y,w]=(0,s.useState)(void 0),[v,$]=(0,s.useState)(void 0),[k,S]=(0,s.useState)("4/4"),[C,M]=(0,s.useState)(""),[A,F]=(0,s.useState)(""),[P,B]=(0,s.useState)("mp3"),[U,I]=(0,s.useState)("en"),[D,z]=(0,s.useState)(void 0),[L,G]=(0,s.useState)(.5),[H,O]=(0,s.useState)(""),V=(0,s.useRef)(null),[_,J]=(0,s.useState)(!1),[q,W]=(0,s.useState)(!1),[X,Z]=(0,s.useState)(void 0),[K,Q]=(0,s.useState)(void 0),[Y,ee]=(0,s.useState)(void 0),[et,ea]=(0,s.useState)(1),[es,ei]=(0,s.useState)("text2music"),{generate:en,isGenerating:ek,progress:eS,message:eC,error:eM,result:eA,reset:eF}=(0,ey.useMusicGeneration)(),eR=a&&/^[a-z0-9]{16,}$/i.test(a),eP=(0,eb.useQuery)(eg.api.musicGeneration.getGeneratedTracks,{projectId:eR?a:void 0,limit:50}),eB=(0,eb.useMutation)(eg.api.musicGeneration.deleteTrack),eT=(eP||[]).map(e=>({_id:e._id,title:e.title,prompt:e.prompt,audioUrl:e.audioUrl,duration:e.duration,bpm:e.bpm,key:e.key,timeSignature:e.timeSignature,createdAt:e.createdAt})),[eE,eU]=(0,s.useState)(null),eI=(0,s.useRef)(null),eD=void 0===eP,ez=(0,s.useCallback)(e=>{let t=ey.MUSIC_PRESETS[e];u(t.prompt),g(t.duration),w(t.bpm),$(t.key),F(e)},[]),eL=(0,s.useCallback)(e=>{let t=e.target.files?.[0];t&&(O(t.name),z(URL.createObjectURL(t)))},[]),eG=(0,s.useCallback)(async()=>{if(!c.trim())return;let e={prompt:c.trim(),lyrics:x.trim()||void 0,duration:b,bpm:y,key:v,timeSignature:k,title:C.trim()||void 0,format:P,vocalLanguage:U,referenceAudio:D,referenceStrength:D?L:void 0,thinking:q,inferenceSteps:X,guidanceScale:K,seed:Y,batchSize:et>1?et:void 0,taskType:"text2music"!==es?es:void 0,saveToJamz:!0,projectId:a};await en(e)},[c,x,b,y,v,k,C,P,U,D,L,q,X,K,Y,et,es,a,en]),eH=(0,s.useCallback)(e=>{if(eE===e._id)eI.current?.pause(),eU(null);else{eI.current&&eI.current.pause();let t=new Audio(e.audioUrl);t.onended=()=>eU(null),t.play(),eI.current=t,eU(e._id)}},[eE]),eO=(0,s.useCallback)(t=>{e?.({audioUrl:t.audioUrl,title:t.title,duration:t.duration,bpm:t.bpm,key:t.key})},[e]),eV=(0,s.useCallback)(async e=>{eE===e&&(eI.current?.pause(),eU(null));try{await eB({trackId:e})}catch(e){console.error("[GenerateView] Failed to delete track:",e)}},[eE,eB]),e_=e=>e<60?`${e}s`:`${Math.floor(e/60)}m ${e%60}s`;return(0,t.jsxs)("div",{className:"flex-1 flex flex-col lg:flex-row gap-0 overflow-hidden",children:[(0,t.jsx)("div",{className:`flex-1 overflow-y-auto p-4 lg:p-6 border-r ${l.border}`,children:(0,t.jsxs)("div",{className:"max-w-xl mx-auto space-y-5",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,t.jsx)(E.Sparkles,{className:"w-5 h-5 text-purple-500"}),(0,t.jsx)("h2",{className:`text-base font-semibold ${l.text}`,children:"AI Music Generator"})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)("label",{className:`text-xs font-medium ${l.textMuted}`,children:"Quick Presets"}),(0,t.jsx)("div",{className:"flex flex-wrap gap-1.5",children:Object.keys(ey.MUSIC_PRESETS).map(e=>(0,t.jsx)("button",{onClick:()=>ez(e),disabled:ek,className:(0,ef.cn)("px-2.5 py-1.5 text-xs rounded-lg transition-colors min-h-[32px] touch-manipulation","focus:outline-none focus:ring-2 focus:ring-purple-500",A===e?"bg-purple-600 text-white":`${l.card} ${l.textMuted} border ${l.border} hover:border-purple-500/50`),children:e.charAt(0).toUpperCase()+e.slice(1).replace(/([A-Z])/g," $1")},e))})]}),(0,t.jsxs)("div",{className:"space-y-1.5",children:[(0,t.jsx)("label",{htmlFor:"gen-prompt",className:`text-xs font-medium ${l.textMuted}`,children:"Style Description *"}),(0,t.jsx)("textarea",{id:"gen-prompt",placeholder:"Describe the music: genre, instruments, mood, production style...",value:c,onChange:e=>u(e.target.value),disabled:ek,rows:3,className:`w-full px-3 py-2.5 ${l.card} border ${l.border} rounded-lg text-sm resize-none focus:outline-none focus:ring-2 focus:ring-purple-500 ${l.text} placeholder:${l.textFaint}`})]}),(0,t.jsxs)("div",{className:"space-y-1.5",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsx)("label",{className:`text-xs font-medium ${l.textMuted}`,children:"Lyrics"}),(0,t.jsx)("button",{onClick:()=>f(!h),disabled:ek,className:`text-xs ${l.textFaint} hover:text-purple-400 transition-colors`,children:h?"Hide":"Add Lyrics"})]}),(0,t.jsx)(n.AnimatePresence,{children:h&&(0,t.jsxs)(i.motion.div,{initial:o?{opacity:1}:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:o?{opacity:0}:{opacity:0,height:0},className:"space-y-2",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)(ex.Globe,{className:"w-3.5 h-3.5 text-purple-400"}),(0,t.jsx)("select",{value:U,onChange:e=>I(e.target.value),disabled:ek,className:`text-xs px-2 py-1 ${l.card} border ${l.border} rounded-md ${l.text} focus:ring-2 focus:ring-purple-500`,"aria-label":"Vocal language",children:ev.map(e=>(0,t.jsx)("option",{value:e.code,children:e.label},e.code))})]}),(0,t.jsx)("textarea",{placeholder:"[Verse]\nYour lyrics here...\n\n[Chorus]\nCatchy hook...\n\n[Instrumental] for no vocals",value:x,onChange:e=>p(e.target.value),disabled:ek,rows:5,className:`w-full px-3 py-2.5 ${l.card} border ${l.border} rounded-lg font-mono text-xs resize-none focus:outline-none focus:ring-2 focus:ring-purple-500 ${l.text}`})]})})]}),(0,t.jsxs)("div",{className:"space-y-1.5",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsx)("label",{className:`text-xs font-medium ${l.textMuted}`,children:"Duration"}),(0,t.jsx)("span",{className:`text-xs tabular-nums ${l.textFaint}`,children:e_(b)})]}),(0,t.jsx)("input",{type:"range",value:b,onChange:e=>g(parseInt(e.target.value)),min:10,max:300,step:5,disabled:ek,className:"w-full accent-purple-500","aria-label":"Duration"}),(0,t.jsxs)("div",{className:`flex justify-between text-[10px] ${l.textFaint}`,children:[(0,t.jsx)("span",{children:"10s"}),(0,t.jsx)("span",{children:"5 min"})]})]}),(0,t.jsxs)("div",{className:"grid grid-cols-2 sm:grid-cols-4 gap-3",children:[(0,t.jsxs)("div",{className:"space-y-1",children:[(0,t.jsx)("label",{htmlFor:"gen-bpm",className:`text-[10px] font-medium ${l.textMuted}`,children:"BPM"}),(0,t.jsx)("input",{id:"gen-bpm",type:"number",placeholder:"Auto",value:y??"",onChange:e=>w(e.target.value?parseInt(e.target.value):void 0),min:30,max:300,disabled:ek,className:`w-full px-2 py-2 ${l.card} border ${l.border} rounded-lg text-xs ${l.text} focus:ring-2 focus:ring-purple-500 min-h-[36px]`})]}),(0,t.jsxs)("div",{className:"space-y-1",children:[(0,t.jsx)("label",{className:`text-[10px] font-medium ${l.textMuted}`,children:"Key"}),(0,t.jsxs)("select",{value:v??"",onChange:e=>$(e.target.value||void 0),disabled:ek,className:`w-full px-2 py-2 ${l.card} border ${l.border} rounded-lg text-xs ${l.text} focus:ring-2 focus:ring-purple-500 min-h-[36px]`,"aria-label":"Key",children:[(0,t.jsx)("option",{value:"",children:"Auto"}),ej.map(e=>(0,t.jsx)("option",{value:e,children:e},e))]})]}),(0,t.jsxs)("div",{className:"space-y-1",children:[(0,t.jsx)("label",{className:`text-[10px] font-medium ${l.textMuted}`,children:"Time Sig"}),(0,t.jsx)("select",{value:k,onChange:e=>S(e.target.value),disabled:ek,className:`w-full px-2 py-2 ${l.card} border ${l.border} rounded-lg text-xs ${l.text} focus:ring-2 focus:ring-purple-500 min-h-[36px]`,"aria-label":"Time signature",children:ew.map(e=>(0,t.jsx)("option",{value:e,children:e},e))})]}),(0,t.jsxs)("div",{className:"space-y-1",children:[(0,t.jsx)("label",{className:`text-[10px] font-medium ${l.textMuted}`,children:"Format"}),(0,t.jsx)("select",{value:P,onChange:e=>B(e.target.value),disabled:ek,className:`w-full px-2 py-2 ${l.card} border ${l.border} rounded-lg text-xs ${l.text} focus:ring-2 focus:ring-purple-500 min-h-[36px]`,"aria-label":"Output format",children:eN.map(e=>(0,t.jsx)("option",{value:e,children:e.toUpperCase()},e))})]})]}),(0,t.jsxs)("div",{className:"space-y-1.5",children:[(0,t.jsx)("label",{className:`text-xs font-medium ${l.textMuted}`,children:"Reference Audio (Style Transfer)"}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)("input",{ref:V,type:"file",accept:"audio/*",onChange:eL,className:"sr-only","aria-label":"Upload reference audio"}),(0,t.jsxs)("button",{onClick:()=>V.current?.click(),disabled:ek,className:(0,ef.cn)("flex items-center gap-2 px-3 py-2 rounded-lg text-xs min-h-[36px] transition-colors touch-manipulation","focus:outline-none focus:ring-2 focus:ring-purple-500",`${l.card} border ${l.border} ${l.textMuted} hover:border-purple-500/50`),children:[(0,t.jsx)(R.Upload,{className:"w-3.5 h-3.5"}),H||"Upload audio file"]}),D&&(0,t.jsx)("button",{onClick:()=>{z(void 0),O("")},className:`p-1.5 rounded ${l.textFaint} hover:text-red-400 transition-colors`,"aria-label":"Remove reference audio",children:(0,t.jsx)(el.XCircle,{className:"w-4 h-4"})})]}),D&&(0,t.jsxs)("div",{className:"space-y-1",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsx)("span",{className:`text-[10px] ${l.textFaint}`,children:"Style Strength"}),(0,t.jsxs)("span",{className:`text-[10px] tabular-nums ${l.textFaint}`,children:[Math.round(100*L),"%"]})]}),(0,t.jsx)("input",{type:"range",value:L,onChange:e=>G(parseFloat(e.target.value)),min:0,max:1,step:.05,disabled:ek,className:"w-full accent-purple-500","aria-label":"Reference strength"})]})]}),(0,t.jsxs)("div",{className:"space-y-1.5",children:[(0,t.jsx)("label",{htmlFor:"gen-title",className:`text-xs font-medium ${l.textMuted}`,children:"Track Title"}),(0,t.jsx)("input",{id:"gen-title",type:"text",placeholder:"Optional title",value:C,onChange:e=>M(e.target.value),disabled:ek,className:`w-full px-3 py-2 ${l.card} border ${l.border} rounded-lg text-sm ${l.text} focus:ring-2 focus:ring-purple-500 min-h-[36px]`})]}),(0,t.jsxs)("div",{className:`border ${l.border} rounded-lg overflow-hidden`,children:[(0,t.jsxs)("button",{onClick:()=>J(!_),className:(0,ef.cn)("w-full flex items-center justify-between px-3 py-2.5 text-xs font-medium min-h-[40px] transition-colors touch-manipulation","focus:outline-none focus:ring-2 focus:ring-purple-500 focus:ring-inset",`${l.card} ${l.textMuted} hover:${l.text}`),"aria-expanded":_,children:[(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)(eu.Settings2,{className:"w-3.5 h-3.5"}),"Advanced Settings"]}),_?(0,t.jsx)(ec.ChevronUp,{className:"w-3.5 h-3.5"}):(0,t.jsx)(eo.ChevronDown,{className:"w-3.5 h-3.5"})]}),(0,t.jsx)(n.AnimatePresence,{children:_&&(0,t.jsx)(i.motion.div,{initial:o?{opacity:1}:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:o?{opacity:0}:{opacity:0,height:0},className:`px-3 pb-3 space-y-3 border-t ${l.border}`,children:(0,t.jsxs)("div",{className:"pt-3 grid grid-cols-2 gap-3",children:[(0,t.jsxs)("div",{className:"space-y-1 col-span-2",children:[(0,t.jsx)("label",{className:`text-[10px] font-medium ${l.textMuted}`,children:"Task Type"}),(0,t.jsx)("select",{value:es,onChange:e=>ei(e.target.value),disabled:ek,className:`w-full px-2 py-2 ${l.card} border ${l.border} rounded-lg text-xs ${l.text} focus:ring-2 focus:ring-purple-500 min-h-[36px]`,"aria-label":"Task type",children:e$.map(e=>(0,t.jsx)("option",{value:e.value,children:e.label},e.value))})]}),(0,t.jsxs)("div",{className:"flex items-center gap-2 col-span-2",children:[(0,t.jsx)("input",{type:"checkbox",id:"gen-thinking",checked:q,onChange:e=>W(e.target.checked),disabled:ek,className:"h-4 w-4 accent-purple-500 rounded"}),(0,t.jsx)("label",{htmlFor:"gen-thinking",className:`text-xs ${l.textMuted}`,children:"Thinking Mode (5Hz LM - higher quality, slower)"})]}),(0,t.jsxs)("div",{className:"space-y-1",children:[(0,t.jsx)("label",{className:`text-[10px] font-medium ${l.textMuted}`,children:"Steps"}),(0,t.jsx)("input",{type:"number",placeholder:"8",value:X??"",onChange:e=>Z(e.target.value?parseInt(e.target.value):void 0),min:1,max:200,disabled:ek,className:`w-full px-2 py-2 ${l.card} border ${l.border} rounded-lg text-xs ${l.text} focus:ring-2 focus:ring-purple-500 min-h-[36px]`})]}),(0,t.jsxs)("div",{className:"space-y-1",children:[(0,t.jsx)("label",{className:`text-[10px] font-medium ${l.textMuted}`,children:"Guidance"}),(0,t.jsx)("input",{type:"number",placeholder:"7.0",value:K??"",onChange:e=>Q(e.target.value?parseFloat(e.target.value):void 0),step:.5,disabled:ek,className:`w-full px-2 py-2 ${l.card} border ${l.border} rounded-lg text-xs ${l.text} focus:ring-2 focus:ring-purple-500 min-h-[36px]`})]}),(0,t.jsxs)("div",{className:"space-y-1",children:[(0,t.jsx)("label",{className:`text-[10px] font-medium ${l.textMuted}`,children:"Seed"}),(0,t.jsx)("input",{type:"number",placeholder:"Random",value:Y??"",onChange:e=>ee(e.target.value?parseInt(e.target.value):void 0),disabled:ek,className:`w-full px-2 py-2 ${l.card} border ${l.border} rounded-lg text-xs ${l.text} focus:ring-2 focus:ring-purple-500 min-h-[36px]`})]}),(0,t.jsxs)("div",{className:"space-y-1",children:[(0,t.jsx)("label",{htmlFor:"gen-batch",className:`text-[10px] font-medium ${l.textMuted}`,children:"Batch"}),(0,t.jsx)("input",{id:"gen-batch",type:"number",value:et,onChange:e=>ea(Math.max(1,Math.min(8,parseInt(e.target.value)||1))),min:1,max:8,disabled:ek,className:`w-full px-2 py-2 ${l.card} border ${l.border} rounded-lg text-xs ${l.text} focus:ring-2 focus:ring-purple-500 min-h-[36px]`})]})]})})})]}),ek&&(0,t.jsxs)("div",{className:`rounded-lg border ${l.border} ${l.card} p-3 space-y-2`,children:[(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)(T.Loader2,{className:"h-4 w-4 animate-spin text-purple-500"}),(0,t.jsx)("span",{className:`text-xs font-medium ${l.text}`,children:eC})]}),(0,t.jsx)("div",{className:`h-1.5 ${l.bgTertiary} rounded-full overflow-hidden`,children:(0,t.jsx)(i.motion.div,{className:"h-full bg-purple-500 rounded-full",initial:{width:0},animate:{width:`${eS}%`},transition:{duration:.5}})})]}),eA&&!ek&&(0,t.jsxs)("div",{className:"rounded-lg border border-green-500/30 bg-green-500/10 p-3 space-y-2",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2 text-green-500",children:[(0,t.jsx)(er.CheckCircle,{className:"h-4 w-4"}),(0,t.jsx)("span",{className:"text-xs font-medium",children:"Generated successfully"})]}),(0,t.jsx)("audio",{src:eA.audioUrl,controls:!0,className:"w-full h-8"})]}),eM&&(0,t.jsx)("div",{className:"rounded-lg border border-red-500/30 bg-red-500/10 p-3",children:(0,t.jsxs)("div",{className:"flex items-center gap-2 text-red-400",children:[(0,t.jsx)(el.XCircle,{className:"h-4 w-4"}),(0,t.jsx)("span",{className:"text-xs",children:eM})]})}),(0,t.jsx)("button",{onClick:eG,disabled:ek||!c.trim(),className:(0,ef.cn)("w-full flex items-center justify-center gap-2 px-4 py-3 rounded-xl text-sm font-semibold transition-all min-h-[48px] touch-manipulation","focus:outline-none focus:ring-2 focus:ring-purple-500 focus:ring-offset-2",ek||!c.trim()?"bg-purple-600/50 text-white/50 cursor-not-allowed":"bg-purple-600 text-white hover:bg-purple-700 active:scale-[0.98]"),children:ek?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(T.Loader2,{className:"w-4 h-4 animate-spin"}),"Generating..."]}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(ep.Wand2,{className:"w-4 h-4"}),"Generate Music"]})})]})}),(0,t.jsxs)("div",{className:"flex-1 flex flex-col overflow-hidden lg:max-w-sm xl:max-w-md",children:[(0,t.jsxs)("div",{className:`flex items-center justify-between px-4 py-3 border-b ${l.border}`,children:[(0,t.jsx)("h3",{className:`text-xs font-semibold ${l.text} uppercase tracking-wider`,children:"Generated Tracks"}),(0,t.jsx)("span",{className:`text-[10px] ${l.textFaint} tabular-nums`,children:eD?"...":`${eT.length} tracks`})]}),(0,t.jsx)("div",{className:"flex-1 overflow-y-auto",children:eD?(0,t.jsxs)("div",{className:"flex flex-col items-center justify-center h-full p-8 text-center",children:[(0,t.jsx)("div",{className:`w-12 h-12 rounded-xl ${l.card} flex items-center justify-center mb-3`,children:(0,t.jsx)(eh.RefreshCw,{className:`w-6 h-6 ${l.textFaint} animate-spin`})}),(0,t.jsx)("p",{className:`text-xs ${l.textFaint}`,children:"Loading your tracks..."})]}):0===eT.length?(0,t.jsxs)("div",{className:"flex flex-col items-center justify-center h-full p-8 text-center",children:[(0,t.jsx)("div",{className:`w-12 h-12 rounded-xl ${l.card} flex items-center justify-center mb-3`,children:(0,t.jsx)(j.Music,{className:`w-6 h-6 ${l.textFaint}`})}),(0,t.jsx)("p",{className:`text-xs ${l.textFaint} max-w-[200px]`,children:"Generated tracks will appear here. Use the form to create your first track."})]}):(0,t.jsx)("div",{className:"divide-y divide-white/5",children:eT.map(a=>(0,t.jsxs)("div",{className:(0,ef.cn)("px-4 py-3 flex items-start gap-3 transition-colors",`hover:${l.cardHover}`),children:[(0,t.jsx)("button",{onClick:()=>eH(a),className:(0,ef.cn)("flex-shrink-0 w-9 h-9 rounded-lg flex items-center justify-center transition-colors touch-manipulation","focus:outline-none focus:ring-2 focus:ring-purple-500",eE===a._id?"bg-purple-600 text-white":`${l.bgTertiary} ${l.textMuted} hover:text-purple-400`),"aria-label":eE===a._id?"Pause":"Play",children:eE===a._id?(0,t.jsx)(m.Pause,{className:"w-4 h-4"}):(0,t.jsx)(d.Play,{className:"w-4 h-4 ml-0.5"})}),(0,t.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,t.jsx)("p",{className:`text-xs font-medium ${l.text} truncate`,children:a.title}),(0,t.jsx)("p",{className:`text-[10px] ${l.textFaint} truncate mt-0.5`,children:a.prompt.slice(0,60)}),(0,t.jsxs)("div",{className:`flex items-center gap-2 mt-1 text-[10px] ${l.textFaint} tabular-nums`,children:[(0,t.jsxs)("span",{className:"flex items-center gap-0.5",children:[(0,t.jsx)(ed.Clock,{className:"w-3 h-3"}),e_(a.duration)]}),(0,t.jsxs)("span",{children:[a.bpm," BPM"]}),(0,t.jsx)("span",{children:a.key})]})]}),(0,t.jsxs)("div",{className:"flex flex-col gap-1 flex-shrink-0",children:[e&&(0,t.jsx)("button",{onClick:()=>eO(a),className:(0,ef.cn)("p-1.5 rounded-md transition-colors touch-manipulation","focus:outline-none focus:ring-2 focus:ring-cyan-500",`${l.textFaint} hover:text-cyan-400 hover:${l.cardHover}`),"aria-label":"Add to arrange view",title:"Add to Arrange",children:(0,t.jsx)(N.Plus,{className:"w-3.5 h-3.5"})}),(0,t.jsx)("button",{onClick:()=>eV(a._id),className:(0,ef.cn)("p-1.5 rounded-md transition-colors touch-manipulation","focus:outline-none focus:ring-2 focus:ring-red-500",`${l.textFaint} hover:text-red-400 hover:${l.cardHover}`),"aria-label":"Remove track",title:"Remove",children:(0,t.jsx)(em.Trash2,{className:"w-3.5 h-3.5"})})]})]},a._id))})})]})]})}let eS=e=>{let[t,a]=(0,s.useState)(!1);return(0,s.useEffect)(()=>{let t=window.matchMedia(e);a(t.matches);let s=e=>a(e.matches);return t.addEventListener("change",s),()=>t.removeEventListener("change",s)},[e]),t},eC=(0,s.memo)(function(){return(0,t.jsx)("a",{href:"#main-content",className:"sr-only focus:not-sr-only focus:absolute focus:top-4 focus:left-4 focus:z-[100] focus:px-4 focus:py-2 focus:bg-cyan-500 focus:text-white focus:rounded-lg focus:outline-none",children:"Skip to main content"})}),eM=[{icon:(0,t.jsx)(G.AudioWaveform,{className:"w-6 h-6"}),title:"Multi-Track Recording",description:"Layer unlimited tracks with professional-grade audio capture and real-time monitoring.",gradient:"from-cyan-500 to-teal-600"},{icon:(0,t.jsx)(P.Download,{className:"w-6 h-6"}),title:"Export to WAV & MP3",description:"Export your finished tracks in high-quality formats ready for sharing or distribution.",gradient:"from-emerald-500 to-green-600"},{icon:(0,t.jsx)(U.Scissors,{className:"w-6 h-6"}),title:"Stem Separation",description:"Isolate vocals, drums, bass, and more from any audio file using advanced processing.",gradient:"from-amber-500 to-orange-600"}],eA=[{icon:(0,t.jsx)(v.default,{className:"w-6 h-6"}),title:"AI-Powered Mixing",description:"Intelligent auto-mixing that learns your style and enhances your sound automatically.",gradient:"from-sky-500 to-blue-600"},{icon:(0,t.jsx)(k.default,{className:"w-6 h-6"}),title:"Virtual Instruments",description:"Play synthesizers, pianos, drums, and more, all directly in your browser.",gradient:"from-rose-500 to-pink-600"},{icon:(0,t.jsx)(H.Layers,{className:"w-6 h-6"}),title:"Sample Library",description:"Thousands of royalty-free samples, loops, and one-shots at your fingertips.",gradient:"from-indigo-500 to-blue-600"},{icon:(0,t.jsx)(O.Zap,{className:"w-6 h-6"}),title:"Real-Time Collaboration",description:"Jam with friends anywhere in the world with zero-latency sync technology.",gradient:"from-yellow-500 to-amber-600"}];[...eM,...eA];let eF=(0,s.memo)(function({isDark:e,reducedMotion:s=!1}){return s?(0,t.jsx)("div",{className:"fixed inset-0 overflow-hidden pointer-events-none","aria-hidden":"true",children:(0,t.jsx)("div",{className:`absolute inset-0 ${e?"bg-gradient-to-br from-black via-zinc-950 to-black":"bg-gradient-to-br from-slate-100 via-white to-slate-100"}`})}):(0,t.jsxs)("div",{"aria-hidden":"true",className:"jsx-b37428a79e014570 fixed inset-0 overflow-hidden pointer-events-none",children:[(0,t.jsx)("div",{className:`jsx-b37428a79e014570 absolute inset-0 ${e?"bg-gradient-to-br from-black via-zinc-950 to-black":"bg-gradient-to-br from-slate-100 via-white to-slate-100"}`}),(0,t.jsx)("div",{style:{background:"radial-gradient(circle, rgba(6, 182, 212, 0.4) 0%, transparent 70%)",top:"10%",left:"10%"},className:"jsx-b37428a79e014570 absolute w-[300px] h-[300px] sm:w-[400px] sm:h-[400px] md:w-[600px] md:h-[600px] rounded-full opacity-20 will-change-transform animate-float-slow"}),(0,t.jsx)("div",{style:{background:"radial-gradient(circle, rgba(20, 184, 166, 0.35) 0%, transparent 70%)",bottom:"20%",right:"5%"},className:"jsx-b37428a79e014570 absolute w-[250px] h-[250px] sm:w-[350px] sm:h-[350px] md:w-[500px] md:h-[500px] rounded-full opacity-15 will-change-transform animate-float-slower"}),(0,t.jsx)("div",{style:{backgroundImage:`linear-gradient(${e?"rgba(255,255,255,0.1)":"rgba(0,0,0,0.1)"} 1px, transparent 1px), linear-gradient(90deg, ${e?"rgba(255,255,255,0.1)":"rgba(0,0,0,0.1)"} 1px, transparent 1px)`,backgroundSize:"64px 64px"},className:`jsx-b37428a79e014570 absolute inset-0 ${e?"opacity-[0.03]":"opacity-[0.05]"}`}),(0,t.jsx)(a.default,{id:"b37428a79e014570",children:"@keyframes float-slow{0%,to{transform:translate(0)scale(1)}50%{transform:translate(50px,25px)scale(1.1)}}@keyframes float-slower{0%,to{transform:translate(0)scale(1)}50%{transform:translate(-40px,-30px)scale(1.15)}}.animate-float-slow.jsx-b37428a79e014570{animation:20s ease-in-out infinite float-slow}.animate-float-slower.jsx-b37428a79e014570{animation:25s ease-in-out infinite float-slower}"})]})}),eR=(0,s.memo)(function({reducedMotion:e=!1}){let s=eS("(max-width: 640px)")?20:40;return e?(0,t.jsx)("div",{className:"flex items-end justify-center gap-1 h-24",role:"img","aria-label":"Audio waveform visualization",children:Array.from({length:s}).map((e,a)=>(0,t.jsx)("div",{className:"w-1 bg-gradient-to-t from-cyan-500 to-cyan-400 rounded-full",style:{height:`${30+(20*Math.sin(.3*a)+20)}%`}},a))}):(0,t.jsxs)("div",{role:"img","aria-label":"Animated audio waveform visualization",className:"jsx-9e40be128cba5176 flex items-end justify-center gap-0.5 sm:gap-1 h-16 sm:h-24",children:[Array.from({length:s}).map((e,a)=>(0,t.jsx)("div",{style:{animation:`waveform ${.5+a%5*.1}s ease-in-out infinite`,animationDelay:`${.02*a}s`,height:"30%"},className:"jsx-9e40be128cba5176 w-0.5 sm:w-1 bg-gradient-to-t from-cyan-500 to-cyan-400 rounded-full will-change-transform"},a)),(0,t.jsx)(a.default,{id:"9e40be128cba5176",children:"@keyframes waveform{0%,to{transform:scaleY(1)}50%{transform:scaleY(2.5)}}"})]})}),eP=(0,s.memo)(function({feature:e,index:a,colors:n,reducedMotion:r=!1,isComingSoon:l=!1}){let[o,c]=(0,s.useState)(!1),d=r?{initial:{opacity:1,y:0},animate:{opacity:1,y:0}}:{initial:{opacity:0,y:30},animate:{opacity:1,y:0,transition:{duration:.5,delay:.1+.1*a}}};return(0,t.jsx)(i.motion.article,{variants:d,initial:"initial",animate:"animate",onMouseEnter:()=>c(!0),onMouseLeave:()=>c(!1),onFocus:()=>c(!0),onBlur:()=>c(!1),className:"group relative",tabIndex:0,role:"article","aria-label":`${e.title}: ${e.description}${l?" (Coming Soon)":""}`,children:(0,t.jsxs)("div",{className:`relative overflow-hidden rounded-2xl p-4 sm:p-6 ${n.card} border ${n.border} backdrop-blur-xl transition-all duration-300 ease-out ${o?`${n.borderHover} shadow-2xl -translate-y-1`:""} focus-within:ring-2 focus-within:ring-cyan-500 ${l?"opacity-80":""}`,children:[(0,t.jsx)("div",{className:`absolute inset-0 bg-gradient-to-br ${e.gradient} opacity-0 group-hover:opacity-10 group-focus-within:opacity-10 transition-opacity duration-300`}),l&&(0,t.jsx)("div",{className:"absolute top-3 right-3 px-2 py-0.5 rounded-full bg-amber-500/20 border border-amber-500/30",children:(0,t.jsx)("span",{className:"text-amber-400 text-[10px] font-medium",children:"Soon"})}),(0,t.jsx)("div",{className:`w-10 h-10 sm:w-12 sm:h-12 rounded-xl mb-3 sm:mb-4 bg-gradient-to-br ${e.gradient} flex items-center justify-center text-white shadow-lg ${l?"grayscale-[30%]":""}`,"aria-hidden":"true",children:e.icon}),(0,t.jsx)("h3",{className:`text-base sm:text-lg font-bold ${n.text} mb-1 sm:mb-2`,children:e.title}),(0,t.jsx)("p",{className:`text-xs sm:text-sm ${n.textFaint} leading-relaxed`,children:e.description}),(0,t.jsx)("div",{className:`absolute bottom-0 left-0 right-0 h-0.5 bg-gradient-to-r ${e.gradient} transition-transform duration-300 origin-left ${o?"scale-x-100":"scale-x-0"}`,"aria-hidden":"true"})]})})}),eB=(0,s.memo)(function({colors:e,reducedMotion:n=!1}){let r=eS("(max-width: 640px)"),l=(0,s.useMemo)(()=>[{name:"Drums",color:"bg-cyan-500",width:"100%"},{name:"Bass",color:"bg-cyan-500",width:"85%"},{name:"Synth Lead",color:"bg-pink-500",width:"70%"},{name:"Vocals",color:"bg-amber-500",width:"60%"},{name:"FX",color:"bg-emerald-500",width:"45%"}],[]),o=r?30:60,c=(0,s.useMemo)(()=>l.map(()=>Array.from({length:o},()=>20+60*Math.random())),[l,o]);return(0,t.jsxs)(i.motion.div,{variants:n?{initial:{opacity:1,scale:1},animate:{opacity:1,scale:1}}:{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1,transition:{duration:.8,delay:.3}}},initial:"initial",animate:"animate",className:"relative w-full max-w-4xl mx-auto px-2 sm:px-0",role:"img","aria-label":"Digital Audio Workstation preview showing 5 audio tracks: Drums, Bass, Synth Lead, Vocals, and FX",children:[(0,t.jsxs)("div",{className:`jsx-44e47e2cc064fc28 rounded-xl sm:rounded-2xl overflow-hidden border ${e.border} ${e.isDark?"bg-black/50":"bg-white/80"} backdrop-blur-xl shadow-2xl`,children:[(0,t.jsxs)("div",{className:`jsx-44e47e2cc064fc28 flex items-center justify-between px-3 sm:px-4 py-2 sm:py-3 border-b ${e.border} ${e.card}`,children:[(0,t.jsxs)("div",{"aria-hidden":"true",className:"jsx-44e47e2cc064fc28 flex items-center gap-1.5 sm:gap-2",children:[(0,t.jsx)("div",{className:"jsx-44e47e2cc064fc28 w-2.5 h-2.5 sm:w-3 sm:h-3 rounded-full bg-red-500/80"}),(0,t.jsx)("div",{className:"jsx-44e47e2cc064fc28 w-2.5 h-2.5 sm:w-3 sm:h-3 rounded-full bg-yellow-500/80"}),(0,t.jsx)("div",{className:"jsx-44e47e2cc064fc28 w-2.5 h-2.5 sm:w-3 sm:h-3 rounded-full bg-green-500/80"})]}),(0,t.jsxs)("div",{className:"jsx-44e47e2cc064fc28 flex items-center gap-1.5 sm:gap-2",children:[(0,t.jsx)(L.default,{className:"w-3.5 h-3.5 sm:w-4 sm:h-4 text-cyan-400","aria-hidden":"true"}),(0,t.jsx)("span",{className:`jsx-44e47e2cc064fc28 text-xs sm:text-sm ${e.textMuted} font-medium`,children:"Jamz Studio"})]}),(0,t.jsx)("div",{className:"jsx-44e47e2cc064fc28 w-12 sm:w-16"})]}),(0,t.jsxs)("div",{className:`jsx-44e47e2cc064fc28 flex items-center justify-center gap-2 sm:gap-4 py-3 sm:py-4 border-b ${e.border} ${e.card}`,children:[(0,t.jsx)("button",{"aria-label":"Shuffle",tabIndex:-1,className:`jsx-44e47e2cc064fc28 p-1.5 sm:p-2 ${e.textFaint} hover:${e.text} transition-colors touch-manipulation`,children:(0,t.jsx)(I.Shuffle,{className:"w-3.5 h-3.5 sm:w-4 sm:h-4"})}),(0,t.jsx)("button",{"aria-label":"Previous track",tabIndex:-1,className:`jsx-44e47e2cc064fc28 p-1.5 sm:p-2 ${e.textMuted} hover:${e.text} transition-colors touch-manipulation`,children:(0,t.jsx)(p.SkipBack,{className:"w-4 h-4 sm:w-5 sm:h-5"})}),(0,t.jsx)("button",{"aria-label":"Play",tabIndex:-1,className:"jsx-44e47e2cc064fc28 p-2.5 sm:p-3 rounded-full bg-gradient-to-r from-cyan-500 to-cyan-500 text-white shadow-lg hover:shadow-cyan-500/25 transition-shadow touch-manipulation",children:(0,t.jsx)(d.Play,{className:"w-4 h-4 sm:w-5 sm:h-5"})}),(0,t.jsx)("button",{"aria-label":"Next track",tabIndex:-1,className:`jsx-44e47e2cc064fc28 p-1.5 sm:p-2 ${e.textMuted} hover:${e.text} transition-colors touch-manipulation`,children:(0,t.jsx)(h.SkipForward,{className:"w-4 h-4 sm:w-5 sm:h-5"})}),(0,t.jsx)("button",{"aria-label":"Repeat",tabIndex:-1,className:`jsx-44e47e2cc064fc28 p-1.5 sm:p-2 ${e.textFaint} hover:${e.text} transition-colors touch-manipulation`,children:(0,t.jsx)(f.Repeat,{className:"w-3.5 h-3.5 sm:w-4 sm:h-4"})})]}),(0,t.jsx)("div",{className:"jsx-44e47e2cc064fc28 p-2 sm:p-4 space-y-2 sm:space-y-3",children:l.map((a,s)=>(0,t.jsxs)("div",{style:{animationDelay:n?"0ms":`${500+100*s}ms`},className:`jsx-44e47e2cc064fc28 flex items-center gap-2 sm:gap-3 ${!n?"animate-fade-in":""}`,children:[(0,t.jsx)("div",{className:"jsx-44e47e2cc064fc28 w-16 sm:w-24 flex-shrink-0",children:(0,t.jsx)("div",{className:`jsx-44e47e2cc064fc28 text-[10px] sm:text-xs font-medium ${e.textMuted} truncate`,children:a.name})}),(0,t.jsxs)("div",{className:`jsx-44e47e2cc064fc28 flex-1 h-8 sm:h-10 rounded-md sm:rounded-lg ${e.card} overflow-hidden relative`,children:[(0,t.jsx)("div",{style:{width:a.width},className:`jsx-44e47e2cc064fc28 absolute inset-y-0 left-0 ${a.color} opacity-30 transition-all duration-1000`}),(0,t.jsx)("div",{className:"jsx-44e47e2cc064fc28 absolute inset-0 flex items-center px-1 sm:px-2 gap-px",children:c[s].map((e,s)=>(0,t.jsx)("div",{style:{height:`${e}%`},className:`jsx-44e47e2cc064fc28 w-0.5 sm:w-1 ${a.color} rounded-full opacity-60`},s))})]}),(0,t.jsx)("div",{className:"jsx-44e47e2cc064fc28 w-6 sm:w-8 flex-shrink-0",children:(0,t.jsx)(b.Volume2,{className:`w-3.5 h-3.5 sm:w-4 sm:h-4 ${e.textFaint}`,"aria-hidden":"true"})})]},a.name))}),(0,t.jsx)("div",{className:"jsx-44e47e2cc064fc28 px-2 sm:px-4 pb-3 sm:pb-4",children:(0,t.jsxs)("div",{className:`jsx-44e47e2cc064fc28 flex items-center gap-2 text-[10px] sm:text-xs ${e.textFaint}`,children:[(0,t.jsx)("span",{className:"jsx-44e47e2cc064fc28",children:"0:00"}),(0,t.jsx)("div",{role:"progressbar","aria-valuemin":0,"aria-valuemax":100,"aria-valuenow":35,className:`jsx-44e47e2cc064fc28 flex-1 h-1 ${e.bgTertiary} rounded-full overflow-hidden`,children:(0,t.jsx)("div",{style:{width:"35%"},className:`jsx-44e47e2cc064fc28 h-full bg-gradient-to-r from-cyan-500 to-teal-500 ${!n?"transition-all duration-[2000ms]":""}`})}),(0,t.jsx)("span",{className:"jsx-44e47e2cc064fc28",children:"3:45"})]})})]}),(0,t.jsx)(a.default,{id:"44e47e2cc064fc28",children:"@keyframes fade-in{0%{opacity:0;transform:translate(-20px)}to{opacity:1;transform:translate(0)}}.animate-fade-in.jsx-44e47e2cc064fc28{opacity:0;animation:.5s ease-out forwards fade-in}"})]})}),eT=(0,s.memo)(function({onEnterStudio:e,colors:a,reducedMotion:n=!1,themeClass:r=""}){let o=(0,s.useMemo)(()=>[{icon:(0,t.jsx)(k.default,{className:"w-6 h-6 sm:w-8 sm:h-8"}),name:"Piano",color:"from-sky-500 to-blue-600"},{icon:(0,t.jsx)(S.default,{className:"w-6 h-6 sm:w-8 sm:h-8"}),name:"Guitar",color:"from-amber-500 to-orange-600"},{icon:(0,t.jsx)(G.AudioWaveform,{className:"w-6 h-6 sm:w-8 sm:h-8"}),name:"Drums",color:"from-rose-500 to-pink-600"},{icon:(0,t.jsx)(y.Mic2,{className:"w-6 h-6 sm:w-8 sm:h-8"}),name:"Vocals",color:"from-cyan-500 to-teal-600"},{icon:(0,t.jsx)(C.Waves,{className:"w-6 h-6 sm:w-8 sm:h-8"}),name:"Synth",color:"from-emerald-500 to-green-600"},{icon:(0,t.jsx)(z.Radio,{className:"w-6 h-6 sm:w-8 sm:h-8"}),name:"Bass",color:"from-yellow-500 to-amber-600"}],[]),c=n?{initial:{opacity:1},animate:{opacity:1}}:{initial:{opacity:0,y:20},animate:{opacity:1,y:0}},m=n?{initial:{opacity:1,scale:1},animate:{opacity:1,scale:1}}:{initial:{opacity:0,scale:.5},animate:{opacity:1,scale:1}};return(0,t.jsxs)("main",{id:"main-content",className:`min-h-screen ${a.bg} ${a.text} relative ${r}`,role:"main",children:[(0,t.jsx)(eF,{isDark:a.isDark,reducedMotion:n}),(0,t.jsxs)("div",{className:"relative z-10",children:[(0,t.jsx)("nav",{className:`fixed top-0 left-0 right-0 z-50 px-4 py-3 ${a.bgSecondary}/80 backdrop-blur-xl border-b ${a.border}`,role:"navigation","aria-label":"Main navigation",children:(0,t.jsxs)("div",{className:"max-w-6xl mx-auto flex items-center justify-between",children:[(0,t.jsxs)(l.default,{href:"/",className:`flex items-center gap-2 px-3 py-2 rounded-xl ${a.card} border ${a.border} hover:border-cyan-500/50 transition-all group focus:outline-none focus:ring-2 focus:ring-cyan-500`,"aria-label":"Return to 8gent home",children:[(0,t.jsx)(F.Home,{className:`w-4 h-4 ${a.textMuted} group-hover:text-cyan-400 transition-colors`}),(0,t.jsx)("span",{className:`text-sm font-medium ${a.textSecondary} group-hover:text-cyan-400 transition-colors hidden sm:inline`,children:"8gent"})]}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)("div",{className:"w-8 h-8 rounded-lg bg-gradient-to-br from-cyan-500 to-teal-500 flex items-center justify-center",children:(0,t.jsx)(w.Music4,{className:"w-4 h-4 text-white"})}),(0,t.jsx)("span",{className:`text-sm font-semibold ${a.text}`,children:"Jamz"})]}),(0,t.jsxs)("button",{onClick:e,className:"flex items-center gap-2 px-4 py-2 rounded-xl bg-gradient-to-r from-cyan-500 to-teal-500 text-white text-sm font-medium hover:shadow-lg hover:shadow-cyan-500/25 transition-all focus:outline-none focus:ring-2 focus:ring-cyan-500",children:[(0,t.jsx)(d.Play,{className:"w-4 h-4"}),(0,t.jsx)("span",{className:"hidden sm:inline",children:"Open Studio"})]})]})}),(0,t.jsxs)("section",{className:"min-h-screen flex flex-col items-center justify-center px-4 sm:px-6 lg:px-8 pt-20 sm:pt-24 pb-12 sm:pb-20","aria-labelledby":"hero-title",children:[(0,t.jsx)(i.motion.div,{variants:m,initial:"initial",animate:"animate",transition:n?{}:{duration:.6,type:"spring"},className:"mb-6 sm:mb-8",children:(0,t.jsxs)("div",{className:"relative",children:[(0,t.jsx)("div",{className:"w-16 h-16 sm:w-20 sm:h-20 md:w-24 md:h-24 rounded-2xl sm:rounded-3xl bg-gradient-to-br from-cyan-500 via-teal-500 to-emerald-500 flex items-center justify-center shadow-2xl shadow-cyan-500/30",role:"img","aria-label":"Jamz Studio logo",children:(0,t.jsx)(w.Music4,{className:"w-8 h-8 sm:w-10 sm:h-10 md:w-12 md:h-12 text-white"})}),(0,t.jsx)("div",{className:"absolute inset-0 rounded-2xl sm:rounded-3xl bg-gradient-to-br from-cyan-500 to-teal-500 blur-2xl opacity-40 -z-10","aria-hidden":"true"})]})}),(0,t.jsxs)(i.motion.div,{variants:c,initial:"initial",animate:"animate",transition:n?{}:{duration:.6,delay:.2},className:"text-center mb-4 sm:mb-6",children:[(0,t.jsx)("h1",{id:"hero-title",className:"text-5xl sm:text-6xl md:text-7xl lg:text-8xl font-black tracking-tighter mb-2 sm:mb-4",children:(0,t.jsx)("span",{className:"bg-gradient-to-r from-cyan-400 via-teal-400 to-emerald-400 bg-clip-text text-transparent",children:"Jamz"})}),(0,t.jsx)("p",{className:`text-lg sm:text-xl md:text-2xl ${a.textFaint} font-light`,children:"Music Studio"})]}),(0,t.jsx)(i.motion.p,{variants:c,initial:"initial",animate:"animate",transition:n?{}:{duration:.6,delay:.3},className:`text-base sm:text-lg md:text-xl ${a.textMuted} max-w-2xl text-center mb-6 sm:mb-8 leading-relaxed px-4`,children:"A professional-grade digital audio workstation in your browser. Create, mix, and master your music with AI-powered tools."}),(0,t.jsx)(i.motion.div,{variants:c,initial:"initial",animate:"animate",transition:n?{}:{duration:.6,delay:.4},className:"mb-8 sm:mb-12",children:(0,t.jsxs)("button",{onClick:e,className:"inline-flex items-center gap-2 px-6 sm:px-8 py-3 sm:py-4 rounded-full bg-gradient-to-r from-cyan-500 to-teal-500 text-white font-semibold hover:shadow-lg hover:shadow-cyan-500/25 transition-all hover:scale-105 focus:outline-none focus:ring-2 focus:ring-cyan-500 focus:ring-offset-2 focus:ring-offset-transparent min-h-[48px] touch-manipulation","aria-label":"Enter Jamz Studio",children:[(0,t.jsx)(E.Sparkles,{className:"w-4 h-4 sm:w-5 sm:h-5","aria-hidden":"true"}),(0,t.jsx)("span",{children:"Let's Jam"})]})}),(0,t.jsx)(i.motion.div,{variants:c,initial:"initial",animate:"animate",transition:n?{}:{duration:1,delay:.5},className:"w-full max-w-xs sm:max-w-md mb-12 sm:mb-16",children:(0,t.jsx)(eR,{reducedMotion:n})}),(0,t.jsx)(eB,{colors:a,reducedMotion:n})]}),(0,t.jsx)("section",{className:"px-4 sm:px-6 lg:px-8 py-16 sm:py-24","aria-labelledby":"features-title",children:(0,t.jsxs)("div",{className:"max-w-6xl mx-auto",children:[(0,t.jsxs)(i.motion.div,{initial:n?{opacity:1}:{opacity:0,y:20},whileInView:{opacity:1,y:0},viewport:{once:!0},transition:n?{}:{duration:.6},className:"text-center mb-10 sm:mb-16",children:[(0,t.jsxs)("h2",{id:"features-title",className:"text-2xl sm:text-3xl md:text-4xl font-bold mb-3 sm:mb-4",children:["Everything You Need to"," ",(0,t.jsx)("span",{className:"bg-gradient-to-r from-cyan-400 to-teal-400 bg-clip-text text-transparent",children:"Create"})]}),(0,t.jsx)("p",{className:`${a.textFaint} max-w-2xl mx-auto text-sm sm:text-base`,children:"Professional music production tools, reimagined for the modern creator."})]}),(0,t.jsxs)("div",{className:"mb-12 sm:mb-16",children:[(0,t.jsxs)(i.motion.div,{initial:n?{opacity:1}:{opacity:0,y:10},whileInView:{opacity:1,y:0},viewport:{once:!0},className:"flex items-center gap-3 mb-6",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2 px-3 py-1.5 rounded-full bg-gradient-to-r from-emerald-500/20 to-teal-500/20 border border-emerald-500/30",children:[(0,t.jsx)("div",{className:"w-2 h-2 rounded-full bg-emerald-400 animate-pulse"}),(0,t.jsx)("span",{className:"text-emerald-400 text-sm font-medium",children:"Available Now"})]}),(0,t.jsx)("div",{className:`h-px flex-1 ${a.border}`})]}),(0,t.jsx)("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4 sm:gap-6",role:"list",children:eM.map((e,s)=>(0,t.jsx)(eP,{feature:e,index:s,colors:a,reducedMotion:n},e.title))})]}),(0,t.jsxs)("div",{children:[(0,t.jsxs)(i.motion.div,{initial:n?{opacity:1}:{opacity:0,y:10},whileInView:{opacity:1,y:0},viewport:{once:!0},className:"flex items-center gap-3 mb-6",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2 px-3 py-1.5 rounded-full bg-gradient-to-r from-amber-500/20 to-orange-500/20 border border-amber-500/30",children:[(0,t.jsx)(E.Sparkles,{className:"w-3.5 h-3.5 text-amber-400"}),(0,t.jsx)("span",{className:"text-amber-400 text-sm font-medium",children:"Coming Soon"})]}),(0,t.jsx)("div",{className:`h-px flex-1 ${a.border}`})]}),(0,t.jsx)("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4 sm:gap-6",role:"list",children:eA.map((e,s)=>(0,t.jsx)(eP,{feature:e,index:s+3,colors:a,reducedMotion:n,isComingSoon:!0},e.title))})]})]})}),(0,t.jsx)("section",{className:"px-4 sm:px-6 lg:px-8 py-16 sm:py-24","aria-labelledby":"instruments-title",children:(0,t.jsxs)("div",{className:"max-w-4xl mx-auto",children:[(0,t.jsxs)(i.motion.div,{initial:n?{opacity:1}:{opacity:0,y:20},whileInView:{opacity:1,y:0},viewport:{once:!0},className:"text-center mb-8 sm:mb-12",children:[(0,t.jsx)("h2",{id:"instruments-title",className:"text-2xl sm:text-3xl font-bold mb-3 sm:mb-4",children:"Virtual Instruments"}),(0,t.jsx)("p",{className:`${a.textFaint} text-sm sm:text-base`,children:"Play any instrument, anywhere."})]}),(0,t.jsx)("div",{className:"grid grid-cols-3 sm:flex sm:flex-wrap sm:justify-center gap-4 sm:gap-6",role:"list",children:o.map((e,s)=>(0,t.jsxs)(i.motion.div,{initial:n?{opacity:1,scale:1}:{opacity:0,scale:.8},whileInView:{opacity:1,scale:1},viewport:{once:!0},transition:n?{}:{delay:.1*s},whileHover:n?{}:{scale:1.1,y:-5},className:"flex flex-col items-center gap-2 sm:gap-3",role:"listitem",children:[(0,t.jsx)("div",{className:`w-12 h-12 sm:w-14 sm:h-14 md:w-16 md:h-16 rounded-xl sm:rounded-2xl bg-gradient-to-br ${e.color} flex items-center justify-center text-white shadow-lg`,"aria-hidden":"true",children:e.icon}),(0,t.jsx)("span",{className:`text-xs sm:text-sm ${a.textFaint}`,children:e.name})]},e.name))})]})}),(0,t.jsx)("section",{className:"px-4 sm:px-6 lg:px-8 py-16 sm:py-24","aria-labelledby":"cta-title",children:(0,t.jsx)(i.motion.div,{initial:n?{opacity:1}:{opacity:0,y:20},whileInView:{opacity:1,y:0},viewport:{once:!0},className:"max-w-2xl mx-auto text-center",children:(0,t.jsxs)("div",{className:`p-6 sm:p-8 rounded-2xl sm:rounded-3xl ${a.card} border ${a.border} backdrop-blur-xl`,children:[(0,t.jsx)(D.Headphones,{className:"w-10 h-10 sm:w-12 sm:h-12 text-cyan-400 mx-auto mb-4 sm:mb-6","aria-hidden":"true"}),(0,t.jsx)("h2",{id:"cta-title",className:"text-xl sm:text-2xl font-bold mb-3 sm:mb-4",children:"Start Creating Today"}),(0,t.jsx)("p",{className:`${a.textFaint} mb-6 sm:mb-8 text-sm sm:text-base`,children:"Record, mix, and export your tracks directly in your browser. More features coming soon."}),(0,t.jsxs)("div",{className:"flex flex-col sm:flex-row gap-3 sm:gap-4 justify-center",children:[(0,t.jsxs)("button",{onClick:e,className:"inline-flex items-center justify-center gap-2 px-5 sm:px-6 py-2.5 sm:py-3 rounded-full bg-gradient-to-r from-cyan-500 to-teal-500 text-white font-medium hover:shadow-lg hover:shadow-cyan-500/25 transition-shadow focus:outline-none focus:ring-2 focus:ring-cyan-500 focus:ring-offset-2 min-h-[44px] touch-manipulation",children:[(0,t.jsx)(d.Play,{className:"w-4 h-4","aria-hidden":"true"}),"Open Studio"]}),(0,t.jsx)(l.default,{href:"/",className:`inline-flex items-center justify-center gap-2 px-5 sm:px-6 py-2.5 sm:py-3 rounded-full ${a.card} ${a.text} font-medium hover:opacity-80 transition-colors border ${a.border} focus:outline-none focus:ring-2 focus:ring-cyan-500 focus:ring-offset-2 min-h-[44px] touch-manipulation`,children:"â† Back to 8gent"})]})]})})}),(0,t.jsx)("footer",{className:`px-4 sm:px-6 lg:px-8 py-6 sm:py-8 border-t ${a.border}`,role:"contentinfo",children:(0,t.jsx)("div",{className:"max-w-6xl mx-auto text-center",children:(0,t.jsxs)("p",{className:`text-xs sm:text-sm ${a.textFaint}`,children:["Design inspired by"," ",(0,t.jsx)("a",{href:"https://x.com/joelbqz",target:"_blank",rel:"noopener noreferrer",className:"text-cyan-400 hover:text-cyan-300 transition-colors underline underline-offset-2",children:"@joelbqz"})]})})})]})]})}),eE=(0,s.memo)(function({isPlaying:e,isRecording:a,currentBeat:s,bpm:i,loop:n,inputLevel:r,colors:l,onPlayPause:o,onStop:c,onRecord:p,onBpmChange:h,onLoopToggle:b}){return(0,t.jsxs)("div",{className:`flex items-center justify-center gap-2 sm:gap-4 py-2 sm:py-3 px-2 sm:px-4 border-b ${l.border} ${l.bgSecondary}`,role:"toolbar","aria-label":"Transport controls",children:[(0,t.jsx)("button",{onClick:c,className:`p-2 sm:p-2.5 rounded-lg ${l.card} ${l.textFaint} hover:${l.text} hover:${l.cardHover} transition-colors min-w-[40px] min-h-[40px] touch-manipulation focus:outline-none focus:ring-2 focus:ring-cyan-500`,"aria-label":"Stop",children:(0,t.jsx)(u.Square,{className:"w-4 h-4"})}),(0,t.jsx)("button",{onClick:o,className:`p-2.5 sm:p-3 rounded-full ${e?"bg-cyan-500":"bg-gradient-to-r from-cyan-500 to-cyan-500"} text-white shadow-lg transition-all min-w-[44px] min-h-[44px] touch-manipulation focus:outline-none focus:ring-2 focus:ring-cyan-500 focus:ring-offset-2`,"aria-label":e?"Pause":"Play","aria-pressed":e,children:e?(0,t.jsx)(m.Pause,{className:"w-4 h-4 sm:w-5 sm:h-5"}):(0,t.jsx)(d.Play,{className:"w-4 h-4 sm:w-5 sm:h-5"})}),(0,t.jsx)("button",{onClick:p,className:`p-2 sm:p-2.5 rounded-lg ${a?"bg-red-500 text-white":`${l.card} ${l.textFaint} hover:text-red-400`} transition-colors min-w-[40px] min-h-[40px] touch-manipulation focus:outline-none focus:ring-2 focus:ring-red-500 ${a?"animate-pulse":""}`,"aria-label":a?"Stop recording":"Start recording","aria-pressed":a,children:(0,t.jsx)(x.Circle,{className:"w-4 h-4"})}),(0,t.jsx)("div",{className:`w-px h-6 ${l.isDark?"bg-white/10":"bg-slate-200"} hidden sm:block`,"aria-hidden":"true"}),(0,t.jsxs)("div",{className:"hidden sm:flex items-center gap-2",children:[(0,t.jsx)("label",{htmlFor:"bpm-input",className:`text-xs ${l.textFaint}`,children:"BPM"}),(0,t.jsx)("input",{id:"bpm-input",type:"number",value:i,onChange:e=>h(Number(e.target.value)),min:40,max:300,className:`w-14 px-2 py-1 rounded ${l.card} ${l.text} text-sm text-center border ${l.border} focus:outline-none focus:border-cyan-500 focus:ring-1 focus:ring-cyan-500`,"aria-label":"Beats per minute"})]}),(0,t.jsx)("button",{onClick:b,className:`p-2 sm:p-2.5 rounded-lg ${n?"bg-cyan-500/20 text-cyan-400":`${l.card} ${l.textFaint}`} transition-colors min-w-[40px] min-h-[40px] touch-manipulation focus:outline-none focus:ring-2 focus:ring-cyan-500`,"aria-label":n?"Disable loop":"Enable loop","aria-pressed":n,children:(0,t.jsx)(f.Repeat,{className:"w-4 h-4"})}),(0,t.jsx)("div",{className:`text-xs sm:text-sm font-mono ${l.textMuted} min-w-[50px] text-center`,"aria-live":"polite","aria-label":"Current position",children:function(e,t=4){let a=Math.floor(e/t)+1,s=Math.floor(e%t)+1;return`${a}.${s}`}(s)})]})});function eU(){let{theme:e,resolvedTheme:a}=(0,o.useTheme)(),{theme:l}=(0,c.useDesignThemeSafe)(),d=(0,r.useReducedMotion)()??!1,m=(0,s.useMemo)(()=>{let e;return{bg:(e="dark"===a||void 0===a)?"bg-zinc-950":"bg-slate-50",bgSecondary:e?"bg-zinc-900":"bg-white",bgTertiary:e?"bg-zinc-800":"bg-slate-100",text:e?"text-white":"text-slate-900",textSecondary:e?"text-white/80":"text-slate-700",textMuted:e?"text-white/60":"text-slate-600",textFaint:e?"text-white/40":"text-slate-400",border:e?"border-white/10":"border-slate-200",borderHover:e?"border-white/20":"border-slate-300",card:e?"bg-white/5":"bg-white",cardHover:e?"bg-white/10":"bg-slate-50",isDark:e}},[e,a]),u=eS("(max-width: 640px)"),x=`theme-${l}`,[p,h]=(0,s.useState)(!1),[f,b]=(0,s.useState)(null),[y,w]=(0,s.useState)("arrange"),[k,S]=(0,s.useState)(1),[C,U]=(0,s.useState)(!1),[I,D]=(0,s.useState)(!1),[z,L]=(0,s.useState)(!1),[G,H]=(0,s.useState)(!1),[O,W]=(0,s.useState)(!1),[Y,ea]=(0,s.useState)(null),es=function(e){let[t,a]=(0,s.useState)({isPlaying:!1,isRecording:!1,currentBeat:0,masterLevel:0,inputLevel:0}),i=(0,s.useRef)(null),n=(0,s.useRef)(null),r=(0,s.useRef)(null),l=(0,s.useRef)(new Map),o=(0,s.useRef)(new Map),c=(0,s.useRef)([]),d=(0,s.useRef)(0),m=(0,s.useRef)(0),u=(0,s.useRef)(null),x=(0,s.useRef)(null),p=(0,s.useRef)([]),h=(0,s.useRef)(null),f=(0,s.useRef)(null),b=(0,s.useRef)(new Map),g=(0,s.useCallback)(()=>{if(i.current)return i.current;let e=new AudioContext;i.current=e;let t=e.createGain();t.gain.value=.8,t.connect(e.destination),n.current=t;let a=e.createAnalyser();return a.fftSize=256,t.connect(a),r.current=a,e},[]),y=(0,s.useCallback)(async()=>{let e=g();return"suspended"===e.state&&await e.resume(),e},[g]),j=(0,s.useCallback)(async e=>{let t=b.current.get(e);if(t)return t;let a=await y(),s=await fetch(e),i=await s.arrayBuffer(),n=await a.decodeAudioData(i);return b.current.set(e,n),n},[y]),w=(0,s.useCallback)(async e=>{let t=await y(),a=await e.arrayBuffer();return await t.decodeAudioData(a)},[y]),v=(0,s.useCallback)((e,t=200)=>{let a=e.getChannelData(0),s=Math.floor(a.length/t),i=[];for(let e=0;e<t;e++){let t=0,n=e*s,r=Math.min(n+s,a.length);for(let e=n;e<r;e++){let s=Math.abs(a[e]);s>t&&(t=s)}i.push(t)}return i},[]),N=(0,s.useCallback)(e=>{let t=i.current;if(!t||!n.current)return null;let a=l.current.get(e.id),s=o.current.get(e.id);return a||(a=t.createGain(),s=t.createStereoPanner(),a.connect(s),s.connect(n.current),l.current.set(e.id,a),o.current.set(e.id,s)),a.gain.value=e.mute?0:e.volume,s&&(s.pan.value=e.pan),{gainNode:a,panNode:s}},[]),$=(0,s.useCallback)(async(e,t,a,s,n)=>{let r,l=i.current;if(!l)return;let o=N(t);if(!o)return;if(e.audioBuffer)r=e.audioBuffer;else if(e.audioUrl)try{r=await j(e.audioUrl)}catch(e){console.error("Failed to load audio:",e);return}if(!r)return;let d=(e.startBeat-s)/n*60,m=e.offset??0;if(d+r.duration<0)return;let u=l.createBufferSource();u.buffer=r;let x=l.createGain();x.gain.value=e.gain??1,u.connect(x),x.connect(o.gainNode);let p=Math.max(0,a+d);u.start(p,d<0?-d+m:m),c.current.push({source:u,clipId:e.id,trackId:t.id}),u.onended=()=>{c.current=c.current.filter(e=>e.source!==u)}},[N,j]),k=(0,s.useCallback)(()=>{c.current.forEach(({source:e})=>{try{e.stop()}catch(e){}}),c.current=[]},[]),S=(0,s.useCallback)(()=>{if(!i.current||!t.isPlaying||!e)return;let s=i.current,n=s.currentTime-d.current,l=m.current+n/60*e.bpm;if(e.loopEnabled&&l>=e.loopEnd?(m.current=e.loopStart,d.current=s.currentTime,k(),e.tracks.forEach(t=>{t.mute||t.clips.forEach(a=>{$(a,t,s.currentTime,e.loopStart,e.bpm)})}),a(t=>({...t,currentBeat:e.loopStart}))):a(e=>({...e,currentBeat:l})),r.current){let e=new Uint8Array(r.current.frequencyBinCount);r.current.getByteFrequencyData(e);let t=e.reduce((e,t)=>e+t,0)/e.length;a(e=>({...e,masterLevel:t/255}))}u.current=requestAnimationFrame(S)},[e,t.isPlaying,k,$]),C=(0,s.useCallback)(async s=>{if(!e)return;let i=await y();k();let n=s??t.currentBeat;m.current=n,d.current=i.currentTime,e.tracks.forEach(t=>{e.tracks.some(e=>e.solo)&&!t.solo||t.mute||t.clips.forEach(a=>{$(a,t,i.currentTime,n,e.bpm)})}),a(e=>({...e,isPlaying:!0,currentBeat:n})),u.current=requestAnimationFrame(S)},[e,t.currentBeat,y,k,$,S]),M=(0,s.useCallback)(()=>{k(),u.current&&cancelAnimationFrame(u.current),a(e=>({...e,isPlaying:!1}))},[k]),A=(0,s.useCallback)(()=>{M(),a(t=>({...t,currentBeat:e?.loopEnabled?e.loopStart:0}))},[M,e]),F=(0,s.useCallback)(e=>{t.isPlaying?C(e):a(t=>({...t,currentBeat:e}))},[t.isPlaying,C]),R=(0,s.useCallback)(async e=>{try{let e=await navigator.mediaDevices.getUserMedia({audio:!0});h.current=e;let s=await y(),i=s.createMediaStreamSource(e),n=s.createAnalyser();n.fftSize=256,i.connect(n),f.current=n;let r=new MediaRecorder(e,{mimeType:"audio/webm;codecs=opus"});p.current=[],r.ondataavailable=e=>{e.data.size>0&&p.current.push(e.data)},x.current=r,r.start(100),a(e=>({...e,isRecording:!0})),t.isPlaying||C()}catch(e){throw console.error("Failed to start recording:",e),e}},[y,t.isPlaying,C]),P=(0,s.useCallback)(async()=>new Promise(e=>{let t=x.current;t?(t.onstop=async()=>{let t=new Blob(p.current,{type:"audio/webm"}),a=i.current;if(a)try{let s=await t.arrayBuffer(),i=await a.decodeAudioData(s);e({blob:t,buffer:i})}catch(t){console.error("Failed to decode recording:",t),e(null)}else e(null);h.current&&(h.current.getTracks().forEach(e=>e.stop()),h.current=null),f.current=null,x.current=null,p.current=[]},t.stop(),a(e=>({...e,isRecording:!1}))):e(null)}),[]);(0,s.useEffect)(()=>{if(!t.isRecording||!f.current)return;let e=()=>{if(f.current){let e=new Uint8Array(f.current.frequencyBinCount);f.current.getByteFrequencyData(e);let t=e.reduce((e,t)=>e+t,0)/e.length;a(e=>({...e,inputLevel:t/255}))}t.isRecording&&requestAnimationFrame(e)};e()},[t.isRecording]);let B=(0,s.useCallback)(async(t="wav",a,s)=>{if(!e)return null;let i=a??0,n=((s??e.loopEnd)-i)/e.bpm*60,r=new OfflineAudioContext(2,Math.ceil(44100*n),44100),l=r.createGain();for(let t of(l.gain.value=.8,l.connect(r.destination),e.tracks)){if(e.tracks.some(e=>e.solo)&&!t.solo||t.mute)continue;let a=r.createGain();a.gain.value=t.volume;let s=r.createStereoPanner();for(let o of(s.pan.value=t.pan,a.connect(s),s.connect(l),t.clips)){let t;if(o.audioBuffer?t=o.audioBuffer:o.audioUrl&&(t=b.current.get(o.audioUrl)),!t)continue;let s=(o.startBeat-i)/e.bpm*60;if(s>=n||s+t.duration<=0)continue;let l=r.createBufferSource();l.buffer=t;let c=r.createGain();c.gain.value=o.gain??1,l.connect(c),c.connect(a);let d=Math.max(0,s),m=s<0?-s:0;l.start(d,m)}}let o=await r.startRendering();return Q(o)},[e]),T=(0,s.useCallback)(async(t,a)=>{if(!e)return null;let s=new Map,i=t??0,n=((a??e.loopEnd)-i)/e.bpm*60;for(let t of e.tracks){if(0===t.clips.length)continue;let a=new OfflineAudioContext(2,Math.ceil(44100*n),44100),r=a.createGain();r.gain.value=t.volume;let l=a.createStereoPanner();for(let s of(l.pan.value=t.pan,r.connect(l),l.connect(a.destination),t.clips)){let t;if(s.audioBuffer?t=s.audioBuffer:s.audioUrl&&(t=b.current.get(s.audioUrl)),!t)continue;let l=(s.startBeat-i)/e.bpm*60;if(l>=n)continue;let o=a.createBufferSource();o.buffer=t;let c=a.createGain();c.gain.value=s.gain??1,o.connect(c),c.connect(r);let d=Math.max(0,l),m=l<0?-l:0;o.start(d,m)}let o=Q(await a.startRendering());s.set(t.name,o)}return s},[e]);return(0,s.useEffect)(()=>()=>{k(),u.current&&cancelAnimationFrame(u.current),h.current&&h.current.getTracks().forEach(e=>e.stop()),i.current&&i.current.close()},[k]),{...t,play:C,pause:M,stop:A,seek:F,startRecording:R,stopRecording:P,loadAudio:j,loadAudioFromFile:w,generateWaveformPeaks:v,exportMix:B,exportStems:T,resumeAudioContext:y}}(f),en=(0,s.useRef)(null);(0,s.useEffect)(()=>{H(!0);try{let e=function(){try{let e=localStorage.getItem(ee);if(!e)return null;let t=JSON.parse(e);if(!t||"string"!=typeof t.id||!Array.isArray(t.tracks))return console.warn("Invalid project data in localStorage, clearing..."),localStorage.removeItem(ee),null;return{id:t.id,name:t.name,bpm:t.bpm,timeSignature:t.timeSignature,createdAt:t.createdAt,updatedAt:t.updatedAt,loopStart:t.loopStart,loopEnd:t.loopEnd,loopEnabled:t.loopEnabled,tracks:t.tracks.map(e=>({id:e.id,name:e.name,type:e.type,color:e.color,volume:e.volume,pan:e.pan,mute:e.mute,solo:e.solo,armed:e.armed,clips:e.clips.map(e=>({id:e.id,name:e.name,startBeat:e.startBeat,lengthBeats:e.lengthBeats,audioUrl:e.audioUrl,waveformPeaks:e.waveformPeaks,offset:e.offset,gain:e.gain}))}))}}catch(e){console.error("Failed to load project:",e);try{localStorage.removeItem(ee)}catch{}return null}}();e&&b(e)}catch(e){console.warn("Failed to load saved project:",e)}},[]),(0,s.useEffect)(()=>{f&&function(e){try{let t={id:e.id,name:e.name,bpm:e.bpm,timeSignature:e.timeSignature,createdAt:e.createdAt,updatedAt:Date.now(),loopStart:e.loopStart,loopEnd:e.loopEnd,loopEnabled:e.loopEnabled,tracks:e.tracks.map(e=>({id:e.id,name:e.name,type:e.type,color:e.color,volume:e.volume,pan:e.pan,mute:e.mute,solo:e.solo,armed:e.armed,clips:e.clips.map(e=>({id:e.id,name:e.name,startBeat:e.startBeat,lengthBeats:e.lengthBeats,audioUrl:e.audioUrl,waveformPeaks:e.waveformPeaks,offset:e.offset,gain:e.gain}))}))};localStorage.setItem(ee,JSON.stringify(t)),function(e,t,a){try{let s=localStorage.getItem(et),i=s?JSON.parse(s):[],n=i.findIndex(t=>t.id===e);n>=0?i[n]={id:e,name:t,updatedAt:a}:i.push({id:e,name:t,updatedAt:a}),i.sort((e,t)=>t.updatedAt-e.updatedAt),localStorage.setItem(et,JSON.stringify(i))}catch(e){console.error("Failed to update projects list:",e)}}(e.id,e.name,e.updatedAt)}catch(e){console.error("Failed to save project:",e)}}(f)},[f]);let er=(0,s.useCallback)((e,t="audio")=>{b(a=>{if(!a)return a;let s=Z(e,t,a.tracks.length);return{...a,tracks:[...a.tracks,s],updatedAt:Date.now()}})},[]),el=(0,s.useCallback)((e,t)=>{b(a=>a?{...a,tracks:a.tracks.map(a=>a.id===e?{...a,...t}:a),updatedAt:Date.now()}:a)},[]),eo=(0,s.useCallback)(()=>{f||b(X("Untitled")),h(!0),U(!0)},[f]),ec=(0,s.useCallback)(async e=>{if(f){L(!0);try{let t=await es.exportMix(e,0,f.loopEnd);if(t){let a=URL.createObjectURL(t),s=document.createElement("a");s.href=a,s.download=`${f.name.replace(/[^a-z0-9]/gi,"_")}_mix.${e}`,s.click(),URL.revokeObjectURL(a)}}catch(e){console.error("Export failed:",e)}L(!1),D(!1)}},[f,es]),ed=(0,s.useCallback)(async()=>{if(f)if(es.isRecording){let e=await es.stopRecording();if(e&&Y){let t=await ei(e.buffer),a=URL.createObjectURL(t),s=K(`Recording ${new Date().toLocaleTimeString()}`,0,Math.ceil(e.buffer.duration*f.bpm/60),a);b(e=>e?{...e,tracks:e.tracks.map(e=>e.id===Y?{...e,clips:[...e.clips,s]}:e),updatedAt:Date.now()}:e)}ea(null)}else{let e=f.tracks.find(e=>e.armed)?.id;if(!e){let t=Z("Recording","audio",f.tracks.length);t.armed=!0,b(e=>e?{...e,tracks:[...e.tracks,t],updatedAt:Date.now()}:e),e=t.id}ea(e),await es.startRecording(e)}},[f,es,Y]);if((0,s.useEffect)(()=>{let e=e=>{if(!["INPUT","TEXTAREA"].includes(e.target.tagName))switch(e.code){case"Space":e.preventDefault(),es.isPlaying?es.pause():es.play();break;case"Escape":U(!1),D(!1),W(!1)}};return window.addEventListener("keydown",e),()=>window.removeEventListener("keydown",e)},[es]),!G)return(0,t.jsx)("div",{className:"h-dvh flex items-center justify-center bg-zinc-950",children:(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsx)("div",{className:"w-12 h-12 rounded-xl bg-gradient-to-br from-cyan-500 to-cyan-500 flex items-center justify-center mx-auto mb-4",children:(0,t.jsx)(j.Music,{className:"w-6 h-6 text-white"})}),(0,t.jsx)("p",{className:"text-white/60 text-sm",children:"Loading Jamz Studio..."})]})});if(!p)return(0,t.jsxs)(_.PageTransition,{children:[(0,t.jsx)(eC,{}),(0,t.jsx)(eT,{onEnterStudio:eo,colors:m,reducedMotion:d,themeClass:x})]});let em=[{id:"arrange",label:"Arrange",icon:(0,t.jsx)($.Grid3X3,{className:"w-4 h-4"})},{id:"mixer",label:"Mixer",icon:(0,t.jsx)(v.default,{className:"w-4 h-4"})},{id:"browser",label:"Generate",icon:(0,t.jsx)(E.Sparkles,{className:"w-4 h-4"})}];return(0,t.jsxs)(_.PageTransition,{children:[(0,t.jsx)(eC,{}),(0,t.jsxs)("div",{className:`h-dvh flex flex-col ${m.bg} ${m.text} overflow-hidden ${x}`,children:[(0,t.jsx)("input",{ref:en,type:"file",accept:"audio/*",className:"sr-only","aria-label":"Upload audio file"}),(0,t.jsxs)("header",{className:`flex items-center justify-between px-2 sm:px-4 py-2 ${m.bgSecondary} border-b ${m.border}`,role:"banner",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2 sm:gap-3",children:[(0,t.jsx)("button",{onClick:()=>h(!1),className:`p-2 rounded-lg ${m.textFaint} hover:${m.text} hover:${m.cardHover} transition-colors min-w-[40px] min-h-[40px] touch-manipulation focus:outline-none focus:ring-2 focus:ring-cyan-500`,"aria-label":"Return to landing page",children:(0,t.jsx)(F.Home,{className:"w-4 h-4 sm:w-5 sm:h-5"})}),(0,t.jsx)("div",{className:`w-px h-6 ${m.isDark?"bg-white/10":"bg-slate-200"} hidden sm:block`,"aria-hidden":"true"}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)("div",{className:"w-7 h-7 sm:w-8 sm:h-8 rounded-lg bg-gradient-to-br from-cyan-500 to-cyan-500 flex items-center justify-center flex-shrink-0","aria-hidden":"true",children:(0,t.jsx)(j.Music,{className:"w-3.5 h-3.5 sm:w-4 sm:h-4 text-white"})}),(0,t.jsxs)("div",{className:"min-w-0",children:[(0,t.jsx)("h1",{className:`text-xs sm:text-sm font-semibold ${m.text} truncate max-w-[100px] sm:max-w-none`,children:f?.name||"Jamz Studio"}),(0,t.jsx)("p",{className:`text-[10px] ${m.textFaint} hidden sm:block`,children:f?`${f.tracks.length} tracks`:"No project"})]})]})]}),(0,t.jsx)("nav",{className:`hidden sm:flex items-center gap-1 p-1 ${m.bgTertiary} rounded-lg`,role:"tablist","aria-label":"View selection",children:em.map(e=>(0,t.jsxs)("button",{onClick:()=>w(e.id),role:"tab","aria-selected":y===e.id,"aria-controls":`${e.id}-panel`,className:`flex items-center gap-2 px-3 py-1.5 rounded-md text-xs font-medium transition-colors min-h-[36px] touch-manipulation focus:outline-none focus:ring-2 focus:ring-cyan-500 ${y===e.id?"bg-cyan-500 text-white":`${m.textFaint} hover:${m.text} hover:${m.cardHover}`}`,children:[e.icon,(0,t.jsx)("span",{children:e.label})]},e.id))}),(0,t.jsxs)("div",{className:"flex items-center gap-1 sm:gap-2",children:[(0,t.jsx)("button",{onClick:()=>S(e=>Math.max(.5,e-.25)),className:`hidden sm:flex p-2 rounded-lg ${m.textFaint} hover:${m.text} hover:${m.cardHover} transition-colors min-w-[36px] min-h-[36px] items-center justify-center focus:outline-none focus:ring-2 focus:ring-cyan-500`,"aria-label":"Zoom out",children:(0,t.jsx)(A.ZoomOut,{className:"w-4 h-4"})}),(0,t.jsx)("button",{onClick:()=>S(e=>Math.min(2,e+.25)),className:`hidden sm:flex p-2 rounded-lg ${m.textFaint} hover:${m.text} hover:${m.cardHover} transition-colors min-w-[36px] min-h-[36px] items-center justify-center focus:outline-none focus:ring-2 focus:ring-cyan-500`,"aria-label":"Zoom in",children:(0,t.jsx)(M.ZoomIn,{className:"w-4 h-4"})}),(0,t.jsx)("div",{className:`w-px h-6 ${m.isDark?"bg-white/10":"bg-slate-200"} hidden sm:block`,"aria-hidden":"true"}),(0,t.jsxs)("button",{onClick:()=>w("browser"),className:`hidden sm:flex items-center gap-1.5 px-2.5 py-1.5 rounded-lg text-xs font-medium transition-colors min-h-[36px] touch-manipulation focus:outline-none focus:ring-2 focus:ring-purple-500 ${"browser"===y?"bg-purple-600 text-white":`${m.textFaint}`}`,"aria-label":"AI Generate music",children:[(0,t.jsx)(E.Sparkles,{className:"w-3.5 h-3.5"}),(0,t.jsx)("span",{children:"AI"})]}),(0,t.jsxs)("button",{onClick:()=>w("browser"),className:"flex items-center gap-1.5 sm:gap-2 px-2.5 sm:px-3 py-1.5 rounded-lg bg-purple-600 text-white text-xs sm:text-sm font-medium hover:bg-purple-700 transition-colors min-h-[36px] touch-manipulation focus:outline-none focus:ring-2 focus:ring-purple-500 focus:ring-offset-2","aria-label":"AI Generate music",children:[(0,t.jsx)(E.Sparkles,{className:"w-3.5 h-3.5 sm:w-4 sm:h-4"}),(0,t.jsx)("span",{className:"hidden sm:inline",children:"AI Generate"})]}),(0,t.jsxs)("button",{onClick:()=>D(!0),disabled:!f||0===f.tracks.length,className:"flex items-center gap-1.5 sm:gap-2 px-2.5 sm:px-3 py-1.5 rounded-lg bg-cyan-500 text-white text-xs sm:text-sm font-medium hover:bg-cyan-600 transition-colors disabled:opacity-50 disabled:cursor-not-allowed min-h-[36px] touch-manipulation focus:outline-none focus:ring-2 focus:ring-cyan-500 focus:ring-offset-2","aria-label":"Export project",children:[(0,t.jsx)(P.Download,{className:"w-3.5 h-3.5 sm:w-4 sm:h-4"}),(0,t.jsx)("span",{className:"hidden sm:inline",children:"Export"})]}),(0,t.jsx)("button",{onClick:()=>W(!O),className:`sm:hidden p-2 rounded-lg ${m.textFaint} hover:${m.text} transition-colors min-w-[40px] min-h-[40px] touch-manipulation focus:outline-none focus:ring-2 focus:ring-cyan-500`,"aria-label":"Open menu","aria-expanded":O,children:(0,t.jsx)(V.Menu,{className:"w-5 h-5"})})]})]}),(0,t.jsx)(n.AnimatePresence,{children:O&&u&&(0,t.jsx)(i.motion.div,{initial:d?{opacity:1}:{opacity:0,y:-10},animate:{opacity:1,y:0},exit:d?{opacity:0}:{opacity:0,y:-10},className:`sm:hidden absolute top-14 left-0 right-0 z-40 ${m.bgSecondary} border-b ${m.border} shadow-lg`,children:(0,t.jsx)("nav",{className:"p-2 space-y-1",role:"tablist","aria-label":"View selection",children:em.map(e=>(0,t.jsxs)("button",{onClick:()=>{w(e.id),W(!1)},role:"tab","aria-selected":y===e.id,className:`w-full flex items-center gap-3 px-4 py-3 rounded-lg text-sm font-medium transition-colors touch-manipulation ${y===e.id?"bg-cyan-500 text-white":`${m.text} ${m.cardHover}`}`,children:[e.icon,(0,t.jsx)("span",{children:e.label})]},e.id))})})}),f&&(0,t.jsx)(eE,{isPlaying:es.isPlaying,isRecording:es.isRecording,currentBeat:es.currentBeat,bpm:f.bpm,loop:f.loopEnabled,inputLevel:es.inputLevel,colors:m,onPlayPause:()=>es.isPlaying?es.pause():es.play(),onStop:es.stop,onRecord:ed,onBpmChange:e=>b(t=>t?{...t,bpm:e}:t),onLoopToggle:()=>b(e=>e?{...e,loopEnabled:!e.loopEnabled}:e)}),(0,t.jsx)("main",{id:"main-content",className:"flex-1 flex overflow-hidden",role:"main","aria-label":"Studio workspace",children:(0,t.jsxs)(n.AnimatePresence,{mode:"wait",children:["arrange"===y&&f&&(0,t.jsxs)(i.motion.div,{id:"arrange-panel",role:"tabpanel","aria-labelledby":"arrange-tab",initial:d?{opacity:1}:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"flex-1 flex flex-col overflow-hidden",children:[(0,t.jsxs)("div",{className:`h-6 sm:h-8 flex-shrink-0 ${m.bgSecondary} border-b ${m.border} flex items-center px-2 sm:px-4`,role:"presentation","aria-hidden":"true",children:[(0,t.jsx)("div",{className:"w-20 sm:w-32 flex-shrink-0"}),(0,t.jsx)("div",{className:"flex-1 flex items-center overflow-hidden",children:Array.from({length:Math.ceil(16)}).map((e,a)=>(0,t.jsx)("div",{className:`flex-1 text-[8px] sm:text-[10px] ${m.textFaint}`,style:{minWidth:`${(u?60:100)*k}px`},children:a+1},a))})]}),(0,t.jsxs)("div",{className:"flex-1 overflow-auto",role:"list","aria-label":"Audio tracks",children:[f.tracks.map((e,a)=>(0,t.jsxs)("div",{className:`flex items-stretch border-b ${m.border} h-16 sm:h-20`,role:"listitem","aria-label":`Track ${a+1}: ${e.name}`,children:[(0,t.jsxs)("div",{className:`w-20 sm:w-32 flex-shrink-0 p-1.5 sm:p-2 ${m.bgSecondary} border-r ${m.border} flex flex-col justify-center`,children:[(0,t.jsx)("div",{className:`text-xs sm:text-sm font-medium ${m.text} truncate`,children:e.name}),(0,t.jsxs)("div",{className:"flex items-center gap-0.5 sm:gap-1 mt-1",children:[(0,t.jsx)("button",{onClick:()=>el(e.id,{mute:!e.mute}),className:`px-1 sm:px-1.5 py-0.5 text-[8px] sm:text-[10px] rounded min-w-[20px] sm:min-w-[24px] touch-manipulation focus:outline-none focus:ring-1 focus:ring-cyan-500 ${e.mute?"bg-yellow-500 text-black":`${m.bgTertiary} ${m.textFaint}`}`,"aria-label":`${e.mute?"Unmute":"Mute"} ${e.name}`,"aria-pressed":e.mute,children:"M"}),(0,t.jsx)("button",{onClick:()=>el(e.id,{solo:!e.solo}),className:`px-1 sm:px-1.5 py-0.5 text-[8px] sm:text-[10px] rounded min-w-[20px] sm:min-w-[24px] touch-manipulation focus:outline-none focus:ring-1 focus:ring-cyan-500 ${e.solo?"bg-cyan-500 text-black":`${m.bgTertiary} ${m.textFaint}`}`,"aria-label":`${e.solo?"Unsolo":"Solo"} ${e.name}`,"aria-pressed":e.solo,children:"S"}),(0,t.jsx)("button",{onClick:()=>el(e.id,{armed:!e.armed}),className:`px-1 sm:px-1.5 py-0.5 text-[8px] sm:text-[10px] rounded min-w-[20px] sm:min-w-[24px] touch-manipulation focus:outline-none focus:ring-1 focus:ring-red-500 ${e.armed?"bg-red-500 text-white":`${m.bgTertiary} ${m.textFaint}`}`,"aria-label":`${e.armed?"Disarm":"Arm"} ${e.name} for recording`,"aria-pressed":e.armed,children:"R"})]})]}),(0,t.jsx)("div",{className:`flex-1 ${m.bg} relative`,children:e.clips.map(a=>(0,t.jsxs)("div",{className:"absolute top-0.5 sm:top-1 bottom-0.5 sm:bottom-1 rounded-md sm:rounded-lg overflow-hidden",style:{left:`${a.startBeat/64*100}%`,width:`${a.lengthBeats/64*100}%`,backgroundColor:q[e.color]||"#8b5cf6"},role:"button",tabIndex:0,"aria-label":`Clip: ${a.name}`,children:[(0,t.jsx)("div",{className:`absolute inset-0 ${m.isDark?"bg-black/20":"bg-white/20"}`}),(0,t.jsx)("div",{className:`p-0.5 sm:p-1 text-[8px] sm:text-[10px] ${m.isDark?"text-white/80":"text-white"} truncate`,children:a.name})]},a.id))})]},e.id)),(0,t.jsxs)("button",{onClick:()=>er(`Track ${(f?.tracks.length||0)+1}`),className:`w-full p-3 sm:p-4 ${m.card} border-b ${m.border} flex items-center justify-center gap-2 ${m.textFaint} hover:${m.text} hover:${m.cardHover} transition-colors min-h-[48px] touch-manipulation focus:outline-none focus:ring-2 focus:ring-cyan-500 focus:ring-inset`,"aria-label":"Add new track",children:[(0,t.jsx)(N.Plus,{className:"w-4 h-4"}),(0,t.jsx)("span",{className:"text-sm",children:"Add Track"})]})]})]},"arrange"),"mixer"===y&&f&&(0,t.jsx)(i.motion.div,{id:"mixer-panel",role:"tabpanel","aria-labelledby":"mixer-tab",initial:d?{opacity:1}:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"flex-1 flex items-end justify-start sm:justify-center gap-2 sm:gap-3 p-3 sm:p-6 overflow-x-auto",children:f.tracks.map(e=>(0,t.jsxs)("div",{className:`flex flex-col items-center p-2 sm:p-3 ${m.card} rounded-lg sm:rounded-xl border ${m.border} min-w-[60px] sm:min-w-[80px]`,role:"group","aria-label":`${e.name} mixer channel`,children:[(0,t.jsx)("div",{className:`text-[10px] sm:text-xs font-medium ${m.text} mb-2 sm:mb-3 truncate max-w-[50px] sm:max-w-[70px]`,children:e.name}),(0,t.jsxs)("div",{className:"relative h-24 sm:h-32 w-5 sm:w-6 mb-2 sm:mb-3",role:"slider","aria-label":`${e.name} volume`,"aria-valuenow":Math.round(100*e.volume),"aria-valuemin":0,"aria-valuemax":100,children:[(0,t.jsx)("div",{className:`absolute inset-0 ${m.bgTertiary} rounded-full`}),(0,t.jsx)("div",{className:"absolute bottom-0 left-0.5 right-0.5 sm:left-1 sm:right-1 rounded-full bg-gradient-to-t from-cyan-500 to-cyan-500",style:{height:`${100*e.volume}%`}})]}),(0,t.jsxs)("div",{className:`text-[8px] sm:text-[10px] font-mono ${m.textFaint} mb-1.5 sm:mb-2`,children:[Math.round((e.volume-1)*100)," dB"]}),(0,t.jsxs)("div",{className:"flex gap-0.5 sm:gap-1",children:[(0,t.jsx)("button",{onClick:()=>el(e.id,{mute:!e.mute}),className:`w-5 h-5 sm:w-6 sm:h-6 rounded text-[8px] sm:text-[10px] font-bold touch-manipulation focus:outline-none focus:ring-1 focus:ring-cyan-500 ${e.mute?"bg-yellow-500 text-black":`${m.bgTertiary} ${m.textFaint}`}`,"aria-label":`${e.mute?"Unmute":"Mute"} ${e.name}`,"aria-pressed":e.mute,children:"M"}),(0,t.jsx)("button",{onClick:()=>el(e.id,{solo:!e.solo}),className:`w-5 h-5 sm:w-6 sm:h-6 rounded text-[8px] sm:text-[10px] font-bold touch-manipulation focus:outline-none focus:ring-1 focus:ring-cyan-500 ${e.solo?"bg-cyan-500 text-black":`${m.bgTertiary} ${m.textFaint}`}`,"aria-label":`${e.solo?"Unsolo":"Solo"} ${e.name}`,"aria-pressed":e.solo,children:"S"})]})]},e.id))},"mixer"),"browser"===y&&(0,t.jsx)(i.motion.div,{id:"browser-panel",role:"tabpanel","aria-labelledby":"generate-tab",initial:d?{opacity:1}:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"flex-1 flex overflow-hidden",children:(0,t.jsx)(ek,{colors:m,projectId:f?.id,onAddToArrange:f?e=>{let t=f.tracks.length%J.length,a=Z(e.title,"audio",t),s=K(e.title,0,e.duration/60*f.bpm);s.audioUrl=e.audioUrl,a.clips=[s],b(e=>e?{...e,tracks:[...e.tracks,a]}:e),w("arrange")}:void 0})},"generate"),!f&&"browser"!==y&&(0,t.jsx)(i.motion.div,{initial:d?{opacity:1}:{opacity:0},animate:{opacity:1},className:"flex-1 flex items-center justify-center p-4",children:(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsx)("div",{className:`w-12 h-12 sm:w-16 sm:h-16 mx-auto mb-3 sm:mb-4 rounded-xl sm:rounded-2xl ${m.card} flex items-center justify-center`,"aria-hidden":"true",children:(0,t.jsx)(j.Music,{className:`w-6 h-6 sm:w-8 sm:h-8 ${m.textFaint}`})}),(0,t.jsx)("p",{className:`${m.textFaint} text-xs sm:text-sm mb-3 sm:mb-4`,children:"No project open"}),(0,t.jsx)("button",{onClick:()=>U(!0),className:"px-4 py-2.5 bg-cyan-500 text-white rounded-lg text-sm font-medium hover:bg-cyan-600 transition-colors min-h-[44px] touch-manipulation focus:outline-none focus:ring-2 focus:ring-cyan-500 focus:ring-offset-2",children:"Start a Quick Jam"})]})})]})}),(0,t.jsxs)("footer",{className:`flex items-center justify-between px-2 sm:px-4 py-1.5 sm:py-2 ${m.bgSecondary} border-t ${m.border}`,role:"contentinfo",children:[(0,t.jsxs)("div",{className:`flex items-center gap-2 sm:gap-4 text-[8px] sm:text-[10px] ${m.textFaint}`,children:[(0,t.jsxs)("span",{className:"hidden sm:inline",children:["Zoom: ",Math.round(100*k),"%"]}),f&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("span",{className:"hidden sm:inline","aria-hidden":"true",children:"|"}),(0,t.jsxs)("span",{children:[f.tracks.length," Tracks"]}),(0,t.jsx)("span",{"aria-hidden":"true",children:"|"}),(0,t.jsxs)("span",{children:[16," Bars"]})]})]}),(0,t.jsxs)("div",{className:`text-[8px] sm:text-[10px] ${m.textFaint}`,children:["Design by"," ",(0,t.jsx)("a",{href:"https://x.com/joelbqz",target:"_blank",rel:"noopener noreferrer",className:"text-cyan-400 hover:text-cyan-300 underline underline-offset-2",children:"@joelbqz"})]})]}),(0,t.jsx)(n.AnimatePresence,{children:C&&(0,t.jsx)(i.motion.div,{initial:d?{opacity:1}:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-50 flex items-center justify-center bg-black/80 backdrop-blur-sm p-4",role:"dialog","aria-modal":"true","aria-labelledby":"quickjam-title",children:(0,t.jsxs)(i.motion.div,{initial:d?{scale:1,y:0}:{scale:.9,y:20},animate:{scale:1,y:0},exit:d?{scale:1,y:0}:{scale:.9,y:20},className:`relative w-full max-w-sm sm:max-w-lg p-4 sm:p-6 ${m.bgSecondary} rounded-xl sm:rounded-2xl border ${m.border}`,children:[(0,t.jsx)("button",{onClick:()=>U(!1),className:`absolute top-3 right-3 sm:top-4 sm:right-4 p-2 ${m.textFaint} hover:${m.text} transition-colors min-w-[40px] min-h-[40px] touch-manipulation focus:outline-none focus:ring-2 focus:ring-cyan-500 rounded-lg`,"aria-label":"Close dialog",children:(0,t.jsx)(B.X,{className:"w-5 h-5"})}),(0,t.jsx)("h2",{id:"quickjam-title",className:`text-xl sm:text-2xl font-bold ${m.text} mb-2`,children:"Quick Jam"}),(0,t.jsx)("p",{className:`${m.textMuted} mb-4 sm:mb-6 text-sm`,children:"How would you like to start?"}),(0,t.jsx)("div",{className:"grid grid-cols-2 gap-2 sm:gap-4",children:[{id:"record",icon:(0,t.jsx)(g.Mic,{className:"w-6 h-6 sm:w-8 sm:h-8"}),title:"Record",desc:"Capture vocals",gradient:"from-red-500 to-rose-600"},{id:"upload",icon:(0,t.jsx)(R.Upload,{className:"w-6 h-6 sm:w-8 sm:h-8"}),title:"Upload",desc:"Import audio",gradient:"from-cyan-500 to-teal-600"},{id:"template",icon:(0,t.jsx)(j.Music,{className:"w-6 h-6 sm:w-8 sm:h-8"}),title:"Template",desc:"Start with loops",gradient:"from-cyan-500 to-blue-600"},{id:"ai-generate",icon:(0,t.jsx)(E.Sparkles,{className:"w-6 h-6 sm:w-8 sm:h-8"}),title:"AI Generate",desc:"Create with AI",gradient:"from-purple-500 to-violet-600"}].map(e=>(0,t.jsxs)("button",{onClick:()=>{f||b(X("ai-generate"===e.id?"AI Session":"Untitled")),U(!1),"ai-generate"===e.id&&w("browser")},className:`flex flex-col items-center p-2 sm:p-4 rounded-lg sm:rounded-xl ${m.card} border ${m.border} hover:${m.borderHover} transition-all hover:-translate-y-1 touch-manipulation focus:outline-none focus:ring-2 focus:ring-cyan-500 min-h-[100px] sm:min-h-[140px]`,"aria-label":`${e.title}: ${e.desc}`,children:[(0,t.jsx)("div",{className:`w-10 h-10 sm:w-16 sm:h-16 rounded-lg sm:rounded-xl bg-gradient-to-br ${e.gradient} flex items-center justify-center text-white mb-2 sm:mb-3`,"aria-hidden":"true",children:e.icon}),(0,t.jsx)("div",{className:`font-medium ${m.text} text-xs sm:text-base`,children:e.title}),(0,t.jsx)("div",{className:`text-[10px] sm:text-xs ${m.textFaint} hidden sm:block`,children:e.desc})]},e.id))})]})})}),(0,t.jsx)(n.AnimatePresence,{children:I&&(0,t.jsx)(i.motion.div,{initial:d?{opacity:1}:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-50 flex items-center justify-center bg-black/80 backdrop-blur-sm p-4",role:"dialog","aria-modal":"true","aria-labelledby":"export-title",children:(0,t.jsxs)(i.motion.div,{initial:d?{scale:1,y:0}:{scale:.9,y:20},animate:{scale:1,y:0},exit:d?{scale:1,y:0}:{scale:.9,y:20},className:`relative w-full max-w-sm sm:max-w-md p-4 sm:p-6 ${m.bgSecondary} rounded-xl sm:rounded-2xl border ${m.border}`,children:[(0,t.jsx)("button",{onClick:()=>D(!1),className:`absolute top-3 right-3 sm:top-4 sm:right-4 p-2 ${m.textFaint} hover:${m.text} transition-colors min-w-[40px] min-h-[40px] touch-manipulation focus:outline-none focus:ring-2 focus:ring-cyan-500 rounded-lg`,"aria-label":"Close dialog",children:(0,t.jsx)(B.X,{className:"w-5 h-5"})}),(0,t.jsx)("h2",{id:"export-title",className:`text-lg sm:text-xl font-bold ${m.text} mb-3 sm:mb-4`,children:"Export Project"}),(0,t.jsxs)("div",{className:"space-y-2 sm:space-y-3",children:[(0,t.jsxs)("button",{onClick:()=>ec("wav"),disabled:z,className:`w-full p-3 sm:p-4 rounded-lg sm:rounded-xl ${m.card} border ${m.border} hover:${m.borderHover} transition-colors text-left disabled:opacity-50 disabled:cursor-not-allowed min-h-[60px] touch-manipulation focus:outline-none focus:ring-2 focus:ring-cyan-500`,"aria-describedby":"wav-desc",children:[(0,t.jsx)("div",{className:`font-medium ${m.text} text-sm sm:text-base`,children:"WAV (Best Quality)"}),(0,t.jsx)("div",{id:"wav-desc",className:`text-xs sm:text-sm ${m.textFaint}`,children:"Lossless audio format"})]}),(0,t.jsxs)("button",{onClick:()=>ec("mp3"),disabled:z,className:`w-full p-3 sm:p-4 rounded-lg sm:rounded-xl ${m.card} border ${m.border} hover:${m.borderHover} transition-colors text-left disabled:opacity-50 disabled:cursor-not-allowed min-h-[60px] touch-manipulation focus:outline-none focus:ring-2 focus:ring-cyan-500`,"aria-describedby":"mp3-desc",children:[(0,t.jsx)("div",{className:`font-medium ${m.text} text-sm sm:text-base`,children:"MP3 (Compressed)"}),(0,t.jsx)("div",{id:"mp3-desc",className:`text-xs sm:text-sm ${m.textFaint}`,children:"Smaller file size, 192kbps"})]})]}),z&&(0,t.jsxs)("div",{className:`mt-3 sm:mt-4 flex items-center justify-center gap-2 ${m.textMuted}`,role:"status","aria-live":"polite",children:[(0,t.jsx)(T.Loader2,{className:"w-4 h-4 animate-spin","aria-hidden":"true"}),(0,t.jsx)("span",{className:"text-sm",children:"Exporting..."})]})]})})})]})]})}e.s(["default",()=>eU],913515)}]);