(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,841637,e=>{"use strict";var t=e.i(726151),s=e.i(923041),i=e.i(569206),r=e.i(140113),a=e.i(662582);e.i(621586);var l=e.i(910158),o=e.i(345347),n=e.i(850402),d=e.i(334905),c=e.i(278124),x=e.i(107800),m=e.i(888570),h=e.i(678295),b=e.i(796150),g=e.i(696733),g=g,u=e.i(413698),p=e.i(610724),v=e.i(956352),j=e.i(432827),w=e.i(85444),N=e.i(734567),y=e.i(843246),f=e.i(973493),k=e.i(23670),S=e.i(734545);e.i(478522);let C={none:{bg:"bg-emerald-500/20",text:"text-emerald-400",border:"border-emerald-500/30",glow:"shadow-emerald-500/20"},low:{bg:"bg-blue-500/20",text:"text-blue-400",border:"border-blue-500/30",glow:"shadow-blue-500/20"},medium:{bg:"bg-yellow-500/20",text:"text-yellow-400",border:"border-yellow-500/30",glow:"shadow-yellow-500/20"},high:{bg:"bg-orange-500/20",text:"text-orange-400",border:"border-orange-500/30",glow:"shadow-orange-500/20"},critical:{bg:"bg-red-500/20",text:"text-red-400",border:"border-red-500/30",glow:"shadow-red-500/20"}},T={started:{bg:"bg-blue-500/20",text:"text-blue-400",border:"border-blue-500/30"},success:{bg:"bg-emerald-500/20",text:"text-emerald-400",border:"border-emerald-500/30"},error:{bg:"bg-red-500/20",text:"text-red-400",border:"border-red-500/30"},timeout:{bg:"bg-orange-500/20",text:"text-orange-400",border:"border-orange-500/30"},rate_limited:{bg:"bg-purple-500/20",text:"text-purple-400",border:"border-purple-500/30"}},$={ai_provider:{bg:"bg-violet-500/20",text:"text-violet-400",icon:"ü§ñ"},memory:{bg:"bg-pink-500/20",text:"text-pink-400",icon:"üß†"},tool_execution:{bg:"bg-amber-500/20",text:"text-amber-400",icon:"üîß"},webhook:{bg:"bg-cyan-500/20",text:"text-cyan-400",icon:"üì•"},system:{bg:"bg-slate-500/20",text:"text-slate-400",icon:"‚öôÔ∏è"}},L={lynkr:{bg:"bg-emerald-500/20",text:"text-emerald-400",icon:"üîó"},openai:{bg:"bg-green-500/20",text:"text-green-400",icon:"üü¢"},anthropic:{bg:"bg-orange-500/20",text:"text-orange-400",icon:"üü†"},ollama:{bg:"bg-blue-500/20",text:"text-blue-400",icon:"ü¶ô"},convex:{bg:"bg-red-500/20",text:"text-red-400",icon:"‚ö°"},internal:{bg:"bg-slate-500/20",text:"text-slate-400",icon:"üîí"}},A={ai_provider:m.Bot,memory:h.Brain,tool_execution:b.Wrench,webhook:g.default,system:u.Settings},M={started:p.Clock,success:j.CheckCircle,error:w.XCircle,timeout:N.Timer,rate_limited:y.Ban};function O({operation:e}){var i;let[r,l]=(0,s.useState)(!1),o=A[e.category]??x.Activity,n=M[e.status]??p.Clock,d=$[e.category]??$.system,m=T[e.status]??T.started,h=C[e.threatLevel??"none"],b=e.provider?L[e.provider]:null,g=e.requestSummary||e.responseSummary||e.errorMessage;return(0,t.jsxs)(a.motion.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},exit:{opacity:0,x:20},className:`
        border rounded-xl p-4 backdrop-blur-sm transition-all
        ${h.border} ${h.bg}
        hover:border-white/20
      `,children:[(0,t.jsxs)("div",{className:"flex items-center gap-4",children:[(0,t.jsx)("div",{className:"text-xs text-white/40 font-mono w-20 shrink-0",children:new Date(e.timestamp).toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit",second:"2-digit",hour12:!1})}),(0,t.jsx)("div",{className:`p-2 rounded-lg ${d.bg}`,children:(0,t.jsx)(o,{className:`w-4 h-4 ${d.text}`})}),(0,t.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)("span",{className:"font-medium text-white truncate",children:e.toolName||e.operation}),e.provider&&b&&(0,t.jsxs)("span",{className:`text-xs px-2 py-0.5 rounded-full ${b.bg} ${b.text}`,children:[b.icon," ",e.provider]}),e.model&&(0,t.jsx)("span",{className:"text-xs text-white/40 truncate",children:e.model})]}),(0,t.jsx)("div",{className:"text-xs text-white/40 mt-0.5",children:e.category})]}),(0,t.jsxs)("div",{className:"flex items-center gap-4 shrink-0",children:[(e.inputTokens||e.outputTokens)&&(0,t.jsxs)("div",{className:"text-xs text-white/40 flex items-center gap-1",children:[(0,t.jsx)(S.Zap,{className:"w-3 h-3"}),e.inputTokens??0,"/",e.outputTokens??0]}),(0,t.jsx)("div",{className:"text-xs text-white/50 font-mono w-16 text-right",children:(i=e.latencyMs)?i<1e3?`${i}ms`:`${(i/1e3).toFixed(2)}s`:"-"}),(0,t.jsx)("div",{className:`p-1.5 rounded-lg ${m.bg}`,children:(0,t.jsx)(n,{className:`w-4 h-4 ${m.text}`})}),e.threatLevel&&"none"!==e.threatLevel&&(0,t.jsx)("div",{className:`p-1.5 rounded-lg ${h.bg}`,children:(0,t.jsx)(v.AlertTriangle,{className:`w-4 h-4 ${h.text}`})}),g&&(0,t.jsx)("button",{onClick:()=>l(!r),className:"p-1.5 rounded-lg hover:bg-white/10 transition-colors",children:r?(0,t.jsx)(k.ChevronUp,{className:"w-4 h-4 text-white/40"}):(0,t.jsx)(f.ChevronDown,{className:"w-4 h-4 text-white/40"})})]})]}),(0,t.jsx)(c.AnimatePresence,{children:r&&g&&(0,t.jsxs)(a.motion.div,{initial:{height:0,opacity:0},animate:{height:"auto",opacity:1},exit:{height:0,opacity:0},className:"mt-4 pt-4 border-t border-white/10 space-y-2 overflow-hidden",children:[e.requestSummary&&(0,t.jsxs)("div",{children:[(0,t.jsx)("div",{className:"text-xs text-white/40 mb-1",children:"Request"}),(0,t.jsx)("div",{className:"text-sm text-white/70 font-mono bg-black/20 rounded-lg p-2 truncate",children:e.requestSummary})]}),e.responseSummary&&(0,t.jsxs)("div",{children:[(0,t.jsx)("div",{className:"text-xs text-white/40 mb-1",children:"Response"}),(0,t.jsx)("div",{className:"text-sm text-white/70 font-mono bg-black/20 rounded-lg p-2 truncate",children:e.responseSummary})]}),e.errorMessage&&(0,t.jsxs)("div",{children:[(0,t.jsx)("div",{className:"text-xs text-red-400 mb-1",children:"Error"}),(0,t.jsx)("div",{className:"text-sm text-red-300 font-mono bg-red-500/10 rounded-lg p-2",children:e.errorMessage})]})]})})]})}function P(){let[e,i]=(0,s.useState)(5),r=(0,n.useQuery)(d.api.observability.getActivityStream,{minutes:e,limit:50}),[,a]=(0,s.useState)(0);return(0,s.useEffect)(()=>{let e=setInterval(()=>a(e=>e+1),2e3);return()=>clearInterval(e)},[]),(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("h2",{className:"text-lg font-semibold text-white flex items-center gap-2",children:[(0,t.jsx)(x.Activity,{className:"w-5 h-5 text-violet-400"}),"Activity Stream"]}),(0,t.jsx)("div",{className:"flex items-center gap-2",children:[1,5,15,30,60].map(s=>(0,t.jsx)("button",{onClick:()=>i(s),className:`
                px-3 py-1.5 rounded-lg text-sm transition-colors
                ${e===s?"bg-violet-500/30 text-violet-300 border border-violet-500/50":"bg-white/5 text-white/50 hover:bg-white/10 border border-transparent"}
              `,children:s<60?`${s}m`:"1h"},s))})]}),(0,t.jsx)("div",{className:"space-y-2 max-h-[600px] overflow-y-auto pr-2",children:void 0===r?(0,t.jsx)("div",{className:"space-y-2",children:[void 0,void 0,void 0,void 0,void 0].map((e,s)=>(0,t.jsx)("div",{className:"h-16 rounded-xl bg-white/5 animate-pulse"},s))}):0===r.length?(0,t.jsxs)("div",{className:"text-center py-12",children:[(0,t.jsx)(x.Activity,{className:"w-12 h-12 text-white/20 mx-auto mb-4"}),(0,t.jsxs)("p",{className:"text-white/40",children:["No operations in the last ",e," minutes"]})]}):(0,t.jsx)(c.AnimatePresence,{mode:"popLayout",children:r.map(e=>(0,t.jsx)(O,{operation:e},e._id))})})]})}var _=e.i(737712),E=e.i(874221),R=e.i(982678),B=e.i(122429);let F={lynkr:{name:"Lynkr",description:"Local tunnel proxy",icon:e.i(465231).Link2,color:"emerald"},openai:{name:"OpenAI",description:"Cloud GPT models",icon:R.Cloud,color:"green"},anthropic:{name:"Anthropic",description:"Cloud Claude models",icon:E.Cpu,color:"orange"},ollama:{name:"Ollama",description:"Local LLM inference",icon:S.Zap,color:"blue"},whisper:{name:"Whisper",description:"Speech-to-text",icon:B.Mic,color:"pink"}},U={healthy:{icon:j.CheckCircle,label:"Healthy",color:"emerald"},degraded:{icon:v.AlertTriangle,label:"Degraded",color:"yellow"},unhealthy:{icon:w.XCircle,label:"Unhealthy",color:"red"},unknown:{icon:_.HelpCircle,label:"Unknown",color:"slate"}};function z({provider:e,health:s}){let i=F[e],r=U[s?.status??"unknown"],l=i.icon,o=r.icon,n={emerald:{bg:"bg-emerald-500/20",text:"text-emerald-400",border:"border-emerald-500/30",glow:"shadow-emerald-500/10"},green:{bg:"bg-green-500/20",text:"text-green-400",border:"border-green-500/30",glow:"shadow-green-500/10"},orange:{bg:"bg-orange-500/20",text:"text-orange-400",border:"border-orange-500/30",glow:"shadow-orange-500/10"},blue:{bg:"bg-blue-500/20",text:"text-blue-400",border:"border-blue-500/30",glow:"shadow-blue-500/10"},pink:{bg:"bg-pink-500/20",text:"text-pink-400",border:"border-pink-500/30",glow:"shadow-pink-500/10"},yellow:{bg:"bg-yellow-500/20",text:"text-yellow-400",border:"border-yellow-500/30",glow:"shadow-yellow-500/10"},red:{bg:"bg-red-500/20",text:"text-red-400",border:"border-red-500/30",glow:"shadow-red-500/10"},slate:{bg:"bg-slate-500/20",text:"text-slate-400",border:"border-slate-500/30",glow:"shadow-slate-500/10"}},d=n[i.color],c=n[r.color];return(0,t.jsxs)(a.motion.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:`
        relative overflow-hidden rounded-2xl border backdrop-blur-sm
        ${d.border} bg-white/5
        hover:bg-white/10 transition-colors
      `,children:[(0,t.jsx)("div",{className:`absolute top-0 left-0 right-0 h-1 ${c.bg}`}),(0,t.jsxs)("div",{className:"p-4",children:[(0,t.jsxs)("div",{className:"flex items-start justify-between mb-4",children:[(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsx)("div",{className:`p-2.5 rounded-xl ${d.bg}`,children:(0,t.jsx)(l,{className:`w-5 h-5 ${d.text}`})}),(0,t.jsxs)("div",{children:[(0,t.jsx)("h3",{className:"font-medium text-white",children:i.name}),(0,t.jsx)("p",{className:"text-xs text-white/40",children:i.description})]})]}),(0,t.jsxs)("div",{className:`flex items-center gap-1.5 px-2.5 py-1 rounded-full ${c.bg}`,children:[(0,t.jsx)(o,{className:`w-3.5 h-3.5 ${c.text}`}),(0,t.jsx)("span",{className:`text-xs font-medium ${c.text}`,children:r.label})]})]}),(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-3",children:[(0,t.jsxs)("div",{className:"bg-black/20 rounded-xl p-3",children:[(0,t.jsxs)("div",{className:"flex items-center gap-1.5 text-white/40 text-xs mb-1",children:[(0,t.jsx)(p.Clock,{className:"w-3 h-3"}),"Latency"]}),(0,t.jsx)("div",{className:"text-lg font-semibold text-white",children:s?.latencyMs?`${s.latencyMs}ms`:"-"})]}),(0,t.jsxs)("div",{className:"bg-black/20 rounded-xl p-3",children:[(0,t.jsxs)("div",{className:"flex items-center gap-1.5 text-white/40 text-xs mb-1",children:[(0,t.jsx)(x.Activity,{className:"w-3 h-3"}),"Failures"]}),(0,t.jsx)("div",{className:"text-lg font-semibold text-white",children:s?.consecutiveFailures??0})]})]}),s?.features&&(0,t.jsxs)("div",{className:"mt-3 flex flex-wrap gap-1.5",children:[s.features.memory&&(0,t.jsx)("span",{className:"text-[10px] px-2 py-0.5 rounded-full bg-violet-500/20 text-violet-300",children:"Memory"}),s.features.tools&&(0,t.jsx)("span",{className:"text-[10px] px-2 py-0.5 rounded-full bg-amber-500/20 text-amber-300",children:"Tools"}),s.features.streaming&&(0,t.jsx)("span",{className:"text-[10px] px-2 py-0.5 rounded-full bg-cyan-500/20 text-cyan-300",children:"Streaming"}),s.features.embeddings&&(0,t.jsx)("span",{className:"text-[10px] px-2 py-0.5 rounded-full bg-pink-500/20 text-pink-300",children:"Embeddings"})]}),s?.lastCheckAt&&(0,t.jsxs)("div",{className:"mt-3 text-xs text-white/30",children:["Last checked ",new Date(s.lastCheckAt).toLocaleTimeString()]})]})]})}function D(){let e=(0,n.useQuery)(d.api.observability.getProviderHealthStatus);return(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsxs)("h2",{className:"text-lg font-semibold text-white flex items-center gap-2",children:[(0,t.jsx)(x.Activity,{className:"w-5 h-5 text-emerald-400"}),"Provider Status"]}),(0,t.jsx)("div",{className:"grid grid-cols-2 lg:grid-cols-5 gap-4",children:["lynkr","openai","anthropic","ollama","whisper"].map(s=>(0,t.jsx)(z,{provider:s,health:e?.[s]},s))})]})}var I=e.i(974478),V=e.i(650425),H=e.i(453685),Z=e.i(560805),Z=Z;function q({label:e,value:s,subValue:i,icon:r,color:l,trend:o}){let n={violet:"bg-violet-500/20 text-violet-400 border-violet-500/30",emerald:"bg-emerald-500/20 text-emerald-400 border-emerald-500/30",amber:"bg-amber-500/20 text-amber-400 border-amber-500/30",red:"bg-red-500/20 text-red-400 border-red-500/30",blue:"bg-blue-500/20 text-blue-400 border-blue-500/30",pink:"bg-pink-500/20 text-pink-400 border-pink-500/30"},d=n[l].split(" ")[1];return(0,t.jsxs)(a.motion.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},className:`
        relative overflow-hidden rounded-2xl border backdrop-blur-sm p-4
        bg-white/5 border-white/10 hover:border-white/20 transition-colors
      `,children:[(0,t.jsxs)("div",{className:"flex items-start justify-between",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-xs text-white/40 mb-1",children:e}),(0,t.jsx)("p",{className:"text-2xl font-bold text-white",children:s}),i&&(0,t.jsx)("p",{className:"text-xs text-white/40 mt-1",children:i})]}),(0,t.jsx)("div",{className:`p-2.5 rounded-xl ${n[l].split(" ").slice(0,1).join(" ")}`,children:(0,t.jsx)(r,{className:`w-5 h-5 ${d}`})})]}),o&&"neutral"!==o&&(0,t.jsx)("div",{className:"absolute bottom-2 right-2",children:(0,t.jsx)(V.TrendingUp,{className:`w-4 h-4 ${"up"===o?"text-emerald-400":"text-red-400 rotate-180"}`})})]})}function Q({data:e,title:s}){let i=Object.values(e).reduce((e,t)=>e+t,0),r=Object.entries(e).sort((e,t)=>t[1]-e[1]),l={ai_provider:"bg-violet-500",memory:"bg-pink-500",tool_execution:"bg-amber-500",webhook:"bg-cyan-500",system:"bg-slate-500",lynkr:"bg-emerald-500",openai:"bg-green-500",anthropic:"bg-orange-500",ollama:"bg-blue-500"};return(0,t.jsxs)("div",{className:"bg-white/5 rounded-2xl border border-white/10 p-4",children:[(0,t.jsxs)("h3",{className:"text-sm font-medium text-white mb-4 flex items-center gap-2",children:[(0,t.jsx)(Z.default,{className:"w-4 h-4 text-white/40"}),s]}),(0,t.jsx)("div",{className:"space-y-3",children:r.map(([e,s])=>{let r=i>0?Math.round(s/i*100):0,o=l[e]??"bg-slate-500";return(0,t.jsxs)("div",{children:[(0,t.jsxs)("div",{className:"flex items-center justify-between text-xs mb-1",children:[(0,t.jsx)("span",{className:"text-white/60 capitalize",children:e.replace(/_/g," ")}),(0,t.jsxs)("span",{className:"text-white/40",children:[s," (",r,"%)"]})]}),(0,t.jsx)("div",{className:"h-1.5 bg-white/10 rounded-full overflow-hidden",children:(0,t.jsx)(a.motion.div,{initial:{width:0},animate:{width:`${r}%`},transition:{duration:.5,ease:"easeOut"},className:`h-full rounded-full ${o}`})})]},e)})})]})}function X({data:e}){let s={none:{bg:"bg-emerald-500/20",text:"text-emerald-400"},low:{bg:"bg-blue-500/20",text:"text-blue-400"},medium:{bg:"bg-yellow-500/20",text:"text-yellow-400"},high:{bg:"bg-orange-500/20",text:"text-orange-400"},critical:{bg:"bg-red-500/20",text:"text-red-400"}},i=Object.values(e).reduce((e,t)=>e+t,0);return(0,t.jsxs)("div",{className:"bg-white/5 rounded-2xl border border-white/10 p-4",children:[(0,t.jsxs)("h3",{className:"text-sm font-medium text-white mb-4 flex items-center gap-2",children:[(0,t.jsx)(I.Shield,{className:"w-4 h-4 text-white/40"}),"Threat Levels"]}),(0,t.jsx)("div",{className:"flex gap-2",children:["none","low","medium","high","critical"].map(r=>{let a=e[r]??0,l=s[r],o=i>0?Math.round(a/i*100):0;return(0,t.jsxs)("div",{className:`flex-1 rounded-xl p-3 ${l.bg} border border-white/5`,children:[(0,t.jsx)("div",{className:`text-lg font-bold ${l.text}`,children:a}),(0,t.jsx)("div",{className:"text-[10px] text-white/40 capitalize",children:r}),(0,t.jsxs)("div",{className:"text-[10px] text-white/30",children:[o,"%"]})]},r)})})]})}function J(){let e=(0,n.useQuery)(d.api.observability.getDashboardOverview,{hours:24});return e?(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsxs)("h2",{className:"text-lg font-semibold text-white flex items-center gap-2",children:[(0,t.jsx)(H.BarChart3,{className:"w-5 h-5 text-amber-400"}),"Metrics Overview (24h)"]}),(0,t.jsxs)("div",{className:"grid grid-cols-2 lg:grid-cols-4 gap-4",children:[(0,t.jsx)(q,{label:"Total Operations",value:e.totalOperations.toLocaleString(),subValue:`${e.operationsPerMinute}/min`,icon:x.Activity,color:"violet"}),(0,t.jsx)(q,{label:"Error Rate",value:`${e.errorRate}%`,subValue:`${e.totalErrors} errors`,icon:v.AlertTriangle,color:e.errorRate>5?"red":e.errorRate>1?"amber":"emerald"}),(0,t.jsx)(q,{label:"Avg Latency",value:`${e.avgLatencyMs}ms`,subValue:`P99: ${e.p99LatencyMs}ms`,icon:p.Clock,color:"blue"}),(0,t.jsx)(q,{label:"Token Usage",value:e.totalTokens.toLocaleString(),subValue:`$${e.estimatedCostUsd.toFixed(4)} est`,icon:S.Zap,color:"pink"})]}),(0,t.jsxs)("div",{className:"grid grid-cols-2 lg:grid-cols-4 gap-4",children:[(0,t.jsx)(q,{label:"Last Hour",value:e.operationsLastHour.toLocaleString(),icon:V.TrendingUp,color:"emerald"}),(0,t.jsx)(q,{label:"High Threats",value:e.highThreatEvents,subValue:`${e.threatEvents} total`,icon:I.Shield,color:e.highThreatEvents>0?"red":"emerald"}),(0,t.jsx)(q,{label:"Input Tokens",value:e.totalInputTokens.toLocaleString(),icon:S.Zap,color:"violet"}),(0,t.jsx)(q,{label:"Output Tokens",value:e.totalOutputTokens.toLocaleString(),icon:S.Zap,color:"amber"})]}),(0,t.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-4",children:[(0,t.jsx)(Q,{data:e.byCategory,title:"By Category"}),(0,t.jsx)(Q,{data:e.byProvider,title:"By Provider"}),(0,t.jsx)(X,{data:e.byThreatLevel})]})]}):(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsxs)("h2",{className:"text-lg font-semibold text-white flex items-center gap-2",children:[(0,t.jsx)(H.BarChart3,{className:"w-5 h-5 text-amber-400"}),"Metrics Overview"]}),(0,t.jsx)("div",{className:"grid grid-cols-2 lg:grid-cols-4 gap-4",children:[...Array(8)].map((e,s)=>(0,t.jsx)("div",{className:"h-28 bg-white/5 rounded-2xl animate-pulse"},s))})]})}var K=e.i(86066),W=e.i(746115),G=e.i(954621),Y=e.i(715875),ee=e.i(129828),et=e.i(117343),es=e.i(34345),ei=e.i(66202),ei=ei,er=e.i(491260);let ea=[{id:"direct",name:"Direct Extraction",icon:G.Target},{id:"encoded",name:"Encoding Bypass",icon:ee.Lock},{id:"persona",name:"Persona Jailbreak",icon:es.Eye},{id:"social",name:"Social Engineering",icon:er.Bug},{id:"format",name:"Format Injection",icon:ei.default},{id:"crescendo",name:"Crescendo Attack",icon:S.Zap}],el=[{id:"prompt_injection",name:"Prompt Injection",description:"Test for prompt injection vulnerabilities",icon:er.Bug},{id:"jailbreak_attempt",name:"Jailbreak Detection",description:"Test jailbreak resistance",icon:et.Unlock},{id:"data_extraction",name:"Data Extraction",description:"Test for sensitive data leakage",icon:es.Eye},{id:"system_prompt_leak",name:"System Prompt Leak",description:"Test system prompt protection",icon:ee.Lock},{id:"comprehensive",name:"Comprehensive Scan",description:"Full security assessment",icon:I.Shield}],eo={secure:{color:"emerald",icon:j.CheckCircle,label:"Secure"},low:{color:"blue",icon:v.AlertTriangle,label:"Low Risk"},medium:{color:"yellow",icon:v.AlertTriangle,label:"Medium Risk"},high:{color:"orange",icon:v.AlertTriangle,label:"High Risk"},critical:{color:"red",icon:w.XCircle,label:"Critical"}};function en({scan:e}){let s=eo[e.severity??"secure"],i=s.icon,r={emerald:"bg-emerald-500/20 text-emerald-400 border-emerald-500/30",blue:"bg-blue-500/20 text-blue-400 border-blue-500/30",yellow:"bg-yellow-500/20 text-yellow-400 border-yellow-500/30",orange:"bg-orange-500/20 text-orange-400 border-orange-500/30",red:"bg-red-500/20 text-red-400 border-red-500/30"}[s.color];return(0,t.jsxs)(a.motion.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},className:`rounded-xl border p-4 ${r}`,children:[(0,t.jsxs)("div",{className:"flex items-start justify-between mb-3",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h4",{className:"font-medium text-white capitalize",children:e.scanType.replace(/_/g," ")}),(0,t.jsx)("p",{className:"text-xs text-white/40",children:new Date(e.startedAt).toLocaleString()})]}),(0,t.jsx)("div",{className:"flex items-center gap-2",children:"running"===e.status?(0,t.jsx)(W.Loader2,{className:"w-5 h-5 text-white/60 animate-spin"}):(0,t.jsx)(i,{className:"w-5 h-5"})})]}),"completed"===e.status&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)("div",{className:"mb-3",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between text-xs mb-1",children:[(0,t.jsx)("span",{className:"text-white/40",children:"Vulnerability Score"}),(0,t.jsxs)("span",{className:"font-medium text-white",children:[e.vulnerabilityScore??0,"/100"]})]}),(0,t.jsx)("div",{className:"h-2 bg-black/30 rounded-full overflow-hidden",children:(0,t.jsx)(a.motion.div,{initial:{width:0},animate:{width:`${e.vulnerabilityScore??0}%`},transition:{duration:.5},className:`h-full rounded-full ${(e.vulnerabilityScore??0)>70?"bg-red-500":(e.vulnerabilityScore??0)>40?"bg-yellow-500":"bg-emerald-500"}`})})]}),(0,t.jsxs)("div",{className:"flex items-center gap-2 mb-3",children:[(0,t.jsx)("span",{className:`px-2 py-0.5 rounded-full text-xs font-medium ${r}`,children:s.label}),e.leakStatus&&(0,t.jsxs)("span",{className:"px-2 py-0.5 rounded-full text-xs bg-white/10 text-white/60",children:["Leak: ",e.leakStatus]})]}),e.durationMs&&(0,t.jsxs)("p",{className:"text-xs text-white/30",children:["Completed in ",(e.durationMs/1e3).toFixed(2),"s"]})]}),"failed"===e.status&&(0,t.jsx)("p",{className:"text-xs text-red-400",children:"Scan failed"})]})}function ed(){let[e,i]=(0,s.useState)("comprehensive"),[r,a]=(0,s.useState)(["direct","encoded","persona"]),[l,o]=(0,s.useState)(!1),x=(0,n.useQuery)(d.api.observability.getSecurityScans,{limit:10}),m=(0,n.useMutation)(d.api.observability.createSecurityScan),h=async()=>{o(!0);try{await m({scanType:e,attackVectors:r,triggeredBy:"manual"})}catch(e){console.error("Failed to start scan:",e)}finally{o(!1)}};return(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("h2",{className:"text-lg font-semibold text-white flex items-center gap-2",children:[(0,t.jsx)(Y.Scan,{className:"w-5 h-5 text-red-400"}),"Security Scanner"]}),(0,t.jsx)("span",{className:"text-xs text-white/40",children:"ZeroLeaks-inspired"})]}),(0,t.jsxs)("div",{className:"bg-white/5 rounded-2xl border border-white/10 p-6 space-y-6",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h3",{className:"text-sm font-medium text-white mb-3",children:"Scan Type"}),(0,t.jsx)("div",{className:"grid grid-cols-2 lg:grid-cols-5 gap-2",children:el.map(s=>{let r=s.icon,a=e===s.id;return(0,t.jsxs)("button",{onClick:()=>i(s.id),className:`
                    p-3 rounded-xl border transition-all text-left
                    ${a?"bg-violet-500/20 border-violet-500/50 text-violet-300":"bg-white/5 border-white/10 text-white/60 hover:bg-white/10"}
                  `,children:[(0,t.jsx)(r,{className:"w-4 h-4 mb-2"}),(0,t.jsx)("div",{className:"text-xs font-medium",children:s.name})]},s.id)})})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("h3",{className:"text-sm font-medium text-white mb-3",children:"Attack Vectors"}),(0,t.jsx)("div",{className:"flex flex-wrap gap-2",children:ea.map(e=>{let s=e.icon,i=r.includes(e.id);return(0,t.jsxs)("button",{onClick:()=>{var t;return t=e.id,void a(e=>e.includes(t)?e.filter(e=>e!==t):[...e,t])},className:`
                    flex items-center gap-2 px-3 py-2 rounded-lg border transition-all
                    ${i?"bg-amber-500/20 border-amber-500/50 text-amber-300":"bg-white/5 border-white/10 text-white/50 hover:bg-white/10"}
                  `,children:[(0,t.jsx)(s,{className:"w-3.5 h-3.5"}),(0,t.jsx)("span",{className:"text-xs",children:e.name})]},e.id)})})]}),(0,t.jsx)("button",{onClick:h,disabled:l||0===r.length,className:`
            w-full flex items-center justify-center gap-2 px-4 py-3 rounded-xl
            font-medium transition-all
            ${l||0===r.length?"bg-white/10 text-white/40 cursor-not-allowed":"bg-red-500/20 text-red-300 border border-red-500/50 hover:bg-red-500/30"}
          `,children:l?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(W.Loader2,{className:"w-4 h-4 animate-spin"}),"Starting Scan..."]}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(K.Play,{className:"w-4 h-4"}),"Start Security Scan"]})})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("h3",{className:"text-sm font-medium text-white mb-3",children:"Recent Scans"}),void 0===x?(0,t.jsx)("div",{className:"space-y-3",children:[void 0,void 0,void 0].map((e,s)=>(0,t.jsx)("div",{className:"h-24 bg-white/5 rounded-xl animate-pulse"},s))}):0===x.length?(0,t.jsxs)("div",{className:"text-center py-8 text-white/40",children:[(0,t.jsx)(I.Shield,{className:"w-12 h-12 mx-auto mb-3 opacity-50"}),(0,t.jsx)("p",{children:"No security scans yet"}),(0,t.jsx)("p",{className:"text-xs mt-1",children:"Start a scan to test your AI's defenses"})]}):(0,t.jsx)("div",{className:"grid gap-3",children:(0,t.jsx)(c.AnimatePresence,{children:x.map(e=>(0,t.jsx)(en,{scan:e},e._id))})})]})]})}var ec=e.i(271119),ex=e.i(573138),em=e.i(961226);let eh=[{id:"activity",label:"Activity",icon:x.Activity},{id:"metrics",label:"Metrics",icon:H.BarChart3},{id:"providers",label:"Providers",icon:S.Zap},{id:"security",label:"Security",icon:Y.Scan}];function eb(){let e=(0,i.useRouter)(),{isAuthenticated:n,isLoading:d,username:c}=(0,o.useAdminSession)(),[x,m]=(0,s.useState)("activity"),[h,b]=(0,s.useState)(!1);return((0,s.useEffect)(()=>{d||n||e.push("/settings")},[n,d,e]),d)?(0,t.jsx)("div",{className:"min-h-screen bg-zinc-950 flex items-center justify-center",children:(0,t.jsx)(W.Loader2,{className:"w-8 h-8 animate-spin text-white/50"})}):n?(0,t.jsx)(l.PageTransition,{children:(0,t.jsxs)("div",{className:"min-h-screen bg-zinc-950",children:[(0,t.jsxs)("div",{className:"fixed inset-0 overflow-hidden pointer-events-none",children:[(0,t.jsx)("div",{className:"absolute -top-1/2 -left-1/2 w-full h-full bg-gradient-radial from-violet-500/10 to-transparent animate-pulse"}),(0,t.jsx)("div",{className:"absolute -bottom-1/2 -right-1/2 w-full h-full bg-gradient-radial from-emerald-500/10 to-transparent animate-pulse delay-1000"})]}),(0,t.jsx)("header",{className:"sticky top-0 z-40 bg-zinc-950/80 backdrop-blur-xl border-b border-white/10",children:(0,t.jsxs)("div",{className:"max-w-7xl mx-auto px-4 py-4",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{className:"flex items-center gap-4",children:[(0,t.jsx)(r.default,{href:"/settings",className:"p-2 -ml-2 rounded-lg hover:bg-white/10 transition-colors",children:(0,t.jsx)(ec.ChevronLeft,{className:"w-5 h-5 text-white"})}),(0,t.jsxs)("div",{children:[(0,t.jsxs)("h1",{className:"text-xl font-semibold text-white flex items-center gap-2",children:[(0,t.jsx)(em.Terminal,{className:"w-6 h-6 text-violet-400"}),"Operations Center"]}),(0,t.jsxs)("p",{className:"text-xs text-white/50",children:["Logged in as ",c]})]})]}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)("button",{onClick:()=>{b(!0),m("metrics"),setTimeout(()=>{m(x),b(!1)},100)},disabled:h,className:"p-2 rounded-lg hover:bg-white/10 transition-colors disabled:opacity-50",children:(0,t.jsx)(ex.RefreshCw,{className:`w-5 h-5 text-white/60 ${h?"animate-spin":""}`})}),(0,t.jsx)(r.default,{href:"/security",className:"p-2 rounded-lg hover:bg-white/10 transition-colors",children:(0,t.jsx)(I.Shield,{className:"w-5 h-5 text-white/60"})}),(0,t.jsx)(r.default,{href:"/settings",className:"p-2 rounded-lg hover:bg-white/10 transition-colors",children:(0,t.jsx)(u.Settings,{className:"w-5 h-5 text-white/60"})})]})]}),(0,t.jsx)("div",{className:"flex gap-2 mt-4",children:eh.map(e=>{let s=e.icon,i=x===e.id;return(0,t.jsxs)("button",{onClick:()=>m(e.id),className:`
                      relative flex items-center gap-2 px-4 py-2 rounded-xl
                      text-sm font-medium transition-all
                      ${i?"text-white":"text-white/50 hover:text-white/70 hover:bg-white/5"}
                    `,children:[i&&(0,t.jsx)(a.motion.div,{layoutId:"activeTab",className:"absolute inset-0 bg-white/10 rounded-xl border border-white/20",transition:{type:"spring",bounce:.2,duration:.4}}),(0,t.jsxs)("span",{className:"relative z-10 flex items-center gap-2",children:[(0,t.jsx)(s,{className:"w-4 h-4"}),e.label]})]},e.id)})})]})}),(0,t.jsx)("main",{className:"max-w-7xl mx-auto px-4 py-8 relative z-10",children:(0,t.jsxs)(a.motion.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{duration:.2},children:["activity"===x&&(0,t.jsxs)("div",{className:"space-y-8",children:[(0,t.jsxs)("div",{className:"grid grid-cols-4 gap-4",children:[(0,t.jsx)(eg,{label:"Active",value:"Live",color:"emerald",pulse:!0}),(0,t.jsx)(eg,{label:"Providers",value:"5",color:"violet"}),(0,t.jsx)(eg,{label:"Last 5m",value:"--",color:"amber"}),(0,t.jsx)(eg,{label:"Threats",value:"0",color:"red"})]}),(0,t.jsx)(P,{})]}),"metrics"===x&&(0,t.jsx)(J,{}),"providers"===x&&(0,t.jsxs)("div",{className:"space-y-8",children:[(0,t.jsx)(D,{}),(0,t.jsxs)("div",{className:"bg-white/5 rounded-2xl border border-white/10 p-6",children:[(0,t.jsx)("h3",{className:"text-lg font-medium text-white mb-4",children:"Provider Actions"}),(0,t.jsxs)("div",{className:"flex flex-wrap gap-3",children:[(0,t.jsx)("button",{className:"px-4 py-2 rounded-xl bg-emerald-500/20 text-emerald-300 border border-emerald-500/30 hover:bg-emerald-500/30 transition-colors",children:"Check All Health"}),(0,t.jsx)("button",{className:"px-4 py-2 rounded-xl bg-violet-500/20 text-violet-300 border border-violet-500/30 hover:bg-violet-500/30 transition-colors",children:"View Lynkr Logs"}),(0,t.jsx)("button",{className:"px-4 py-2 rounded-xl bg-amber-500/20 text-amber-300 border border-amber-500/30 hover:bg-amber-500/30 transition-colors",children:"Test Connection"}),(0,t.jsx)("button",{onClick:()=>m("security"),className:"px-4 py-2 rounded-xl bg-red-500/20 text-red-300 border border-red-500/30 hover:bg-red-500/30 transition-colors",children:"Run Security Scan"})]})]})]}),"security"===x&&(0,t.jsx)(ed,{})]},x)}),(0,t.jsx)("footer",{className:"border-t border-white/10 py-4 mt-12",children:(0,t.jsx)("div",{className:"max-w-7xl mx-auto px-4 text-center text-xs text-white/30",children:"Operations Center v1.0 | OpenClaw-OS Observability System"})})]})}):null}function eg({label:e,value:s,color:i,pulse:r}){return(0,t.jsxs)("div",{className:`
        relative rounded-xl border p-3 backdrop-blur-sm
        ${{emerald:"text-emerald-400 bg-emerald-500/20 border-emerald-500/30",violet:"text-violet-400 bg-violet-500/20 border-violet-500/30",amber:"text-amber-400 bg-amber-500/20 border-amber-500/30",red:"text-red-400 bg-red-500/20 border-red-500/30"}[i]}
      `,children:[r&&(0,t.jsxs)("span",{className:"absolute top-2 right-2 flex h-2 w-2",children:[(0,t.jsx)("span",{className:"animate-ping absolute inline-flex h-full w-full rounded-full bg-emerald-400 opacity-75"}),(0,t.jsx)("span",{className:"relative inline-flex rounded-full h-2 w-2 bg-emerald-500"})]}),(0,t.jsx)("div",{className:"text-xs text-white/40",children:e}),(0,t.jsx)("div",{className:"text-lg font-semibold",children:s})]})}e.s(["default",()=>eb],841637)}]);