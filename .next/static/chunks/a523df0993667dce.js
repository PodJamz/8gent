(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,974478,294419,e=>{"use strict";let t=(0,e.i(699528).default)("Shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]]);e.s(["default",()=>t],294419),e.s(["Shield",()=>t],974478)},965238,e=>{"use strict";let t=(0,e.i(699528).default)("UserPlus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]]);e.s(["default",()=>t])},835185,e=>{"use strict";var t=e.i(965238);e.s(["UserPlus",()=>t.default])},239671,e=>{"use strict";let t=(0,e.i(699528).default)("LogIn",[["path",{d:"M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4",key:"u53s6r"}],["polyline",{points:"10 17 15 12 10 7",key:"1ail0h"}],["line",{x1:"15",x2:"3",y1:"12",y2:"12",key:"v6grx8"}]]);e.s(["default",()=>t])},847562,e=>{"use strict";var t=e.i(239671);e.s(["LogIn",()=>t.default])},373144,e=>{"use strict";let t=(0,e.i(699528).default)("Music2",[["circle",{cx:"8",cy:"18",r:"4",key:"1fc0mg"}],["path",{d:"M12 18V2l7 4",key:"g04rme"}]]);e.s(["default",()=>t])},557265,e=>{"use strict";var t=e.i(373144);e.s(["Music2",()=>t.default])},187845,e=>{"use strict";var t=e.i(726151),s=e.i(923041),i=e.i(569206),a=e.i(662582),n=e.i(278124),l=e.i(850402),c=e.i(334905),r=e.i(895579),o=e.i(946200),m=e.i(570431),d=e.i(746115),x=e.i(801365),u=e.i(432827),h=e.i(51278),p=e.i(364050),f=e.i(974478),j=e.i(305583),y=e.i(557265),b=e.i(976974),g=e.i(610724),N=e.i(835185),v=e.i(847562);function w(){var e;let w,z,k=(0,i.useParams)(),A=(0,i.useRouter)(),C=k.token,{user:S,isLoaded:M,isSignedIn:P}=(0,o.useUser)(),{isLoaded:I}=(0,m.useAuth)(),[L,U]=(0,s.useState)("loading"),[E,T]=(0,s.useState)(null),[R,B]=(0,s.useState)(!1),[G,H]=(0,s.useState)(null),$=(0,l.useQuery)(c.api.collaborators.getInviteByToken,{token:C}),D=(0,l.useMutation)(c.api.collaborators.acceptInvite);(0,s.useEffect)(()=>{if(void 0===$)return void U("loading");if(null===$)return void U("error");switch(T($),$.status){case"pending":U("pending");break;case"accepted":U("accepted");break;case"expired":U("expired");break;case"revoked":U("revoked");break;default:U("error")}},[$]),(0,s.useEffect)(()=>{async function e(){"pending"===L&&P&&S?.primaryEmailAddress?.emailAddress&&E?.email&&!R&&(S.primaryEmailAddress.emailAddress.toLowerCase()===E.email.toLowerCase()?await O():U("email_mismatch"))}M&&I&&e()},[L,P,S,E,M,I]);let O=async()=>{if(!R){B(!0),H(null);try{let e=await D({token:C});e.success?(U("accepted"),setTimeout(()=>{A.push("/")},2e3)):H(e.error||"Failed to accept invite")}catch(e){H("An error occurred. Please try again.")}finally{B(!1)}}};return(0,t.jsxs)("div",{className:"min-h-screen bg-zinc-950 flex items-center justify-center p-6",children:[(0,t.jsx)("div",{className:"absolute inset-0 bg-gradient-to-br from-amber-900/20 via-zinc-950 to-zinc-950"}),(0,t.jsxs)(a.motion.div,{className:"relative z-10 max-w-md w-full",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.3},children:[(0,t.jsx)("div",{className:"bg-zinc-900/80 backdrop-blur-xl rounded-3xl border border-zinc-800 p-8",children:(0,t.jsxs)(n.AnimatePresence,{mode:"wait",children:["loading"===L&&(0,t.jsxs)(a.motion.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"text-center py-8",children:[(0,t.jsx)(d.Loader2,{className:"w-12 h-12 text-amber-400 animate-spin mx-auto mb-4"}),(0,t.jsx)("h1",{className:"text-white text-xl font-semibold mb-2",children:"Loading invite..."}),(0,t.jsx)("p",{className:"text-zinc-500 text-sm",children:"Please wait"})]},"loading"),"pending"===L&&E&&!P&&(0,t.jsxs)(a.motion.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},children:[(0,t.jsxs)("div",{className:"text-center mb-6",children:[(0,t.jsx)("div",{className:"w-16 h-16 bg-amber-500/20 rounded-full flex items-center justify-center mx-auto mb-4",children:(0,t.jsx)(p.Mail,{className:"w-8 h-8 text-amber-400"})}),(0,t.jsx)("h1",{className:"text-white text-xl font-semibold mb-2",children:"You're Invited!"}),(0,t.jsxs)("p",{className:"text-zinc-400 text-sm",children:[E.createdByName," has invited you to join 8gent"]})]}),(0,t.jsxs)("div",{className:"bg-zinc-800/50 rounded-xl p-4 mb-6 space-y-3",children:[(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsx)(p.Mail,{className:"w-4 h-4 text-zinc-500"}),(0,t.jsx)("span",{className:"text-zinc-300 text-sm",children:E.email})]}),(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsx)("span",{className:(e=>{switch(e){case"admin":return"text-amber-400";case"collaborator":return"text-blue-400";default:return"text-zinc-400"}})(E.role||"viewer"),children:"admin"===(E.role||"viewer")?(0,t.jsx)(f.Shield,{className:"w-5 h-5"}):(0,t.jsx)(j.User,{className:"w-5 h-5"})}),(0,t.jsxs)("span",{className:"text-zinc-300 text-sm capitalize",children:[E.role||"Viewer"," access"]})]}),E.expiresAt&&(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsx)(g.Clock,{className:"w-4 h-4 text-zinc-500"}),(0,t.jsx)("span",{className:"text-zinc-400 text-sm",children:(w=new Date(e=E.expiresAt),(z=Math.ceil((e-new Date().getTime())/864e5))<=0?"Expired":1===z?"Expires tomorrow":z<=7?`Expires in ${z} days`:`Expires ${w.toLocaleDateString()}`)})]})]}),E.permissions&&(0,t.jsxs)("div",{className:"mb-6",children:[(0,t.jsx)("h3",{className:"text-zinc-400 text-xs uppercase tracking-wider mb-3",children:"Access Granted"}),(0,t.jsxs)("div",{className:"flex flex-wrap gap-2",children:[E.permissions.privateMusic&&(0,t.jsxs)("span",{className:"inline-flex items-center gap-1.5 px-2.5 py-1 bg-zinc-800 rounded-full text-xs text-zinc-300",children:[(0,t.jsx)(y.Music2,{className:"w-3 h-3"})," Private Music"]}),E.permissions.designCanvas&&(0,t.jsxs)("span",{className:"inline-flex items-center gap-1.5 px-2.5 py-1 bg-zinc-800 rounded-full text-xs text-zinc-300",children:[(0,t.jsx)(b.Palette,{className:"w-3 h-3"})," Design Canvas"]}),E.permissions.areas.length>0&&(0,t.jsxs)("span",{className:"inline-flex items-center gap-1.5 px-2.5 py-1 bg-zinc-800 rounded-full text-xs text-zinc-300",children:["+",E.permissions.areas.length," protected areas"]})]})]}),(0,t.jsxs)("div",{className:"space-y-3",children:[(0,t.jsx)(r.SignUpButton,{mode:"modal",forceRedirectUrl:`/invite/${C}`,children:(0,t.jsxs)("button",{className:"w-full flex items-center justify-center gap-2 bg-amber-500 hover:bg-amber-600 text-black font-medium py-3 px-6 rounded-full transition-colors",children:[(0,t.jsx)(N.UserPlus,{className:"w-4 h-4"}),"Sign Up to Accept"]})}),(0,t.jsx)(r.SignInButton,{mode:"modal",forceRedirectUrl:`/invite/${C}`,children:(0,t.jsxs)("button",{className:"w-full flex items-center justify-center gap-2 bg-zinc-800 hover:bg-zinc-700 text-white font-medium py-3 px-6 rounded-full transition-colors",children:[(0,t.jsx)(v.LogIn,{className:"w-4 h-4"}),"Already have an account? Sign In"]})})]})]},"pending"),"pending"===L&&P&&(0,t.jsxs)(a.motion.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"text-center py-8",children:[(0,t.jsx)(d.Loader2,{className:"w-12 h-12 text-amber-400 animate-spin mx-auto mb-4"}),(0,t.jsx)("h1",{className:"text-white text-xl font-semibold mb-2",children:"Accepting invite..."}),(0,t.jsx)("p",{className:"text-zinc-500 text-sm",children:"Setting up your access"})]},"processing"),"email_mismatch"===L&&E&&(0,t.jsxs)(a.motion.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},children:[(0,t.jsxs)("div",{className:"text-center mb-6",children:[(0,t.jsx)("div",{className:"w-16 h-16 bg-yellow-500/20 rounded-full flex items-center justify-center mx-auto mb-4",children:(0,t.jsx)(x.AlertCircle,{className:"w-8 h-8 text-yellow-400"})}),(0,t.jsx)("h1",{className:"text-white text-xl font-semibold mb-2",children:"Email Mismatch"}),(0,t.jsxs)("p",{className:"text-zinc-400 text-sm",children:["This invite is for ",(0,t.jsx)("span",{className:"text-white font-medium",children:E.email})]}),(0,t.jsxs)("p",{className:"text-zinc-500 text-sm mt-1",children:["You're signed in as"," ",(0,t.jsx)("span",{className:"text-white",children:S?.primaryEmailAddress?.emailAddress})]})]}),(0,t.jsxs)("div",{className:"space-y-3",children:[(0,t.jsx)(r.SignInButton,{mode:"modal",forceRedirectUrl:`/invite/${C}`,children:(0,t.jsxs)("button",{className:"w-full flex items-center justify-center gap-2 bg-amber-500 hover:bg-amber-600 text-black font-medium py-3 px-6 rounded-full transition-colors",children:[(0,t.jsx)(v.LogIn,{className:"w-4 h-4"}),"Sign in with ",E.email]})}),(0,t.jsxs)("button",{onClick:()=>A.push("/"),className:"w-full flex items-center justify-center gap-2 bg-zinc-800 hover:bg-zinc-700 text-white font-medium py-3 px-6 rounded-full transition-colors",children:[(0,t.jsx)(h.Home,{className:"w-4 h-4"}),"Go to 8gent"]})]})]},"mismatch"),"accepted"===L&&(0,t.jsxs)(a.motion.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"text-center",children:[(0,t.jsx)("div",{className:"w-16 h-16 bg-green-500/20 rounded-full flex items-center justify-center mx-auto mb-4",children:(0,t.jsx)(u.CheckCircle,{className:"w-8 h-8 text-green-400"})}),(0,t.jsx)("h1",{className:"text-white text-xl font-semibold mb-2",children:"Welcome to 8gent!"}),(0,t.jsx)("p",{className:"text-zinc-400 text-sm mb-6",children:"Your access has been set up. Redirecting you now..."}),(0,t.jsxs)("button",{onClick:()=>A.push("/"),className:"w-full flex items-center justify-center gap-2 bg-amber-500 hover:bg-amber-600 text-black font-medium py-3 px-6 rounded-full transition-colors",children:[(0,t.jsx)(h.Home,{className:"w-4 h-4"}),"Go to 8gent"]})]},"accepted"),"expired"===L&&(0,t.jsxs)(a.motion.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"text-center",children:[(0,t.jsx)("div",{className:"w-16 h-16 bg-yellow-500/20 rounded-full flex items-center justify-center mx-auto mb-4",children:(0,t.jsx)(g.Clock,{className:"w-8 h-8 text-yellow-400"})}),(0,t.jsx)("h1",{className:"text-white text-xl font-semibold mb-2",children:"Invite Expired"}),(0,t.jsx)("p",{className:"text-zinc-400 text-sm mb-6",children:"This invite link has expired. Please contact the person who invited you to request a new one."}),(0,t.jsxs)("button",{onClick:()=>A.push("/"),className:"w-full flex items-center justify-center gap-2 bg-zinc-800 hover:bg-zinc-700 text-white font-medium py-3 px-6 rounded-full transition-colors",children:[(0,t.jsx)(h.Home,{className:"w-4 h-4"}),"Go to 8gent"]})]},"expired"),"revoked"===L&&(0,t.jsxs)(a.motion.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"text-center",children:[(0,t.jsx)("div",{className:"w-16 h-16 bg-red-500/20 rounded-full flex items-center justify-center mx-auto mb-4",children:(0,t.jsx)(x.AlertCircle,{className:"w-8 h-8 text-red-400"})}),(0,t.jsx)("h1",{className:"text-white text-xl font-semibold mb-2",children:"Invite Revoked"}),(0,t.jsx)("p",{className:"text-zinc-400 text-sm mb-6",children:"This invite has been revoked. Please contact the person who invited you for assistance."}),(0,t.jsxs)("button",{onClick:()=>A.push("/"),className:"w-full flex items-center justify-center gap-2 bg-zinc-800 hover:bg-zinc-700 text-white font-medium py-3 px-6 rounded-full transition-colors",children:[(0,t.jsx)(h.Home,{className:"w-4 h-4"}),"Go to 8gent"]})]},"revoked"),"error"===L&&(0,t.jsxs)(a.motion.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"text-center",children:[(0,t.jsx)("div",{className:"w-16 h-16 bg-red-500/20 rounded-full flex items-center justify-center mx-auto mb-4",children:(0,t.jsx)(x.AlertCircle,{className:"w-8 h-8 text-red-400"})}),(0,t.jsx)("h1",{className:"text-white text-xl font-semibold mb-2",children:"Invite Not Found"}),(0,t.jsx)("p",{className:"text-zinc-400 text-sm mb-6",children:G||"This invite link doesn't exist or is invalid."}),(0,t.jsxs)("button",{onClick:()=>A.push("/"),className:"w-full flex items-center justify-center gap-2 bg-zinc-800 hover:bg-zinc-700 text-white font-medium py-3 px-6 rounded-full transition-colors",children:[(0,t.jsx)(h.Home,{className:"w-4 h-4"}),"Go to 8gent"]})]},"error")]})}),(0,t.jsx)("p",{className:"text-center text-zinc-600 text-xs mt-4",children:"8gent - Personal Operating System"})]})]})}e.s(["default",()=>w])}]);