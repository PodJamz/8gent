(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,58977,e=>{"use strict";let s=(0,e.i(699528).default)("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);e.s(["default",()=>s])},271119,e=>{"use strict";var s=e.i(58977);e.s(["ChevronLeft",()=>s.default])},782575,e=>{"use strict";let s=(0,e.i(699528).default)("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);e.s(["default",()=>s])},541956,e=>{"use strict";var s=e.i(782575);e.s(["Upload",()=>s.default])},34345,930344,e=>{"use strict";let s=(0,e.i(699528).default)("Eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);e.s(["default",()=>s],930344),e.s(["Eye",()=>s],34345)},806420,e=>{"use strict";let s=(0,e.i(699528).default)("CircleX",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);e.s(["default",()=>s])},85444,e=>{"use strict";var s=e.i(806420);e.s(["XCircle",()=>s.default])},786949,e=>{"use strict";let s=(0,e.i(699528).default)("Database",[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]]);e.s(["default",()=>s])},950717,e=>{"use strict";var s=e.i(786949);e.s(["Database",()=>s.default])},183014,e=>{"use strict";let s=(0,e.i(699528).default)("ListTodo",[["rect",{x:"3",y:"5",width:"6",height:"6",rx:"1",key:"1defrl"}],["path",{d:"m3 17 2 2 4-4",key:"1jhpwq"}],["path",{d:"M13 6h8",key:"15sg57"}],["path",{d:"M13 12h8",key:"h98zly"}],["path",{d:"M13 18h8",key:"oe0vm4"}]]);e.s(["default",()=>s])},151383,e=>{"use strict";var s=e.i(183014);e.s(["ListTodo",()=>s.default])},162591,e=>{"use strict";let s=(0,e.i(699528).default)("FilePen",[["path",{d:"M12.5 22H18a2 2 0 0 0 2-2V7l-5-5H6a2 2 0 0 0-2 2v9.5",key:"1couwa"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M13.378 15.626a1 1 0 1 0-3.004-3.004l-5.01 5.012a2 2 0 0 0-.506.854l-.837 2.87a.5.5 0 0 0 .62.62l2.87-.837a2 2 0 0 0 .854-.506z",key:"1y4qbx"}]]);e.s(["default",()=>s])},455672,e=>{"use strict";var s=e.i(162591);e.s(["FileEdit",()=>s.default])},699884,e=>{"use strict";var s=e.i(726151),t=e.i(923041),r=e.i(662582),a=e.i(278124),l=e.i(140113),i=e.i(946200);e.i(621586);var n=e.i(910158),c=e.i(902146),o=e.i(158095),d=e.i(271119),m=e.i(541956),h=e.i(801365),x=e.i(746115),u=e.i(432827),p=e.i(85444),y=e.i(950717),v=e.i(183904),f=e.i(150496),j=e.i(555603),b=e.i(692028),g=e.i(678295),N=e.i(151383),k=e.i(455672),w=e.i(843762),C=e.i(34345);let T={Person:v.Users,Project:f.Briefcase,Track:j.Music,Event:b.Calendar,Memory:g.Brain,Ticket:N.ListTodo,Draft:k.FileEdit,Skill:w.Sparkles},D={Person:"#3b82f6",Project:"#8b5cf6",Track:"#ec4899",Event:"#f59e0b",Memory:"#10b981",Ticket:"#6366f1",Draft:"#64748b",Skill:"#06b6d4"};function P(){let{isSignedIn:e,isLoaded:v}=(0,i.useUser)(),{theme:f}=(0,c.useDesignTheme)(),[j,b]=(0,t.useState)(!1),[g,N]=(0,t.useState)(!1),[k,w]=(0,t.useState)(""),[P,E]=(0,t.useState)(""),[M,S]=(0,t.useState)(null),[I,L]=(0,t.useState)(null),R=(0,t.useRef)(null),q=async(e,s)=>{N(!0),L(null),S(null);try{let t=new FormData;t.append("file",e),k&&t.append("defaultType",k),P&&t.append("commonTags",P),s&&t.append("dryRun","true");let r=await fetch("/api/erv/import",{method:"POST",body:t}),a=await r.json();r.ok?S(a):L(a.error||"Import failed")}catch(e){L(e instanceof Error?e.message:"Import failed")}finally{N(!1)}};return v&&!e?(0,s.jsx)(n.PageTransition,{children:(0,s.jsx)("div",{className:"min-h-screen flex items-center justify-center p-8",children:(0,s.jsxs)(o.LiquidGlass,{variant:"panel",className:"max-w-md p-8 text-center",children:[(0,s.jsx)(y.Database,{className:"w-12 h-12 mx-auto mb-4",style:{color:"hsl(var(--theme-primary))"}}),(0,s.jsx)("h2",{className:"text-xl font-semibold mb-2",children:"Sign In Required"}),(0,s.jsx)("p",{className:"text-sm mb-4",style:{color:"hsl(var(--theme-muted-foreground))"},children:"ERV entity import is available to authenticated users only."})]})})}):(0,s.jsx)(n.PageTransition,{children:(0,s.jsxs)("div",{className:"min-h-screen",style:{backgroundColor:"hsl(var(--theme-background))"},children:[(0,s.jsx)("header",{className:"sticky top-0 z-40 backdrop-blur-xl border-b",style:{backgroundColor:"hsl(var(--theme-background) / 0.8)",borderColor:"hsl(var(--theme-border))"},children:(0,s.jsx)("div",{className:"max-w-4xl mx-auto px-6 py-4",children:(0,s.jsxs)("div",{className:"flex items-center gap-4",children:[(0,s.jsx)(l.default,{href:"/",className:"p-2 rounded-xl transition-colors hover:bg-white/10",children:(0,s.jsx)(d.ChevronLeft,{className:"w-5 h-5"})}),(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[(0,s.jsx)(y.Database,{className:"w-6 h-6",style:{color:"hsl(var(--theme-primary))"}}),(0,s.jsxs)("div",{children:[(0,s.jsx)("h1",{className:"text-lg font-semibold",children:"ERV Import"}),(0,s.jsx)("p",{className:"text-xs",style:{color:"hsl(var(--theme-muted-foreground))"},children:"Import data into entities"})]})]})]})})}),(0,s.jsxs)("main",{className:"max-w-4xl mx-auto px-6 py-8 space-y-8",children:[(0,s.jsxs)(o.LiquidGlass,{variant:"panel",className:"p-6",children:[(0,s.jsx)("h3",{className:"text-sm font-semibold mb-4",children:"Import Options"}),(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"text-xs font-medium mb-2 block",style:{color:"hsl(var(--theme-muted-foreground))"},children:"Default Entity Type (optional)"}),(0,s.jsxs)("select",{value:k,onChange:e=>w(e.target.value),className:"w-full px-3 py-2 rounded-lg text-sm",style:{backgroundColor:"hsl(var(--theme-muted) / 0.3)",border:"1px solid hsl(var(--theme-border))"},children:[(0,s.jsx)("option",{value:"",children:"Auto-detect"}),(0,s.jsx)("option",{value:"Person",children:"Person (contacts)"}),(0,s.jsx)("option",{value:"Project",children:"Project"}),(0,s.jsx)("option",{value:"Track",children:"Track (music)"}),(0,s.jsx)("option",{value:"Event",children:"Event"}),(0,s.jsx)("option",{value:"Memory",children:"Memory"}),(0,s.jsx)("option",{value:"Ticket",children:"Ticket (task)"}),(0,s.jsx)("option",{value:"Draft",children:"Draft (writing)"}),(0,s.jsx)("option",{value:"Skill",children:"Skill"})]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"text-xs font-medium mb-2 block",style:{color:"hsl(var(--theme-muted-foreground))"},children:"Common Tags (comma-separated)"}),(0,s.jsx)("input",{type:"text",value:P,onChange:e=>E(e.target.value),placeholder:"e.g. work, 2026, important",className:"w-full px-3 py-2 rounded-lg text-sm",style:{backgroundColor:"hsl(var(--theme-muted) / 0.3)",border:"1px solid hsl(var(--theme-border))"}})]})]})]}),(0,s.jsx)("input",{ref:R,type:"file",accept:".txt,.md,.json,.csv",className:"hidden",onChange:e=>{let s=e.target.files?.[0];s&&q(s,!0),R.current&&(R.current.value="")}}),(0,s.jsxs)(r.motion.div,{onDrop:e=>{e.preventDefault(),b(!1);let s=e.dataTransfer.files[0];s&&q(s,!0)},onDragOver:e=>{e.preventDefault(),b(!0)},onDragLeave:()=>b(!1),onClick:()=>R.current?.click(),animate:{scale:j?1.02:1},className:"border-2 border-dashed rounded-3xl p-12 text-center transition-colors cursor-pointer",style:{borderColor:j?"hsl(var(--theme-primary))":"hsl(var(--theme-border))",backgroundColor:j?"hsl(var(--theme-primary) / 0.1)":"transparent"},children:[g?(0,s.jsx)(x.Loader2,{className:"w-12 h-12 mx-auto mb-4 animate-spin",style:{color:"hsl(var(--theme-primary))"}}):(0,s.jsx)(m.Upload,{className:"w-12 h-12 mx-auto mb-4",style:{color:j?"hsl(var(--theme-primary))":"hsl(var(--theme-muted-foreground))"}}),(0,s.jsx)("h3",{className:"text-lg font-semibold mb-2",children:g?"Processing...":"Drop file or click to upload"}),(0,s.jsx)("p",{className:"text-sm mb-4",style:{color:"hsl(var(--theme-muted-foreground))"},children:"AI will classify each item and create ERV entities"}),(0,s.jsx)("div",{className:"flex flex-wrap gap-2 justify-center",children:[".csv",".json",".txt",".md"].map(e=>(0,s.jsx)("span",{className:"px-3 py-1 rounded-full text-xs",style:{backgroundColor:"hsl(var(--theme-muted) / 0.5)"},children:e},e))})]}),I&&(0,s.jsx)(o.LiquidGlass,{variant:"panel",className:"p-4 border-red-500/30",children:(0,s.jsxs)("div",{className:"flex items-center gap-3 text-red-500",children:[(0,s.jsx)(p.XCircle,{className:"w-5 h-5"}),(0,s.jsx)("span",{className:"text-sm",children:I})]})}),(0,s.jsx)(a.AnimatePresence,{children:M&&(0,s.jsx)(r.motion.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0},children:(0,s.jsxs)(o.LiquidGlass,{variant:"panel",className:"p-6",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[M.dryRun?(0,s.jsx)(C.Eye,{className:"w-6 h-6",style:{color:"hsl(var(--theme-primary))"}}):(0,s.jsx)(u.CheckCircle,{className:"w-6 h-6 text-green-500"}),(0,s.jsxs)("div",{children:[(0,s.jsx)("h3",{className:"font-semibold",children:M.dryRun?"Preview":"Import Complete"}),(0,s.jsxs)("p",{className:"text-xs",style:{color:"hsl(var(--theme-muted-foreground))"},children:[M.totalItems," items ",M.dryRun?"detected":"processed",void 0!==M.created&&`, ${M.created} created`,void 0!==M.errors&&M.errors>0&&`, ${M.errors} errors`]})]})]}),M.dryRun&&(0,s.jsx)("button",{onClick:()=>R.current?.click(),className:"px-4 py-2 rounded-lg text-sm font-medium transition-colors",style:{backgroundColor:"hsl(var(--theme-primary))",color:"hsl(var(--theme-primary-foreground))"},children:"Confirm Import"})]}),(0,s.jsxs)("div",{className:"mb-6",children:[(0,s.jsx)("h4",{className:"text-xs font-medium mb-3",style:{color:"hsl(var(--theme-muted-foreground))"},children:"Entity Types"}),(0,s.jsx)("div",{className:"flex flex-wrap gap-2",children:Object.entries(M.typeCounts).map(([e,t])=>{let r=T[e]||y.Database,a=D[e]||"#888";return(0,s.jsxs)("div",{className:"flex items-center gap-2 px-3 py-1.5 rounded-lg",style:{backgroundColor:`${a}20`},children:[(0,s.jsx)(r,{className:"w-4 h-4",style:{color:a}}),(0,s.jsx)("span",{className:"text-sm font-medium",children:e}),(0,s.jsx)("span",{className:"text-xs",style:{color:"hsl(var(--theme-muted-foreground))"},children:t})]},e)})})]}),M.preview&&(0,s.jsxs)("div",{children:[(0,s.jsx)("h4",{className:"text-xs font-medium mb-3",style:{color:"hsl(var(--theme-muted-foreground))"},children:"Preview (first 20)"}),(0,s.jsx)("div",{className:"space-y-2 max-h-80 overflow-y-auto",children:M.preview.map(e=>{let t=T[e.entityType]||y.Database,r=D[e.entityType]||"#888";return(0,s.jsxs)("div",{className:"flex items-start gap-3 p-3 rounded-lg",style:{backgroundColor:"hsl(var(--theme-muted) / 0.3)"},children:[(0,s.jsx)(t,{className:"w-4 h-4 mt-0.5 flex-shrink-0",style:{color:r}}),(0,s.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)("span",{className:"text-sm font-medium truncate",children:e.name}),(0,s.jsx)("span",{className:"text-xs px-1.5 py-0.5 rounded",style:{backgroundColor:`${r}30`,color:r},children:e.entityType}),(0,s.jsxs)("span",{className:"text-xs",style:{color:"hsl(var(--theme-muted-foreground))"},children:[(100*e.confidence).toFixed(0),"%"]})]}),(0,s.jsx)("p",{className:"text-xs truncate mt-1",style:{color:"hsl(var(--theme-muted-foreground))"},children:e.contentPreview})]})]},e.index)})})]}),M.results&&(0,s.jsxs)("div",{children:[(0,s.jsx)("h4",{className:"text-xs font-medium mb-3",style:{color:"hsl(var(--theme-muted-foreground))"},children:"Created Entities"}),(0,s.jsx)("div",{className:"space-y-1 max-h-60 overflow-y-auto",children:M.results.slice(0,30).map(e=>(0,s.jsxs)("div",{className:"flex items-center gap-2 text-sm",children:[e.error?(0,s.jsx)(p.XCircle,{className:"w-4 h-4 text-red-500"}):(0,s.jsx)(u.CheckCircle,{className:"w-4 h-4 text-green-500"}),(0,s.jsx)("span",{className:"truncate",children:e.name}),(0,s.jsx)("span",{className:"text-xs",style:{color:"hsl(var(--theme-muted-foreground))"},children:e.entityType})]},e.index))})]})]})})}),(0,s.jsxs)(o.LiquidGlass,{variant:"panel",className:"p-4 flex items-start gap-3",children:[(0,s.jsx)(h.AlertCircle,{className:"w-5 h-5 flex-shrink-0",style:{color:"hsl(var(--theme-primary))"}}),(0,s.jsxs)("div",{children:[(0,s.jsx)("h4",{className:"text-sm font-medium mb-1",children:"File Format Tips"}),(0,s.jsxs)("ul",{className:"text-xs space-y-1",style:{color:"hsl(var(--theme-muted-foreground))"},children:[(0,s.jsxs)("li",{children:[(0,s.jsx)("strong",{children:"CSV:"})," One entity per row. First row can be headers."]}),(0,s.jsxs)("li",{children:[(0,s.jsx)("strong",{children:"JSON:"})," Array of items. Each item becomes an entity."]}),(0,s.jsxs)("li",{children:[(0,s.jsx)("strong",{children:"TXT/MD:"})," Items separated by blank lines."]}),(0,s.jsx)("li",{children:"AI will auto-detect entity types based on content keywords."})]})]})]})]})]})})}e.s(["ERVImportClient",()=>P])},296015,e=>{e.n(e.i(699884))},276622,e=>{e.v(s=>Promise.all(["static/chunks/e9a36fd48fa91706.js","static/chunks/6f90eb9222fdcbd4.js"].map(s=>e.l(s))).then(()=>s(556113)))}]);