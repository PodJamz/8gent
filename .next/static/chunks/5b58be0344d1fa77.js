(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,338328,e=>{"use strict";var t=e.i(726151),i=e.i(923041),n=e.i(662582),a=e.i(278124),r=e.i(569206),o=e.i(850402),s=e.i(334905),l=e.i(975157),c=e.i(305583),d=e.i(932751),m=e.i(555603),h=e.i(517703),p=e.i(240041),u=e.i(461321),y=e.i(954621),x=e.i(692028),g=e.i(678295),f=e.i(479520),v=e.i(384785),b=e.i(280028),j=e.i(843762),k=e.i(546840),w=e.i(888570);let N={Person:{icon:c.User,gradient:"from-blue-500 to-cyan-500",label:"Person"},Project:{icon:d.FolderKanban,gradient:"from-violet-500 to-purple-500",label:"Project"},Track:{icon:m.Music,gradient:"from-pink-500 to-rose-500",label:"Track"},Draft:{icon:h.FileText,gradient:"from-amber-500 to-orange-500",label:"Draft"},Sketch:{icon:p.Pencil,gradient:"from-emerald-500 to-green-500",label:"Sketch"},Ticket:{icon:u.Ticket,gradient:"from-cyan-500 to-teal-500",label:"Ticket"},Epic:{icon:y.Target,gradient:"from-indigo-500 to-blue-500",label:"Epic"},Event:{icon:x.Calendar,gradient:"from-red-500 to-pink-500",label:"Event"},Memory:{icon:g.Brain,gradient:"from-purple-500 to-fuchsia-500",label:"Memory"},Value:{icon:f.Heart,gradient:"from-rose-500 to-red-500",label:"Value"},Dimension:{icon:v.Layers,gradient:"from-slate-500 to-zinc-500",label:"Dimension"},Collection:{icon:b.FolderOpen,gradient:"from-yellow-500 to-amber-500",label:"Collection"},Skill:{icon:j.Sparkles,gradient:"from-fuchsia-500 to-pink-500",label:"Skill"},Reminder:{icon:k.Bell,gradient:"from-orange-500 to-red-500",label:"Reminder"},AgentTask:{icon:w.Bot,gradient:"from-sky-500 to-blue-500",label:"Agent Task"}},I={sm:{card:"p-2 gap-2",icon:"w-4 h-4",iconContainer:"w-8 h-8",title:"text-sm",meta:"text-xs",thumbnail:"w-8 h-8"},md:{card:"p-3 gap-3",icon:"w-5 h-5",iconContainer:"w-10 h-10",title:"text-base",meta:"text-sm",thumbnail:"w-12 h-12"},lg:{card:"p-4 gap-4",icon:"w-6 h-6",iconContainer:"w-14 h-14",title:"text-lg",meta:"text-sm",thumbnail:"w-16 h-16"}},M={circle:"rounded-full aspect-square",square:"rounded-lg",hexagon:"rounded-lg",custom:"rounded-lg"},S=(0,i.memo)(function({entity:e,shape:a="square",size:r="md",selected:o=!1,showThumbnail:s=!0,showTags:c=!0,showTypeBadge:d=!0,color:m,onClick:h,onLongPress:p,onDragStart:u,className:y}){let x=N[e.entityType],g=I[r],f=x.icon,v=(0,i.useMemo)(()=>{try{return JSON.parse(e.data)}catch{return{}}},[e.data]),b=(0,i.useMemo)(()=>{switch(e.entityType){case"Person":return v.title||v.company||v.email;case"Project":return v.status;case"Track":return v.artist;case"Ticket":return`${v.ticketId} â€¢ ${v.priority}`;case"Event":return v.startTime?new Date(v.startTime).toLocaleDateString():void 0;case"Memory":return v.memoryType;default:return}},[e.entityType,v]),j=(0,i.useCallback)(()=>{h?.(e)},[h,e]),k=(0,i.useCallback)(t=>{u?.(t,e)},[u,e]);(0,i.useCallback)(()=>{p?.(e)},[p,e]);let w=(0,i.useCallback)(t=>{("Enter"===t.key||" "===t.key)&&(t.preventDefault(),h?.(e))},[h,e]),S="circle"===a,E=(0,t.jsx)(n.motion.div,{layout:!0,layoutId:e.entityId,initial:{opacity:0,scale:.95},animate:{opacity:1,scale:o?1.02:1},exit:{opacity:0,scale:.95},transition:{duration:.2},tabIndex:0,role:"button","aria-label":`${e.name}, ${x.label}`,"aria-selected":o,onClick:j,onKeyDown:w,className:(0,l.cn)("relative cursor-pointer select-none","bg-[hsl(var(--theme-card))] border border-[hsl(var(--theme-border))]","hover:border-[hsl(var(--theme-primary)/0.5)] hover:shadow-lg","focus:outline-none focus-visible:ring-2 focus-visible:ring-[hsl(var(--theme-primary))]","transition-all duration-200",S?M.circle:M[a],g.card,o&&"ring-2 ring-[hsl(var(--theme-primary))] shadow-lg",S?"flex items-center justify-center":"flex items-start",y),children:S?(0,t.jsx)("div",{className:(0,l.cn)("flex items-center justify-center rounded-full","bg-gradient-to-br",m||x.gradient,g.iconContainer),children:(0,t.jsx)(f,{className:(0,l.cn)("text-white",g.icon)})}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("div",{className:"flex-shrink-0",children:s&&e.thumbnail?(0,t.jsx)("img",{src:e.thumbnail,alt:"",className:(0,l.cn)("object-cover rounded-lg",g.thumbnail)}):(0,t.jsx)("div",{className:(0,l.cn)("flex items-center justify-center rounded-lg","bg-gradient-to-br",m||x.gradient,g.iconContainer),children:(0,t.jsx)(f,{className:(0,l.cn)("text-white",g.icon)})})}),(0,t.jsxs)("div",{className:"flex-1 min-w-0",children:[d&&(0,t.jsx)("div",{className:"flex items-center gap-1 mb-0.5",children:(0,t.jsx)("span",{className:(0,l.cn)("px-1.5 py-0.5 rounded text-[10px] font-medium uppercase tracking-wider","bg-[hsl(var(--theme-muted))] text-[hsl(var(--theme-muted-foreground))]"),children:x.label})}),(0,t.jsx)("h3",{className:(0,l.cn)("font-medium truncate text-[hsl(var(--theme-foreground))]",g.title),children:e.name}),b&&(0,t.jsx)("p",{className:(0,l.cn)("truncate text-[hsl(var(--theme-muted-foreground))]",g.meta),children:b}),c&&e.tags.length>0&&(0,t.jsxs)("div",{className:"flex flex-wrap gap-1 mt-2",children:[e.tags.slice(0,3).map(e=>(0,t.jsx)("span",{className:(0,l.cn)("px-1.5 py-0.5 rounded-full text-[10px]","bg-[hsl(var(--theme-accent))] text-[hsl(var(--theme-accent-foreground))]"),children:e},e)),e.tags.length>3&&(0,t.jsxs)("span",{className:"text-[10px] text-[hsl(var(--theme-muted-foreground))]",children:["+",e.tags.length-3]})]})]}),void 0!==e.importance&&e.importance>.7&&(0,t.jsx)("div",{className:"absolute top-2 right-2 w-2 h-2 rounded-full bg-amber-500",title:`Importance: ${Math.round(100*e.importance)}%`})]})});return u?(0,t.jsx)("div",{draggable:!0,onDragStart:k,children:E}):E});function E(e,t,i=10){let n=Math.atan2(t.y-e.y,t.x-e.x),a=Math.PI/6,r=t.x-i*Math.cos(n-a),o=t.y-i*Math.sin(n-a),s=t.x-i*Math.cos(n+a),l=t.y-i*Math.sin(n+a);return`M ${r} ${o} L ${t.x} ${t.y} L ${s} ${l}`}let C=(0,i.memo)(function({from:e,to:a,type:r="line",color:o="hsl(var(--theme-border))",strokeWidth:s=2,animated:c=!1,bidirectional:d=!1,label:m,weight:h=1,highlighted:p=!1,onClick:u,className:y}){if("none"===r)return null;let x=(0,i.useMemo)(()=>(function(e,t,i){switch(i){case"line":case"arrow":case"glow":return`M ${e.x} ${e.y} L ${t.x} ${t.y}`;case"curve":{let{cp1:i,cp2:n}=function(e,t,i=.5){let n=t.x-e.x,a=t.y-e.y,r=e.x+n/2,o=e.y+a/2,s=-a*i*.3,l=n*i*.3;return{cp1:{x:r+s,y:o+l},cp2:{x:r+s,y:o+l}}}(e,t);return`M ${e.x} ${e.y} C ${i.x} ${i.y}, ${n.x} ${n.y}, ${t.x} ${t.y}`}default:return""}})(e,a,r),[e,a,r]),g=(0,i.useMemo)(()=>"arrow"!==r?null:E(e,a,10),[e,a,r]),f=(0,i.useMemo)(()=>"arrow"===r&&d?E(a,e,10):null,[e,a,r,d]),v=(0,i.useMemo)(()=>({x:(e.x+a.x)/2,y:(e.y+a.y)/2}),[e,a]),b=.3+.7*h,j=p?1.5*s:s*(.5+.5*h),k={hidden:{pathLength:0,opacity:0},visible:{pathLength:1,opacity:b,transition:{duration:.5,ease:"easeOut"}}};return(0,t.jsxs)("g",{className:(0,l.cn)("connection",y),onClick:u,children:["glow"===r&&(0,t.jsx)(n.motion.path,{d:x,fill:"none",stroke:o,strokeWidth:3*j,strokeLinecap:"round",strokeOpacity:.2,filter:"blur(4px)",initial:"hidden",animate:"visible",variants:k}),(0,t.jsx)(n.motion.path,{d:x,fill:"none",stroke:p?"hsl(var(--theme-primary))":o,strokeWidth:j,strokeLinecap:"round",strokeOpacity:b,strokeDasharray:c?"5 5":void 0,initial:"hidden",animate:"visible",variants:k,style:c?{animation:"dash 1s linear infinite"}:void 0}),g&&(0,t.jsx)(n.motion.path,{d:g,fill:"none",stroke:p?"hsl(var(--theme-primary))":o,strokeWidth:j,strokeLinecap:"round",strokeLinejoin:"round",strokeOpacity:b,initial:{opacity:0},animate:{opacity:b},transition:{delay:.3}}),f&&(0,t.jsx)(n.motion.path,{d:f,fill:"none",stroke:p?"hsl(var(--theme-primary))":o,strokeWidth:j,strokeLinecap:"round",strokeLinejoin:"round",strokeOpacity:b,initial:{opacity:0},animate:{opacity:b},transition:{delay:.3}}),m&&(0,t.jsxs)(n.motion.g,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.4},children:[(0,t.jsx)("rect",{x:v.x-3.5*m.length,y:v.y-10,width:7*m.length,height:20,rx:4,fill:"hsl(var(--theme-background))",stroke:o,strokeWidth:1,strokeOpacity:.5}),(0,t.jsx)("text",{x:v.x,y:v.y+4,textAnchor:"middle",fontSize:11,fill:"hsl(var(--theme-muted-foreground))",className:"select-none pointer-events-none",children:m})]}),u&&(0,t.jsx)("path",{d:x,fill:"none",stroke:"transparent",strokeWidth:Math.max(3*j,20),className:"cursor-pointer"}),(0,t.jsx)("style",{children:`
          @keyframes dash {
            to {
              stroke-dashoffset: -10;
            }
          }
        `})]})}),T=(0,i.memo)(function({children:e,width:i,height:n,className:a}){return(0,t.jsxs)("svg",{width:i,height:n,className:(0,l.cn)("absolute inset-0 pointer-events-none",a),style:{overflow:"visible"},children:[(0,t.jsxs)("defs",{children:[(0,t.jsx)("marker",{id:"arrow-marker",viewBox:"0 0 10 10",refX:"9",refY:"5",markerWidth:"6",markerHeight:"6",orient:"auto-start-reverse",children:(0,t.jsx)("path",{d:"M 0 0 L 10 5 L 0 10 z",fill:"currentColor"})}),(0,t.jsxs)("filter",{id:"glow-filter",x:"-50%",y:"-50%",width:"200%",height:"200%",children:[(0,t.jsx)("feGaussianBlur",{stdDeviation:"2",result:"blur"}),(0,t.jsxs)("feMerge",{children:[(0,t.jsx)("feMergeNode",{in:"blur"}),(0,t.jsx)("feMergeNode",{in:"SourceGraphic"})]})]})]}),e]})});var z=e.i(191089);let $={type:"spring",stiffness:400,damping:15},A={type:"spring",stiffness:300,damping:20,mass:.5},P={dissolve:{initial:{opacity:0,scale:.8,filter:"blur(20px)",y:30},animate:{opacity:1,scale:1,filter:"blur(0px)",y:0,transition:A},exit:{opacity:0,scale:1.1,filter:"blur(30px)",y:-20,transition:{duration:.4}}},morph:{initial:{opacity:0,rotateY:-90,scale:.5},animate:{opacity:1,rotateY:0,scale:1,transition:$},exit:{opacity:0,rotateY:90,scale:.5,transition:{duration:.3}}},slideBlur:{initial:{opacity:0,y:60,filter:"blur(10px)"},animate:{opacity:1,y:0,filter:"blur(0px)",transition:{type:"spring",stiffness:200,damping:25,mass:.8}},exit:{opacity:0,y:-40,filter:"blur(10px)",transition:{duration:.25}}},cosmic:{initial:{opacity:0,scale:0,rotate:180},animate:{opacity:1,scale:1,rotate:0,transition:{...A,delay:.1}},exit:{opacity:0,scale:2,rotate:-180,transition:{duration:.5}}},waterfall:{initial:{opacity:0,y:-100,rotateX:45},animate:{opacity:1,y:0,rotateX:0,transition:$},exit:{opacity:0,y:100,rotateX:-45,transition:{duration:.3}}}},L={hidden:{opacity:0},visible:{opacity:1,transition:{staggerChildren:.03,delayChildren:.1}},exit:{opacity:0,transition:{staggerChildren:.02,staggerDirection:-1}}},D=(0,i.memo)(function({entities:e,config:i,selectedEntityId:a,onEntityClick:r,onEntityLongPress:o}){let s=i.columns||4,l=i.gap||16;return(0,t.jsx)(n.motion.div,{variants:L,initial:"hidden",animate:"visible",exit:"exit",className:"grid",style:{gridTemplateColumns:`repeat(${s}, minmax(0, 1fr))`,gap:`${l}px`},children:e.map((e,s)=>(0,t.jsx)(n.motion.div,{variants:P.slideBlur,custom:s,layout:!0,layoutId:e.entityId,children:(0,t.jsx)(S,{entity:e,shape:i.entityShape,size:"auto"===i.itemSize?"md":i.itemSize,selected:a===e.entityId,onClick:r,onLongPress:o})},e.entityId))})}),B=(0,i.memo)(function({entities:e,config:i,selectedEntityId:a,onEntityClick:r,onEntityLongPress:o}){return(0,t.jsx)(n.motion.div,{variants:L,initial:"hidden",animate:"visible",exit:"exit",className:"flex flex-col",style:{gap:`${i.gap||8}px`},children:e.map((e,s)=>(0,t.jsx)(n.motion.div,{variants:P.slideBlur,custom:s,layout:!0,layoutId:e.entityId,children:(0,t.jsx)(S,{entity:e,shape:"square",size:"auto"===i.itemSize?"md":i.itemSize,selected:a===e.entityId,onClick:r,onLongPress:o})},e.entityId))})}),q=(0,i.memo)(function({entities:e,config:i,selectedEntityId:a,onEntityClick:r,onEntityLongPress:o}){return(0,t.jsx)(n.motion.div,{variants:L,initial:"hidden",animate:"visible",exit:"exit",className:"flex flex-wrap",style:{gap:`${i.gap||16}px`},children:e.map((e,s)=>(0,t.jsx)(n.motion.div,{variants:P.dissolve,custom:s,layout:!0,layoutId:e.entityId,children:(0,t.jsx)(S,{entity:e,shape:i.entityShape,size:"auto"===i.itemSize?"md":i.itemSize,selected:a===e.entityId,onClick:r,onLongPress:o})},e.entityId))})}),Y=(0,i.memo)(function({entities:e,positions:i,config:a,selectedEntityId:r,onEntityClick:o,onEntityLongPress:s,containerRef:l}){return(0,t.jsx)(n.motion.div,{variants:L,initial:"hidden",animate:"visible",exit:"exit",className:"relative w-full h-full min-h-[600px]",children:e.map((e,l)=>{let c=i[l]||{x:0,y:0};return(0,t.jsx)(n.motion.div,{className:"absolute",variants:P.cosmic,custom:l,layout:!0,layoutId:e.entityId,style:{left:c.x,top:c.y,transform:"translate(-50%, -50%)"},children:(0,t.jsx)(S,{entity:e,shape:"circle",size:"auto"===a.itemSize?"md":a.itemSize,selected:r===e.entityId,onClick:o,onLongPress:s})},e.entityId)})})}),O=(0,i.memo)(function({entities:e,positions:i,config:a,selectedEntityId:r,onEntityClick:o,onEntityLongPress:s}){let l=e[0],c=e.slice(1),d=i.slice(1);return(0,t.jsxs)(n.motion.div,{variants:L,initial:"hidden",animate:"visible",exit:"exit",className:"relative w-full h-full min-h-[600px]",children:[l&&(0,t.jsx)(n.motion.div,{className:"absolute left-1/2 top-1/2",variants:P.cosmic,layout:!0,layoutId:l.entityId,style:{transform:"translate(-50%, -50%)"},children:(0,t.jsx)(S,{entity:l,shape:"circle",size:"lg",selected:r===l.entityId,onClick:o,onLongPress:s})}),c.map((e,i)=>{let l=d[i]||{x:0,y:0};return(0,t.jsx)(n.motion.div,{className:"absolute",variants:P.cosmic,custom:i,layout:!0,layoutId:e.entityId,animate:{left:l.x,top:l.y,rotate:[0,360]},transition:{rotate:{duration:60+10*i,repeat:1/0,ease:"linear"},...A},style:{transform:"translate(-50%, -50%)"},children:(0,t.jsx)(S,{entity:e,shape:"circle",size:"auto"===a.itemSize?"sm":a.itemSize,selected:r===e.entityId,onClick:o,onLongPress:s})},e.entityId)}),(0,t.jsx)("svg",{className:"absolute inset-0 w-full h-full pointer-events-none opacity-20",children:(0,t.jsx)("circle",{cx:"50%",cy:"50%",r:"200",fill:"none",stroke:"hsl(var(--theme-primary))",strokeWidth:"1",strokeDasharray:"4 4"})})]})}),R=(0,i.memo)(function({entities:e,relationships:a,positions:r,config:o,selectedEntityId:s,onEntityClick:l,onEntityLongPress:c,onConnectionClick:d,containerRef:m}){let h=m.current?.getBoundingClientRect(),p=h?.width||800,u=h?.height||600,y=(0,i.useMemo)(()=>{let t=new Map;return e.forEach((e,i)=>{t.set(e.entityId,r[i]||{x:0,y:0})}),t},[e,r]);return(0,t.jsxs)(n.motion.div,{variants:L,initial:"hidden",animate:"visible",exit:"exit",className:"relative w-full h-full min-h-[600px]",children:[(0,t.jsx)(T,{width:p,height:u,children:a.map(e=>{let i=y.get(e.sourceEntityId),n=y.get(e.targetEntityId);return i&&n?(0,t.jsx)(C,{from:i,to:n,type:o.connectionStyle,weight:e.weight,label:e.label,highlighted:s===e.sourceEntityId||s===e.targetEntityId,onClick:()=>d?.(e)},e._id):null})}),e.map((e,i)=>{let a=r[i]||{x:0,y:0};return(0,t.jsx)(n.motion.div,{className:"absolute z-10",variants:P.dissolve,custom:i,layout:!0,layoutId:e.entityId,drag:!0,dragMomentum:!1,dragElastic:.1,style:{left:a.x,top:a.y,transform:"translate(-50%, -50%)"},children:(0,t.jsx)(S,{entity:e,shape:o.entityShape,size:"auto"===o.itemSize?"md":o.itemSize,selected:s===e.entityId,onClick:l,onLongPress:c})},e.entityId)})]})}),W=(0,i.memo)(function({entities:e,relationships:a,positions:r,config:o,selectedEntityId:s,onEntityClick:l,onEntityLongPress:c,onConnectionClick:d,containerRef:m}){let h=m.current?.getBoundingClientRect(),p=h?.width||800,u=h?.height||600,y=(0,i.useMemo)(()=>{let t=new Map;return e.forEach((e,i)=>{t.set(e.entityId,r[i]||{x:0,y:0})}),t},[e,r]);return(0,t.jsxs)(n.motion.div,{variants:L,initial:"hidden",animate:"visible",exit:"exit",className:"relative w-full h-full min-h-[600px]",children:[(0,t.jsx)(T,{width:p,height:u,children:a.map(e=>{let i=y.get(e.sourceEntityId),n=y.get(e.targetEntityId);return i&&n?(0,t.jsx)(C,{from:i,to:n,type:"curve",weight:e.weight,highlighted:s===e.sourceEntityId||s===e.targetEntityId,onClick:()=>d?.(e)},e._id):null})}),e.map((e,i)=>{let a=r[i]||{x:0,y:0};return(0,t.jsx)(n.motion.div,{className:"absolute z-10",variants:P.waterfall,custom:i,layout:!0,layoutId:e.entityId,style:{left:a.x,top:a.y,transform:"translate(-50%, -50%)"},children:(0,t.jsx)(S,{entity:e,shape:o.entityShape,size:"auto"===o.itemSize?"md":o.itemSize,selected:s===e.entityId,onClick:l,onLongPress:c})},e.entityId)})]})}),_=(0,i.memo)(function(){return(0,t.jsx)(n.motion.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"flex items-center justify-center h-full min-h-[400px]",children:(0,t.jsxs)("div",{className:"flex flex-col items-center gap-4",children:[(0,t.jsx)(n.motion.div,{className:"w-16 h-16 rounded-full border-4 border-[hsl(var(--theme-primary)/0.2)] border-t-[hsl(var(--theme-primary))]",animate:{rotate:360},transition:{duration:1,repeat:1/0,ease:"linear"}}),(0,t.jsx)(n.motion.p,{className:"text-[hsl(var(--theme-muted-foreground))]",animate:{opacity:[.5,1,.5]},transition:{duration:1.5,repeat:1/0},children:"Conjuring dimension..."})]})})}),F=(0,i.memo)(function({message:e}){return(0,t.jsx)(n.motion.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.95},className:"flex items-center justify-center h-full min-h-[400px]",children:(0,t.jsxs)("div",{className:"text-center p-8 rounded-xl bg-red-500/10 border border-red-500/20 max-w-md",children:[(0,t.jsx)("div",{className:"w-12 h-12 rounded-full bg-red-500/20 flex items-center justify-center mx-auto mb-4",children:(0,t.jsx)("span",{className:"text-2xl",children:"âš ï¸"})}),(0,t.jsx)("h3",{className:"text-lg font-semibold text-red-500 mb-2",children:"Dimension Error"}),(0,t.jsx)("p",{className:"text-[hsl(var(--theme-muted-foreground))]",children:e})]})})}),G=(0,i.memo)(function({config:e}){return(0,t.jsx)(n.motion.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},className:"flex items-center justify-center h-full min-h-[400px]",children:(0,t.jsxs)("div",{className:"text-center p-8",children:[(0,t.jsx)(n.motion.div,{className:"w-20 h-20 rounded-full bg-[hsl(var(--theme-muted))] flex items-center justify-center mx-auto mb-4",animate:{scale:[1,1.05,1],opacity:[.5,.8,.5]},transition:{duration:3,repeat:1/0},children:(0,t.jsx)("span",{className:"text-3xl",children:"âœ¨"})}),(0,t.jsxs)("h3",{className:"text-lg font-semibold text-[hsl(var(--theme-foreground))] mb-2",children:[e.name," is empty"]}),(0,t.jsx)("p",{className:"text-[hsl(var(--theme-muted-foreground))]",children:"No entities found for this dimension"})]})})}),H=(0,i.memo)(function({config:e,entities:r,relationships:o=[],selectedEntityId:s,loading:c=!1,error:d,onEntityClick:m,onEntityLongPress:h,onConnectionClick:p,className:u,debug:y=!1}){let x=(0,i.useRef)(null),[g,f]=(0,i.useState)({width:800,height:600}),v=(0,z.useDimensionNavigation)();(0,i.useEffect)(()=>{if(!x.current)return;let e=new ResizeObserver(e=>{let t=e[0];t&&f({width:t.contentRect.width,height:t.contentRect.height})});return e.observe(x.current),()=>e.disconnect()},[]);let b=(0,i.useMemo)(()=>{let{width:t,height:i}=g,n=t/2,a=i/2;switch(e.arrangement){case"grid":return function(e,t=4,i=16,n=200,a=150){return Array.from({length:e},(e,r)=>({x:r%t*(n+i),y:Math.floor(r/t)*(a+i)}))}(r.length,e.columns||4,e.gap||16);case"spiral":return function(e,t,i,n=80,a=20){return Array.from({length:e},(e,r)=>{let o=.5*r,s=n+a*o;return{x:t+s*Math.cos(o),y:i+s*Math.sin(o)}})}(r.length,n,a);case"orbit":return function(e,t,i,n=200){return Array.from({length:e},(a,r)=>{let o=r/e*Math.PI*2-Math.PI/2;return{x:t+n*Math.cos(o),y:i+n*Math.sin(o)}})}(r.length,n,a);case"flow":return function(e,t,i=200,n=150,a=16){let r=Math.floor(t/(i+a))||1;return Array.from({length:e},(e,t)=>({x:t%r*(i+a),y:Math.floor(t/r)*(n+a)}))}(r.length,t);case"tree":return function(e,t,i){let n=new Set(t.map(e=>e.targetEntityId)),a=e.filter(e=>!n.has(e.entityId)),r=[],o=new Map,s=new Map;a.forEach((t,n)=>{o.set(t.entityId,0),r[e.findIndex(e=>e.entityId===t.entityId)]={x:(n+1)*(i/(a.length+1)),y:50}});let l=[...a.map(e=>e.entityId)];for(;l.length>0;){let i=l.shift(),n=o.get(i)||0;t.filter(e=>e.sourceEntityId===i).map(e=>e.targetEntityId).forEach(t=>{if(!o.has(t)){o.set(t,n+1),l.push(t);let i=n+1,a=s.get(i)||0;s.set(i,a+1);let c=e.findIndex(e=>e.entityId===t);c>=0&&(r[c]={x:(a+1)*150,y:120*i+50})}})}return e.map((e,t)=>r[t]||{x:50+t%5*150,y:50+120*Math.floor(t/5)})}(r,o,t);case"graph":return function(e,t,i,n){let a=e.map(()=>({x:Math.random()*(i-100)+50,y:Math.random()*(n-100)+50}));for(let r=0;r<50;r++){let r=a.map(()=>({x:0,y:0}));for(let t=0;t<e.length;t++)for(let i=t+1;i<e.length;i++){let e=a[i].x-a[t].x,n=a[i].y-a[t].y,o=Math.sqrt(e*e+n*n)||1,s=5e3/(o*o);r[t].x-=e/o*s,r[t].y-=n/o*s,r[i].x+=e/o*s,r[i].y+=n/o*s}t.forEach(t=>{let i=e.findIndex(e=>e.entityId===t.sourceEntityId),n=e.findIndex(e=>e.entityId===t.targetEntityId);if(i>=0&&n>=0){let e=a[n].x-a[i].x,t=a[n].y-a[i].y;r[i].x+=.01*e,r[i].y+=.01*t,r[n].x-=.01*e,r[n].y-=.01*t}}),a.forEach((e,t)=>{e.x+=.85*r[t].x,e.y+=.85*r[t].y,e.x=Math.max(50,Math.min(i-50,e.x)),e.y=Math.max(50,Math.min(n-50,e.y))})}return a}(r,o,t,i);default:return r.map((e,t)=>({x:0,y:80*t}))}},[e.arrangement,e.columns,e.gap,r,o,g]);(0,i.useEffect)(()=>{v.navigateTo(e.id,e.name)},[e.id,e.name,v]);let j=(0,i.useMemo)(()=>({grid:D,list:B,flow:q,spiral:Y,orbit:O,tree:W,graph:R})[e.arrangement]||D,[e.arrangement]),k=(0,i.useMemo)(()=>({grid:"slideBlur",list:"slideBlur",flow:"dissolve",spiral:"cosmic",orbit:"cosmic",tree:"waterfall",graph:"dissolve"})[e.arrangement]||"slideBlur",[e.arrangement]);return(0,t.jsxs)(n.motion.div,{ref:x,className:(0,l.cn)("relative w-full h-full overflow-auto","bg-[hsl(var(--theme-background))]",u),initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},children:[y&&(0,t.jsxs)("div",{className:"absolute top-2 left-2 z-50 text-xs bg-black/80 text-white p-2 rounded",children:[(0,t.jsxs)("div",{children:["Arrangement: ",e.arrangement]}),(0,t.jsxs)("div",{children:["Entities: ",r.length]}),(0,t.jsxs)("div",{children:["Relationships: ",o.length]}),(0,t.jsxs)("div",{children:["Size: ",g.width,"x",g.height]})]}),(0,t.jsx)("div",{className:(0,l.cn)("absolute inset-0 opacity-30 pointer-events-none",e.gradient&&`bg-gradient-to-br ${e.gradient}`)}),(0,t.jsx)("div",{className:"relative z-10 p-4 md:p-6",children:(0,t.jsx)(a.AnimatePresence,{mode:"wait",children:c?(0,t.jsx)(_,{},"loading"):d?(0,t.jsx)(F,{message:d},"error"):0===r.length?(0,t.jsx)(G,{config:e},"empty"):(0,t.jsx)(n.motion.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.2},children:(0,t.jsx)(j,{entities:r,relationships:o,config:e,positions:b,selectedEntityId:s,onEntityClick:m,onEntityLongPress:h,onConnectionClick:p,containerRef:x})},`${e.id}-${k}`)})}),(0,t.jsx)(X,{arrangement:e.arrangement})]})}),X=(0,i.memo)(function({arrangement:e}){let[a,r]=(0,i.useState)([]);return(0,i.useEffect)(()=>{r(Array.from({length:"orbit"===e||"spiral"===e?30:15},(e,t)=>({id:t,x:100*Math.random(),y:100*Math.random(),size:2+4*Math.random(),duration:3+4*Math.random()})))},[e]),(0,t.jsx)("div",{className:"absolute inset-0 overflow-hidden pointer-events-none",children:a.map(e=>(0,t.jsx)(n.motion.div,{className:"absolute rounded-full bg-[hsl(var(--theme-primary))]",style:{width:e.size,height:e.size,left:`${e.x}%`,top:`${e.y}%`},animate:{opacity:[0,.6,0],scale:[.5,1,.5],y:[0,-30,-60]},transition:{duration:e.duration,repeat:1/0,delay:2*Math.random(),ease:"easeInOut"}},e.id))})});var K=e.i(446503);let Q="ã‚¢ã‚¤ã‚¦ã‚¨ã‚ªã‚«ã‚­ã‚¯ã‚±ã‚³ã‚µã‚·ã‚¹ã‚»ã‚½ã‚¿ãƒãƒ„ãƒ†ãƒˆãƒŠãƒ‹ãƒŒãƒãƒŽãƒãƒ’ãƒ•ãƒ˜ãƒ›ãƒžãƒŸãƒ ãƒ¡ãƒ¢ãƒ¤ãƒ¦ãƒ¨ãƒ©ãƒªãƒ«ãƒ¬ãƒ­ãƒ¯ãƒ²ãƒ³0123456789",U=`
  @keyframes glitch-anim {
    0% { clip-path: inset(40% 0 61% 0); transform: translate(-2px, 2px); }
    20% { clip-path: inset(92% 0 1% 0); transform: translate(2px, -2px); }
    40% { clip-path: inset(43% 0 1% 0); transform: translate(-2px, 2px); }
    60% { clip-path: inset(25% 0 58% 0); transform: translate(2px, -2px); }
    80% { clip-path: inset(54% 0 7% 0); transform: translate(-2px, 2px); }
    100% { clip-path: inset(58% 0 43% 0); transform: translate(0); }
  }

  @keyframes reality-tear {
    0% { transform: scaleY(1) translateY(0); filter: blur(0px); }
    25% { transform: scaleY(1.02) translateY(-2px); filter: blur(1px); }
    50% { transform: scaleY(0.98) translateY(2px); filter: blur(2px); }
    75% { transform: scaleY(1.01) translateY(-1px); filter: blur(1px); }
    100% { transform: scaleY(1) translateY(0); filter: blur(0px); }
  }

  @keyframes digital-rain {
    0% { transform: translateY(-100%); opacity: 0; }
    10% { opacity: 1; }
    90% { opacity: 1; }
    100% { transform: translateY(100vh); opacity: 0; }
  }

  @keyframes pulse-glow {
    0%, 100% { box-shadow: 0 0 20px hsl(var(--theme-primary) / 0.3); }
    50% { box-shadow: 0 0 60px hsl(var(--theme-primary) / 0.6); }
  }
`,J=(0,i.memo)(function({active:e}){let[a,r]=(0,i.useState)([]);return((0,i.useEffect)(()=>{e&&r(Array.from({length:Math.floor(window.innerWidth/20)},(e,t)=>({id:t,x:20*t,chars:Array.from({length:30},()=>Q[Math.floor(Math.random()*Q.length)]),speed:1+2*Math.random(),delay:2*Math.random()})))},[e]),e)?(0,t.jsx)("div",{className:"absolute inset-0 overflow-hidden pointer-events-none z-20",children:a.map(e=>(0,t.jsx)(n.motion.div,{className:"absolute top-0 text-[hsl(var(--theme-primary))] font-mono text-sm leading-tight",style:{left:e.x},initial:{y:"-100%"},animate:{y:"100vh"},transition:{duration:e.speed,delay:e.delay,ease:"linear"},children:e.chars.map((e,i)=>(0,t.jsx)("div",{style:{opacity:1-.03*i,textShadow:0===i?"0 0 10px currentColor":"none"},children:e},i))},e.id))}):null}),V=(0,i.memo)(function({active:e,phase:a}){let[r,o]=(0,i.useState)([]);return((0,i.useEffect)(()=>{if(!e)return;let t=Math.ceil(window.innerWidth/20),i=Math.ceil(window.innerHeight/20),n=[];for(let e=0;e<i;e++)for(let a=0;a<t;a++){let r=Math.sqrt(Math.pow(a-t/2,2)+Math.pow(e-i/2,2));n.push({x:20*a,y:20*e,opacity:1,scale:1,rotation:0,delay:.01*r})}o(n)},[e]),e)?(0,t.jsx)("div",{className:"absolute inset-0 overflow-hidden pointer-events-none z-10",children:r.map((e,i)=>(0,t.jsx)(n.motion.div,{className:"absolute bg-[hsl(var(--theme-background))] border border-[hsl(var(--theme-primary)/0.1)]",style:{left:e.x,top:e.y,width:20,height:20},initial:{opacity:1,scale:1,rotate:0},animate:"fragment"===a?{opacity:[1,.8,0],scale:[1,1.2,0],rotate:[0,180*Math.random()-90],x:(Math.random()-.5)*200,y:(Math.random()-.5)*200}:"reform"===a?{opacity:[0,.8,1],scale:[0,1.1,1],rotate:[180*Math.random()-90,0],x:0,y:0}:{},transition:{duration:.6,delay:e.delay,ease:[.43,.13,.23,.96]}},i))}):null}),Z=(0,i.memo)(function({active:e}){return e?(0,t.jsxs)(n.motion.div,{className:"absolute inset-0 z-15",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.3},children:[(0,t.jsx)("div",{className:"absolute inset-0",style:{background:`radial-gradient(circle at 50% 50%,
            transparent 0%,
            hsl(var(--theme-background) / 0.5) 30%,
            hsl(var(--theme-background)) 70%
          )`}}),(0,t.jsx)(n.motion.div,{className:"absolute left-1/2 top-1/2 -translate-x-1/2 -translate-y-1/2 w-4 h-4 rounded-full bg-[hsl(var(--theme-primary))]",animate:{scale:[1,50,100],opacity:[1,.5,0]},transition:{duration:.8,ease:"easeOut"},style:{boxShadow:"0 0 100px 50px hsl(var(--theme-primary) / 0.5)"}}),Array.from({length:8}).map((e,i)=>(0,t.jsx)(n.motion.div,{className:"absolute left-0 right-0 h-px bg-[hsl(var(--theme-primary))]",style:{top:`${10+12*i}%`},initial:{scaleX:0,opacity:0},animate:{scaleX:[0,1,0],opacity:[0,1,0],x:["-100%","0%","100%"]},transition:{duration:.3,delay:.05*i,ease:"easeInOut"}},i))]}):null}),ee=(0,i.memo)(function({name:e,metaphor:i,gradient:a}){return(0,t.jsx)(n.motion.div,{className:"absolute inset-0 flex items-center justify-center z-30 pointer-events-none",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},children:(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsx)(n.motion.h1,{className:(0,l.cn)("text-6xl md:text-8xl font-bold tracking-tighter",a?`bg-gradient-to-r ${a} bg-clip-text text-transparent`:"text-[hsl(var(--theme-foreground))]"),initial:{y:50,opacity:0,filter:"blur(10px)"},animate:{y:0,opacity:1,filter:"blur(0px)"},transition:{duration:.5,delay:.3},children:e.split("").map((e,i)=>(0,t.jsx)(n.motion.span,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.3+.03*i},children:e},i))}),i&&(0,t.jsxs)(n.motion.p,{className:"mt-4 text-xl text-[hsl(var(--theme-muted-foreground))] uppercase tracking-[0.3em]",initial:{opacity:0},animate:{opacity:1},transition:{delay:.6},children:["âœ§ ",i," âœ§"]})]})})}),et=(0,i.memo)(function({isTransitioning:e,targetDimension:r,onTransitionComplete:o,duration:s=1500,intensity:l=.8}){let[c,d]=(0,i.useState)("idle");return((0,i.useEffect)(()=>{if(!e)return void d("idle");let t=[];return[{phase:"fragment",delay:0},{phase:"void",delay:.25*s},{phase:"reform",delay:.5*s},{phase:"reveal",delay:.7*s},{phase:"idle",delay:s}].forEach(({phase:e,delay:i})=>{let n=setTimeout(()=>{d(e),"idle"===e&&o&&o()},i);t.push(n)}),()=>t.forEach(clearTimeout)},[e,s,o]),"idle"===c)?null:(0,t.jsxs)(n.motion.div,{className:"fixed inset-0 z-[9999] overflow-hidden",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},children:[(0,t.jsx)("style",{dangerouslySetInnerHTML:{__html:U}}),(0,t.jsx)(n.motion.div,{className:"absolute inset-0 bg-[hsl(var(--theme-background))]",animate:{opacity:"void"===c?1:.95}}),(0,t.jsx)(J,{active:"fragment"===c||"void"===c}),(0,t.jsx)(V,{active:"fragment"===c||"reform"===c,phase:c}),(0,t.jsx)(a.AnimatePresence,{children:"void"===c&&(0,t.jsx)(Z,{active:!0})}),(0,t.jsx)(a.AnimatePresence,{children:"reveal"===c&&r&&(0,t.jsx)(ee,{name:r.name,metaphor:r.metaphor,gradient:r.gradient})}),(0,t.jsx)("div",{className:"absolute inset-0 pointer-events-none opacity-10",style:{backgroundImage:`repeating-linear-gradient(
            0deg,
            transparent,
            transparent 2px,
            hsl(var(--theme-foreground) / 0.03) 2px,
            hsl(var(--theme-foreground) / 0.03) 4px
          )`}}),"fragment"===c&&(0,t.jsx)(t.Fragment,{children:(0,t.jsx)(n.motion.div,{className:"absolute inset-0 mix-blend-screen pointer-events-none",style:{background:"linear-gradient(90deg, rgba(255,0,0,0.1), transparent 10%, transparent 90%, rgba(0,255,255,0.1))"},animate:{x:[-5,5,-5]},transition:{duration:.1,repeat:5}})})]})});var ei=e.i(694894);let en={feed:{id:"feed",name:"Feed",description:"Chronological stream of all entities",icon:"ðŸ“°",gradient:"from-blue-500 to-cyan-500",metaphor:"river",container:"frame",arrangement:"list",entityShape:"square",connectionStyle:"none",decorations:[{type:"shadow"}],interactions:[{type:"click",action:"navigate"},{type:"longpress",action:"reveal"}],transition:"slide",sort:{field:"createdAt",direction:"desc"},itemSize:"md",gap:12},kanban:{id:"kanban",name:"Kanban",description:"Ticket and task management board",icon:"ðŸ“‹",gradient:"from-violet-500 to-purple-500",metaphor:"board",container:"panel",arrangement:"grid",entityShape:"square",connectionStyle:"none",decorations:[{type:"badge"},{type:"border"}],interactions:[{type:"drag",action:"custom"},{type:"click",action:"edit"}],transition:"morph",filter:{entityTypes:["Ticket"]},group:{by:"status",showEmpty:!0},columns:5,gap:16,itemSize:"sm"},graph:{id:"graph",name:"Graph",description:"Entity relationship visualization",icon:"ðŸ•¸ï¸",gradient:"from-emerald-500 to-green-500",metaphor:"constellation",container:"frame",arrangement:"graph",entityShape:"circle",connectionStyle:"curve",decorations:[{type:"glow",condition:"importance > 0.8"}],interactions:[{type:"drag",action:"custom"},{type:"click",action:"select"},{type:"hover",action:"preview"}],transition:"morph",sizeMapping:{field:"connections",min:40,max:100},physicsEnabled:!0},"graph-3d":{id:"graph-3d",name:"Graph 3D",description:"Immersive 3D relationship space",icon:"ðŸŒ",gradient:"from-pink-500 to-rose-500",metaphor:"solar",container:"frame",arrangement:"orbit",entityShape:"circle",connectionStyle:"glow",decorations:[{type:"glow"}],interactions:[{type:"click",action:"navigate"},{type:"pinch",action:"custom"}],transition:"morph",is3D:!0,cameraPosition:{x:0,y:0,z:10},physicsEnabled:!0},calendar:{id:"calendar",name:"Calendar",description:"Time-based event visualization",icon:"ðŸ“…",gradient:"from-amber-500 to-orange-500",metaphor:"timeline",container:"panel",arrangement:"grid",entityShape:"square",connectionStyle:"line",decorations:[{type:"badge"}],interactions:[{type:"click",action:"edit"},{type:"drag",action:"custom"}],transition:"slide",filter:{entityTypes:["Event"]},sort:{field:"createdAt",direction:"asc"},columns:7,gap:8,itemSize:"sm"},grid:{id:"grid",name:"Grid",description:"Gallery-style entity browser",icon:"ðŸ–¼ï¸",gradient:"from-cyan-500 to-teal-500",metaphor:"mosaic",container:"frame",arrangement:"grid",entityShape:"square",connectionStyle:"none",decorations:[{type:"shadow"},{type:"label"}],interactions:[{type:"click",action:"navigate"},{type:"hover",action:"preview"}],transition:"scale",columns:4,gap:16,itemSize:"md"},table:{id:"table",name:"Table",description:"Spreadsheet-like data view",icon:"ðŸ“Š",gradient:"from-slate-500 to-zinc-500",metaphor:"ledger",container:"panel",arrangement:"list",entityShape:"square",connectionStyle:"none",decorations:[{type:"border"}],interactions:[{type:"click",action:"edit"},{type:"hover",action:"preview"}],transition:"fade",sort:{field:"name",direction:"asc"},gap:0,itemSize:"sm"},ipod:{id:"ipod",name:"iPod",description:"Music-centric navigation",icon:"ðŸŽµ",gradient:"from-indigo-500 to-blue-500",metaphor:"vinyl",container:"card",arrangement:"flow",entityShape:"square",connectionStyle:"none",decorations:[{type:"shadow"}],interactions:[{type:"click",action:"navigate"},{type:"longpress",action:"reveal"}],transition:"slide",filter:{entityTypes:["Track"]},itemSize:"lg",gap:24},"quest-log":{id:"quest-log",name:"Quest Log",description:"Gamified task progression",icon:"âš”ï¸",gradient:"from-red-500 to-orange-500",metaphor:"dungeon",container:"panel",arrangement:"tree",entityShape:"hexagon",connectionStyle:"arrow",decorations:[{type:"badge"},{type:"glow",condition:"importance > 0.7"}],interactions:[{type:"click",action:"navigate"},{type:"longpress",action:"reveal"}],transition:"morph",filter:{entityTypes:["Ticket","Epic"]}},"skill-tree":{id:"skill-tree",name:"Skill Tree",description:"Interconnected skill progression",icon:"ðŸŒ³",gradient:"from-emerald-500 to-teal-500",metaphor:"tree",container:"frame",arrangement:"tree",entityShape:"circle",connectionStyle:"curve",decorations:[{type:"glow"},{type:"badge"}],interactions:[{type:"click",action:"navigate"},{type:"hover",action:"preview"}],transition:"morph",filter:{entityTypes:["Skill"]}},"agent-tasks":{id:"agent-tasks",name:"Agent Tasks",description:"Monitor background tasks, code iterations, and specialist delegations",icon:"ðŸ¤–",gradient:"from-sky-500 to-blue-500",metaphor:"console",container:"panel",arrangement:"list",entityShape:"square",connectionStyle:"none",decorations:[{type:"badge"},{type:"border"}],interactions:[{type:"click",action:"navigate"},{type:"hover",action:"preview"}],transition:"slide",filter:{entityTypes:["AgentTask"]},sort:{field:"createdAt",direction:"desc"},itemSize:"md",gap:12}};function ea({params:e}){let{dimensionId:c}=(0,i.use)(e),d=(0,r.useRouter)(),{navigateTo:m}=(0,z.useDimensionNavigation)(),{touchHandlers:h}=(0,z.useSwipeNavigation)(),[p,u]=(0,i.useState)(),[y,x]=(0,i.useState)(!0),[g,f]=(0,i.useState)(!1),v=(0,i.useRef)(null);(0,i.useEffect)(()=>{null!==v.current&&v.current!==c&&(x(!0),f(!1)),v.current=c},[c]);let b=(0,i.useCallback)(()=>{x(!1),f(!0)},[]),j=c in en,k=j?en[c]:null,w=(0,i.useMemo)(()=>{if(k?.filter?.entityTypes)return k.filter.entityTypes},[k]),N=(0,o.useQuery)(s.api.erv.getDimension,j?"skip":{dimensionId:c}),I=(0,i.useMemo)(()=>{if(k)return k;if(N)try{let e=JSON.parse(N.config);return{id:N.dimensionId,name:N.name,description:N.description,icon:N.icon,gradient:N.gradient,metaphor:N.metaphor,...e}}catch{}return null},[k,N]),M=(0,o.useQuery)(s.api.erv.listEntities,{entityTypes:w,limit:100}),S=(0,i.useMemo)(()=>M?.entities?M.entities.map(e=>e.entityId):[],[M?.entities]),E=(0,o.useQuery)(s.api.erv.getRelationshipsForEntities,S.length>0?{entityIds:S}:"skip"),C=(0,i.useMemo)(()=>M?.entities?M.entities.map(e=>({_id:e._id,entityId:e.entityId,entityType:e.entityType,name:e.name,data:e.data,tags:e.tags,searchText:e.searchText,thumbnail:e.thumbnail,ownerId:e.ownerId,createdAt:e.createdAt,updatedAt:e.updatedAt,importance:e.importance})):[],[M?.entities]),T=(0,i.useMemo)(()=>E?E.map(e=>({_id:e._id,sourceEntityId:e.sourceEntityId,targetEntityId:e.targetEntityId,relationshipType:e.relationshipType,bidirectional:e.bidirectional,weight:e.weight,createdAt:e.createdAt,createdBy:e.createdBy})):[],[E]),$=void 0===M,A=(0,i.useMemo)(()=>{if(!j&&null===N&&!$)return`Dimension "${c}" not found`},[j,N,c,$]);(0,i.useEffect)(()=>{I&&m(I.id,I.name)},[I,m]);let P=(0,i.useCallback)(()=>{d.push("/")},[d]),L=(0,i.useCallback)(e=>{u(e.entityId)},[]),D=(0,i.useCallback)(e=>{console.log("Long press on:",e.name)},[]),B=(0,i.useCallback)(e=>{console.log("Connection clicked:",e)},[]);if(!I&&!$&&!A)return null;let q=I?{id:I.id,name:I.name,gradient:I.gradient,metaphor:I.metaphor}:void 0;return(0,t.jsxs)(ei.PageTransitionWrapper,{children:[(0,t.jsx)(a.AnimatePresence,{children:y&&q&&(0,t.jsx)(et,{isTransitioning:y,targetDimension:q,onTransitionComplete:b,duration:1200,intensity:.8})}),(0,t.jsxs)(n.motion.div,{className:(0,l.cn)("min-h-screen flex flex-col","bg-[hsl(var(--theme-background))]"),initial:{opacity:0},animate:{opacity:g||!y?1:0},transition:{duration:.3,delay:.2*!y},...h,children:[(0,t.jsx)(K.DimensionHeader,{config:I||void 0,onHomeClick:P,showAIContext:!0}),(0,t.jsx)("main",{className:"flex-1 overflow-hidden",children:(0,t.jsx)(H,{config:I||{id:c,name:c,container:"frame",arrangement:"grid",entityShape:"square",connectionStyle:"none",decorations:[],interactions:[],transition:"fade"},entities:C,relationships:T,selectedEntityId:p,loading:$,error:A,onEntityClick:L,onEntityLongPress:D,onConnectionClick:B,className:"h-full"})}),I&&!$&&!A&&(0,t.jsxs)(n.motion.footer,{className:(0,l.cn)("flex items-center justify-between","px-4 py-3","bg-[hsl(var(--theme-card)/0.8)]","backdrop-blur-lg","border-t border-[hsl(var(--theme-border)/0.5)]"),initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.3},children:[(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsx)("span",{className:"text-2xl",children:I.icon}),(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-sm font-medium text-[hsl(var(--theme-foreground))]",children:I.name}),(0,t.jsxs)("p",{className:"text-xs text-[hsl(var(--theme-muted-foreground))]",children:[C.length," entities â€¢ ",T.length," connections"]})]})]}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[I.metaphor&&(0,t.jsxs)("span",{className:(0,l.cn)("px-2 py-1 rounded-full text-xs","bg-[hsl(var(--theme-primary)/0.1)]","text-[hsl(var(--theme-primary))]"),children:["âœ¨ ",I.metaphor]}),(0,t.jsx)("span",{className:(0,l.cn)("px-2 py-1 rounded-full text-xs","bg-[hsl(var(--theme-muted))]","text-[hsl(var(--theme-muted-foreground))]"),children:I.arrangement})]})]})]})]})}e.s(["default",()=>ea],338328)}]);