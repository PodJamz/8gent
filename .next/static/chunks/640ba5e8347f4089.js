(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,191089,e=>{"use strict";var t=e.i(726151),r=e.i(923041);let n={dimensionId:"home",label:"Home",timestamp:Date.now()},i={current:n,history:[],forward:[]},o=(0,r.createContext)(null);function u({children:e,initialDimension:u,initialProjectId:a}){let[l,s]=(0,r.useState)(()=>({...i,current:u?{dimensionId:u,label:u,timestamp:Date.now()}:n,projectId:a})),c=(0,r.useRef)(new Set),h=(0,r.useCallback)(e=>{c.current.forEach(t=>t(e))},[]),d=(0,r.useCallback)((e,t,r)=>{let n={dimensionId:e,label:t,filter:r,timestamp:Date.now()};s(e=>({...e,history:[...e.history,e.current],current:n,forward:[]})),h(n)},[h]),f=(0,r.useCallback)(()=>{let e=!1;return s(t=>{if(0===t.history.length)return t;let r=[...t.history],n=r.pop();return e=!0,setTimeout(()=>h(n),0),{...t,history:r,current:n,forward:[t.current,...t.forward]}}),e},[h]),m=(0,r.useCallback)(()=>{let e=!1;return s(t=>{if(0===t.forward.length)return t;let r=[...t.forward],n=r.shift();return e=!0,setTimeout(()=>h(n),0),{...t,history:[...t.history,t.current],current:n,forward:r}}),e},[h]),p=(0,r.useCallback)((e,t)=>{s(r=>({...r,projectId:e,projectName:t}))},[]),g=(0,r.useCallback)(()=>{let e=[];return e.push(`Currently viewing: ${l.current.label} (${l.current.dimensionId})`),l.projectName&&e.push(`Active project: ${l.projectName}`),l.current.filter&&(l.current.filter.entityTypes?.length&&e.push(`Filtered to: ${l.current.filter.entityTypes.join(", ")}`),l.current.filter.tags?.length&&e.push(`Tags: ${l.current.filter.tags.join(", ")}`)),l.history.length>0&&e.push(`Navigation depth: ${l.history.length} steps from home`),e.join(". ")},[l]),b=(0,r.useCallback)(e=>(c.current.add(e),()=>{c.current.delete(e)}),[]),y=l.history.length>0,C=l.forward.length>0;return(0,t.jsx)(o.Provider,{value:{state:l,navigateTo:d,goBack:f,goForward:m,canGoBack:y,canGoForward:C,setProject:p,getAIContext:g,onNavigate:b},children:e})}function a(){let e=(0,r.useContext)(o);if(!e)throw Error("useDimensionNavigation must be used within DimensionNavigationProvider");return e}function l(e={}){let{threshold:t=50,enabled:n=!0,onSwipeLeft:i,onSwipeRight:o}=e,{goBack:u,goForward:s,canGoBack:c,canGoForward:h}=a(),d=(0,r.useRef)(null);return{touchHandlers:{onTouchStart:(0,r.useCallback)(e=>{if(!n)return;let t=e.touches[0];d.current={x:t.clientX,y:t.clientY}},[n]),onTouchEnd:(0,r.useCallback)(e=>{if(!n||!d.current)return;let r=e.changedTouches[0],a=r.clientX-d.current.x;Math.abs(a)>Math.abs(r.clientY-d.current.y)&&Math.abs(a)>t&&(a>0&&c?(u(),o?.()):a<0&&h&&(s(),i?.())),d.current=null},[n,t,c,h,u,s,i,o])}}}function s(e){let{state:t,getAIContext:n,onNavigate:i}=a();return(0,r.useEffect)(()=>{if(e)return i(t=>{setTimeout(()=>{e(n(),t)},10)})},[i,n,e]),{currentContext:n(),currentLocation:t.current,projectContext:t.projectName?`Project: ${t.projectName}`:void 0}}e.s(["DimensionNavigationProvider",()=>u,"default",0,o,"useAINavigationContext",()=>s,"useDimensionNavigation",()=>a,"useSwipeNavigation",()=>l])}]);