{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///Users/jamesspalding/OpenClaw-OS/src/components/ios/AppIcon.tsx"],"sourcesContent":["'use client';\n\nimport { useRef, useCallback } from 'react';\nimport { motion } from 'framer-motion';\nimport Link from 'next/link';\nimport { useRouter } from 'next/navigation';\n\ninterface AppIconProps {\n  name: string;\n  href?: string;\n  icon?: React.ReactNode;\n  imageUrl?: string;\n  gradient: string;\n  delay?: number;\n  external?: boolean;\n  onClick?: () => void;\n}\n\n// Store transition origin for page animations\nexport const APP_TRANSITION_KEY = 'openclaw_appTransition';\n\nexport function AppIcon({ name, href, icon, imageUrl, gradient, delay = 0, external, onClick }: AppIconProps) {\n  const iconRef = useRef<HTMLDivElement>(null);\n  const router = useRouter();\n\n  const handleClick = useCallback((e: React.MouseEvent) => {\n    e.preventDefault();\n\n    // Custom onClick handler (e.g., for Claw AI chat)\n    if (onClick) {\n      onClick();\n      return;\n    }\n\n    // External links open in new tab\n    if (external && href) {\n      window.open(href, '_blank', 'noopener,noreferrer');\n      return;\n    }\n\n    // Internal navigation with transition\n    if (href) {\n      if (iconRef.current) {\n        const rect = iconRef.current.getBoundingClientRect();\n        const transitionData = {\n          x: rect.left + rect.width / 2,\n          y: rect.top + rect.height / 2,\n          width: rect.width,\n          height: rect.height,\n          gradient,\n          timestamp: Date.now(),\n        };\n        sessionStorage.setItem(APP_TRANSITION_KEY, JSON.stringify(transitionData));\n      }\n      router.push(href);\n    }\n  }, [href, gradient, router, external, onClick]);\n\n  return (\n    <motion.div\n      initial={{ opacity: 0, scale: 0.5, y: 20 }}\n      animate={{ opacity: 1, scale: 1, y: 0 }}\n      transition={{\n        delay,\n        type: 'spring',\n        stiffness: 300,\n        damping: 20,\n      }}\n      whileHover={{ scale: 1.05 }}\n      whileTap={{ scale: 0.95 }}\n      className=\"flex flex-col items-center gap-2\"\n    >\n      <div\n        ref={iconRef}\n        onClick={handleClick}\n        className=\"block cursor-pointer\"\n      >\n        <div\n          className=\"w-16 h-16 sm:w-[72px] sm:h-[72px] rounded-[18px] sm:rounded-[20px] flex items-center justify-center shadow-lg relative overflow-hidden\"\n          style={{ background: imageUrl ? 'transparent' : gradient }}\n        >\n          {imageUrl ? (\n            /* Custom image icon */\n            <img\n              src={imageUrl}\n              alt={name}\n              className=\"w-full h-full object-cover\"\n            />\n          ) : (\n            <>\n              {/* Glass overlay */}\n              <div className=\"absolute inset-0 bg-gradient-to-br from-white/25 via-transparent to-transparent\" />\n              <div className=\"absolute inset-0 bg-gradient-to-t from-black/10 to-transparent\" />\n\n              {/* Icon */}\n              <div className=\"relative z-10 text-white\">\n                {icon}\n              </div>\n            </>\n          )}\n        </div>\n      </div>\n      <span className=\"text-white/90 text-xs font-medium text-center max-w-[72px] truncate\">\n        {name}\n      </span>\n    </motion.div>\n  );\n}\n\n// Custom SVG Icons with iOS-style aesthetics\nexport const AppIcons = {\n  // Story icon - open book\n  Story: () => (\n    <svg width=\"32\" height=\"32\" viewBox=\"0 0 32 32\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\n      <path\n        d=\"M6 8C6 6.89543 6.89543 6 8 6H14C15.1046 6 16 6.89543 16 8V26C16 26 14 24 10 24C6 24 6 26 6 26V8Z\"\n        fill=\"white\"\n        fillOpacity=\"0.9\"\n      />\n      <path\n        d=\"M26 8C26 6.89543 25.1046 6 24 6H18C16.8954 6 16 6.89543 16 8V26C16 26 18 24 22 24C26 24 26 26 26 26V8Z\"\n        fill=\"white\"\n        fillOpacity=\"0.7\"\n      />\n      <path d=\"M9 11H13M9 15H13M9 19H11\" stroke=\"currentColor\" strokeOpacity=\"0.3\" strokeWidth=\"1.5\" strokeLinecap=\"round\" />\n      <path d=\"M19 11H23M19 15H23M21 19H23\" stroke=\"currentColor\" strokeOpacity=\"0.3\" strokeWidth=\"1.5\" strokeLinecap=\"round\" />\n    </svg>\n  ),\n\n  // Design icon - palette/brush\n  Design: () => (\n    <svg width=\"32\" height=\"32\" viewBox=\"0 0 32 32\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\n      <circle cx=\"16\" cy=\"16\" r=\"11\" fill=\"white\" fillOpacity=\"0.9\" />\n      <circle cx=\"12\" cy=\"11\" r=\"2.5\" fill=\"#FF6B6B\" />\n      <circle cx=\"20\" cy=\"11\" r=\"2.5\" fill=\"#4ECDC4\" />\n      <circle cx=\"11\" cy=\"18\" r=\"2.5\" fill=\"#45B7D1\" />\n      <circle cx=\"19\" cy=\"19\" r=\"2.5\" fill=\"#96CEB4\" />\n      <circle cx=\"16\" cy=\"16\" r=\"3\" fill=\"white\" />\n    </svg>\n  ),\n\n  // Resume icon - document with person\n  Resume: () => (\n    <svg width=\"32\" height=\"32\" viewBox=\"0 0 32 32\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\n      <rect x=\"7\" y=\"4\" width=\"18\" height=\"24\" rx=\"2\" fill=\"white\" fillOpacity=\"0.9\" />\n      <circle cx=\"16\" cy=\"12\" r=\"4\" fill=\"currentColor\" fillOpacity=\"0.2\" />\n      <path\n        d=\"M10 24C10 20.6863 12.6863 18 16 18C19.3137 18 22 20.6863 22 24\"\n        stroke=\"currentColor\"\n        strokeOpacity=\"0.2\"\n        strokeWidth=\"2\"\n        strokeLinecap=\"round\"\n      />\n    </svg>\n  ),\n\n  // Music icon - note with waves\n  Music: () => (\n    <svg width=\"32\" height=\"32\" viewBox=\"0 0 32 32\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\n      <circle cx=\"11\" cy=\"22\" r=\"4\" fill=\"white\" fillOpacity=\"0.9\" />\n      <circle cx=\"23\" cy=\"19\" r=\"4\" fill=\"white\" fillOpacity=\"0.7\" />\n      <path d=\"M15 22V8L27 5V19\" stroke=\"white\" strokeWidth=\"3\" strokeLinecap=\"round\" strokeLinejoin=\"round\" />\n      <path d=\"M5 12C7 10 9 10 11 12\" stroke=\"white\" strokeOpacity=\"0.5\" strokeWidth=\"1.5\" strokeLinecap=\"round\" />\n      <path d=\"M3 16C6 13 8 13 11 16\" stroke=\"white\" strokeOpacity=\"0.3\" strokeWidth=\"1.5\" strokeLinecap=\"round\" />\n    </svg>\n  ),\n\n  // Jamz Studio icon - DAW waveform with mixing board aesthetic\n  Jamz: () => (\n    <svg width=\"32\" height=\"32\" viewBox=\"0 0 32 32\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\n      {/* Main waveform bars */}\n      <rect x=\"4\" y=\"14\" width=\"3\" height=\"8\" rx=\"1.5\" fill=\"white\" fillOpacity=\"0.9\" />\n      <rect x=\"9\" y=\"10\" width=\"3\" height=\"16\" rx=\"1.5\" fill=\"white\" fillOpacity=\"0.85\" />\n      <rect x=\"14\" y=\"6\" width=\"3\" height=\"24\" rx=\"1.5\" fill=\"white\" fillOpacity=\"0.95\" />\n      <rect x=\"19\" y=\"11\" width=\"3\" height=\"14\" rx=\"1.5\" fill=\"white\" fillOpacity=\"0.8\" />\n      <rect x=\"24\" y=\"13\" width=\"3\" height=\"10\" rx=\"1.5\" fill=\"white\" fillOpacity=\"0.9\" />\n      {/* Mixing knob accents */}\n      <circle cx=\"7\" cy=\"26\" r=\"2\" fill=\"white\" fillOpacity=\"0.6\" />\n      <circle cx=\"16\" cy=\"26\" r=\"2\" fill=\"white\" fillOpacity=\"0.6\" />\n      <circle cx=\"25\" cy=\"26\" r=\"2\" fill=\"white\" fillOpacity=\"0.6\" />\n      {/* Top accent line */}\n      <path d=\"M4 4H28\" stroke=\"white\" strokeOpacity=\"0.4\" strokeWidth=\"1.5\" strokeLinecap=\"round\" />\n    </svg>\n  ),\n\n  // Vault icon - lock with shield\n  Vault: () => (\n    <svg width=\"32\" height=\"32\" viewBox=\"0 0 32 32\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\n      <path\n        d=\"M16 4L6 8V14C6 21.732 10.268 27.268 16 28C21.732 27.268 26 21.732 26 14V8L16 4Z\"\n        fill=\"white\"\n        fillOpacity=\"0.9\"\n      />\n      <rect x=\"12\" y=\"14\" width=\"8\" height=\"8\" rx=\"1\" fill=\"currentColor\" fillOpacity=\"0.25\" />\n      <path d=\"M14 14V12C14 10.8954 14.8954 10 16 10C17.1046 10 18 10.8954 18 12V14\" stroke=\"currentColor\" strokeOpacity=\"0.3\" strokeWidth=\"2\" strokeLinecap=\"round\" />\n      <circle cx=\"16\" cy=\"18\" r=\"1\" fill=\"currentColor\" fillOpacity=\"0.4\" />\n    </svg>\n  ),\n\n  // Blog icon - pencil with lines\n  Blog: () => (\n    <svg width=\"32\" height=\"32\" viewBox=\"0 0 32 32\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\n      <rect x=\"6\" y=\"6\" width=\"20\" height=\"20\" rx=\"3\" fill=\"white\" fillOpacity=\"0.9\" />\n      <path d=\"M10 12H22\" stroke=\"currentColor\" strokeOpacity=\"0.2\" strokeWidth=\"2\" strokeLinecap=\"round\" />\n      <path d=\"M10 16H22\" stroke=\"currentColor\" strokeOpacity=\"0.2\" strokeWidth=\"2\" strokeLinecap=\"round\" />\n      <path d=\"M10 20H17\" stroke=\"currentColor\" strokeOpacity=\"0.2\" strokeWidth=\"2\" strokeLinecap=\"round\" />\n      <path\n        d=\"M20 17L24 13L27 16L23 20L20 21L20 17Z\"\n        fill=\"#FFB347\"\n        stroke=\"#FFB347\"\n        strokeWidth=\"0.5\"\n      />\n    </svg>\n  ),\n\n  // Lab icon - beaker with bubbles\n  Lab: () => (\n    <svg width=\"32\" height=\"32\" viewBox=\"0 0 32 32\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\n      <path\n        d=\"M12 6H20V12L26 26H6L12 12V6Z\"\n        fill=\"white\"\n        fillOpacity=\"0.9\"\n      />\n      <path d=\"M12 6H20\" stroke=\"white\" strokeWidth=\"2\" strokeLinecap=\"round\" />\n      <path\n        d=\"M9 20H23L26 26H6L9 20Z\"\n        fill=\"#A78BFA\"\n        fillOpacity=\"0.5\"\n      />\n      <circle cx=\"12\" cy=\"22\" r=\"1.5\" fill=\"white\" fillOpacity=\"0.8\" />\n      <circle cx=\"16\" cy=\"23\" r=\"1\" fill=\"white\" fillOpacity=\"0.6\" />\n      <circle cx=\"19\" cy=\"21\" r=\"1.5\" fill=\"white\" fillOpacity=\"0.7\" />\n    </svg>\n  ),\n\n  // Settings icon - gear\n  Settings: () => (\n    <svg width=\"32\" height=\"32\" viewBox=\"0 0 32 32\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\n      <path\n        fillRule=\"evenodd\"\n        clipRule=\"evenodd\"\n        d=\"M16 6L18.5 8.5L22 8L24 12L22 14.5V17.5L24 20L22 24L18.5 23.5L16 26L13.5 23.5L10 24L8 20L10 17.5V14.5L8 12L10 8L13.5 8.5L16 6Z\"\n        fill=\"white\"\n        fillOpacity=\"0.9\"\n      />\n      <circle cx=\"16\" cy=\"16\" r=\"4\" fill=\"currentColor\" fillOpacity=\"0.2\" />\n    </svg>\n  ),\n\n  // Humans icon - people silhouettes for people search\n  Humans: () => (\n    <svg width=\"32\" height=\"32\" viewBox=\"0 0 32 32\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\n      {/* Main person in center */}\n      <circle cx=\"16\" cy=\"10\" r=\"4\" fill=\"white\" fillOpacity=\"0.95\" />\n      <path\n        d=\"M10 24C10 20.134 12.686 17 16 17C19.314 17 22 20.134 22 24\"\n        stroke=\"white\"\n        strokeOpacity=\"0.95\"\n        strokeWidth=\"3\"\n        strokeLinecap=\"round\"\n      />\n      {/* Person on left */}\n      <circle cx=\"7\" cy=\"12\" r=\"2.5\" fill=\"white\" fillOpacity=\"0.6\" />\n      <path\n        d=\"M3 22C3 19.5 4.8 17.5 7 17.5C9.2 17.5 11 19.5 11 22\"\n        stroke=\"white\"\n        strokeOpacity=\"0.5\"\n        strokeWidth=\"2\"\n        strokeLinecap=\"round\"\n      />\n      {/* Person on right */}\n      <circle cx=\"25\" cy=\"12\" r=\"2.5\" fill=\"white\" fillOpacity=\"0.6\" />\n      <path\n        d=\"M21 22C21 19.5 22.8 17.5 25 17.5C27.2 17.5 29 19.5 29 22\"\n        stroke=\"white\"\n        strokeOpacity=\"0.5\"\n        strokeWidth=\"2\"\n        strokeLinecap=\"round\"\n      />\n      {/* Search magnifier accent */}\n      <circle cx=\"24\" cy=\"8\" r=\"3\" stroke=\"white\" strokeOpacity=\"0.8\" strokeWidth=\"1.5\" fill=\"none\" />\n      <path d=\"M26.5 10.5L28.5 12.5\" stroke=\"white\" strokeOpacity=\"0.8\" strokeWidth=\"1.5\" strokeLinecap=\"round\" />\n    </svg>\n  ),\n\n  // Canvas icon - infinite canvas with shapes and grid\n  Canvas: () => (\n    <svg width=\"32\" height=\"32\" viewBox=\"0 0 32 32\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\n      {/* Grid background suggesting infinite canvas */}\n      <rect x=\"4\" y=\"4\" width=\"24\" height=\"24\" rx=\"3\" fill=\"white\" fillOpacity=\"0.15\" />\n      {/* Grid lines */}\n      <path d=\"M10 4V28M16 4V28M22 4V28\" stroke=\"white\" strokeOpacity=\"0.2\" strokeWidth=\"0.5\" />\n      <path d=\"M4 10H28M4 16H28M4 22H28\" stroke=\"white\" strokeOpacity=\"0.2\" strokeWidth=\"0.5\" />\n      {/* Creative shapes on canvas */}\n      <rect x=\"7\" y=\"7\" width=\"6\" height=\"6\" rx=\"1\" fill=\"white\" fillOpacity=\"0.9\" />\n      <circle cx=\"22\" cy=\"10\" r=\"4\" fill=\"white\" fillOpacity=\"0.8\" />\n      <path d=\"M8 19L12 25H4L8 19Z\" fill=\"white\" fillOpacity=\"0.85\" />\n      {/* Connection line suggesting flow */}\n      <path d=\"M13 10H18\" stroke=\"white\" strokeOpacity=\"0.6\" strokeWidth=\"1.5\" strokeLinecap=\"round\" strokeDasharray=\"2 2\" />\n      <path d=\"M12 22L18 15\" stroke=\"white\" strokeOpacity=\"0.6\" strokeWidth=\"1.5\" strokeLinecap=\"round\" strokeDasharray=\"2 2\" />\n      {/* Sticky note / text block */}\n      <rect x=\"17\" y=\"17\" width=\"9\" height=\"7\" rx=\"1\" fill=\"white\" fillOpacity=\"0.9\" />\n      <path d=\"M19 20H24M19 23H22\" stroke=\"currentColor\" strokeOpacity=\"0.25\" strokeWidth=\"1\" strokeLinecap=\"round\" />\n      {/* Pencil cursor accent */}\n      <path d=\"M25 5L27 7L24 10L22 8L25 5Z\" fill=\"#FFB347\" />\n    </svg>\n  ),\n};\n\n// Gradient presets for icons - uses theme variables where appropriate\nexport const AppGradients = {\n  story: 'linear-gradient(135deg, #667eea 0%, #764ba2 100%)',\n  design: 'linear-gradient(135deg, #f093fb 0%, #f5576c 100%)',\n  resume: 'linear-gradient(135deg, #4facfe 0%, #00f2fe 100%)',\n  music: 'linear-gradient(135deg, #fa709a 0%, #fee140 100%)',\n  // Jamz uses theme gradient for consistency\n  jamz: 'linear-gradient(135deg, hsl(var(--theme-primary, 262 83% 58%)) 0%, hsl(var(--theme-accent, 187 94% 43%)) 100%)',\n  vault: 'linear-gradient(135deg, #30cfd0 0%, #330867 100%)',\n  blog: 'linear-gradient(135deg, #a8edea 0%, #fed6e3 100%)',\n  lab: 'linear-gradient(135deg, #5ee7df 0%, #b490ca 100%)',\n  // Settings uses theme gradient\n  settings: 'linear-gradient(135deg, hsl(var(--theme-primary, 262 83% 58%)) 0%, hsl(var(--theme-accent, 187 94% 43%)) 100%)',\n  claude: 'linear-gradient(135deg, #D97757 0%, #B8523A 100%)',\n  chatgpt: 'linear-gradient(135deg, #74AA9C 0%, #5A9086 100%)',\n  humans: 'linear-gradient(135deg, #38bdf8 0%, #818cf8 100%)',\n  // Canvas - purple to cyan for creative/infinite feel\n  canvas: 'linear-gradient(135deg, #8b5cf6 0%, #06b6d4 100%)',\n};\n\n// Custom image URLs for app icons\nexport const AppImages = {\n  story: '/storyapp.svg',\n  design: '/designapp.svg',\n  resume: '/resumeapp.svg',\n  music: '/musicapp.svg',\n  vault: '/vaultapp.svg',\n  blog: '/blogapp.svg',\n  claude: '/claudeapp.svg',\n  chatgpt: '/chatgptapp.svg',\n};\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 1055, "column": 0}, "map": {"version":3,"sources":["file:///Users/jamesspalding/OpenClaw-OS/src/components/ios/PageTransition.tsx"],"sourcesContent":["'use client';\n\nimport { useState, useEffect, ReactNode, useMemo } from 'react';\nimport { motion, AnimatePresence } from 'framer-motion';\nimport { APP_TRANSITION_KEY } from './AppIcon';\nimport { springs, motionConfig } from '@/components/motion/config';\n\ninterface PageTransitionProps {\n  children: ReactNode;\n}\n\ninterface TransitionData {\n  x: number;\n  y: number;\n  width: number;\n  height: number;\n  gradient: string;\n  timestamp: number;\n}\n\nexport function PageTransition({ children }: PageTransitionProps) {\n  const [transitionData, setTransitionData] = useState<TransitionData | null>(null);\n  const [showContent, setShowContent] = useState(false);\n  const [isHydrated, setIsHydrated] = useState(false);\n  // Store window dimensions safely in state to avoid SSR issues\n  const [windowDimensions, setWindowDimensions] = useState({ width: 1920, height: 1080 });\n\n  useEffect(() => {\n    // Safely capture window dimensions on client\n    setWindowDimensions({\n      width: window.innerWidth,\n      height: window.innerHeight,\n    });\n\n    // Check for stored transition data\n    const stored = sessionStorage.getItem(APP_TRANSITION_KEY);\n    if (stored) {\n      try {\n        const data = JSON.parse(stored) as TransitionData;\n        // Only use if recent (within last 2 seconds)\n        if (Date.now() - data.timestamp < 2000) {\n          setTransitionData(data);\n          // Clear it so it doesn't replay on refresh\n          sessionStorage.removeItem(APP_TRANSITION_KEY);\n        }\n      } catch (e) {\n        // Invalid data, ignore\n      }\n    }\n    setIsHydrated(true);\n\n    // Show content after a brief delay for animation\n    const timer = setTimeout(() => {\n      setShowContent(true);\n    }, 50);\n\n    return () => clearTimeout(timer);\n  }, []);\n\n  // Compute animation scale safely using state values\n  const animationScale = useMemo(() => {\n    if (!transitionData || transitionData.width === 0) return 50;\n    return Math.max(windowDimensions.width, windowDimensions.height) / transitionData.width * 2.5;\n  }, [transitionData, windowDimensions]);\n\n  if (!isHydrated) {\n    return null;\n  }\n\n  // If we have transition data, animate from the icon position\n  if (transitionData) {\n    return (\n      <>\n        {/* Expanding circle animation */}\n        <motion.div\n          className=\"fixed inset-0 z-50 pointer-events-none\"\n          initial={{ opacity: 1 }}\n          animate={{ opacity: 0 }}\n          transition={{ duration: motionConfig.duration.normal, delay: 0.3 }}\n        >\n          <motion.div\n            className=\"absolute rounded-[20px]\"\n            style={{\n              background: transitionData.gradient,\n              left: transitionData.x - transitionData.width / 2,\n              top: transitionData.y - transitionData.height / 2,\n              width: transitionData.width,\n              height: transitionData.height,\n            }}\n            initial={{\n              scale: 1,\n              borderRadius: '20px',\n            }}\n            animate={{\n              scale: animationScale,\n              borderRadius: '0px',\n            }}\n            transition={{\n              duration: motionConfig.duration.slow,\n              ease: motionConfig.ease.smooth,\n            }}\n          />\n        </motion.div>\n\n        {/* Page content */}\n        <motion.div\n          initial={{ opacity: 0, scale: 0.95 }}\n          animate={{ opacity: 1, scale: 1 }}\n          transition={{\n            ...springs.smooth,\n            delay: 0.15,\n          }}\n        >\n          {children}\n        </motion.div>\n      </>\n    );\n  }\n\n  // No transition data, just fade in\n  return (\n    <motion.div\n      initial={{ opacity: 0, y: 20 }}\n      animate={{ opacity: 1, y: 0 }}\n      transition={springs.smooth}\n    >\n      {children}\n    </motion.div>\n  );\n}\n"],"names":[],"mappings":";;;;;AAEA;AACA;AACA;AACA;;;AALA;;;;;AAoBO,SAAS,eAAe,EAAE,QAAQ,EAAuB;;IAC9D,MAAM,CAAC,gBAAgB,kBAAkB,GAAG,IAAA,kXAAQ,EAAwB;IAC5E,MAAM,CAAC,aAAa,eAAe,GAAG,IAAA,kXAAQ,EAAC;IAC/C,MAAM,CAAC,YAAY,cAAc,GAAG,IAAA,kXAAQ,EAAC;IAC7C,8DAA8D;IAC9D,MAAM,CAAC,kBAAkB,oBAAoB,GAAG,IAAA,kXAAQ,EAAC;QAAE,OAAO;QAAM,QAAQ;IAAK;IAErF,IAAA,mXAAS;oCAAC;YACR,6CAA6C;YAC7C,oBAAoB;gBAClB,OAAO,OAAO,UAAU;gBACxB,QAAQ,OAAO,WAAW;YAC5B;YAEA,mCAAmC;YACnC,MAAM,SAAS,eAAe,OAAO,CAAC,6JAAkB;YACxD,IAAI,QAAQ;gBACV,IAAI;oBACF,MAAM,OAAO,KAAK,KAAK,CAAC;oBACxB,6CAA6C;oBAC7C,IAAI,KAAK,GAAG,KAAK,KAAK,SAAS,GAAG,MAAM;wBACtC,kBAAkB;wBAClB,2CAA2C;wBAC3C,eAAe,UAAU,CAAC,6JAAkB;oBAC9C;gBACF,EAAE,OAAO,GAAG;gBACV,uBAAuB;gBACzB;YACF;YACA,cAAc;YAEd,iDAAiD;YACjD,MAAM,QAAQ;kDAAW;oBACvB,eAAe;gBACjB;iDAAG;YAEH;4CAAO,IAAM,aAAa;;QAC5B;mCAAG,EAAE;IAEL,oDAAoD;IACpD,MAAM,iBAAiB,IAAA,iXAAO;kDAAC;YAC7B,IAAI,CAAC,kBAAkB,eAAe,KAAK,KAAK,GAAG,OAAO;YAC1D,OAAO,KAAK,GAAG,CAAC,iBAAiB,KAAK,EAAE,iBAAiB,MAAM,IAAI,eAAe,KAAK,GAAG;QAC5F;iDAAG;QAAC;QAAgB;KAAiB;IAErC,IAAI,CAAC,YAAY;QACf,OAAO;IACT;IAEA,6DAA6D;IAC7D,IAAI,gBAAgB;QAClB,qBACE;;8BAEE,sYAAC,mVAAM,CAAC,GAAG;oBACT,WAAU;oBACV,SAAS;wBAAE,SAAS;oBAAE;oBACtB,SAAS;wBAAE,SAAS;oBAAE;oBACtB,YAAY;wBAAE,UAAU,wJAAY,CAAC,QAAQ,CAAC,MAAM;wBAAE,OAAO;oBAAI;8BAEjE,cAAA,sYAAC,mVAAM,CAAC,GAAG;wBACT,WAAU;wBACV,OAAO;4BACL,YAAY,eAAe,QAAQ;4BACnC,MAAM,eAAe,CAAC,GAAG,eAAe,KAAK,GAAG;4BAChD,KAAK,eAAe,CAAC,GAAG,eAAe,MAAM,GAAG;4BAChD,OAAO,eAAe,KAAK;4BAC3B,QAAQ,eAAe,MAAM;wBAC/B;wBACA,SAAS;4BACP,OAAO;4BACP,cAAc;wBAChB;wBACA,SAAS;4BACP,OAAO;4BACP,cAAc;wBAChB;wBACA,YAAY;4BACV,UAAU,wJAAY,CAAC,QAAQ,CAAC,IAAI;4BACpC,MAAM,wJAAY,CAAC,IAAI,CAAC,MAAM;wBAChC;;;;;;;;;;;8BAKJ,sYAAC,mVAAM,CAAC,GAAG;oBACT,SAAS;wBAAE,SAAS;wBAAG,OAAO;oBAAK;oBACnC,SAAS;wBAAE,SAAS;wBAAG,OAAO;oBAAE;oBAChC,YAAY;wBACV,GAAG,mJAAO,CAAC,MAAM;wBACjB,OAAO;oBACT;8BAEC;;;;;;;;IAIT;IAEA,mCAAmC;IACnC,qBACE,sYAAC,mVAAM,CAAC,GAAG;QACT,SAAS;YAAE,SAAS;YAAG,GAAG;QAAG;QAC7B,SAAS;YAAE,SAAS;YAAG,GAAG;QAAE;QAC5B,YAAY,mJAAO,CAAC,MAAM;kBAEzB;;;;;;AAGP;GA7GgB;KAAA"}},
    {"offset": {"line": 1226, "column": 0}, "map": {"version":3,"sources":["file:///Users/jamesspalding/OpenClaw-OS/src/components/ui/ContextReferenceInput.tsx"],"sourcesContent":["'use client';\n\n/**\n * ContextReferenceInput - Input wrapper with @mention context reference support\n *\n * Wrap any text input or textarea with this component to add @mention support\n * for referencing tickets, PRDs, projects, tasks, etc.\n */\n\nimport React, { useState, useRef, useCallback, forwardRef, useImperativeHandle } from 'react';\nimport { AnimatePresence } from 'framer-motion';\nimport { ContextReferencePicker } from '@/components/design-canvas/ContextReferencePicker';\nimport type { ContextReference, ReferenceType } from '@/lib/canvas/artifacts';\n\ninterface ContextReferenceInputProps {\n  value: string;\n  onChange: (value: string) => void;\n  onKeyDown?: (e: React.KeyboardEvent) => void;\n  onReferenceInserted?: (reference: ContextReference) => void;\n  placeholder?: string;\n  disabled?: boolean;\n  className?: string;\n  multiline?: boolean;\n  rows?: number;\n  autoFocus?: boolean;\n  style?: React.CSSProperties;\n  'aria-label'?: string;\n}\n\nexport interface ContextReferenceInputHandle {\n  focus: () => void;\n  blur: () => void;\n  getValue: () => string;\n}\n\nexport const ContextReferenceInput = forwardRef<ContextReferenceInputHandle, ContextReferenceInputProps>(\n  function ContextReferenceInput(\n    {\n      value,\n      onChange,\n      onKeyDown,\n      onReferenceInserted,\n      placeholder,\n      disabled,\n      className,\n      multiline = false,\n      rows = 1,\n      autoFocus,\n      style,\n      'aria-label': ariaLabel,\n    },\n    ref\n  ) {\n    const inputRef = useRef<HTMLInputElement | HTMLTextAreaElement>(null);\n    const [isPickerOpen, setIsPickerOpen] = useState(false);\n    const [pickerPosition, setPickerPosition] = useState<{ x: number; y: number } | undefined>();\n    const [searchQuery, setSearchQuery] = useState('');\n    const [filterType, setFilterType] = useState<ReferenceType | undefined>();\n    const triggerPositionRef = useRef<number>(0);\n    const cursorPositionRef = useRef<number>(0);\n\n    // Expose methods via ref\n    useImperativeHandle(ref, () => ({\n      focus: () => inputRef.current?.focus(),\n      blur: () => inputRef.current?.blur(),\n      getValue: () => value,\n    }));\n\n    // Handle input change - detect @ trigger\n    const handleChange = useCallback((e: React.ChangeEvent<HTMLInputElement | HTMLTextAreaElement>) => {\n      const input = e.target;\n      const newValue = input.value;\n      const cursorPos = input.selectionStart || 0;\n\n      cursorPositionRef.current = cursorPos;\n      onChange(newValue);\n\n      // Check if we just typed @\n      const charBefore = newValue[cursorPos - 1];\n      const charTwoBefore = newValue[cursorPos - 2];\n\n      if (charBefore === '@' && (!charTwoBefore || /\\s/.test(charTwoBefore))) {\n        // Get position for picker\n        const rect = input.getBoundingClientRect();\n        const position = {\n          x: rect.left + 20,\n          y: rect.bottom + 4,\n        };\n\n        triggerPositionRef.current = cursorPos - 1;\n        setIsPickerOpen(true);\n        setPickerPosition(position);\n        setSearchQuery('');\n        setFilterType(undefined);\n      } else if (isPickerOpen) {\n        // Update search query with text after @\n        const textAfterTrigger = newValue.slice(triggerPositionRef.current + 1, cursorPos);\n\n        // Check for type prefix like @ticket: or @prd:\n        const colonIndex = textAfterTrigger.indexOf(':');\n        if (colonIndex > 0) {\n          const typePrefix = textAfterTrigger.slice(0, colonIndex) as ReferenceType;\n          const validTypes: ReferenceType[] = ['ticket', 'prd', 'project', 'task', 'note', 'canvas', 'memory', 'track', 'file', 'skill', 'dimension', 'tool'];\n          if (validTypes.includes(typePrefix)) {\n            setFilterType(typePrefix);\n            setSearchQuery(textAfterTrigger.slice(colonIndex + 1));\n          } else {\n            setFilterType(undefined);\n            setSearchQuery(textAfterTrigger);\n          }\n        } else {\n          setFilterType(undefined);\n          setSearchQuery(textAfterTrigger);\n        }\n\n        // Close picker if we've moved past the trigger context\n        if (cursorPos <= triggerPositionRef.current || textAfterTrigger.includes(' ')) {\n          setIsPickerOpen(false);\n        }\n      }\n    }, [onChange, isPickerOpen]);\n\n    // Handle reference selection\n    const handleSelect = useCallback((reference: ContextReference) => {\n      const triggerPos = triggerPositionRef.current;\n      const cursorPos = cursorPositionRef.current;\n\n      // Build the reference text\n      const refText = `@${reference.type}:${reference.displayName}`;\n\n      // Replace from trigger position to current cursor position\n      const before = value.slice(0, triggerPos);\n      const after = value.slice(cursorPos);\n      const newValue = `${before}${refText} ${after}`;\n\n      onChange(newValue);\n\n      // Set cursor position after the inserted reference\n      const newCursorPos = triggerPos + refText.length + 1;\n      setTimeout(() => {\n        const input = inputRef.current;\n        if (input) {\n          input.setSelectionRange(newCursorPos, newCursorPos);\n          input.focus();\n        }\n      }, 0);\n\n      // Callback\n      if (onReferenceInserted) {\n        onReferenceInserted(reference);\n      }\n\n      setIsPickerOpen(false);\n    }, [value, onChange, onReferenceInserted]);\n\n    // Handle keyboard\n    const handleKeyDown = useCallback((e: React.KeyboardEvent) => {\n      if (isPickerOpen && e.key === 'Escape') {\n        e.preventDefault();\n        setIsPickerOpen(false);\n        return;\n      }\n\n      // Pass through to parent handler\n      if (onKeyDown) {\n        onKeyDown(e);\n      }\n    }, [isPickerOpen, onKeyDown]);\n\n    // Close picker handler\n    const handleClosePicker = useCallback(() => {\n      setIsPickerOpen(false);\n    }, []);\n\n    const commonProps = {\n      ref: inputRef as any,\n      value,\n      onChange: handleChange,\n      onKeyDown: handleKeyDown,\n      placeholder,\n      disabled,\n      className,\n      autoFocus,\n      style,\n      'aria-label': ariaLabel,\n    };\n\n    return (\n      <div className=\"relative\">\n        {multiline ? (\n          <textarea {...commonProps} rows={rows} />\n        ) : (\n          <input type=\"text\" {...commonProps} />\n        )}\n\n        <AnimatePresence>\n          {isPickerOpen && (\n            <div\n              data-context-picker\n              className=\"fixed z-[100]\"\n              style={{\n                left: pickerPosition?.x || 0,\n                top: pickerPosition?.y || 0,\n              }}\n            >\n              <ContextReferencePicker\n                isOpen={isPickerOpen}\n                onClose={handleClosePicker}\n                onSelect={handleSelect}\n                searchQuery={searchQuery}\n                filterType={filterType}\n              />\n            </div>\n          )}\n        </AnimatePresence>\n      </div>\n    );\n  }\n);\n\nexport default ContextReferenceInput;\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 1470, "column": 0}, "map": {"version":3,"sources":["file:///Users/jamesspalding/OpenClaw-OS/src/components/ui/badge.tsx"],"sourcesContent":["import * as React from \"react\"\nimport { cva, type VariantProps } from \"class-variance-authority\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst badgeVariants = cva(\n  \"inline-flex items-center rounded-md border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2\",\n  {\n    variants: {\n      variant: {\n        default:\n          \"border-transparent bg-primary text-primary-foreground shadow hover:bg-primary/80\",\n        secondary:\n          \"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80\",\n        destructive:\n          \"border-transparent bg-destructive text-destructive-foreground shadow hover:bg-destructive/80\",\n        outline: \"text-foreground\",\n      },\n    },\n    defaultVariants: {\n      variant: \"default\",\n    },\n  }\n)\n\nexport interface BadgeProps\n  extends React.HTMLAttributes<HTMLDivElement>,\n    VariantProps<typeof badgeVariants> {}\n\nfunction Badge({ className, variant, ...props }: BadgeProps) {\n  return (\n    <div className={cn(badgeVariants({ variant }), className)} {...props} />\n  )\n}\n\nexport { Badge, badgeVariants }\n"],"names":[],"mappings":";;;;;;;AACA;AAEA;;;;AAEA,MAAM,gBAAgB,IAAA,qPAAG,EACvB,wKACA;IACE,UAAU;QACR,SAAS;YACP,SACE;YACF,WACE;YACF,aACE;YACF,SAAS;QACX;IACF;IACA,iBAAiB;QACf,SAAS;IACX;AACF;AAOF,SAAS,MAAM,EAAE,SAAS,EAAE,OAAO,EAAE,GAAG,OAAmB;IACzD,qBACE,sYAAC;QAAI,WAAW,IAAA,4HAAE,EAAC,cAAc;YAAE;QAAQ,IAAI;QAAa,GAAG,KAAK;;;;;;AAExE;KAJS"}}]
}