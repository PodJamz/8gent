{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///Users/jamesspalding/OpenClaw-OS/src/components/music/iPodAuthScreen.tsx"],"sourcesContent":["'use client';\n\nimport { useState, useEffect } from 'react';\nimport { motion, AnimatePresence } from 'framer-motion';\nimport { useSignIn, useSignUp, useUser } from '@clerk/nextjs';\nimport { Lock, User, Mail, Eye, EyeOff, ChevronRight, Check, X, Loader2, KeyRound, type LucideIcon } from 'lucide-react';\n\n// Retro spring animation config\nconst springConfig = {\n  type: 'spring' as const,\n  stiffness: 300,\n  damping: 30,\n};\n\nconst pixelTransition = {\n  type: 'tween' as const,\n  duration: 0.15,\n  ease: 'easeOut' as const,\n};\n\ntype AuthView = 'menu' | 'signin' | 'signup' | 'verify' | 'success' | 'error';\n\n// ============================================================================\n// Reusable Components (defined outside to prevent re-creation on render)\n// ============================================================================\n\ninterface RetroInputProps {\n  type?: string;\n  placeholder: string;\n  value: string;\n  onChange: (val: string) => void;\n  icon: LucideIcon;\n  showToggle?: boolean;\n  onToggle?: () => void;\n  autoFocus?: boolean;\n}\n\nfunction RetroInput({\n  type = 'text',\n  placeholder,\n  value,\n  onChange,\n  icon: Icon,\n  showToggle,\n  onToggle,\n  autoFocus,\n}: RetroInputProps) {\n  return (\n    <div className=\"relative\">\n      <div className=\"absolute left-2 top-1/2 -translate-y-1/2 text-[#3a4a45] pointer-events-none\">\n        <Icon className=\"w-3 h-3\" />\n      </div>\n      <input\n        type={type}\n        value={value}\n        onChange={(e) => onChange(e.target.value)}\n        placeholder={placeholder}\n        autoFocus={autoFocus}\n        autoComplete={type === 'email' ? 'email' : type === 'password' ? 'current-password' : 'off'}\n        className=\"w-full bg-[#697d75] border-2 border-[#1a2420] rounded-sm px-7 py-1.5 text-xs font-mono text-[#1a2420] placeholder:text-[#4a5a55] focus:outline-none focus:bg-[#7a8d85] transition-colors\"\n        style={{\n          textShadow: '1px 1px 0 rgba(255,255,255,0.1)',\n          boxShadow: 'inset 2px 2px 0 rgba(0,0,0,0.2)'\n        }}\n      />\n      {showToggle && onToggle && (\n        <button\n          type=\"button\"\n          onClick={(e) => {\n            e.preventDefault();\n            e.stopPropagation();\n            onToggle();\n          }}\n          className=\"absolute right-2 top-1/2 -translate-y-1/2 text-[#3a4a45] hover:text-[#1a2420] transition-colors\"\n        >\n          {type === 'password' ? <Eye className=\"w-3 h-3\" /> : <EyeOff className=\"w-3 h-3\" />}\n        </button>\n      )}\n    </div>\n  );\n}\n\ninterface RetroButtonProps {\n  onClick: () => void;\n  disabled?: boolean;\n  loading?: boolean;\n  children: React.ReactNode;\n  variant?: 'primary' | 'secondary';\n}\n\nfunction RetroButton({\n  onClick,\n  disabled,\n  loading,\n  children,\n  variant = 'primary',\n}: RetroButtonProps) {\n  return (\n    <button\n      onClick={onClick}\n      disabled={disabled || loading}\n      className={`w-full py-1.5 px-3 text-xs font-mono font-bold rounded-sm border-2 transition-all active:scale-95 ${\n        variant === 'primary'\n          ? 'bg-[#1a2420] border-[#1a2420] text-[#8fa39a] hover:bg-[#2a3a35] disabled:opacity-50'\n          : 'bg-transparent border-[#3a4a45] text-[#1a2420] hover:bg-[#697d75] disabled:opacity-50'\n      }`}\n      style={{\n        boxShadow: variant === 'primary' ? '2px 2px 0 #0a1410' : 'none',\n        textShadow: variant === 'primary' ? '1px 1px 0 rgba(0,0,0,0.3)' : 'none',\n      }}\n    >\n      <span className=\"flex items-center justify-center gap-2\">\n        {loading && <Loader2 className=\"w-3 h-3 animate-spin\" />}\n        {children}\n      </span>\n    </button>\n  );\n}\n\n// ============================================================================\n// Main Component\n// ============================================================================\n\ninterface iPodAuthScreenProps {\n  onClose: () => void;\n  onSuccess: () => void;\n}\n\nexport function IPodAuthScreen({ onClose, onSuccess }: iPodAuthScreenProps) {\n  const { signIn, setActive: setSignInActive, isLoaded: isSignInLoaded } = useSignIn();\n  const { signUp, setActive: setSignUpActive, isLoaded: isSignUpLoaded } = useSignUp();\n  const { isSignedIn, user } = useUser();\n\n  const [view, setView] = useState<AuthView>('menu');\n  const [email, setEmail] = useState('');\n  const [password, setPassword] = useState('');\n  const [showPassword, setShowPassword] = useState(false);\n  const [verificationCode, setVerificationCode] = useState('');\n  const [isLoading, setIsLoading] = useState(false);\n  const [error, setError] = useState<string | null>(null);\n  const [selectedIndex, setSelectedIndex] = useState(0);\n\n  // If user is already signed in, show success immediately\n  useEffect(() => {\n    if (isSignedIn && user) {\n      setView('success');\n      setTimeout(onSuccess, 1000);\n    }\n  }, [isSignedIn, user, onSuccess]);\n\n  // Menu navigation\n  const menuItems = [\n    { id: 'signin', label: 'Sign In', icon: KeyRound },\n    { id: 'signup', label: 'Create Account', icon: User },\n    { id: 'back', label: 'Back', icon: X },\n  ];\n\n  const handleMenuSelect = (id: string) => {\n    if (id === 'back') {\n      onClose();\n    } else {\n      setView(id as AuthView);\n      setError(null);\n    }\n  };\n\n  // Sign In flow\n  const handleSignIn = async () => {\n    if (!isSignInLoaded || !signIn) return;\n    setIsLoading(true);\n    setError(null);\n\n    try {\n      const result = await signIn.create({\n        identifier: email,\n        password,\n      });\n\n      if (result.status === 'complete') {\n        await setSignInActive({ session: result.createdSessionId });\n        setView('success');\n        setTimeout(onSuccess, 1500);\n      }\n    } catch (err: any) {\n      const errCode = err?.errors?.[0]?.code;\n      const msg = err?.errors?.[0]?.message || 'Sign in failed';\n\n      // If session already exists, user is already signed in - just proceed\n      if (errCode === 'session_exists' || msg.toLowerCase().includes('session')) {\n        setView('success');\n        setTimeout(onSuccess, 1500);\n        return;\n      }\n\n      setError(msg);\n    } finally {\n      setIsLoading(false);\n    }\n  };\n\n  // Sign Up flow\n  const handleSignUp = async () => {\n    if (!isSignUpLoaded || !signUp) return;\n    setIsLoading(true);\n    setError(null);\n\n    try {\n      await signUp.create({\n        emailAddress: email,\n        password,\n      });\n\n      await signUp.prepareEmailAddressVerification({ strategy: 'email_code' });\n      setView('verify');\n    } catch (err: any) {\n      const msg = err?.errors?.[0]?.message || 'Sign up failed';\n      setError(msg);\n    } finally {\n      setIsLoading(false);\n    }\n  };\n\n  // Verify email\n  const handleVerify = async () => {\n    if (!isSignUpLoaded || !signUp) return;\n    setIsLoading(true);\n    setError(null);\n\n    try {\n      const result = await signUp.attemptEmailAddressVerification({\n        code: verificationCode,\n      });\n\n      if (result.status === 'complete') {\n        await setSignUpActive({ session: result.createdSessionId });\n        setView('success');\n        setTimeout(onSuccess, 1500);\n      }\n    } catch (err: any) {\n      const msg = err?.errors?.[0]?.message || 'Invalid code';\n      setError(msg);\n    } finally {\n      setIsLoading(false);\n    }\n  };\n\n  return (\n    <div className=\"min-h-[200px] flex flex-col\" onClick={(e) => e.stopPropagation()}>\n      {/* Header */}\n      <div className=\"flex items-center justify-between mb-2 px-1\">\n        <div className=\"flex items-center gap-1\">\n          <Lock className=\"w-3 h-3 text-[#1a2420]\" />\n          <span className=\"text-[10px] font-bold text-[#1a2420] uppercase tracking-wider font-mono\">\n            {view === 'menu' && 'Private Access'}\n            {view === 'signin' && 'Sign In'}\n            {view === 'signup' && 'Create Account'}\n            {view === 'verify' && 'Verify Email'}\n            {view === 'success' && 'Welcome!'}\n          </span>\n        </div>\n        {view !== 'menu' && view !== 'success' && (\n          <button\n            onClick={() => setView('menu')}\n            className=\"text-[10px] font-mono text-[#3a4a45] hover:text-[#1a2420] transition-colors\"\n          >\n            BACK\n          </button>\n        )}\n      </div>\n\n      {/* Content */}\n      <AnimatePresence mode=\"wait\">\n        {/* Menu View */}\n        {view === 'menu' && (\n          <motion.div\n            key=\"menu\"\n            initial={{ opacity: 0, x: -20 }}\n            animate={{ opacity: 1, x: 0 }}\n            exit={{ opacity: 0, x: 20 }}\n            transition={pixelTransition}\n            className=\"flex-1\"\n          >\n            <div className=\"space-y-1\">\n              {menuItems.map((item, index) => (\n                <button\n                  key={item.id}\n                  onClick={() => handleMenuSelect(item.id)}\n                  onFocus={() => setSelectedIndex(index)}\n                  onMouseEnter={() => setSelectedIndex(index)}\n                  className={`w-full flex items-center gap-2 p-2 rounded-sm transition-all font-mono ${\n                    selectedIndex === index\n                      ? 'bg-[#1a2420] text-[#8fa39a]'\n                      : 'text-[#1a2420] hover:bg-[#697d75]'\n                  }`}\n                >\n                  <item.icon className=\"w-3 h-3\" />\n                  <span className=\"text-xs font-medium flex-1 text-left\">{item.label}</span>\n                  <ChevronRight className=\"w-3 h-3 opacity-50\" />\n                </button>\n              ))}\n            </div>\n\n            <div className=\"mt-4 pt-3 border-t-2 border-[#697d75]\">\n              <p className=\"text-[9px] text-[#3a4a45] font-mono text-center leading-relaxed\">\n                Sign in to access unreleased tracks and collaborator-only content.\n              </p>\n            </div>\n          </motion.div>\n        )}\n\n        {/* Sign In View */}\n        {view === 'signin' && (\n          <motion.div\n            key=\"signin\"\n            initial={{ opacity: 0, x: 20 }}\n            animate={{ opacity: 1, x: 0 }}\n            exit={{ opacity: 0, x: -20 }}\n            transition={pixelTransition}\n            className=\"flex-1 space-y-3\"\n          >\n            <RetroInput\n              type=\"email\"\n              placeholder=\"Email\"\n              value={email}\n              onChange={setEmail}\n              icon={Mail}\n              autoFocus\n            />\n            <RetroInput\n              type={showPassword ? 'text' : 'password'}\n              placeholder=\"Password\"\n              value={password}\n              onChange={setPassword}\n              icon={KeyRound}\n              showToggle\n              onToggle={() => setShowPassword(!showPassword)}\n            />\n\n            {error && (\n              <motion.div\n                initial={{ opacity: 0, y: -5 }}\n                animate={{ opacity: 1, y: 0 }}\n                className=\"p-2 bg-red-900/30 border border-red-800/50 rounded-sm\"\n              >\n                <p className=\"text-[9px] text-red-300 font-mono\">{error}</p>\n              </motion.div>\n            )}\n\n            <RetroButton\n              onClick={handleSignIn}\n              disabled={!email || !password}\n              loading={isLoading}\n            >\n              SIGN IN\n            </RetroButton>\n\n            <button\n              onClick={() => { setView('signup'); setError(null); }}\n              className=\"w-full text-[9px] text-[#3a4a45] font-mono hover:text-[#1a2420] transition-colors\"\n            >\n              Need an account? Sign up\n            </button>\n          </motion.div>\n        )}\n\n        {/* Sign Up View */}\n        {view === 'signup' && (\n          <motion.div\n            key=\"signup\"\n            initial={{ opacity: 0, x: 20 }}\n            animate={{ opacity: 1, x: 0 }}\n            exit={{ opacity: 0, x: -20 }}\n            transition={pixelTransition}\n            className=\"flex-1 space-y-3\"\n          >\n            <RetroInput\n              type=\"email\"\n              placeholder=\"Email\"\n              value={email}\n              onChange={setEmail}\n              icon={Mail}\n              autoFocus\n            />\n            <RetroInput\n              type={showPassword ? 'text' : 'password'}\n              placeholder=\"Password (8+ chars)\"\n              value={password}\n              onChange={setPassword}\n              icon={KeyRound}\n              showToggle\n              onToggle={() => setShowPassword(!showPassword)}\n            />\n\n            {error && (\n              <motion.div\n                initial={{ opacity: 0, y: -5 }}\n                animate={{ opacity: 1, y: 0 }}\n                className=\"p-2 bg-red-900/30 border border-red-800/50 rounded-sm\"\n              >\n                <p className=\"text-[9px] text-red-300 font-mono\">{error}</p>\n              </motion.div>\n            )}\n\n            <RetroButton\n              onClick={handleSignUp}\n              disabled={!email || password.length < 8}\n              loading={isLoading}\n            >\n              CREATE ACCOUNT\n            </RetroButton>\n\n            <button\n              onClick={() => { setView('signin'); setError(null); }}\n              className=\"w-full text-[9px] text-[#3a4a45] font-mono hover:text-[#1a2420] transition-colors\"\n            >\n              Already have an account? Sign in\n            </button>\n          </motion.div>\n        )}\n\n        {/* Verify View */}\n        {view === 'verify' && (\n          <motion.div\n            key=\"verify\"\n            initial={{ opacity: 0, x: 20 }}\n            animate={{ opacity: 1, x: 0 }}\n            exit={{ opacity: 0, x: -20 }}\n            transition={pixelTransition}\n            className=\"flex-1 space-y-3\"\n          >\n            <div className=\"p-2 bg-[#697d75] border-2 border-[#1a2420] rounded-sm\">\n              <p className=\"text-[9px] text-[#1a2420] font-mono text-center\">\n                Check your email for a 6-digit code\n              </p>\n            </div>\n\n            <input\n              type=\"text\"\n              value={verificationCode}\n              onChange={(e) => setVerificationCode(e.target.value.replace(/\\D/g, '').slice(0, 6))}\n              placeholder=\"000000\"\n              maxLength={6}\n              autoFocus\n              className=\"w-full bg-[#697d75] border-2 border-[#1a2420] rounded-sm px-3 py-2 text-center text-lg font-mono font-bold text-[#1a2420] placeholder:text-[#4a5a55] focus:outline-none focus:bg-[#7a8d85] tracking-[0.5em]\"\n              style={{\n                textShadow: '1px 1px 0 rgba(255,255,255,0.1)',\n                boxShadow: 'inset 2px 2px 0 rgba(0,0,0,0.2)'\n              }}\n            />\n\n            {error && (\n              <motion.div\n                initial={{ opacity: 0, y: -5 }}\n                animate={{ opacity: 1, y: 0 }}\n                className=\"p-2 bg-red-900/30 border border-red-800/50 rounded-sm\"\n              >\n                <p className=\"text-[9px] text-red-300 font-mono\">{error}</p>\n              </motion.div>\n            )}\n\n            <RetroButton\n              onClick={handleVerify}\n              disabled={verificationCode.length !== 6}\n              loading={isLoading}\n            >\n              VERIFY\n            </RetroButton>\n          </motion.div>\n        )}\n\n        {/* Success View */}\n        {view === 'success' && (\n          <motion.div\n            key=\"success\"\n            initial={{ opacity: 0, scale: 0.9 }}\n            animate={{ opacity: 1, scale: 1 }}\n            transition={springConfig}\n            className=\"flex-1 flex flex-col items-center justify-center\"\n          >\n            <motion.div\n              initial={{ scale: 0 }}\n              animate={{ scale: 1 }}\n              transition={{ delay: 0.1, ...springConfig }}\n              className=\"w-12 h-12 bg-[#1a2420] rounded-full flex items-center justify-center mb-3\"\n            >\n              <Check className=\"w-6 h-6 text-[#8fa39a]\" />\n            </motion.div>\n            <motion.p\n              initial={{ opacity: 0, y: 10 }}\n              animate={{ opacity: 1, y: 0 }}\n              transition={{ delay: 0.2 }}\n              className=\"text-sm font-mono font-bold text-[#1a2420]\"\n            >\n              Welcome!\n            </motion.p>\n            <motion.p\n              initial={{ opacity: 0 }}\n              animate={{ opacity: 1 }}\n              transition={{ delay: 0.3 }}\n              className=\"text-[9px] font-mono text-[#3a4a45] mt-1\"\n            >\n              Loading your tracks...\n            </motion.p>\n          </motion.div>\n        )}\n      </AnimatePresence>\n    </div>\n  );\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 785, "column": 0}, "map": {"version":3,"sources":["file:///Users/jamesspalding/OpenClaw-OS/src/components/music/PrivateMusicAdmin.tsx"],"sourcesContent":["'use client';\n\nimport { useState } from 'react';\nimport { motion, AnimatePresence } from 'framer-motion';\nimport { useQuery, useMutation } from '@/lib/openclaw/hooks';\nimport { api } from '@/lib/convex-shim';\nimport type { Id } from '../../../convex/_generated/dataModel';\nimport {\n  Music2,\n  Users,\n  ListMusic,\n  Plus,\n  Trash2,\n  Edit3,\n  Check,\n  X,\n  UserPlus,\n  Mail,\n  Shield,\n  User,\n  Loader2,\n  ChevronRight,\n  Settings,\n} from 'lucide-react';\n\n// Animation constants\nconst fadeIn = {\n  initial: { opacity: 0, y: 8 },\n  animate: { opacity: 1, y: 0 },\n  exit: { opacity: 0, y: -8 },\n  transition: { duration: 0.2 },\n};\n\nconst slideIn = {\n  initial: { opacity: 0, x: 20 },\n  animate: { opacity: 1, x: 0 },\n  exit: { opacity: 0, x: -20 },\n  transition: { duration: 0.15 },\n};\n\ntype AdminTab = 'tracks' | 'collaborators' | 'playlists';\n\ninterface PrivateMusicAdminProps {\n  onClose: () => void;\n}\n\nexport function PrivateMusicAdmin({ onClose }: PrivateMusicAdminProps) {\n  const [activeTab, setActiveTab] = useState<AdminTab>('tracks');\n\n  return (\n    <motion.div\n      className=\"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/60 backdrop-blur-sm\"\n      initial={{ opacity: 0 }}\n      animate={{ opacity: 1 }}\n      exit={{ opacity: 0 }}\n      onClick={onClose}\n    >\n      <motion.div\n        className=\"w-full max-w-2xl bg-gradient-to-b from-[#f5f5f5] to-[#e8e8e8] dark:from-zinc-800 dark:to-zinc-900 rounded-2xl shadow-2xl overflow-hidden\"\n        initial={{ scale: 0.95, opacity: 0 }}\n        animate={{ scale: 1, opacity: 1 }}\n        exit={{ scale: 0.95, opacity: 0 }}\n        transition={{ duration: 0.2 }}\n        onClick={(e) => e.stopPropagation()}\n      >\n        {/* Header */}\n        <div className=\"px-6 py-4 border-b border-zinc-200 dark:border-zinc-700 bg-gradient-to-r from-zinc-100 to-zinc-50 dark:from-zinc-800 dark:to-zinc-850\">\n          <div className=\"flex items-center justify-between\">\n            <div className=\"flex items-center gap-3\">\n              <div className=\"p-2 rounded-lg bg-emerald-100 dark:bg-emerald-900/40\">\n                <Settings className=\"w-5 h-5 text-emerald-600 dark:text-emerald-400\" />\n              </div>\n              <div>\n                <h2 className=\"text-lg font-semibold text-zinc-800 dark:text-zinc-100\">\n                  Music Admin\n                </h2>\n                <p className=\"text-xs text-zinc-500 dark:text-zinc-400\">\n                  Manage tracks, collaborators & playlists\n                </p>\n              </div>\n            </div>\n            <button\n              onClick={onClose}\n              className=\"p-2 rounded-lg hover:bg-zinc-200 dark:hover:bg-zinc-700 transition-colors\"\n            >\n              <X className=\"w-5 h-5 text-zinc-500\" />\n            </button>\n          </div>\n\n          {/* Tab Navigation */}\n          <div className=\"flex gap-1 mt-4 p-1 bg-zinc-200/50 dark:bg-zinc-700/50 rounded-lg\">\n            {[\n              { id: 'tracks' as const, label: 'Tracks', icon: Music2 },\n              { id: 'collaborators' as const, label: 'Collaborators', icon: Users },\n              { id: 'playlists' as const, label: 'Playlists', icon: ListMusic },\n            ].map((tab) => (\n              <button\n                key={tab.id}\n                onClick={() => setActiveTab(tab.id)}\n                className={`flex-1 flex items-center justify-center gap-2 px-4 py-2 rounded-md text-sm font-medium transition-all ${\n                  activeTab === tab.id\n                    ? 'bg-white dark:bg-zinc-600 text-zinc-800 dark:text-white shadow-sm'\n                    : 'text-zinc-500 dark:text-zinc-400 hover:text-zinc-700 dark:hover:text-zinc-300'\n                }`}\n              >\n                <tab.icon className=\"w-4 h-4\" />\n                <span className=\"hidden sm:inline\">{tab.label}</span>\n              </button>\n            ))}\n          </div>\n        </div>\n\n        {/* Content */}\n        <div className=\"p-6 max-h-[60vh] overflow-y-auto\">\n          <AnimatePresence mode=\"wait\">\n            {activeTab === 'tracks' && <TracksPanel key=\"tracks\" />}\n            {activeTab === 'collaborators' && <CollaboratorsPanel key=\"collaborators\" />}\n            {activeTab === 'playlists' && <PlaylistsPanel key=\"playlists\" />}\n          </AnimatePresence>\n        </div>\n      </motion.div>\n    </motion.div>\n  );\n}\n\n// ============================================================================\n// Tracks Panel\n// ============================================================================\n\nfunction TracksPanel() {\n  const tracks = useQuery(api.privateMusic.listAllPrivateTracks) || [];\n  const addTrack = useMutation(api.privateMusic.addPrivateTrack);\n  const deleteTrack = useMutation(api.privateMusic.deletePrivateTrack);\n\n  const [showAddForm, setShowAddForm] = useState(false);\n  const [isAdding, setIsAdding] = useState(false);\n  const [formData, setFormData] = useState({\n    title: '',\n    artist: '',\n    album: '',\n    audioUrl: '',\n    albumArt: '',\n    notes: '',\n  });\n\n  const handleAdd = async () => {\n    if (!formData.title || !formData.artist || !formData.audioUrl) return;\n    setIsAdding(true);\n    try {\n      await addTrack({\n        title: formData.title,\n        artist: formData.artist,\n        album: formData.album || undefined,\n        audioUrl: formData.audioUrl,\n        albumArt: formData.albumArt || undefined,\n        notes: formData.notes || undefined,\n      });\n      setFormData({ title: '', artist: '', album: '', audioUrl: '', albumArt: '', notes: '' });\n      setShowAddForm(false);\n    } finally {\n      setIsAdding(false);\n    }\n  };\n\n  const handleDelete = async (id: Id<'privateTracks'>) => {\n    if (confirm('Delete this track?')) {\n      await deleteTrack({ trackId: id });\n    }\n  };\n\n  return (\n    <motion.div {...fadeIn}>\n      {/* Add Track Button */}\n      <button\n        onClick={() => setShowAddForm(!showAddForm)}\n        className=\"w-full flex items-center justify-center gap-2 p-3 mb-4 rounded-lg border-2 border-dashed border-zinc-300 dark:border-zinc-600 hover:border-emerald-400 dark:hover:border-emerald-500 hover:bg-emerald-50 dark:hover:bg-emerald-900/20 transition-colors text-zinc-500 dark:text-zinc-400 hover:text-emerald-600 dark:hover:text-emerald-400\"\n      >\n        <Plus className=\"w-4 h-4\" />\n        <span className=\"text-sm font-medium\">Add Track</span>\n      </button>\n\n      {/* Add Track Form */}\n      <AnimatePresence>\n        {showAddForm && (\n          <motion.div\n            initial={{ height: 0, opacity: 0 }}\n            animate={{ height: 'auto', opacity: 1 }}\n            exit={{ height: 0, opacity: 0 }}\n            className=\"overflow-hidden mb-4\"\n          >\n            <div className=\"p-4 bg-zinc-100 dark:bg-zinc-800 rounded-lg space-y-3\">\n              <div className=\"grid grid-cols-2 gap-3\">\n                <input\n                  type=\"text\"\n                  placeholder=\"Title *\"\n                  value={formData.title}\n                  onChange={(e) => setFormData({ ...formData, title: e.target.value })}\n                  className=\"px-3 py-2 rounded-md bg-white dark:bg-zinc-700 border border-zinc-200 dark:border-zinc-600 text-sm text-zinc-800 dark:text-zinc-200 placeholder:text-zinc-400\"\n                />\n                <input\n                  type=\"text\"\n                  placeholder=\"Artist *\"\n                  value={formData.artist}\n                  onChange={(e) => setFormData({ ...formData, artist: e.target.value })}\n                  className=\"px-3 py-2 rounded-md bg-white dark:bg-zinc-700 border border-zinc-200 dark:border-zinc-600 text-sm text-zinc-800 dark:text-zinc-200 placeholder:text-zinc-400\"\n                />\n              </div>\n              <input\n                type=\"text\"\n                placeholder=\"Audio URL *\"\n                value={formData.audioUrl}\n                onChange={(e) => setFormData({ ...formData, audioUrl: e.target.value })}\n                className=\"w-full px-3 py-2 rounded-md bg-white dark:bg-zinc-700 border border-zinc-200 dark:border-zinc-600 text-sm text-zinc-800 dark:text-zinc-200 placeholder:text-zinc-400\"\n              />\n              <div className=\"grid grid-cols-2 gap-3\">\n                <input\n                  type=\"text\"\n                  placeholder=\"Album (optional)\"\n                  value={formData.album}\n                  onChange={(e) => setFormData({ ...formData, album: e.target.value })}\n                  className=\"px-3 py-2 rounded-md bg-white dark:bg-zinc-700 border border-zinc-200 dark:border-zinc-600 text-sm text-zinc-800 dark:text-zinc-200 placeholder:text-zinc-400\"\n                />\n                <input\n                  type=\"text\"\n                  placeholder=\"Album Art URL (optional)\"\n                  value={formData.albumArt}\n                  onChange={(e) => setFormData({ ...formData, albumArt: e.target.value })}\n                  className=\"px-3 py-2 rounded-md bg-white dark:bg-zinc-700 border border-zinc-200 dark:border-zinc-600 text-sm text-zinc-800 dark:text-zinc-200 placeholder:text-zinc-400\"\n                />\n              </div>\n              <textarea\n                placeholder=\"Notes (optional)\"\n                value={formData.notes}\n                onChange={(e) => setFormData({ ...formData, notes: e.target.value })}\n                rows={2}\n                className=\"w-full px-3 py-2 rounded-md bg-white dark:bg-zinc-700 border border-zinc-200 dark:border-zinc-600 text-sm text-zinc-800 dark:text-zinc-200 placeholder:text-zinc-400 resize-none\"\n              />\n              <div className=\"flex justify-end gap-2\">\n                <button\n                  onClick={() => setShowAddForm(false)}\n                  className=\"px-3 py-1.5 text-sm text-zinc-600 dark:text-zinc-400 hover:text-zinc-800 dark:hover:text-zinc-200\"\n                >\n                  Cancel\n                </button>\n                <button\n                  onClick={handleAdd}\n                  disabled={isAdding || !formData.title || !formData.artist || !formData.audioUrl}\n                  className=\"px-4 py-1.5 text-sm font-medium text-white bg-emerald-500 hover:bg-emerald-600 disabled:opacity-50 disabled:cursor-not-allowed rounded-md flex items-center gap-2\"\n                >\n                  {isAdding ? <Loader2 className=\"w-3 h-3 animate-spin\" /> : <Check className=\"w-3 h-3\" />}\n                  Add Track\n                </button>\n              </div>\n            </div>\n          </motion.div>\n        )}\n      </AnimatePresence>\n\n      {/* Track List */}\n      <div className=\"space-y-2\">\n        {tracks.length === 0 ? (\n          <div className=\"text-center py-8 text-zinc-500 dark:text-zinc-400 text-sm\">\n            No private tracks yet. Add one above.\n          </div>\n        ) : (\n          tracks.map((track, index) => (\n            <motion.div\n              key={track.id}\n              {...slideIn}\n              transition={{ delay: index * 0.05 }}\n              className=\"flex items-center gap-3 p-3 bg-white dark:bg-zinc-800/50 rounded-lg border border-zinc-200 dark:border-zinc-700 group\"\n            >\n              {track.albumArt ? (\n                <img\n                  src={track.albumArt}\n                  alt=\"\"\n                  className=\"w-10 h-10 rounded object-cover\"\n                />\n              ) : (\n                <div className=\"w-10 h-10 rounded bg-zinc-200 dark:bg-zinc-700 flex items-center justify-center\">\n                  <Music2 className=\"w-5 h-5 text-zinc-400\" />\n                </div>\n              )}\n              <div className=\"flex-1 min-w-0\">\n                <div className=\"font-medium text-sm text-zinc-800 dark:text-zinc-200 truncate\">\n                  {track.title}\n                </div>\n                <div className=\"text-xs text-zinc-500 dark:text-zinc-400 truncate\">\n                  {track.artist} {track.album && `â€¢ ${track.album}`}\n                </div>\n              </div>\n              <div className=\"flex items-center gap-1 opacity-0 group-hover:opacity-100 transition-opacity\">\n                <button\n                  onClick={() => handleDelete(track.id)}\n                  className=\"p-1.5 rounded hover:bg-red-100 dark:hover:bg-red-900/30 text-zinc-400 hover:text-red-500 transition-colors\"\n                  title=\"Delete track\"\n                >\n                  <Trash2 className=\"w-4 h-4\" />\n                </button>\n              </div>\n            </motion.div>\n          ))\n        )}\n      </div>\n    </motion.div>\n  );\n}\n\n// ============================================================================\n// Collaborators Panel\n// ============================================================================\n\nfunction CollaboratorsPanel() {\n  const collaborators = useQuery(api.privateMusic.listCollaborators) || [];\n  const addCollaborator = useMutation(api.privateMusic.addCollaborator);\n  const removeCollaborator = useMutation(api.privateMusic.removeCollaborator);\n  const updateCollaborator = useMutation(api.privateMusic.updateCollaborator);\n\n  const [showInvite, setShowInvite] = useState(false);\n  const [isInviting, setIsInviting] = useState(false);\n  const [inviteData, setInviteData] = useState({ email: '', displayName: '', role: 'collaborator' as 'collaborator' | 'admin' });\n\n  const handleInvite = async () => {\n    if (!inviteData.email) return;\n    setIsInviting(true);\n    try {\n      await addCollaborator({\n        email: inviteData.email,\n        displayName: inviteData.displayName || undefined,\n        role: inviteData.role,\n      });\n      setInviteData({ email: '', displayName: '', role: 'collaborator' });\n      setShowInvite(false);\n    } finally {\n      setIsInviting(false);\n    }\n  };\n\n  const handleRemove = async (id: Id<'musicCollaborators'>) => {\n    if (confirm('Remove this collaborator?')) {\n      await removeCollaborator({ collaboratorId: id });\n    }\n  };\n\n  const handleToggleActive = async (id: Id<'musicCollaborators'>, isActive: boolean) => {\n    await updateCollaborator({ collaboratorId: id, isActive: !isActive });\n  };\n\n  return (\n    <motion.div {...fadeIn}>\n      {/* Invite Button */}\n      <button\n        onClick={() => setShowInvite(!showInvite)}\n        className=\"w-full flex items-center justify-center gap-2 p-3 mb-4 rounded-lg border-2 border-dashed border-zinc-300 dark:border-zinc-600 hover:border-emerald-400 dark:hover:border-emerald-500 hover:bg-emerald-50 dark:hover:bg-emerald-900/20 transition-colors text-zinc-500 dark:text-zinc-400 hover:text-emerald-600 dark:hover:text-emerald-400\"\n      >\n        <UserPlus className=\"w-4 h-4\" />\n        <span className=\"text-sm font-medium\">Invite Collaborator</span>\n      </button>\n\n      {/* Invite Form */}\n      <AnimatePresence>\n        {showInvite && (\n          <motion.div\n            initial={{ height: 0, opacity: 0 }}\n            animate={{ height: 'auto', opacity: 1 }}\n            exit={{ height: 0, opacity: 0 }}\n            className=\"overflow-hidden mb-4\"\n          >\n            <div className=\"p-4 bg-zinc-100 dark:bg-zinc-800 rounded-lg space-y-3\">\n              <div className=\"flex items-start gap-3 p-3 rounded-md bg-amber-50 dark:bg-amber-900/20 border border-amber-200 dark:border-amber-800\">\n                <Mail className=\"w-4 h-4 text-amber-600 dark:text-amber-400 mt-0.5\" />\n                <p className=\"text-xs text-amber-700 dark:text-amber-300\">\n                  Enter the email they'll use to sign in. When they sign in with Clerk, they'll automatically get access.\n                </p>\n              </div>\n              <input\n                type=\"email\"\n                placeholder=\"Email address *\"\n                value={inviteData.email}\n                onChange={(e) => setInviteData({ ...inviteData, email: e.target.value })}\n                className=\"w-full px-3 py-2 rounded-md bg-white dark:bg-zinc-700 border border-zinc-200 dark:border-zinc-600 text-sm text-zinc-800 dark:text-zinc-200 placeholder:text-zinc-400\"\n              />\n              <div className=\"grid grid-cols-2 gap-3\">\n                <input\n                  type=\"text\"\n                  placeholder=\"Display name (optional)\"\n                  value={inviteData.displayName}\n                  onChange={(e) => setInviteData({ ...inviteData, displayName: e.target.value })}\n                  className=\"px-3 py-2 rounded-md bg-white dark:bg-zinc-700 border border-zinc-200 dark:border-zinc-600 text-sm text-zinc-800 dark:text-zinc-200 placeholder:text-zinc-400\"\n                />\n                <select\n                  value={inviteData.role}\n                  onChange={(e) => setInviteData({ ...inviteData, role: e.target.value as 'collaborator' | 'admin' })}\n                  className=\"px-3 py-2 rounded-md bg-white dark:bg-zinc-700 border border-zinc-200 dark:border-zinc-600 text-sm text-zinc-800 dark:text-zinc-200\"\n                >\n                  <option value=\"collaborator\">Collaborator</option>\n                  <option value=\"admin\">Admin</option>\n                </select>\n              </div>\n              <div className=\"flex justify-end gap-2\">\n                <button\n                  onClick={() => setShowInvite(false)}\n                  className=\"px-3 py-1.5 text-sm text-zinc-600 dark:text-zinc-400 hover:text-zinc-800 dark:hover:text-zinc-200\"\n                >\n                  Cancel\n                </button>\n                <button\n                  onClick={handleInvite}\n                  disabled={isInviting || !inviteData.email}\n                  className=\"px-4 py-1.5 text-sm font-medium text-white bg-emerald-500 hover:bg-emerald-600 disabled:opacity-50 disabled:cursor-not-allowed rounded-md flex items-center gap-2\"\n                >\n                  {isInviting ? <Loader2 className=\"w-3 h-3 animate-spin\" /> : <UserPlus className=\"w-3 h-3\" />}\n                  Invite\n                </button>\n              </div>\n            </div>\n          </motion.div>\n        )}\n      </AnimatePresence>\n\n      {/* Collaborator List */}\n      <div className=\"space-y-2\">\n        {collaborators.length === 0 ? (\n          <div className=\"text-center py-8 text-zinc-500 dark:text-zinc-400 text-sm\">\n            No collaborators yet. Invite someone above.\n          </div>\n        ) : (\n          collaborators.map((collab, index) => (\n            <motion.div\n              key={collab.id}\n              {...slideIn}\n              transition={{ delay: index * 0.05 }}\n              className={`flex items-center gap-3 p-3 rounded-lg border group ${\n                collab.isActive\n                  ? 'bg-white dark:bg-zinc-800/50 border-zinc-200 dark:border-zinc-700'\n                  : 'bg-zinc-100 dark:bg-zinc-800/30 border-zinc-200 dark:border-zinc-700/50 opacity-60'\n              }`}\n            >\n              <div className={`p-2 rounded-full ${\n                collab.role === 'admin'\n                  ? 'bg-amber-100 dark:bg-amber-900/30'\n                  : 'bg-zinc-100 dark:bg-zinc-700'\n              }`}>\n                {collab.role === 'admin' ? (\n                  <Shield className=\"w-4 h-4 text-amber-600 dark:text-amber-400\" />\n                ) : (\n                  <User className=\"w-4 h-4 text-zinc-500 dark:text-zinc-400\" />\n                )}\n              </div>\n              <div className=\"flex-1 min-w-0\">\n                <div className=\"flex items-center gap-2\">\n                  <span className=\"font-medium text-sm text-zinc-800 dark:text-zinc-200 truncate\">\n                    {collab.displayName || collab.email}\n                  </span>\n                  {collab.isPending && (\n                    <span className=\"px-1.5 py-0.5 text-[10px] font-medium bg-amber-100 dark:bg-amber-900/30 text-amber-600 dark:text-amber-400 rounded\">\n                      Pending\n                    </span>\n                  )}\n                  {collab.role === 'admin' && (\n                    <span className=\"px-1.5 py-0.5 text-[10px] font-medium bg-zinc-200 dark:bg-zinc-700 text-zinc-600 dark:text-zinc-300 rounded\">\n                      Admin\n                    </span>\n                  )}\n                </div>\n                <div className=\"text-xs text-zinc-500 dark:text-zinc-400 truncate\">\n                  {collab.email}\n                </div>\n              </div>\n              <div className=\"flex items-center gap-1 opacity-0 group-hover:opacity-100 transition-opacity\">\n                <button\n                  onClick={() => handleToggleActive(collab.id, collab.isActive)}\n                  className={`p-1.5 rounded transition-colors ${\n                    collab.isActive\n                      ? 'hover:bg-amber-100 dark:hover:bg-amber-900/30 text-zinc-400 hover:text-amber-500'\n                      : 'hover:bg-emerald-100 dark:hover:bg-emerald-900/30 text-zinc-400 hover:text-emerald-500'\n                  }`}\n                  title={collab.isActive ? 'Deactivate' : 'Activate'}\n                >\n                  {collab.isActive ? <X className=\"w-4 h-4\" /> : <Check className=\"w-4 h-4\" />}\n                </button>\n                <button\n                  onClick={() => handleRemove(collab.id)}\n                  className=\"p-1.5 rounded hover:bg-red-100 dark:hover:bg-red-900/30 text-zinc-400 hover:text-red-500 transition-colors\"\n                  title=\"Remove\"\n                >\n                  <Trash2 className=\"w-4 h-4\" />\n                </button>\n              </div>\n            </motion.div>\n          ))\n        )}\n      </div>\n    </motion.div>\n  );\n}\n\n// ============================================================================\n// Playlists Panel\n// ============================================================================\n\nfunction PlaylistsPanel() {\n  const playlists = useQuery(api.privateMusic.listAllPlaylists) || [];\n  const tracks = useQuery(api.privateMusic.listAllPrivateTracks) || [];\n  const collaborators = useQuery(api.privateMusic.listCollaborators) || [];\n  const createPlaylist = useMutation(api.privateMusic.createPlaylist);\n  const deletePlaylist = useMutation(api.privateMusic.deletePlaylist);\n  const addTrackToPlaylist = useMutation(api.privateMusic.addTrackToPlaylist);\n  const removeTrackFromPlaylist = useMutation(api.privateMusic.removeTrackFromPlaylist);\n  const grantPlaylistAccess = useMutation(api.privateMusic.grantPlaylistAccess);\n  const revokePlaylistAccess = useMutation(api.privateMusic.revokePlaylistAccess);\n\n  const [showCreate, setShowCreate] = useState(false);\n  const [isCreating, setIsCreating] = useState(false);\n  const [createData, setCreateData] = useState({ name: '', description: '' });\n  const [expandedPlaylist, setExpandedPlaylist] = useState<string | null>(null);\n\n  const handleCreate = async () => {\n    if (!createData.name) return;\n    setIsCreating(true);\n    try {\n      await createPlaylist({\n        name: createData.name,\n        description: createData.description || undefined,\n      });\n      setCreateData({ name: '', description: '' });\n      setShowCreate(false);\n    } finally {\n      setIsCreating(false);\n    }\n  };\n\n  const handleDelete = async (id: Id<'privatePlaylists'>) => {\n    if (confirm('Delete this playlist?')) {\n      await deletePlaylist({ playlistId: id });\n    }\n  };\n\n  const handleToggleTrack = async (playlistId: Id<'privatePlaylists'>, trackId: Id<'privateTracks'>, isInPlaylist: boolean) => {\n    if (isInPlaylist) {\n      await removeTrackFromPlaylist({ playlistId, trackId });\n    } else {\n      await addTrackToPlaylist({ playlistId, trackId });\n    }\n  };\n\n  const handleToggleAccess = async (playlistId: Id<'privatePlaylists'>, userId: string, hasAccess: boolean) => {\n    if (hasAccess) {\n      await revokePlaylistAccess({ playlistId, userId });\n    } else {\n      await grantPlaylistAccess({ playlistId, userId });\n    }\n  };\n\n  return (\n    <motion.div {...fadeIn}>\n      {/* Create Button */}\n      <button\n        onClick={() => setShowCreate(!showCreate)}\n        className=\"w-full flex items-center justify-center gap-2 p-3 mb-4 rounded-lg border-2 border-dashed border-zinc-300 dark:border-zinc-600 hover:border-emerald-400 dark:hover:border-emerald-500 hover:bg-emerald-50 dark:hover:bg-emerald-900/20 transition-colors text-zinc-500 dark:text-zinc-400 hover:text-emerald-600 dark:hover:text-emerald-400\"\n      >\n        <Plus className=\"w-4 h-4\" />\n        <span className=\"text-sm font-medium\">Create Playlist</span>\n      </button>\n\n      {/* Create Form */}\n      <AnimatePresence>\n        {showCreate && (\n          <motion.div\n            initial={{ height: 0, opacity: 0 }}\n            animate={{ height: 'auto', opacity: 1 }}\n            exit={{ height: 0, opacity: 0 }}\n            className=\"overflow-hidden mb-4\"\n          >\n            <div className=\"p-4 bg-zinc-100 dark:bg-zinc-800 rounded-lg space-y-3\">\n              <input\n                type=\"text\"\n                placeholder=\"Playlist name *\"\n                value={createData.name}\n                onChange={(e) => setCreateData({ ...createData, name: e.target.value })}\n                className=\"w-full px-3 py-2 rounded-md bg-white dark:bg-zinc-700 border border-zinc-200 dark:border-zinc-600 text-sm text-zinc-800 dark:text-zinc-200 placeholder:text-zinc-400\"\n              />\n              <textarea\n                placeholder=\"Description (optional)\"\n                value={createData.description}\n                onChange={(e) => setCreateData({ ...createData, description: e.target.value })}\n                rows={2}\n                className=\"w-full px-3 py-2 rounded-md bg-white dark:bg-zinc-700 border border-zinc-200 dark:border-zinc-600 text-sm text-zinc-800 dark:text-zinc-200 placeholder:text-zinc-400 resize-none\"\n              />\n              <div className=\"flex justify-end gap-2\">\n                <button\n                  onClick={() => setShowCreate(false)}\n                  className=\"px-3 py-1.5 text-sm text-zinc-600 dark:text-zinc-400 hover:text-zinc-800 dark:hover:text-zinc-200\"\n                >\n                  Cancel\n                </button>\n                <button\n                  onClick={handleCreate}\n                  disabled={isCreating || !createData.name}\n                  className=\"px-4 py-1.5 text-sm font-medium text-white bg-emerald-500 hover:bg-emerald-600 disabled:opacity-50 disabled:cursor-not-allowed rounded-md flex items-center gap-2\"\n                >\n                  {isCreating ? <Loader2 className=\"w-3 h-3 animate-spin\" /> : <Check className=\"w-3 h-3\" />}\n                  Create\n                </button>\n              </div>\n            </div>\n          </motion.div>\n        )}\n      </AnimatePresence>\n\n      {/* Playlist List */}\n      <div className=\"space-y-2\">\n        {playlists.length === 0 ? (\n          <div className=\"text-center py-8 text-zinc-500 dark:text-zinc-400 text-sm\">\n            No playlists yet. Create one above.\n          </div>\n        ) : (\n          playlists.map((playlist, index) => {\n            const isExpanded = expandedPlaylist === playlist.id;\n            return (\n              <motion.div\n                key={playlist.id}\n                {...slideIn}\n                transition={{ delay: index * 0.05 }}\n                className=\"bg-white dark:bg-zinc-800/50 rounded-lg border border-zinc-200 dark:border-zinc-700 overflow-hidden\"\n              >\n                {/* Playlist Header */}\n                <button\n                  onClick={() => setExpandedPlaylist(isExpanded ? null : playlist.id)}\n                  className=\"w-full flex items-center gap-3 p-3 hover:bg-zinc-50 dark:hover:bg-zinc-800 transition-colors\"\n                >\n                  <div className=\"p-2 rounded-lg bg-emerald-100 dark:bg-emerald-900/30\">\n                    <ListMusic className=\"w-4 h-4 text-emerald-600 dark:text-emerald-400\" />\n                  </div>\n                  <div className=\"flex-1 text-left min-w-0\">\n                    <div className=\"font-medium text-sm text-zinc-800 dark:text-zinc-200 truncate\">\n                      {playlist.name}\n                    </div>\n                    <div className=\"text-xs text-zinc-500 dark:text-zinc-400\">\n                      {playlist.trackIds.length} tracks â€¢ {playlist.allowedUserIds.length} users\n                    </div>\n                  </div>\n                  <ChevronRight className={`w-4 h-4 text-zinc-400 transition-transform ${isExpanded ? 'rotate-90' : ''}`} />\n                </button>\n\n                {/* Expanded Content */}\n                <AnimatePresence>\n                  {isExpanded && (\n                    <motion.div\n                      initial={{ height: 0 }}\n                      animate={{ height: 'auto' }}\n                      exit={{ height: 0 }}\n                      className=\"overflow-hidden\"\n                    >\n                      <div className=\"px-4 pb-4 space-y-4 border-t border-zinc-100 dark:border-zinc-700 pt-3\">\n                        {/* Tracks Section */}\n                        <div>\n                          <div className=\"text-xs font-medium text-zinc-500 dark:text-zinc-400 mb-2 flex items-center gap-1\">\n                            <Music2 className=\"w-3 h-3\" /> Tracks\n                          </div>\n                          <div className=\"space-y-1 max-h-32 overflow-y-auto\">\n                            {tracks.map((track) => {\n                              const isInPlaylist = playlist.trackIds.includes(track.id);\n                              return (\n                                <button\n                                  key={track.id}\n                                  onClick={() => handleToggleTrack(playlist.id, track.id, isInPlaylist)}\n                                  className={`w-full flex items-center gap-2 p-2 rounded text-left text-sm transition-colors ${\n                                    isInPlaylist\n                                      ? 'bg-emerald-50 dark:bg-emerald-900/20 text-emerald-700 dark:text-emerald-300'\n                                      : 'hover:bg-zinc-100 dark:hover:bg-zinc-700 text-zinc-600 dark:text-zinc-400'\n                                  }`}\n                                >\n                                  {isInPlaylist ? <Check className=\"w-3 h-3\" /> : <Plus className=\"w-3 h-3 opacity-50\" />}\n                                  <span className=\"truncate\">{track.title}</span>\n                                </button>\n                              );\n                            })}\n                          </div>\n                        </div>\n\n                        {/* Access Section */}\n                        <div>\n                          <div className=\"text-xs font-medium text-zinc-500 dark:text-zinc-400 mb-2 flex items-center gap-1\">\n                            <Users className=\"w-3 h-3\" /> Access\n                          </div>\n                          <div className=\"space-y-1 max-h-32 overflow-y-auto\">\n                            {collaborators.filter(c => c.role !== 'admin').map((collab) => {\n                              const hasAccess = playlist.allowedUserIds.includes(collab.userId);\n                              return (\n                                <button\n                                  key={collab.id}\n                                  onClick={() => handleToggleAccess(playlist.id, collab.userId, hasAccess)}\n                                  className={`w-full flex items-center gap-2 p-2 rounded text-left text-sm transition-colors ${\n                                    hasAccess\n                                      ? 'bg-emerald-50 dark:bg-emerald-900/20 text-emerald-700 dark:text-emerald-300'\n                                      : 'hover:bg-zinc-100 dark:hover:bg-zinc-700 text-zinc-600 dark:text-zinc-400'\n                                  }`}\n                                >\n                                  {hasAccess ? <Check className=\"w-3 h-3\" /> : <Plus className=\"w-3 h-3 opacity-50\" />}\n                                  <span className=\"truncate\">{collab.displayName || collab.email}</span>\n                                </button>\n                              );\n                            })}\n                          </div>\n                        </div>\n\n                        {/* Delete */}\n                        <button\n                          onClick={() => handleDelete(playlist.id)}\n                          className=\"w-full flex items-center justify-center gap-2 p-2 text-sm text-red-500 hover:bg-red-50 dark:hover:bg-red-900/20 rounded transition-colors\"\n                        >\n                          <Trash2 className=\"w-4 h-4\" />\n                          Delete Playlist\n                        </button>\n                      </div>\n                    </motion.div>\n                  )}\n                </AnimatePresence>\n              </motion.div>\n            );\n          })\n        )}\n      </div>\n    </motion.div>\n  );\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 2345, "column": 0}, "map": {"version":3,"sources":["file:///Users/jamesspalding/OpenClaw-OS/src/components/music/VinylCarousel.tsx"],"sourcesContent":["'use client';\n\nimport { useState, useEffect, useCallback, useRef } from 'react';\nimport { motion, AnimatePresence, PanInfo } from 'framer-motion';\nimport { ChevronLeft, ChevronRight, Play, Pause } from 'lucide-react';\nimport { type Track } from '@/data/tracks';\n\ninterface Album {\n  name: string;\n  artist: string;\n  albumArt: string;\n  tracks: Track[];\n}\n\ninterface VinylCarouselProps {\n  tracks: Track[];\n  currentTrack: Track;\n  isPlaying: boolean;\n  onSelectAlbum: (album: Album) => void;\n  onSelectTrack: (track: Track) => void;\n  onTogglePlay: () => void;\n}\n\n// Group tracks by album\nfunction groupTracksByAlbum(tracks: Track[]): Album[] {\n  const albumMap = new Map<string, Album>();\n\n  tracks.forEach((track) => {\n    const key = `${track.album}-${track.artist}`;\n    if (!albumMap.has(key)) {\n      albumMap.set(key, {\n        name: track.album,\n        artist: track.artist,\n        albumArt: track.albumArt,\n        tracks: [],\n      });\n    }\n    albumMap.get(key)!.tracks.push(track);\n  });\n\n  return Array.from(albumMap.values());\n}\n\nexport function VinylCarousel({\n  tracks,\n  currentTrack,\n  isPlaying,\n  onSelectAlbum,\n  onSelectTrack,\n  onTogglePlay,\n}: VinylCarouselProps) {\n  const albums = groupTracksByAlbum(tracks);\n  const [currentIndex, setCurrentIndex] = useState(0);\n  const [direction, setDirection] = useState(0);\n  const containerRef = useRef<HTMLDivElement>(null);\n\n  // Find the album index that contains the current track\n  useEffect(() => {\n    const albumIndex = albums.findIndex((album) =>\n      album.tracks.some((t) => t.id === currentTrack.id)\n    );\n    if (albumIndex !== -1 && albumIndex !== currentIndex) {\n      setDirection(albumIndex > currentIndex ? 1 : -1);\n      setCurrentIndex(albumIndex);\n    }\n  }, [currentTrack.id, albums, currentIndex]);\n\n  const goToNext = useCallback(() => {\n    if (albums.length <= 1) return;\n    setDirection(1);\n    setCurrentIndex((prev) => (prev + 1) % albums.length);\n  }, [albums.length]);\n\n  const goToPrevious = useCallback(() => {\n    if (albums.length <= 1) return;\n    setDirection(-1);\n    setCurrentIndex((prev) => (prev - 1 + albums.length) % albums.length);\n  }, [albums.length]);\n\n  // Keyboard navigation\n  useEffect(() => {\n    const handleKeyDown = (e: KeyboardEvent) => {\n      if (e.key === 'ArrowLeft') {\n        e.preventDefault();\n        goToPrevious();\n      } else if (e.key === 'ArrowRight') {\n        e.preventDefault();\n        goToNext();\n      } else if (e.key === 'Enter' || e.key === ' ') {\n        e.preventDefault();\n        onSelectAlbum(albums[currentIndex]);\n      }\n    };\n\n    window.addEventListener('keydown', handleKeyDown);\n    return () => window.removeEventListener('keydown', handleKeyDown);\n  }, [goToNext, goToPrevious, currentIndex, albums, onSelectAlbum]);\n\n  // Swipe gesture handling\n  const handleDragEnd = (_: MouseEvent | TouchEvent | PointerEvent, info: PanInfo) => {\n    const swipeThreshold = 50;\n    if (info.offset.x > swipeThreshold) {\n      goToPrevious();\n    } else if (info.offset.x < -swipeThreshold) {\n      goToNext();\n    }\n  };\n\n  const currentAlbum = albums[currentIndex];\n  const isCurrentAlbumPlaying = currentAlbum?.tracks.some((t) => t.id === currentTrack.id);\n\n  // Calculate visible album indices for 3D effect\n  const getVisibleAlbums = () => {\n    if (albums.length <= 1) return [{ album: albums[0], offset: 0 }];\n\n    const visible: { album: Album; offset: number }[] = [];\n    for (let i = -1; i <= 1; i++) {\n      const index = (currentIndex + i + albums.length) % albums.length;\n      visible.push({ album: albums[index], offset: i });\n    }\n    return visible;\n  };\n\n  const variants = {\n    enter: (direction: number) => ({\n      x: direction > 0 ? 300 : -300,\n      opacity: 0,\n      scale: 0.8,\n      rotateY: direction > 0 ? 45 : -45,\n    }),\n    center: {\n      x: 0,\n      opacity: 1,\n      scale: 1,\n      rotateY: 0,\n    },\n    exit: (direction: number) => ({\n      x: direction < 0 ? 300 : -300,\n      opacity: 0,\n      scale: 0.8,\n      rotateY: direction < 0 ? 45 : -45,\n    }),\n  };\n\n  if (!currentAlbum) return null;\n\n  return (\n    <div className=\"relative w-full h-full flex flex-col items-center justify-center\">\n      {/* Carousel Container */}\n      <div\n        ref={containerRef}\n        className=\"relative w-full flex items-center justify-center\"\n        style={{ perspective: '1000px' }}\n      >\n        {/* Left Arrow */}\n        {albums.length > 1 && (\n          <button\n            onClick={goToPrevious}\n            className=\"absolute left-0 z-20 p-1.5 rounded-full bg-black/20 hover:bg-black/40 text-white/80 hover:text-white transition-all\"\n            aria-label=\"Previous album\"\n          >\n            <ChevronLeft className=\"w-5 h-5\" />\n          </button>\n        )}\n\n        {/* Album Cover with Vinyl Effect */}\n        <motion.div\n          className=\"relative cursor-pointer\"\n          drag=\"x\"\n          dragConstraints={{ left: 0, right: 0 }}\n          dragElastic={0.2}\n          onDragEnd={handleDragEnd}\n          onClick={() => onSelectAlbum(currentAlbum)}\n          whileHover={{ scale: 1.02 }}\n          whileTap={{ scale: 0.98 }}\n        >\n          <AnimatePresence mode=\"wait\" custom={direction}>\n            <motion.div\n              key={currentIndex}\n              custom={direction}\n              variants={variants}\n              initial=\"enter\"\n              animate=\"center\"\n              exit=\"exit\"\n              transition={{\n                x: { type: 'spring', stiffness: 300, damping: 30 },\n                opacity: { duration: 0.2 },\n                scale: { duration: 0.2 },\n                rotateY: { duration: 0.3 },\n              }}\n              className=\"relative\"\n              style={{ transformStyle: 'preserve-3d' }}\n            >\n              {/* Vinyl Record (behind the cover) */}\n              <motion.div\n                className=\"absolute top-1/2 left-1/2 w-[90%] h-[90%] rounded-full bg-gradient-to-br from-zinc-900 via-zinc-800 to-zinc-900 shadow-2xl\"\n                style={{\n                  transform: 'translate(-50%, -50%)',\n                  zIndex: -1,\n                }}\n                animate={{\n                  x: isCurrentAlbumPlaying && isPlaying ? 30 : 0,\n                  rotate: isCurrentAlbumPlaying && isPlaying ? [0, 360] : 0,\n                }}\n                transition={{\n                  x: { duration: 0.5, ease: 'easeOut' },\n                  rotate: {\n                    duration: 3,\n                    repeat: Infinity,\n                    ease: 'linear',\n                  },\n                }}\n              >\n                {/* Vinyl grooves */}\n                <div className=\"absolute inset-4 rounded-full border border-zinc-700/50\" />\n                <div className=\"absolute inset-8 rounded-full border border-zinc-700/30\" />\n                <div className=\"absolute inset-12 rounded-full border border-zinc-700/20\" />\n                {/* Center label */}\n                <div className=\"absolute top-1/2 left-1/2 w-8 h-8 -translate-x-1/2 -translate-y-1/2 rounded-full bg-gradient-to-br from-amber-600 to-amber-800 flex items-center justify-center\">\n                  <div className=\"w-2 h-2 rounded-full bg-zinc-900\" />\n                </div>\n              </motion.div>\n\n              {/* Album Cover */}\n              <div className=\"w-32 h-32 sm:w-36 sm:h-36 rounded-lg overflow-hidden shadow-2xl bg-zinc-800 ring-1 ring-white/10\">\n                {currentAlbum.albumArt ? (\n                  // eslint-disable-next-line @next/next/no-img-element\n                  <img\n                    src={currentAlbum.albumArt}\n                    alt={`${currentAlbum.name} cover`}\n                    className=\"w-full h-full object-cover\"\n                    draggable={false}\n                  />\n                ) : (\n                  <div className=\"w-full h-full flex items-center justify-center text-4xl\">\n                    ðŸŽµ\n                  </div>\n                )}\n              </div>\n\n              {/* Play indicator overlay */}\n              {isCurrentAlbumPlaying && (\n                <motion.div\n                  initial={{ opacity: 0 }}\n                  animate={{ opacity: 1 }}\n                  className=\"absolute inset-0 rounded-lg bg-black/30 flex items-center justify-center\"\n                >\n                  <motion.div\n                    className=\"p-2 rounded-full bg-white/20 backdrop-blur-sm\"\n                    animate={{ scale: isPlaying ? [1, 1.1, 1] : 1 }}\n                    transition={{ duration: 1, repeat: Infinity }}\n                  >\n                    {isPlaying ? (\n                      <Pause className=\"w-6 h-6 text-white\" />\n                    ) : (\n                      <Play className=\"w-6 h-6 text-white ml-0.5\" />\n                    )}\n                  </motion.div>\n                </motion.div>\n              )}\n            </motion.div>\n          </AnimatePresence>\n        </motion.div>\n\n        {/* Right Arrow */}\n        {albums.length > 1 && (\n          <button\n            onClick={goToNext}\n            className=\"absolute right-0 z-20 p-1.5 rounded-full bg-black/20 hover:bg-black/40 text-white/80 hover:text-white transition-all\"\n            aria-label=\"Next album\"\n          >\n            <ChevronRight className=\"w-5 h-5\" />\n          </button>\n        )}\n      </div>\n\n      {/* Album Info */}\n      <motion.div\n        key={currentIndex}\n        initial={{ opacity: 0, y: 10 }}\n        animate={{ opacity: 1, y: 0 }}\n        transition={{ duration: 0.3, delay: 0.1 }}\n        className=\"mt-3 text-center\"\n      >\n        <h3 className=\"text-sm font-bold text-[#1a2420] dark:text-[#8fa39a] font-mono truncate max-w-[180px]\">\n          {currentAlbum.name}\n        </h3>\n        <p className=\"text-xs text-[#3a4a45] dark:text-[#5a6a65] font-mono truncate max-w-[180px]\">\n          {currentAlbum.artist}\n        </p>\n        <p className=\"text-[10px] text-[#5a6a65] dark:text-[#4a5a55] font-mono mt-0.5\">\n          {currentAlbum.tracks.length} {currentAlbum.tracks.length === 1 ? 'track' : 'tracks'}\n        </p>\n      </motion.div>\n\n      {/* Dots indicator */}\n      {albums.length > 1 && (\n        <div className=\"flex gap-1.5 mt-2\">\n          {albums.map((_, index) => (\n            <button\n              key={index}\n              onClick={() => {\n                setDirection(index > currentIndex ? 1 : -1);\n                setCurrentIndex(index);\n              }}\n              className={`w-1.5 h-1.5 rounded-full transition-all ${\n                index === currentIndex\n                  ? 'bg-[#1a2420] dark:bg-[#8fa39a] w-3'\n                  : 'bg-[#5a6a65] dark:bg-[#3a4a45] hover:bg-[#3a4a45] dark:hover:bg-[#5a6a65]'\n              }`}\n              aria-label={`Go to album ${index + 1}`}\n            />\n          ))}\n        </div>\n      )}\n\n      {/* Hint text */}\n      <p className=\"text-[9px] text-[#5a6a65] dark:text-[#4a5a55] font-mono mt-2 opacity-60\">\n        Tap album to view tracks â€¢ Swipe or use arrow keys\n      </p>\n    </div>\n  );\n}\n\nexport type { Album };\nexport { groupTracksByAlbum };\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 2847, "column": 0}, "map": {"version":3,"sources":["file:///Users/jamesspalding/OpenClaw-OS/src/components/music/EphemeralMusicChat.tsx"],"sourcesContent":["'use client';\n\nimport { useState, useRef, useEffect, useCallback } from 'react';\nimport { motion, AnimatePresence } from 'framer-motion';\nimport { Sparkles, Send, X, ChevronDown, Mic } from 'lucide-react';\nimport { useStreamingChat, type ChatMessage } from '@/hooks/useStreamingChat';\nimport { useMusic } from '@/context/MusicContext';\n\ninterface EphemeralMusicChatProps {\n  /** Additional context to include (e.g., admin mode info) */\n  context?: string;\n  /** Whether the chat is in the admin panel */\n  isAdmin?: boolean;\n  /** Callback when AI suggests a track update */\n  onSuggestUpdate?: (field: string, value: string) => void;\n}\n\n/**\n * Ephemeral Claw AI chat for the music player.\n * Subtle, iOS-inspired design that doesn't take over the experience.\n * Can help with track annotation, metadata questions, and music discovery.\n */\nexport function EphemeralMusicChat({\n  context,\n  isAdmin = false,\n  onSuggestUpdate\n}: EphemeralMusicChatProps) {\n  const { currentTrack } = useMusic();\n  const [isExpanded, setIsExpanded] = useState(false);\n  const [inputValue, setInputValue] = useState('');\n  const [showResponse, setShowResponse] = useState(false);\n  const inputRef = useRef<HTMLInputElement>(null);\n  const responseTimeoutRef = useRef<NodeJS.Timeout | null>(null);\n\n  // Build context for Claw AI\n  const trackContext = currentTrack\n    ? `Current track: \"${currentTrack.title}\" by ${currentTrack.artist} from album \"${currentTrack.album}\".`\n    : '';\n\n  const fullContext = [\n    'You are helping with music annotation and metadata. Keep responses concise and helpful.',\n    isAdmin ? 'The user is an admin managing the music library.' : '',\n    trackContext,\n    context,\n  ].filter(Boolean).join(' ');\n\n  const {\n    messages,\n    isStreaming,\n    sendMessage,\n    clearMessages\n  } = useStreamingChat({\n    model: 'haiku', // Use fast model for ephemeral responses\n    themeContext: fullContext,\n    onStreamStart: () => setShowResponse(true),\n    onStreamEnd: () => {\n      // Auto-hide response after 30 seconds if not interacted with\n      if (responseTimeoutRef.current) {\n        clearTimeout(responseTimeoutRef.current);\n      }\n      responseTimeoutRef.current = setTimeout(() => {\n        if (!isExpanded) {\n          setShowResponse(false);\n        }\n      }, 30000);\n    },\n  });\n\n  // Cleanup timeout on unmount\n  useEffect(() => {\n    return () => {\n      if (responseTimeoutRef.current) {\n        clearTimeout(responseTimeoutRef.current);\n      }\n    };\n  }, []);\n\n  // Get the last assistant message\n  const lastResponse = messages.filter(m => m.role === 'assistant').slice(-1)[0];\n\n  const handleSubmit = useCallback(async (e?: React.FormEvent) => {\n    e?.preventDefault();\n    if (!inputValue.trim() || isStreaming) return;\n\n    const message = inputValue.trim();\n    setInputValue('');\n    await sendMessage(message);\n  }, [inputValue, isStreaming, sendMessage]);\n\n  const handleKeyDown = (e: React.KeyboardEvent) => {\n    if (e.key === 'Enter' && !e.shiftKey) {\n      e.preventDefault();\n      handleSubmit();\n    }\n    if (e.key === 'Escape') {\n      setIsExpanded(false);\n      setShowResponse(false);\n    }\n  };\n\n  const dismissResponse = useCallback(() => {\n    setShowResponse(false);\n    if (responseTimeoutRef.current) {\n      clearTimeout(responseTimeoutRef.current);\n    }\n  }, []);\n\n  const handleExpand = () => {\n    setIsExpanded(true);\n    // Focus input after animation\n    setTimeout(() => inputRef.current?.focus(), 100);\n  };\n\n  // Quick prompts for common tasks\n  const quickPrompts = isAdmin ? [\n    { label: 'Credits', prompt: 'Help me add credits for this track' },\n    { label: 'Tags', prompt: 'Suggest tags for this track' },\n    { label: 'Genre', prompt: 'What genre is this track?' },\n  ] : [\n    { label: 'Similar', prompt: 'Recommend similar tracks' },\n    { label: 'About', prompt: 'Tell me about this track' },\n  ];\n\n  return (\n    <div className=\"relative\">\n      {/* Response bubble - shows above input */}\n      <AnimatePresence>\n        {showResponse && lastResponse && (\n          <motion.div\n            initial={{ opacity: 0, y: 10, scale: 0.95 }}\n            animate={{ opacity: 1, y: 0, scale: 1 }}\n            exit={{ opacity: 0, y: 10, scale: 0.95 }}\n            transition={{ type: 'spring', stiffness: 400, damping: 30 }}\n            className=\"absolute bottom-full mb-3 left-0 right-0\"\n          >\n            <div className=\"relative bg-white/95 dark:bg-zinc-800/95 backdrop-blur-xl rounded-2xl p-3 shadow-lg border border-zinc-200/50 dark:border-zinc-700/50\">\n              {/* Dismiss button */}\n              <button\n                onClick={dismissResponse}\n                className=\"absolute -top-2 -right-2 p-1 rounded-full bg-zinc-200 dark:bg-zinc-700 text-zinc-500 dark:text-zinc-400 hover:bg-zinc-300 dark:hover:bg-zinc-600 transition-colors\"\n              >\n                <X className=\"w-3 h-3\" />\n              </button>\n\n              {/* Response content */}\n              <div className=\"text-sm text-zinc-700 dark:text-zinc-300 leading-relaxed\">\n                {lastResponse.isStreaming ? (\n                  <span className=\"flex items-center gap-2\">\n                    <motion.span\n                      className=\"inline-block w-1.5 h-1.5 rounded-full bg-yellow-500\"\n                      animate={{ opacity: [1, 0.3, 1] }}\n                      transition={{ duration: 1.2, repeat: Infinity }}\n                    />\n                    {lastResponse.content || 'Thinking...'}\n                  </span>\n                ) : (\n                  lastResponse.content\n                )}\n              </div>\n\n              {/* Tail pointer */}\n              <div className=\"absolute -bottom-2 left-6 w-4 h-4 bg-white/95 dark:bg-zinc-800/95 border-r border-b border-zinc-200/50 dark:border-zinc-700/50 transform rotate-45\" />\n            </div>\n          </motion.div>\n        )}\n      </AnimatePresence>\n\n      {/* Main chat interface */}\n      <AnimatePresence mode=\"wait\">\n        {isExpanded ? (\n          /* Expanded input */\n          <motion.form\n            key=\"expanded\"\n            initial={{ opacity: 0, scale: 0.95 }}\n            animate={{ opacity: 1, scale: 1 }}\n            exit={{ opacity: 0, scale: 0.95 }}\n            transition={{ type: 'spring', stiffness: 500, damping: 35 }}\n            onSubmit={handleSubmit}\n            className=\"flex flex-col gap-2\"\n          >\n            {/* Quick prompts */}\n            <div className=\"flex gap-1.5 overflow-x-auto pb-1 scrollbar-hide\">\n              {quickPrompts.map((qp) => (\n                <button\n                  key={qp.label}\n                  type=\"button\"\n                  onClick={() => {\n                    setInputValue(qp.prompt);\n                    inputRef.current?.focus();\n                  }}\n                  className=\"flex-shrink-0 px-2.5 py-1 text-xs rounded-full bg-zinc-100 dark:bg-zinc-800 text-zinc-600 dark:text-zinc-400 hover:bg-zinc-200 dark:hover:bg-zinc-700 transition-colors border border-zinc-200 dark:border-zinc-700\"\n                >\n                  {qp.label}\n                </button>\n              ))}\n            </div>\n\n            {/* Input row */}\n            <div className=\"flex items-center gap-2\">\n              <div className=\"flex-1 relative\">\n                <input\n                  ref={inputRef}\n                  type=\"text\"\n                  value={inputValue}\n                  onChange={(e) => setInputValue(e.target.value)}\n                  onKeyDown={handleKeyDown}\n                  placeholder=\"Ask about this track...\"\n                  disabled={isStreaming}\n                  className=\"w-full px-4 py-2.5 pr-10 text-sm rounded-full bg-zinc-100 dark:bg-zinc-800 text-zinc-800 dark:text-zinc-200 placeholder-zinc-400 dark:placeholder-zinc-500 border border-zinc-200 dark:border-zinc-700 focus:outline-none focus:border-yellow-500/50 focus:ring-2 focus:ring-yellow-500/20 transition-all disabled:opacity-50\"\n                />\n                {/* Send button inside input */}\n                <button\n                  type=\"submit\"\n                  disabled={!inputValue.trim() || isStreaming}\n                  className=\"absolute right-1.5 top-1/2 -translate-y-1/2 p-1.5 rounded-full bg-yellow-500 text-white disabled:opacity-30 disabled:bg-zinc-400 hover:bg-yellow-400 transition-colors\"\n                >\n                  <Send className=\"w-3.5 h-3.5\" />\n                </button>\n              </div>\n\n              {/* Collapse button */}\n              <button\n                type=\"button\"\n                onClick={() => setIsExpanded(false)}\n                className=\"p-2 rounded-full bg-zinc-100 dark:bg-zinc-800 text-zinc-500 dark:text-zinc-400 hover:bg-zinc-200 dark:hover:bg-zinc-700 transition-colors border border-zinc-200 dark:border-zinc-700\"\n              >\n                <ChevronDown className=\"w-4 h-4\" />\n              </button>\n            </div>\n          </motion.form>\n        ) : (\n          /* Collapsed pill button */\n          <motion.button\n            key=\"collapsed\"\n            initial={{ opacity: 0, scale: 0.95 }}\n            animate={{ opacity: 1, scale: 1 }}\n            exit={{ opacity: 0, scale: 0.95 }}\n            transition={{ type: 'spring', stiffness: 500, damping: 35 }}\n            onClick={handleExpand}\n            className=\"group w-full flex items-center gap-2 px-4 py-2.5 rounded-full bg-zinc-100/80 dark:bg-zinc-800/80 backdrop-blur-sm border border-zinc-200/50 dark:border-zinc-700/50 hover:bg-zinc-100 dark:hover:bg-zinc-800 hover:border-zinc-300 dark:hover:border-zinc-600 transition-all\"\n          >\n            <Sparkles className=\"w-4 h-4 text-yellow-500\" />\n            <span className=\"flex-1 text-left text-sm text-zinc-500 dark:text-zinc-400 group-hover:text-zinc-600 dark:group-hover:text-zinc-300 transition-colors\">\n              Ask Claw AI...\n            </span>\n            <Mic className=\"w-3.5 h-3.5 text-zinc-400 dark:text-zinc-500 opacity-0 group-hover:opacity-100 transition-opacity\" />\n          </motion.button>\n        )}\n      </AnimatePresence>\n    </div>\n  );\n}\n\nexport default EphemeralMusicChat;\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 3276, "column": 0}, "map": {"version":3,"sources":["file:///Users/jamesspalding/OpenClaw-OS/src/components/music/ExpandedNowPlaying.tsx"],"sourcesContent":["'use client';\n\nimport { useState, useRef, useEffect, useMemo } from 'react';\nimport { motion } from 'framer-motion';\nimport { Play, Pause, SkipBack, SkipForward, Repeat, Repeat1, Shuffle, ListMusic, Share, MoreHorizontal } from 'lucide-react';\nimport { useMusic } from '@/context/MusicContext';\nimport { type Track } from '@/data/tracks';\nimport { EphemeralMusicChat } from './EphemeralMusicChat';\n\ninterface ExpandedNowPlayingProps {\n  onShowQueue?: () => void;\n  onShowPlaylist?: () => void;\n}\n\n// Simple waveform visualization from audio data\nfunction Waveform({\n  currentTime,\n  duration,\n  onSeek,\n}: {\n  currentTime: number;\n  duration: number;\n  onSeek: (time: number) => void;\n}) {\n  const containerRef = useRef<HTMLDivElement>(null);\n  const [isDragging, setIsDragging] = useState(false);\n\n  // Generate fake waveform bars (in real app, analyze audio)\n  const bars = useMemo(() => {\n    const count = 80;\n    return Array.from({ length: count }, (_, i) => {\n      // Create a somewhat realistic waveform shape\n      const position = i / count;\n      const base = Math.sin(position * Math.PI) * 0.5 + 0.5;\n      const noise = Math.random() * 0.4;\n      return Math.max(0.1, Math.min(1, base + noise - 0.2));\n    });\n  }, []);\n\n  const progress = duration > 0 ? currentTime / duration : 0;\n\n  const handleClick = (e: React.MouseEvent<HTMLDivElement>) => {\n    if (!containerRef.current || duration <= 0) return;\n    const rect = containerRef.current.getBoundingClientRect();\n    const x = e.clientX - rect.left;\n    const percent = x / rect.width;\n    onSeek(percent * duration);\n  };\n\n  return (\n    <div\n      ref={containerRef}\n      className=\"relative h-24 cursor-pointer select-none\"\n      onClick={handleClick}\n    >\n      {/* Waveform bars */}\n      <div className=\"absolute inset-0 flex items-center justify-center gap-[2px]\">\n        {bars.map((height, i) => {\n          const barProgress = i / bars.length;\n          const isPlayed = barProgress <= progress;\n\n          return (\n            <div\n              key={i}\n              className=\"w-[3px] rounded-full transition-all duration-150 ease-out\"\n              style={{\n                height: `${height * 100}%`,\n                backgroundColor: isPlayed\n                  ? 'rgb(202 138 4)' // yellow-600 for light mode visibility\n                  : 'rgb(161 161 170)', // zinc-400 for light, works in dark too\n                transform: isPlayed ? 'scaleY(1.05)' : 'scaleY(1)',\n              }}\n            />\n          );\n        })}\n      </div>\n\n      {/* Playhead - smooth transition */}\n      <div\n        className=\"absolute top-0 bottom-0 w-[2px] bg-yellow-400 shadow-[0_0_8px_rgba(250,204,21,0.5)] transition-[left] duration-100 ease-linear\"\n        style={{ left: `${progress * 100}%` }}\n      />\n    </div>\n  );\n}\n\n// Format time as m:ss\nfunction formatTime(seconds: number): string {\n  if (isNaN(seconds) || seconds < 0) return '0:00';\n  const m = Math.floor(seconds / 60);\n  const s = Math.floor(seconds % 60);\n  return `${m}:${s.toString().padStart(2, '0')}`;\n}\n\n// Control button with press animation\nfunction ControlButton({\n  onClick,\n  children,\n  className = '',\n  title,\n}: {\n  onClick: () => void;\n  children: React.ReactNode;\n  className?: string;\n  title?: string;\n}) {\n  return (\n    <motion.button\n      onClick={onClick}\n      className={className}\n      whileTap={{ scale: 0.92 }}\n      transition={{ type: 'spring', stiffness: 500, damping: 30 }}\n      title={title}\n    >\n      {children}\n    </motion.button>\n  );\n}\n\nexport function ExpandedNowPlaying({ onShowQueue, onShowPlaylist }: ExpandedNowPlayingProps) {\n  const {\n    currentTrack,\n    isPlaying,\n    currentTime,\n    duration,\n    togglePlay,\n    skipToNext,\n    skipToPrevious,\n    audioRef,\n  } = useMusic();\n\n  const [repeatMode, setRepeatMode] = useState<'off' | 'all' | 'one'>('off');\n  const [shuffleOn, setShuffleOn] = useState(false);\n\n  // Seek to time\n  const handleSeek = (time: number) => {\n    if (audioRef.current) {\n      audioRef.current.currentTime = time;\n    }\n  };\n\n  const cycleRepeat = () => {\n    setRepeatMode((prev) =>\n      prev === 'off' ? 'all' : prev === 'all' ? 'one' : 'off'\n    );\n  };\n\n  return (\n    <div className=\"flex flex-col h-full bg-transparent text-zinc-800 dark:text-white p-4\">\n      {/* Track Info */}\n      <motion.div\n        className=\"text-center mb-6\"\n        initial={{ opacity: 0, y: -10 }}\n        animate={{ opacity: 1, y: 0 }}\n        transition={{ type: 'spring', stiffness: 300, damping: 25, delay: 0.1 }}\n      >\n        <h2 className=\"text-xl font-semibold truncate text-zinc-800 dark:text-white\">{currentTrack.title}</h2>\n        <p className=\"text-zinc-500 dark:text-zinc-400 text-sm\">{currentTrack.artist}</p>\n      </motion.div>\n\n      {/* Album Art */}\n      <motion.div\n        className=\"relative mx-auto w-full max-w-[280px] aspect-square rounded-lg overflow-hidden mb-6 shadow-2xl\"\n        initial={{ opacity: 0, scale: 0.95 }}\n        animate={{ opacity: 1, scale: 1 }}\n        transition={{ type: 'spring', stiffness: 300, damping: 25 }}\n      >\n        {currentTrack.albumArt ? (\n          // eslint-disable-next-line @next/next/no-img-element\n          <img\n            src={currentTrack.albumArt}\n            alt={currentTrack.album}\n            className=\"w-full h-full object-cover\"\n          />\n        ) : (\n          <div className=\"w-full h-full bg-zinc-300 dark:bg-zinc-800 flex items-center justify-center\">\n            <span className=\"text-6xl\">ðŸŽµ</span>\n          </div>\n        )}\n      </motion.div>\n\n      {/* Waveform */}\n      <div className=\"mb-4\">\n        <Waveform\n          currentTime={currentTime}\n          duration={duration}\n          onSeek={handleSeek}\n        />\n      </div>\n\n      {/* Time */}\n      <div className=\"flex justify-between text-xs text-zinc-500 dark:text-zinc-400 mb-6 font-mono\">\n        <span>{formatTime(currentTime)}</span>\n        <span>-{formatTime(Math.max(0, duration - currentTime))}</span>\n      </div>\n\n      {/* Main Controls */}\n      <div className=\"flex items-center justify-center gap-6 mb-6\">\n        <ControlButton\n          onClick={skipToPrevious}\n          className=\"p-2 text-zinc-600 dark:text-white/80 hover:text-zinc-900 dark:hover:text-white transition-colors\"\n          title=\"Previous\"\n        >\n          <SkipBack className=\"w-7 h-7\" fill=\"currentColor\" />\n        </ControlButton>\n\n        <motion.button\n          onClick={togglePlay}\n          className=\"p-4 bg-zinc-800 dark:bg-white rounded-full text-white dark:text-black hover:bg-zinc-700 dark:hover:bg-zinc-200 transition-colors\"\n          whileTap={{ scale: 0.9 }}\n          whileHover={{ scale: 1.05 }}\n          transition={{ type: 'spring', stiffness: 400, damping: 25 }}\n        >\n          <motion.div\n            initial={false}\n            animate={{ rotate: isPlaying ? 0 : 0 }}\n            transition={{ type: 'spring', stiffness: 300, damping: 20 }}\n          >\n            {isPlaying ? (\n              <Pause className=\"w-8 h-8\" fill=\"currentColor\" />\n            ) : (\n              <Play className=\"w-8 h-8 ml-1\" fill=\"currentColor\" />\n            )}\n          </motion.div>\n        </motion.button>\n\n        <ControlButton\n          onClick={skipToNext}\n          className=\"p-2 text-zinc-600 dark:text-white/80 hover:text-zinc-900 dark:hover:text-white transition-colors\"\n          title=\"Next\"\n        >\n          <SkipForward className=\"w-7 h-7\" fill=\"currentColor\" />\n        </ControlButton>\n      </div>\n\n      {/* Secondary Controls */}\n      <div className=\"flex items-center justify-center gap-8 mb-4\">\n        <ControlButton\n          onClick={() => setShuffleOn(!shuffleOn)}\n          className={`p-2 transition-colors ${\n            shuffleOn ? 'text-yellow-600 dark:text-yellow-400' : 'text-zinc-400 dark:text-zinc-500 hover:text-zinc-600 dark:hover:text-zinc-300'\n          }`}\n          title=\"Shuffle\"\n        >\n          <Shuffle className=\"w-5 h-5\" />\n        </ControlButton>\n\n        <ControlButton\n          onClick={cycleRepeat}\n          className={`p-2 transition-colors ${\n            repeatMode !== 'off' ? 'text-yellow-600 dark:text-yellow-400' : 'text-zinc-400 dark:text-zinc-500 hover:text-zinc-600 dark:hover:text-zinc-300'\n          }`}\n          title=\"Repeat\"\n        >\n          {repeatMode === 'one' ? (\n            <Repeat1 className=\"w-5 h-5\" />\n          ) : (\n            <Repeat className=\"w-5 h-5\" />\n          )}\n        </ControlButton>\n\n        <ControlButton\n          onClick={onShowQueue || (() => {})}\n          className=\"p-2 text-zinc-400 dark:text-zinc-500 hover:text-zinc-600 dark:hover:text-zinc-300 transition-colors\"\n          title=\"Queue\"\n        >\n          <ListMusic className=\"w-5 h-5\" />\n        </ControlButton>\n\n        <ControlButton\n          onClick={() => {}}\n          className=\"p-2 text-zinc-400 dark:text-zinc-500 hover:text-zinc-600 dark:hover:text-zinc-300 transition-colors\"\n          title=\"Share\"\n        >\n          <Share className=\"w-5 h-5\" />\n        </ControlButton>\n      </div>\n\n      {/* Ephemeral Claw AI Chat */}\n      <div className=\"mt-auto pt-2 border-t border-zinc-200/50 dark:border-zinc-700/50\">\n        <EphemeralMusicChat />\n      </div>\n    </div>\n  );\n}\n\nexport default ExpandedNowPlaying;\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 3761, "column": 0}, "map": {"version":3,"sources":["file:///Users/jamesspalding/OpenClaw-OS/src/components/music/LibraryBrowser.tsx"],"sourcesContent":["'use client';\n\nimport { useState, useMemo } from 'react';\nimport { motion, AnimatePresence } from 'framer-motion';\nimport { ChevronLeft, Play, Plus, Search, MoreHorizontal } from 'lucide-react';\nimport { useMusic } from '@/context/MusicContext';\nimport { tracks, type Track } from '@/data/tracks';\n\ninterface LibraryBrowserProps {\n  onClose?: () => void;\n}\n\n// Group tracks by album\nfunction groupByAlbum(tracks: Track[]): Map<string, { artist: string; albumArt: string; tracks: Track[] }> {\n  const albums = new Map<string, { artist: string; albumArt: string; tracks: Track[] }>();\n\n  for (const track of tracks) {\n    const key = `${track.album}::${track.artist}`;\n    if (!albums.has(key)) {\n      albums.set(key, {\n        artist: track.artist,\n        albumArt: track.albumArt,\n        tracks: [],\n      });\n    }\n    albums.get(key)!.tracks.push(track);\n  }\n\n  return albums;\n}\n\n// Album card component\nfunction AlbumCard({\n  name,\n  artist,\n  albumArt,\n  trackCount,\n  onClick,\n}: {\n  name: string;\n  artist: string;\n  albumArt: string;\n  trackCount: number;\n  onClick: () => void;\n}) {\n  return (\n    <button\n      onClick={onClick}\n      className=\"flex items-center gap-3 w-full p-2 rounded-lg hover:bg-zinc-200/50 dark:hover:bg-zinc-800/50 transition-colors text-left group\"\n    >\n      <div className=\"w-14 h-14 rounded-md overflow-hidden bg-zinc-300 dark:bg-zinc-800 flex-shrink-0\">\n        {albumArt ? (\n          // eslint-disable-next-line @next/next/no-img-element\n          <img src={albumArt} alt={name} className=\"w-full h-full object-cover\" />\n        ) : (\n          <div className=\"w-full h-full flex items-center justify-center text-2xl\">ðŸŽµ</div>\n        )}\n      </div>\n      <div className=\"flex-1 min-w-0\">\n        <div className=\"text-zinc-800 dark:text-white font-medium truncate\">{name}</div>\n        <div className=\"text-zinc-500 dark:text-zinc-400 text-sm truncate\">\n          {artist} Â· {trackCount} track{trackCount !== 1 ? 's' : ''}\n        </div>\n      </div>\n      <Play className=\"w-5 h-5 text-zinc-500 opacity-0 group-hover:opacity-100 transition-opacity\" />\n    </button>\n  );\n}\n\n// Track row component\nfunction TrackRow({\n  track,\n  index,\n  isPlaying,\n  isCurrent,\n  onPlay,\n}: {\n  track: Track;\n  index: number;\n  isPlaying: boolean;\n  isCurrent: boolean;\n  onPlay: () => void;\n}) {\n  return (\n    <button\n      onClick={onPlay}\n      className={`flex items-center gap-3 w-full p-3 rounded-lg transition-colors text-left group ${\n        isCurrent ? 'bg-zinc-300 dark:bg-zinc-800' : 'hover:bg-zinc-200/50 dark:hover:bg-zinc-800/50'\n      }`}\n    >\n      <span className=\"w-6 text-center text-sm text-zinc-500 font-mono\">\n        {isCurrent && isPlaying ? (\n          <span className=\"text-yellow-400\">â–¶</span>\n        ) : (\n          index + 1\n        )}\n      </span>\n      <div className=\"flex-1 min-w-0\">\n        <div className={`font-medium truncate ${isCurrent ? 'text-yellow-600 dark:text-yellow-400' : 'text-zinc-800 dark:text-white'}`}>\n          {track.title}\n        </div>\n        <div className=\"text-zinc-500 dark:text-zinc-400 text-sm truncate\">{track.artist}</div>\n      </div>\n      <button className=\"p-1 text-zinc-500 opacity-0 group-hover:opacity-100 transition-opacity\">\n        <MoreHorizontal className=\"w-4 h-4\" />\n      </button>\n    </button>\n  );\n}\n\ntype View = 'library' | 'album';\n\nexport function LibraryBrowser({ onClose }: LibraryBrowserProps) {\n  const { currentTrack, isPlaying, selectTrack } = useMusic();\n  const [view, setView] = useState<View>('library');\n  const [selectedAlbum, setSelectedAlbum] = useState<string | null>(null);\n  const [searchQuery, setSearchQuery] = useState('');\n\n  const albums = useMemo(() => groupByAlbum(tracks), []);\n\n  const albumList = useMemo(() => {\n    return Array.from(albums.entries()).map(([key, data]) => ({\n      key,\n      name: key.split('::')[0],\n      ...data,\n    }));\n  }, [albums]);\n\n  const filteredAlbums = useMemo(() => {\n    if (!searchQuery) return albumList;\n    const q = searchQuery.toLowerCase();\n    return albumList.filter(\n      (a) =>\n        a.name.toLowerCase().includes(q) ||\n        a.artist.toLowerCase().includes(q)\n    );\n  }, [albumList, searchQuery]);\n\n  const selectedAlbumData = selectedAlbum ? albums.get(selectedAlbum) : null;\n  const selectedAlbumName = selectedAlbum?.split('::')[0] || '';\n\n  const handleSelectAlbum = (key: string) => {\n    setSelectedAlbum(key);\n    setView('album');\n  };\n\n  const handleBack = () => {\n    setView('library');\n    setSelectedAlbum(null);\n  };\n\n  const handlePlayTrack = (track: Track) => {\n    selectTrack(track);\n  };\n\n  const handlePlayAll = () => {\n    if (selectedAlbumData && selectedAlbumData.tracks.length > 0) {\n      selectTrack(selectedAlbumData.tracks[0]);\n    }\n  };\n\n  return (\n    <div className=\"flex flex-col h-full bg-transparent text-zinc-800 dark:text-white\">\n      {/* Header */}\n      <div className=\"flex items-center gap-3 p-4 border-b border-zinc-300 dark:border-zinc-700\">\n        {view === 'album' && (\n          <button\n            onClick={handleBack}\n            className=\"p-1 text-zinc-400 hover:text-white transition-colors\"\n          >\n            <ChevronLeft className=\"w-6 h-6\" />\n          </button>\n        )}\n        <h2 className=\"text-lg font-semibold flex-1\">\n          {view === 'library' ? 'Library' : selectedAlbumName}\n        </h2>\n        {view === 'library' && (\n          <button className=\"p-1 text-zinc-400 hover:text-white transition-colors\">\n            <Search className=\"w-5 h-5\" />\n          </button>\n        )}\n      </div>\n\n      {/* Search (library view) */}\n      {view === 'library' && (\n        <div className=\"p-4 pb-2\">\n          <div className=\"relative\">\n            <Search className=\"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-zinc-500\" />\n            <input\n              type=\"text\"\n              placeholder=\"Search albums...\"\n              value={searchQuery}\n              onChange={(e) => setSearchQuery(e.target.value)}\n              className=\"w-full bg-zinc-200/50 dark:bg-zinc-800/50 border border-zinc-300 dark:border-zinc-700 rounded-lg pl-10 pr-4 py-2 text-sm text-zinc-800 dark:text-white placeholder-zinc-500 focus:outline-none focus:border-zinc-400 dark:focus:border-zinc-600\"\n            />\n          </div>\n        </div>\n      )}\n\n      {/* Content */}\n      <div className=\"flex-1 overflow-auto\">\n        <AnimatePresence mode=\"wait\">\n          {view === 'library' ? (\n            <motion.div\n              key=\"library\"\n              initial={{ opacity: 0, x: -15 }}\n              animate={{ opacity: 1, x: 0 }}\n              exit={{ opacity: 0, x: -15 }}\n              transition={{ type: 'spring', stiffness: 350, damping: 30 }}\n              className=\"p-4 pt-2 space-y-1\"\n            >\n              {filteredAlbums.map((album) => (\n                <AlbumCard\n                  key={album.key}\n                  name={album.name}\n                  artist={album.artist}\n                  albumArt={album.albumArt}\n                  trackCount={album.tracks.length}\n                  onClick={() => handleSelectAlbum(album.key)}\n                />\n              ))}\n\n              {filteredAlbums.length === 0 && (\n                <div className=\"text-center py-8 text-zinc-500\">\n                  No albums found\n                </div>\n              )}\n            </motion.div>\n          ) : (\n            <motion.div\n              key=\"album\"\n              initial={{ opacity: 0, x: 15 }}\n              animate={{ opacity: 1, x: 0 }}\n              exit={{ opacity: 0, x: 15 }}\n              transition={{ type: 'spring', stiffness: 350, damping: 30 }}\n            >\n              {/* Album Header */}\n              {selectedAlbumData && (\n                <div className=\"p-4\">\n                  <div className=\"flex gap-4 mb-4\">\n                    <div className=\"w-24 h-24 rounded-lg overflow-hidden bg-zinc-300 dark:bg-zinc-800 flex-shrink-0 shadow-lg\">\n                      {selectedAlbumData.albumArt ? (\n                        // eslint-disable-next-line @next/next/no-img-element\n                        <img\n                          src={selectedAlbumData.albumArt}\n                          alt={selectedAlbumName}\n                          className=\"w-full h-full object-cover\"\n                        />\n                      ) : (\n                        <div className=\"w-full h-full flex items-center justify-center text-3xl\">ðŸŽµ</div>\n                      )}\n                    </div>\n                    <div className=\"flex-1 min-w-0\">\n                      <h3 className=\"text-xl font-semibold truncate text-zinc-800 dark:text-white\">{selectedAlbumName}</h3>\n                      <p className=\"text-zinc-500 dark:text-zinc-400 text-sm\">{selectedAlbumData.artist}</p>\n                      <p className=\"text-zinc-400 dark:text-zinc-500 text-sm\">\n                        {selectedAlbumData.tracks.length} track{selectedAlbumData.tracks.length !== 1 ? 's' : ''}\n                      </p>\n                    </div>\n                  </div>\n\n                  {/* Play All / Add */}\n                  <div className=\"flex gap-2\">\n                    <button\n                      onClick={handlePlayAll}\n                      className=\"flex-1 flex items-center justify-center gap-2 bg-yellow-400 text-black font-medium py-2 rounded-lg hover:bg-yellow-300 transition-colors\"\n                    >\n                      <Play className=\"w-4 h-4\" fill=\"currentColor\" />\n                      Play\n                    </button>\n                    <button className=\"px-4 py-2 bg-zinc-300 dark:bg-zinc-800 text-zinc-800 dark:text-white rounded-lg hover:bg-zinc-400 dark:hover:bg-zinc-700 transition-colors\">\n                      <Plus className=\"w-4 h-4\" />\n                    </button>\n                  </div>\n                </div>\n              )}\n\n              {/* Track List */}\n              <div className=\"px-2\">\n                {selectedAlbumData?.tracks.map((track, i) => (\n                  <TrackRow\n                    key={track.id}\n                    track={track}\n                    index={i}\n                    isPlaying={isPlaying}\n                    isCurrent={track.id === currentTrack.id}\n                    onPlay={() => handlePlayTrack(track)}\n                  />\n                ))}\n              </div>\n            </motion.div>\n          )}\n        </AnimatePresence>\n      </div>\n    </div>\n  );\n}\n\nexport default LibraryBrowser;\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 4328, "column": 0}, "map": {"version":3,"sources":["file:///Users/jamesspalding/OpenClaw-OS/src/components/music/AdminPanels.tsx"],"sourcesContent":["'use client';\n\nimport { useState, useCallback, useRef } from 'react';\nimport { motion, AnimatePresence } from 'framer-motion';\nimport { useQuery, useMutation } from '@/lib/openclaw/hooks';\nimport { api } from '@/lib/convex-shim';\nimport type { Id } from '../../../convex/_generated/dataModel';\nimport {\n  Music2,\n  Users,\n  Plus,\n  Trash2,\n  Check,\n  X,\n  UserPlus,\n  Mail,\n  Shield,\n  User,\n  Loader2,\n  Upload,\n  ToggleLeft,\n  ToggleRight,\n  Link2,\n  Copy,\n  CheckCircle,\n  Clock,\n  RefreshCw,\n  Music,\n  ListMusic,\n  ChevronDown,\n  ChevronUp,\n} from 'lucide-react';\n\n// ============================================================================\n// Admin Tracks Panel - Left side panel for managing tracks\n// ============================================================================\n\ninterface TrackWithCollaborators {\n  id: Id<'privateTracks'>;\n  title: string;\n  artist: string;\n  album?: string;\n  albumArt?: string;\n  audioUrl: string;\n  notes?: string;\n  allowedUserIds: string[];\n  createdAt: number;\n  updatedAt: number;\n}\n\nexport function AdminTracksPanel() {\n  const tracks = useQuery(api.privateMusic.listAllPrivateTracks) || [];\n  const collaborators = useQuery(api.collaborators.listCollaboratorsWithResources) || [];\n  const addTrack = useMutation(api.privateMusic.addPrivateTrack);\n  const deleteTrack = useMutation(api.privateMusic.deletePrivateTrack);\n  const assignToResource = useMutation(api.collaborators.assignToResource);\n  const removeFromResource = useMutation(api.collaborators.removeFromResource);\n\n  const [showAddForm, setShowAddForm] = useState(false);\n  const [isAdding, setIsAdding] = useState(false);\n  const [isUploading, setIsUploading] = useState(false);\n  const [uploadProgress, setUploadProgress] = useState<string | null>(null);\n  const [isDragOver, setIsDragOver] = useState(false);\n  const [expandedTrackId, setExpandedTrackId] = useState<string | null>(null);\n  const fileInputRef = useRef<HTMLInputElement>(null);\n\n  const [formData, setFormData] = useState({\n    title: '',\n    artist: '',\n    album: '',\n    audioUrl: '',\n    albumArt: '',\n    notes: '',\n  });\n\n  // Get resource collaborators for a track\n  const trackCollaborators = useQuery(\n    api.collaborators.listResourceCollaborators,\n    expandedTrackId\n      ? { resourceType: 'track' as const, resourceId: expandedTrackId }\n      : 'skip'\n  ) || [];\n\n  // Upload file to Vercel Blob\n  const uploadFile = useCallback(async (file: File, type: 'audio' | 'image'): Promise<string | null> => {\n    try {\n      const formData = new FormData();\n      formData.append('file', file);\n      formData.append('type', type);\n\n      const response = await fetch('/api/tracks/upload', {\n        method: 'POST',\n        body: formData,\n      });\n\n      if (!response.ok) {\n        const error = await response.json();\n        throw new Error(error.error || 'Upload failed');\n      }\n\n      const result = await response.json();\n      return result.url;\n    } catch (error) {\n      console.error('Upload error:', error);\n      return null;\n    }\n  }, []);\n\n  // Handle file drop\n  const handleDrop = useCallback(async (e: React.DragEvent) => {\n    e.preventDefault();\n    setIsDragOver(false);\n\n    const files = Array.from(e.dataTransfer.files);\n    const audioFiles = files.filter(f =>\n      f.type.startsWith('audio/') ||\n      f.name.endsWith('.mp3') ||\n      f.name.endsWith('.m4a') ||\n      f.name.endsWith('.wav')\n    );\n\n    if (audioFiles.length === 0) return;\n\n    setIsUploading(true);\n\n    for (const file of audioFiles) {\n      setUploadProgress(`Uploading ${file.name}...`);\n\n      const audioUrl = await uploadFile(file, 'audio');\n      if (audioUrl) {\n        // Extract title from filename (remove extension)\n        const title = file.name.replace(/\\.[^/.]+$/, '').replace(/_/g, ' ');\n\n        setUploadProgress(`Adding ${title}...`);\n\n        await addTrack({\n          title,\n          artist: 'Unknown Artist',\n          audioUrl,\n        });\n      }\n    }\n\n    setIsUploading(false);\n    setUploadProgress(null);\n  }, [uploadFile, addTrack]);\n\n  const handleDragOver = useCallback((e: React.DragEvent) => {\n    e.preventDefault();\n    setIsDragOver(true);\n  }, []);\n\n  const handleDragLeave = useCallback((e: React.DragEvent) => {\n    e.preventDefault();\n    setIsDragOver(false);\n  }, []);\n\n  // Handle file input change (for click-to-upload)\n  const handleFileSelect = useCallback(async (e: React.ChangeEvent<HTMLInputElement>) => {\n    const files = e.target.files;\n    if (!files || files.length === 0) return;\n\n    setIsUploading(true);\n\n    for (const file of Array.from(files)) {\n      setUploadProgress(`Uploading ${file.name}...`);\n\n      const audioUrl = await uploadFile(file, 'audio');\n      if (audioUrl) {\n        const title = file.name.replace(/\\.[^/.]+$/, '').replace(/_/g, ' ');\n        setUploadProgress(`Adding ${title}...`);\n\n        await addTrack({\n          title,\n          artist: 'Unknown Artist',\n          audioUrl,\n        });\n      }\n    }\n\n    setIsUploading(false);\n    setUploadProgress(null);\n    if (fileInputRef.current) {\n      fileInputRef.current.value = '';\n    }\n  }, [uploadFile, addTrack]);\n\n  const handleAdd = async () => {\n    if (!formData.title || !formData.artist || !formData.audioUrl) return;\n    setIsAdding(true);\n    try {\n      await addTrack({\n        title: formData.title,\n        artist: formData.artist,\n        album: formData.album || undefined,\n        audioUrl: formData.audioUrl,\n        albumArt: formData.albumArt || undefined,\n        notes: formData.notes || undefined,\n      });\n      setFormData({ title: '', artist: '', album: '', audioUrl: '', albumArt: '', notes: '' });\n      setShowAddForm(false);\n    } finally {\n      setIsAdding(false);\n    }\n  };\n\n  const handleDelete = async (id: Id<'privateTracks'>) => {\n    if (confirm('Delete this track?')) {\n      await deleteTrack({ trackId: id });\n    }\n  };\n\n  const handleAssignCollaborator = async (trackId: string, managedUserId: Id<'managedUsers'>) => {\n    await assignToResource({\n      managedUserId,\n      resourceType: 'track',\n      resourceId: trackId,\n      accessLevel: 'view',\n    });\n  };\n\n  const handleRemoveCollaborator = async (trackId: string, managedUserId: Id<'managedUsers'>) => {\n    await removeFromResource({\n      managedUserId,\n      resourceType: 'track',\n      resourceId: trackId,\n    });\n  };\n\n  const toggleTrackExpand = (trackId: string) => {\n    setExpandedTrackId(expandedTrackId === trackId ? null : trackId);\n  };\n\n  // Filter collaborators who don't have system-wide privateMusic access (they already see all)\n  const assignableCollaborators = collaborators.filter(\n    c => !c.permissions.privateMusic && c.role !== 'owner' && c.role !== 'admin'\n  );\n\n  return (\n    <div\n      className=\"flex flex-col h-full bg-transparent text-zinc-800 dark:text-white\"\n      onDrop={handleDrop}\n      onDragOver={handleDragOver}\n      onDragLeave={handleDragLeave}\n    >\n      {/* Drag overlay */}\n      <AnimatePresence>\n        {isDragOver && (\n          <motion.div\n            initial={{ opacity: 0 }}\n            animate={{ opacity: 1 }}\n            exit={{ opacity: 0 }}\n            className=\"absolute inset-0 z-50 bg-amber-500/20 backdrop-blur-sm border-2 border-dashed border-amber-500 rounded-2xl flex items-center justify-center\"\n          >\n            <div className=\"text-center\">\n              <Upload className=\"w-12 h-12 text-amber-500 mx-auto mb-2\" />\n              <p className=\"text-amber-600 dark:text-amber-400 font-medium\">Drop audio files here</p>\n              <p className=\"text-sm text-amber-500/70\">MP3, M4A, WAV supported</p>\n            </div>\n          </motion.div>\n        )}\n      </AnimatePresence>\n\n      {/* Upload progress overlay */}\n      <AnimatePresence>\n        {isUploading && (\n          <motion.div\n            initial={{ opacity: 0 }}\n            animate={{ opacity: 1 }}\n            exit={{ opacity: 0 }}\n            className=\"absolute inset-0 z-50 bg-white/80 dark:bg-zinc-900/80 backdrop-blur-sm rounded-2xl flex items-center justify-center\"\n          >\n            <div className=\"text-center\">\n              <Loader2 className=\"w-8 h-8 text-amber-500 animate-spin mx-auto mb-2\" />\n              <p className=\"text-zinc-800 dark:text-zinc-200 font-medium\">{uploadProgress}</p>\n            </div>\n          </motion.div>\n        )}\n      </AnimatePresence>\n\n      {/* Header */}\n      <div className=\"flex items-center gap-3 p-4 border-b border-zinc-300 dark:border-zinc-700\">\n        <div className=\"p-2 rounded-lg bg-amber-100 dark:bg-amber-900/40\">\n          <Music2 className=\"w-4 h-4 text-amber-600 dark:text-amber-400\" />\n        </div>\n        <div className=\"flex-1\">\n          <h2 className=\"text-lg font-semibold\">Tracks</h2>\n          <p className=\"text-xs text-zinc-500 dark:text-zinc-400\">{tracks.length} private tracks</p>\n        </div>\n      </div>\n\n      {/* Content */}\n      <div className=\"flex-1 overflow-y-auto p-4 relative\">\n        {/* Hidden file input */}\n        <input\n          ref={fileInputRef}\n          type=\"file\"\n          accept=\"audio/*\"\n          multiple\n          onChange={handleFileSelect}\n          className=\"hidden\"\n        />\n\n        {/* Drop Zone / Add Button */}\n        <button\n          onClick={() => fileInputRef.current?.click()}\n          className=\"w-full flex flex-col items-center justify-center gap-2 p-4 mb-4 rounded-lg border-2 border-dashed border-zinc-300 dark:border-zinc-600 hover:border-amber-400 dark:hover:border-amber-500 hover:bg-amber-50 dark:hover:bg-amber-900/20 transition-colors text-zinc-500 dark:text-zinc-400 hover:text-amber-600 dark:hover:text-amber-400\"\n        >\n          <Upload className=\"w-5 h-5\" />\n          <span className=\"text-sm font-medium\">Drop files or click to upload</span>\n          <span className=\"text-xs opacity-60\">MP3, M4A, WAV</span>\n        </button>\n\n        {/* Manual Add Button */}\n        <button\n          onClick={() => setShowAddForm(!showAddForm)}\n          className=\"w-full flex items-center justify-center gap-2 p-2 mb-4 rounded-lg text-zinc-500 dark:text-zinc-400 hover:text-amber-600 dark:hover:text-amber-400 hover:bg-zinc-100 dark:hover:bg-zinc-800 transition-colors text-sm\"\n        >\n          <Plus className=\"w-4 h-4\" />\n          <span>Add by URL</span>\n        </button>\n\n        {/* Add Track Form */}\n        <AnimatePresence>\n          {showAddForm && (\n            <motion.div\n              initial={{ height: 0, opacity: 0 }}\n              animate={{ height: 'auto', opacity: 1 }}\n              exit={{ height: 0, opacity: 0 }}\n              className=\"overflow-hidden mb-4\"\n            >\n              <div className=\"p-3 bg-zinc-100 dark:bg-zinc-800 rounded-lg space-y-2\">\n                <input\n                  type=\"text\"\n                  placeholder=\"Title *\"\n                  value={formData.title}\n                  onChange={(e) => setFormData({ ...formData, title: e.target.value })}\n                  className=\"w-full px-3 py-2 rounded-md bg-white dark:bg-zinc-700 border border-zinc-200 dark:border-zinc-600 text-sm text-zinc-800 dark:text-zinc-200 placeholder:text-zinc-400\"\n                />\n                <input\n                  type=\"text\"\n                  placeholder=\"Artist *\"\n                  value={formData.artist}\n                  onChange={(e) => setFormData({ ...formData, artist: e.target.value })}\n                  className=\"w-full px-3 py-2 rounded-md bg-white dark:bg-zinc-700 border border-zinc-200 dark:border-zinc-600 text-sm text-zinc-800 dark:text-zinc-200 placeholder:text-zinc-400\"\n                />\n                <input\n                  type=\"text\"\n                  placeholder=\"Audio URL *\"\n                  value={formData.audioUrl}\n                  onChange={(e) => setFormData({ ...formData, audioUrl: e.target.value })}\n                  className=\"w-full px-3 py-2 rounded-md bg-white dark:bg-zinc-700 border border-zinc-200 dark:border-zinc-600 text-sm text-zinc-800 dark:text-zinc-200 placeholder:text-zinc-400\"\n                />\n                <input\n                  type=\"text\"\n                  placeholder=\"Album (optional)\"\n                  value={formData.album}\n                  onChange={(e) => setFormData({ ...formData, album: e.target.value })}\n                  className=\"w-full px-3 py-2 rounded-md bg-white dark:bg-zinc-700 border border-zinc-200 dark:border-zinc-600 text-sm text-zinc-800 dark:text-zinc-200 placeholder:text-zinc-400\"\n                />\n                <input\n                  type=\"text\"\n                  placeholder=\"Album Art URL (optional)\"\n                  value={formData.albumArt}\n                  onChange={(e) => setFormData({ ...formData, albumArt: e.target.value })}\n                  className=\"w-full px-3 py-2 rounded-md bg-white dark:bg-zinc-700 border border-zinc-200 dark:border-zinc-600 text-sm text-zinc-800 dark:text-zinc-200 placeholder:text-zinc-400\"\n                />\n                <div className=\"flex justify-end gap-2 pt-2\">\n                  <button\n                    onClick={() => setShowAddForm(false)}\n                    className=\"px-3 py-1.5 text-sm text-zinc-600 dark:text-zinc-400 hover:text-zinc-800 dark:hover:text-zinc-200\"\n                  >\n                    Cancel\n                  </button>\n                  <button\n                    onClick={handleAdd}\n                    disabled={isAdding || !formData.title || !formData.artist || !formData.audioUrl}\n                    className=\"px-4 py-1.5 text-sm font-medium text-white bg-amber-500 hover:bg-amber-600 disabled:opacity-50 disabled:cursor-not-allowed rounded-md flex items-center gap-2\"\n                  >\n                    {isAdding ? <Loader2 className=\"w-3 h-3 animate-spin\" /> : <Check className=\"w-3 h-3\" />}\n                    Add\n                  </button>\n                </div>\n              </div>\n            </motion.div>\n          )}\n        </AnimatePresence>\n\n        {/* Track List */}\n        <div className=\"space-y-2\">\n          {tracks.length === 0 ? (\n            <div className=\"text-center py-8 text-zinc-500 dark:text-zinc-400 text-sm\">\n              No private tracks yet\n            </div>\n          ) : (\n            tracks.map((track, index) => {\n              const isExpanded = expandedTrackId === track.id;\n              return (\n                <motion.div\n                  key={track.id}\n                  initial={{ opacity: 0, y: 8 }}\n                  animate={{ opacity: 1, y: 0 }}\n                  transition={{ delay: index * 0.03 }}\n                  className=\"bg-white/50 dark:bg-zinc-800/50 rounded-lg border border-zinc-200 dark:border-zinc-700 overflow-hidden\"\n                >\n                  <div className=\"flex items-center gap-3 p-2 group\">\n                    {track.albumArt ? (\n                      <img\n                        src={track.albumArt}\n                        alt=\"\"\n                        className=\"w-10 h-10 rounded object-cover\"\n                      />\n                    ) : (\n                      <div className=\"w-10 h-10 rounded bg-zinc-200 dark:bg-zinc-700 flex items-center justify-center\">\n                        <Music2 className=\"w-5 h-5 text-zinc-400\" />\n                      </div>\n                    )}\n                    <div className=\"flex-1 min-w-0\">\n                      <div className=\"font-medium text-sm text-zinc-800 dark:text-zinc-200 truncate\">\n                        {track.title}\n                      </div>\n                      <div className=\"text-xs text-zinc-500 dark:text-zinc-400 truncate\">\n                        {track.artist}\n                      </div>\n                    </div>\n                    <div className=\"flex items-center gap-1\">\n                      {assignableCollaborators.length > 0 && (\n                        <button\n                          onClick={() => toggleTrackExpand(track.id)}\n                          className=\"p-1.5 rounded hover:bg-zinc-200 dark:hover:bg-zinc-700 text-zinc-400 hover:text-zinc-600 dark:hover:text-zinc-300 transition-colors\"\n                          title=\"Manage access\"\n                        >\n                          <Users className=\"w-4 h-4\" />\n                        </button>\n                      )}\n                      <button\n                        onClick={() => handleDelete(track.id)}\n                        className=\"p-1.5 rounded hover:bg-red-100 dark:hover:bg-red-900/30 text-zinc-400 hover:text-red-500 transition-colors opacity-0 group-hover:opacity-100\"\n                        title=\"Delete track\"\n                      >\n                        <Trash2 className=\"w-4 h-4\" />\n                      </button>\n                    </div>\n                  </div>\n\n                  {/* Expanded collaborator assignment */}\n                  <AnimatePresence>\n                    {isExpanded && (\n                      <motion.div\n                        initial={{ height: 0, opacity: 0 }}\n                        animate={{ height: 'auto', opacity: 1 }}\n                        exit={{ height: 0, opacity: 0 }}\n                        className=\"border-t border-zinc-200 dark:border-zinc-700\"\n                      >\n                        <div className=\"p-3 bg-zinc-50 dark:bg-zinc-800/50\">\n                          <p className=\"text-xs text-zinc-500 dark:text-zinc-400 mb-2\">\n                            Grant access to specific collaborators:\n                          </p>\n                          <div className=\"flex flex-wrap gap-2\">\n                            {assignableCollaborators.map(collab => {\n                              const hasAccess = trackCollaborators.some(\n                                tc => tc.managedUserId === collab.id\n                              );\n                              return (\n                                <button\n                                  key={collab.id}\n                                  onClick={() =>\n                                    hasAccess\n                                      ? handleRemoveCollaborator(track.id, collab.id)\n                                      : handleAssignCollaborator(track.id, collab.id)\n                                  }\n                                  className={`inline-flex items-center gap-1.5 px-2.5 py-1 rounded-full text-xs transition-colors ${\n                                    hasAccess\n                                      ? 'bg-amber-100 dark:bg-amber-900/40 text-amber-700 dark:text-amber-300'\n                                      : 'bg-zinc-100 dark:bg-zinc-700 text-zinc-600 dark:text-zinc-400 hover:bg-zinc-200 dark:hover:bg-zinc-600'\n                                  }`}\n                                >\n                                  {hasAccess && <Check className=\"w-3 h-3\" />}\n                                  {collab.displayName || collab.email.split('@')[0]}\n                                </button>\n                              );\n                            })}\n                            {assignableCollaborators.length === 0 && (\n                              <p className=\"text-xs text-zinc-400 italic\">\n                                All collaborators have full music access\n                              </p>\n                            )}\n                          </div>\n                        </div>\n                      </motion.div>\n                    )}\n                  </AnimatePresence>\n                </motion.div>\n              );\n            })\n          )}\n        </div>\n      </div>\n    </div>\n  );\n}\n\n// ============================================================================\n// Admin Collaborators Panel - Right side panel for managing collaborators\n// ============================================================================\n\nexport function AdminCollaboratorsPanel() {\n  // Use the new system-wide collaborators query\n  const collaborators = useQuery(api.collaborators.listCollaboratorsWithResources) || [];\n  const pendingInvites = useQuery(api.collaborators.listPendingInvites) || [];\n\n  // New invite system mutations\n  const createInvite = useMutation(api.collaborators.createInvite);\n  const revokeInvite = useMutation(api.collaborators.revokeInvite);\n  const regenerateInvite = useMutation(api.collaborators.regenerateInvite);\n\n  // Legacy mutations for backwards compatibility\n  const removeCollaborator = useMutation(api.privateMusic.removeCollaborator);\n  const updateCollaborator = useMutation(api.privateMusic.updateCollaborator);\n\n  const [showInvite, setShowInvite] = useState(false);\n  const [isInviting, setIsInviting] = useState(false);\n  const [copiedId, setCopiedId] = useState<string | null>(null);\n  const [generatedInviteLink, setGeneratedInviteLink] = useState<string | null>(null);\n  const [inviteData, setInviteData] = useState({\n    email: '',\n    displayName: '',\n    role: 'collaborator' as 'collaborator' | 'admin' | 'viewer',\n    privateMusic: true,\n  });\n\n  const handleCreateInvite = async () => {\n    if (!inviteData.email) return;\n    setIsInviting(true);\n    try {\n      const result = await createInvite({\n        email: inviteData.email,\n        role: inviteData.role,\n        permissions: {\n          areas: [],\n          privateMusic: inviteData.privateMusic,\n          designCanvas: false,\n          clawAI: true,\n          security: false,\n          analytics: false,\n          manageUsers: inviteData.role === 'admin',\n          managePasscodes: inviteData.role === 'admin',\n          manageContent: inviteData.role === 'admin',\n        },\n      });\n\n      if (result.success && result.token) {\n        const inviteUrl = `${window.location.origin}/invite/${result.token}`;\n        setGeneratedInviteLink(inviteUrl);\n        navigator.clipboard.writeText(inviteUrl);\n      }\n    } finally {\n      setIsInviting(false);\n    }\n  };\n\n  const handleCopyInviteLink = async (token: string) => {\n    const inviteUrl = `${window.location.origin}/invite/${token}`;\n    await navigator.clipboard.writeText(inviteUrl);\n    setCopiedId(token);\n    setTimeout(() => setCopiedId(null), 2000);\n  };\n\n  const handleRegenerateInvite = async (inviteId: Id<'collaboratorInvites'>) => {\n    const result = await regenerateInvite({ inviteId });\n    if (result.success && result.token) {\n      const inviteUrl = `${window.location.origin}/invite/${result.token}`;\n      await navigator.clipboard.writeText(inviteUrl);\n      setCopiedId(result.token);\n      setTimeout(() => setCopiedId(null), 2000);\n    }\n  };\n\n  const handleRevokeInvite = async (inviteId: Id<'collaboratorInvites'>) => {\n    if (confirm('Revoke this invite? The link will no longer work.')) {\n      await revokeInvite({ inviteId });\n    }\n  };\n\n  const resetInviteForm = () => {\n    setInviteData({ email: '', displayName: '', role: 'collaborator', privateMusic: true });\n    setGeneratedInviteLink(null);\n    setShowInvite(false);\n  };\n\n  // Filter to show only pending invites that haven't been accepted\n  const activePendingInvites = pendingInvites.filter(\n    inv => !inv.acceptedAt && !inv.isRevoked && !inv.isExpired\n  );\n\n  return (\n    <div className=\"flex flex-col h-full bg-transparent text-zinc-800 dark:text-white\">\n      {/* Header */}\n      <div className=\"flex items-center gap-3 p-4 border-b border-zinc-300 dark:border-zinc-700\">\n        <div className=\"p-2 rounded-lg bg-amber-100 dark:bg-amber-900/40\">\n          <Users className=\"w-4 h-4 text-amber-600 dark:text-amber-400\" />\n        </div>\n        <div className=\"flex-1\">\n          <h2 className=\"text-lg font-semibold\">Collaborators</h2>\n          <p className=\"text-xs text-zinc-500 dark:text-zinc-400\">\n            {collaborators.length} people\n            {activePendingInvites.length > 0 && ` Â· ${activePendingInvites.length} pending`}\n          </p>\n        </div>\n      </div>\n\n      {/* Content */}\n      <div className=\"flex-1 overflow-y-auto p-4\">\n        {/* Invite Button */}\n        <button\n          onClick={() => setShowInvite(!showInvite)}\n          className=\"w-full flex items-center justify-center gap-2 p-3 mb-4 rounded-lg border-2 border-dashed border-zinc-300 dark:border-zinc-600 hover:border-amber-400 dark:hover:border-amber-500 hover:bg-amber-50 dark:hover:bg-amber-900/20 transition-colors text-zinc-500 dark:text-zinc-400 hover:text-amber-600 dark:hover:text-amber-400\"\n        >\n          <UserPlus className=\"w-4 h-4\" />\n          <span className=\"text-sm font-medium\">Invite Collaborator</span>\n        </button>\n\n        {/* Invite Form */}\n        <AnimatePresence>\n          {showInvite && (\n            <motion.div\n              initial={{ height: 0, opacity: 0 }}\n              animate={{ height: 'auto', opacity: 1 }}\n              exit={{ height: 0, opacity: 0 }}\n              className=\"overflow-hidden mb-4\"\n            >\n              <div className=\"p-3 bg-zinc-100 dark:bg-zinc-800 rounded-lg space-y-3\">\n                {!generatedInviteLink ? (\n                  <>\n                    <div className=\"flex items-start gap-2 p-2 rounded-md bg-amber-50 dark:bg-amber-900/20 border border-amber-200 dark:border-amber-800\">\n                      <Link2 className=\"w-4 h-4 text-amber-600 dark:text-amber-400 mt-0.5 flex-shrink-0\" />\n                      <p className=\"text-xs text-amber-700 dark:text-amber-300\">\n                        Generate a unique invite link they can use to join\n                      </p>\n                    </div>\n                    <input\n                      type=\"email\"\n                      placeholder=\"Email *\"\n                      value={inviteData.email}\n                      onChange={(e) => setInviteData({ ...inviteData, email: e.target.value })}\n                      className=\"w-full px-3 py-2 rounded-md bg-white dark:bg-zinc-700 border border-zinc-200 dark:border-zinc-600 text-sm text-zinc-800 dark:text-zinc-200 placeholder:text-zinc-400\"\n                    />\n                    <select\n                      value={inviteData.role}\n                      onChange={(e) => setInviteData({ ...inviteData, role: e.target.value as 'collaborator' | 'admin' | 'viewer' })}\n                      className=\"w-full px-3 py-2 rounded-md bg-white dark:bg-zinc-700 border border-zinc-200 dark:border-zinc-600 text-sm text-zinc-800 dark:text-zinc-200\"\n                    >\n                      <option value=\"viewer\">Viewer (read-only)</option>\n                      <option value=\"collaborator\">Collaborator</option>\n                      <option value=\"admin\">Admin</option>\n                    </select>\n\n                    <label className=\"flex items-center gap-2 text-sm text-zinc-600 dark:text-zinc-400\">\n                      <input\n                        type=\"checkbox\"\n                        checked={inviteData.privateMusic}\n                        onChange={(e) => setInviteData({ ...inviteData, privateMusic: e.target.checked })}\n                        className=\"rounded border-zinc-300 dark:border-zinc-600 text-amber-500 focus:ring-amber-500\"\n                      />\n                      <Music className=\"w-4 h-4\" />\n                      Access to all private music\n                    </label>\n\n                    <div className=\"flex justify-end gap-2 pt-2\">\n                      <button\n                        onClick={resetInviteForm}\n                        className=\"px-3 py-1.5 text-sm text-zinc-600 dark:text-zinc-400 hover:text-zinc-800 dark:hover:text-zinc-200\"\n                      >\n                        Cancel\n                      </button>\n                      <button\n                        onClick={handleCreateInvite}\n                        disabled={isInviting || !inviteData.email}\n                        className=\"px-4 py-1.5 text-sm font-medium text-white bg-amber-500 hover:bg-amber-600 disabled:opacity-50 disabled:cursor-not-allowed rounded-md flex items-center gap-2\"\n                      >\n                        {isInviting ? <Loader2 className=\"w-3 h-3 animate-spin\" /> : <Link2 className=\"w-3 h-3\" />}\n                        Generate Link\n                      </button>\n                    </div>\n                  </>\n                ) : (\n                  <>\n                    <div className=\"flex items-center gap-2 p-2 rounded-md bg-emerald-50 dark:bg-emerald-900/20 border border-emerald-200 dark:border-emerald-800\">\n                      <CheckCircle className=\"w-4 h-4 text-emerald-600 dark:text-emerald-400 flex-shrink-0\" />\n                      <p className=\"text-xs text-emerald-700 dark:text-emerald-300\">\n                        Invite link created and copied to clipboard!\n                      </p>\n                    </div>\n                    <div className=\"p-2 bg-zinc-200 dark:bg-zinc-700 rounded-md\">\n                      <p className=\"text-xs text-zinc-600 dark:text-zinc-400 break-all font-mono\">\n                        {generatedInviteLink}\n                      </p>\n                    </div>\n                    <div className=\"flex gap-2\">\n                      <button\n                        onClick={() => navigator.clipboard.writeText(generatedInviteLink)}\n                        className=\"flex-1 flex items-center justify-center gap-2 px-3 py-2 text-sm text-zinc-600 dark:text-zinc-400 hover:text-zinc-800 dark:hover:text-zinc-200 bg-zinc-200 dark:bg-zinc-700 rounded-md\"\n                      >\n                        <Copy className=\"w-4 h-4\" />\n                        Copy Again\n                      </button>\n                      <button\n                        onClick={resetInviteForm}\n                        className=\"flex-1 px-3 py-2 text-sm font-medium text-white bg-amber-500 hover:bg-amber-600 rounded-md\"\n                      >\n                        Done\n                      </button>\n                    </div>\n                  </>\n                )}\n              </div>\n            </motion.div>\n          )}\n        </AnimatePresence>\n\n        {/* Pending Invites Section */}\n        {activePendingInvites.length > 0 && (\n          <div className=\"mb-4\">\n            <h3 className=\"text-xs font-medium text-zinc-500 dark:text-zinc-400 uppercase tracking-wider mb-2\">\n              Pending Invites\n            </h3>\n            <div className=\"space-y-2\">\n              {activePendingInvites.map((invite) => (\n                <motion.div\n                  key={invite.id}\n                  initial={{ opacity: 0, y: 8 }}\n                  animate={{ opacity: 1, y: 0 }}\n                  className=\"flex items-center gap-3 p-2 bg-amber-50/50 dark:bg-amber-900/10 rounded-lg border border-amber-200/50 dark:border-amber-800/30\"\n                >\n                  <div className=\"p-2 rounded-full bg-amber-100 dark:bg-amber-900/40\">\n                    <Clock className=\"w-4 h-4 text-amber-600 dark:text-amber-400\" />\n                  </div>\n                  <div className=\"flex-1 min-w-0\">\n                    <div className=\"font-medium text-sm text-zinc-800 dark:text-zinc-200 truncate\">\n                      {invite.email}\n                    </div>\n                    <div className=\"text-xs text-zinc-500 dark:text-zinc-400\">\n                      Expires {new Date(invite.expiresAt).toLocaleDateString()}\n                    </div>\n                  </div>\n                  <div className=\"flex items-center gap-1\">\n                    <button\n                      onClick={() => handleCopyInviteLink(invite.token)}\n                      className=\"p-1.5 rounded hover:bg-amber-200/50 dark:hover:bg-amber-800/30 text-amber-600 dark:text-amber-400 transition-colors\"\n                      title=\"Copy invite link\"\n                    >\n                      {copiedId === invite.token ? (\n                        <CheckCircle className=\"w-4 h-4 text-emerald-500\" />\n                      ) : (\n                        <Copy className=\"w-4 h-4\" />\n                      )}\n                    </button>\n                    <button\n                      onClick={() => handleRegenerateInvite(invite.id)}\n                      className=\"p-1.5 rounded hover:bg-amber-200/50 dark:hover:bg-amber-800/30 text-amber-600 dark:text-amber-400 transition-colors\"\n                      title=\"Regenerate link\"\n                    >\n                      <RefreshCw className=\"w-4 h-4\" />\n                    </button>\n                    <button\n                      onClick={() => handleRevokeInvite(invite.id)}\n                      className=\"p-1.5 rounded hover:bg-red-100 dark:hover:bg-red-900/30 text-zinc-400 hover:text-red-500 transition-colors\"\n                      title=\"Revoke invite\"\n                    >\n                      <X className=\"w-4 h-4\" />\n                    </button>\n                  </div>\n                </motion.div>\n              ))}\n            </div>\n          </div>\n        )}\n\n        {/* Collaborator List */}\n        <div className=\"space-y-2\">\n          {collaborators.length === 0 ? (\n            <div className=\"text-center py-8 text-zinc-500 dark:text-zinc-400 text-sm\">\n              No collaborators yet\n            </div>\n          ) : (\n            collaborators.map((collab, index) => (\n              <motion.div\n                key={collab.id}\n                initial={{ opacity: 0, y: 8 }}\n                animate={{ opacity: 1, y: 0 }}\n                transition={{ delay: index * 0.03 }}\n                className={`flex items-center gap-3 p-2 rounded-lg border group ${\n                  collab.isActive\n                    ? 'bg-white/50 dark:bg-zinc-800/50 border-zinc-200 dark:border-zinc-700'\n                    : 'bg-zinc-100/50 dark:bg-zinc-900/50 border-zinc-200/50 dark:border-zinc-800 opacity-60'\n                }`}\n              >\n                <div className={`p-2 rounded-full ${\n                  collab.role === 'owner'\n                    ? 'bg-gradient-to-br from-amber-100 to-orange-100 dark:from-amber-900/40 dark:to-orange-900/40'\n                    : collab.role === 'admin'\n                    ? 'bg-amber-100 dark:bg-amber-900/40'\n                    : 'bg-zinc-100 dark:bg-zinc-800'\n                }`}>\n                  {collab.role === 'owner' ? (\n                    <Shield className=\"w-4 h-4 text-orange-600 dark:text-orange-400\" />\n                  ) : collab.role === 'admin' ? (\n                    <Shield className=\"w-4 h-4 text-amber-600 dark:text-amber-400\" />\n                  ) : (\n                    <User className=\"w-4 h-4 text-zinc-500 dark:text-zinc-400\" />\n                  )}\n                </div>\n                <div className=\"flex-1 min-w-0\">\n                  <div className=\"flex items-center gap-2\">\n                    <span className=\"font-medium text-sm text-zinc-800 dark:text-zinc-200 truncate\">\n                      {collab.displayName || collab.email.split('@')[0]}\n                    </span>\n                    {collab.role === 'owner' && (\n                      <span className=\"text-[10px] px-1.5 py-0.5 bg-orange-100 dark:bg-orange-900/30 text-orange-600 dark:text-orange-400 rounded-full uppercase tracking-wider\">\n                        Owner\n                      </span>\n                    )}\n                  </div>\n                  <div className=\"text-xs text-zinc-500 dark:text-zinc-400 truncate flex items-center gap-2\">\n                    <span>{collab.email}</span>\n                    {collab.totalResources > 0 && (\n                      <span className=\"inline-flex items-center gap-1\">\n                        {collab.resourceCounts.tracks > 0 && (\n                          <span className=\"flex items-center gap-0.5\">\n                            <Music className=\"w-3 h-3\" />\n                            {collab.resourceCounts.tracks}\n                          </span>\n                        )}\n                        {collab.resourceCounts.playlists > 0 && (\n                          <span className=\"flex items-center gap-0.5\">\n                            <ListMusic className=\"w-3 h-3\" />\n                            {collab.resourceCounts.playlists}\n                          </span>\n                        )}\n                      </span>\n                    )}\n                  </div>\n                </div>\n                {collab.role !== 'owner' && (\n                  <div className=\"flex items-center gap-1 opacity-0 group-hover:opacity-100 transition-opacity\">\n                    {collab.hasPendingInvite && collab.inviteToken && (\n                      <button\n                        onClick={() => handleCopyInviteLink(collab.inviteToken!)}\n                        className=\"p-1.5 rounded hover:bg-zinc-200 dark:hover:bg-zinc-700 text-zinc-400 hover:text-zinc-600 dark:hover:text-zinc-300 transition-colors\"\n                        title=\"Copy invite link\"\n                      >\n                        {copiedId === collab.inviteToken ? (\n                          <CheckCircle className=\"w-4 h-4 text-emerald-500\" />\n                        ) : (\n                          <Link2 className=\"w-4 h-4\" />\n                        )}\n                      </button>\n                    )}\n                  </div>\n                )}\n              </motion.div>\n            ))\n          )}\n        </div>\n      </div>\n    </div>\n  );\n}\n"],"names":[],"mappings":"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"}}]
}