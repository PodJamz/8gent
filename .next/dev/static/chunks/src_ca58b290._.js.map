{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///Users/jamesspalding/OpenClaw-OS/src/components/icons/RalphIcon.tsx"],"sourcesContent":["'use client';\n\nimport React from 'react';\n\ninterface RalphIconProps {\n  className?: string;\n  size?: number;\n}\n\nexport function RalphIcon({ className = '', size = 24 }: RalphIconProps) {\n  return (\n    <svg\n      xmlns=\"http://www.w3.org/2000/svg\"\n      viewBox=\"0 0 24 24\"\n      fill=\"none\"\n      stroke=\"currentColor\"\n      strokeWidth=\"1.5\"\n      strokeLinecap=\"round\"\n      strokeLinejoin=\"round\"\n      width={size}\n      height={size}\n      className={className}\n    >\n      {/* Head outline - round shape */}\n      <ellipse cx=\"12\" cy=\"13\" rx=\"9\" ry=\"8.5\"/>\n\n      {/* Hair - spiky strands on top */}\n      <path d=\"M7 6 L8 9\"/>\n      <path d=\"M9 4.5 L10 8\"/>\n      <path d=\"M11 4 L11.5 7.5\"/>\n      <path d=\"M13 4 L12.5 7.5\"/>\n      <path d=\"M15 4.5 L14 8\"/>\n      <path d=\"M17 6 L16 9\"/>\n\n      {/* Left eye - big round */}\n      <circle cx=\"8.5\" cy=\"12\" r=\"2.5\"/>\n      <circle cx=\"8.5\" cy=\"12\" r=\"0.8\" fill=\"currentColor\"/>\n\n      {/* Right eye - big round */}\n      <circle cx=\"15.5\" cy=\"12\" r=\"2.5\"/>\n      <circle cx=\"15.5\" cy=\"12\" r=\"0.8\" fill=\"currentColor\"/>\n\n      {/* Nose - round bulb */}\n      <ellipse cx=\"12\" cy=\"15\" rx=\"1.8\" ry=\"1.5\"/>\n\n      {/* Mouth - simple smile */}\n      <path d=\"M8 18.5 Q12 21 16 18.5\"/>\n\n      {/* Ears */}\n      <ellipse cx=\"3.5\" cy=\"13\" rx=\"1\" ry=\"1.5\"/>\n      <ellipse cx=\"20.5\" cy=\"13\" rx=\"1\" ry=\"1.5\"/>\n    </svg>\n  );\n}\n\nexport default RalphIcon;\n"],"names":[],"mappings":";;;;;;;AAAA;;AASO,SAAS,UAAU,EAAE,YAAY,EAAE,EAAE,OAAO,EAAE,EAAkB;IACrE,qBACE,sYAAC;QACC,OAAM;QACN,SAAQ;QACR,MAAK;QACL,QAAO;QACP,aAAY;QACZ,eAAc;QACd,gBAAe;QACf,OAAO;QACP,QAAQ;QACR,WAAW;;0BAGX,sYAAC;gBAAQ,IAAG;gBAAK,IAAG;gBAAK,IAAG;gBAAI,IAAG;;;;;;0BAGnC,sYAAC;gBAAK,GAAE;;;;;;0BACR,sYAAC;gBAAK,GAAE;;;;;;0BACR,sYAAC;gBAAK,GAAE;;;;;;0BACR,sYAAC;gBAAK,GAAE;;;;;;0BACR,sYAAC;gBAAK,GAAE;;;;;;0BACR,sYAAC;gBAAK,GAAE;;;;;;0BAGR,sYAAC;gBAAO,IAAG;gBAAM,IAAG;gBAAK,GAAE;;;;;;0BAC3B,sYAAC;gBAAO,IAAG;gBAAM,IAAG;gBAAK,GAAE;gBAAM,MAAK;;;;;;0BAGtC,sYAAC;gBAAO,IAAG;gBAAO,IAAG;gBAAK,GAAE;;;;;;0BAC5B,sYAAC;gBAAO,IAAG;gBAAO,IAAG;gBAAK,GAAE;gBAAM,MAAK;;;;;;0BAGvC,sYAAC;gBAAQ,IAAG;gBAAK,IAAG;gBAAK,IAAG;gBAAM,IAAG;;;;;;0BAGrC,sYAAC;gBAAK,GAAE;;;;;;0BAGR,sYAAC;gBAAQ,IAAG;gBAAM,IAAG;gBAAK,IAAG;gBAAI,IAAG;;;;;;0BACpC,sYAAC;gBAAQ,IAAG;gBAAO,IAAG;gBAAK,IAAG;gBAAI,IAAG;;;;;;;;;;;;AAG3C;KA5CgB;uCA8CD"}},
    {"offset": {"line": 171, "column": 0}, "map": {"version":3,"sources":["file:///Users/jamesspalding/OpenClaw-OS/src/components/prototyping/ControlDeck.tsx"],"sourcesContent":["'use client';\n\nimport { useState, useRef, useCallback, useEffect } from 'react';\nimport { motion, useMotionValue, useTransform, animate } from 'framer-motion';\nimport { Check, ThumbsUp, MessageSquare, CornerDownLeft, Trash2, RotateCcw, Mic } from 'lucide-react';\nimport { RalphIcon } from '@/components/icons/RalphIcon';\n\n// ============================================================================\n// Types\n// ============================================================================\n\ninterface ControlDeckProps {\n  taskName?: string;\n  progress?: number;\n  model?: string;\n  subscription?: number;\n  onAcceptChanges?: () => void;\n  onApproveAction?: () => void;\n  onRalphMode?: (enabled: boolean) => void;\n  onOpenChat?: () => void;\n  onEnter?: () => void;\n  onDiscard?: () => void;\n  onRetry?: () => void;\n  onVoice?: () => void;\n  onSuggestPrompt?: () => void;\n  onModelChange?: (level: number) => void;\n  className?: string;\n}\n\n// ============================================================================\n// Tactile Button Component\n// ============================================================================\n\ninterface TactileButtonProps {\n  children: React.ReactNode;\n  onClick?: () => void;\n  variant?: 'default' | 'danger' | 'glow';\n  size?: 'sm' | 'md' | 'lg' | 'wide';\n  icon?: React.ReactNode;\n  label?: string;\n  shortcut?: string;\n  active?: boolean;\n  className?: string;\n}\n\nfunction TactileButton({\n  children,\n  onClick,\n  variant = 'default',\n  size = 'md',\n  icon,\n  label,\n  shortcut,\n  active = false,\n  className = '',\n}: TactileButtonProps) {\n  const [isPressed, setIsPressed] = useState(false);\n\n  const sizeClasses = {\n    sm: 'min-w-[48px] h-11',\n    md: 'min-w-[56px] h-12',\n    lg: 'min-w-[72px] h-12',\n    wide: 'w-full h-10',\n  };\n\n  const handlePress = () => {\n    setIsPressed(true);\n    // Haptic feedback simulation via slight delay\n    setTimeout(() => setIsPressed(false), 150);\n    onClick?.();\n  };\n\n  return (\n    <motion.button\n      className={`\n        relative flex flex-col items-center justify-center gap-1\n        rounded-lg select-none overflow-hidden\n        ${sizeClasses[size]}\n        ${className}\n      `}\n      onMouseDown={() => setIsPressed(true)}\n      onMouseUp={handlePress}\n      onMouseLeave={() => setIsPressed(false)}\n      onTouchStart={() => setIsPressed(true)}\n      onTouchEnd={handlePress}\n      animate={{\n        y: isPressed ? 2 : 0,\n      }}\n      transition={{\n        type: 'spring',\n        stiffness: 800,\n        damping: 20,\n      }}\n      style={{\n        transformStyle: 'preserve-3d',\n      }}\n    >\n      {/* Button base shadow */}\n      <div\n        className=\"absolute inset-0 rounded-lg\"\n        style={{\n          background: 'linear-gradient(180deg, #1a1a1a 0%, #0a0a0a 100%)',\n          transform: 'translateY(4px)',\n          opacity: isPressed ? 0.3 : 1,\n          transition: 'opacity 0.1s',\n        }}\n      />\n\n      {/* Button body glow */}\n      <div\n        className={`\n          absolute inset-0 rounded-lg\n          ${(variant === 'danger' && active) || (variant === 'glow' && active) ? 'opacity-100' : 'opacity-0'}\n        `}\n        style={{\n          background: variant === 'danger'\n            ? 'radial-gradient(ellipse at center bottom, rgba(239, 68, 68, 0.4) 0%, transparent 70%)'\n            : 'radial-gradient(ellipse at center bottom, rgba(74, 222, 128, 0.4) 0%, transparent 70%)',\n          filter: 'blur(8px)',\n          transition: 'opacity 0.3s',\n        }}\n      />\n\n      <div\n        className=\"absolute inset-0 rounded-lg overflow-hidden\"\n        style={{\n          background: variant === 'danger' && active\n            ? 'linear-gradient(180deg, #2d1f1f 0%, #1f1515 50%, #1a1010 100%)'\n            : variant === 'glow' && active\n            ? 'linear-gradient(180deg, #1f2d1f 0%, #152015 50%, #101a10 100%)'\n            : 'linear-gradient(180deg, #2a2a2a 0%, #1f1f1f 50%, #1a1a1a 100%)',\n          boxShadow: isPressed\n            ? 'inset 0 2px 4px rgba(0,0,0,0.5), inset 0 -1px 1px rgba(255,255,255,0.05)'\n            : 'inset 0 1px 1px rgba(255,255,255,0.1), inset 0 -2px 4px rgba(0,0,0,0.3)',\n          transform: isPressed ? 'translateY(2px)' : 'translateY(0)',\n          transition: 'transform 0.1s, box-shadow 0.1s, background 0.2s',\n        }}\n      >\n        {/* Top edge highlight */}\n        <div\n          className=\"absolute top-0 left-0 right-0 h-px\"\n          style={{\n            background: 'linear-gradient(90deg, transparent 10%, rgba(255,255,255,0.15) 50%, transparent 90%)',\n          }}\n        />\n\n        {/* Red glow for danger/Ralph button */}\n        {variant === 'danger' && active && (\n          <motion.div\n            className=\"absolute inset-0\"\n            initial={{ opacity: 0 }}\n            animate={{ opacity: [0.3, 0.6, 0.3] }}\n            transition={{ duration: 2, repeat: Infinity }}\n            style={{\n              background: 'radial-gradient(ellipse at center, rgba(239, 68, 68, 0.3) 0%, transparent 70%)',\n            }}\n          />\n        )}\n\n        {/* Green glow for active buttons */}\n        {variant === 'glow' && active && (\n          <motion.div\n            className=\"absolute inset-0\"\n            initial={{ opacity: 0 }}\n            animate={{ opacity: 1 }}\n            style={{\n              background: 'radial-gradient(ellipse at center, rgba(74, 222, 128, 0.25) 0%, transparent 70%)',\n            }}\n          />\n        )}\n      </div>\n\n      {/* Button content */}\n      <div\n        className=\"relative z-10 flex flex-col items-center justify-center gap-0.5\"\n        style={{\n          transform: isPressed ? 'translateY(2px)' : 'translateY(0)',\n          transition: 'transform 0.1s',\n        }}\n      >\n        {icon && (\n          <span className={`transition-colors ${\n            variant === 'danger' && active ? 'text-red-400' :\n            variant === 'glow' && active ? 'text-green-400' :\n            'text-white/70'\n          }`}>\n            {icon}\n          </span>\n        )}\n        {label && (\n          <span\n            className={`text-[8px] font-bold tracking-wider uppercase leading-tight text-center transition-colors ${\n              variant === 'danger' && active ? 'text-red-400' :\n              variant === 'glow' && active ? 'text-green-400' :\n              'text-white/60'\n            }`}\n          >\n            {label}\n          </span>\n        )}\n        {children}\n      </div>\n\n      {/* Keyboard shortcut hint */}\n      {shortcut && (\n        <div\n          className=\"absolute bottom-0.5 right-0.5 px-1 py-px rounded text-[6px] font-mono bg-black/30 text-white/40 z-20\"\n          style={{\n            transform: isPressed ? 'translateY(2px)' : 'translateY(0)',\n            transition: 'transform 0.1s',\n          }}\n        >\n          {shortcut}\n        </div>\n      )}\n    </motion.button>\n  );\n}\n\n// ============================================================================\n// Rotary Knob Component with 12-point detents\n// ============================================================================\n\ninterface RotaryKnobProps {\n  label: string;\n  onChange?: (value: number, detent: number) => void;\n  size?: 'sm' | 'md';\n  detents?: number;\n}\n\nfunction RotaryKnob({ label, onChange, size = 'md', detents = 12 }: RotaryKnobProps) {\n  const knobRef = useRef<HTMLDivElement>(null);\n  const [currentDetent, setCurrentDetent] = useState(0);\n  const [isDragging, setIsDragging] = useState(false);\n  const lastY = useRef(0);\n  const accumulatedDelta = useRef(0);\n\n  const knobSize = size === 'sm' ? 'w-8 h-8' : 'w-11 h-11';\n  const knurledLines = 16;\n\n  // Calculate rotation angle for current detent (270 degree range, from -135 to +135)\n  const degreesPerDetent = 270 / (detents - 1);\n  const currentRotation = -135 + (currentDetent * degreesPerDetent);\n\n  const snapToDetent = useCallback((newDetent: number) => {\n    const clampedDetent = Math.max(0, Math.min(detents - 1, newDetent));\n    if (clampedDetent !== currentDetent) {\n      setCurrentDetent(clampedDetent);\n      // Normalize to 0-100\n      const normalized = (clampedDetent / (detents - 1)) * 100;\n      onChange?.(normalized, clampedDetent);\n    }\n  }, [currentDetent, detents, onChange]);\n\n  const handleDrag = useCallback((e: MouseEvent | TouchEvent) => {\n    if (!isDragging) return;\n\n    const clientY = 'touches' in e ? e.touches[0].clientY : e.clientY;\n    const delta = lastY.current - clientY;\n    lastY.current = clientY;\n\n    // Accumulate delta and snap when threshold reached\n    accumulatedDelta.current += delta;\n    const threshold = 15; // pixels needed to move one detent\n\n    if (Math.abs(accumulatedDelta.current) >= threshold) {\n      const detentChange = Math.sign(accumulatedDelta.current);\n      snapToDetent(currentDetent + detentChange);\n      accumulatedDelta.current = 0;\n    }\n  }, [isDragging, currentDetent, snapToDetent]);\n\n  const handleStart = (e: React.MouseEvent | React.TouchEvent) => {\n    setIsDragging(true);\n    accumulatedDelta.current = 0;\n    lastY.current = 'touches' in e ? e.touches[0].clientY : e.clientY;\n    window.addEventListener('mousemove', handleDrag);\n    window.addEventListener('mouseup', handleEnd);\n    window.addEventListener('touchmove', handleDrag);\n    window.addEventListener('touchend', handleEnd);\n  };\n\n  const handleEnd = useCallback(() => {\n    setIsDragging(false);\n    accumulatedDelta.current = 0;\n    window.removeEventListener('mousemove', handleDrag);\n    window.removeEventListener('mouseup', handleEnd);\n    window.removeEventListener('touchmove', handleDrag);\n    window.removeEventListener('touchend', handleEnd);\n  }, [handleDrag]);\n\n  // Click to increment\n  const handleClick = () => {\n    if (!isDragging) {\n      snapToDetent((currentDetent + 1) % detents);\n    }\n  };\n\n  return (\n    <div className=\"flex flex-col items-center gap-1\">\n      {/* Detent markers around knob */}\n      <div className={`${knobSize} relative`}>\n        {/* Detent indicator dots */}\n        {[...Array(detents)].map((_, i) => {\n          const angle = -135 + (i * degreesPerDetent);\n          const radian = (angle - 90) * (Math.PI / 180);\n          const radius = size === 'sm' ? 18 : 24;\n          const x = Math.cos(radian) * radius;\n          const y = Math.sin(radian) * radius;\n          const isActive = i <= currentDetent;\n\n          return (\n            <div\n              key={i}\n              className={`absolute w-1 h-1 rounded-full transition-all duration-150 ${\n                isActive ? 'bg-green-400 shadow-[0_0_4px_rgba(74,222,128,0.6)]' : 'bg-white/20'\n              }`}\n              style={{\n                left: '50%',\n                top: '50%',\n                transform: `translate(calc(-50% + ${x}px), calc(-50% + ${y}px))`,\n              }}\n            />\n          );\n        })}\n\n        {/* Knob container */}\n        <motion.div\n          ref={knobRef}\n          className={`absolute inset-1 cursor-grab active:cursor-grabbing rounded-full`}\n          onMouseDown={handleStart}\n          onTouchStart={handleStart}\n          onClick={handleClick}\n          style={{\n            perspective: '200px',\n          }}\n        >\n          {/* Knob shadow */}\n          <div\n            className=\"absolute inset-0 rounded-full\"\n            style={{\n              background: 'radial-gradient(ellipse at center, rgba(0,0,0,0.5) 0%, transparent 70%)',\n              transform: 'translateY(3px) scale(1.1)',\n              filter: 'blur(3px)',\n            }}\n          />\n\n          {/* Knob body */}\n          <motion.div\n            className=\"absolute inset-0 rounded-full overflow-hidden\"\n            animate={{ rotate: currentRotation }}\n            transition={{\n              type: 'spring',\n              stiffness: 400,\n              damping: 25,\n            }}\n            style={{\n              background: 'linear-gradient(180deg, #4a4a4a 0%, #2a2a2a 30%, #1a1a1a 70%, #0f0f0f 100%)',\n              boxShadow: `\n                inset 0 2px 4px rgba(255,255,255,0.15),\n                inset 0 -2px 4px rgba(0,0,0,0.5),\n                0 4px 8px rgba(0,0,0,0.5)\n              `,\n            }}\n          >\n            {/* Knurled texture */}\n            <div className=\"absolute inset-0 flex items-center justify-center\">\n              {[...Array(knurledLines)].map((_, i) => (\n                <div\n                  key={i}\n                  className=\"absolute w-full h-px bg-white/10\"\n                  style={{\n                    transform: `rotate(${(i * 180) / knurledLines}deg)`,\n                  }}\n                />\n              ))}\n            </div>\n\n            {/* Center cap */}\n            <div\n              className=\"absolute inset-1.5 rounded-full\"\n              style={{\n                background: 'linear-gradient(180deg, #3a3a3a 0%, #1a1a1a 100%)',\n                boxShadow: 'inset 0 1px 2px rgba(255,255,255,0.1), inset 0 -1px 2px rgba(0,0,0,0.3)',\n              }}\n            />\n\n            {/* Indicator line */}\n            <div\n              className=\"absolute top-0.5 left-1/2 w-0.5 h-1.5 -translate-x-1/2 rounded-full bg-green-400\"\n              style={{\n                boxShadow: '0 0 4px rgba(74,222,128,0.6)',\n              }}\n            />\n          </motion.div>\n        </motion.div>\n      </div>\n\n      {/* Label with current value */}\n      <div className=\"flex flex-col items-center\">\n        <span className=\"text-[7px] font-bold tracking-wider uppercase text-white/40 text-center leading-tight\">\n          {label}\n        </span>\n        <span className=\"text-[8px] font-mono text-green-400/80\">\n          {currentDetent + 1}/{detents}\n        </span>\n      </div>\n    </div>\n  );\n}\n\n// ============================================================================\n// Toggle Switch Component\n// ============================================================================\n\ninterface ToggleSwitchProps {\n  label: string;\n  onChange?: (position: 'high' | 'low') => void;\n}\n\nfunction ToggleSwitch({ label, onChange }: ToggleSwitchProps) {\n  const [position, setPosition] = useState<'high' | 'low'>('low');\n\n  const toggle = () => {\n    const newPos = position === 'high' ? 'low' : 'high';\n    setPosition(newPos);\n    onChange?.(newPos);\n  };\n\n  return (\n    <div className=\"flex flex-col items-center gap-1\">\n      {/* Position labels */}\n      <span className=\"text-[6px] font-bold tracking-wider uppercase text-green-500/60\">HI</span>\n\n      {/* Switch housing */}\n      <div\n        className=\"relative w-4 h-10 rounded-full cursor-pointer\"\n        onClick={toggle}\n        style={{\n          background: 'linear-gradient(180deg, #1a1a1a 0%, #0f0f0f 100%)',\n          boxShadow: 'inset 0 2px 4px rgba(0,0,0,0.5), inset 0 -1px 1px rgba(255,255,255,0.05)',\n        }}\n      >\n        {/* Switch track */}\n        <div\n          className=\"absolute inset-0.5 rounded-full\"\n          style={{\n            background: 'linear-gradient(180deg, #0a0a0a 0%, #151515 100%)',\n          }}\n        />\n\n        {/* Switch handle */}\n        <motion.div\n          className=\"absolute left-0.5 w-3 h-3 rounded-full\"\n          animate={{\n            top: position === 'high' ? 3 : 26,\n          }}\n          transition={{\n            type: 'spring',\n            stiffness: 500,\n            damping: 30,\n          }}\n          style={{\n            background: 'linear-gradient(180deg, #5a5a5a 0%, #3a3a3a 100%)',\n            boxShadow: '0 2px 4px rgba(0,0,0,0.5), inset 0 1px 1px rgba(255,255,255,0.3)',\n          }}\n        />\n      </div>\n\n      <span className=\"text-[6px] font-bold tracking-wider uppercase text-white/40\">LO</span>\n    </div>\n  );\n}\n\n// ============================================================================\n// LED Display Component\n// ============================================================================\n\ninterface LEDDisplayProps {\n  taskName: string;\n  progress: number;\n  model: string;\n  subscription: number;\n  lastAction?: string;\n}\n\nfunction LEDDisplay({ taskName, progress, model, subscription, lastAction = 'READY' }: LEDDisplayProps) {\n  return (\n    <div\n      className=\"relative w-full h-16 rounded-lg overflow-hidden\"\n      style={{\n        background: 'linear-gradient(180deg, #0a0f0a 0%, #050805 100%)',\n        boxShadow: `\n          inset 0 2px 4px rgba(0,0,0,0.8),\n          inset 0 -1px 1px rgba(255,255,255,0.05),\n          0 1px 0 rgba(255,255,255,0.05)\n        `,\n      }}\n    >\n      {/* Screen bezel */}\n      <div\n        className=\"absolute inset-0.5 rounded-md overflow-hidden\"\n        style={{\n          background: 'linear-gradient(180deg, #0a120a 0%, #040804 100%)',\n        }}\n      >\n        {/* Scanline effect */}\n        <div\n          className=\"absolute inset-0 pointer-events-none opacity-10\"\n          style={{\n            backgroundImage: 'repeating-linear-gradient(0deg, transparent, transparent 1px, rgba(0,0,0,0.3) 1px, rgba(0,0,0,0.3) 2px)',\n          }}\n        />\n\n        {/* Screen glow */}\n        <div\n          className=\"absolute inset-0\"\n          style={{\n            background: 'radial-gradient(ellipse at center, rgba(34, 197, 94, 0.05) 0%, transparent 70%)',\n          }}\n        />\n\n        {/* Content */}\n        <div className=\"relative h-full flex flex-col justify-center px-3 py-1.5 font-mono\">\n          {/* Top row: Task and Action */}\n          <div className=\"flex items-center justify-between\">\n            <div className=\"flex items-center gap-1\">\n              <span className=\"text-green-500/80 text-[9px] tracking-wide\">TASK:</span>\n              <span className=\"text-green-400 text-[9px] font-bold tracking-wide uppercase\">\n                {taskName}\n              </span>\n            </div>\n            <motion.span\n              key={lastAction}\n              initial={{ opacity: 0, x: 10 }}\n              animate={{ opacity: 1, x: 0 }}\n              className=\"text-green-300 text-[9px] font-bold tracking-wide\"\n            >\n              [{lastAction}]\n            </motion.span>\n          </div>\n\n          {/* Progress bar */}\n          <div className=\"w-full h-1.5 bg-green-950/50 rounded-full mt-1 overflow-hidden\">\n            <motion.div\n              className=\"h-full rounded-full\"\n              style={{\n                background: 'linear-gradient(90deg, #22c55e 0%, #4ade80 100%)',\n                boxShadow: '0 0 10px rgba(34, 197, 94, 0.5)',\n              }}\n              animate={{ width: `${progress}%` }}\n              transition={{ duration: 0.3, ease: 'easeOut' }}\n            />\n          </div>\n\n          {/* Bottom row: Model and Stats */}\n          <div className=\"flex items-center justify-between mt-1\">\n            <div className=\"flex items-center gap-1\">\n              <span className=\"text-green-500/80 text-[8px] tracking-wide\">MODEL:</span>\n              <motion.span\n                key={model}\n                initial={{ opacity: 0 }}\n                animate={{ opacity: 1 }}\n                className=\"text-green-400 text-[8px] font-bold tracking-wide uppercase\"\n              >\n                {model}\n              </motion.span>\n            </div>\n            <div className=\"flex items-center gap-2\">\n              <span className=\"text-green-400 text-[8px] font-bold\">{progress}%</span>\n              <span className=\"text-green-500/60 text-[8px]\">|</span>\n              <span className=\"text-green-500/80 text-[8px]\">SUB:</span>\n              <span className=\"text-green-400 text-[8px] font-bold\">{subscription}%</span>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n}\n\n// ============================================================================\n// Main Control Deck Component\n// ============================================================================\n\nconst MODELS = ['HAIKU', 'SONNET', 'OPUS', 'OPUS 4.5'];\nconst TASKS = ['IDLE', 'ANALYZING', 'CODING', 'REVIEWING', 'REFACTORING', 'TESTING', 'DEPLOYING'];\n\nexport function ControlDeck({\n  taskName: initialTaskName = 'CODE REFACTOR',\n  progress: initialProgress = 60,\n  model: initialModel = 'CLAUDE OPUS 4.5',\n  subscription = 85,\n  onAcceptChanges,\n  onApproveAction,\n  onRalphMode,\n  onOpenChat,\n  onEnter,\n  onDiscard,\n  onRetry,\n  onVoice,\n  onSuggestPrompt,\n  onModelChange,\n  className = '',\n}: ControlDeckProps) {\n  // Internal state\n  const [ralphActive, setRalphActive] = useState(false);\n  const [acceptActive, setAcceptActive] = useState(false);\n  const [approveActive, setApproveActive] = useState(false);\n  const [chatActive, setChatActive] = useState(false);\n  const [voiceActive, setVoiceActive] = useState(false);\n  const [currentTask, setCurrentTask] = useState(initialTaskName);\n  const [currentProgress, setCurrentProgress] = useState(initialProgress);\n  const [currentModel, setCurrentModel] = useState(initialModel);\n  const [modelLevel, setModelLevel] = useState<'high' | 'low'>('low');\n  const [lastAction, setLastAction] = useState('READY');\n\n  // Button handlers with visual feedback\n  const handleAccept = () => {\n    setAcceptActive(true);\n    setLastAction('ACCEPTED');\n    setCurrentProgress(prev => Math.min(100, prev + 10));\n    setTimeout(() => setAcceptActive(false), 500);\n    onAcceptChanges?.();\n  };\n\n  const handleApprove = () => {\n    setApproveActive(true);\n    setLastAction('APPROVED');\n    setCurrentProgress(prev => Math.min(100, prev + 5));\n    setTimeout(() => setApproveActive(false), 500);\n    onApproveAction?.();\n  };\n\n  const handleRalphToggle = () => {\n    const newState = !ralphActive;\n    setRalphActive(newState);\n    setLastAction(newState ? 'RALPH LOOP' : 'RALPH OFF');\n    onRalphMode?.(newState);\n  };\n\n  const handleEnter = () => {\n    setLastAction('EXECUTING');\n    setCurrentProgress(prev => Math.min(100, prev + 15));\n    // Cycle through tasks\n    setCurrentTask(TASKS[(TASKS.indexOf(currentTask) + 1) % TASKS.length] || TASKS[1]);\n    onEnter?.();\n  };\n\n  const handleChat = () => {\n    setChatActive(!chatActive);\n    setLastAction(chatActive ? 'CHAT CLOSED' : 'CHAT OPEN');\n    onOpenChat?.();\n  };\n\n  const handleDiscard = () => {\n    setLastAction('DISCARDED');\n    setCurrentProgress(Math.max(0, currentProgress - 20));\n    setAcceptActive(false);\n    setApproveActive(false);\n    onDiscard?.();\n  };\n\n  const handleRetry = () => {\n    setLastAction('RETRYING');\n    setCurrentProgress(Math.max(0, currentProgress - 10));\n    onRetry?.();\n  };\n\n  const handleVoice = () => {\n    setVoiceActive(!voiceActive);\n    setLastAction(voiceActive ? 'MIC OFF' : 'MIC ON');\n    onVoice?.();\n  };\n\n  const handleSuggest = () => {\n    setLastAction('SUGGESTING');\n    onSuggestPrompt?.();\n  };\n\n  const handleModelSwitch = (pos: 'high' | 'low') => {\n    setModelLevel(pos);\n    const modelIdx = pos === 'high' ? 3 : 1;\n    setCurrentModel(`CLAUDE ${MODELS[modelIdx]}`);\n    setLastAction(`MODEL: ${MODELS[modelIdx]}`);\n    onModelChange?.(pos === 'high' ? 100 : 0);\n  };\n\n  const handleKnobChange = (value: number, detent: number) => {\n    const modelIdx = Math.floor((detent / 11) * 3);\n    setCurrentModel(`CLAUDE ${MODELS[Math.min(modelIdx, 3)]}`);\n    onModelChange?.(value);\n  };\n\n  // Keyboard shortcuts\n  useEffect(() => {\n    const handleKeyDown = (e: KeyboardEvent) => {\n      // Skip if in input fields\n      if (['INPUT', 'TEXTAREA'].includes((e.target as HTMLElement).tagName)) return;\n\n      switch (e.key.toLowerCase()) {\n        case 'a':\n          e.preventDefault();\n          handleAccept();\n          break;\n        case 'p':\n          e.preventDefault();\n          handleApprove();\n          break;\n        case 'y':\n          e.preventDefault();\n          handleRalphToggle();\n          break;\n        case 'enter':\n          e.preventDefault();\n          handleEnter();\n          break;\n        case 'c':\n          if (!e.metaKey && !e.ctrlKey) {\n            e.preventDefault();\n            handleChat();\n          }\n          break;\n        case 'd':\n          if (!e.metaKey && !e.ctrlKey) {\n            e.preventDefault();\n            handleDiscard();\n          }\n          break;\n        case 'r':\n          if (!e.metaKey && !e.ctrlKey) {\n            e.preventDefault();\n            handleRetry();\n          }\n          break;\n        case 'm':\n          e.preventDefault();\n          handleVoice();\n          break;\n        case '/':\n          e.preventDefault();\n          handleSuggest();\n          break;\n      }\n    };\n\n    window.addEventListener('keydown', handleKeyDown);\n    return () => window.removeEventListener('keydown', handleKeyDown);\n  }, [ralphActive, chatActive, voiceActive, currentTask, currentProgress]);\n\n  return (\n    <div\n      className={`relative w-full max-w-[320px] sm:max-w-[360px] mx-auto px-2 sm:px-0 ${className}`}\n      style={{\n        perspective: '1000px',\n      }}\n    >\n      {/* Main chassis */}\n      <div\n        className=\"relative rounded-2xl overflow-hidden\"\n        style={{\n          background: 'linear-gradient(180deg, #d4d4d4 0%, #a8a8a8 5%, #c0c0c0 50%, #a0a0a0 95%, #888888 100%)',\n          boxShadow: `\n            0 20px 50px rgba(0,0,0,0.5),\n            0 10px 20px rgba(0,0,0,0.3),\n            inset 0 2px 0 rgba(255,255,255,0.6),\n            inset 0 -2px 0 rgba(0,0,0,0.2)\n          `,\n        }}\n      >\n        {/* Top edge highlight */}\n        <div\n          className=\"absolute top-0 left-3 right-3 h-px z-10\"\n          style={{\n            background: 'linear-gradient(90deg, transparent, rgba(255,255,255,0.8) 20%, rgba(255,255,255,0.8) 80%, transparent)',\n          }}\n        />\n\n        {/* Inner panel area */}\n        <div className=\"p-2 sm:p-3\">\n          {/* LED Display */}\n          <div className=\"mb-3\">\n            <LEDDisplay\n              taskName={currentTask}\n              progress={currentProgress}\n              model={currentModel}\n              subscription={subscription}\n              lastAction={lastAction}\n            />\n          </div>\n\n          {/* Main action buttons - 5 equal buttons in a row, 3+2 on very small screens */}\n          <div className=\"grid grid-cols-5 gap-1.5 sm:gap-2 mb-3\">\n            <TactileButton\n              size=\"md\"\n              icon={<Check className=\"w-4 h-4\" />}\n              label=\"Accept\"\n              onClick={handleAccept}\n              active={acceptActive}\n              variant={acceptActive ? 'glow' : 'default'}\n              shortcut=\"A\"\n              className=\"!w-full\"\n            >\n              <span className=\"sr-only\">Accept Changes</span>\n            </TactileButton>\n\n            <TactileButton\n              size=\"md\"\n              icon={<ThumbsUp className=\"w-4 h-4\" />}\n              label=\"Approve\"\n              onClick={handleApprove}\n              active={approveActive}\n              variant={approveActive ? 'glow' : 'default'}\n              shortcut=\"P\"\n              className=\"!w-full\"\n            >\n              <span className=\"sr-only\">Approve Action</span>\n            </TactileButton>\n\n            <TactileButton\n              size=\"md\"\n              variant=\"danger\"\n              active={ralphActive}\n              icon={<RalphIcon className=\"w-4 h-4\" />}\n              label=\"Ralph\"\n              onClick={handleRalphToggle}\n              shortcut=\"Y\"\n              className=\"!w-full\"\n            >\n              <span className=\"sr-only\">Ralph Mode - Autonomous Loop</span>\n            </TactileButton>\n\n            <TactileButton\n              size=\"md\"\n              icon={<CornerDownLeft className=\"w-4 h-4\" />}\n              label=\"Enter\"\n              onClick={handleEnter}\n              shortcut=\"â†µ\"\n              className=\"!w-full\"\n            >\n              <span className=\"sr-only\">Enter</span>\n            </TactileButton>\n\n            <TactileButton\n              size=\"md\"\n              icon={<MessageSquare className=\"w-4 h-4\" />}\n              label=\"Chat\"\n              onClick={handleChat}\n              active={chatActive}\n              variant={chatActive ? 'glow' : 'default'}\n              shortcut=\"C\"\n              className=\"!w-full\"\n            >\n              <span className=\"sr-only\">Open Chat</span>\n            </TactileButton>\n          </div>\n\n          {/* Secondary controls row */}\n          <div className=\"flex items-end gap-3 mb-3\">\n            {/* Toggle switch */}\n            <ToggleSwitch label=\"MODEL\" onChange={handleModelSwitch} />\n\n            {/* Small utility buttons */}\n            <div className=\"flex-1 grid grid-cols-3 gap-2\">\n              <TactileButton\n                size=\"sm\"\n                icon={<Trash2 className=\"w-3.5 h-3.5\" />}\n                label=\"Discard\"\n                onClick={handleDiscard}\n                shortcut=\"D\"\n                className=\"!w-full\"\n              >\n                <span className=\"sr-only\">Discard</span>\n              </TactileButton>\n\n              <TactileButton\n                size=\"sm\"\n                icon={<RotateCcw className=\"w-3.5 h-3.5\" />}\n                label=\"Retry\"\n                onClick={handleRetry}\n                shortcut=\"R\"\n                className=\"!w-full\"\n              >\n                <span className=\"sr-only\">Retry</span>\n              </TactileButton>\n\n              <TactileButton\n                size=\"sm\"\n                icon={<Mic className=\"w-3.5 h-3.5\" />}\n                label=\"Voice\"\n                onClick={handleVoice}\n                active={voiceActive}\n                variant={voiceActive ? 'glow' : 'default'}\n                shortcut=\"M\"\n                className=\"!w-full\"\n              >\n                <span className=\"sr-only\">Voice</span>\n              </TactileButton>\n            </div>\n\n            {/* Rotary knob */}\n            <RotaryKnob label=\"Level\" onChange={handleKnobChange} size=\"sm\" detents={12} />\n          </div>\n\n          {/* Wide prompt button */}\n          <TactileButton\n            size=\"wide\"\n            onClick={handleSuggest}\n            shortcut=\"/\"\n            className=\"w-full !h-10\"\n          >\n            <span className=\"text-[10px] font-bold tracking-widest uppercase text-white/50\">\n              Suggest Next Prompt\n            </span>\n          </TactileButton>\n        </div>\n\n        {/* Cable port indicator (left side) */}\n        <div\n          className=\"absolute left-0 top-1/2 -translate-y-1/2 w-2 h-6 rounded-r\"\n          style={{\n            background: 'linear-gradient(90deg, #2a2a2a, #3a3a3a)',\n            boxShadow: 'inset 0 1px 2px rgba(0,0,0,0.5)',\n          }}\n        />\n\n        {/* Cable port indicator (right side) */}\n        <div\n          className=\"absolute right-0 top-1/2 -translate-y-1/2 w-2 h-6 rounded-l\"\n          style={{\n            background: 'linear-gradient(90deg, #3a3a3a, #2a2a2a)',\n            boxShadow: 'inset 0 1px 2px rgba(0,0,0,0.5)',\n          }}\n        />\n      </div>\n    </div>\n  );\n}\n\nexport default ControlDeck;\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 1471, "column": 0}, "map": {"version":3,"sources":["file:///Users/jamesspalding/OpenClaw-OS/src/lib/scheduling/types.ts"],"sourcesContent":["/**\n * Scheduling Types - TypeScript definitions for the Calendly clone\n */\n\nexport type LocationType = \"google_meet\" | \"zoom\" | \"phone\" | \"in_person\" | \"custom\";\n\nexport type BookingStatus =\n  | \"pending\"\n  | \"confirmed\"\n  | \"cancelled\"\n  | \"rescheduled\"\n  | \"completed\"\n  | \"no_show\";\n\nexport interface TimeSlot {\n  start: string; // \"HH:mm\" format\n  end: string;\n}\n\nexport interface DaySchedule {\n  dayOfWeek: number; // 0-6 (Sunday-Saturday)\n  isAvailable: boolean;\n  slots: TimeSlot[];\n}\n\nexport interface Question {\n  id: string;\n  label: string;\n  type: \"text\" | \"textarea\" | \"select\";\n  required: boolean;\n  options?: string[];\n}\n\nexport interface QuestionResponse {\n  questionId: string;\n  questionLabel: string;\n  answer: string;\n}\n\nexport interface EventType {\n  _id: string;\n  ownerId: string;\n  title: string;\n  slug: string;\n  description?: string;\n  duration: number;\n  color: string;\n  isActive: boolean;\n  bufferBefore: number;\n  bufferAfter: number;\n  maxBookingsPerDay?: number;\n  minNotice: number;\n  maxAdvance: number;\n  locationType: LocationType;\n  locationValue?: string;\n  questions: Question[];\n  createdAt: number;\n  updatedAt: number;\n}\n\nexport interface Availability {\n  _id: string;\n  ownerId: string;\n  name: string;\n  isDefault: boolean;\n  timezone: string;\n  schedule: DaySchedule[];\n  createdAt: number;\n  updatedAt: number;\n}\n\nexport interface AvailabilityOverride {\n  _id: string;\n  ownerId: string;\n  date: string;\n  isBlocked: boolean;\n  slots?: TimeSlot[];\n  reason?: string;\n}\n\nexport interface Booking {\n  _id: string;\n  eventTypeId: string;\n  hostId: string;\n  guestEmail: string;\n  guestName: string;\n  guestTimezone: string;\n  startTime: number;\n  endTime: number;\n  status: BookingStatus;\n  title: string;\n  location?: string;\n  locationType: string;\n  notes?: string;\n  responses?: QuestionResponse[];\n  googleEventId?: string;\n  cancelledAt?: number;\n  cancelReason?: string;\n  cancelledBy?: \"host\" | \"guest\";\n  rescheduledFrom?: string;\n  rescheduledTo?: string;\n  createdAt: number;\n  updatedAt: number;\n}\n\nexport interface CalendarIntegration {\n  _id: string;\n  ownerId: string;\n  provider: \"google\";\n  accessToken: string;\n  refreshToken: string;\n  tokenExpiry: number;\n  calendarId: string;\n  calendarEmail: string;\n  syncEnabled: boolean;\n  blockExternalEvents: boolean;\n  lastSyncAt?: number;\n  createdAt: number;\n  updatedAt: number;\n}\n\nexport interface AvailableSlot {\n  time: string; // \"HH:mm\" format\n  timestamp: number;\n}\n\nexport interface GoogleCalendarEvent {\n  id?: string;\n  summary: string;\n  description?: string;\n  start: {\n    dateTime: string;\n    timeZone: string;\n  };\n  end: {\n    dateTime: string;\n    timeZone: string;\n  };\n  attendees?: Array<{\n    email: string;\n    displayName?: string;\n    responseStatus?: string;\n  }>;\n  conferenceData?: {\n    createRequest?: {\n      requestId: string;\n      conferenceSolutionKey: {\n        type: string;\n      };\n    };\n    entryPoints?: Array<{\n      entryPointType: string;\n      uri: string;\n      label?: string;\n    }>;\n  };\n  reminders?: {\n    useDefault: boolean;\n    overrides?: Array<{\n      method: string;\n      minutes: number;\n    }>;\n  };\n}\n\nexport interface GoogleTokenResponse {\n  access_token: string;\n  refresh_token?: string;\n  expires_in: number;\n  token_type: string;\n  scope: string;\n}\n\nexport interface GoogleCalendarListResponse {\n  items: Array<{\n    id: string;\n    summary: string;\n    primary?: boolean;\n    accessRole: string;\n  }>;\n}\n\nexport interface GoogleFreeBusyResponse {\n  calendars: {\n    [calendarId: string]: {\n      busy: Array<{\n        start: string;\n        end: string;\n      }>;\n    };\n  };\n}\n\n// Form types for UI\nexport interface BookingFormData {\n  guestName: string;\n  guestEmail: string;\n  guestTimezone: string;\n  notes?: string;\n  responses?: QuestionResponse[];\n}\n\nexport interface EventTypeFormData {\n  title: string;\n  description?: string;\n  duration: number;\n  color: string;\n  locationType: LocationType;\n  locationValue?: string;\n  bufferBefore?: number;\n  bufferAfter?: number;\n  minNotice?: number;\n  maxAdvance?: number;\n  questions?: Question[];\n}\n\n// Calendar view types\nexport type CalendarView = \"month\" | \"week\" | \"day\" | \"list\";\n\nexport interface CalendarDay {\n  date: Date;\n  isCurrentMonth: boolean;\n  isToday: boolean;\n  bookings: Booking[];\n}\n\n// Duration options\nexport const DURATION_OPTIONS = [\n  { value: 15, label: \"15 minutes\" },\n  { value: 30, label: \"30 minutes\" },\n  { value: 45, label: \"45 minutes\" },\n  { value: 60, label: \"1 hour\" },\n  { value: 90, label: \"1.5 hours\" },\n  { value: 120, label: \"2 hours\" },\n] as const;\n\n// Color options for event types\nexport const EVENT_COLORS = [\n  { value: \"#3b82f6\", label: \"Blue\" },\n  { value: \"#10b981\", label: \"Green\" },\n  { value: \"#f59e0b\", label: \"Yellow\" },\n  { value: \"#ef4444\", label: \"Red\" },\n  { value: \"#8b5cf6\", label: \"Purple\" },\n  { value: \"#ec4899\", label: \"Pink\" },\n  { value: \"#06b6d4\", label: \"Cyan\" },\n  { value: \"#f97316\", label: \"Orange\" },\n] as const;\n\n// Day names\nexport const DAY_NAMES = [\n  \"Sunday\",\n  \"Monday\",\n  \"Tuesday\",\n  \"Wednesday\",\n  \"Thursday\",\n  \"Friday\",\n  \"Saturday\",\n] as const;\n\nexport const DAY_NAMES_SHORT = [\"Sun\", \"Mon\", \"Tue\", \"Wed\", \"Thu\", \"Fri\", \"Sat\"] as const;\n"],"names":[],"mappings":"AAAA;;CAEC;;;;;;;;;;AAiOM,MAAM,mBAAmB;IAC9B;QAAE,OAAO;QAAI,OAAO;IAAa;IACjC;QAAE,OAAO;QAAI,OAAO;IAAa;IACjC;QAAE,OAAO;QAAI,OAAO;IAAa;IACjC;QAAE,OAAO;QAAI,OAAO;IAAS;IAC7B;QAAE,OAAO;QAAI,OAAO;IAAY;IAChC;QAAE,OAAO;QAAK,OAAO;IAAU;CAChC;AAGM,MAAM,eAAe;IAC1B;QAAE,OAAO;QAAW,OAAO;IAAO;IAClC;QAAE,OAAO;QAAW,OAAO;IAAQ;IACnC;QAAE,OAAO;QAAW,OAAO;IAAS;IACpC;QAAE,OAAO;QAAW,OAAO;IAAM;IACjC;QAAE,OAAO;QAAW,OAAO;IAAS;IACpC;QAAE,OAAO;QAAW,OAAO;IAAO;IAClC;QAAE,OAAO;QAAW,OAAO;IAAO;IAClC;QAAE,OAAO;QAAW,OAAO;IAAS;CACrC;AAGM,MAAM,YAAY;IACvB;IACA;IACA;IACA;IACA;IACA;IACA;CACD;AAEM,MAAM,kBAAkB;IAAC;IAAO;IAAO;IAAO;IAAO;IAAO;IAAO;CAAM"}},
    {"offset": {"line": 1568, "column": 0}, "map": {"version":3,"sources":["file:///Users/jamesspalding/OpenClaw-OS/src/lib/scheduling/utils.ts"],"sourcesContent":["/**\n * Scheduling Utilities\n *\n * Helper functions for date/time handling and formatting.\n */\n\nimport { DAY_NAMES, DAY_NAMES_SHORT, type DaySchedule, type TimeSlot } from \"./types\";\n\n// Re-export constants for convenience\nexport { DAY_NAMES, DAY_NAMES_SHORT };\n\n/**\n * Format a date to \"YYYY-MM-DD\" string\n */\nexport function formatDateString(date: Date): string {\n  const year = date.getFullYear();\n  const month = String(date.getMonth() + 1).padStart(2, \"0\");\n  const day = String(date.getDate()).padStart(2, \"0\");\n  return `${year}-${month}-${day}`;\n}\n\n/**\n * Parse \"YYYY-MM-DD\" string to Date\n */\nexport function parseDateString(dateString: string): Date {\n  const [year, month, day] = dateString.split(\"-\").map(Number);\n  return new Date(year, month - 1, day);\n}\n\n/**\n * Format time string from minutes\n */\nexport function formatTimeFromMinutes(minutes: number): string {\n  const hours = Math.floor(minutes / 60);\n  const mins = minutes % 60;\n  return `${hours.toString().padStart(2, \"0\")}:${mins.toString().padStart(2, \"0\")}`;\n}\n\n/**\n * Parse \"HH:mm\" string to minutes from midnight\n */\nexport function parseTimeToMinutes(time: string): number {\n  const [hours, minutes] = time.split(\":\").map(Number);\n  return hours * 60 + minutes;\n}\n\n/**\n * Format timestamp to human-readable date\n */\nexport function formatDate(timestamp: number, options?: Intl.DateTimeFormatOptions): string {\n  return new Date(timestamp).toLocaleDateString(\"en-US\", {\n    weekday: \"long\",\n    year: \"numeric\",\n    month: \"long\",\n    day: \"numeric\",\n    ...options,\n  });\n}\n\n/**\n * Format timestamp to human-readable time\n */\nexport function formatTime(timestamp: number, timezone?: string): string {\n  return new Date(timestamp).toLocaleTimeString(\"en-US\", {\n    hour: \"numeric\",\n    minute: \"2-digit\",\n    hour12: true,\n    ...(timezone && { timeZone: timezone }),\n  });\n}\n\n/**\n * Format timestamp to human-readable date and time\n */\nexport function formatDateTime(timestamp: number, timezone?: string): string {\n  return new Date(timestamp).toLocaleString(\"en-US\", {\n    weekday: \"short\",\n    month: \"short\",\n    day: \"numeric\",\n    hour: \"numeric\",\n    minute: \"2-digit\",\n    hour12: true,\n    ...(timezone && { timeZone: timezone }),\n  });\n}\n\n/**\n * Format duration in minutes to human-readable string\n */\nexport function formatDuration(minutes: number): string {\n  if (minutes < 60) {\n    return `${minutes} min`;\n  }\n  const hours = Math.floor(minutes / 60);\n  const mins = minutes % 60;\n  if (mins === 0) {\n    return hours === 1 ? \"1 hour\" : `${hours} hours`;\n  }\n  return `${hours}h ${mins}m`;\n}\n\n/**\n * Get relative time string (e.g., \"in 2 hours\", \"tomorrow\")\n */\nexport function getRelativeTime(timestamp: number): string {\n  const now = Date.now();\n  const diff = timestamp - now;\n\n  const minutes = Math.floor(diff / 60000);\n  const hours = Math.floor(diff / 3600000);\n  const days = Math.floor(diff / 86400000);\n\n  if (diff < 0) {\n    return \"Past\";\n  }\n\n  if (minutes < 60) {\n    return `in ${minutes} min`;\n  }\n\n  if (hours < 24) {\n    return `in ${hours} hour${hours === 1 ? \"\" : \"s\"}`;\n  }\n\n  if (days === 1) {\n    return \"Tomorrow\";\n  }\n\n  if (days < 7) {\n    return `in ${days} days`;\n  }\n\n  return formatDate(timestamp, { weekday: undefined, year: undefined });\n}\n\n/**\n * Get user's timezone\n */\nexport function getUserTimezone(): string {\n  return Intl.DateTimeFormat().resolvedOptions().timeZone;\n}\n\n/**\n * Format timezone for display\n */\nexport function formatTimezone(timezone: string): string {\n  try {\n    const now = new Date();\n    const formatter = new Intl.DateTimeFormat(\"en-US\", {\n      timeZone: timezone,\n      timeZoneName: \"short\",\n    });\n    const parts = formatter.formatToParts(now);\n    const tzPart = parts.find((p) => p.type === \"timeZoneName\");\n    return tzPart ? `${timezone} (${tzPart.value})` : timezone;\n  } catch {\n    return timezone;\n  }\n}\n\n/**\n * Get day name from day of week number\n */\nexport function getDayName(dayOfWeek: number, short = false): string {\n  return short ? DAY_NAMES_SHORT[dayOfWeek] : DAY_NAMES[dayOfWeek];\n}\n\n/**\n * Generate dates for a calendar month view\n */\nexport function getCalendarDates(year: number, month: number): Date[] {\n  const firstDay = new Date(year, month, 1);\n  const lastDay = new Date(year, month + 1, 0);\n\n  // Start from the Sunday of the first week\n  const startDate = new Date(firstDay);\n  startDate.setDate(startDate.getDate() - firstDay.getDay());\n\n  // End at the Saturday of the last week\n  const endDate = new Date(lastDay);\n  endDate.setDate(endDate.getDate() + (6 - lastDay.getDay()));\n\n  const dates: Date[] = [];\n  const current = new Date(startDate);\n\n  while (current <= endDate) {\n    dates.push(new Date(current));\n    current.setDate(current.getDate() + 1);\n  }\n\n  return dates;\n}\n\n/**\n * Generate dates for a week view\n */\nexport function getWeekDates(date: Date): Date[] {\n  const startOfWeek = new Date(date);\n  startOfWeek.setDate(date.getDate() - date.getDay());\n\n  const dates: Date[] = [];\n  for (let i = 0; i < 7; i++) {\n    const d = new Date(startOfWeek);\n    d.setDate(startOfWeek.getDate() + i);\n    dates.push(d);\n  }\n\n  return dates;\n}\n\n/**\n * Check if two dates are the same day\n */\nexport function isSameDay(date1: Date, date2: Date): boolean {\n  return (\n    date1.getFullYear() === date2.getFullYear() &&\n    date1.getMonth() === date2.getMonth() &&\n    date1.getDate() === date2.getDate()\n  );\n}\n\n/**\n * Check if a date is today\n */\nexport function isToday(date: Date): boolean {\n  return isSameDay(date, new Date());\n}\n\n/**\n * Check if a date is in the past\n */\nexport function isPast(date: Date): boolean {\n  const today = new Date();\n  today.setHours(0, 0, 0, 0);\n  return date < today;\n}\n\n/**\n * Get start and end of day timestamps\n */\nexport function getDayBounds(date: Date): { start: number; end: number } {\n  const start = new Date(date);\n  start.setHours(0, 0, 0, 0);\n\n  const end = new Date(date);\n  end.setHours(23, 59, 59, 999);\n\n  return { start: start.getTime(), end: end.getTime() };\n}\n\n/**\n * Create default availability schedule (9-5 weekdays)\n */\nexport function createDefaultSchedule(): DaySchedule[] {\n  return [\n    { dayOfWeek: 0, isAvailable: false, slots: [] },\n    { dayOfWeek: 1, isAvailable: true, slots: [{ start: \"09:00\", end: \"17:00\" }] },\n    { dayOfWeek: 2, isAvailable: true, slots: [{ start: \"09:00\", end: \"17:00\" }] },\n    { dayOfWeek: 3, isAvailable: true, slots: [{ start: \"09:00\", end: \"17:00\" }] },\n    { dayOfWeek: 4, isAvailable: true, slots: [{ start: \"09:00\", end: \"17:00\" }] },\n    { dayOfWeek: 5, isAvailable: true, slots: [{ start: \"09:00\", end: \"17:00\" }] },\n    { dayOfWeek: 6, isAvailable: false, slots: [] },\n  ];\n}\n\n/**\n * Merge overlapping time slots\n */\nexport function mergeTimeSlots(slots: TimeSlot[]): TimeSlot[] {\n  if (slots.length === 0) return [];\n\n  // Sort by start time\n  const sorted = [...slots].sort((a, b) =>\n    parseTimeToMinutes(a.start) - parseTimeToMinutes(b.start)\n  );\n\n  const merged: TimeSlot[] = [sorted[0]];\n\n  for (let i = 1; i < sorted.length; i++) {\n    const current = sorted[i];\n    const last = merged[merged.length - 1];\n\n    const lastEnd = parseTimeToMinutes(last.end);\n    const currentStart = parseTimeToMinutes(current.start);\n\n    if (currentStart <= lastEnd) {\n      // Overlapping, merge\n      const currentEnd = parseTimeToMinutes(current.end);\n      if (currentEnd > lastEnd) {\n        last.end = current.end;\n      }\n    } else {\n      // No overlap, add new slot\n      merged.push(current);\n    }\n  }\n\n  return merged;\n}\n\n/**\n * Generate time slot options for select inputs\n */\nexport function generateTimeOptions(\n  startHour = 0,\n  endHour = 24,\n  intervalMinutes = 30\n): Array<{ value: string; label: string }> {\n  const options: Array<{ value: string; label: string }> = [];\n\n  for (let minutes = startHour * 60; minutes < endHour * 60; minutes += intervalMinutes) {\n    const time = formatTimeFromMinutes(minutes);\n    const label = formatTime(new Date().setHours(0, minutes, 0, 0));\n    options.push({ value: time, label });\n  }\n\n  return options;\n}\n\n/**\n * Convert timestamp to timezone-aware Date\n */\nexport function toTimezone(timestamp: number, timezone: string): Date {\n  const date = new Date(timestamp);\n  const options: Intl.DateTimeFormatOptions = {\n    timeZone: timezone,\n    year: \"numeric\",\n    month: \"2-digit\",\n    day: \"2-digit\",\n    hour: \"2-digit\",\n    minute: \"2-digit\",\n    second: \"2-digit\",\n    hour12: false,\n  };\n\n  const parts = new Intl.DateTimeFormat(\"en-CA\", options).formatToParts(date);\n  const get = (type: string) => parts.find((p) => p.type === type)?.value || \"0\";\n\n  return new Date(\n    parseInt(get(\"year\")),\n    parseInt(get(\"month\")) - 1,\n    parseInt(get(\"day\")),\n    parseInt(get(\"hour\")),\n    parseInt(get(\"minute\")),\n    parseInt(get(\"second\"))\n  );\n}\n\n/**\n * Get booking link URL\n */\nexport function getBookingLink(username: string, eventSlug: string): string {\n  if (typeof window !== \"undefined\") {\n    return `${window.location.origin}/book/${username}/${eventSlug}`;\n  }\n  return `/book/${username}/${eventSlug}`;\n}\n\n/**\n * Copy text to clipboard\n */\nexport async function copyToClipboard(text: string): Promise<boolean> {\n  try {\n    await navigator.clipboard.writeText(text);\n    return true;\n  } catch {\n    // Fallback for older browsers\n    const textarea = document.createElement(\"textarea\");\n    textarea.value = text;\n    textarea.style.position = \"fixed\";\n    textarea.style.opacity = \"0\";\n    document.body.appendChild(textarea);\n    textarea.select();\n    try {\n      document.execCommand(\"copy\");\n      return true;\n    } catch {\n      return false;\n    } finally {\n      document.body.removeChild(textarea);\n    }\n  }\n}\n\n/**\n * Validate email format\n */\nexport function isValidEmail(email: string): boolean {\n  const emailRegex = /^[^\\s@]+@[^\\s@]+\\.[^\\s@]+$/;\n  return emailRegex.test(email);\n}\n\n/**\n * Generate a unique ID\n */\nexport function generateId(): string {\n  return Math.random().toString(36).substring(2, 11) + Date.now().toString(36);\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 1948, "column": 0}, "map": {"version":3,"sources":["file:///Users/jamesspalding/OpenClaw-OS/src/hooks/useScheduling.ts"],"sourcesContent":["/**\n * useScheduling - Hook for managing scheduling operations\n *\n * Provides access to event types, availability, bookings, and calendar sync.\n */\n\n\"use client\";\n\nimport { useCallback, useEffect, useState } from \"react\";\nimport { useQuery, useMutation } from \"@/lib/openclaw/hooks\";\nimport { getUserTimezone } from \"@/lib/scheduling/utils\";\nimport type {\n  EventType,\n  Availability,\n  Booking,\n  CalendarIntegration,\n  CalendarView,\n} from \"@/lib/scheduling/types\";\n\n// Dynamically import the API to handle cases where schema isn't deployed\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\nlet api: any = null;\ntry {\n  api = require('@/lib/convex-shim').api;\n} catch {\n  // Schema not deployed yet\n}\n\ninterface UseSchedulingOptions {\n  autoInitializeAvailability?: boolean;\n}\n\nexport function useScheduling(options: UseSchedulingOptions = {}) {\n  const { autoInitializeAvailability = true } = options;\n\n  // Local state\n  const [calendarView, setCalendarView] = useState<CalendarView>(\"month\");\n  const [selectedDate, setSelectedDate] = useState<Date>(new Date());\n  const [isConnectingGoogle, setIsConnectingGoogle] = useState(false);\n\n  // Schema is ready if api.scheduling exists (always true with static import)\n  const schemaReady = Boolean(api?.scheduling);\n\n  // Convex queries - use skip pattern for conditional queries\n  const userProfileQuery = useQuery(\n    api.scheduling.getUserProfile,\n    schemaReady ? {} : \"skip\"\n  );\n  const eventTypesQuery = useQuery(\n    api.scheduling.getEventTypes,\n    schemaReady ? {} : \"skip\"\n  );\n  const availabilityQuery = useQuery(\n    api.scheduling.getAvailability,\n    schemaReady ? {} : \"skip\"\n  );\n  const defaultAvailabilityQuery = useQuery(\n    api.scheduling.getDefaultAvailability,\n    schemaReady ? {} : \"skip\"\n  );\n  const calendarIntegrationQuery = useQuery(\n    api.scheduling.getCalendarIntegration,\n    schemaReady ? {} : \"skip\"\n  );\n  const upcomingBookingsQuery = useQuery(\n    api.scheduling.getUpcomingBookings,\n    schemaReady ? { limit: 10 } : \"skip\"\n  );\n\n  // Cast results\n  const userProfile = userProfileQuery as { _id: string; username: string; displayName?: string; email?: string } | null | undefined;\n  const eventTypes = eventTypesQuery as EventType[] | undefined;\n  const availability = availabilityQuery as Availability[] | undefined;\n  const defaultAvailability = defaultAvailabilityQuery as Availability | null | undefined;\n  const calendarIntegration = calendarIntegrationQuery as CalendarIntegration | null | undefined;\n  const upcomingBookings = upcomingBookingsQuery as Booking[] | undefined;\n\n  // Convex mutations - use direct API references\n  const createEventTypeMutation = useMutation(api.scheduling.createEventType);\n  const updateEventTypeMutation = useMutation(api.scheduling.updateEventType);\n  const deleteEventTypeMutation = useMutation(api.scheduling.deleteEventType);\n  const createAvailabilityMutation = useMutation(api.scheduling.createAvailability);\n  const updateAvailabilityMutation = useMutation(api.scheduling.updateAvailability);\n  const deleteAvailabilityMutation = useMutation(api.scheduling.deleteAvailability);\n  const initializeDefaultAvailabilityMutation = useMutation(api.scheduling.initializeDefaultAvailability);\n  const setOverrideMutation = useMutation(api.scheduling.setOverride);\n  const deleteOverrideMutation = useMutation(api.scheduling.deleteOverride);\n  const updateBookingStatusMutation = useMutation(api.scheduling.updateBookingStatus);\n  const rescheduleBookingMutation = useMutation(api.scheduling.rescheduleBooking);\n  const saveCalendarIntegrationMutation = useMutation(api.scheduling.saveCalendarIntegration);\n  const updateCalendarIntegrationMutation = useMutation(api.scheduling.updateCalendarIntegration);\n  const deleteCalendarIntegrationMutation = useMutation(api.scheduling.deleteCalendarIntegration);\n  const updateBookingGoogleEventIdMutation = useMutation(api.scheduling.updateBookingGoogleEventId);\n  const createOrUpdateUserProfileMutation = useMutation(api.scheduling.createOrUpdateUserProfile);\n\n  // Auto-initialize default availability\n  useEffect(() => {\n    if (\n      schemaReady &&\n      autoInitializeAvailability &&\n      availability !== undefined &&\n      availability.length === 0 &&\n      defaultAvailability === null\n    ) {\n      const timezone = getUserTimezone();\n      initializeDefaultAvailabilityMutation({ timezone }).catch(console.error);\n    }\n  }, [\n    schemaReady,\n    autoInitializeAvailability,\n    availability,\n    defaultAvailability,\n    initializeDefaultAvailabilityMutation,\n  ]);\n\n  // User Profile actions\n  const createOrUpdateUserProfile = useCallback(\n    async (data: { username: string; displayName?: string }) => {\n      if (!schemaReady) throw new Error(\"Schema not deployed\");\n      return await createOrUpdateUserProfileMutation(data);\n    },\n    [schemaReady, createOrUpdateUserProfileMutation]\n  );\n\n  // Event Type actions\n  const createEventType = useCallback(\n    async (data: {\n      title: string;\n      description?: string;\n      duration: number;\n      color: string;\n      locationType: \"google_meet\" | \"zoom\" | \"phone\" | \"in_person\" | \"custom\";\n      locationValue?: string;\n      bufferBefore?: number;\n      bufferAfter?: number;\n      minNotice?: number;\n      maxAdvance?: number;\n    }) => {\n      if (!schemaReady) throw new Error(\"Schema not deployed\");\n      return await createEventTypeMutation(data);\n    },\n    [schemaReady, createEventTypeMutation]\n  );\n\n  const updateEventType = useCallback(\n    async (id: string, data: Partial<EventType>) => {\n      if (!schemaReady) throw new Error(\"Schema not deployed\");\n      const { _id, ownerId, createdAt, ...updateData } = data as Record<string, unknown>;\n      await updateEventTypeMutation({ id, ...updateData } as any);\n    },\n    [schemaReady, updateEventTypeMutation]\n  );\n\n  const deleteEventType = useCallback(\n    async (id: string) => {\n      if (!schemaReady) throw new Error(\"Schema not deployed\");\n      await deleteEventTypeMutation({ id } as any);\n    },\n    [schemaReady, deleteEventTypeMutation]\n  );\n\n  // Availability actions\n  const createAvailability = useCallback(\n    async (data: {\n      name: string;\n      timezone: string;\n      isDefault?: boolean;\n      schedule: Array<{\n        dayOfWeek: number;\n        isAvailable: boolean;\n        slots: Array<{ start: string; end: string }>;\n      }>;\n    }) => {\n      if (!schemaReady) throw new Error(\"Schema not deployed\");\n      return await createAvailabilityMutation(data);\n    },\n    [schemaReady, createAvailabilityMutation]\n  );\n\n  const updateAvailability = useCallback(\n    async (id: string, data: Partial<Availability>) => {\n      if (!schemaReady) throw new Error(\"Schema not deployed\");\n      const { _id, ownerId, createdAt, ...updateData } = data as Record<string, unknown>;\n      await updateAvailabilityMutation({ id, ...updateData } as any);\n    },\n    [schemaReady, updateAvailabilityMutation]\n  );\n\n  const deleteAvailability = useCallback(\n    async (id: string) => {\n      if (!schemaReady) throw new Error(\"Schema not deployed\");\n      await deleteAvailabilityMutation({ id } as any);\n    },\n    [schemaReady, deleteAvailabilityMutation]\n  );\n\n  // Override actions\n  const setOverride = useCallback(\n    async (data: {\n      date: string;\n      isBlocked: boolean;\n      slots?: Array<{ start: string; end: string }>;\n      reason?: string;\n    }) => {\n      if (!schemaReady) throw new Error(\"Schema not deployed\");\n      return await setOverrideMutation(data);\n    },\n    [schemaReady, setOverrideMutation]\n  );\n\n  const deleteOverride = useCallback(\n    async (date: string) => {\n      if (!schemaReady) throw new Error(\"Schema not deployed\");\n      await deleteOverrideMutation({ date });\n    },\n    [schemaReady, deleteOverrideMutation]\n  );\n\n  // Booking actions\n  const confirmBooking = useCallback(\n    async (id: string) => {\n      if (!schemaReady) throw new Error(\"Schema not deployed\");\n      await updateBookingStatusMutation({ id, status: \"confirmed\" } as any);\n    },\n    [schemaReady, updateBookingStatusMutation]\n  );\n\n  const cancelBooking = useCallback(\n    async (id: string, reason?: string, cancelledBy?: \"host\" | \"guest\") => {\n      if (!schemaReady) throw new Error(\"Schema not deployed\");\n      await updateBookingStatusMutation({\n        id,\n        status: \"cancelled\",\n        cancelReason: reason,\n        cancelledBy,\n      } as any);\n    },\n    [schemaReady, updateBookingStatusMutation]\n  );\n\n  const markNoShow = useCallback(\n    async (id: string) => {\n      if (!schemaReady) throw new Error(\"Schema not deployed\");\n      await updateBookingStatusMutation({ id, status: \"no_show\" } as any);\n    },\n    [schemaReady, updateBookingStatusMutation]\n  );\n\n  const markCompleted = useCallback(\n    async (id: string) => {\n      if (!schemaReady) throw new Error(\"Schema not deployed\");\n      await updateBookingStatusMutation({ id, status: \"completed\" } as any);\n    },\n    [schemaReady, updateBookingStatusMutation]\n  );\n\n  const rescheduleBooking = useCallback(\n    async (id: string, newStartTime: number) => {\n      if (!schemaReady) throw new Error(\"Schema not deployed\");\n      return await rescheduleBookingMutation({ id, newStartTime } as any);\n    },\n    [schemaReady, rescheduleBookingMutation]\n  );\n\n  // Google Calendar actions\n  const connectGoogleCalendar = useCallback(async () => {\n    setIsConnectingGoogle(true);\n    try {\n      const response = await fetch(\"/api/calendar/google/auth?returnUrl=/calendar\");\n      const data = await response.json();\n\n      if (data.authUrl) {\n        window.location.href = data.authUrl;\n      } else {\n        throw new Error(data.error || \"Failed to get auth URL\");\n      }\n    } catch (error) {\n      console.error(\"Failed to connect Google Calendar:\", error);\n      setIsConnectingGoogle(false);\n      throw error;\n    }\n  }, []);\n\n  const saveGoogleTokens = useCallback(\n    async (tokenData: {\n      accessToken: string;\n      refreshToken: string;\n      tokenExpiry: number;\n      calendarId: string;\n      calendarEmail: string;\n    }) => {\n      if (!schemaReady) throw new Error(\"Schema not deployed\");\n      await saveCalendarIntegrationMutation(tokenData);\n    },\n    [schemaReady, saveCalendarIntegrationMutation]\n  );\n\n  const disconnectGoogleCalendar = useCallback(async () => {\n    if (!schemaReady) throw new Error(\"Schema not deployed\");\n    await deleteCalendarIntegrationMutation();\n  }, [schemaReady, deleteCalendarIntegrationMutation]);\n\n  const syncBookingToCalendar = useCallback(\n    async (booking: Booking, action: \"create\" | \"update\" | \"delete\" = \"create\") => {\n      if (!calendarIntegration) {\n        throw new Error(\"No calendar integration configured\");\n      }\n\n      const response = await fetch(\"/api/calendar/sync\", {\n        method: \"POST\",\n        headers: { \"Content-Type\": \"application/json\" },\n        body: JSON.stringify({\n          action,\n          booking,\n          integration: calendarIntegration,\n          timezone: defaultAvailability?.timezone || getUserTimezone(),\n        }),\n      });\n\n      const data = await response.json();\n\n      if (data.needsTokenUpdate) {\n        await saveCalendarIntegrationMutation({\n          accessToken: data.newTokens.accessToken,\n          refreshToken: data.newTokens.refreshToken,\n          tokenExpiry: data.newTokens.tokenExpiry,\n          calendarId: calendarIntegration.calendarId,\n          calendarEmail: calendarIntegration.calendarEmail,\n        });\n        return syncBookingToCalendar(booking, action);\n      }\n\n      if (!data.success) {\n        throw new Error(data.error || \"Sync failed\");\n      }\n\n      if (action === \"create\" && data.googleEventId) {\n        await updateBookingGoogleEventIdMutation({\n          bookingId: booking._id,\n          googleEventId: data.googleEventId,\n          location: data.meetLink,\n        } as any);\n      }\n\n      return data;\n    },\n    [\n      calendarIntegration,\n      defaultAvailability?.timezone,\n      saveCalendarIntegrationMutation,\n      updateBookingGoogleEventIdMutation,\n    ]\n  );\n\n  // Loading states\n  const isLoading = !schemaReady ||\n    eventTypes === undefined ||\n    availability === undefined ||\n    calendarIntegration === undefined;\n\n  return {\n    // Schema status\n    schemaReady,\n\n    // Data\n    userProfile: userProfile ?? null,\n    eventTypes: eventTypes || [],\n    availability: availability || [],\n    defaultAvailability: defaultAvailability ?? null,\n    calendarIntegration: calendarIntegration ?? null,\n    upcomingBookings: upcomingBookings || [],\n\n    // Calendar view state\n    calendarView,\n    setCalendarView,\n    selectedDate,\n    setSelectedDate,\n\n    // User Profile actions\n    createOrUpdateUserProfile,\n\n    // Event Type actions\n    createEventType,\n    updateEventType,\n    deleteEventType,\n\n    // Availability actions\n    createAvailability,\n    updateAvailability,\n    deleteAvailability,\n    setOverride,\n    deleteOverride,\n\n    // Booking actions\n    confirmBooking,\n    cancelBooking,\n    markNoShow,\n    markCompleted,\n    rescheduleBooking,\n\n    // Google Calendar actions\n    connectGoogleCalendar,\n    saveGoogleTokens,\n    disconnectGoogleCalendar,\n    syncBookingToCalendar,\n    isConnectingGoogle,\n\n    // Loading state\n    isLoading,\n  };\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 2354, "column": 0}, "map": {"version":3,"sources":["file:///Users/jamesspalding/OpenClaw-OS/src/hooks/useReducedMotion.ts"],"sourcesContent":["'use client';\n\nimport { useState, useEffect } from 'react';\n\n/**\n * Hook to detect user's prefers-reduced-motion preference\n *\n * @returns boolean - true if user prefers reduced motion\n *\n * @example\n * ```tsx\n * const prefersReducedMotion = useReducedMotion();\n *\n * <motion.div\n *   animate={{ opacity: 1, y: 0 }}\n *   transition={prefersReducedMotion ? { duration: 0 } : { duration: 0.3 }}\n * />\n * ```\n */\nexport function useReducedMotion(): boolean {\n  const [prefersReducedMotion, setPrefersReducedMotion] = useState(false);\n\n  useEffect(() => {\n    // Check if window is available (SSR safety)\n    if (typeof window === 'undefined') return;\n\n    const mediaQuery = window.matchMedia('(prefers-reduced-motion: reduce)');\n\n    // Set initial value\n    setPrefersReducedMotion(mediaQuery.matches);\n\n    // Listen for changes\n    const handleChange = (event: MediaQueryListEvent) => {\n      setPrefersReducedMotion(event.matches);\n    };\n\n    mediaQuery.addEventListener('change', handleChange);\n\n    return () => {\n      mediaQuery.removeEventListener('change', handleChange);\n    };\n  }, []);\n\n  return prefersReducedMotion;\n}\n\n/**\n * Get motion-safe animation props for Framer Motion\n * Returns empty transition when reduced motion is preferred\n *\n * @example\n * ```tsx\n * const motionProps = useMotionSafe({\n *   initial: { opacity: 0, y: 20 },\n *   animate: { opacity: 1, y: 0 },\n *   transition: { duration: 0.3 }\n * });\n *\n * <motion.div {...motionProps} />\n * ```\n */\nexport function useMotionSafe<T extends Record<string, unknown>>(\n  props: T\n): T {\n  const prefersReducedMotion = useReducedMotion();\n\n  if (prefersReducedMotion) {\n    return {\n      ...props,\n      initial: false,\n      animate: props.animate,\n      exit: undefined,\n      transition: { duration: 0 },\n      whileHover: undefined,\n      whileTap: undefined,\n      whileFocus: undefined,\n      whileDrag: undefined,\n      whileInView: undefined,\n    } as T;\n  }\n\n  return props;\n}\n\n/**\n * Reduced motion safe transition config\n * Use this as the transition prop for Framer Motion\n */\nexport function getReducedMotionTransition(\n  normalTransition: Record<string, unknown>,\n  prefersReducedMotion: boolean\n): Record<string, unknown> {\n  if (prefersReducedMotion) {\n    return { duration: 0 };\n  }\n  return normalTransition;\n}\n\nexport default useReducedMotion;\n"],"names":[],"mappings":";;;;;;;;;;AAEA;;AAFA;;AAmBO,SAAS;;IACd,MAAM,CAAC,sBAAsB,wBAAwB,GAAG,IAAA,kXAAQ,EAAC;IAEjE,IAAA,mXAAS;sCAAC;YACR,4CAA4C;YAC5C;;YAEA,MAAM,aAAa,OAAO,UAAU,CAAC;YAErC,oBAAoB;YACpB,wBAAwB,WAAW,OAAO;YAE1C,qBAAqB;YACrB,MAAM;2DAAe,CAAC;oBACpB,wBAAwB,MAAM,OAAO;gBACvC;;YAEA,WAAW,gBAAgB,CAAC,UAAU;YAEtC;8CAAO;oBACL,WAAW,mBAAmB,CAAC,UAAU;gBAC3C;;QACF;qCAAG,EAAE;IAEL,OAAO;AACT;GAzBgB;AA0CT,SAAS,cACd,KAAQ;;IAER,MAAM,uBAAuB;IAE7B,IAAI,sBAAsB;QACxB,OAAO;YACL,GAAG,KAAK;YACR,SAAS;YACT,SAAS,MAAM,OAAO;YACtB,MAAM;YACN,YAAY;gBAAE,UAAU;YAAE;YAC1B,YAAY;YACZ,UAAU;YACV,YAAY;YACZ,WAAW;YACX,aAAa;QACf;IACF;IAEA,OAAO;AACT;IArBgB;;QAGe;;;AAwBxB,SAAS,2BACd,gBAAyC,EACzC,oBAA6B;IAE7B,IAAI,sBAAsB;QACxB,OAAO;YAAE,UAAU;QAAE;IACvB;IACA,OAAO;AACT;uCAEe"}},
    {"offset": {"line": 2438, "column": 0}, "map": {"version":3,"sources":["file:///Users/jamesspalding/OpenClaw-OS/src/hooks/useHorizontalScroll.ts"],"sourcesContent":["'use client';\n\nimport { useRef, useEffect, useCallback } from 'react';\n\n/**\n * Hook to enable mouse wheel scrolling on horizontal scroll containers.\n *\n * Converts vertical wheel movement (deltaY) to horizontal scroll,\n * allowing users to scroll horizontal lists with their mouse wheel.\n *\n * @param options.speed - Multiplier for scroll speed (default: 1)\n * @param options.smooth - Enable smooth scrolling behavior (default: false)\n * @returns A ref to attach to the scrollable container\n *\n * @example\n * ```tsx\n * function HorizontalList() {\n *   const scrollRef = useHorizontalScroll<HTMLDivElement>();\n *   return (\n *     <div ref={scrollRef} className=\"flex overflow-x-auto\">\n *       {items.map(item => <Card key={item.id} />)}\n *     </div>\n *   );\n * }\n * ```\n */\nexport function useHorizontalScroll<T extends HTMLElement>(\n  options: { speed?: number; smooth?: boolean } = {}\n) {\n  const { speed = 1, smooth = false } = options;\n  const ref = useRef<T>(null);\n\n  const handleWheel = useCallback(\n    (e: WheelEvent) => {\n      const el = ref.current;\n      if (!el) return;\n\n      // Don't hijack if user is scrolling horizontally naturally (trackpad)\n      if (Math.abs(e.deltaX) > Math.abs(e.deltaY)) return;\n\n      // Don't hijack if container can't scroll horizontally\n      const canScrollHorizontally = el.scrollWidth > el.clientWidth;\n      if (!canScrollHorizontally) return;\n\n      // Check if we're at the scroll boundaries\n      const isAtStart = el.scrollLeft <= 0;\n      const isAtEnd = el.scrollLeft >= el.scrollWidth - el.clientWidth - 1;\n\n      // Allow natural page scroll if at boundaries and trying to scroll past\n      if ((isAtStart && e.deltaY < 0) || (isAtEnd && e.deltaY > 0)) {\n        return;\n      }\n\n      // Prevent default vertical scroll and convert to horizontal\n      e.preventDefault();\n\n      if (smooth) {\n        el.scrollBy({\n          left: e.deltaY * speed,\n          behavior: 'smooth',\n        });\n      } else {\n        el.scrollLeft += e.deltaY * speed;\n      }\n    },\n    [speed, smooth]\n  );\n\n  useEffect(() => {\n    const el = ref.current;\n    if (!el) return;\n\n    // Must use { passive: false } to enable preventDefault()\n    el.addEventListener('wheel', handleWheel, { passive: false });\n\n    return () => {\n      el.removeEventListener('wheel', handleWheel);\n    };\n  }, [handleWheel]);\n\n  return ref;\n}\n\nexport default useHorizontalScroll;\n"],"names":[],"mappings":";;;;;;AAEA;;AAFA;;AA0BO,SAAS,oBACd,UAAgD,CAAC,CAAC;;IAElD,MAAM,EAAE,QAAQ,CAAC,EAAE,SAAS,KAAK,EAAE,GAAG;IACtC,MAAM,MAAM,IAAA,gXAAM,EAAI;IAEtB,MAAM,cAAc,IAAA,qXAAW;wDAC7B,CAAC;YACC,MAAM,KAAK,IAAI,OAAO;YACtB,IAAI,CAAC,IAAI;YAET,sEAAsE;YACtE,IAAI,KAAK,GAAG,CAAC,EAAE,MAAM,IAAI,KAAK,GAAG,CAAC,EAAE,MAAM,GAAG;YAE7C,sDAAsD;YACtD,MAAM,wBAAwB,GAAG,WAAW,GAAG,GAAG,WAAW;YAC7D,IAAI,CAAC,uBAAuB;YAE5B,0CAA0C;YAC1C,MAAM,YAAY,GAAG,UAAU,IAAI;YACnC,MAAM,UAAU,GAAG,UAAU,IAAI,GAAG,WAAW,GAAG,GAAG,WAAW,GAAG;YAEnE,uEAAuE;YACvE,IAAI,AAAC,aAAa,EAAE,MAAM,GAAG,KAAO,WAAW,EAAE,MAAM,GAAG,GAAI;gBAC5D;YACF;YAEA,4DAA4D;YAC5D,EAAE,cAAc;YAEhB,IAAI,QAAQ;gBACV,GAAG,QAAQ,CAAC;oBACV,MAAM,EAAE,MAAM,GAAG;oBACjB,UAAU;gBACZ;YACF,OAAO;gBACL,GAAG,UAAU,IAAI,EAAE,MAAM,GAAG;YAC9B;QACF;uDACA;QAAC;QAAO;KAAO;IAGjB,IAAA,mXAAS;yCAAC;YACR,MAAM,KAAK,IAAI,OAAO;YACtB,IAAI,CAAC,IAAI;YAET,yDAAyD;YACzD,GAAG,gBAAgB,CAAC,SAAS,aAAa;gBAAE,SAAS;YAAM;YAE3D;iDAAO;oBACL,GAAG,mBAAmB,CAAC,SAAS;gBAClC;;QACF;wCAAG;QAAC;KAAY;IAEhB,OAAO;AACT;GAvDgB;uCAyDD"}},
    {"offset": {"line": 2511, "column": 0}, "map": {"version":3,"sources":["file:///Users/jamesspalding/OpenClaw-OS/src/hooks/index.ts"],"sourcesContent":["// Voice hooks\nexport {\n  useSpeechRecognition,\n  type SpeechRecognitionStatus,\n  type SpeechRecognitionError,\n  type UseSpeechRecognitionReturn,\n  type UseSpeechRecognitionOptions,\n} from './useSpeechRecognition';\n\nexport {\n  useTextToSpeech,\n  type TTSStatus,\n  type TTSError,\n  type TTSVoice,\n  type UseTextToSpeechReturn,\n  type UseTextToSpeechOptions,\n} from './useTextToSpeech';\n\nexport {\n  useVoiceChat,\n  type VoiceChatMode,\n  type VoiceChatError,\n  type UseVoiceChatReturn,\n  type UseVoiceChatOptions,\n} from './useVoiceChat';\n\n// Scheduling hooks\nexport { useScheduling } from './useScheduling';\n\n// Accessibility hooks\nexport {\n  useReducedMotion,\n  useMotionSafe,\n  getReducedMotionTransition,\n} from './useReducedMotion';\n\n// UI hooks\nexport { useHorizontalScroll } from './useHorizontalScroll';\n"],"names":[],"mappings":";AAAA,cAAc;AACd;AAQA;AASA;AAQA,mBAAmB;AACnB;AAEA,sBAAsB;AACtB;AAMA,WAAW;AACX"}},
    {"offset": {"line": 2535, "column": 0}, "map": {"version":3,"sources":["file:///Users/jamesspalding/OpenClaw-OS/src/skills/index.ts"],"sourcesContent":["// Claw AI Skills System\n// Skills are specialized capabilities that Claw AI can invoke\n\nexport interface Skill {\n  id: string;\n  name: string;\n  description: string;\n  icon: string;\n  commands: SkillCommand[];\n  enabled: boolean;\n}\n\nexport interface SkillCommand {\n  name: string;\n  description: string;\n  syntax: string;\n  examples: string[];\n}\n\n// Browser Automation Skill\nexport const browserAutomationSkill: Skill = {\n  id: 'browser-automation',\n  name: 'Browser Automation',\n  description: 'Control headless browsers to navigate, interact, and extract data from web pages',\n  icon: 'Globe',\n  enabled: true,\n  commands: [\n    {\n      name: 'open',\n      description: 'Navigate to a URL',\n      syntax: 'agent-browser open <url>',\n      examples: [\n        'agent-browser open https://example.com',\n        'agent-browser open http://localhost:3000',\n      ],\n    },\n    {\n      name: 'snapshot',\n      description: 'Get accessibility tree with element refs for AI interaction',\n      syntax: 'agent-browser snapshot',\n      examples: ['agent-browser snapshot'],\n    },\n    {\n      name: 'click',\n      description: 'Click an element by ref or selector',\n      syntax: 'agent-browser click <selector>',\n      examples: [\n        'agent-browser click @e2',\n        'agent-browser click \"#submit\"',\n        'agent-browser click \"text=Sign In\"',\n      ],\n    },\n    {\n      name: 'fill',\n      description: 'Clear and fill an input field',\n      syntax: 'agent-browser fill <selector> <text>',\n      examples: [\n        'agent-browser fill @e3 \"user@example.com\"',\n        'agent-browser fill \"#email\" \"test@test.com\"',\n      ],\n    },\n    {\n      name: 'screenshot',\n      description: 'Take a screenshot of the page',\n      syntax: 'agent-browser screenshot [path]',\n      examples: [\n        'agent-browser screenshot /tmp/page.png',\n        'agent-browser screenshot --full',\n      ],\n    },\n    {\n      name: 'get',\n      description: 'Get information from the page',\n      syntax: 'agent-browser get <type> <selector>',\n      examples: [\n        'agent-browser get text \".title\"',\n        'agent-browser get url',\n        'agent-browser get title',\n      ],\n    },\n    {\n      name: 'wait',\n      description: 'Wait for elements or time',\n      syntax: 'agent-browser wait <condition> [selector]',\n      examples: [\n        'agent-browser wait visible \".modal\"',\n        'agent-browser wait 2000',\n      ],\n    },\n    {\n      name: 'close',\n      description: 'Close the browser session',\n      syntax: 'agent-browser close',\n      examples: ['agent-browser close'],\n    },\n  ],\n};\n\n// File System Skill\nexport const fileSystemSkill: Skill = {\n  id: 'file-system',\n  name: 'File System',\n  description: 'Read, write, search, and manage files in the project',\n  icon: 'FolderOpen',\n  enabled: true,\n  commands: [\n    {\n      name: 'read',\n      description: 'Read file contents',\n      syntax: 'cat <file_path>',\n      examples: [\n        'cat src/app/page.tsx',\n        'cat -n src/components/Button.tsx',\n        'head -n 50 README.md',\n      ],\n    },\n    {\n      name: 'write',\n      description: 'Write content to a file',\n      syntax: 'echo \"content\" > <file_path>',\n      examples: [\n        'echo \"Hello\" > test.txt',\n        'cat << EOF > file.ts\\ncode\\nEOF',\n      ],\n    },\n    {\n      name: 'list',\n      description: 'List directory contents',\n      syntax: 'ls -la <path>',\n      examples: [\n        'ls -la src/',\n        'ls -lah src/components/',\n      ],\n    },\n    {\n      name: 'find',\n      description: 'Find files by name pattern',\n      syntax: 'find <path> -name \"<pattern>\"',\n      examples: [\n        'find src/ -name \"*.tsx\"',\n        'find . -name \"package.json\"',\n      ],\n    },\n    {\n      name: 'search',\n      description: 'Search file contents',\n      syntax: 'grep -r \"<pattern>\" <path>',\n      examples: [\n        'grep -rn \"useState\" src/',\n        'grep -r --include=\"*.ts\" \"export\" src/',\n      ],\n    },\n    {\n      name: 'mkdir',\n      description: 'Create directory',\n      syntax: 'mkdir -p <path>',\n      examples: [\n        'mkdir -p src/features/new-feature',\n        'mkdir -p src/components/ui',\n      ],\n    },\n    {\n      name: 'copy',\n      description: 'Copy files or directories',\n      syntax: 'cp <source> <destination>',\n      examples: [\n        'cp src/Button.tsx src/Button.backup.tsx',\n        'cp -r src/components src/components-backup',\n      ],\n    },\n    {\n      name: 'move',\n      description: 'Move or rename files',\n      syntax: 'mv <source> <destination>',\n      examples: [\n        'mv old-name.ts new-name.ts',\n        'mv src/file.ts src/lib/file.ts',\n      ],\n    },\n  ],\n};\n\n// Product Lifecycle Skill (BMAD-METHOD + CCPM)\n// Enables Claw AI to orchestrate the full product development workflow\nexport const productLifecycleSkill: Skill = {\n  id: 'product-lifecycle',\n  name: 'Product Lifecycle',\n  description: 'Orchestrate the full product development workflow from discovery through implementation. Based on BMAD-METHOD for PRDs and CCPM for parallel execution.',\n  icon: 'Sparkles',\n  enabled: true,\n  commands: [\n    {\n      name: 'create_project',\n      description: 'Create a new product project to contain PRDs, epics, and tickets',\n      syntax: 'create_project <name> [description]',\n      examples: [\n        'create_project \"Weather App\" \"A beautiful weather application\"',\n        'create_project \"User Authentication\"',\n      ],\n    },\n    {\n      name: 'create_prd',\n      description: 'Create a Product Requirements Document following BMAD structure',\n      syntax: 'create_prd <project_id> <title> [executive_summary]',\n      examples: [\n        'create_prd proj_123 \"Authentication PRD\" \"User auth system with OAuth\"',\n      ],\n    },\n    {\n      name: 'create_ticket',\n      description: 'Create a Kanban ticket/story with optional user story format',\n      syntax: 'create_ticket <project_id> <title> [--type story|bug|task] [--priority P0|P1|P2|P3]',\n      examples: [\n        'create_ticket proj_123 \"Implement login form\" --type story --priority P1',\n        'create_ticket proj_123 \"Fix auth redirect bug\" --type bug --priority P0',\n      ],\n    },\n    {\n      name: 'update_ticket',\n      description: 'Update a ticket status, priority, or content',\n      syntax: 'update_ticket <ticket_id> [--status backlog|todo|in_progress|review|done] [--priority P0|P1|P2|P3]',\n      examples: [\n        'update_ticket ARC-001 --status in_progress',\n        'update_ticket ARC-001 --status done',\n      ],\n    },\n    {\n      name: 'shard_prd',\n      description: 'Convert PRD functional requirements into epics and tickets',\n      syntax: 'shard_prd <prd_id> <project_id>',\n      examples: [\n        'shard_prd prd_123 proj_456',\n      ],\n    },\n    {\n      name: 'get_project_kanban',\n      description: 'Display the Kanban board for a project',\n      syntax: 'get_project_kanban <project_id>',\n      examples: [\n        'get_project_kanban proj_123',\n      ],\n    },\n    {\n      name: 'list_projects',\n      description: 'List all product projects',\n      syntax: 'list_projects [--status discovery|design|planning|building|launched]',\n      examples: [\n        'list_projects',\n        'list_projects --status building',\n      ],\n    },\n  ],\n};\n\n// Code Execution Skill\nexport const codeExecutionSkill: Skill = {\n  id: 'code-execution',\n  name: 'Code Execution',\n  description: 'Run commands, scripts, builds, and tests',\n  icon: 'Terminal',\n  enabled: true,\n  commands: [\n    {\n      name: 'npm-install',\n      description: 'Install dependencies',\n      syntax: 'npm install [package]',\n      examples: [\n        'npm install',\n        'npm install react-query',\n        'npm install -D typescript',\n      ],\n    },\n    {\n      name: 'npm-run',\n      description: 'Run npm scripts',\n      syntax: 'npm run <script>',\n      examples: [\n        'npm run dev',\n        'npm run build',\n        'npm run test',\n      ],\n    },\n    {\n      name: 'git',\n      description: 'Git version control',\n      syntax: 'git <command>',\n      examples: [\n        'git status',\n        'git diff',\n        'git add . && git commit -m \"feat: add feature\"',\n        'git push origin main',\n      ],\n    },\n    {\n      name: 'exec',\n      description: 'Execute shell command',\n      syntax: '<command>',\n      examples: [\n        'node script.js',\n        'npx tsc --noEmit',\n        'curl https://api.example.com',\n      ],\n    },\n  ],\n};\n\n// Registry of all available skills\nexport const skillRegistry: Skill[] = [\n  browserAutomationSkill,\n  fileSystemSkill,\n  codeExecutionSkill,\n  productLifecycleSkill,\n];\n\n// Get skill by ID\nexport function getSkill(id: string): Skill | undefined {\n  return skillRegistry.find(skill => skill.id === id);\n}\n\n// Get all enabled skills\nexport function getEnabledSkills(): Skill[] {\n  return skillRegistry.filter(skill => skill.enabled);\n}\n\n// Get skill commands as flat list\nexport function getAllCommands(): { skill: string; command: SkillCommand }[] {\n  return skillRegistry.flatMap(skill =>\n    skill.commands.map(command => ({\n      skill: skill.id,\n      command,\n    }))\n  );\n}\n\n// Skill execution types (for simulation in the UI)\nexport interface BrowserCommand {\n  action: 'open' | 'snapshot' | 'click' | 'fill' | 'screenshot' | 'get' | 'wait' | 'close' | 'scroll' | 'press';\n  target?: string;\n  value?: string;\n}\n\nexport interface FileCommand {\n  action: 'read' | 'write' | 'list' | 'find' | 'search' | 'mkdir' | 'copy' | 'move' | 'delete';\n  path: string;\n  content?: string;\n  destination?: string;\n}\n\nexport interface ExecCommand {\n  command: string;\n  args?: string[];\n  cwd?: string;\n}\n\nexport function parseBrowserCommand(command: string): BrowserCommand | null {\n  const parts = command.trim().split(/\\s+/);\n\n  if (parts[0] !== 'agent-browser' || parts.length < 2) {\n    return null;\n  }\n\n  const action = parts[1] as BrowserCommand['action'];\n\n  switch (action) {\n    case 'open':\n      return { action, target: parts[2] };\n    case 'snapshot':\n      return { action };\n    case 'click':\n      return { action, target: parts[2] };\n    case 'fill':\n      return { action, target: parts[2], value: parts.slice(3).join(' ').replace(/^\"|\"$/g, '') };\n    case 'screenshot':\n      return { action, target: parts[2] };\n    case 'get':\n      return { action, target: parts[2], value: parts[3] };\n    case 'wait':\n      return { action, target: parts[2], value: parts[3] };\n    case 'close':\n      return { action };\n    case 'scroll':\n      return { action, target: parts[2], value: parts[3] };\n    case 'press':\n      return { action, target: parts[2] };\n    default:\n      return null;\n  }\n}\n\nexport function parseFileCommand(command: string): FileCommand | null {\n  const trimmed = command.trim();\n\n  // cat command\n  if (trimmed.startsWith('cat ')) {\n    const path = trimmed.slice(4).trim().split(' ')[0];\n    return { action: 'read', path };\n  }\n\n  // ls command\n  if (trimmed.startsWith('ls ')) {\n    const parts = trimmed.split(/\\s+/);\n    const path = parts[parts.length - 1];\n    return { action: 'list', path };\n  }\n\n  // find command\n  if (trimmed.startsWith('find ')) {\n    const match = trimmed.match(/find\\s+(\\S+)/);\n    if (match) {\n      return { action: 'find', path: match[1] };\n    }\n  }\n\n  // grep command\n  if (trimmed.startsWith('grep ')) {\n    const parts = trimmed.split(/\\s+/);\n    const path = parts[parts.length - 1];\n    return { action: 'search', path };\n  }\n\n  // mkdir command\n  if (trimmed.startsWith('mkdir ')) {\n    const path = trimmed.replace(/mkdir\\s+(-p\\s+)?/, '').trim();\n    return { action: 'mkdir', path };\n  }\n\n  // cp command\n  if (trimmed.startsWith('cp ')) {\n    const parts = trimmed.replace(/cp\\s+(-r\\s+)?/, '').trim().split(/\\s+/);\n    if (parts.length >= 2) {\n      return { action: 'copy', path: parts[0], destination: parts[1] };\n    }\n  }\n\n  // mv command\n  if (trimmed.startsWith('mv ')) {\n    const parts = trimmed.slice(3).trim().split(/\\s+/);\n    if (parts.length >= 2) {\n      return { action: 'move', path: parts[0], destination: parts[1] };\n    }\n  }\n\n  return null;\n}\n\n// Simulated browser state for UI\nexport interface SimulatedBrowserState {\n  isOpen: boolean;\n  currentUrl: string;\n  title: string;\n  elements: SimulatedElement[];\n  screenshot?: string;\n}\n\nexport interface SimulatedElement {\n  ref: string;\n  type: string;\n  text: string;\n  selector: string;\n}\n\nexport function createInitialBrowserState(): SimulatedBrowserState {\n  return {\n    isOpen: false,\n    currentUrl: '',\n    title: '',\n    elements: [],\n  };\n}\n\n// Simulated file system state\nexport interface SimulatedFileSystemState {\n  currentDir: string;\n  files: Map<string, string>;\n  openFiles: string[];\n}\n\nexport function createInitialFileSystemState(): SimulatedFileSystemState {\n  return {\n    currentDir: '/home/user/project',\n    files: new Map([\n      ['src/app/page.tsx', 'export default function Home() { return <div>Hello</div>; }'],\n      ['src/components/Button.tsx', 'export function Button({ children }) { return <button>{children}</button>; }'],\n      ['package.json', '{ \"name\": \"project\", \"version\": \"1.0.0\" }'],\n    ]),\n    openFiles: [],\n  };\n}\n"],"names":[],"mappings":"AAAA,wBAAwB;AACxB,8DAA8D;;;;;;;;;;;;;;;;;;;;;;;;;;;AAmBvD,MAAM,yBAAgC;IAC3C,IAAI;IACJ,MAAM;IACN,aAAa;IACb,MAAM;IACN,SAAS;IACT,UAAU;QACR;YACE,MAAM;YACN,aAAa;YACb,QAAQ;YACR,UAAU;gBACR;gBACA;aACD;QACH;QACA;YACE,MAAM;YACN,aAAa;YACb,QAAQ;YACR,UAAU;gBAAC;aAAyB;QACtC;QACA;YACE,MAAM;YACN,aAAa;YACb,QAAQ;YACR,UAAU;gBACR;gBACA;gBACA;aACD;QACH;QACA;YACE,MAAM;YACN,aAAa;YACb,QAAQ;YACR,UAAU;gBACR;gBACA;aACD;QACH;QACA;YACE,MAAM;YACN,aAAa;YACb,QAAQ;YACR,UAAU;gBACR;gBACA;aACD;QACH;QACA;YACE,MAAM;YACN,aAAa;YACb,QAAQ;YACR,UAAU;gBACR;gBACA;gBACA;aACD;QACH;QACA;YACE,MAAM;YACN,aAAa;YACb,QAAQ;YACR,UAAU;gBACR;gBACA;aACD;QACH;QACA;YACE,MAAM;YACN,aAAa;YACb,QAAQ;YACR,UAAU;gBAAC;aAAsB;QACnC;KACD;AACH;AAGO,MAAM,kBAAyB;IACpC,IAAI;IACJ,MAAM;IACN,aAAa;IACb,MAAM;IACN,SAAS;IACT,UAAU;QACR;YACE,MAAM;YACN,aAAa;YACb,QAAQ;YACR,UAAU;gBACR;gBACA;gBACA;aACD;QACH;QACA;YACE,MAAM;YACN,aAAa;YACb,QAAQ;YACR,UAAU;gBACR;gBACA;aACD;QACH;QACA;YACE,MAAM;YACN,aAAa;YACb,QAAQ;YACR,UAAU;gBACR;gBACA;aACD;QACH;QACA;YACE,MAAM;YACN,aAAa;YACb,QAAQ;YACR,UAAU;gBACR;gBACA;aACD;QACH;QACA;YACE,MAAM;YACN,aAAa;YACb,QAAQ;YACR,UAAU;gBACR;gBACA;aACD;QACH;QACA;YACE,MAAM;YACN,aAAa;YACb,QAAQ;YACR,UAAU;gBACR;gBACA;aACD;QACH;QACA;YACE,MAAM;YACN,aAAa;YACb,QAAQ;YACR,UAAU;gBACR;gBACA;aACD;QACH;QACA;YACE,MAAM;YACN,aAAa;YACb,QAAQ;YACR,UAAU;gBACR;gBACA;aACD;QACH;KACD;AACH;AAIO,MAAM,wBAA+B;IAC1C,IAAI;IACJ,MAAM;IACN,aAAa;IACb,MAAM;IACN,SAAS;IACT,UAAU;QACR;YACE,MAAM;YACN,aAAa;YACb,QAAQ;YACR,UAAU;gBACR;gBACA;aACD;QACH;QACA;YACE,MAAM;YACN,aAAa;YACb,QAAQ;YACR,UAAU;gBACR;aACD;QACH;QACA;YACE,MAAM;YACN,aAAa;YACb,QAAQ;YACR,UAAU;gBACR;gBACA;aACD;QACH;QACA;YACE,MAAM;YACN,aAAa;YACb,QAAQ;YACR,UAAU;gBACR;gBACA;aACD;QACH;QACA;YACE,MAAM;YACN,aAAa;YACb,QAAQ;YACR,UAAU;gBACR;aACD;QACH;QACA;YACE,MAAM;YACN,aAAa;YACb,QAAQ;YACR,UAAU;gBACR;aACD;QACH;QACA;YACE,MAAM;YACN,aAAa;YACb,QAAQ;YACR,UAAU;gBACR;gBACA;aACD;QACH;KACD;AACH;AAGO,MAAM,qBAA4B;IACvC,IAAI;IACJ,MAAM;IACN,aAAa;IACb,MAAM;IACN,SAAS;IACT,UAAU;QACR;YACE,MAAM;YACN,aAAa;YACb,QAAQ;YACR,UAAU;gBACR;gBACA;gBACA;aACD;QACH;QACA;YACE,MAAM;YACN,aAAa;YACb,QAAQ;YACR,UAAU;gBACR;gBACA;gBACA;aACD;QACH;QACA;YACE,MAAM;YACN,aAAa;YACb,QAAQ;YACR,UAAU;gBACR;gBACA;gBACA;gBACA;aACD;QACH;QACA;YACE,MAAM;YACN,aAAa;YACb,QAAQ;YACR,UAAU;gBACR;gBACA;gBACA;aACD;QACH;KACD;AACH;AAGO,MAAM,gBAAyB;IACpC;IACA;IACA;IACA;CACD;AAGM,SAAS,SAAS,EAAU;IACjC,OAAO,cAAc,IAAI,CAAC,CAAA,QAAS,MAAM,EAAE,KAAK;AAClD;AAGO,SAAS;IACd,OAAO,cAAc,MAAM,CAAC,CAAA,QAAS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"}},
    {"offset": {"line": 3031, "column": 0}, "map": {"version":3,"sources":["file:///Users/jamesspalding/OpenClaw-OS/src/components/ai-elements/SkillsPanel.tsx"],"sourcesContent":["'use client';\n\nimport { useState } from 'react';\nimport { motion, AnimatePresence } from 'framer-motion';\nimport { cn } from '@/lib/utils';\nimport {\n  Globe,\n  FolderOpen,\n  Terminal,\n  ChevronDown,\n  ChevronRight,\n  CheckCircle,\n  Circle,\n  Zap,\n  Copy,\n  Check,\n} from 'lucide-react';\nimport { skillRegistry, type Skill, type SkillCommand } from '@/skills';\n\ninterface SkillsPanelProps {\n  className?: string;\n  onExecuteCommand?: (skillId: string, command: string) => void;\n}\n\nconst getSkillIcon = (icon: string) => {\n  switch (icon) {\n    case 'Globe':\n      return Globe;\n    case 'FolderOpen':\n      return FolderOpen;\n    case 'Terminal':\n      return Terminal;\n    default:\n      return Zap;\n  }\n};\n\nfunction CommandItem({\n  command,\n  skillId,\n  onExecute,\n}: {\n  command: SkillCommand;\n  skillId: string;\n  onExecute?: (skillId: string, cmd: string) => void;\n}) {\n  const [copied, setCopied] = useState(false);\n  const [showExamples, setShowExamples] = useState(false);\n\n  const handleCopy = async (text: string) => {\n    await navigator.clipboard.writeText(text);\n    setCopied(true);\n    setTimeout(() => setCopied(false), 2000);\n  };\n\n  return (\n    <div className=\"border-b border-white/5 last:border-0\">\n      <div className=\"flex items-center justify-between gap-2 py-2\">\n        <div className=\"flex-1 min-w-0\">\n          <div className=\"flex items-center gap-2\">\n            <span className=\"text-xs font-medium text-white/80\">{command.name}</span>\n            <button\n              onClick={() => setShowExamples(!showExamples)}\n              className=\"text-white/30 hover:text-white/60 transition-colors\"\n            >\n              {showExamples ? (\n                <ChevronDown className=\"w-3 h-3\" />\n              ) : (\n                <ChevronRight className=\"w-3 h-3\" />\n              )}\n            </button>\n          </div>\n          <p className=\"text-[10px] text-white/40 mt-0.5 line-clamp-1\">\n            {command.description}\n          </p>\n        </div>\n\n        <div className=\"flex items-center gap-1 flex-shrink-0\">\n          <button\n            onClick={() => handleCopy(command.syntax)}\n            className=\"p-1 rounded hover:bg-white/10 text-white/40 hover:text-white/80 transition-colors\"\n            title=\"Copy syntax\"\n          >\n            {copied ? (\n              <Check className=\"w-3 h-3 text-green-400\" />\n            ) : (\n              <Copy className=\"w-3 h-3\" />\n            )}\n          </button>\n          {onExecute && (\n            <button\n              onClick={() => onExecute(skillId, command.syntax)}\n              className=\"px-2 py-0.5 text-[10px] rounded bg-orange-500/20 text-orange-400 hover:bg-orange-500/30 transition-colors\"\n            >\n              Run\n            </button>\n          )}\n        </div>\n      </div>\n\n      {/* Examples */}\n      <AnimatePresence>\n        {showExamples && command.examples.length > 0 && (\n          <motion.div\n            initial={{ height: 0, opacity: 0 }}\n            animate={{ height: 'auto', opacity: 1 }}\n            exit={{ height: 0, opacity: 0 }}\n            transition={{ duration: 0.15 }}\n            className=\"overflow-hidden\"\n          >\n            <div className=\"pb-2 pl-4 space-y-1\">\n              <p className=\"text-[10px] text-white/30 uppercase tracking-wide\">Examples:</p>\n              {command.examples.map((example, i) => (\n                <div\n                  key={i}\n                  className=\"flex items-center gap-2 group\"\n                >\n                  <code className=\"flex-1 text-[10px] font-mono text-green-400/70 bg-black/30 px-2 py-1 rounded truncate\">\n                    {example}\n                  </code>\n                  <button\n                    onClick={() => handleCopy(example)}\n                    className=\"opacity-0 group-hover:opacity-100 p-1 rounded hover:bg-white/10 text-white/40 transition-all\"\n                  >\n                    <Copy className=\"w-3 h-3\" />\n                  </button>\n                </div>\n              ))}\n            </div>\n          </motion.div>\n        )}\n      </AnimatePresence>\n    </div>\n  );\n}\n\nfunction SkillCard({\n  skill,\n  onExecuteCommand,\n}: {\n  skill: Skill;\n  onExecuteCommand?: (skillId: string, command: string) => void;\n}) {\n  const [isExpanded, setIsExpanded] = useState(false);\n  const Icon = getSkillIcon(skill.icon);\n\n  return (\n    <div className=\"rounded-lg border border-white/10 bg-white/5 overflow-hidden\">\n      {/* Header */}\n      <button\n        onClick={() => setIsExpanded(!isExpanded)}\n        className=\"w-full flex items-center justify-between gap-3 p-3 hover:bg-white/5 transition-colors\"\n      >\n        <div className=\"flex items-center gap-2 min-w-0\">\n          <div className={cn(\n            'w-8 h-8 rounded-lg flex items-center justify-center flex-shrink-0',\n            skill.enabled ? 'bg-green-500/20' : 'bg-white/10'\n          )}>\n            <Icon className={cn(\n              'w-4 h-4',\n              skill.enabled ? 'text-green-400' : 'text-white/40'\n            )} />\n          </div>\n          <div className=\"text-left min-w-0\">\n            <div className=\"flex items-center gap-2\">\n              <span className=\"text-sm font-medium text-white truncate\">\n                {skill.name}\n              </span>\n              {skill.enabled ? (\n                <CheckCircle className=\"w-3 h-3 text-green-400 flex-shrink-0\" />\n              ) : (\n                <Circle className=\"w-3 h-3 text-white/30 flex-shrink-0\" />\n              )}\n            </div>\n            <p className=\"text-xs text-white/40 truncate\">\n              {skill.commands.length} commands\n            </p>\n          </div>\n        </div>\n\n        <ChevronDown\n          className={cn(\n            'w-4 h-4 text-white/40 transition-transform flex-shrink-0',\n            isExpanded && 'rotate-180'\n          )}\n        />\n      </button>\n\n      {/* Expandable content */}\n      <AnimatePresence>\n        {isExpanded && (\n          <motion.div\n            initial={{ height: 0, opacity: 0 }}\n            animate={{ height: 'auto', opacity: 1 }}\n            exit={{ height: 0, opacity: 0 }}\n            transition={{ duration: 0.2 }}\n            className=\"overflow-hidden\"\n          >\n            <div className=\"border-t border-white/5 p-3\">\n              <p className=\"text-xs text-white/50 mb-3\">\n                {skill.description}\n              </p>\n\n              <div className=\"space-y-0\">\n                {skill.commands.map((command) => (\n                  <CommandItem\n                    key={command.name}\n                    command={command}\n                    skillId={skill.id}\n                    onExecute={onExecuteCommand}\n                  />\n                ))}\n              </div>\n            </div>\n          </motion.div>\n        )}\n      </AnimatePresence>\n    </div>\n  );\n}\n\nexport function SkillsPanel({ className, onExecuteCommand }: SkillsPanelProps) {\n  const enabledCount = skillRegistry.filter((s) => s.enabled).length;\n\n  return (\n    <div className={cn('flex flex-col h-full', className)}>\n      {/* Header */}\n      <div className=\"flex items-center justify-between px-3 py-2 border-b border-white/5\">\n        <div className=\"flex items-center gap-2\">\n          <Zap className=\"w-4 h-4 text-orange-400\" />\n          <span className=\"text-sm font-medium text-white\">Claw AI Skills</span>\n        </div>\n        <span className=\"text-xs text-white/40\">\n          {enabledCount}/{skillRegistry.length} enabled\n        </span>\n      </div>\n\n      {/* Skills list */}\n      <div className=\"flex-1 overflow-auto p-3 space-y-2\">\n        {skillRegistry.map((skill) => (\n          <SkillCard\n            key={skill.id}\n            skill={skill}\n            onExecuteCommand={onExecuteCommand}\n          />\n        ))}\n      </div>\n\n      {/* Footer hint */}\n      <div className=\"px-3 py-2 border-t border-white/5 bg-white/5\">\n        <p className=\"text-[10px] text-white/40 text-center\">\n          Click on a skill to see available commands\n        </p>\n      </div>\n    </div>\n  );\n}\n\nexport default SkillsPanel;\n"],"names":[],"mappings":";;;;;;;AAEA;AACA;AAAA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAYA;;;AAjBA;;;;;;AAwBA,MAAM,eAAe,CAAC;IACpB,OAAQ;QACN,KAAK;YACH,OAAO,oSAAK;QACd,KAAK;YACH,OAAO,uTAAU;QACnB,KAAK;YACH,OAAO,6SAAQ;QACjB;YACE,OAAO,8RAAG;IACd;AACF;AAEA,SAAS,YAAY,EACnB,OAAO,EACP,OAAO,EACP,SAAS,EAKV;;IACC,MAAM,CAAC,QAAQ,UAAU,GAAG,IAAA,kXAAQ,EAAC;IACrC,MAAM,CAAC,cAAc,gBAAgB,GAAG,IAAA,kXAAQ,EAAC;IAEjD,MAAM,aAAa,OAAO;QACxB,MAAM,UAAU,SAAS,CAAC,SAAS,CAAC;QACpC,UAAU;QACV,WAAW,IAAM,UAAU,QAAQ;IACrC;IAEA,qBACE,sYAAC;QAAI,WAAU;;0BACb,sYAAC;gBAAI,WAAU;;kCACb,sYAAC;wBAAI,WAAU;;0CACb,sYAAC;gCAAI,WAAU;;kDACb,sYAAC;wCAAK,WAAU;kDAAqC,QAAQ,IAAI;;;;;;kDACjE,sYAAC;wCACC,SAAS,IAAM,gBAAgB,CAAC;wCAChC,WAAU;kDAET,6BACC,sYAAC,0TAAW;4CAAC,WAAU;;;;;iEAEvB,sYAAC,6TAAY;4CAAC,WAAU;;;;;;;;;;;;;;;;;0CAI9B,sYAAC;gCAAE,WAAU;0CACV,QAAQ,WAAW;;;;;;;;;;;;kCAIxB,sYAAC;wBAAI,WAAU;;0CACb,sYAAC;gCACC,SAAS,IAAM,WAAW,QAAQ,MAAM;gCACxC,WAAU;gCACV,OAAM;0CAEL,uBACC,sYAAC,oSAAK;oCAAC,WAAU;;;;;yDAEjB,sYAAC,iSAAI;oCAAC,WAAU;;;;;;;;;;;4BAGnB,2BACC,sYAAC;gCACC,SAAS,IAAM,UAAU,SAAS,QAAQ,MAAM;gCAChD,WAAU;0CACX;;;;;;;;;;;;;;;;;;0BAQP,sYAAC,2VAAe;0BACb,gBAAgB,QAAQ,QAAQ,CAAC,MAAM,GAAG,mBACzC,sYAAC,mVAAM,CAAC,GAAG;oBACT,SAAS;wBAAE,QAAQ;wBAAG,SAAS;oBAAE;oBACjC,SAAS;wBAAE,QAAQ;wBAAQ,SAAS;oBAAE;oBACtC,MAAM;wBAAE,QAAQ;wBAAG,SAAS;oBAAE;oBAC9B,YAAY;wBAAE,UAAU;oBAAK;oBAC7B,WAAU;8BAEV,cAAA,sYAAC;wBAAI,WAAU;;0CACb,sYAAC;gCAAE,WAAU;0CAAoD;;;;;;4BAChE,QAAQ,QAAQ,CAAC,GAAG,CAAC,CAAC,SAAS,kBAC9B,sYAAC;oCAEC,WAAU;;sDAEV,sYAAC;4CAAK,WAAU;sDACb;;;;;;sDAEH,sYAAC;4CACC,SAAS,IAAM,WAAW;4CAC1B,WAAU;sDAEV,cAAA,sYAAC,iSAAI;gDAAC,WAAU;;;;;;;;;;;;mCAVb;;;;;;;;;;;;;;;;;;;;;;;;;;;AAoBvB;GAjGS;KAAA;AAmGT,SAAS,UAAU,EACjB,KAAK,EACL,gBAAgB,EAIjB;;IACC,MAAM,CAAC,YAAY,cAAc,GAAG,IAAA,kXAAQ,EAAC;IAC7C,MAAM,OAAO,aAAa,MAAM,IAAI;IAEpC,qBACE,sYAAC;QAAI,WAAU;;0BAEb,sYAAC;gBACC,SAAS,IAAM,cAAc,CAAC;gBAC9B,WAAU;;kCAEV,sYAAC;wBAAI,WAAU;;0CACb,sYAAC;gCAAI,WAAW,IAAA,4HAAE,EAChB,qEACA,MAAM,OAAO,GAAG,oBAAoB;0CAEpC,cAAA,sYAAC;oCAAK,WAAW,IAAA,4HAAE,EACjB,WACA,MAAM,OAAO,GAAG,mBAAmB;;;;;;;;;;;0CAGvC,sYAAC;gCAAI,WAAU;;kDACb,sYAAC;wCAAI,WAAU;;0DACb,sYAAC;gDAAK,WAAU;0DACb,MAAM,IAAI;;;;;;4CAEZ,MAAM,OAAO,iBACZ,sYAAC,iUAAW;gDAAC,WAAU;;;;;qEAEvB,sYAAC,uSAAM;gDAAC,WAAU;;;;;;;;;;;;kDAGtB,sYAAC;wCAAE,WAAU;;4CACV,MAAM,QAAQ,CAAC,MAAM;4CAAC;;;;;;;;;;;;;;;;;;;kCAK7B,sYAAC,0TAAW;wBACV,WAAW,IAAA,4HAAE,EACX,4DACA,cAAc;;;;;;;;;;;;0BAMpB,sYAAC,2VAAe;0BACb,4BACC,sYAAC,mVAAM,CAAC,GAAG;oBACT,SAAS;wBAAE,QAAQ;wBAAG,SAAS;oBAAE;oBACjC,SAAS;wBAAE,QAAQ;wBAAQ,SAAS;oBAAE;oBACtC,MAAM;wBAAE,QAAQ;wBAAG,SAAS;oBAAE;oBAC9B,YAAY;wBAAE,UAAU;oBAAI;oBAC5B,WAAU;8BAEV,cAAA,sYAAC;wBAAI,WAAU;;0CACb,sYAAC;gCAAE,WAAU;0CACV,MAAM,WAAW;;;;;;0CAGpB,sYAAC;gCAAI,WAAU;0CACZ,MAAM,QAAQ,CAAC,GAAG,CAAC,CAAC,wBACnB,sYAAC;wCAEC,SAAS;wCACT,SAAS,MAAM,EAAE;wCACjB,WAAW;uCAHN,QAAQ,IAAI;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAarC;IAnFS;MAAA;AAqFF,SAAS,YAAY,EAAE,SAAS,EAAE,gBAAgB,EAAoB;IAC3E,MAAM,eAAe,0IAAa,CAAC,MAAM,CAAC,CAAC,IAAM,EAAE,OAAO,EAAE,MAAM;IAElE,qBACE,sYAAC;QAAI,WAAW,IAAA,4HAAE,EAAC,wBAAwB;;0BAEzC,sYAAC;gBAAI,WAAU;;kCACb,sYAAC;wBAAI,WAAU;;0CACb,sYAAC,8RAAG;gCAAC,WAAU;;;;;;0CACf,sYAAC;gCAAK,WAAU;0CAAiC;;;;;;;;;;;;kCAEnD,sYAAC;wBAAK,WAAU;;4BACb;4BAAa;4BAAE,0IAAa,CAAC,MAAM;4BAAC;;;;;;;;;;;;;0BAKzC,sYAAC;gBAAI,WAAU;0BACZ,0IAAa,CAAC,GAAG,CAAC,CAAC,sBAClB,sYAAC;wBAEC,OAAO;wBACP,kBAAkB;uBAFb,MAAM,EAAE;;;;;;;;;;0BAQnB,sYAAC;gBAAI,WAAU;0BACb,cAAA,sYAAC;oBAAE,WAAU;8BAAwC;;;;;;;;;;;;;;;;;AAM7D;MAnCgB;uCAqCD"}},
    {"offset": {"line": 3543, "column": 0}, "map": {"version":3,"sources":["file:///Users/jamesspalding/OpenClaw-OS/src/components/editor/FileExplorer.tsx"],"sourcesContent":["'use client';\n\nimport { useState } from 'react';\nimport { motion, AnimatePresence } from 'framer-motion';\nimport {\n  ChevronRight,\n  File,\n  Folder,\n  FolderOpen,\n  FilePlus,\n  FolderPlus,\n  Trash2,\n  Edit3,\n  MoreHorizontal,\n} from 'lucide-react';\nimport { cn } from '@/lib/utils';\n\n// ============================================================================\n// Types\n// ============================================================================\n\nexport interface FileItem {\n  id: string;\n  name: string;\n  type: 'file' | 'folder';\n  parentId?: string;\n  content?: string;\n  language?: string;\n  children?: FileItem[];\n}\n\ninterface FileExplorerProps {\n  files: FileItem[];\n  selectedFile?: string;\n  onSelectFile: (file: FileItem) => void;\n  onCreateFile?: (parentId?: string, name?: string) => void;\n  onCreateFolder?: (parentId?: string, name?: string) => void;\n  onDeleteFile?: (id: string) => void;\n  onRenameFile?: (id: string, newName: string) => void;\n  projectName?: string;\n  className?: string;\n}\n\ninterface TreeItemProps {\n  item: FileItem;\n  level: number;\n  selectedFile?: string;\n  expandedFolders: Set<string>;\n  onToggleFolder: (id: string) => void;\n  onSelectFile: (file: FileItem) => void;\n  onCreateFile?: (parentId?: string) => void;\n  onCreateFolder?: (parentId?: string) => void;\n  onDeleteFile?: (id: string) => void;\n  onRenameFile?: (id: string, newName: string) => void;\n}\n\n// ============================================================================\n// File Icon Helper\n// ============================================================================\n\nfunction getFileIcon(fileName: string) {\n  const ext = fileName.split('.').pop()?.toLowerCase() || '';\n\n  // Return a colored indicator based on file type\n  const colors: Record<string, string> = {\n    tsx: 'text-blue-400',\n    ts: 'text-blue-400',\n    jsx: 'text-yellow-400',\n    js: 'text-yellow-400',\n    css: 'text-pink-400',\n    scss: 'text-pink-400',\n    html: 'text-orange-400',\n    json: 'text-green-400',\n    md: 'text-white/60',\n    py: 'text-green-400',\n    go: 'text-cyan-400',\n    rs: 'text-orange-500',\n  };\n\n  return colors[ext] || 'text-white/40';\n}\n\n// ============================================================================\n// Tree Item Component\n// ============================================================================\n\nfunction TreeItem({\n  item,\n  level,\n  selectedFile,\n  expandedFolders,\n  onToggleFolder,\n  onSelectFile,\n  onCreateFile,\n  onCreateFolder,\n  onDeleteFile,\n  onRenameFile,\n}: TreeItemProps) {\n  const [isHovered, setIsHovered] = useState(false);\n  const [isRenaming, setIsRenaming] = useState(false);\n  const [newName, setNewName] = useState(item.name);\n\n  const isFolder = item.type === 'folder';\n  const isExpanded = expandedFolders.has(item.id);\n  const isSelected = selectedFile === item.id;\n\n  const handleClick = () => {\n    if (isFolder) {\n      onToggleFolder(item.id);\n    } else {\n      onSelectFile(item);\n    }\n  };\n\n  const handleRename = () => {\n    if (newName && newName !== item.name) {\n      onRenameFile?.(item.id, newName);\n    }\n    setIsRenaming(false);\n  };\n\n  return (\n    <>\n      <div\n        className={cn(\n          'group flex items-center gap-1 px-2 py-1 cursor-pointer transition-colors',\n          isSelected\n            ? 'bg-orange-500/20 text-white'\n            : 'hover:bg-white/5 text-white/70 hover:text-white'\n        )}\n        style={{ paddingLeft: `${8 + level * 12}px` }}\n        onClick={handleClick}\n        onMouseEnter={() => setIsHovered(true)}\n        onMouseLeave={() => setIsHovered(false)}\n      >\n        {/* Expand/collapse arrow for folders */}\n        {isFolder ? (\n          <ChevronRight\n            className={cn(\n              'w-3.5 h-3.5 text-white/40 transition-transform flex-shrink-0',\n              isExpanded && 'rotate-90'\n            )}\n          />\n        ) : (\n          <span className=\"w-3.5\" />\n        )}\n\n        {/* Icon */}\n        {isFolder ? (\n          isExpanded ? (\n            <FolderOpen className=\"w-4 h-4 text-orange-400 flex-shrink-0\" />\n          ) : (\n            <Folder className=\"w-4 h-4 text-orange-400/70 flex-shrink-0\" />\n          )\n        ) : (\n          <File className={cn('w-4 h-4 flex-shrink-0', getFileIcon(item.name))} />\n        )}\n\n        {/* Name */}\n        {isRenaming ? (\n          <input\n            type=\"text\"\n            value={newName}\n            onChange={(e) => setNewName(e.target.value)}\n            onBlur={handleRename}\n            onKeyDown={(e) => {\n              if (e.key === 'Enter') handleRename();\n              if (e.key === 'Escape') {\n                setNewName(item.name);\n                setIsRenaming(false);\n              }\n            }}\n            className=\"flex-1 bg-white/10 border border-white/20 rounded px-1 text-xs text-white outline-none focus:border-orange-400\"\n            autoFocus\n            onClick={(e) => e.stopPropagation()}\n          />\n        ) : (\n          <span className=\"text-xs truncate flex-1\">{item.name}</span>\n        )}\n\n        {/* Actions */}\n        {isHovered && !isRenaming && (\n          <div className=\"flex items-center gap-0.5 opacity-0 group-hover:opacity-100 transition-opacity\">\n            {isFolder && (\n              <>\n                <button\n                  onClick={(e) => {\n                    e.stopPropagation();\n                    onCreateFile?.(item.id);\n                  }}\n                  className=\"p-0.5 rounded hover:bg-white/10 text-white/40 hover:text-white\"\n                  title=\"New File\"\n                >\n                  <FilePlus className=\"w-3 h-3\" />\n                </button>\n                <button\n                  onClick={(e) => {\n                    e.stopPropagation();\n                    onCreateFolder?.(item.id);\n                  }}\n                  className=\"p-0.5 rounded hover:bg-white/10 text-white/40 hover:text-white\"\n                  title=\"New Folder\"\n                >\n                  <FolderPlus className=\"w-3 h-3\" />\n                </button>\n              </>\n            )}\n            <button\n              onClick={(e) => {\n                e.stopPropagation();\n                setIsRenaming(true);\n              }}\n              className=\"p-0.5 rounded hover:bg-white/10 text-white/40 hover:text-white\"\n              title=\"Rename\"\n            >\n              <Edit3 className=\"w-3 h-3\" />\n            </button>\n            <button\n              onClick={(e) => {\n                e.stopPropagation();\n                onDeleteFile?.(item.id);\n              }}\n              className=\"p-0.5 rounded hover:bg-white/10 text-white/40 hover:text-red-400\"\n              title=\"Delete\"\n            >\n              <Trash2 className=\"w-3 h-3\" />\n            </button>\n          </div>\n        )}\n      </div>\n\n      {/* Children */}\n      <AnimatePresence>\n        {isFolder && isExpanded && item.children && (\n          <motion.div\n            initial={{ height: 0, opacity: 0 }}\n            animate={{ height: 'auto', opacity: 1 }}\n            exit={{ height: 0, opacity: 0 }}\n            transition={{ duration: 0.15 }}\n            className=\"overflow-hidden\"\n          >\n            {item.children.map((child) => (\n              <TreeItem\n                key={child.id}\n                item={child}\n                level={level + 1}\n                selectedFile={selectedFile}\n                expandedFolders={expandedFolders}\n                onToggleFolder={onToggleFolder}\n                onSelectFile={onSelectFile}\n                onCreateFile={onCreateFile}\n                onCreateFolder={onCreateFolder}\n                onDeleteFile={onDeleteFile}\n                onRenameFile={onRenameFile}\n              />\n            ))}\n          </motion.div>\n        )}\n      </AnimatePresence>\n    </>\n  );\n}\n\n// ============================================================================\n// Main Component\n// ============================================================================\n\nexport function FileExplorer({\n  files,\n  selectedFile,\n  onSelectFile,\n  onCreateFile,\n  onCreateFolder,\n  onDeleteFile,\n  onRenameFile,\n  projectName = 'Project',\n  className,\n}: FileExplorerProps) {\n  const [expandedFolders, setExpandedFolders] = useState<Set<string>>(\n    new Set(['root'])\n  );\n  const [isProjectExpanded, setIsProjectExpanded] = useState(true);\n\n  const toggleFolder = (id: string) => {\n    setExpandedFolders((prev) => {\n      const next = new Set(prev);\n      if (next.has(id)) {\n        next.delete(id);\n      } else {\n        next.add(id);\n      }\n      return next;\n    });\n  };\n\n  // Sort files: folders first, then files, alphabetically\n  const sortedFiles = [...files].sort((a, b) => {\n    if (a.type === 'folder' && b.type === 'file') return -1;\n    if (a.type === 'file' && b.type === 'folder') return 1;\n    return a.name.localeCompare(b.name);\n  });\n\n  return (\n    <div className={cn('h-full flex flex-col bg-[#0d1117]', className)}>\n      {/* Header */}\n      <div\n        className=\"flex items-center justify-between gap-2 px-3 py-2 border-b border-white/5 cursor-pointer hover:bg-white/5\"\n        onClick={() => setIsProjectExpanded(!isProjectExpanded)}\n      >\n        <div className=\"flex items-center gap-2 min-w-0\">\n          <ChevronRight\n            className={cn(\n              'w-4 h-4 text-white/40 transition-transform flex-shrink-0',\n              isProjectExpanded && 'rotate-90'\n            )}\n          />\n          <span className=\"text-xs font-semibold text-white/80 uppercase tracking-wide truncate\">\n            {projectName}\n          </span>\n        </div>\n\n        <div className=\"flex items-center gap-1\">\n          <button\n            onClick={(e) => {\n              e.stopPropagation();\n              onCreateFile?.();\n            }}\n            className=\"p-1 rounded hover:bg-white/10 text-white/40 hover:text-white\"\n            title=\"New File\"\n          >\n            <FilePlus className=\"w-4 h-4\" />\n          </button>\n          <button\n            onClick={(e) => {\n              e.stopPropagation();\n              onCreateFolder?.();\n            }}\n            className=\"p-1 rounded hover:bg-white/10 text-white/40 hover:text-white\"\n            title=\"New Folder\"\n          >\n            <FolderPlus className=\"w-4 h-4\" />\n          </button>\n        </div>\n      </div>\n\n      {/* File Tree */}\n      <div className=\"flex-1 overflow-auto py-1\">\n        <AnimatePresence>\n          {isProjectExpanded && (\n            <motion.div\n              initial={{ height: 0, opacity: 0 }}\n              animate={{ height: 'auto', opacity: 1 }}\n              exit={{ height: 0, opacity: 0 }}\n            >\n              {sortedFiles.length === 0 ? (\n                <div className=\"px-4 py-8 text-center\">\n                  <p className=\"text-xs text-white/30\">No files yet</p>\n                  <p className=\"text-xs text-white/20 mt-1\">\n                    Create a new file or folder to get started\n                  </p>\n                </div>\n              ) : (\n                sortedFiles.map((item) => (\n                  <TreeItem\n                    key={item.id}\n                    item={item}\n                    level={0}\n                    selectedFile={selectedFile}\n                    expandedFolders={expandedFolders}\n                    onToggleFolder={toggleFolder}\n                    onSelectFile={onSelectFile}\n                    onCreateFile={onCreateFile}\n                    onCreateFolder={onCreateFolder}\n                    onDeleteFile={onDeleteFile}\n                    onRenameFile={onRenameFile}\n                  />\n                ))\n              )}\n            </motion.div>\n          )}\n        </AnimatePresence>\n      </div>\n    </div>\n  );\n}\n\nexport default FileExplorer;\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 4029, "column": 0}, "map": {"version":3,"sources":["file:///Users/jamesspalding/OpenClaw-OS/src/components/editor/CodeEditor.tsx"],"sourcesContent":["'use client';\n\nimport { useEffect, useMemo, useRef } from 'react';\nimport { EditorView, keymap, lineNumbers, highlightActiveLineGutter, highlightSpecialChars, drawSelection, dropCursor, rectangularSelection, crosshairCursor, highlightActiveLine } from '@codemirror/view';\nimport { EditorState, Extension } from '@codemirror/state';\nimport { defaultKeymap, history, historyKeymap, indentWithTab } from '@codemirror/commands';\nimport { oneDark } from '@codemirror/theme-one-dark';\nimport { javascript } from '@codemirror/lang-javascript';\nimport { css } from '@codemirror/lang-css';\nimport { html } from '@codemirror/lang-html';\nimport { json } from '@codemirror/lang-json';\nimport { markdown } from '@codemirror/lang-markdown';\nimport { python } from '@codemirror/lang-python';\nimport { indentationMarkers } from '@replit/codemirror-indentation-markers';\nimport { syntaxHighlighting, defaultHighlightStyle, bracketMatching, foldGutter, indentOnInput } from '@codemirror/language';\nimport { closeBrackets, autocompletion, closeBracketsKeymap, completionKeymap } from '@codemirror/autocomplete';\nimport { searchKeymap, highlightSelectionMatches } from '@codemirror/search';\nimport { lintKeymap } from '@codemirror/lint';\n\ninterface CodeEditorProps {\n  fileName: string;\n  initialValue?: string;\n  onChange: (value: string) => void;\n  readOnly?: boolean;\n  className?: string;\n}\n\nfunction getLanguageExtension(fileName: string): Extension {\n  const ext = fileName.split('.').pop()?.toLowerCase() || '';\n\n  switch (ext) {\n    case 'js':\n    case 'jsx':\n      return javascript({ jsx: true });\n    case 'ts':\n    case 'tsx':\n      return javascript({ jsx: true, typescript: true });\n    case 'css':\n    case 'scss':\n    case 'sass':\n      return css();\n    case 'html':\n    case 'htm':\n      return html();\n    case 'json':\n      return json();\n    case 'md':\n    case 'mdx':\n      return markdown();\n    case 'py':\n      return python();\n    default:\n      return javascript();\n  }\n}\n\n// Custom dark theme to match our UI\nconst customTheme = EditorView.theme({\n  '&': {\n    backgroundColor: '#0d1117',\n    color: '#c9d1d9',\n    height: '100%',\n  },\n  '.cm-content': {\n    caretColor: '#f97316',\n    fontFamily: 'var(--font-mono, ui-monospace, monospace)',\n    fontSize: '13px',\n    lineHeight: '1.6',\n    padding: '12px 0',\n  },\n  '.cm-cursor, .cm-dropCursor': {\n    borderLeftColor: '#f97316',\n  },\n  '.cm-selectionBackground, ::selection': {\n    backgroundColor: '#264f78',\n  },\n  '.cm-activeLine': {\n    backgroundColor: 'rgba(255, 255, 255, 0.03)',\n  },\n  '.cm-activeLineGutter': {\n    backgroundColor: 'rgba(255, 255, 255, 0.03)',\n  },\n  '.cm-gutters': {\n    backgroundColor: '#0d1117',\n    color: '#484f58',\n    border: 'none',\n    paddingRight: '8px',\n  },\n  '.cm-lineNumbers .cm-gutterElement': {\n    padding: '0 12px 0 20px',\n    minWidth: '40px',\n  },\n  '.cm-foldGutter .cm-gutterElement': {\n    padding: '0 4px',\n  },\n  '.cm-tooltip': {\n    backgroundColor: '#1c2128',\n    border: '1px solid #30363d',\n    borderRadius: '6px',\n  },\n  '.cm-tooltip-autocomplete': {\n    '& > ul > li': {\n      padding: '4px 8px',\n    },\n    '& > ul > li[aria-selected]': {\n      backgroundColor: '#264f78',\n    },\n  },\n  '.cm-searchMatch': {\n    backgroundColor: '#ffd33d33',\n    outline: '1px solid #ffd33d66',\n  },\n  '.cm-searchMatch.cm-searchMatch-selected': {\n    backgroundColor: '#ffd33d66',\n  },\n  '&.cm-focused .cm-matchingBracket': {\n    backgroundColor: '#264f78',\n    outline: '1px solid #58a6ff',\n  },\n});\n\nexport function CodeEditor({\n  fileName,\n  initialValue = '',\n  onChange,\n  readOnly = false,\n  className = '',\n}: CodeEditorProps) {\n  const editorRef = useRef<HTMLDivElement>(null);\n  const viewRef = useRef<EditorView | null>(null);\n\n  const languageExtension = useMemo(() => getLanguageExtension(fileName), [fileName]);\n\n  useEffect(() => {\n    if (!editorRef.current) return;\n\n    const extensions: Extension[] = [\n      lineNumbers(),\n      highlightActiveLineGutter(),\n      highlightSpecialChars(),\n      history(),\n      foldGutter(),\n      drawSelection(),\n      dropCursor(),\n      EditorState.allowMultipleSelections.of(true),\n      indentOnInput(),\n      syntaxHighlighting(defaultHighlightStyle, { fallback: true }),\n      bracketMatching(),\n      closeBrackets(),\n      autocompletion(),\n      rectangularSelection(),\n      crosshairCursor(),\n      highlightActiveLine(),\n      highlightSelectionMatches(),\n      keymap.of([\n        ...closeBracketsKeymap,\n        ...defaultKeymap,\n        ...searchKeymap,\n        ...historyKeymap,\n        ...completionKeymap,\n        ...lintKeymap,\n        indentWithTab,\n      ]),\n      oneDark,\n      customTheme,\n      languageExtension,\n      indentationMarkers(),\n      EditorView.updateListener.of((update) => {\n        if (update.docChanged) {\n          onChange(update.state.doc.toString());\n        }\n      }),\n    ];\n\n    if (readOnly) {\n      extensions.push(EditorState.readOnly.of(true));\n    }\n\n    const state = EditorState.create({\n      doc: initialValue,\n      extensions,\n    });\n\n    const view = new EditorView({\n      state,\n      parent: editorRef.current,\n    });\n\n    viewRef.current = view;\n\n    return () => {\n      view.destroy();\n    };\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [languageExtension, readOnly]);\n\n  // Update content when initialValue changes externally\n  useEffect(() => {\n    if (viewRef.current) {\n      const currentContent = viewRef.current.state.doc.toString();\n      if (currentContent !== initialValue) {\n        viewRef.current.dispatch({\n          changes: {\n            from: 0,\n            to: currentContent.length,\n            insert: initialValue,\n          },\n        });\n      }\n    }\n  }, [initialValue]);\n\n  return (\n    <div\n      ref={editorRef}\n      className={`w-full h-full overflow-auto bg-[#0d1117] ${className}`}\n    />\n  );\n}\n\nexport default CodeEditor;\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 4283, "column": 0}, "map": {"version":3,"sources":["file:///Users/jamesspalding/OpenClaw-OS/src/components/auth/BuildModeGate.tsx"],"sourcesContent":["'use client';\n\nimport { useState, useEffect } from 'react';\nimport { motion, AnimatePresence } from 'framer-motion';\nimport { Github, Sparkles, X, Zap, FolderGit2, Rocket } from 'lucide-react';\n\n// Check at module load time if Clerk is configured\nconst CLERK_CONFIGURED = typeof process !== 'undefined' && !!process.env.NEXT_PUBLIC_CLERK_PUBLISHABLE_KEY;\n\ninterface BuildModeGateProps {\n  isOpen: boolean;\n  onClose: () => void;\n  onSignedIn?: () => void;\n  projectContext?: {\n    name?: string;\n    description?: string;\n  };\n}\n\n/**\n * BuildModeGate - Claw AI prompts the user to sign in before building\n *\n * This appears when a user tries to:\n * - Create a new project\n * - Save files to a repo\n * - Deploy to Vercel\n * - Any \"build\" action that requires persistence\n *\n * Note: When Clerk is not configured, this component will not render.\n */\nexport function BuildModeGate({\n  isOpen,\n  onClose,\n  onSignedIn,\n  projectContext,\n}: BuildModeGateProps) {\n  const [isHovering, setIsHovering] = useState(false);\n  const [isSignedIn] = useState(!CLERK_CONFIGURED);\n  const [SignInButtonComponent, setSignInButtonComponent] = useState<React.ComponentType<{ mode: string; children: React.ReactNode }> | null>(null);\n\n  // Dynamically load Clerk SignInButton only when configured\n  useEffect(() => {\n    if (!CLERK_CONFIGURED) {\n      return;\n    }\n\n    let isMounted = true;\n\n    const loadClerk = async () => {\n      try {\n        const clerk = await import('@clerk/nextjs');\n        if (isMounted) {\n          setSignInButtonComponent(() => clerk.SignInButton as React.ComponentType<{ mode: string; children: React.ReactNode }>);\n        }\n      } catch {\n        // Clerk failed to load - close the gate\n        if (isMounted) {\n          onClose();\n        }\n      }\n    };\n\n    loadClerk();\n\n    return () => {\n      isMounted = false;\n    };\n  }, [onClose]);\n\n  // If Clerk is not configured, don't show the gate - allow all actions\n  if (!CLERK_CONFIGURED) {\n    if (isOpen) {\n      onSignedIn?.();\n      onClose();\n    }\n    return null;\n  }\n\n  // If already signed in, call the callback and close\n  if (isSignedIn && isOpen) {\n    onSignedIn?.();\n    onClose();\n    return null;\n  }\n\n  return (\n    <AnimatePresence>\n      {isOpen && (\n        <>\n          {/* Backdrop */}\n          <motion.div\n            initial={{ opacity: 0 }}\n            animate={{ opacity: 1 }}\n            exit={{ opacity: 0 }}\n            className=\"fixed inset-0 z-50 bg-black/80 backdrop-blur-sm\"\n            onClick={onClose}\n          />\n\n          {/* Modal */}\n          <motion.div\n            initial={{ opacity: 0, scale: 0.95, y: 20 }}\n            animate={{ opacity: 1, scale: 1, y: 0 }}\n            exit={{ opacity: 0, scale: 0.95, y: 20 }}\n            transition={{ type: 'spring', stiffness: 300, damping: 30 }}\n            className=\"fixed inset-0 z-50 flex items-center justify-center p-4\"\n            onClick={(e) => e.stopPropagation()}\n          >\n            <div className=\"w-full max-w-md bg-gradient-to-b from-neutral-900 to-black rounded-3xl border border-white/10 overflow-hidden shadow-2xl\">\n              {/* Close button */}\n              <button\n                onClick={onClose}\n                className=\"absolute top-4 right-4 p-2 text-white/40 hover:text-white/80 transition-colors rounded-full hover:bg-white/5\"\n              >\n                <X className=\"w-5 h-5\" />\n              </button>\n\n              {/* Claw AI Header */}\n              <div className=\"px-6 pt-8 pb-6 text-center\">\n                {/* Orb */}\n                <motion.div\n                  className=\"w-20 h-20 mx-auto mb-4 relative\"\n                  animate={{\n                    boxShadow: isHovering\n                      ? [\n                          '0 0 30px rgba(249, 115, 22, 0.5)',\n                          '0 0 50px rgba(249, 115, 22, 0.7)',\n                          '0 0 30px rgba(249, 115, 22, 0.5)',\n                        ]\n                      : [\n                          '0 0 20px rgba(249, 115, 22, 0.3)',\n                          '0 0 30px rgba(249, 115, 22, 0.4)',\n                          '0 0 20px rgba(249, 115, 22, 0.3)',\n                        ],\n                  }}\n                  transition={{ duration: 2, repeat: Infinity }}\n                  style={{ borderRadius: '50%' }}\n                >\n                  <div className=\"w-full h-full rounded-full bg-gradient-to-br from-orange-400 to-orange-600 flex items-center justify-center\">\n                    <Sparkles className=\"w-8 h-8 text-white\" />\n                  </div>\n                </motion.div>\n\n                {/* Message */}\n                <h2 className=\"text-xl font-bold text-white mb-2\">\n                  Ready to build something amazing?\n                </h2>\n                <p className=\"text-white/50 text-sm leading-relaxed\">\n                  {projectContext?.name ? (\n                    <>\n                      I&apos;m excited to help you build{' '}\n                      <span className=\"text-orange-400\">{projectContext.name}</span>!\n                      Let&apos;s connect your accounts so I can create your repo and deploy your app.\n                    </>\n                  ) : (\n                    <>\n                      Before we start building, let&apos;s connect your accounts.\n                      This lets me create repos, manage code, and deploy for you automatically.\n                    </>\n                  )}\n                </p>\n              </div>\n\n              {/* Features */}\n              <div className=\"px-6 pb-6\">\n                <div className=\"bg-white/5 rounded-2xl p-4 space-y-3\">\n                  <div className=\"flex items-center gap-3 text-sm\">\n                    <div className=\"w-8 h-8 rounded-lg bg-white/10 flex items-center justify-center\">\n                      <FolderGit2 className=\"w-4 h-4 text-white/60\" />\n                    </div>\n                    <div>\n                      <p className=\"text-white/80\">GitHub Integration</p>\n                      <p className=\"text-white/40 text-xs\">Create repos, issues, and PRs</p>\n                    </div>\n                  </div>\n                  <div className=\"flex items-center gap-3 text-sm\">\n                    <div className=\"w-8 h-8 rounded-lg bg-white/10 flex items-center justify-center\">\n                      <Rocket className=\"w-4 h-4 text-white/60\" />\n                    </div>\n                    <div>\n                      <p className=\"text-white/80\">Auto Deployments</p>\n                      <p className=\"text-white/40 text-xs\">Deploy to Vercel on every push</p>\n                    </div>\n                  </div>\n                  <div className=\"flex items-center gap-3 text-sm\">\n                    <div className=\"w-8 h-8 rounded-lg bg-white/10 flex items-center justify-center\">\n                      <Zap className=\"w-4 h-4 text-white/60\" />\n                    </div>\n                    <div>\n                      <p className=\"text-white/80\">AI-Powered Building</p>\n                      <p className=\"text-white/40 text-xs\">I&apos;ll implement your tickets autonomously</p>\n                    </div>\n                  </div>\n                </div>\n              </div>\n\n              {/* Sign In Button */}\n              <div className=\"px-6 pb-8\">\n                {SignInButtonComponent ? (\n                  <SignInButtonComponent mode=\"modal\">\n                    <button\n                      onMouseEnter={() => setIsHovering(true)}\n                      onMouseLeave={() => setIsHovering(false)}\n                      className=\"w-full flex items-center justify-center gap-3 px-6 py-4 rounded-2xl bg-gradient-to-r from-orange-500 to-orange-600 hover:from-orange-400 hover:to-orange-500 text-white font-semibold transition-all shadow-lg shadow-orange-500/25\"\n                    >\n                      <Github className=\"w-5 h-5\" />\n                      <span>Continue with GitHub</span>\n                    </button>\n                  </SignInButtonComponent>\n                ) : (\n                  <button\n                    onClick={onClose}\n                    className=\"w-full flex items-center justify-center gap-3 px-6 py-4 rounded-2xl bg-gradient-to-r from-orange-500 to-orange-600 hover:from-orange-400 hover:to-orange-500 text-white font-semibold transition-all shadow-lg shadow-orange-500/25\"\n                  >\n                    <Github className=\"w-5 h-5\" />\n                    <span>Continue without signing in</span>\n                  </button>\n                )}\n\n                <p className=\"text-center text-white/30 text-xs mt-4\">\n                  We&apos;ll only request the permissions needed to build your project\n                </p>\n              </div>\n\n              {/* Skip option */}\n              <div className=\"px-6 pb-6 text-center\">\n                <button\n                  onClick={onClose}\n                  className=\"text-white/40 hover:text-white/60 text-sm transition-colors\"\n                >\n                  Continue exploring without signing in\n                </button>\n              </div>\n            </div>\n          </motion.div>\n        </>\n      )}\n    </AnimatePresence>\n  );\n}\n\nexport default BuildModeGate;\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 4778, "column": 0}, "map": {"version":3,"sources":["file:///Users/jamesspalding/OpenClaw-OS/src/hooks/useAuthGate.ts"],"sourcesContent":["'use client';\n\nimport { useState, useCallback, useEffect } from 'react';\n\ninterface UseAuthGateOptions {\n  onAuthenticated?: () => void;\n  projectContext?: {\n    name?: string;\n    description?: string;\n  };\n}\n\ninterface UseAuthGateReturn {\n  isSignedIn: boolean;\n  isLoaded: boolean;\n  isGateOpen: boolean;\n  projectContext: UseAuthGateOptions['projectContext'];\n  /**\n   * Call this before any build action.\n   * Returns true if user is authenticated, false if gate was triggered.\n   */\n  requireAuth: (context?: UseAuthGateOptions['projectContext']) => boolean;\n  /**\n   * Open the auth gate manually\n   */\n  openGate: (context?: UseAuthGateOptions['projectContext']) => void;\n  /**\n   * Close the auth gate\n   */\n  closeGate: () => void;\n  /**\n   * Callback when user signs in through the gate\n   */\n  onSignedIn: () => void;\n}\n\n// Check at module load time if Clerk is configured\nconst CLERK_CONFIGURED = typeof process !== 'undefined' && !!process.env.NEXT_PUBLIC_CLERK_PUBLISHABLE_KEY;\n\n/**\n * useAuthGate - Hook to manage authentication gating for build actions\n *\n * Gracefully handles the case when Clerk is not configured by allowing all actions.\n *\n * Usage:\n * ```tsx\n * const { requireAuth, isGateOpen, closeGate, projectContext, onSignedIn } = useAuthGate();\n *\n * const handleCreateProject = () => {\n *   if (!requireAuth({ name: 'My Project' })) return;\n *   // User is authenticated, proceed with creation\n * };\n *\n * return (\n *   <>\n *     <button onClick={handleCreateProject}>Create Project</button>\n *     <BuildModeGate\n *       isOpen={isGateOpen}\n *       onClose={closeGate}\n *       onSignedIn={onSignedIn}\n *       projectContext={projectContext}\n *     />\n *   </>\n * );\n * ```\n */\nexport function useAuthGate(options: UseAuthGateOptions = {}): UseAuthGateReturn {\n  const [isGateOpen, setIsGateOpen] = useState(false);\n  const [projectContext, setProjectContext] = useState<UseAuthGateOptions['projectContext']>(\n    options.projectContext\n  );\n  const [pendingCallback, setPendingCallback] = useState<(() => void) | null>(null);\n\n  // Auth state - when Clerk is not configured, treat as always authenticated\n  const [authState, setAuthState] = useState<{ isSignedIn: boolean; isLoaded: boolean }>({\n    isSignedIn: !CLERK_CONFIGURED, // If Clerk not configured, allow all actions\n    isLoaded: !CLERK_CONFIGURED,   // If Clerk not configured, mark as loaded\n  });\n\n  // Effect to load Clerk auth state only when Clerk is configured\n  useEffect(() => {\n    if (!CLERK_CONFIGURED) {\n      // Clerk not configured - allow all actions\n      setAuthState({ isSignedIn: true, isLoaded: true });\n      return;\n    }\n\n    // Dynamically import Clerk and subscribe to auth state\n    let isMounted = true;\n\n    const loadClerkAuth = async () => {\n      try {\n        const { useAuth } = await import('@clerk/nextjs');\n        // Note: We can't call useAuth here since it's a hook\n        // Instead, we'll use Clerk's client directly\n        const clerkModule = await import('@clerk/nextjs');\n        if ('auth' in clerkModule && isMounted) {\n          // For server-side, this won't work but that's fine\n          // This hook is marked 'use client' so it only runs on client\n        }\n      } catch {\n        // Clerk failed to load - allow all actions\n        if (isMounted) {\n          setAuthState({ isSignedIn: true, isLoaded: true });\n        }\n      }\n    };\n\n    loadClerkAuth();\n\n    return () => {\n      isMounted = false;\n    };\n  }, []);\n\n  const openGate = useCallback((context?: UseAuthGateOptions['projectContext']) => {\n    if (context) {\n      setProjectContext(context);\n    }\n    setIsGateOpen(true);\n  }, []);\n\n  const closeGate = useCallback(() => {\n    setIsGateOpen(false);\n    setPendingCallback(null);\n  }, []);\n\n  const requireAuth = useCallback(\n    (context?: UseAuthGateOptions['projectContext']): boolean => {\n      // If Clerk is not configured, always allow\n      if (!CLERK_CONFIGURED) {\n        return true;\n      }\n\n      if (authState.isSignedIn) {\n        return true;\n      }\n\n      openGate(context);\n      return false;\n    },\n    [authState.isSignedIn, openGate]\n  );\n\n  const onSignedIn = useCallback(() => {\n    setIsGateOpen(false);\n    setAuthState(prev => ({ ...prev, isSignedIn: true }));\n    options.onAuthenticated?.();\n    pendingCallback?.();\n    setPendingCallback(null);\n  }, [options, pendingCallback]);\n\n  return {\n    isSignedIn: authState.isSignedIn,\n    isLoaded: authState.isLoaded,\n    isGateOpen,\n    projectContext,\n    requireAuth,\n    openGate,\n    closeGate,\n    onSignedIn,\n  };\n}\n\nexport default useAuthGate;\n"],"names":[],"mappings":";;;;;;AAqCgC;AAnChC;;AAFA;;AAoCA,mDAAmD;AACnD,MAAM,mBAAmB,OAAO,oXAAO,KAAK,eAAe,CAAC,CAAC,oXAAO,CAAC,GAAG,CAAC,iCAAiC;AA6BnG,SAAS,YAAY,UAA8B,CAAC,CAAC;;IAC1D,MAAM,CAAC,YAAY,cAAc,GAAG,IAAA,kXAAQ,EAAC;IAC7C,MAAM,CAAC,gBAAgB,kBAAkB,GAAG,IAAA,kXAAQ,EAClD,QAAQ,cAAc;IAExB,MAAM,CAAC,iBAAiB,mBAAmB,GAAG,IAAA,kXAAQ,EAAsB;IAE5E,2EAA2E;IAC3E,MAAM,CAAC,WAAW,aAAa,GAAG,IAAA,kXAAQ,EAA6C;QACrF,YAAY,CAAC;QACb,UAAU,CAAC;IACb;IAEA,gEAAgE;IAChE,IAAA,mXAAS;iCAAC;YACR,IAAI,CAAC,kBAAkB;gBACrB,2CAA2C;gBAC3C,aAAa;oBAAE,YAAY;oBAAM,UAAU;gBAAK;gBAChD;YACF;YAEA,uDAAuD;YACvD,IAAI,YAAY;YAEhB,MAAM;uDAAgB;oBACpB,IAAI;wBACF,MAAM,EAAE,OAAO,EAAE,GAAG;wBACpB,qDAAqD;wBACrD,6CAA6C;wBAC7C,MAAM,cAAc;wBACpB,IAAI,UAAU,eAAe,WAAW;wBACtC,mDAAmD;wBACnD,6DAA6D;wBAC/D;oBACF,EAAE,OAAM;wBACN,2CAA2C;wBAC3C,IAAI,WAAW;4BACb,aAAa;gCAAE,YAAY;gCAAM,UAAU;4BAAK;wBAClD;oBACF;gBACF;;YAEA;YAEA;yCAAO;oBACL,YAAY;gBACd;;QACF;gCAAG,EAAE;IAEL,MAAM,WAAW,IAAA,qXAAW;6CAAC,CAAC;YAC5B,IAAI,SAAS;gBACX,kBAAkB;YACpB;YACA,cAAc;QAChB;4CAAG,EAAE;IAEL,MAAM,YAAY,IAAA,qXAAW;8CAAC;YAC5B,cAAc;YACd,mBAAmB;QACrB;6CAAG,EAAE;IAEL,MAAM,cAAc,IAAA,qXAAW;gDAC7B,CAAC;YACC,2CAA2C;YAC3C,IAAI,CAAC,kBAAkB;gBACrB,OAAO;YACT;YAEA,IAAI,UAAU,UAAU,EAAE;gBACxB,OAAO;YACT;YAEA,SAAS;YACT,OAAO;QACT;+CACA;QAAC,UAAU,UAAU;QAAE;KAAS;IAGlC,MAAM,aAAa,IAAA,qXAAW;+CAAC;YAC7B,cAAc;YACd;uDAAa,CAAA,OAAQ,CAAC;wBAAE,GAAG,IAAI;wBAAE,YAAY;oBAAK,CAAC;;YACnD,QAAQ,eAAe;YACvB;YACA,mBAAmB;QACrB;8CAAG;QAAC;QAAS;KAAgB;IAE7B,OAAO;QACL,YAAY,UAAU,UAAU;QAChC,UAAU,UAAU,QAAQ;QAC5B;QACA;QACA;QACA;QACA;QACA;IACF;AACF;GAhGgB;uCAkGD"}},
    {"offset": {"line": 4911, "column": 0}, "map": {"version":3,"sources":["file:///Users/jamesspalding/OpenClaw-OS/src/components/editor/IDEView.tsx"],"sourcesContent":["'use client';\n\nimport { useState, useCallback } from 'react';\nimport { useHorizontalScroll } from '@/hooks';\nimport { motion, AnimatePresence } from 'framer-motion';\nimport {\n  PanelLeftClose,\n  PanelLeft,\n  Play,\n  Save,\n  GitBranch,\n  Terminal,\n  Settings,\n  Search,\n  X,\n  Plus,\n} from 'lucide-react';\nimport { FileExplorer, type FileItem } from './FileExplorer';\nimport { CodeEditor } from './CodeEditor';\nimport { BuildModeGate } from '@/components/auth/BuildModeGate';\nimport { useAuthGate } from '@/hooks/useAuthGate';\nimport { cn } from '@/lib/utils';\n\n// ============================================================================\n// Types\n// ============================================================================\n\ninterface IDEViewProps {\n  className?: string;\n}\n\n// ============================================================================\n// Sample Data\n// ============================================================================\n\nconst SAMPLE_FILES: FileItem[] = [\n  {\n    id: 'src',\n    name: 'src',\n    type: 'folder',\n    children: [\n      {\n        id: 'app',\n        name: 'app',\n        type: 'folder',\n        parentId: 'src',\n        children: [\n          {\n            id: 'page.tsx',\n            name: 'page.tsx',\n            type: 'file',\n            parentId: 'app',\n            content: `export default function Home() {\n  return (\n    <main className=\"flex min-h-screen flex-col items-center justify-center p-24\">\n      <h1 className=\"text-4xl font-bold\">Welcome to Claw AI</h1>\n      <p className=\"mt-4 text-lg text-gray-600\">\n        Your AI-powered coding assistant\n      </p>\n    </main>\n  );\n}`,\n            language: 'typescript',\n          },\n          {\n            id: 'layout.tsx',\n            name: 'layout.tsx',\n            type: 'file',\n            parentId: 'app',\n            content: `import type { Metadata } from 'next';\nimport { Inter } from 'next/font/google';\nimport './globals.css';\n\nconst inter = Inter({ subsets: ['latin'] });\n\nexport const metadata: Metadata = {\n  title: 'Claw AI',\n  description: 'AI-powered coding assistant',\n};\n\nexport default function RootLayout({\n  children,\n}: {\n  children: React.ReactNode;\n}) {\n  return (\n    <html lang=\"en\">\n      <body className={inter.className}>{children}</body>\n    </html>\n  );\n}`,\n            language: 'typescript',\n          },\n          {\n            id: 'globals.css',\n            name: 'globals.css',\n            type: 'file',\n            parentId: 'app',\n            content: `@tailwind base;\n@tailwind components;\n@tailwind utilities;\n\n:root {\n  --foreground-rgb: 0, 0, 0;\n  --background-rgb: 255, 255, 255;\n}\n\n@media (prefers-color-scheme: dark) {\n  :root {\n    --foreground-rgb: 255, 255, 255;\n    --background-rgb: 0, 0, 0;\n  }\n}\n\nbody {\n  color: rgb(var(--foreground-rgb));\n  background: rgb(var(--background-rgb));\n}`,\n            language: 'css',\n          },\n        ],\n      },\n      {\n        id: 'components',\n        name: 'components',\n        type: 'folder',\n        parentId: 'src',\n        children: [\n          {\n            id: 'Button.tsx',\n            name: 'Button.tsx',\n            type: 'file',\n            parentId: 'components',\n            content: `import { forwardRef } from 'react';\nimport { cn } from '@/lib/utils';\n\ninterface ButtonProps extends React.ButtonHTMLAttributes<HTMLButtonElement> {\n  variant?: 'default' | 'outline' | 'ghost';\n  size?: 'sm' | 'md' | 'lg';\n}\n\nexport const Button = forwardRef<HTMLButtonElement, ButtonProps>(\n  ({ className, variant = 'default', size = 'md', ...props }, ref) => {\n    return (\n      <button\n        ref={ref}\n        className={cn(\n          'inline-flex items-center justify-center rounded-md font-medium transition-colors',\n          'focus-visible:outline-none focus-visible:ring-2',\n          {\n            'bg-primary text-primary-foreground hover:bg-primary/90': variant === 'default',\n            'border border-input hover:bg-accent': variant === 'outline',\n            'hover:bg-accent hover:text-accent-foreground': variant === 'ghost',\n          },\n          {\n            'h-8 px-3 text-sm': size === 'sm',\n            'h-10 px-4': size === 'md',\n            'h-12 px-6 text-lg': size === 'lg',\n          },\n          className\n        )}\n        {...props}\n      />\n    );\n  }\n);\n\nButton.displayName = 'Button';`,\n            language: 'typescript',\n          },\n        ],\n      },\n    ],\n  },\n  {\n    id: 'package.json',\n    name: 'package.json',\n    type: 'file',\n    content: `{\n  \"name\": \"claw-ai-app\",\n  \"version\": \"0.1.0\",\n  \"private\": true,\n  \"scripts\": {\n    \"dev\": \"next dev\",\n    \"build\": \"next build\",\n    \"start\": \"next start\",\n    \"lint\": \"next lint\"\n  },\n  \"dependencies\": {\n    \"next\": \"14.0.0\",\n    \"react\": \"18.2.0\",\n    \"react-dom\": \"18.2.0\"\n  },\n  \"devDependencies\": {\n    \"@types/node\": \"20.0.0\",\n    \"@types/react\": \"18.2.0\",\n    \"typescript\": \"5.0.0\",\n    \"tailwindcss\": \"3.3.0\"\n  }\n}`,\n    language: 'json',\n  },\n  {\n    id: 'README.md',\n    name: 'README.md',\n    type: 'file',\n    content: `# Claw AI App\n\nAn AI-powered coding assistant built with Next.js.\n\n## Getting Started\n\n\\`\\`\\`bash\nnpm install\nnpm run dev\n\\`\\`\\`\n\nOpen [http://localhost:3000](http://localhost:3000) to see the result.\n\n## Features\n\n- AI-powered code suggestions\n- Real-time collaboration\n- Git integration\n- Terminal access\n`,\n    language: 'markdown',\n  },\n];\n\n// ============================================================================\n// Main Component\n// ============================================================================\n\nexport function IDEView({ className }: IDEViewProps) {\n  const [sidebarOpen, setSidebarOpen] = useState(true);\n  const [selectedFile, setSelectedFile] = useState<FileItem | null>(null);\n  const [openTabs, setOpenTabs] = useState<FileItem[]>([]);\n  const [files, setFiles] = useState<FileItem[]>(SAMPLE_FILES);\n  const [fileContents, setFileContents] = useState<Record<string, string>>({});\n  const [unsavedChanges, setUnsavedChanges] = useState<Set<string>>(new Set());\n  const tabScrollRef = useHorizontalScroll<HTMLDivElement>();\n\n  // Auth gate for build actions\n  const {\n    requireAuth,\n    isGateOpen,\n    closeGate,\n    onSignedIn,\n    projectContext,\n  } = useAuthGate();\n\n  // Flatten file tree to find files by id\n  const flattenFiles = useCallback((items: FileItem[]): FileItem[] => {\n    const result: FileItem[] = [];\n    for (const item of items) {\n      result.push(item);\n      if (item.children) {\n        result.push(...flattenFiles(item.children));\n      }\n    }\n    return result;\n  }, []);\n\n  const handleSelectFile = useCallback((file: FileItem) => {\n    if (file.type === 'file') {\n      setSelectedFile(file);\n\n      // Add to tabs if not already open\n      setOpenTabs((prev) => {\n        if (prev.find((t) => t.id === file.id)) {\n          return prev;\n        }\n        return [...prev, file];\n      });\n\n      // Initialize content if not already loaded\n      if (!fileContents[file.id] && file.content) {\n        setFileContents((prev) => ({\n          ...prev,\n          [file.id]: file.content || '',\n        }));\n      }\n    }\n  }, [fileContents]);\n\n  const handleCloseTab = useCallback((fileId: string, e?: React.MouseEvent) => {\n    e?.stopPropagation();\n    setOpenTabs((prev) => prev.filter((t) => t.id !== fileId));\n\n    // If closing the selected file, select another tab\n    if (selectedFile?.id === fileId) {\n      setOpenTabs((prev) => {\n        const remaining = prev.filter((t) => t.id !== fileId);\n        if (remaining.length > 0) {\n          setSelectedFile(remaining[remaining.length - 1]);\n        } else {\n          setSelectedFile(null);\n        }\n        return prev;\n      });\n    }\n  }, [selectedFile]);\n\n  const handleEditorChange = useCallback((fileId: string, content: string) => {\n    setFileContents((prev) => ({\n      ...prev,\n      [fileId]: content,\n    }));\n    setUnsavedChanges((prev) => new Set(prev).add(fileId));\n  }, []);\n\n  const handleSave = useCallback(() => {\n    if (!selectedFile) return;\n\n    // Require auth for save action\n    if (!requireAuth({ name: 'Claw AI App', description: 'Your AI-powered project' })) {\n      return;\n    }\n\n    // User is authenticated, proceed with save\n    setUnsavedChanges((prev) => {\n      const next = new Set(prev);\n      next.delete(selectedFile.id);\n      return next;\n    });\n  }, [selectedFile, requireAuth]);\n\n  // Auth-gated actions\n  const handleRun = useCallback(() => {\n    if (!requireAuth({ name: 'Claw AI App' })) return;\n    // Run project implementation\n  }, [requireAuth]);\n\n  const handleGit = useCallback(() => {\n    if (!requireAuth({ name: 'Claw AI App' })) return;\n    // Open git implementation\n  }, [requireAuth]);\n\n  const handleTerminal = useCallback(() => {\n    if (!requireAuth({ name: 'Claw AI App' })) return;\n    // Open terminal implementation\n  }, [requireAuth]);\n\n  const handleNewProject = useCallback(() => {\n    if (!requireAuth({ name: 'New Project' })) return;\n    // Create new project implementation\n  }, [requireAuth]);\n\n  const currentContent = selectedFile\n    ? fileContents[selectedFile.id] ?? selectedFile.content ?? ''\n    : '';\n\n  return (\n    <div className={cn('flex h-full bg-[#0d1117] rounded-lg overflow-hidden', className)}>\n      {/* Sidebar */}\n      <AnimatePresence>\n        {sidebarOpen && (\n          <motion.div\n            initial={{ width: 0, opacity: 0 }}\n            animate={{ width: 240, opacity: 1 }}\n            exit={{ width: 0, opacity: 0 }}\n            transition={{ duration: 0.2 }}\n            className=\"border-r border-white/5 flex-shrink-0 overflow-hidden\"\n          >\n            <FileExplorer\n              files={files}\n              selectedFile={selectedFile?.id}\n              onSelectFile={handleSelectFile}\n              projectName=\"Claw AI App\"\n            />\n          </motion.div>\n        )}\n      </AnimatePresence>\n\n      {/* Main Editor Area */}\n      <div className=\"flex-1 flex flex-col min-w-0\">\n        {/* Toolbar */}\n        <div className=\"flex items-center justify-between px-2 py-1 border-b border-white/5 bg-[#161b22]\">\n          <div className=\"flex items-center gap-1\">\n            <button\n              onClick={() => setSidebarOpen(!sidebarOpen)}\n              className=\"p-1.5 rounded hover:bg-white/10 text-white/50 hover:text-white transition-colors\"\n              title={sidebarOpen ? 'Hide Sidebar' : 'Show Sidebar'}\n            >\n              {sidebarOpen ? (\n                <PanelLeftClose className=\"w-4 h-4\" />\n              ) : (\n                <PanelLeft className=\"w-4 h-4\" />\n              )}\n            </button>\n\n            <button\n              className=\"p-1.5 rounded hover:bg-white/10 text-white/50 hover:text-white transition-colors\"\n              title=\"Search\"\n            >\n              <Search className=\"w-4 h-4\" />\n            </button>\n          </div>\n\n          <div className=\"flex items-center gap-1\">\n            <button\n              onClick={handleSave}\n              disabled={!selectedFile || !unsavedChanges.has(selectedFile.id)}\n              className={cn(\n                'p-1.5 rounded transition-colors',\n                selectedFile && unsavedChanges.has(selectedFile.id)\n                  ? 'text-orange-400 hover:bg-orange-500/20'\n                  : 'text-white/30 cursor-not-allowed'\n              )}\n              title=\"Save (âŒ˜S)\"\n            >\n              <Save className=\"w-4 h-4\" />\n            </button>\n\n            <button\n              onClick={handleRun}\n              className=\"p-1.5 rounded hover:bg-white/10 text-white/50 hover:text-green-400 transition-colors\"\n              title=\"Run (requires sign in)\"\n            >\n              <Play className=\"w-4 h-4\" />\n            </button>\n\n            <button\n              onClick={handleGit}\n              className=\"p-1.5 rounded hover:bg-white/10 text-white/50 hover:text-white transition-colors\"\n              title=\"Git (requires sign in)\"\n            >\n              <GitBranch className=\"w-4 h-4\" />\n            </button>\n\n            <button\n              onClick={handleTerminal}\n              className=\"p-1.5 rounded hover:bg-white/10 text-white/50 hover:text-white transition-colors\"\n              title=\"Terminal (requires sign in)\"\n            >\n              <Terminal className=\"w-4 h-4\" />\n            </button>\n\n            <button\n              onClick={handleNewProject}\n              className=\"p-1.5 rounded hover:bg-white/10 text-orange-400 hover:text-orange-300 transition-colors\"\n              title=\"New Project (requires sign in)\"\n            >\n              <Plus className=\"w-4 h-4\" />\n            </button>\n          </div>\n        </div>\n\n        {/* Tabs */}\n        {openTabs.length > 0 && (\n          <div ref={tabScrollRef} className=\"flex items-center border-b border-white/5 bg-[#0d1117] overflow-x-auto scrollbar-hide\">\n            {openTabs.map((tab) => (\n              <button\n                key={tab.id}\n                onClick={() => setSelectedFile(tab)}\n                className={cn(\n                  'group flex items-center gap-2 px-3 py-2 text-xs border-r border-white/5 transition-colors',\n                  selectedFile?.id === tab.id\n                    ? 'bg-[#161b22] text-white'\n                    : 'text-white/50 hover:text-white hover:bg-white/5'\n                )}\n              >\n                <span className={unsavedChanges.has(tab.id) ? 'text-orange-400' : ''}>\n                  {tab.name}\n                </span>\n                {unsavedChanges.has(tab.id) && (\n                  <span className=\"w-2 h-2 rounded-full bg-orange-400\" />\n                )}\n                <button\n                  onClick={(e) => handleCloseTab(tab.id, e)}\n                  className=\"p-0.5 rounded opacity-0 group-hover:opacity-100 hover:bg-white/10 transition-all\"\n                >\n                  <X className=\"w-3 h-3\" />\n                </button>\n              </button>\n            ))}\n          </div>\n        )}\n\n        {/* Editor */}\n        <div className=\"flex-1 overflow-hidden\">\n          {selectedFile ? (\n            <CodeEditor\n              fileName={selectedFile.name}\n              initialValue={currentContent}\n              onChange={(content) => handleEditorChange(selectedFile.id, content)}\n            />\n          ) : (\n            <div className=\"flex items-center justify-center h-full text-white/30\">\n              <div className=\"text-center\">\n                <p className=\"text-lg mb-2\">No file selected</p>\n                <p className=\"text-sm\">Select a file from the explorer to start editing</p>\n              </div>\n            </div>\n          )}\n        </div>\n      </div>\n\n      {/* Auth Gate Modal */}\n      <BuildModeGate\n        isOpen={isGateOpen}\n        onClose={closeGate}\n        onSignedIn={onSignedIn}\n        projectContext={projectContext}\n      />\n    </div>\n  );\n}\n\nexport default IDEView;\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 5632, "column": 0}, "map": {"version":3,"sources":["file:///Users/jamesspalding/OpenClaw-OS/src/components/prototyping/ProcessWindow.tsx"],"sourcesContent":["'use client';\n\nimport { useState, useEffect, useRef } from 'react';\nimport { useHorizontalScroll } from '@/hooks';\nimport { motion, AnimatePresence } from 'framer-motion';\nimport {\n  Code2,\n  Terminal,\n  FileCode,\n  Sparkles,\n  Bot,\n  User,\n  Copy,\n  Check,\n  Loader2,\n  Globe,\n  Eye,\n  ArrowLeft,\n  ArrowRight,\n  RotateCw,\n  Lock,\n  Search,\n  Star,\n  ExternalLink,\n  Smartphone,\n  Monitor,\n  Tablet,\n  RefreshCw,\n  Settings,\n  Layers,\n  MousePointer,\n  Zap,\n} from 'lucide-react';\nimport { SkillsPanel } from '@/components/ai-elements/SkillsPanel';\nimport { IDEView } from '@/components/editor/IDEView';\n\n// ============================================================================\n// Types\n// ============================================================================\n\nexport interface ProcessState {\n  activeTab: 'code' | 'chat' | 'terminal' | 'browser' | 'preview' | 'skills';\n  currentFile: string;\n  files: Record<string, string>;\n  chatMessages: ChatMessage[];\n  terminalOutput: string[];\n  isProcessing: boolean;\n  currentTask: string;\n  aiTyping: boolean;\n  browserUrl: string;\n  browserHistory: string[];\n  browserHistoryIndex: number;\n  previewDevice: 'mobile' | 'tablet' | 'desktop';\n  previewComponent: string;\n}\n\ninterface ChatMessage {\n  id: string;\n  role: 'user' | 'assistant';\n  content: string;\n  timestamp: Date;\n  isTyping?: boolean;\n}\n\ninterface ProcessWindowProps {\n  state: ProcessState;\n  onStateChange: (state: ProcessState) => void;\n  className?: string;\n}\n\n// ============================================================================\n// Simulated Code Content\n// ============================================================================\n\nconst SAMPLE_FILES: Record<string, string> = {\n  'app.tsx': `import { useState } from 'react';\nimport { ClawAIOrb } from './components/ClawAIOrb';\nimport { ControlDeck } from './components/ControlDeck';\n\nexport default function App() {\n  const [theme, setTheme] = useState('cosmic');\n  const [isProcessing, setIsProcessing] = useState(false);\n\n  const handleCommand = async (cmd: string) => {\n    setIsProcessing(true);\n    // Claw AI processes the command\n    await processWithAI(cmd);\n    setIsProcessing(false);\n  };\n\n  return (\n    <div className=\"min-h-screen bg-gradient-to-b from-gray-900 to-black\">\n      <ClawAIOrb\n        isActive={isProcessing}\n        theme={theme}\n      />\n      <ControlDeck onCommand={handleCommand} />\n    </div>\n  );\n}`,\n  'ClawAIOrb.tsx': `import { motion } from 'framer-motion';\n\ninterface ClawAIOrbProps {\n  isActive: boolean;\n  theme: string;\n}\n\nexport function ClawAIOrb({ isActive, theme }: ClawAIOrbProps) {\n  return (\n    <motion.div\n      className=\"relative w-20 h-20 rounded-full\"\n      animate={{\n        scale: isActive ? [1, 1.1, 1] : 1,\n        boxShadow: isActive\n          ? '0 0 40px var(--theme-primary)'\n          : '0 0 20px var(--theme-primary)',\n      }}\n      transition={{ duration: 2, repeat: Infinity }}\n    >\n      {/* Orb core */}\n      <div className=\"absolute inset-2 rounded-full bg-gradient-radial\" />\n\n      {/* Activity indicator */}\n      {isActive && (\n        <motion.div\n          className=\"absolute inset-0 rounded-full\"\n          animate={{ rotate: 360 }}\n          transition={{ duration: 3, repeat: Infinity }}\n        />\n      )}\n    </motion.div>\n  );\n}`,\n  'styles.css': `/* Claw AI Theme System */\n:root {\n  --theme-primary: #f97316;\n  --theme-accent: #fb923c;\n  --theme-background: #0a0a0a;\n  --theme-card: rgba(255, 255, 255, 0.05);\n}\n\n.orb-glow {\n  box-shadow:\n    0 0 20px var(--theme-primary),\n    0 0 40px var(--theme-accent),\n    inset 0 0 20px rgba(255, 255, 255, 0.1);\n}\n\n.control-deck {\n  background: linear-gradient(\n    180deg,\n    #d4d4d4 0%,\n    #a8a8a8 5%,\n    #c0c0c0 50%,\n    #888888 100%\n  );\n}`,\n};\n\n// ============================================================================\n// Code Editor Component\n// ============================================================================\n\nfunction CodeEditor({\n  content,\n  filename,\n  isProcessing,\n  highlightLines = [],\n}: {\n  content: string;\n  filename: string;\n  isProcessing: boolean;\n  highlightLines?: number[];\n}) {\n  const [copied, setCopied] = useState(false);\n\n  const handleCopy = () => {\n    navigator.clipboard.writeText(content);\n    setCopied(true);\n    setTimeout(() => setCopied(false), 2000);\n  };\n\n  // Simple syntax highlighting\n  const highlightSyntax = (code: string) => {\n    return code.split('\\n').map((line, i) => {\n      let highlighted = line\n        .replace(\n          /\\b(import|export|from|const|let|var|function|return|if|else|async|await|default|interface|type)\\b/g,\n          '<span class=\"text-purple-400\">$1</span>'\n        )\n        .replace(\n          /([\"'`])([^\"'`]*)\\1/g,\n          '<span class=\"text-green-400\">$1$2$1</span>'\n        )\n        .replace(\n          /(\\/\\/.*$|\\/\\*[\\s\\S]*?\\*\\/)/gm,\n          '<span class=\"text-gray-500\">$1</span>'\n        )\n        .replace(\n          /(&lt;\\/?)(\\w+)/g,\n          '$1<span class=\"text-blue-400\">$2</span>'\n        )\n        .replace(\n          /\\b(\\d+)\\b/g,\n          '<span class=\"text-orange-400\">$1</span>'\n        )\n        .replace(\n          /([{}[\\]()])/g,\n          '<span class=\"text-yellow-300\">$1</span>'\n        );\n\n      const isHighlighted = highlightLines.includes(i + 1);\n\n      return (\n        <div\n          key={i}\n          className={`flex ${isHighlighted ? 'bg-green-500/10' : ''}`}\n        >\n          <span className=\"w-10 text-right pr-3 text-white/20 select-none text-xs\">\n            {i + 1}\n          </span>\n          <span\n            className=\"flex-1 text-xs\"\n            dangerouslySetInnerHTML={{ __html: highlighted || '&nbsp;' }}\n          />\n        </div>\n      );\n    });\n  };\n\n  return (\n    <div className=\"h-full flex flex-col bg-[#0d1117] rounded-lg overflow-hidden\">\n      {/* Header - responsive */}\n      <div className=\"flex items-center justify-between px-1.5 sm:px-2 py-1 sm:py-1.5 bg-[#161b22] border-b border-white/5\">\n        <div className=\"flex items-center gap-1 min-w-0\">\n          <div className=\"flex items-center gap-1.5 sm:gap-2 px-2 sm:px-3 py-1 bg-[#0d1117] rounded-t text-[10px] sm:text-xs text-white/80 truncate\">\n            <FileCode className=\"w-3 h-3 text-blue-400 flex-shrink-0\" />\n            <span className=\"truncate\">{filename}</span>\n          </div>\n        </div>\n        <button\n          onClick={handleCopy}\n          className=\"p-1 sm:p-1.5 rounded hover:bg-white/10 text-white/40 hover:text-white/80 transition-colors flex-shrink-0\"\n        >\n          {copied ? <Check className=\"w-3 h-3 sm:w-3.5 sm:h-3.5 text-green-400\" /> : <Copy className=\"w-3 h-3 sm:w-3.5 sm:h-3.5\" />}\n        </button>\n      </div>\n\n      {/* Code content - responsive */}\n      <div className=\"flex-1 overflow-auto p-2 sm:p-3 font-mono relative\">\n        {isProcessing && (\n          <motion.div\n            className=\"absolute top-2 right-2 flex items-center gap-2 px-2 py-1 bg-orange-500/20 rounded text-xs text-orange-400\"\n            initial={{ opacity: 0 }}\n            animate={{ opacity: 1 }}\n          >\n            <Loader2 className=\"w-3 h-3 animate-spin\" />\n            Claw AI is editing...\n          </motion.div>\n        )}\n        <pre className=\"text-white/90 leading-relaxed\">\n          {highlightSyntax(content)}\n        </pre>\n      </div>\n    </div>\n  );\n}\n\n// ============================================================================\n// Chat Interface Component\n// ============================================================================\n\nfunction ChatInterface({\n  messages,\n  isTyping,\n  onSendMessage,\n}: {\n  messages: ChatMessage[];\n  isTyping: boolean;\n  onSendMessage: (message: string) => void;\n}) {\n  const [input, setInput] = useState('');\n  const messagesEndRef = useRef<HTMLDivElement>(null);\n\n  useEffect(() => {\n    messagesEndRef.current?.scrollIntoView({ behavior: 'smooth' });\n  }, [messages, isTyping]);\n\n  const handleSubmit = (e: React.FormEvent) => {\n    e.preventDefault();\n    if (input.trim()) {\n      onSendMessage(input.trim());\n      setInput('');\n    }\n  };\n\n  return (\n    <div className=\"h-full flex flex-col bg-[#0d1117] rounded-lg overflow-hidden\">\n      {/* Header - responsive */}\n      <div className=\"flex items-center gap-2 sm:gap-3 px-3 sm:px-4 py-2 sm:py-3 bg-[#161b22] border-b border-white/5\">\n        <div className=\"relative flex-shrink-0\">\n          <div className=\"w-7 h-7 sm:w-8 sm:h-8 rounded-full bg-gradient-to-br from-orange-400 to-orange-600 flex items-center justify-center\">\n            <Bot className=\"w-3.5 h-3.5 sm:w-4 sm:h-4 text-white\" />\n          </div>\n          <div className=\"absolute -bottom-0.5 -right-0.5 w-2.5 h-2.5 sm:w-3 sm:h-3 bg-green-500 rounded-full border-2 border-[#161b22]\" />\n        </div>\n        <div className=\"min-w-0\">\n          <div className=\"text-xs sm:text-sm font-medium text-white truncate\">Claw AI</div>\n          <div className=\"text-[10px] sm:text-xs text-green-400 truncate\">Online â€¢ Ready to code</div>\n        </div>\n      </div>\n\n      {/* Messages - responsive */}\n      <div className=\"flex-1 overflow-auto p-2 sm:p-4 space-y-3 sm:space-y-4\">\n        {messages.map((msg) => (\n          <motion.div\n            key={msg.id}\n            initial={{ opacity: 0, y: 10 }}\n            animate={{ opacity: 1, y: 0 }}\n            className={`flex gap-2 sm:gap-3 ${msg.role === 'user' ? 'flex-row-reverse' : ''}`}\n          >\n            <div\n              className={`w-6 h-6 sm:w-7 sm:h-7 rounded-full flex items-center justify-center flex-shrink-0 ${\n                msg.role === 'user'\n                  ? 'bg-blue-500/20'\n                  : 'bg-gradient-to-br from-orange-400 to-orange-600'\n              }`}\n            >\n              {msg.role === 'user' ? (\n                <User className=\"w-3 h-3 sm:w-3.5 sm:h-3.5 text-blue-400\" />\n              ) : (\n                <Bot className=\"w-3 h-3 sm:w-3.5 sm:h-3.5 text-white\" />\n              )}\n            </div>\n            <div\n              className={`max-w-[85%] sm:max-w-[80%] px-2.5 sm:px-3 py-1.5 sm:py-2 rounded-xl text-xs sm:text-sm ${\n                msg.role === 'user'\n                  ? 'bg-blue-500/20 text-white'\n                  : 'bg-white/5 text-white/90'\n              }`}\n            >\n              {msg.content}\n            </div>\n          </motion.div>\n        ))}\n\n        {isTyping && (\n          <motion.div\n            initial={{ opacity: 0 }}\n            animate={{ opacity: 1 }}\n            className=\"flex gap-2 sm:gap-3\"\n          >\n            <div className=\"w-6 h-6 sm:w-7 sm:h-7 rounded-full bg-gradient-to-br from-orange-400 to-orange-600 flex items-center justify-center flex-shrink-0\">\n              <Bot className=\"w-3 h-3 sm:w-3.5 sm:h-3.5 text-white\" />\n            </div>\n            <div className=\"px-2.5 sm:px-3 py-1.5 sm:py-2 rounded-xl bg-white/5 text-white/90 text-xs sm:text-sm\">\n              <motion.div className=\"flex gap-1\">\n                {[0, 1, 2].map((i) => (\n                  <motion.span\n                    key={i}\n                    className=\"w-1.5 h-1.5 sm:w-2 sm:h-2 bg-orange-400 rounded-full\"\n                    animate={{ opacity: [0.3, 1, 0.3] }}\n                    transition={{ duration: 1, repeat: Infinity, delay: i * 0.2 }}\n                  />\n                ))}\n              </motion.div>\n            </div>\n          </motion.div>\n        )}\n        <div ref={messagesEndRef} />\n      </div>\n\n      {/* Input form - responsive */}\n      <form onSubmit={handleSubmit} className=\"p-2 sm:p-3 border-t border-white/5\">\n        <div className=\"flex gap-1.5 sm:gap-2\">\n          <input\n            type=\"text\"\n            value={input}\n            onChange={(e) => setInput(e.target.value)}\n            placeholder=\"Ask Claw AI...\"\n            className=\"flex-1 px-3 sm:px-4 py-1.5 sm:py-2 bg-white/5 rounded-xl text-xs sm:text-sm text-white placeholder-white/30 outline-none focus:ring-2 focus:ring-orange-500/50 transition-all\"\n          />\n          <button\n            type=\"submit\"\n            className=\"px-3 sm:px-4 py-1.5 sm:py-2 bg-orange-500 rounded-xl text-xs sm:text-sm text-white font-medium hover:bg-orange-600 transition-colors flex-shrink-0\"\n          >\n            Send\n          </button>\n        </div>\n      </form>\n    </div>\n  );\n}\n\n// ============================================================================\n// Terminal Component\n// ============================================================================\n\nfunction TerminalView({ output }: { output: string[] }) {\n  const terminalRef = useRef<HTMLDivElement>(null);\n\n  useEffect(() => {\n    if (terminalRef.current) {\n      terminalRef.current.scrollTop = terminalRef.current.scrollHeight;\n    }\n  }, [output]);\n\n  return (\n    <div className=\"h-full flex flex-col bg-[#0d1117] rounded-lg overflow-hidden\">\n      {/* Header - responsive */}\n      <div className=\"flex items-center gap-1.5 sm:gap-2 px-2 sm:px-3 py-1.5 sm:py-2 bg-[#161b22] border-b border-white/5\">\n        <Terminal className=\"w-3.5 h-3.5 sm:w-4 sm:h-4 text-green-400\" />\n        <span className=\"text-[10px] sm:text-xs text-white/60\">Terminal</span>\n      </div>\n\n      {/* Terminal content - responsive */}\n      <div\n        ref={terminalRef}\n        className=\"flex-1 overflow-auto p-2 sm:p-3 font-mono text-[10px] sm:text-xs text-green-400\"\n      >\n        {output.map((line, i) => (\n          <motion.div\n            key={i}\n            initial={{ opacity: 0, x: -10 }}\n            animate={{ opacity: 1, x: 0 }}\n            transition={{ duration: 0.15 }}\n            className={`${line.startsWith('$') ? 'text-white/60' : ''} ${\n              line.includes('error') ? 'text-red-400' : ''\n            } ${line.includes('success') || line.includes('âœ“') ? 'text-green-400' : ''}`}\n          >\n            {line}\n          </motion.div>\n        ))}\n        <div className=\"flex items-center gap-1 mt-1 text-white/60\">\n          <span>$</span>\n          <motion.span\n            className=\"w-2 h-4 bg-green-400\"\n            animate={{ opacity: [1, 0] }}\n            transition={{ duration: 0.8, repeat: Infinity }}\n          />\n        </div>\n      </div>\n    </div>\n  );\n}\n\n// ============================================================================\n// Browser Component\n// ============================================================================\n\nconst SIMULATED_PAGES: Record<string, { title: string; content: React.ReactNode }> = {\n  'https://localhost:3000': {\n    title: 'Claw AI OS â€¢ localhost',\n    content: (\n      <div className=\"p-6 text-center\">\n        <div className=\"w-16 h-16 mx-auto mb-4 rounded-full bg-gradient-to-br from-orange-400 to-orange-600 flex items-center justify-center\">\n          <Bot className=\"w-8 h-8 text-white\" />\n        </div>\n        <h1 className=\"text-xl font-bold text-white mb-2\">Claw AI OS</h1>\n        <p className=\"text-white/60 text-sm\">Development server running</p>\n        <div className=\"mt-4 flex items-center justify-center gap-2\">\n          <span className=\"w-2 h-2 bg-green-500 rounded-full animate-pulse\" />\n          <span className=\"text-green-400 text-xs\">Live â€¢ Hot Reload Active</span>\n        </div>\n      </div>\n    ),\n  },\n  'https://google.com': {\n    title: 'Google',\n    content: (\n      <div className=\"p-8 flex flex-col items-center justify-center h-full\">\n        <div className=\"text-2xl font-bold mb-6\">\n          <span className=\"text-blue-500\">G</span>\n          <span className=\"text-red-500\">o</span>\n          <span className=\"text-yellow-500\">o</span>\n          <span className=\"text-blue-500\">g</span>\n          <span className=\"text-green-500\">l</span>\n          <span className=\"text-red-500\">e</span>\n        </div>\n        <div className=\"w-full max-w-md flex items-center gap-2 px-4 py-2 bg-white/10 rounded-full border border-white/20\">\n          <Search className=\"w-4 h-4 text-white/40\" />\n          <span className=\"text-white/40 text-sm\">Search Google or type a URL</span>\n        </div>\n      </div>\n    ),\n  },\n  'https://github.com': {\n    title: 'GitHub',\n    content: (\n      <div className=\"p-4\">\n        <div className=\"flex items-center gap-3 mb-6\">\n          <div className=\"w-8 h-8 bg-white rounded-full\" />\n          <span className=\"text-white font-bold\">GitHub</span>\n        </div>\n        <div className=\"space-y-3\">\n          {['claw-ai-os', 'control-deck', 'dynamic-island'].map((repo) => (\n            <div key={repo} className=\"p-3 bg-white/5 rounded-lg border border-white/10\">\n              <div className=\"flex items-center gap-2\">\n                <FileCode className=\"w-4 h-4 text-blue-400\" />\n                <span className=\"text-blue-400 text-sm font-medium\">{repo}</span>\n              </div>\n              <p className=\"text-white/40 text-xs mt-1\">Updated 2 hours ago</p>\n            </div>\n          ))}\n        </div>\n      </div>\n    ),\n  },\n  'https://vercel.com': {\n    title: 'Vercel',\n    content: (\n      <div className=\"p-4 h-full flex flex-col\">\n        <div className=\"flex items-center gap-2 mb-4\">\n          <div className=\"w-6 h-6 bg-white\" style={{ clipPath: 'polygon(50% 0%, 0% 100%, 100% 100%)' }} />\n          <span className=\"text-white font-bold\">Vercel</span>\n        </div>\n        <div className=\"flex-1 flex items-center justify-center\">\n          <div className=\"text-center\">\n            <div className=\"text-3xl font-bold text-white mb-2\">Deploy Instantly</div>\n            <p className=\"text-white/60 text-sm\">Your code is live in seconds</p>\n            <div className=\"mt-4 px-4 py-2 bg-white text-black rounded-lg text-sm font-medium inline-block\">\n              Deploy Now\n            </div>\n          </div>\n        </div>\n      </div>\n    ),\n  },\n};\n\nfunction BrowserView({\n  url,\n  onNavigate,\n  onBack,\n  onForward,\n  onRefresh,\n  canGoBack,\n  canGoForward,\n  isLoading,\n}: {\n  url: string;\n  onNavigate: (url: string) => void;\n  onBack: () => void;\n  onForward: () => void;\n  onRefresh: () => void;\n  canGoBack: boolean;\n  canGoForward: boolean;\n  isLoading: boolean;\n}) {\n  const [inputUrl, setInputUrl] = useState(url);\n  const [isSecure, setIsSecure] = useState(url.startsWith('https://'));\n\n  useEffect(() => {\n    setInputUrl(url);\n    setIsSecure(url.startsWith('https://'));\n  }, [url]);\n\n  const handleSubmit = (e: React.FormEvent) => {\n    e.preventDefault();\n    let finalUrl = inputUrl;\n    if (!finalUrl.startsWith('http')) {\n      finalUrl = `https://${finalUrl}`;\n    }\n    onNavigate(finalUrl);\n  };\n\n  const currentPage = SIMULATED_PAGES[url] || {\n    title: 'Page Not Found',\n    content: (\n      <div className=\"h-full flex items-center justify-center\">\n        <div className=\"text-center\">\n          <Globe className=\"w-12 h-12 text-white/20 mx-auto mb-3\" />\n          <div className=\"text-white/60 text-sm\">Simulated browser</div>\n          <div className=\"text-white/40 text-xs mt-1\">Try: localhost:3000, google.com, github.com</div>\n        </div>\n      </div>\n    ),\n  };\n\n  return (\n    <div className=\"h-full flex flex-col bg-[#0d1117] rounded-lg overflow-hidden\">\n      {/* Browser toolbar - responsive */}\n      <div className=\"flex items-center gap-1 sm:gap-2 px-1.5 sm:px-2 py-1.5 sm:py-2 bg-[#161b22] border-b border-white/5\">\n        {/* Navigation buttons */}\n        <div className=\"flex items-center gap-0.5 sm:gap-1 flex-shrink-0\">\n          <button\n            onClick={onBack}\n            disabled={!canGoBack}\n            className={`p-1 sm:p-1.5 rounded-lg transition-colors ${\n              canGoBack ? 'hover:bg-white/10 text-white/60' : 'text-white/20 cursor-not-allowed'\n            }`}\n          >\n            <ArrowLeft className=\"w-3.5 h-3.5 sm:w-4 sm:h-4\" />\n          </button>\n          <button\n            onClick={onForward}\n            disabled={!canGoForward}\n            className={`p-1 sm:p-1.5 rounded-lg transition-colors ${\n              canGoForward ? 'hover:bg-white/10 text-white/60' : 'text-white/20 cursor-not-allowed'\n            }`}\n          >\n            <ArrowRight className=\"w-3.5 h-3.5 sm:w-4 sm:h-4\" />\n          </button>\n          <button\n            onClick={onRefresh}\n            className=\"p-1 sm:p-1.5 rounded-lg hover:bg-white/10 text-white/60 transition-colors\"\n          >\n            <RotateCw className={`w-3.5 h-3.5 sm:w-4 sm:h-4 ${isLoading ? 'animate-spin' : ''}`} />\n          </button>\n        </div>\n\n        {/* URL bar */}\n        <form onSubmit={handleSubmit} className=\"flex-1 min-w-0\">\n          <div className=\"flex items-center gap-1.5 sm:gap-2 px-2 sm:px-3 py-1 sm:py-1.5 bg-white/5 rounded-lg border border-white/10\">\n            {isSecure ? (\n              <Lock className=\"w-3 h-3 text-green-400 flex-shrink-0\" />\n            ) : (\n              <Globe className=\"w-3 h-3 text-white/40 flex-shrink-0\" />\n            )}\n            <input\n              type=\"text\"\n              value={inputUrl}\n              onChange={(e) => setInputUrl(e.target.value)}\n              className=\"flex-1 min-w-0 bg-transparent text-[10px] sm:text-xs text-white/80 outline-none truncate\"\n              placeholder=\"Enter URL...\"\n            />\n          </div>\n        </form>\n\n        {/* Actions - hidden on very small screens */}\n        <div className=\"hidden xs:flex items-center gap-0.5 sm:gap-1 flex-shrink-0\">\n          <button className=\"p-1 sm:p-1.5 rounded-lg hover:bg-white/10 text-white/40 transition-colors\">\n            <Star className=\"w-3.5 h-3.5 sm:w-4 sm:h-4\" />\n          </button>\n          <button className=\"p-1 sm:p-1.5 rounded-lg hover:bg-white/10 text-white/40 transition-colors\">\n            <ExternalLink className=\"w-3.5 h-3.5 sm:w-4 sm:h-4\" />\n          </button>\n        </div>\n      </div>\n\n      {/* Page content */}\n      <div className=\"flex-1 overflow-auto bg-[#0a0a0a]\">\n        {isLoading ? (\n          <div className=\"h-full flex items-center justify-center\">\n            <Loader2 className=\"w-6 h-6 text-white/40 animate-spin\" />\n          </div>\n        ) : (\n          <motion.div\n            initial={{ opacity: 0 }}\n            animate={{ opacity: 1 }}\n            className=\"h-full\"\n          >\n            {currentPage.content}\n          </motion.div>\n        )}\n      </div>\n    </div>\n  );\n}\n\n// ============================================================================\n// Preview Component\n// ============================================================================\n\nconst PREVIEW_COMPONENTS: Record<string, { name: string; preview: React.ReactNode }> = {\n  'ClawAIOrb': {\n    name: 'Claw AI Orb',\n    preview: (\n      <div className=\"flex items-center justify-center h-full bg-gradient-to-b from-gray-900 to-black\">\n        <motion.div\n          className=\"relative w-24 h-24 rounded-full\"\n          animate={{\n            scale: [1, 1.05, 1],\n            boxShadow: [\n              '0 0 20px rgba(249, 115, 22, 0.4)',\n              '0 0 40px rgba(249, 115, 22, 0.6)',\n              '0 0 20px rgba(249, 115, 22, 0.4)',\n            ],\n          }}\n          transition={{ duration: 2, repeat: Infinity }}\n          style={{\n            background: 'radial-gradient(circle at 30% 30%, #fb923c, #f97316, #ea580c)',\n          }}\n        >\n          <div className=\"absolute inset-3 rounded-full bg-gradient-to-br from-white/20 to-transparent\" />\n          <motion.div\n            className=\"absolute inset-0 rounded-full border-2 border-orange-400/30\"\n            animate={{ rotate: 360 }}\n            transition={{ duration: 8, repeat: Infinity, ease: 'linear' }}\n          />\n        </motion.div>\n      </div>\n    ),\n  },\n  'ControlDeck': {\n    name: 'Control Deck',\n    preview: (\n      <div className=\"flex items-center justify-center h-full p-4 bg-[#1a1a1a]\">\n        <div className=\"w-full max-w-[280px] p-3 rounded-xl bg-gradient-to-b from-gray-300 to-gray-400\">\n          <div className=\"h-10 mb-2 rounded bg-[#0a0f0a] flex items-center justify-center\">\n            <span className=\"text-green-400 text-[8px] font-mono\">TASK: PREVIEW MODE</span>\n          </div>\n          <div className=\"grid grid-cols-5 gap-1 mb-2\">\n            {['âœ“', 'ðŸ‘', 'âš¡', 'â†µ', 'ðŸ’¬'].map((icon, i) => (\n              <div key={i} className=\"h-8 rounded bg-[#2a2a2a] flex items-center justify-center text-xs\">\n                {icon}\n              </div>\n            ))}\n          </div>\n          <div className=\"h-6 rounded bg-[#2a2a2a] flex items-center justify-center\">\n            <span className=\"text-[8px] text-white/50\">SUGGEST NEXT PROMPT</span>\n          </div>\n        </div>\n      </div>\n    ),\n  },\n  'DynamicIsland': {\n    name: 'Dynamic Island',\n    preview: (\n      <div className=\"flex items-center justify-center h-full bg-black pt-8\">\n        <motion.div\n          className=\"px-6 py-2 rounded-full bg-[#1a1a1a] flex items-center gap-3\"\n          animate={{ width: ['120px', '200px', '120px'] }}\n          transition={{ duration: 3, repeat: Infinity }}\n        >\n          <div className=\"w-8 h-8 rounded-full bg-gradient-to-br from-orange-400 to-orange-600\" />\n          <div className=\"flex-1\">\n            <div className=\"h-2 w-16 bg-white/20 rounded mb-1\" />\n            <div className=\"h-1.5 w-12 bg-white/10 rounded\" />\n          </div>\n        </motion.div>\n      </div>\n    ),\n  },\n};\n\nfunction PreviewView({\n  device,\n  component,\n  onDeviceChange,\n  onComponentChange,\n}: {\n  device: 'mobile' | 'tablet' | 'desktop';\n  component: string;\n  onDeviceChange: (device: 'mobile' | 'tablet' | 'desktop') => void;\n  onComponentChange: (component: string) => void;\n}) {\n  // Responsive device sizes - smaller on mobile screens\n  const deviceSizes = {\n    mobile: 'w-[200px] h-[360px] sm:w-[280px] sm:h-[500px]',\n    tablet: 'w-[320px] h-[240px] sm:w-[500px] sm:h-[350px]',\n    desktop: 'w-full h-full max-w-[500px] sm:max-w-full',\n  };\n\n  const currentComponent = PREVIEW_COMPONENTS[component] || PREVIEW_COMPONENTS['ClawAIOrb'];\n\n  return (\n    <div className=\"h-full flex flex-col bg-[#0d1117] rounded-lg overflow-hidden\">\n      {/* Preview toolbar - responsive layout */}\n      <div className=\"flex flex-wrap items-center justify-between gap-2 px-2 sm:px-3 py-2 bg-[#161b22] border-b border-white/5\">\n        <div className=\"flex items-center gap-2\">\n          <Eye className=\"w-4 h-4 text-blue-400\" />\n          <span className=\"text-xs text-white/60 hidden sm:inline\">Preview</span>\n        </div>\n\n        {/* Device switcher */}\n        <div className=\"flex items-center gap-1 px-1 py-0.5 bg-white/5 rounded-lg\">\n          {[\n            { id: 'mobile' as const, icon: Smartphone },\n            { id: 'tablet' as const, icon: Tablet },\n            { id: 'desktop' as const, icon: Monitor },\n          ].map(({ id, icon: Icon }) => (\n            <button\n              key={id}\n              onClick={() => onDeviceChange(id)}\n              className={`p-1 sm:p-1.5 rounded transition-colors ${\n                device === id ? 'bg-white/10 text-white' : 'text-white/40 hover:text-white/60'\n              }`}\n            >\n              <Icon className=\"w-3 h-3 sm:w-3.5 sm:h-3.5\" />\n            </button>\n          ))}\n        </div>\n\n        {/* Component selector */}\n        <div className=\"flex items-center gap-1 sm:gap-2\">\n          <select\n            value={component}\n            onChange={(e) => onComponentChange(e.target.value)}\n            className=\"px-1.5 sm:px-2 py-1 bg-white/5 border border-white/10 rounded text-[10px] sm:text-xs text-white/80 outline-none max-w-[100px] sm:max-w-none\"\n          >\n            {Object.entries(PREVIEW_COMPONENTS).map(([key, { name }]) => (\n              <option key={key} value={key} className=\"bg-[#161b22]\">\n                {name}\n              </option>\n            ))}\n          </select>\n          <button className=\"p-1 sm:p-1.5 rounded-lg hover:bg-white/10 text-white/40 transition-colors\">\n            <RefreshCw className=\"w-3 h-3 sm:w-3.5 sm:h-3.5\" />\n          </button>\n        </div>\n      </div>\n\n      {/* Preview area - responsive padding */}\n      <div className=\"flex-1 overflow-auto p-2 sm:p-4 bg-[#0a0a0a]\">\n        <div className=\"h-full flex items-center justify-center\">\n          <motion.div\n            layout\n            className={`${deviceSizes[device]} rounded-xl overflow-hidden border border-white/10 bg-black`}\n            style={{\n              boxShadow: '0 0 40px rgba(0,0,0,0.5)',\n            }}\n          >\n            {/* Device frame */}\n            {device !== 'desktop' && (\n              <div className=\"h-5 sm:h-6 bg-[#1a1a1a] flex items-center justify-center\">\n                <div className=\"w-12 sm:w-16 h-1 bg-white/10 rounded-full\" />\n              </div>\n            )}\n            <div className={`${device !== 'desktop' ? 'h-[calc(100%-20px)] sm:h-[calc(100%-24px)]' : 'h-full'}`}>\n              {currentComponent.preview}\n            </div>\n          </motion.div>\n        </div>\n      </div>\n\n      {/* Preview info bar - responsive */}\n      <div className=\"flex items-center justify-between px-2 sm:px-3 py-1 sm:py-1.5 bg-[#161b22] border-t border-white/5 text-[10px] sm:text-xs text-white/40\">\n        <div className=\"flex items-center gap-2 sm:gap-3\">\n          <span className=\"flex items-center gap-1\">\n            <Layers className=\"w-3 h-3\" />\n            <span className=\"hidden sm:inline\">{currentComponent.name}</span>\n          </span>\n          <span className=\"flex items-center gap-1\">\n            <MousePointer className=\"w-3 h-3\" />\n            <span className=\"hidden sm:inline\">Interactive</span>\n          </span>\n        </div>\n        <div className=\"flex items-center gap-1\">\n          <span className=\"w-2 h-2 bg-green-500 rounded-full\" />\n          <span className=\"hidden sm:inline\">Hot Reload</span>\n        </div>\n      </div>\n    </div>\n  );\n}\n\n// ============================================================================\n// Main Process Window Component\n// ============================================================================\n\nexport function ProcessWindow({ state, onStateChange, className = '' }: ProcessWindowProps) {\n  const [browserLoading, setBrowserLoading] = useState(false);\n  const tabScrollRef = useHorizontalScroll<HTMLDivElement>();\n\n  const tabs = [\n    { id: 'code' as const, label: 'Code', icon: Code2 },\n    { id: 'chat' as const, label: 'Claw AI', icon: Sparkles },\n    { id: 'terminal' as const, label: 'Terminal', icon: Terminal },\n    { id: 'browser' as const, label: 'Browser', icon: Globe },\n    { id: 'preview' as const, label: 'Preview', icon: Eye },\n    { id: 'skills' as const, label: 'Skills', icon: Zap },\n  ];\n\n  const handleTabChange = (tab: typeof state.activeTab) => {\n    onStateChange({ ...state, activeTab: tab });\n  };\n\n  const handleSendMessage = (message: string) => {\n    const newMessage: ChatMessage = {\n      id: Date.now().toString(),\n      role: 'user',\n      content: message,\n      timestamp: new Date(),\n    };\n\n    onStateChange({\n      ...state,\n      chatMessages: [...state.chatMessages, newMessage],\n      aiTyping: true,\n    });\n  };\n\n  const handleNavigate = (url: string) => {\n    setBrowserLoading(true);\n    setTimeout(() => {\n      const newHistory = [...state.browserHistory.slice(0, state.browserHistoryIndex + 1), url];\n      onStateChange({\n        ...state,\n        browserUrl: url,\n        browserHistory: newHistory,\n        browserHistoryIndex: newHistory.length - 1,\n      });\n      setBrowserLoading(false);\n    }, 500);\n  };\n\n  const handleBrowserBack = () => {\n    if (state.browserHistoryIndex > 0) {\n      const newIndex = state.browserHistoryIndex - 1;\n      onStateChange({\n        ...state,\n        browserUrl: state.browserHistory[newIndex],\n        browserHistoryIndex: newIndex,\n      });\n    }\n  };\n\n  const handleBrowserForward = () => {\n    if (state.browserHistoryIndex < state.browserHistory.length - 1) {\n      const newIndex = state.browserHistoryIndex + 1;\n      onStateChange({\n        ...state,\n        browserUrl: state.browserHistory[newIndex],\n        browserHistoryIndex: newIndex,\n      });\n    }\n  };\n\n  const handleBrowserRefresh = () => {\n    setBrowserLoading(true);\n    setTimeout(() => setBrowserLoading(false), 500);\n  };\n\n  const currentContent = state.files[state.currentFile] || '';\n\n  return (\n    <div className={`flex flex-col h-full ${className}`}>\n      {/* Tab bar - horizontally scrollable on mobile */}\n      <div\n        ref={tabScrollRef}\n        className=\"flex items-center gap-1 px-2 py-1.5 bg-[#161b22] border-b border-white/5 rounded-t-xl overflow-x-auto scrollbar-hide\"\n        style={{\n          scrollbarWidth: 'none',\n          msOverflowStyle: 'none',\n          WebkitOverflowScrolling: 'touch'\n        }}\n      >\n        <div className=\"flex items-center gap-1 flex-shrink-0\">\n          {tabs.map((tab) => {\n            const Icon = tab.icon;\n            const isActive = state.activeTab === tab.id;\n            return (\n              <button\n                key={tab.id}\n                onClick={() => handleTabChange(tab.id)}\n                className={`flex items-center gap-1 sm:gap-1.5 px-2 sm:px-2.5 py-1.5 rounded-lg text-xs font-medium transition-all whitespace-nowrap flex-shrink-0 ${\n                  isActive\n                    ? 'bg-white/10 text-white'\n                    : 'text-white/40 hover:text-white/70 hover:bg-white/5'\n                }`}\n              >\n                <Icon className={`w-3.5 h-3.5 ${\n                  isActive && tab.id === 'chat' ? 'text-orange-400' :\n                  isActive && tab.id === 'browser' ? 'text-blue-400' :\n                  isActive && tab.id === 'preview' ? 'text-purple-400' :\n                  isActive && tab.id === 'skills' ? 'text-yellow-400' : ''\n                }`} />\n                <span className=\"hidden xs:inline sm:inline\">{tab.label}</span>\n                {tab.id === 'chat' && state.aiTyping && (\n                  <span className=\"w-1.5 h-1.5 bg-orange-400 rounded-full animate-pulse\" />\n                )}\n              </button>\n            );\n          })}\n        </div>\n\n        {/* File selector for code tab - scrollable on mobile */}\n        {state.activeTab === 'code' && (\n          <div className=\"ml-auto flex items-center gap-1 flex-shrink-0 pl-2\">\n            {Object.keys(state.files).map((file) => (\n              <button\n                key={file}\n                onClick={() => onStateChange({ ...state, currentFile: file })}\n                className={`px-1.5 sm:px-2 py-1 rounded text-[10px] sm:text-xs transition-colors whitespace-nowrap flex-shrink-0 ${\n                  state.currentFile === file\n                    ? 'bg-blue-500/20 text-blue-400'\n                    : 'text-white/30 hover:text-white/60'\n                }`}\n              >\n                {file}\n              </button>\n            ))}\n          </div>\n        )}\n      </div>\n\n      {/* Content area */}\n      <div className=\"flex-1 min-h-0\">\n        <AnimatePresence mode=\"wait\">\n          {state.activeTab === 'code' && (\n            <motion.div\n              key=\"code\"\n              initial={{ opacity: 0 }}\n              animate={{ opacity: 1 }}\n              exit={{ opacity: 0 }}\n              className=\"h-full\"\n            >\n              <IDEView />\n            </motion.div>\n          )}\n\n          {state.activeTab === 'chat' && (\n            <motion.div\n              key=\"chat\"\n              initial={{ opacity: 0 }}\n              animate={{ opacity: 1 }}\n              exit={{ opacity: 0 }}\n              className=\"h-full\"\n            >\n              <ChatInterface\n                messages={state.chatMessages}\n                isTyping={state.aiTyping}\n                onSendMessage={handleSendMessage}\n              />\n            </motion.div>\n          )}\n\n          {state.activeTab === 'terminal' && (\n            <motion.div\n              key=\"terminal\"\n              initial={{ opacity: 0 }}\n              animate={{ opacity: 1 }}\n              exit={{ opacity: 0 }}\n              className=\"h-full\"\n            >\n              <TerminalView output={state.terminalOutput} />\n            </motion.div>\n          )}\n\n          {state.activeTab === 'browser' && (\n            <motion.div\n              key=\"browser\"\n              initial={{ opacity: 0 }}\n              animate={{ opacity: 1 }}\n              exit={{ opacity: 0 }}\n              className=\"h-full\"\n            >\n              <BrowserView\n                url={state.browserUrl}\n                onNavigate={handleNavigate}\n                onBack={handleBrowserBack}\n                onForward={handleBrowserForward}\n                onRefresh={handleBrowserRefresh}\n                canGoBack={state.browserHistoryIndex > 0}\n                canGoForward={state.browserHistoryIndex < state.browserHistory.length - 1}\n                isLoading={browserLoading}\n              />\n            </motion.div>\n          )}\n\n          {state.activeTab === 'preview' && (\n            <motion.div\n              key=\"preview\"\n              initial={{ opacity: 0 }}\n              animate={{ opacity: 1 }}\n              exit={{ opacity: 0 }}\n              className=\"h-full\"\n            >\n              <PreviewView\n                device={state.previewDevice}\n                component={state.previewComponent}\n                onDeviceChange={(device) => onStateChange({ ...state, previewDevice: device })}\n                onComponentChange={(component) => onStateChange({ ...state, previewComponent: component })}\n              />\n            </motion.div>\n          )}\n\n          {state.activeTab === 'skills' && (\n            <motion.div\n              key=\"skills\"\n              initial={{ opacity: 0 }}\n              animate={{ opacity: 1 }}\n              exit={{ opacity: 0 }}\n              className=\"h-full bg-[#0d1117] rounded-lg overflow-hidden\"\n            >\n              <SkillsPanel\n                onExecuteCommand={(skillId, command) => {\n                  // Add command to terminal and switch to terminal tab\n                  onStateChange({\n                    ...state,\n                    activeTab: 'terminal',\n                    terminalOutput: [...state.terminalOutput, '', `$ ${command}`, '> Executing...'],\n                    isProcessing: true,\n                  });\n                }}\n              />\n            </motion.div>\n          )}\n        </AnimatePresence>\n      </div>\n    </div>\n  );\n}\n\n// ============================================================================\n// Initial State Factory\n// ============================================================================\n\nexport function createInitialProcessState(): ProcessState {\n  return {\n    activeTab: 'chat',\n    currentFile: 'app.tsx',\n    files: SAMPLE_FILES,\n    chatMessages: [\n      {\n        id: '1',\n        role: 'assistant',\n        content: \"Hey! I'm Claw AI, your coding companion. I can help you build, refactor, and debug your code. What would you like to work on today?\",\n        timestamp: new Date(),\n      },\n    ],\n    terminalOutput: [\n      '$ npm run dev',\n      '',\n      '  â–² Next.js 14.0.0',\n      '  - Local:        http://localhost:3000',\n      '  - Ready in 1.2s',\n      '',\n      'âœ“ Compiled successfully',\n    ],\n    isProcessing: false,\n    currentTask: 'IDLE',\n    aiTyping: false,\n    browserUrl: 'https://localhost:3000',\n    browserHistory: ['https://localhost:3000'],\n    browserHistoryIndex: 0,\n    previewDevice: 'mobile',\n    previewComponent: 'ClawAIOrb',\n  };\n}\n\nexport default ProcessWindow;\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 7772, "column": 0}, "map": {"version":3,"sources":["file:///Users/jamesspalding/OpenClaw-OS/src/lib/sandbox/tools.ts"],"sourcesContent":["/**\n * AI SDK Tools for Vercel Sandbox\n *\n * These tools enable AI models to interact with the sandbox\n * for code execution, file operations, and preview management.\n *\n * NOTE: These tools should only be used in server-side contexts\n * (e.g., API routes, server components) where the AI SDK is available.\n */\n\nimport { tool } from 'ai';\nimport { z } from 'zod';\nimport type { SandboxManager } from './index';\n\n/**\n * Create sandbox tools bound to a specific manager instance\n */\nexport function createSandboxTools(manager: SandboxManager) {\n  return {\n    /**\n     * Create a new sandbox environment\n     */\n    createSandbox: tool({\n      description:\n        'Create a new sandbox environment for code execution. Call this first before running any commands or writing files.',\n      inputSchema: z.object({\n        timeout: z\n          .number()\n          .optional()\n          .describe('Timeout in milliseconds (default: 600000)'),\n        ports: z\n          .array(z.number())\n          .optional()\n          .describe('Ports to expose (default: [3000])'),\n      }),\n      execute: async ({ timeout, ports }) => {\n        try {\n          const sandboxId = await manager.create({ timeout, ports });\n          return {\n            success: true,\n            sandboxId,\n            message: `Sandbox created with ID: ${sandboxId}`,\n          };\n        } catch (error) {\n          return {\n            success: false,\n            error: error instanceof Error ? error.message : 'Failed to create sandbox',\n          };\n        }\n      },\n    }),\n\n    /**\n     * Run a command in the sandbox\n     */\n    runCommand: tool({\n      description:\n        'Run a shell command in the sandbox. Use this for npm install, build commands, running scripts, etc.',\n      inputSchema: z.object({\n        command: z.string().describe('The command to run (e.g., \"npm\", \"node\", \"ls\")'),\n        args: z\n          .array(z.string())\n          .optional()\n          .describe('Arguments for the command'),\n        wait: z\n          .boolean()\n          .optional()\n          .describe('Wait for the command to complete (default: true)'),\n      }),\n      execute: async ({ command, args, wait = true }) => {\n        try {\n          const result = await manager.runCommand({ command, args, wait });\n          return {\n            success: true,\n            status: result.status,\n            exitCode: result.exitCode,\n            stdout: result.stdout,\n            stderr: result.stderr,\n          };\n        } catch (error) {\n          return {\n            success: false,\n            error: error instanceof Error ? error.message : 'Failed to run command',\n          };\n        }\n      },\n    }),\n\n    /**\n     * Write a file to the sandbox\n     */\n    writeFile: tool({\n      description:\n        'Write content to a file in the sandbox. Creates the file if it does not exist.',\n      inputSchema: z.object({\n        path: z.string().describe('The file path (e.g., \"src/app/page.tsx\")'),\n        content: z.string().describe('The content to write to the file'),\n      }),\n      execute: async ({ path, content }) => {\n        try {\n          await manager.writeFile({ path, content });\n          return {\n            success: true,\n            message: `File written: ${path}`,\n          };\n        } catch (error) {\n          return {\n            success: false,\n            error: error instanceof Error ? error.message : 'Failed to write file',\n          };\n        }\n      },\n    }),\n\n    /**\n     * Write multiple files to the sandbox\n     */\n    writeFiles: tool({\n      description:\n        'Write multiple files to the sandbox at once. More efficient than writing files one by one.',\n      inputSchema: z.object({\n        files: z\n          .array(\n            z.object({\n              path: z.string().describe('The file path'),\n              content: z.string().describe('The file content'),\n            })\n          )\n          .describe('Array of files to write'),\n      }),\n      execute: async ({ files }) => {\n        try {\n          await manager.writeFiles(files);\n          return {\n            success: true,\n            message: `${files.length} files written successfully`,\n            paths: files.map((f) => f.path),\n          };\n        } catch (error) {\n          return {\n            success: false,\n            error: error instanceof Error ? error.message : 'Failed to write files',\n          };\n        }\n      },\n    }),\n\n    /**\n     * Read a file from the sandbox\n     */\n    readFile: tool({\n      description: 'Read the contents of a file from the sandbox.',\n      inputSchema: z.object({\n        path: z.string().describe('The file path to read'),\n      }),\n      execute: async ({ path }) => {\n        try {\n          const content = await manager.readFile(path);\n          return {\n            success: true,\n            path,\n            content,\n          };\n        } catch (error) {\n          return {\n            success: false,\n            error: error instanceof Error ? error.message : 'Failed to read file',\n          };\n        }\n      },\n    }),\n\n    /**\n     * List files in a directory\n     */\n    listFiles: tool({\n      description: 'List files and directories in the sandbox.',\n      inputSchema: z.object({\n        path: z\n          .string()\n          .optional()\n          .describe('Directory path to list (default: /vercel/sandbox)'),\n      }),\n      execute: async ({ path }) => {\n        try {\n          await manager.listFiles(path);\n          const state = manager.getState();\n          return {\n            success: true,\n            path: path || '/vercel/sandbox',\n            files: state.files,\n          };\n        } catch (error) {\n          return {\n            success: false,\n            error: error instanceof Error ? error.message : 'Failed to list files',\n          };\n        }\n      },\n    }),\n\n    /**\n     * Get the preview URL for the sandbox\n     */\n    getPreviewUrl: tool({\n      description:\n        'Get the preview URL for viewing the running application in the sandbox.',\n      inputSchema: z.object({\n        port: z\n          .number()\n          .optional()\n          .describe('The port to get the preview URL for (default: 3000)'),\n      }),\n      execute: async ({ port }) => {\n        try {\n          const url = await manager.getPreviewUrl(port);\n          return {\n            success: true,\n            url,\n            port: port || 3000,\n          };\n        } catch (error) {\n          return {\n            success: false,\n            error: error instanceof Error ? error.message : 'Failed to get preview URL',\n          };\n        }\n      },\n    }),\n\n    /**\n     * Terminate the sandbox\n     */\n    terminateSandbox: tool({\n      description: 'Terminate the sandbox and clean up resources.',\n      inputSchema: z.object({}),\n      execute: async () => {\n        try {\n          await manager.terminate();\n          return {\n            success: true,\n            message: 'Sandbox terminated',\n          };\n        } catch (error) {\n          return {\n            success: false,\n            error: error instanceof Error ? error.message : 'Failed to terminate sandbox',\n          };\n        }\n      },\n    }),\n  };\n}\n\n/**\n * Type for all sandbox tools\n */\nexport type SandboxTools = ReturnType<typeof createSandboxTools>;\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 7999, "column": 0}, "map": {"version":3,"sources":["file:///Users/jamesspalding/OpenClaw-OS/src/lib/sandbox/index.ts"],"sourcesContent":["/**\n * Vercel Sandbox Integration for OpenClaw-OS Prototyping\n *\n * This provides real code execution capabilities using Vercel's cloud sandbox infrastructure.\n * The sandbox runs in a secure cloud container with full Node.js environment.\n *\n * NOTE: All sandbox operations are performed via API routes since @vercel/sandbox\n * is a server-only package that cannot be bundled for the browser.\n */\n\n// ============================================================================\n// Types\n// ============================================================================\n\n// File info returned by sandbox listFiles\nexport interface FileInfo {\n  path: string;\n  type: 'file' | 'directory';\n  size?: number;\n}\n\nexport interface SandboxState {\n  sandboxId: string | null;\n  status: 'idle' | 'creating' | 'ready' | 'error' | 'terminated';\n  previewUrl: string | null;\n  files: FileInfo[];\n  activeCommands: Map<string, CommandState>;\n  error: string | null;\n  createdAt: number | null;\n  timeout: number;\n}\n\nexport interface CommandState {\n  cmdId: string;\n  command: string;\n  args: string[];\n  status: 'running' | 'completed' | 'error';\n  exitCode?: number;\n  stdout?: string;\n  stderr?: string;\n  startedAt: number;\n}\n\nexport interface CreateSandboxOptions {\n  timeout?: number; // ms, default 600000 (10 min)\n  ports?: number[]; // ports to expose, e.g. [3000]\n}\n\nexport interface RunCommandOptions {\n  command: string;\n  args?: string[];\n  sudo?: boolean;\n  wait?: boolean; // wait for completion\n  cwd?: string;\n}\n\nexport interface WriteFileOptions {\n  path: string;\n  content: string;\n}\n\n// ============================================================================\n// Initial State\n// ============================================================================\n\nexport function createInitialSandboxState(): SandboxState {\n  return {\n    sandboxId: null,\n    status: 'idle',\n    previewUrl: null,\n    files: [],\n    activeCommands: new Map(),\n    error: null,\n    createdAt: null,\n    timeout: 600000,\n  };\n}\n\n// ============================================================================\n// API Client Helper\n// ============================================================================\n\nasync function callSandboxApi(action: string, params: Record<string, unknown> = {}) {\n  // Clone operations can take a while - use longer timeout\n  const timeout = action === 'cloneRepo' ? 120000 : 30000; // 2 min for clone, 30s for others\n  const controller = new AbortController();\n  const timeoutId = setTimeout(() => controller.abort(), timeout);\n\n  try {\n    console.log(`[SandboxAPI] ${action}`, params);\n    const response = await fetch('/api/sandbox', {\n      method: 'POST',\n      headers: {\n        'Content-Type': 'application/json',\n      },\n      body: JSON.stringify({ action, ...params }),\n      signal: controller.signal,\n    });\n\n    clearTimeout(timeoutId);\n\n    const data = await response.json();\n    console.log(`[SandboxAPI] ${action} response:`, data);\n\n    if (!data.success) {\n      throw new Error(data.error || 'Sandbox API error');\n    }\n    return data;\n  } catch (error) {\n    clearTimeout(timeoutId);\n    if (error instanceof Error && error.name === 'AbortError') {\n      throw new Error(`${action} timed out after ${timeout / 1000}s`);\n    }\n    throw error;\n  }\n}\n\n// ============================================================================\n// Sandbox Manager Class\n// ============================================================================\n\nexport class SandboxManager {\n  private sandboxId: string | null = null;\n  private state: SandboxState = createInitialSandboxState();\n  private listeners: Set<(state: SandboxState) => void> = new Set();\n\n  /**\n   * Subscribe to state changes\n   */\n  subscribe(listener: (state: SandboxState) => void): () => void {\n    this.listeners.add(listener);\n    return () => this.listeners.delete(listener);\n  }\n\n  /**\n   * Get current state\n   */\n  getState(): SandboxState {\n    return { ...this.state };\n  }\n\n  /**\n   * Update state and notify listeners\n   */\n  private setState(updates: Partial<SandboxState>) {\n    this.state = { ...this.state, ...updates };\n    this.listeners.forEach((listener) => listener(this.state));\n  }\n\n  /**\n   * Create a new sandbox\n   */\n  async create(options: CreateSandboxOptions = {}): Promise<string> {\n    if (this.state.status === 'creating') {\n      throw new Error('Sandbox creation already in progress');\n    }\n\n    this.setState({ status: 'creating', error: null });\n\n    try {\n      const result = await callSandboxApi('create', {\n        timeout: options.timeout ?? 600000,\n        ports: options.ports ?? [3000],\n      });\n\n      this.sandboxId = result.sandboxId;\n      this.setState({\n        sandboxId: result.sandboxId,\n        status: 'ready',\n        createdAt: Date.now(),\n        timeout: options.timeout ?? 600000,\n      });\n\n      return result.sandboxId;\n    } catch (error) {\n      const message = error instanceof Error ? error.message : 'Unknown error';\n      this.setState({ status: 'error', error: message });\n      throw error;\n    }\n  }\n\n  /**\n   * Connect to existing sandbox\n   */\n  async connect(sandboxId: string): Promise<void> {\n    this.setState({ status: 'creating', error: null });\n\n    try {\n      await callSandboxApi('connect', { sandboxId });\n      this.sandboxId = sandboxId;\n      this.setState({\n        sandboxId,\n        status: 'ready',\n      });\n    } catch (error) {\n      const message = error instanceof Error ? error.message : 'Unknown error';\n      this.setState({ status: 'error', error: message });\n      throw error;\n    }\n  }\n\n  /**\n   * Run a command in the sandbox\n   */\n  async runCommand(options: RunCommandOptions): Promise<CommandState> {\n    if (!this.sandboxId) {\n      throw new Error('No sandbox connected');\n    }\n\n    const cmdState: CommandState = {\n      cmdId: `cmd_${Date.now()}`,\n      command: options.command,\n      args: options.args || [],\n      status: 'running',\n      startedAt: Date.now(),\n    };\n\n    // Add to active commands\n    const newCommands = new Map(this.state.activeCommands);\n    newCommands.set(cmdState.cmdId, cmdState);\n    this.setState({ activeCommands: newCommands });\n\n    try {\n      const result = await callSandboxApi('runCommand', {\n        sandboxId: this.sandboxId,\n        command: options.command,\n        args: options.args,\n        sudo: options.sudo,\n        wait: options.wait ?? true,\n      });\n\n      cmdState.cmdId = result.cmdId;\n      cmdState.status = result.status;\n      cmdState.exitCode = result.exitCode;\n      cmdState.stdout = result.stdout;\n      cmdState.stderr = result.stderr;\n\n      // Update command state\n      const updatedCommands = new Map(this.state.activeCommands);\n      updatedCommands.set(cmdState.cmdId, cmdState);\n      this.setState({ activeCommands: updatedCommands });\n\n      return cmdState;\n    } catch (error) {\n      cmdState.status = 'error';\n      cmdState.stderr = error instanceof Error ? error.message : 'Unknown error';\n\n      const updatedCommands = new Map(this.state.activeCommands);\n      updatedCommands.set(cmdState.cmdId, cmdState);\n      this.setState({ activeCommands: updatedCommands });\n\n      throw error;\n    }\n  }\n\n  /**\n   * Write a file to the sandbox\n   */\n  async writeFile(options: WriteFileOptions): Promise<void> {\n    if (!this.sandboxId) {\n      throw new Error('No sandbox connected');\n    }\n\n    await callSandboxApi('writeFile', {\n      sandboxId: this.sandboxId,\n      path: options.path,\n      content: options.content,\n    });\n\n    // Refresh file list\n    await this.listFiles();\n  }\n\n  /**\n   * Write multiple files to the sandbox\n   */\n  async writeFiles(files: WriteFileOptions[]): Promise<void> {\n    if (!this.sandboxId) {\n      throw new Error('No sandbox connected');\n    }\n\n    await callSandboxApi('writeFiles', {\n      sandboxId: this.sandboxId,\n      files,\n    });\n\n    // Refresh file list\n    await this.listFiles();\n  }\n\n  /**\n   * Read a file from the sandbox\n   */\n  async readFile(path: string): Promise<string> {\n    if (!this.sandboxId) {\n      throw new Error('No sandbox connected');\n    }\n\n    const result = await callSandboxApi('readFile', {\n      sandboxId: this.sandboxId,\n      path,\n    });\n\n    return result.content;\n  }\n\n  /**\n   * List files in the sandbox\n   */\n  async listFiles(path: string = '.'): Promise<FileInfo[]> {\n    if (!this.sandboxId) {\n      throw new Error('No sandbox connected');\n    }\n\n    try {\n      console.log('[listFiles] Listing files in:', path);\n      const result = await callSandboxApi('listFiles', {\n        sandboxId: this.sandboxId,\n        path,\n      });\n\n      const files: FileInfo[] = result.files;\n      console.log('[listFiles] Got files:', files.length, files.map(f => f.path).slice(0, 5));\n      this.setState({ files });\n      return files;\n    } catch (error) {\n      console.error('[listFiles] Error:', error);\n      // Return empty array if listing fails\n      const files: FileInfo[] = [];\n      this.setState({ files });\n      return files;\n    }\n  }\n\n  /**\n   * Get the preview URL for the sandbox\n   */\n  async getPreviewUrl(port: number = 3000): Promise<string> {\n    if (!this.sandboxId) {\n      throw new Error('No sandbox connected');\n    }\n\n    const result = await callSandboxApi('getPreviewUrl', {\n      sandboxId: this.sandboxId,\n      port,\n    });\n\n    this.setState({ previewUrl: result.url });\n    return result.url;\n  }\n\n  /**\n   * Clone a repository using GitHub authentication from Clerk\n   * This allows cloning private repos the user has access to\n   */\n  async cloneRepo(repoUrl: string): Promise<{ success: boolean; projectDir?: string; error?: string }> {\n    if (!this.sandboxId) {\n      throw new Error('No sandbox connected');\n    }\n\n    const result = await callSandboxApi('cloneRepo', {\n      sandboxId: this.sandboxId,\n      repoUrl,\n    });\n\n    // Refresh file list to show cloned repo\n    await this.listFiles('/workspace/project');\n\n    return {\n      success: result.success,\n      projectDir: result.projectDir,\n      error: result.error,\n    };\n  }\n\n  /**\n   * Terminate the sandbox\n   */\n  async terminate(): Promise<void> {\n    if (this.sandboxId) {\n      await callSandboxApi('terminate', { sandboxId: this.sandboxId });\n      this.sandboxId = null;\n    }\n\n    this.setState({\n      sandboxId: null,\n      status: 'terminated',\n      previewUrl: null,\n      files: [],\n      activeCommands: new Map(),\n    });\n  }\n\n  /**\n   * Check if sandbox is connected\n   */\n  isConnected(): boolean {\n    return this.sandboxId !== null && this.state.status === 'ready';\n  }\n}\n\n// ============================================================================\n// Singleton Instance\n// ============================================================================\n\nlet sandboxManager: SandboxManager | null = null;\n\nexport function getSandboxManager(): SandboxManager {\n  if (!sandboxManager) {\n    sandboxManager = new SandboxManager();\n  }\n  return sandboxManager;\n}\n\n// ============================================================================\n// Exports\n// ============================================================================\n\n// Export tools\nexport { createSandboxTools, type SandboxTools } from './tools';\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 8349, "column": 0}, "map": {"version":3,"sources":["file:///Users/jamesspalding/OpenClaw-OS/src/contexts/SandboxContext.tsx"],"sourcesContent":["'use client';\n\nimport React, { createContext, useContext, useEffect, useState, useCallback } from 'react';\nimport type { SandboxState, CommandState } from '@/lib/sandbox';\nimport { createInitialSandboxState } from '@/lib/sandbox';\n\n// ============================================================================\n// Types\n// ============================================================================\n\ninterface SandboxContextValue {\n  // State\n  state: SandboxState;\n  isConnected: boolean;\n  isCreating: boolean;\n  error: string | null;\n\n  // Actions\n  create: (options?: { timeout?: number; ports?: number[] }) => Promise<string | null>;\n  connect: (sandboxId: string) => Promise<void>;\n  terminate: () => Promise<void>;\n\n  // File operations\n  writeFile: (path: string, content: string) => Promise<void>;\n  writeFiles: (files: { path: string; content: string }[]) => Promise<void>;\n  readFile: (path: string) => Promise<string>;\n  listFiles: (path?: string) => Promise<void>;\n\n  // Command execution\n  runCommand: (\n    command: string,\n    args?: string[],\n    options?: { wait?: boolean; sudo?: boolean }\n  ) => Promise<CommandState>;\n  runAndWait: (command: string, args?: string[]) => Promise<CommandState>;\n\n  // Preview\n  getPreviewUrl: (port?: number) => Promise<string>;\n\n  // Repository operations (with GitHub auth from Clerk)\n  cloneRepo: (repoUrl: string) => Promise<{ success: boolean; projectDir?: string; error?: string }>;\n\n  // Logs\n  logs: LogEntry[];\n  clearLogs: () => void;\n}\n\nexport interface LogEntry {\n  id: string;\n  timestamp: number;\n  type: 'command' | 'output' | 'error' | 'system';\n  message: string;\n  details?: string;\n}\n\n// ============================================================================\n// Context\n// ============================================================================\n\nconst SandboxContext = createContext<SandboxContextValue | null>(null);\n\n// ============================================================================\n// Provider\n// ============================================================================\n\nexport function SandboxProvider({ children }: { children: React.ReactNode }) {\n  const [state, setState] = useState<SandboxState>(createInitialSandboxState());\n  const [logs, setLogs] = useState<LogEntry[]>([]);\n  const [manager, setManager] = useState<import('@/lib/sandbox').SandboxManager | null>(\n    null\n  );\n\n  // Initialize manager on mount\n  useEffect(() => {\n    let mounted = true;\n\n    const initManager = async () => {\n      const { getSandboxManager } = await import('@/lib/sandbox');\n      if (!mounted) return;\n\n      const mgr = getSandboxManager();\n      setManager(mgr);\n\n      // Subscribe to state changes\n      const unsubscribe = mgr.subscribe((newState) => {\n        if (mounted) {\n          setState(newState);\n        }\n      });\n\n      // Set initial state\n      setState(mgr.getState());\n\n      return unsubscribe;\n    };\n\n    const unsubscribePromise = initManager();\n\n    return () => {\n      mounted = false;\n      unsubscribePromise.then((unsub) => unsub?.());\n    };\n  }, []);\n\n  // Helper to add log entry\n  const addLog = useCallback(\n    (type: LogEntry['type'], message: string, details?: string) => {\n      setLogs((prev) => [\n        ...prev,\n        {\n          id: `log_${Date.now()}_${Math.random().toString(36).slice(2)}`,\n          timestamp: Date.now(),\n          type,\n          message,\n          details,\n        },\n      ]);\n    },\n    []\n  );\n\n  // Clear logs\n  const clearLogs = useCallback(() => {\n    setLogs([]);\n  }, []);\n\n  // Create sandbox\n  const create = useCallback(\n    async (options?: { timeout?: number; ports?: number[] }) => {\n      if (!manager) throw new Error('Manager not initialized');\n\n      addLog('system', 'Creating sandbox...');\n      try {\n        const sandboxId = await manager.create(options);\n        addLog('system', `Sandbox created: ${sandboxId}`);\n        return sandboxId;\n      } catch (error) {\n        // Don't re-throw - error is captured in manager.error state\n        // This allows the UI to show auth modal instead of crashing\n        addLog('error', 'Failed to create sandbox', String(error));\n        return null;\n      }\n    },\n    [manager, addLog]\n  );\n\n  // Connect to existing sandbox\n  const connect = useCallback(\n    async (sandboxId: string) => {\n      if (!manager) throw new Error('Manager not initialized');\n\n      addLog('system', `Connecting to sandbox: ${sandboxId}`);\n      try {\n        await manager.connect(sandboxId);\n        addLog('system', 'Connected to sandbox');\n      } catch (error) {\n        addLog('error', 'Failed to connect', String(error));\n        throw error;\n      }\n    },\n    [manager, addLog]\n  );\n\n  // Terminate sandbox\n  const terminate = useCallback(async () => {\n    if (!manager) throw new Error('Manager not initialized');\n\n    addLog('system', 'Terminating sandbox...');\n    try {\n      await manager.terminate();\n      addLog('system', 'Sandbox terminated');\n    } catch (error) {\n      addLog('error', 'Failed to terminate', String(error));\n      throw error;\n    }\n  }, [manager, addLog]);\n\n  // Write file\n  const writeFile = useCallback(\n    async (path: string, content: string) => {\n      if (!manager) throw new Error('Manager not initialized');\n\n      addLog('command', `Writing file: ${path}`);\n      try {\n        await manager.writeFile({ path, content });\n        addLog('output', `File written: ${path}`);\n      } catch (error) {\n        addLog('error', `Failed to write file: ${path}`, String(error));\n        throw error;\n      }\n    },\n    [manager, addLog]\n  );\n\n  // Write multiple files\n  const writeFiles = useCallback(\n    async (files: { path: string; content: string }[]) => {\n      if (!manager) throw new Error('Manager not initialized');\n\n      addLog('command', `Writing ${files.length} files...`);\n      try {\n        await manager.writeFiles(files);\n        addLog('output', `${files.length} files written`);\n      } catch (error) {\n        addLog('error', 'Failed to write files', String(error));\n        throw error;\n      }\n    },\n    [manager, addLog]\n  );\n\n  // Read file\n  const readFile = useCallback(\n    async (path: string) => {\n      if (!manager) throw new Error('Manager not initialized');\n      return manager.readFile(path);\n    },\n    [manager]\n  );\n\n  // List files\n  const listFiles = useCallback(\n    async (path?: string) => {\n      if (!manager) throw new Error('Manager not initialized');\n      await manager.listFiles(path);\n    },\n    [manager]\n  );\n\n  // Run command\n  const runCommand = useCallback(\n    async (\n      command: string,\n      args?: string[],\n      options?: { wait?: boolean; sudo?: boolean }\n    ) => {\n      if (!manager) throw new Error('Manager not initialized');\n\n      const cmdStr = args ? `${command} ${args.join(' ')}` : command;\n      addLog('command', `$ ${cmdStr}`);\n\n      try {\n        const result = await manager.runCommand({\n          command,\n          args,\n          wait: options?.wait ?? true,\n          sudo: options?.sudo,\n        });\n\n        if (result.stdout) {\n          addLog('output', result.stdout);\n        }\n        if (result.stderr) {\n          addLog('error', result.stderr);\n        }\n        if (result.exitCode !== undefined && result.exitCode !== 0) {\n          addLog('error', `Exit code: ${result.exitCode}`);\n        }\n\n        return result;\n      } catch (error) {\n        addLog('error', `Command failed: ${cmdStr}`, String(error));\n        throw error;\n      }\n    },\n    [manager, addLog]\n  );\n\n  // Run command and wait\n  const runAndWait = useCallback(\n    async (command: string, args?: string[]) => {\n      return runCommand(command, args, { wait: true });\n    },\n    [runCommand]\n  );\n\n  // Get preview URL\n  const getPreviewUrl = useCallback(\n    async (port?: number) => {\n      if (!manager) throw new Error('Manager not initialized');\n\n      try {\n        const url = await manager.getPreviewUrl(port);\n        addLog('system', `Preview URL: ${url}`);\n        return url;\n      } catch (error) {\n        addLog('error', 'Failed to get preview URL', String(error));\n        throw error;\n      }\n    },\n    [manager, addLog]\n  );\n\n  // Clone repository with GitHub auth from Clerk\n  const cloneRepo = useCallback(\n    async (repoUrl: string) => {\n      if (!manager) throw new Error('Manager not initialized');\n\n      addLog('command', `git clone ${repoUrl}`);\n      try {\n        const result = await manager.cloneRepo(repoUrl);\n        if (result.success) {\n          addLog('system', `Repository cloned to ${result.projectDir}`);\n        } else {\n          addLog('error', result.error || 'Failed to clone repository');\n        }\n        return result;\n      } catch (error) {\n        addLog('error', 'Failed to clone repository', String(error));\n        throw error;\n      }\n    },\n    [manager, addLog]\n  );\n\n  const value: SandboxContextValue = {\n    state,\n    isConnected: state.status === 'ready',\n    isCreating: state.status === 'creating',\n    error: state.error,\n\n    create,\n    connect,\n    terminate,\n\n    writeFile,\n    writeFiles,\n    readFile,\n    listFiles,\n\n    runCommand,\n    runAndWait,\n\n    getPreviewUrl,\n    cloneRepo,\n\n    logs,\n    clearLogs,\n  };\n\n  return <SandboxContext.Provider value={value}>{children}</SandboxContext.Provider>;\n}\n\n// ============================================================================\n// Hook\n// ============================================================================\n\nexport function useSandboxContext(): SandboxContextValue {\n  const context = useContext(SandboxContext);\n  if (!context) {\n    throw new Error('useSandboxContext must be used within a SandboxProvider');\n  }\n  return context;\n}\n\nexport default SandboxContext;\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 8670, "column": 0}, "map": {"version":3,"sources":["file:///Users/jamesspalding/OpenClaw-OS/src/components/prototyping/SandboxFileExplorer.tsx"],"sourcesContent":["'use client';\n\nimport React, { useState, useCallback } from 'react';\nimport {\n  Folder,\n  File,\n  ChevronRight,\n  ChevronDown,\n  RefreshCw,\n  FileCode,\n  FileJson,\n  FileText,\n  Image,\n} from 'lucide-react';\n// ============================================================================\n// Types\n// ============================================================================\n\n// File info returned by sandbox listFiles\ninterface FileInfo {\n  path: string;\n  type: 'file' | 'directory';\n  size?: number;\n}\n\ninterface SandboxFileExplorerProps {\n  files: FileInfo[];\n  onFileSelect?: (path: string) => void;\n  onRefresh?: () => void;\n  selectedFile?: string;\n  isLoading?: boolean;\n}\n\ninterface FileTreeNode {\n  name: string;\n  path: string;\n  type: 'file' | 'directory';\n  children?: FileTreeNode[];\n}\n\n// Internal working type for building tree\ninterface WorkingTreeNode {\n  name: string;\n  path: string;\n  type: 'file' | 'directory';\n  children?: { [key: string]: WorkingTreeNode };\n}\n\n// ============================================================================\n// Helpers\n// ============================================================================\n\nfunction buildFileTree(files: FileInfo[]): FileTreeNode[] {\n  const root: { [key: string]: WorkingTreeNode } = {};\n\n  for (const file of files) {\n    const parts = file.path.split('/').filter(Boolean);\n    let current = root;\n\n    for (let i = 0; i < parts.length; i++) {\n      const part = parts[i];\n      const isLast = i === parts.length - 1;\n      const currentPath = '/' + parts.slice(0, i + 1).join('/');\n\n      if (!current[part]) {\n        current[part] = {\n          name: part,\n          path: currentPath,\n          type: isLast ? (file.type === 'directory' ? 'directory' : 'file') : 'directory',\n          children: isLast && file.type !== 'directory' ? undefined : {},\n        };\n      }\n\n      const children = current[part].children;\n      if (!isLast && children) {\n        current = children;\n      }\n    }\n  }\n\n  // Convert object tree to array tree\n  function objectToArray(obj: { [key: string]: WorkingTreeNode }): FileTreeNode[] {\n    return Object.values(obj)\n      .map((node) => ({\n        name: node.name,\n        path: node.path,\n        type: node.type,\n        children: node.children ? objectToArray(node.children) : undefined,\n      }))\n      .sort((a, b) => {\n        // Directories first, then alphabetical\n        if (a.type !== b.type) {\n          return a.type === 'directory' ? -1 : 1;\n        }\n        return a.name.localeCompare(b.name);\n      });\n  }\n\n  return objectToArray(root);\n}\n\nfunction getFileIcon(filename: string) {\n  const ext = filename.split('.').pop()?.toLowerCase();\n\n  switch (ext) {\n    case 'ts':\n    case 'tsx':\n    case 'js':\n    case 'jsx':\n      return <FileCode className=\"w-4 h-4 text-blue-400\" />;\n    case 'json':\n      return <FileJson className=\"w-4 h-4 text-yellow-400\" />;\n    case 'md':\n    case 'txt':\n      return <FileText className=\"w-4 h-4 text-gray-400\" />;\n    case 'png':\n    case 'jpg':\n    case 'jpeg':\n    case 'gif':\n    case 'svg':\n      return <Image className=\"w-4 h-4 text-green-400\" />;\n    default:\n      return <File className=\"w-4 h-4 text-gray-400\" />;\n  }\n}\n\n// ============================================================================\n// File Tree Item Component\n// ============================================================================\n\nfunction FileTreeItem({\n  node,\n  depth = 0,\n  selectedFile,\n  onFileSelect,\n}: {\n  node: FileTreeNode;\n  depth?: number;\n  selectedFile?: string;\n  onFileSelect?: (path: string) => void;\n}) {\n  const [isExpanded, setIsExpanded] = useState(depth < 2);\n  const isSelected = selectedFile === node.path;\n\n  const handleClick = useCallback(() => {\n    if (node.type === 'directory') {\n      setIsExpanded((prev) => !prev);\n    } else {\n      onFileSelect?.(node.path);\n    }\n  }, [node, onFileSelect]);\n\n  return (\n    <div>\n      <button\n        onClick={handleClick}\n        className={`\n          w-full flex items-center gap-1 px-2 py-1 text-sm text-left\n          hover:bg-white/5 rounded transition-colors\n          ${isSelected ? 'bg-white/10 text-white' : 'text-white/70'}\n        `}\n        style={{ paddingLeft: `${depth * 12 + 8}px` }}\n      >\n        {node.type === 'directory' ? (\n          <>\n            {isExpanded ? (\n              <ChevronDown className=\"w-4 h-4 text-white/50\" />\n            ) : (\n              <ChevronRight className=\"w-4 h-4 text-white/50\" />\n            )}\n            <Folder\n              className={`w-4 h-4 ${isExpanded ? 'text-yellow-400' : 'text-yellow-600'}`}\n            />\n          </>\n        ) : (\n          <>\n            <span className=\"w-4\" />\n            {getFileIcon(node.name)}\n          </>\n        )}\n        <span className=\"truncate\">{node.name}</span>\n      </button>\n\n      {node.type === 'directory' && isExpanded && node.children && (\n        <div>\n          {node.children.map((child) => (\n            <FileTreeItem\n              key={child.path}\n              node={child}\n              depth={depth + 1}\n              selectedFile={selectedFile}\n              onFileSelect={onFileSelect}\n            />\n          ))}\n        </div>\n      )}\n    </div>\n  );\n}\n\n// ============================================================================\n// Main Component\n// ============================================================================\n\nexport function SandboxFileExplorer({\n  files,\n  onFileSelect,\n  onRefresh,\n  selectedFile,\n  isLoading,\n}: SandboxFileExplorerProps) {\n  const tree = buildFileTree(files);\n\n  return (\n    <div className=\"h-full flex flex-col bg-black/20 rounded-lg border border-white/10\">\n      {/* Header */}\n      <div className=\"flex items-center justify-between px-3 py-2 border-b border-white/10\">\n        <span className=\"text-xs font-medium text-white/50 uppercase tracking-wider\">\n          Files\n        </span>\n        {onRefresh && (\n          <button\n            onClick={onRefresh}\n            disabled={isLoading}\n            className=\"p-1 hover:bg-white/10 rounded transition-colors disabled:opacity-50\"\n          >\n            <RefreshCw className={`w-3.5 h-3.5 text-white/50 ${isLoading ? 'animate-spin' : ''}`} />\n          </button>\n        )}\n      </div>\n\n      {/* File Tree */}\n      <div className=\"flex-1 overflow-auto py-1\">\n        {tree.length === 0 ? (\n          <div className=\"px-3 py-4 text-center text-white/30 text-sm\">\n            No files yet\n          </div>\n        ) : (\n          tree.map((node) => (\n            <FileTreeItem\n              key={node.path}\n              node={node}\n              selectedFile={selectedFile}\n              onFileSelect={onFileSelect}\n            />\n          ))\n        )}\n      </div>\n    </div>\n  );\n}\n\nexport default SandboxFileExplorer;\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 8976, "column": 0}, "map": {"version":3,"sources":["file:///Users/jamesspalding/OpenClaw-OS/src/components/prototyping/SandboxPreview.tsx"],"sourcesContent":["'use client';\n\nimport React, { useState, useCallback } from 'react';\nimport {\n  RefreshCw,\n  ExternalLink,\n  Smartphone,\n  Tablet,\n  Monitor,\n  Loader2,\n} from 'lucide-react';\n\n// ============================================================================\n// Types\n// ============================================================================\n\ninterface SandboxPreviewProps {\n  url: string | null;\n  isLoading?: boolean;\n  onRefresh?: () => void;\n}\n\ntype DeviceSize = 'mobile' | 'tablet' | 'desktop';\n\nconst DEVICE_SIZES: Record<DeviceSize, { width: string; label: string; icon: React.ReactNode }> = {\n  mobile: { width: '375px', label: 'Mobile', icon: <Smartphone className=\"w-4 h-4\" /> },\n  tablet: { width: '768px', label: 'Tablet', icon: <Tablet className=\"w-4 h-4\" /> },\n  desktop: { width: '100%', label: 'Desktop', icon: <Monitor className=\"w-4 h-4\" /> },\n};\n\n// ============================================================================\n// Main Component\n// ============================================================================\n\nexport function SandboxPreview({\n  url,\n  isLoading,\n  onRefresh,\n}: SandboxPreviewProps) {\n  const [deviceSize, setDeviceSize] = useState<DeviceSize>('desktop');\n  const [iframeKey, setIframeKey] = useState(0);\n\n  const handleRefresh = useCallback(() => {\n    setIframeKey((prev) => prev + 1);\n    onRefresh?.();\n  }, [onRefresh]);\n\n  const handleOpenExternal = useCallback(() => {\n    if (url) {\n      window.open(url, '_blank', 'noopener,noreferrer');\n    }\n  }, [url]);\n\n  return (\n    <div className=\"h-full flex flex-col bg-black/20 rounded-lg border border-white/10 overflow-hidden\">\n      {/* Header */}\n      <div className=\"flex items-center justify-between px-3 py-2 border-b border-white/10\">\n        <div className=\"flex items-center gap-2\">\n          <span className=\"text-xs font-medium text-white/50 uppercase tracking-wider\">\n            Preview\n          </span>\n          {url && (\n            <span className=\"text-xs text-white/30 truncate max-w-[200px]\">\n              {new URL(url).hostname}\n            </span>\n          )}\n        </div>\n\n        <div className=\"flex items-center gap-1\">\n          {/* Device size toggles */}\n          {Object.entries(DEVICE_SIZES).map(([size, { label, icon }]) => (\n            <button\n              key={size}\n              onClick={() => setDeviceSize(size as DeviceSize)}\n              className={`\n                p-1.5 rounded transition-colors\n                ${deviceSize === size ? 'bg-white/10 text-white' : 'text-white/40 hover:text-white/60'}\n              `}\n              title={label}\n            >\n              {icon}\n            </button>\n          ))}\n\n          <div className=\"w-px h-4 bg-white/10 mx-1\" />\n\n          {/* Refresh button */}\n          <button\n            onClick={handleRefresh}\n            disabled={!url || isLoading}\n            className=\"p-1.5 text-white/40 hover:text-white/60 rounded transition-colors disabled:opacity-50\"\n            title=\"Refresh\"\n          >\n            <RefreshCw className={`w-4 h-4 ${isLoading ? 'animate-spin' : ''}`} />\n          </button>\n\n          {/* Open external button */}\n          <button\n            onClick={handleOpenExternal}\n            disabled={!url}\n            className=\"p-1.5 text-white/40 hover:text-white/60 rounded transition-colors disabled:opacity-50\"\n            title=\"Open in new tab\"\n          >\n            <ExternalLink className=\"w-4 h-4\" />\n          </button>\n        </div>\n      </div>\n\n      {/* Preview Area */}\n      <div className=\"flex-1 flex items-center justify-center bg-[#1a1a1a] p-4 overflow-auto\">\n        {!url ? (\n          <div className=\"text-center text-white/30\">\n            <Monitor className=\"w-12 h-12 mx-auto mb-3 opacity-50\" />\n            <p className=\"text-sm\">No preview available</p>\n            <p className=\"text-xs mt-1\">Start a sandbox to see your app here</p>\n          </div>\n        ) : isLoading ? (\n          <div className=\"text-center text-white/30\">\n            <Loader2 className=\"w-8 h-8 mx-auto mb-3 animate-spin\" />\n            <p className=\"text-sm\">Loading preview...</p>\n          </div>\n        ) : (\n          <div\n            className=\"bg-white rounded-lg overflow-hidden shadow-2xl transition-all duration-300\"\n            style={{\n              width: DEVICE_SIZES[deviceSize].width,\n              height: deviceSize === 'desktop' ? '100%' : '600px',\n              maxWidth: '100%',\n              maxHeight: '100%',\n            }}\n          >\n            <iframe\n              key={iframeKey}\n              src={url}\n              className=\"w-full h-full border-0\"\n              title=\"Sandbox Preview\"\n              sandbox=\"allow-scripts allow-same-origin allow-forms allow-popups allow-modals\"\n            />\n          </div>\n        )}\n      </div>\n    </div>\n  );\n}\n\nexport default SandboxPreview;\n"],"names":[],"mappings":";;;;;;;AAEA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;;;AAHA;;;AAwBA,MAAM,eAA4F;IAChG,QAAQ;QAAE,OAAO;QAAS,OAAO;QAAU,oBAAM,sYAAC,mTAAU;YAAC,WAAU;;;;;;IAAa;IACpF,QAAQ;QAAE,OAAO;QAAS,OAAO;QAAU,oBAAM,sYAAC,uSAAM;YAAC,WAAU;;;;;;IAAa;IAChF,SAAS;QAAE,OAAO;QAAQ,OAAO;QAAW,oBAAM,sYAAC,0SAAO;YAAC,WAAU;;;;;;IAAa;AACpF;AAMO,SAAS,eAAe,EAC7B,GAAG,EACH,SAAS,EACT,SAAS,EACW;;IACpB,MAAM,CAAC,YAAY,cAAc,GAAG,IAAA,kXAAQ,EAAa;IACzD,MAAM,CAAC,WAAW,aAAa,GAAG,IAAA,kXAAQ,EAAC;IAE3C,MAAM,gBAAgB,IAAA,qXAAW;qDAAC;YAChC;6DAAa,CAAC,OAAS,OAAO;;YAC9B;QACF;oDAAG;QAAC;KAAU;IAEd,MAAM,qBAAqB,IAAA,qXAAW;0DAAC;YACrC,IAAI,KAAK;gBACP,OAAO,IAAI,CAAC,KAAK,UAAU;YAC7B;QACF;yDAAG;QAAC;KAAI;IAER,qBACE,sYAAC;QAAI,WAAU;;0BAEb,sYAAC;gBAAI,WAAU;;kCACb,sYAAC;wBAAI,WAAU;;0CACb,sYAAC;gCAAK,WAAU;0CAA6D;;;;;;4BAG5E,qBACC,sYAAC;gCAAK,WAAU;0CACb,IAAI,IAAI,KAAK,QAAQ;;;;;;;;;;;;kCAK5B,sYAAC;wBAAI,WAAU;;4BAEZ,OAAO,OAAO,CAAC,cAAc,GAAG,CAAC,CAAC,CAAC,MAAM,EAAE,KAAK,EAAE,IAAI,EAAE,CAAC,iBACxD,sYAAC;oCAEC,SAAS,IAAM,cAAc;oCAC7B,WAAW,CAAC;;gBAEV,EAAE,eAAe,OAAO,2BAA2B,oCAAoC;cACzF,CAAC;oCACD,OAAO;8CAEN;mCARI;;;;;0CAYT,sYAAC;gCAAI,WAAU;;;;;;0CAGf,sYAAC;gCACC,SAAS;gCACT,UAAU,CAAC,OAAO;gCAClB,WAAU;gCACV,OAAM;0CAEN,cAAA,sYAAC,oTAAS;oCAAC,WAAW,CAAC,QAAQ,EAAE,YAAY,iBAAiB,IAAI;;;;;;;;;;;0CAIpE,sYAAC;gCACC,SAAS;gCACT,UAAU,CAAC;gCACX,WAAU;gCACV,OAAM;0CAEN,cAAA,sYAAC,6TAAY;oCAAC,WAAU;;;;;;;;;;;;;;;;;;;;;;;0BAM9B,sYAAC;gBAAI,WAAU;0BACZ,CAAC,oBACA,sYAAC;oBAAI,WAAU;;sCACb,sYAAC,0SAAO;4BAAC,WAAU;;;;;;sCACnB,sYAAC;4BAAE,WAAU;sCAAU;;;;;;sCACvB,sYAAC;4BAAE,WAAU;sCAAe;;;;;;;;;;;2BAE5B,0BACF,sYAAC;oBAAI,WAAU;;sCACb,sYAAC,mTAAO;4BAAC,WAAU;;;;;;sCACnB,sYAAC;4BAAE,WAAU;sCAAU;;;;;;;;;;;yCAGzB,sYAAC;oBACC,WAAU;oBACV,OAAO;wBACL,OAAO,YAAY,CAAC,WAAW,CAAC,KAAK;wBACrC,QAAQ,eAAe,YAAY,SAAS;wBAC5C,UAAU;wBACV,WAAW;oBACb;8BAEA,cAAA,sYAAC;wBAEC,KAAK;wBACL,WAAU;wBACV,OAAM;wBACN,SAAQ;uBAJH;;;;;;;;;;;;;;;;;;;;;AAWnB;GA7GgB;KAAA;uCA+GD"}},
    {"offset": {"line": 9256, "column": 0}, "map": {"version":3,"sources":["file:///Users/jamesspalding/OpenClaw-OS/src/components/prototyping/SandboxLogs.tsx"],"sourcesContent":["'use client';\n\nimport React, { useRef, useEffect } from 'react';\nimport { Terminal, Trash2, ChevronDown } from 'lucide-react';\nimport type { LogEntry } from '@/contexts/SandboxContext';\n\n// ============================================================================\n// Types\n// ============================================================================\n\ninterface SandboxLogsProps {\n  logs: LogEntry[];\n  onClear?: () => void;\n  autoScroll?: boolean;\n}\n\n// ============================================================================\n// Helpers\n// ============================================================================\n\nfunction formatTimestamp(timestamp: number): string {\n  const date = new Date(timestamp);\n  return date.toLocaleTimeString('en-US', {\n    hour12: false,\n    hour: '2-digit',\n    minute: '2-digit',\n    second: '2-digit',\n  });\n}\n\nfunction getLogTypeStyles(type: LogEntry['type']): string {\n  switch (type) {\n    case 'command':\n      return 'text-cyan-400';\n    case 'output':\n      return 'text-white/80';\n    case 'error':\n      return 'text-red-400';\n    case 'system':\n      return 'text-yellow-400';\n    default:\n      return 'text-white/60';\n  }\n}\n\nfunction getLogPrefix(type: LogEntry['type']): string {\n  switch (type) {\n    case 'command':\n      return '$';\n    case 'output':\n      return '>';\n    case 'error':\n      return '!';\n    case 'system':\n      return '*';\n    default:\n      return ' ';\n  }\n}\n\n// ============================================================================\n// Main Component\n// ============================================================================\n\nexport function SandboxLogs({ logs, onClear, autoScroll = true }: SandboxLogsProps) {\n  const scrollRef = useRef<HTMLDivElement>(null);\n  const [isAtBottom, setIsAtBottom] = React.useState(true);\n\n  // Auto-scroll to bottom when new logs appear\n  useEffect(() => {\n    if (autoScroll && isAtBottom && scrollRef.current) {\n      scrollRef.current.scrollTop = scrollRef.current.scrollHeight;\n    }\n  }, [logs, autoScroll, isAtBottom]);\n\n  // Track scroll position\n  const handleScroll = () => {\n    if (scrollRef.current) {\n      const { scrollTop, scrollHeight, clientHeight } = scrollRef.current;\n      setIsAtBottom(scrollHeight - scrollTop - clientHeight < 50);\n    }\n  };\n\n  const scrollToBottom = () => {\n    if (scrollRef.current) {\n      scrollRef.current.scrollTop = scrollRef.current.scrollHeight;\n      setIsAtBottom(true);\n    }\n  };\n\n  return (\n    <div className=\"h-full flex flex-col bg-black/40 rounded-lg border border-white/10 overflow-hidden\">\n      {/* Header */}\n      <div className=\"flex items-center justify-between px-3 py-2 border-b border-white/10 bg-black/20\">\n        <div className=\"flex items-center gap-2\">\n          <Terminal className=\"w-4 h-4 text-white/50\" />\n          <span className=\"text-xs font-medium text-white/50 uppercase tracking-wider\">\n            Logs\n          </span>\n          <span className=\"text-xs text-white/30\">({logs.length})</span>\n        </div>\n\n        <div className=\"flex items-center gap-1\">\n          {!isAtBottom && (\n            <button\n              onClick={scrollToBottom}\n              className=\"p-1 text-white/40 hover:text-white/60 rounded transition-colors\"\n              title=\"Scroll to bottom\"\n            >\n              <ChevronDown className=\"w-4 h-4\" />\n            </button>\n          )}\n          {onClear && (\n            <button\n              onClick={onClear}\n              className=\"p-1 text-white/40 hover:text-white/60 rounded transition-colors\"\n              title=\"Clear logs\"\n            >\n              <Trash2 className=\"w-4 h-4\" />\n            </button>\n          )}\n        </div>\n      </div>\n\n      {/* Log Content */}\n      <div\n        ref={scrollRef}\n        onScroll={handleScroll}\n        className=\"flex-1 overflow-auto p-2 font-mono text-xs\"\n      >\n        {logs.length === 0 ? (\n          <div className=\"text-white/30 text-center py-4\">No logs yet</div>\n        ) : (\n          logs.map((log) => (\n            <div key={log.id} className=\"flex gap-2 py-0.5 hover:bg-white/5 rounded px-1\">\n              <span className=\"text-white/30 shrink-0\">{formatTimestamp(log.timestamp)}</span>\n              <span className={`shrink-0 ${getLogTypeStyles(log.type)}`}>\n                {getLogPrefix(log.type)}\n              </span>\n              <div className=\"flex-1 min-w-0\">\n                <span className={getLogTypeStyles(log.type)}>{log.message}</span>\n                {log.details && (\n                  <div className=\"text-white/40 mt-0.5 whitespace-pre-wrap break-all\">\n                    {log.details}\n                  </div>\n                )}\n              </div>\n            </div>\n          ))\n        )}\n      </div>\n    </div>\n  );\n}\n\nexport default SandboxLogs;\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 9515, "column": 0}, "map": {"version":3,"sources":["file:///Users/jamesspalding/OpenClaw-OS/src/app/prototyping/page.tsx"],"sourcesContent":["'use client';\n\nimport { useState, useCallback, useEffect, useRef, Component, type ReactNode } from 'react';\nimport { motion } from 'framer-motion';\nimport { ArrowLeft, Monitor, Smartphone, Tablet, PanelLeft, PanelRight, Play, Square, AlertTriangle, RefreshCw } from 'lucide-react';\nimport Link from 'next/link';\nimport { ControlDeck } from '@/components/prototyping/ControlDeck';\nimport { ProcessWindow, ProcessState, createInitialProcessState } from '@/components/prototyping/ProcessWindow';\nimport { SandboxProvider, useSandboxContext } from '@/contexts/SandboxContext';\nimport { SandboxFileExplorer } from '@/components/prototyping/SandboxFileExplorer';\nimport { SandboxPreview } from '@/components/prototyping/SandboxPreview';\nimport { SandboxLogs } from '@/components/prototyping/SandboxLogs';\nimport { springs } from '@/components/motion/config';\n\n// ============================================================================\n// Error Boundary for Sandbox Errors\n// ============================================================================\n\ninterface ErrorBoundaryState {\n  hasError: boolean;\n  error: Error | null;\n}\n\nclass SandboxErrorBoundary extends Component<{ children: ReactNode }, ErrorBoundaryState> {\n  constructor(props: { children: ReactNode }) {\n    super(props);\n    this.state = { hasError: false, error: null };\n  }\n\n  static getDerivedStateFromError(error: Error): ErrorBoundaryState {\n    return { hasError: true, error };\n  }\n\n  componentDidCatch(error: Error, errorInfo: React.ErrorInfo) {\n    console.error('Prototyping Error:', error, errorInfo);\n  }\n\n  render() {\n    if (this.state.hasError) {\n      return (\n        <div\n          className=\"h-[100dvh] flex flex-col items-center justify-center p-8\"\n          style={{\n            background: 'linear-gradient(180deg, hsl(var(--theme-background)) 0%, hsl(var(--theme-card)) 100%)',\n            color: 'hsl(var(--theme-foreground))',\n          }}\n        >\n          <motion.div\n            initial={{ opacity: 0, scale: 0.9 }}\n            animate={{ opacity: 1, scale: 1 }}\n            transition={springs.smooth}\n            className=\"flex flex-col items-center text-center max-w-md\"\n          >\n            <AlertTriangle className=\"w-16 h-16 mb-4\" style={{ color: 'hsl(var(--theme-primary))' }} />\n            <h1 className=\"text-2xl font-bold mb-2\">Prototyping Unavailable</h1>\n            <p className=\"mb-6\" style={{ color: 'hsl(var(--theme-muted-foreground))' }}>\n              The sandbox environment couldn&apos;t be initialized. This feature requires server-side resources.\n            </p>\n            <div className=\"flex gap-3\">\n              <button\n                onClick={() => window.location.reload()}\n                className=\"flex items-center gap-2 px-4 py-2 rounded-lg transition-colors\"\n                style={{\n                  backgroundColor: 'hsl(var(--theme-muted))',\n                  color: 'hsl(var(--theme-foreground))',\n                }}\n              >\n                <RefreshCw className=\"w-4 h-4\" />\n                Retry\n              </button>\n              <Link\n                href=\"/\"\n                className=\"px-4 py-2 rounded-lg transition-colors\"\n                style={{\n                  backgroundColor: 'hsl(var(--theme-muted))',\n                  color: 'hsl(var(--theme-foreground))',\n                }}\n              >\n                Return Home\n              </Link>\n            </div>\n          </motion.div>\n        </div>\n      );\n    }\n\n    return this.props.children;\n  }\n}\n\n// ============================================================================\n// Claw AI Response Simulator\n// ============================================================================\n\nconst AI_RESPONSES: Record<string, string[]> = {\n  accept: [\n    \"Changes accepted! I've committed the updates to the component. The new animation looks much smoother now.\",\n    \"Got it! Those changes are now applied. The refactored code is cleaner and more maintainable.\",\n    \"Perfect! I've accepted those modifications. Ready for the next task whenever you are.\",\n  ],\n  approve: [\n    \"Action approved! Running the implementation now. This should improve performance by about 20%.\",\n    \"Approved! I'm applying the suggested optimizations to the codebase.\",\n    \"Great choice! I've approved the changes and they're being deployed to the preview.\",\n  ],\n  ralph_on: [\n    \"RALPH MODE ENGAGED! Running autonomous loop - one goal per iteration, no context rot. Let's go!\",\n    \"Ralph loop activated! I'll deterministically malick the array and keep the locomotive on track.\",\n    \"Ralph is in the loop! Specs are my PIN, tests are my checkpoints. Shipping autonomously now.\",\n  ],\n  ralph_off: [\n    \"Ralph mode stopped. Back to attended mode - I'll wait for your direction on each step.\",\n    \"Loop paused. We're back to manual control with checkpoints before each action.\",\n    \"Ralph off. Ready to work together step by step again.\",\n  ],\n  enter: [\n    \"Executing command... Processing your request now.\",\n    \"On it! Running the task. Should be done in a moment.\",\n    \"Command received. Spinning up the process now.\",\n  ],\n  discard: [\n    \"Changes discarded. We're back to the previous state. No worries, we can try a different approach!\",\n    \"Rolled back those changes. Let me know what direction you'd like to go instead.\",\n    \"Discarded! The code is back to its original state. What should we try next?\",\n  ],\n  retry: [\n    \"Retrying... Let me take another crack at this with a fresh approach.\",\n    \"Okay, giving it another shot! Sometimes the second attempt works better.\",\n    \"Retrying the operation. I'll try a slightly different strategy this time.\",\n  ],\n  voice_on: [\n    \"Voice mode activated! I'm listening. Just speak naturally and I'll understand.\",\n    \"Mic is hot! Go ahead and tell me what you need.\",\n    \"Voice input enabled. I'm all ears!\",\n  ],\n  voice_off: [\n    \"Voice mode off. Back to text input.\",\n    \"Mic disabled. Type away when you're ready!\",\n    \"Voice input paused. Ready for text commands.\",\n  ],\n  suggest: [\n    \"Here's what I suggest next: Let's add some unit tests for the component we just built. Want me to generate them?\",\n    \"I recommend we optimize the bundle size next. I noticed a few imports that could be tree-shaken.\",\n    \"How about we add dark mode support? I can create a theme toggle that persists user preferences.\",\n    \"Suggestion: Let's add error boundaries to prevent the whole app from crashing on component errors.\",\n  ],\n  model_change: [\n    \"Model updated! I'm now running on the selected configuration. My capabilities are adjusted accordingly.\",\n    \"Switched models! This one is optimized for the task at hand.\",\n    \"New model loaded. Ready to continue with enhanced capabilities.\",\n  ],\n};\n\nconst TERMINAL_COMMANDS: Record<string, string[]> = {\n  accept: [\n    '$ git add -A',\n    '$ git commit -m \"Apply accepted changes\"',\n    'âœ“ Changes committed successfully',\n  ],\n  approve: [\n    '$ npm run build',\n    '  â–¸ Building application...',\n    '  â–¸ Optimizing chunks...',\n    'âœ“ Build completed in 2.3s',\n  ],\n  enter: [\n    '$ npm run dev',\n    '',\n    '  â–² Next.js 14.0.0',\n    '  - Local:        http://localhost:3000',\n    'âœ“ Ready in 1.2s',\n  ],\n  discard: [\n    '$ git checkout .',\n    '$ git clean -fd',\n    'âœ“ Changes discarded',\n  ],\n  retry: [\n    '$ npm run lint --fix',\n    '  â–¸ Fixing linting issues...',\n    'âœ“ 3 issues fixed automatically',\n    '$ npm run build',\n    'âœ“ Build successful',\n  ],\n};\n\n// ============================================================================\n// Main Page Component\n// ============================================================================\n\nfunction PrototypingContent() {\n  const [viewMode, setViewMode] = useState<'desktop' | 'tablet' | 'mobile'>('desktop');\n  const [processState, setProcessState] = useState<ProcessState>(createInitialProcessState);\n  const [showFileExplorer, setShowFileExplorer] = useState(true);\n  const [showPreview, setShowPreview] = useState(true);\n  const [selectedFile, setSelectedFile] = useState<string | undefined>();\n  const responseTimeoutRef = useRef<NodeJS.Timeout | null>(null);\n\n  // Sandbox context\n  const sandbox = useSandboxContext();\n\n  // Simulate Claw AI response\n  const simulateAIResponse = useCallback((action: string, customMessage?: string) => {\n    // Clear any pending response\n    if (responseTimeoutRef.current) {\n      clearTimeout(responseTimeoutRef.current);\n    }\n\n    // Get random response for the action\n    const responses = AI_RESPONSES[action] || AI_RESPONSES.suggest;\n    const response = customMessage || responses[Math.floor(Math.random() * responses.length)];\n\n    // Add terminal output if applicable\n    const terminalCommands = TERMINAL_COMMANDS[action];\n    if (terminalCommands) {\n      setProcessState((prev) => ({\n        ...prev,\n        terminalOutput: [...prev.terminalOutput, '', ...terminalCommands],\n      }));\n    }\n\n    // Set typing indicator\n    setProcessState((prev) => ({\n      ...prev,\n      aiTyping: true,\n      isProcessing: true,\n    }));\n\n    // Simulate response delay\n    responseTimeoutRef.current = setTimeout(() => {\n      setProcessState((prev) => ({\n        ...prev,\n        aiTyping: false,\n        isProcessing: false,\n        chatMessages: [\n          ...prev.chatMessages,\n          {\n            id: Date.now().toString(),\n            role: 'assistant',\n            content: response,\n            timestamp: new Date(),\n          },\n        ],\n      }));\n    }, 1000 + Math.random() * 1500);\n  }, []);\n\n  // Cleanup\n  useEffect(() => {\n    return () => {\n      if (responseTimeoutRef.current) {\n        clearTimeout(responseTimeoutRef.current);\n      }\n    };\n  }, []);\n\n  // Control deck handlers\n  const handleAcceptChanges = useCallback(() => {\n    simulateAIResponse('accept');\n    // Switch to code tab to show changes\n    setProcessState((prev) => ({ ...prev, activeTab: 'code' }));\n  }, [simulateAIResponse]);\n\n  const handleApproveAction = useCallback(() => {\n    simulateAIResponse('approve');\n    setProcessState((prev) => ({ ...prev, activeTab: 'terminal' }));\n  }, [simulateAIResponse]);\n\n  const handleRalphMode = useCallback((enabled: boolean) => {\n    simulateAIResponse(enabled ? 'ralph_on' : 'ralph_off');\n    setProcessState((prev) => ({ ...prev, activeTab: 'chat' }));\n  }, [simulateAIResponse]);\n\n  const handleOpenChat = useCallback(() => {\n    setProcessState((prev) => ({ ...prev, activeTab: 'chat' }));\n  }, []);\n\n  const handleEnter = useCallback(() => {\n    simulateAIResponse('enter');\n    setProcessState((prev) => ({ ...prev, activeTab: 'terminal' }));\n  }, [simulateAIResponse]);\n\n  const handleDiscard = useCallback(() => {\n    simulateAIResponse('discard');\n  }, [simulateAIResponse]);\n\n  const handleRetry = useCallback(() => {\n    simulateAIResponse('retry');\n    setProcessState((prev) => ({ ...prev, activeTab: 'terminal' }));\n  }, [simulateAIResponse]);\n\n  const handleVoice = useCallback(() => {\n    // Toggle voice state (simulated)\n    const isVoiceOn = Math.random() > 0.5;\n    simulateAIResponse(isVoiceOn ? 'voice_on' : 'voice_off');\n  }, [simulateAIResponse]);\n\n  const handleSuggestPrompt = useCallback(() => {\n    simulateAIResponse('suggest');\n    setProcessState((prev) => ({ ...prev, activeTab: 'chat' }));\n  }, [simulateAIResponse]);\n\n  const handleModelChange = useCallback((level: number) => {\n    const modelNames = ['Haiku', 'Sonnet', 'Opus', 'Opus 4.5'];\n    const modelIdx = Math.floor((level / 100) * 3);\n    const modelName = modelNames[Math.min(modelIdx, 3)];\n    simulateAIResponse('model_change', `Switched to Claude ${modelName}. I'm ready to assist with ${modelIdx >= 2 ? 'complex reasoning and code generation' : 'quick tasks and simple queries'}.`);\n  }, [simulateAIResponse]);\n\n  // Sandbox controls\n  const handleStartSandbox = useCallback(async () => {\n    try {\n      await sandbox.create({ timeout: 600000, ports: [3000] });\n      await sandbox.listFiles();\n      simulateAIResponse('enter', 'Sandbox created! I have a full Node.js environment ready. What should we build?');\n    } catch (error) {\n      simulateAIResponse('enter', `Failed to create sandbox: ${error instanceof Error ? error.message : 'Unknown error'}`);\n    }\n  }, [sandbox, simulateAIResponse]);\n\n  const handleStopSandbox = useCallback(async () => {\n    try {\n      await sandbox.terminate();\n      simulateAIResponse('discard', 'Sandbox terminated. All resources cleaned up.');\n    } catch (error) {\n      console.error('Failed to terminate sandbox:', error);\n    }\n  }, [sandbox, simulateAIResponse]);\n\n  const handleRefreshFiles = useCallback(async () => {\n    if (sandbox.isConnected) {\n      await sandbox.listFiles();\n    }\n  }, [sandbox]);\n\n  const handleFileSelect = useCallback(async (path: string) => {\n    setSelectedFile(path);\n    if (sandbox.isConnected) {\n      try {\n        const content = await sandbox.readFile(path);\n        // Update process state to show the file content\n        setProcessState((prev) => ({\n          ...prev,\n          code: content,\n          activeTab: 'code',\n          currentTask: `Viewing ${path.split('/').pop()}`,\n        }));\n      } catch (error) {\n        console.error('Failed to read file:', error);\n      }\n    }\n  }, [sandbox]);\n\n  // Handle state changes from ProcessWindow (e.g., user sending chat messages)\n  const handleProcessStateChange = useCallback((newState: ProcessState) => {\n    setProcessState(newState);\n\n    // If user sent a chat message, simulate AI response\n    const lastMessage = newState.chatMessages[newState.chatMessages.length - 1];\n    if (lastMessage?.role === 'user' && newState.aiTyping) {\n      // Generate contextual response based on user message\n      const userMsg = lastMessage.content.toLowerCase();\n      let response = '';\n\n      if (userMsg.includes('refactor') || userMsg.includes('clean')) {\n        response = \"I'll refactor that code for you! Let me analyze the structure and suggest improvements. Give me a moment...\";\n      } else if (userMsg.includes('bug') || userMsg.includes('fix') || userMsg.includes('error')) {\n        response = \"Let me investigate that bug. I'll trace through the code and find the root cause. Can you tell me more about when it happens?\";\n      } else if (userMsg.includes('test')) {\n        response = \"Great idea! I'll generate comprehensive tests for the component. Should I use Jest or Vitest?\";\n      } else if (userMsg.includes('help') || userMsg.includes('what can')) {\n        response = \"I can help you with: writing code, refactoring, debugging, explaining concepts, writing tests, and optimizing performance. Just tell me what you need!\";\n      } else if (userMsg.includes('build') || userMsg.includes('create') || userMsg.includes('make')) {\n        response = \"Let's build it! I'll start with the basic structure and we can iterate from there. What specific features should it have?\";\n      } else {\n        response = \"Got it! I'm on it. Let me work on that for you. Feel free to use the control deck to guide my actions.\";\n      }\n\n      responseTimeoutRef.current = setTimeout(() => {\n        setProcessState((prev) => ({\n          ...prev,\n          aiTyping: false,\n          isProcessing: false,\n          chatMessages: [\n            ...prev.chatMessages,\n            {\n              id: Date.now().toString(),\n              role: 'assistant',\n              content: response,\n              timestamp: new Date(),\n            },\n          ],\n        }));\n      }, 1500 + Math.random() * 1000);\n    }\n  }, []);\n\n  return (\n    <div\n      className=\"h-[100dvh] flex flex-col overflow-hidden\"\n      style={{\n        background: 'linear-gradient(180deg, hsl(var(--theme-background)) 0%, hsl(var(--theme-card)) 100%)',\n      }}\n    >\n      {/* Top bar - hidden on mobile, visible on larger screens */}\n      <motion.div\n        initial={{ opacity: 0, y: -20 }}\n        animate={{ opacity: 1, y: 0 }}\n        className=\"flex-shrink-0 hidden sm:flex items-center justify-between px-3 sm:px-4 py-2 sm:py-3\"\n        style={{ borderBottom: '1px solid hsl(var(--theme-border) / 0.3)' }}\n      >\n        <div className=\"flex items-center gap-3\">\n          <Link\n            href=\"/\"\n            className=\"flex items-center gap-2 transition-colors\"\n            style={{ color: 'hsl(var(--theme-muted-foreground))' }}\n          >\n            <ArrowLeft className=\"w-4 h-4\" />\n            <span className=\"text-sm font-medium\">OpenClaw-OS</span>\n          </Link>\n\n          {/* Panel toggles */}\n          <div className=\"flex items-center gap-1 ml-4 pl-4\" style={{ borderLeft: '1px solid hsl(var(--theme-border) / 0.3)' }}>\n            <button\n              onClick={() => setShowFileExplorer(!showFileExplorer)}\n              className=\"p-1.5 rounded-lg transition-colors\"\n              style={{\n                backgroundColor: showFileExplorer ? 'hsl(var(--theme-muted))' : 'transparent',\n                color: showFileExplorer ? 'hsl(var(--theme-foreground))' : 'hsl(var(--theme-muted-foreground))',\n              }}\n              title=\"Toggle file explorer\"\n            >\n              <PanelLeft className=\"w-4 h-4\" />\n            </button>\n            <button\n              onClick={() => setShowPreview(!showPreview)}\n              className=\"p-1.5 rounded-lg transition-colors\"\n              style={{\n                backgroundColor: showPreview ? 'hsl(var(--theme-muted))' : 'transparent',\n                color: showPreview ? 'hsl(var(--theme-foreground))' : 'hsl(var(--theme-muted-foreground))',\n              }}\n              title=\"Toggle preview\"\n            >\n              <PanelRight className=\"w-4 h-4\" />\n            </button>\n          </div>\n\n          {/* Sandbox controls */}\n          <div className=\"flex items-center gap-1 pl-4\" style={{ borderLeft: '1px solid hsl(var(--theme-border) / 0.3)' }}>\n            {!sandbox.isConnected ? (\n              <button\n                onClick={handleStartSandbox}\n                disabled={sandbox.isCreating}\n                className=\"flex items-center gap-1.5 px-2 py-1 rounded-lg transition-colors disabled:opacity-50 text-xs\"\n                style={{\n                  backgroundColor: 'hsl(var(--theme-primary) / 0.2)',\n                  color: 'hsl(var(--theme-primary))',\n                }}\n              >\n                <Play className=\"w-3 h-3\" />\n                {sandbox.isCreating ? 'Starting...' : 'Start Sandbox'}\n              </button>\n            ) : (\n              <button\n                onClick={handleStopSandbox}\n                className=\"flex items-center gap-1.5 px-2 py-1 rounded-lg transition-colors text-xs bg-red-500/20 text-red-400 hover:bg-red-500/30\"\n              >\n                <Square className=\"w-3 h-3\" />\n                Stop Sandbox\n              </button>\n            )}\n            {sandbox.isConnected && (\n              <span className=\"text-xs text-green-400 ml-2\">Connected</span>\n            )}\n          </div>\n        </div>\n\n        {/* View mode selector */}\n        <div className=\"flex items-center gap-1\">\n          <span className=\"text-xs mr-2 hidden md:inline\" style={{ color: 'hsl(var(--theme-muted-foreground))' }}>Preview</span>\n          <button\n            onClick={() => setViewMode('mobile')}\n            className=\"p-1.5 sm:p-2 rounded-lg transition-colors\"\n            style={{\n              backgroundColor: viewMode === 'mobile' ? 'hsl(var(--theme-muted))' : 'transparent',\n              color: viewMode === 'mobile' ? 'hsl(var(--theme-foreground))' : 'hsl(var(--theme-muted-foreground))',\n            }}\n          >\n            <Smartphone className=\"w-4 h-4\" />\n          </button>\n          <button\n            onClick={() => setViewMode('tablet')}\n            className=\"p-1.5 sm:p-2 rounded-lg transition-colors\"\n            style={{\n              backgroundColor: viewMode === 'tablet' ? 'hsl(var(--theme-muted))' : 'transparent',\n              color: viewMode === 'tablet' ? 'hsl(var(--theme-foreground))' : 'hsl(var(--theme-muted-foreground))',\n            }}\n          >\n            <Tablet className=\"w-4 h-4\" />\n          </button>\n          <button\n            onClick={() => setViewMode('desktop')}\n            className=\"p-1.5 sm:p-2 rounded-lg transition-colors\"\n            style={{\n              backgroundColor: viewMode === 'desktop' ? 'hsl(var(--theme-muted))' : 'transparent',\n              color: viewMode === 'desktop' ? 'hsl(var(--theme-foreground))' : 'hsl(var(--theme-muted-foreground))',\n            }}\n          >\n            <Monitor className=\"w-4 h-4\" />\n          </button>\n        </div>\n\n        {/* Status indicator */}\n        <div className=\"flex items-center gap-2\">\n          {processState.isProcessing && (\n            <motion.div\n              className=\"w-2 h-2 rounded-full\"\n              style={{ backgroundColor: 'hsl(var(--theme-primary))' }}\n              animate={{ opacity: [0.5, 1, 0.5] }}\n              transition={{ duration: 1, repeat: Infinity }}\n            />\n          )}\n          <span className=\"text-xs\" style={{ color: 'hsl(var(--theme-muted-foreground))' }}>{processState.currentTask || 'IDLE'}</span>\n        </div>\n      </motion.div>\n\n      {/* Main content area - Three panel layout */}\n      <div className=\"flex-1 flex min-h-0 overflow-hidden gap-2 p-2\">\n        {/* Left panel - File Explorer */}\n        {showFileExplorer && (\n          <motion.div\n            initial={{ opacity: 0, x: -20 }}\n            animate={{ opacity: 1, x: 0 }}\n            exit={{ opacity: 0, x: -20 }}\n            className=\"hidden md:block w-64 flex-shrink-0\"\n          >\n            <div className=\"h-full flex flex-col gap-2\">\n              <div className=\"flex-1 min-h-0\">\n                <SandboxFileExplorer\n                  files={sandbox.state.files}\n                  selectedFile={selectedFile}\n                  onFileSelect={handleFileSelect}\n                  onRefresh={handleRefreshFiles}\n                  isLoading={sandbox.isCreating}\n                />\n              </div>\n              <div className=\"h-48\">\n                <SandboxLogs\n                  logs={sandbox.logs}\n                  onClear={sandbox.clearLogs}\n                />\n              </div>\n            </div>\n          </motion.div>\n        )}\n\n        {/* Center panel - Process Window */}\n        <motion.div\n          initial={{ opacity: 0, scale: 0.95 }}\n          animate={{ opacity: 1, scale: 1 }}\n          transition={{ delay: 0.1 }}\n          className=\"flex-1 min-w-0 rounded-xl overflow-hidden\"\n          style={{\n            backgroundColor: 'hsl(var(--theme-card))',\n            boxShadow: 'inset 0 0 0 1px hsl(var(--theme-border) / 0.3), 0 20px 50px hsl(var(--theme-foreground) / 0.15)',\n          }}\n        >\n          {/* Browser chrome mockup - hidden on mobile */}\n          <div\n            className=\"hidden sm:flex items-center gap-2 px-2 sm:px-4 py-1.5 sm:py-2\"\n            style={{\n              backgroundColor: 'hsl(var(--theme-muted))',\n              borderBottom: '1px solid hsl(var(--theme-border) / 0.3)',\n            }}\n          >\n            <div className=\"flex gap-1.5\">\n              <div className=\"w-2.5 h-2.5 sm:w-3 sm:h-3 rounded-full bg-red-500/60\" />\n              <div className=\"w-2.5 h-2.5 sm:w-3 sm:h-3 rounded-full bg-yellow-500/60\" />\n              <div className=\"w-2.5 h-2.5 sm:w-3 sm:h-3 rounded-full bg-green-500/60\" />\n            </div>\n            <div className=\"flex-1 flex justify-center\">\n              <div\n                className=\"px-3 sm:px-4 py-0.5 sm:py-1 rounded-md text-[10px] sm:text-xs max-w-[200px] sm:max-w-xs truncate\"\n                style={{\n                  backgroundColor: 'hsl(var(--theme-background) / 0.5)',\n                  color: 'hsl(var(--theme-muted-foreground))',\n                }}\n              >\n                Claw AI â€¢ {processState.currentTask || 'Ready'}\n              </div>\n            </div>\n            <div className=\"w-8 sm:w-12 flex justify-end\">\n              {processState.isProcessing && (\n                <motion.div\n                  className=\"w-2 h-2 rounded-full\"\n                  style={{ backgroundColor: 'hsl(var(--theme-primary))' }}\n                  animate={{ opacity: [0.5, 1, 0.5] }}\n                  transition={{ duration: 1, repeat: Infinity }}\n                />\n              )}\n            </div>\n          </div>\n\n          {/* Process Window content - full height on mobile, adjusted on larger screens */}\n          <div className=\"h-full sm:h-[calc(100%-40px)]\">\n            <ProcessWindow\n              state={processState}\n              onStateChange={handleProcessStateChange}\n            />\n          </div>\n        </motion.div>\n\n        {/* Right panel - Preview */}\n        {showPreview && (\n          <motion.div\n            initial={{ opacity: 0, x: 20 }}\n            animate={{ opacity: 1, x: 0 }}\n            exit={{ opacity: 0, x: 20 }}\n            className=\"hidden lg:block w-96 flex-shrink-0\"\n          >\n            <SandboxPreview\n              url={sandbox.state.previewUrl}\n              isLoading={sandbox.isCreating}\n              onRefresh={async () => {\n                if (sandbox.isConnected) {\n                  await sandbox.getPreviewUrl();\n                }\n              }}\n            />\n          </motion.div>\n        )}\n      </div>\n\n      {/* Control Deck - compact on mobile with safe area */}\n      <motion.div\n        initial={{ opacity: 0, y: 40 }}\n        animate={{ opacity: 1, y: 0 }}\n        transition={{ delay: 0.2, type: 'spring', damping: 20 }}\n        className=\"flex-shrink-0 px-2 pt-1 sm:pt-2 pb-4 sm:pb-6\"\n        style={{\n          paddingBottom: 'max(env(safe-area-inset-bottom, 16px), 16px)',\n        }}\n      >\n        <ControlDeck\n          taskName={processState.currentTask || 'CODING'}\n          progress={60}\n          model=\"CLAUDE OPUS 4.5\"\n          subscription={85}\n          onAcceptChanges={handleAcceptChanges}\n          onApproveAction={handleApproveAction}\n          onRalphMode={handleRalphMode}\n          onOpenChat={handleOpenChat}\n          onEnter={handleEnter}\n          onDiscard={handleDiscard}\n          onRetry={handleRetry}\n          onVoice={handleVoice}\n          onSuggestPrompt={handleSuggestPrompt}\n          onModelChange={handleModelChange}\n        />\n      </motion.div>\n    </div>\n  );\n}\n\n// ============================================================================\n// Page Export with Provider\n// ============================================================================\n\nexport default function PrototypingPage() {\n  return (\n    <SandboxErrorBoundary>\n      <SandboxProvider>\n        <PrototypingContent />\n      </SandboxProvider>\n    </SandboxErrorBoundary>\n  );\n}\n"],"names":[],"mappings":"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"}}]
}