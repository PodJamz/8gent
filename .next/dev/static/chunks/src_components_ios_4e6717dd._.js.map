{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///Users/jamesspalding/OpenClaw-OS/src/components/ios/LockScreen.tsx"],"sourcesContent":["'use client';\n\nimport { useState, useEffect, useCallback, Suspense } from 'react';\nimport { motion, useMotionValue, useTransform, animate, useReducedMotion, AnimatePresence } from 'framer-motion';\nimport { useMusic } from '@/context/MusicContext';\nimport { LiquidGlass } from '@/components/ui/liquid-glass';\nimport { PerspectiveGrid } from '@/components/ui/perspective-grid';\nimport { Play, Pause, SkipBack, SkipForward, ChevronUp } from 'lucide-react';\nimport { springs, motionConfig } from '@/components/motion/config';\nimport dynamic from 'next/dynamic';\n\n// Dynamically import 3D tunnel to avoid SSR issues\nconst Tunnel3D = dynamic(\n  () => import('@/components/ui/tunnel-3d').then(mod => ({ default: mod.Tunnel3D })),\n  { ssr: false, loading: () => null }\n);\n\ninterface LockScreenProps {\n  onUnlock: () => void;\n  onBackgroundReady?: () => void;\n  backgroundReady?: boolean;\n}\n\nexport function LockScreen({ onUnlock, onBackgroundReady, backgroundReady = false }: LockScreenProps) {\n  const [currentTime, setCurrentTime] = useState(new Date());\n  const [tunnelMounted, setTunnelMounted] = useState(false);\n  const { currentTrack, isPlaying, currentTime: trackTime, duration, togglePlay, skipToNext, skipToPrevious } = useMusic();\n  const prefersReducedMotion = useReducedMotion();\n\n  // Track when tunnel is ready\n  const handleTunnelReady = useCallback(() => {\n    setTunnelMounted(true);\n    onBackgroundReady?.();\n  }, [onBackgroundReady]);\n\n  // Auto-trigger ready for reduced motion users\n  useEffect(() => {\n    if (prefersReducedMotion && !backgroundReady) {\n      onBackgroundReady?.();\n    }\n  }, [prefersReducedMotion, backgroundReady, onBackgroundReady]);\n\n  // Determine if UI should show (background ready or after timeout)\n  const showUI = backgroundReady || tunnelMounted || prefersReducedMotion;\n\n  const y = useMotionValue(0);\n  const opacity = useTransform(y, [-150, 0], [0, 1]);\n  const scale = useTransform(y, [-150, 0], [1.05, 1]);\n  const blur = useTransform(y, [-150, 0], [20, 0]);\n\n  // Update time every second\n  useEffect(() => {\n    const interval = setInterval(() => {\n      setCurrentTime(new Date());\n    }, 1000);\n    return () => clearInterval(interval);\n  }, []);\n\n  const formatTime = (date: Date) => {\n    return date.toLocaleTimeString('en-US', {\n      hour: 'numeric',\n      minute: '2-digit',\n      hour12: false,\n    });\n  };\n\n  const formatDate = (date: Date) => {\n    return date.toLocaleDateString('en-US', {\n      weekday: 'long',\n      month: 'long',\n      day: 'numeric',\n    });\n  };\n\n  const formatTrackTime = (time: number) => {\n    if (isNaN(time)) return '0:00';\n    const minutes = Math.floor(time / 60);\n    const seconds = Math.floor(time % 60);\n    return `${minutes}:${seconds.toString().padStart(2, '0')}`;\n  };\n\n  const progressPercent = duration ? (trackTime / duration) * 100 : 0;\n\n  const handleDragEnd = useCallback(() => {\n    if (y.get() < -100) {\n      // Trigger unlock with smooth animation\n      animate(y, -300, {\n        ...springs.smooth,\n        onComplete: onUnlock,\n      });\n    } else {\n      // Snap back with snappy spring\n      animate(y, 0, springs.snappy);\n    }\n  }, [y, onUnlock]);\n\n  // Handle tap on bottom area to unlock\n  const handleUnlockTap = useCallback(() => {\n    if (prefersReducedMotion) {\n      // Skip animation for reduced motion\n      onUnlock();\n      return;\n    }\n    animate(y, -300, {\n      ...springs.smooth,\n      onComplete: onUnlock,\n    });\n  }, [y, onUnlock, prefersReducedMotion]);\n\n  const getGreeting = () => {\n    const hour = currentTime.getHours();\n    if (hour < 12) return 'Good morning';\n    if (hour < 17) return 'Good afternoon';\n    return 'Good evening';\n  };\n\n  return (\n    <motion.div\n      className=\"fixed inset-0 z-50 flex flex-col items-center justify-between overflow-hidden select-none\"\n      style={{\n        opacity,\n        scale,\n        filter: useTransform(blur, (v) => `blur(${v}px)`),\n      }}\n      drag=\"y\"\n      dragConstraints={{ top: -300, bottom: 0 }}\n      dragElastic={motionConfig.drag.elastic}\n      onDragEnd={handleDragEnd}\n      onDrag={(_, info) => {\n        y.set(info.offset.y);\n      }}\n    >\n      {/* 3D Tunnel Background - Loads first, always visible */}\n      {!prefersReducedMotion ? (\n        <Tunnel3D speed={0.4} lineColor=\"#475569\" onReady={handleTunnelReady} />\n      ) : (\n        <>\n          {/* Fallback for reduced motion */}\n          <div className=\"absolute inset-0 bg-gradient-to-b from-slate-950 via-slate-900 to-indigo-950\" />\n          <PerspectiveGrid\n            lineColor=\"rgba(148, 163, 184, 0.12)\"\n            glowColor=\"rgba(99, 155, 255, 0.25)\"\n            vanishY={0.32}\n            gridLines={28}\n            horizontalLines={14}\n            animated={false}\n          />\n        </>\n      )}\n\n      {/* Subtle vignette overlay for depth */}\n      <div\n        className=\"absolute inset-0 pointer-events-none z-[1]\"\n        style={{\n          background: 'radial-gradient(ellipse at center 40%, transparent 0%, rgba(0,0,0,0.5) 100%)',\n        }}\n      />\n\n      {/* UI Components - Only animate in after background is ready */}\n      <AnimatePresence>\n        {showUI && (\n          <>\n            {/* Top section - Time & Date */}\n            <motion.div\n              className=\"relative z-10 pt-16 sm:pt-20 text-center\"\n              initial={{ opacity: 0, y: 20 }}\n              animate={{ opacity: 1, y: 0 }}\n              transition={{ delay: 0.1, ...springs.smooth }}\n            >\n              <div className=\"text-white/60 text-sm sm:text-base font-medium mb-1\">\n                {formatDate(currentTime)}\n              </div>\n              <div className=\"text-white text-7xl sm:text-8xl md:text-9xl font-thin tracking-tight\">\n                {formatTime(currentTime)}\n              </div>\n            </motion.div>\n\n            {/* Middle section - Profile & Greeting */}\n            <div className=\"relative z-10 flex flex-col items-center\">\n              <motion.div\n                initial={{ opacity: 0, scale: 0.8 }}\n                animate={{ opacity: 1, scale: 1 }}\n                transition={{ delay: 0.2, ...springs.smooth }}\n                className=\"mb-6\"\n              >\n                <div className=\"relative\">\n                  <div className=\"w-24 h-24 sm:w-28 sm:h-28 rounded-full overflow-hidden border-2 border-white/20 shadow-2xl\">\n                    <img\n                      src=\"/openclaw-logo.png\"\n                      alt=\"OpenClaw-OS\"\n                      className=\"w-full h-full object-cover\"\n                    />\n                  </div>\n                  {/* Online indicator */}\n                  <div className=\"absolute bottom-1 right-1 w-5 h-5 bg-green-500 rounded-full border-2 border-slate-900\" />\n                </div>\n              </motion.div>\n\n              <motion.div\n                initial={{ opacity: 0, y: 10 }}\n                animate={{ opacity: 1, y: 0 }}\n                transition={{ delay: 0.3, ...springs.smooth }}\n                className=\"text-center mb-8\"\n              >\n                <div className=\"text-white/40 text-xs uppercase tracking-widest mb-2\">Welcome to</div>\n                <div className=\"text-white text-2xl sm:text-3xl font-bold tracking-tight\">OpenClaw-OS</div>\n                <div className=\"text-white/50 text-sm mt-2 max-w-[280px] leading-relaxed\">\n                  Your AI-native operating system\n                </div>\n              </motion.div>\n\n              {/* Music Widget */}\n              <motion.div\n                initial={{ opacity: 0, y: 20 }}\n                animate={{ opacity: 1, y: 0 }}\n                transition={{ delay: 0.4, ...springs.smooth }}\n              >\n                <LiquidGlass\n                  variant=\"card\"\n                  intensity=\"subtle\"\n                  className=\"w-[320px] sm:w-[360px] !p-4\"\n                  rippleEffect={false}\n                >\n                  <div className=\"flex items-center gap-4\">\n                    {/* Album Art */}\n                    <div className=\"w-14 h-14 rounded-xl bg-white/10 flex-shrink-0 overflow-hidden\">\n                      {currentTrack.albumArt ? (\n                        <img\n                          src={currentTrack.albumArt}\n                          alt={currentTrack.album}\n                          className=\"w-full h-full object-cover\"\n                        />\n                      ) : (\n                        <div className=\"w-full h-full flex items-center justify-center text-2xl\">\n                          ðŸŽµ\n                        </div>\n                      )}\n                    </div>\n\n                    {/* Track Info & Controls */}\n                    <div className=\"flex-1 min-w-0\">\n                      <div className=\"text-white font-medium text-sm truncate\">\n                        {currentTrack.title}\n                      </div>\n                      <div className=\"text-white/50 text-xs truncate mb-2\">\n                        {currentTrack.artist}\n                      </div>\n\n                      {/* Progress Bar */}\n                      <div className=\"flex items-center gap-2\">\n                        <span className=\"text-[10px] text-white/40 w-8\">\n                          {formatTrackTime(trackTime)}\n                        </span>\n                        <div className=\"flex-1 h-1 bg-white/10 rounded-full overflow-hidden\">\n                          <div\n                            className=\"h-full bg-white/60 transition-all duration-150\"\n                            style={{ width: `${progressPercent}%` }}\n                          />\n                        </div>\n                        <span className=\"text-[10px] text-white/40 w-8 text-right\">\n                          {formatTrackTime(duration)}\n                        </span>\n                      </div>\n                    </div>\n\n                    {/* Play Controls */}\n                    <div className=\"flex items-center gap-1\">\n                      <button\n                        onClick={(e) => { e.stopPropagation(); skipToPrevious(); }}\n                        className=\"p-2 text-white/60 hover:text-white transition-colors\"\n                      >\n                        <SkipBack className=\"w-4 h-4\" fill=\"currentColor\" />\n                      </button>\n                      <button\n                        onClick={(e) => { e.stopPropagation(); togglePlay(); }}\n                        className=\"p-2 bg-white/20 rounded-full text-white hover:bg-white/30 transition-colors\"\n                      >\n                        {isPlaying ? (\n                          <Pause className=\"w-5 h-5\" fill=\"currentColor\" />\n                        ) : (\n                          <Play className=\"w-5 h-5\" fill=\"currentColor\" />\n                        )}\n                      </button>\n                      <button\n                        onClick={(e) => { e.stopPropagation(); skipToNext(); }}\n                        className=\"p-2 text-white/60 hover:text-white transition-colors\"\n                      >\n                        <SkipForward className=\"w-4 h-4\" fill=\"currentColor\" />\n                      </button>\n                    </div>\n                  </div>\n                </LiquidGlass>\n              </motion.div>\n            </div>\n\n            {/* Bottom section - Unlock hint (tappable) */}\n            <motion.div\n              className=\"relative z-10 pb-12 sm:pb-16 text-center cursor-pointer\"\n              initial={{ opacity: 0 }}\n              animate={{ opacity: 1 }}\n              transition={{ delay: 0.5, ...springs.smooth }}\n              onClick={handleUnlockTap}\n              whileTap={{ scale: 0.95 }}\n              style={{ paddingTop: '60px', marginTop: '-60px' }} // Larger tap target\n            >\n              <motion.div\n                animate={prefersReducedMotion ? {} : { y: [0, -8, 0] }}\n                transition={{ repeat: Infinity, duration: 2, ease: 'easeInOut' }}\n                className=\"flex flex-col items-center text-white/40\"\n              >\n                <ChevronUp className=\"w-6 h-6 mb-1\" />\n                <span className=\"text-sm font-medium\">Swipe to begin your journey</span>\n              </motion.div>\n            </motion.div>\n          </>\n        )}\n      </AnimatePresence>\n    </motion.div>\n  );\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 680, "column": 0}, "map": {"version":3,"sources":["file:///Users/jamesspalding/OpenClaw-OS/src/components/ios/DraggableAppIcon.tsx"],"sourcesContent":["'use client';\n\nimport { useRef, useCallback, useState, useEffect } from 'react';\nimport type React from 'react';\nimport { motion, useMotionValue, animate, PanInfo, AnimatePresence } from 'framer-motion';\nimport { useRouter } from 'next/navigation';\nimport { useHomeScreen, AppItem } from '@/context/HomeScreenContext';\nimport { X } from 'lucide-react';\nimport { springs, motionConfig } from '@/components/motion/config';\n\ninterface DraggableAppIconProps {\n  app: AppItem;\n  index: number;\n  delay?: number;\n  onClick?: () => void;\n  notificationCount?: number;\n  onAppOpen?: (appId: string) => void;\n  /** Tab index for keyboard navigation */\n  tabIndex?: number;\n  /** Focus handler for roving tabindex */\n  onFocus?: () => void;\n}\n\n// Store transition origin for page animations\nexport const APP_TRANSITION_KEY = 'openclaw_appTransition';\n\n// Long press duration (ms) to enter edit mode\nconst LONG_PRESS_DURATION = 500;\n\nexport function DraggableAppIcon({\n  app,\n  index,\n  delay = 0,\n  onClick,\n  notificationCount = 0,\n  onAppOpen,\n  tabIndex = 0,\n  onFocus,\n}: DraggableAppIconProps) {\n  const iconRef = useRef<HTMLDivElement>(null);\n  const router = useRouter();\n  const longPressTimerRef = useRef<NodeJS.Timeout | null>(null);\n  const isDraggingRef = useRef(false);\n\n  const {\n    isEditMode,\n    enterEditMode,\n    dragState,\n    startDrag,\n    updateDragPosition,\n    setDropTarget,\n    endDrag,\n    gridItems,\n  } = useHomeScreen();\n\n  // Motion values for drag\n  const x = useMotionValue(0);\n  const y = useMotionValue(0);\n  const scale = useMotionValue(1);\n  const zIndex = useMotionValue(0);\n\n  // Derived values\n  const isDragging = dragState.isDragging && dragState.draggedIndex === index;\n  const isDropTarget = dragState.dropTargetIndex === index && !isDragging;\n\n  // Reset position when not dragging\n  useEffect(() => {\n    if (!isDragging) {\n      animate(x, 0, springs.tight);\n      animate(y, 0, springs.tight);\n      animate(scale, 1, springs.tight);\n      zIndex.set(0);\n    }\n  }, [isDragging, x, y, scale, zIndex]);\n\n  // Long press handler to enter edit mode\n  const handleLongPressStart = useCallback(() => {\n    longPressTimerRef.current = setTimeout(() => {\n      if (!isDraggingRef.current) {\n        enterEditMode();\n        // Haptic feedback if available\n        if (navigator.vibrate) {\n          navigator.vibrate(10);\n        }\n      }\n    }, LONG_PRESS_DURATION);\n  }, [enterEditMode]);\n\n  const handleLongPressEnd = useCallback(() => {\n    if (longPressTimerRef.current) {\n      clearTimeout(longPressTimerRef.current);\n      longPressTimerRef.current = null;\n    }\n  }, []);\n\n  // Handle tap/click\n  const handleTap = useCallback((e: React.MouseEvent | React.TouchEvent) => {\n    e.preventDefault();\n\n    // Don't navigate if in edit mode or currently dragging\n    if (isEditMode || isDraggingRef.current) return;\n\n    // Mark notifications as read when opening app\n    if (onAppOpen) {\n      onAppOpen(app.id);\n    }\n\n    // Custom onClick handler (e.g., for Claw AI chat)\n    if (onClick) {\n      onClick();\n      return;\n    }\n\n    // External links open in new tab\n    if (app.external && app.href) {\n      window.open(app.href, '_blank', 'noopener,noreferrer');\n      return;\n    }\n\n    // Internal navigation with transition\n    if (app.href && !app.isChat) {\n      if (iconRef.current) {\n        const rect = iconRef.current.getBoundingClientRect();\n        const transitionData = {\n          x: rect.left + rect.width / 2,\n          y: rect.top + rect.height / 2,\n          width: rect.width,\n          height: rect.height,\n          gradient: app.gradient,\n          timestamp: Date.now(),\n        };\n        sessionStorage.setItem(APP_TRANSITION_KEY, JSON.stringify(transitionData));\n      }\n      router.push(app.href);\n    }\n  }, [app, router, onClick, isEditMode, onAppOpen]);\n\n  // Drag handlers\n  const handleDragStart = useCallback((event: MouseEvent | TouchEvent | PointerEvent, info: PanInfo) => {\n    if (!isEditMode) return;\n\n    isDraggingRef.current = true;\n    handleLongPressEnd();\n\n    zIndex.set(100);\n    animate(scale, 1.1, springs.snappy);\n\n    const offset = {\n      x: info.point.x,\n      y: info.point.y,\n    };\n\n    startDrag({ type: 'app', item: app }, index, offset);\n  }, [isEditMode, app, index, startDrag, handleLongPressEnd, scale, zIndex]);\n\n  const handleDrag = useCallback((event: MouseEvent | TouchEvent | PointerEvent, info: PanInfo) => {\n    if (!isEditMode || !dragState.isDragging) return;\n\n    updateDragPosition({ x: info.point.x, y: info.point.y });\n\n    // Calculate which grid position we're over\n    if (iconRef.current) {\n      const iconCenter = {\n        x: info.point.x,\n        y: info.point.y,\n      };\n\n      // Find potential drop target\n      const gridContainer = iconRef.current.closest('.app-grid-container');\n      if (gridContainer) {\n        const icons = gridContainer.querySelectorAll('.app-icon-wrapper');\n        let closestIndex = -1;\n        let closestDistance = Infinity;\n\n        icons.forEach((icon, i) => {\n          if (i === index) return; // Skip self\n\n          const rect = icon.getBoundingClientRect();\n          const center = {\n            x: rect.left + rect.width / 2,\n            y: rect.top + rect.height / 2,\n          };\n\n          const distance = Math.hypot(iconCenter.x - center.x, iconCenter.y - center.y);\n\n          if (distance < closestDistance && distance < 80) {\n            closestDistance = distance;\n            closestIndex = i;\n          }\n        });\n\n        setDropTarget(closestIndex >= 0 ? closestIndex : null);\n      }\n    }\n  }, [isEditMode, dragState.isDragging, index, updateDragPosition, setDropTarget]);\n\n  const handleDragEnd = useCallback(() => {\n    isDraggingRef.current = false;\n    animate(scale, 1, springs.snappy);\n    zIndex.set(0);\n    endDrag();\n  }, [endDrag, scale, zIndex]);\n\n  // Mouse/Touch event handlers\n  const handlePointerDown = useCallback((e: React.PointerEvent) => {\n    handleLongPressStart();\n  }, [handleLongPressStart]);\n\n  const handlePointerUp = useCallback(() => {\n    handleLongPressEnd();\n  }, [handleLongPressEnd]);\n\n  const handlePointerCancel = useCallback(() => {\n    handleLongPressEnd();\n  }, [handleLongPressEnd]);\n\n  // Use CSS class for wiggle animation to avoid Framer Motion type issues\n  const shouldWiggle = isEditMode && !isDragging;\n\n  // Handle keyboard activation\n  const handleKeyDown = useCallback((e: React.KeyboardEvent) => {\n    if (e.key === 'Enter' || e.key === ' ') {\n      e.preventDefault();\n      if (!isEditMode) {\n        handleTap(e as unknown as React.MouseEvent);\n      }\n    }\n  }, [isEditMode, handleTap]);\n\n  return (\n    <motion.div\n      className={`app-icon-wrapper flex flex-col items-center gap-2 relative ${shouldWiggle ? (index % 2 === 0 ? 'animate-ios-wiggle' : 'animate-ios-wiggle-alt') : ''\n        }`}\n      initial={{ opacity: 0, scale: 0.5, y: 20 }}\n      animate={{\n        opacity: dragState.isDragging && dragState.draggedIndex !== index && isDropTarget ? 0.5 : 1,\n        scale: 1,\n        y: 0,\n      }}\n      transition={{\n        delay,\n        ...springs.snappy,\n      }}\n      style={{\n        x: isDragging ? x : 0,\n        y: isDragging ? y : 0,\n        scale,\n        zIndex,\n      }}\n      drag={isEditMode}\n      dragMomentum={motionConfig.drag.momentum}\n      dragElastic={motionConfig.drag.elastic}\n      onDragStart={handleDragStart}\n      onDrag={handleDrag}\n      onDragEnd={handleDragEnd}\n      onPointerDown={handlePointerDown}\n      onPointerUp={handlePointerUp}\n      onPointerCancel={handlePointerCancel}\n      whileHover={!isEditMode ? { scale: 1.05 } : undefined}\n      whileTap={!isEditMode ? { scale: 0.95 } : undefined}\n      tabIndex={tabIndex}\n      onFocus={onFocus}\n      onKeyDown={handleKeyDown}\n      role=\"gridcell\"\n      aria-label={`${app.name}${notificationCount > 0 ? `, ${notificationCount} notifications` : ''}`}\n      data-app-icon\n    >\n      {/* Delete button in edit mode */}\n      {isEditMode && (\n        <motion.button\n          className=\"absolute -top-1 -left-1 z-20 w-6 h-6 bg-black/70 rounded-full flex items-center justify-center border border-white/20 focus:outline-none focus-visible:ring-2 focus-visible:ring-white/50\"\n          initial={{ opacity: 0, scale: 0 }}\n          animate={{ opacity: 1, scale: 1 }}\n          exit={{ opacity: 0, scale: 0 }}\n          onClick={(e) => {\n            e.stopPropagation();\n            // Could implement remove functionality here\n          }}\n          whileHover={{ scale: 1.1 }}\n          whileTap={{ scale: 0.9 }}\n          aria-label={`Remove ${app.name}`}\n        >\n          <X className=\"w-3 h-3 text-white\" aria-hidden=\"true\" />\n        </motion.button>\n      )}\n\n      {/* Notification badge */}\n      <AnimatePresence>\n        {notificationCount > 0 && !isEditMode && (\n          <motion.div\n            className=\"absolute -top-1 -right-1 z-20 min-w-[18px] h-[18px] px-1 bg-red-500 rounded-full flex items-center justify-center text-[10px] font-bold text-white shadow-lg shadow-red-500/30\"\n            initial={{ scale: 0, opacity: 0 }}\n            animate={{ scale: 1, opacity: 1 }}\n            exit={{ scale: 0, opacity: 0 }}\n            transition={springs.tight}\n          >\n            {notificationCount > 99 ? '99+' : notificationCount}\n          </motion.div>\n        )}\n      </AnimatePresence>\n\n      {/* Drop target indicator */}\n      {isDropTarget && (\n        <motion.div\n          className=\"absolute inset-0 rounded-[22px] border-2 border-white/50 bg-white/10\"\n          initial={{ opacity: 0, scale: 0.8 }}\n          animate={{ opacity: 1, scale: 1 }}\n          layoutId=\"drop-indicator\"\n        />\n      )}\n\n      <div\n        ref={iconRef}\n        onClick={handleTap}\n        className=\"block cursor-pointer focus:outline-none focus-visible:ring-2 focus-visible:ring-white/50 focus-visible:ring-offset-2 focus-visible:ring-offset-transparent rounded-[20px]\"\n      >\n        <motion.div\n          className=\"w-16 h-16 sm:w-[72px] sm:h-[72px] rounded-[18px] sm:rounded-[20px] flex items-center justify-center shadow-lg relative overflow-hidden\"\n          style={{ background: app.imageUrl ? 'transparent' : app.gradient }}\n          animate={{\n            boxShadow: isDragging\n              ? '0 25px 50px -12px rgba(0, 0, 0, 0.5)'\n              : isDropTarget\n                ? '0 0 20px rgba(255, 255, 255, 0.3)'\n                : '0 10px 15px -3px rgba(0, 0, 0, 0.3)',\n          }}\n        >\n          {app.imageUrl ? (\n            <img\n              src={app.imageUrl}\n              alt={app.name}\n              className=\"w-full h-full object-cover\"\n              draggable={false}\n            />\n          ) : (\n            <>\n              {/* Glass overlay */}\n              <div className=\"absolute inset-0 bg-gradient-to-br from-white/25 via-transparent to-transparent\" />\n              <div className=\"absolute inset-0 bg-gradient-to-t from-black/10 to-transparent\" />\n\n              {/* Icon */}\n              <div className=\"relative z-10 text-white\">\n                {app.icon}\n              </div>\n            </>\n          )}\n        </motion.div>\n      </div>\n      <span className=\"text-white/90 text-xs font-medium text-center max-w-[72px] truncate select-none\">\n        {app.name}\n      </span>\n    </motion.div>\n  );\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 1148, "column": 0}, "map": {"version":3,"sources":["file:///Users/jamesspalding/OpenClaw-OS/src/components/ios/AppFolder.tsx"],"sourcesContent":["'use client';\n\nimport { useRef, useCallback, useState, useEffect, useMemo } from 'react';\nimport { motion, AnimatePresence, useMotionValue, animate, PanInfo } from 'framer-motion';\nimport { useRouter } from 'next/navigation';\nimport { useHomeScreen, FolderItem, AppItem } from '@/context/HomeScreenContext';\nimport { useSessionBrain } from '@/context/SessionBrainContext';\nimport { X, Pencil } from 'lucide-react';\nimport { LiquidGlass } from '@/components/ui/liquid-glass';\nimport { DraggableAppIcon } from './DraggableAppIcon';\nimport { springs, motionConfig } from '@/components/motion/config';\n\ninterface AppFolderProps {\n  folder: FolderItem;\n  index: number;\n  delay?: number;\n}\n\n// Long press duration (ms) to enter edit mode\nconst LONG_PRESS_DURATION = 500;\n\nexport function AppFolder({ folder, index, delay = 0 }: AppFolderProps) {\n  const folderRef = useRef<HTMLDivElement>(null);\n  const longPressTimerRef = useRef<NodeJS.Timeout | null>(null);\n  const isDraggingRef = useRef(false);\n  const [isRenaming, setIsRenaming] = useState(false);\n  const [folderName, setFolderName] = useState(folder.name);\n\n  const {\n    isEditMode,\n    enterEditMode,\n    openFolderId,\n    openFolder,\n    closeFolder,\n    renameFolder,\n    removeFromFolder,\n    dragState,\n    startDrag,\n    updateDragPosition,\n    setDropTarget,\n    endDrag,\n  } = useHomeScreen();\n\n  const { getUnreadCountForApp, markAppNotificationsRead } = useSessionBrain();\n\n  const isOpen = openFolderId === folder.id;\n  const isDragging = dragState.isDragging && dragState.draggedIndex === index;\n  const isDropTarget = dragState.dropTargetIndex === index && !isDragging;\n\n  // Calculate total notification count for folder\n  const folderNotificationCount = useMemo(() => {\n    return folder.apps.reduce((count, app) => count + getUnreadCountForApp(app.id), 0);\n  }, [folder.apps, getUnreadCountForApp]);\n\n  // Mark notifications as read when opening an app\n  const handleAppOpen = useCallback((appId: string) => {\n    markAppNotificationsRead(appId);\n  }, [markAppNotificationsRead]);\n\n  // Motion values for drag\n  const x = useMotionValue(0);\n  const y = useMotionValue(0);\n  const scale = useMotionValue(1);\n  const zIndex = useMotionValue(0);\n\n  // Reset position when not dragging\n  useEffect(() => {\n    if (!isDragging) {\n      animate(x, 0, springs.tight);\n      animate(y, 0, springs.tight);\n      animate(scale, 1, springs.tight);\n      zIndex.set(0);\n    }\n  }, [isDragging, x, y, scale, zIndex]);\n\n  // Long press handler\n  const handleLongPressStart = useCallback(() => {\n    longPressTimerRef.current = setTimeout(() => {\n      if (!isDraggingRef.current && !isOpen) {\n        enterEditMode();\n        if (navigator.vibrate) {\n          navigator.vibrate(10);\n        }\n      }\n    }, LONG_PRESS_DURATION);\n  }, [enterEditMode, isOpen]);\n\n  const handleLongPressEnd = useCallback(() => {\n    if (longPressTimerRef.current) {\n      clearTimeout(longPressTimerRef.current);\n      longPressTimerRef.current = null;\n    }\n  }, []);\n\n  // Handle folder open\n  const handleFolderTap = useCallback(() => {\n    if (isEditMode || isDraggingRef.current) return;\n    openFolder(folder.id);\n  }, [isEditMode, folder.id, openFolder]);\n\n  // Handle rename\n  const handleRenameSubmit = useCallback(() => {\n    renameFolder(folder.id, folderName);\n    setIsRenaming(false);\n  }, [folder.id, folderName, renameFolder]);\n\n  // Drag handlers\n  const handleDragStart = useCallback((event: MouseEvent | TouchEvent | PointerEvent, info: PanInfo) => {\n    if (!isEditMode || isOpen) return;\n\n    isDraggingRef.current = true;\n    handleLongPressEnd();\n\n    zIndex.set(100);\n    animate(scale, 1.1, springs.snappy);\n\n    startDrag({ type: 'folder', item: folder }, index, { x: info.point.x, y: info.point.y });\n  }, [isEditMode, isOpen, folder, index, startDrag, handleLongPressEnd, scale, zIndex]);\n\n  const handleDrag = useCallback((event: MouseEvent | TouchEvent | PointerEvent, info: PanInfo) => {\n    if (!isEditMode || !dragState.isDragging) return;\n\n    updateDragPosition({ x: info.point.x, y: info.point.y });\n\n    if (folderRef.current) {\n      const gridContainer = folderRef.current.closest('.app-grid-container');\n      if (gridContainer) {\n        const icons = gridContainer.querySelectorAll('.app-icon-wrapper, .folder-wrapper');\n        let closestIndex = -1;\n        let closestDistance = Infinity;\n\n        icons.forEach((icon, i) => {\n          if (i === index) return;\n          const rect = icon.getBoundingClientRect();\n          const center = { x: rect.left + rect.width / 2, y: rect.top + rect.height / 2 };\n          const distance = Math.hypot(info.point.x - center.x, info.point.y - center.y);\n\n          if (distance < closestDistance && distance < 80) {\n            closestDistance = distance;\n            closestIndex = i;\n          }\n        });\n\n        setDropTarget(closestIndex >= 0 ? closestIndex : null);\n      }\n    }\n  }, [isEditMode, dragState.isDragging, index, updateDragPosition, setDropTarget]);\n\n  const handleDragEnd = useCallback(() => {\n    isDraggingRef.current = false;\n    animate(scale, 1, springs.snappy);\n    zIndex.set(0);\n    endDrag();\n  }, [endDrag, scale, zIndex]);\n\n  // Preview icons (show up to 4 in a 2x2 grid)\n  const previewApps = folder.apps.slice(0, 4);\n\n  // Use CSS class for wiggle animation to avoid Framer Motion type issues\n  const shouldWiggle = isEditMode && !isDragging && !isOpen;\n\n  return (\n    <>\n      <motion.div\n        ref={folderRef}\n        className={`folder-wrapper flex flex-col items-center gap-2 relative ${\n          shouldWiggle ? (index % 2 === 0 ? 'animate-ios-wiggle' : 'animate-ios-wiggle-alt') : ''\n        }`}\n        initial={{ opacity: 0, scale: 0.5, y: 20 }}\n        animate={{\n          opacity: dragState.isDragging && dragState.draggedIndex !== index && isDropTarget ? 0.5 : 1,\n          scale: 1,\n          y: 0,\n        }}\n        transition={{\n          delay,\n          ...springs.snappy,\n        }}\n        style={{\n          x: isDragging ? x : 0,\n          y: isDragging ? y : 0,\n          scale,\n          zIndex,\n        }}\n        drag={isEditMode && !isOpen}\n        dragMomentum={motionConfig.drag.momentum}\n        dragElastic={motionConfig.drag.elastic}\n        onDragStart={handleDragStart}\n        onDrag={handleDrag}\n        onDragEnd={handleDragEnd}\n        onPointerDown={handleLongPressStart}\n        onPointerUp={handleLongPressEnd}\n        onPointerCancel={handleLongPressEnd}\n        whileHover={!isEditMode && !isOpen ? { scale: 1.05 } : undefined}\n        whileTap={!isEditMode && !isOpen ? { scale: 0.95 } : undefined}\n      >\n        {/* Delete button in edit mode */}\n        {isEditMode && !isOpen && (\n          <motion.button\n            className=\"absolute -top-1 -left-1 z-20 w-6 h-6 bg-black/70 rounded-full flex items-center justify-center border border-white/20\"\n            initial={{ opacity: 0, scale: 0 }}\n            animate={{ opacity: 1, scale: 1 }}\n            exit={{ opacity: 0, scale: 0 }}\n            onClick={(e) => {\n              e.stopPropagation();\n              // Could implement delete folder functionality\n            }}\n            whileHover={{ scale: 1.1 }}\n            whileTap={{ scale: 0.9 }}\n          >\n            <X className=\"w-3 h-3 text-white\" />\n          </motion.button>\n        )}\n\n        {/* Notification badge for folder */}\n        <AnimatePresence>\n          {folderNotificationCount > 0 && !isEditMode && (\n            <motion.div\n              className=\"absolute -top-1 -right-1 z-20 min-w-[18px] h-[18px] px-1 bg-red-500 rounded-full flex items-center justify-center shadow-lg shadow-red-500/30\"\n              initial={{ scale: 0, opacity: 0 }}\n              animate={{ scale: 1, opacity: 1 }}\n              exit={{ scale: 0, opacity: 0 }}\n              transition={springs.tight}\n            >\n              {/* Pulse ring */}\n              <motion.div\n                className=\"absolute inset-0 bg-red-500 rounded-full\"\n                animate={{\n                  scale: [1, 1.5, 1],\n                  opacity: [0.5, 0, 0.5],\n                }}\n                transition={{\n                  duration: 1.2,\n                  repeat: Infinity,\n                  ease: 'easeOut',\n                }}\n              />\n              <span className=\"relative text-[10px] font-bold text-white\">\n                {folderNotificationCount > 99 ? '99+' : folderNotificationCount}\n              </span>\n            </motion.div>\n          )}\n        </AnimatePresence>\n\n        {/* Drop target indicator */}\n        {isDropTarget && (\n          <motion.div\n            className=\"absolute inset-0 rounded-[22px] border-2 border-white/50 bg-white/10\"\n            initial={{ opacity: 0, scale: 0.8 }}\n            animate={{ opacity: 1, scale: 1 }}\n          />\n        )}\n\n        {/* Folder icon - shows 2x2 preview of apps */}\n        <div\n          onClick={handleFolderTap}\n          className=\"block cursor-pointer\"\n        >\n          <motion.div\n            className=\"w-16 h-16 sm:w-[72px] sm:h-[72px] rounded-[18px] sm:rounded-[20px] flex items-center justify-center shadow-lg relative overflow-hidden backdrop-blur-xl bg-white/10 border border-white/20\"\n            animate={{\n              boxShadow: isDragging\n                ? '0 25px 50px -12px rgba(0, 0, 0, 0.5)'\n                : isDropTarget\n                  ? '0 0 20px rgba(255, 255, 255, 0.3)'\n                  : '0 10px 15px -3px rgba(0, 0, 0, 0.3)',\n            }}\n          >\n            {/* 2x2 Preview grid */}\n            <div className=\"grid grid-cols-2 gap-1 p-2\">\n              {previewApps.map((app, i) => (\n                <div\n                  key={app.id}\n                  className=\"w-5 h-5 sm:w-6 sm:h-6 rounded-md overflow-hidden relative\"\n                  style={{ background: app.imageUrl ? 'transparent' : app.gradient }}\n                >\n                  {app.imageUrl ? (\n                    <img\n                      src={app.imageUrl}\n                      alt={app.name}\n                      className=\"w-full h-full object-cover\"\n                      draggable={false}\n                    />\n                  ) : (\n                    <>\n                      <div className=\"absolute inset-0 bg-gradient-to-br from-white/20 to-transparent\" />\n                      {app.icon && (\n                        <div className=\"absolute inset-0 flex items-center justify-center text-white scale-[0.45]\">\n                          {app.icon}\n                        </div>\n                      )}\n                    </>\n                  )}\n                </div>\n              ))}\n              {/* Empty slots */}\n              {Array.from({ length: 4 - previewApps.length }).map((_, i) => (\n                <div\n                  key={`empty-${i}`}\n                  className=\"w-5 h-5 sm:w-6 sm:h-6 rounded-md bg-white/5\"\n                />\n              ))}\n            </div>\n          </motion.div>\n        </div>\n\n        {/* Folder name */}\n        {isRenaming ? (\n          <input\n            type=\"text\"\n            value={folderName}\n            onChange={(e) => setFolderName(e.target.value)}\n            onBlur={handleRenameSubmit}\n            onKeyDown={(e) => e.key === 'Enter' && handleRenameSubmit()}\n            className=\"text-white/90 text-xs font-medium text-center max-w-[72px] bg-transparent border border-white/30 rounded px-1 py-0.5 outline-none\"\n            autoFocus\n          />\n        ) : (\n          <span\n            className=\"text-white/90 text-xs font-medium text-center max-w-[72px] truncate select-none\"\n            onClick={(e) => {\n              if (isEditMode) {\n                e.stopPropagation();\n                setIsRenaming(true);\n              }\n            }}\n          >\n            {folder.name}\n          </span>\n        )}\n      </motion.div>\n\n      {/* Expanded folder overlay */}\n      <AnimatePresence>\n        {isOpen && (\n          <motion.div\n            className=\"fixed inset-0 z-50 flex items-center justify-center\"\n            initial={{ opacity: 0 }}\n            animate={{ opacity: 1 }}\n            exit={{ opacity: 0 }}\n            transition={springs.smooth}\n            onClick={closeFolder}\n          >\n            {/* Backdrop blur */}\n            <motion.div\n              className=\"absolute inset-0 bg-black/50 backdrop-blur-xl\"\n              initial={{ opacity: 0 }}\n              animate={{ opacity: 1 }}\n              exit={{ opacity: 0 }}\n              transition={springs.smooth}\n            />\n\n            {/* Folder content */}\n            <motion.div\n              className=\"relative z-10 w-[90%] max-w-md\"\n              initial={{ scale: 0.5, opacity: 0, y: 50 }}\n              animate={{ scale: 1, opacity: 1, y: 0 }}\n              exit={{ scale: 0.5, opacity: 0, y: 50 }}\n              transition={springs.snappy}\n              onClick={(e) => e.stopPropagation()}\n            >\n              <LiquidGlass\n                variant=\"panel\"\n                intensity=\"medium\"\n                className=\"!p-6\"\n                rippleEffect={false}\n              >\n                {/* Folder header */}\n                <div className=\"flex items-center justify-between mb-6\">\n                  {isRenaming ? (\n                    <input\n                      type=\"text\"\n                      value={folderName}\n                      onChange={(e) => setFolderName(e.target.value)}\n                      onBlur={handleRenameSubmit}\n                      onKeyDown={(e) => e.key === 'Enter' && handleRenameSubmit()}\n                      className=\"text-white text-lg font-semibold bg-transparent border-b border-white/30 outline-none\"\n                      autoFocus\n                    />\n                  ) : (\n                    <h2\n                      className=\"text-white text-lg font-semibold flex items-center gap-2 cursor-pointer group\"\n                      onClick={() => setIsRenaming(true)}\n                    >\n                      {folder.name}\n                      <Pencil className=\"w-4 h-4 opacity-0 group-hover:opacity-50 transition-opacity\" />\n                    </h2>\n                  )}\n                  <button\n                    onClick={closeFolder}\n                    className=\"text-white/50 hover:text-white transition-colors\"\n                  >\n                    <X className=\"w-6 h-6\" />\n                  </button>\n                </div>\n\n                {/* Apps grid inside folder */}\n                <div className=\"grid grid-cols-4 gap-4\">\n                  {folder.apps.map((app, i) => (\n                    <FolderAppIcon\n                      key={app.id}\n                      app={app}\n                      folderId={folder.id}\n                      index={i}\n                      notificationCount={getUnreadCountForApp(app.id)}\n                      onAppOpen={handleAppOpen}\n                    />\n                  ))}\n                </div>\n              </LiquidGlass>\n            </motion.div>\n          </motion.div>\n        )}\n      </AnimatePresence>\n    </>\n  );\n}\n\n// Simplified app icon inside folder\ninterface FolderAppIconProps {\n  app: AppItem;\n  folderId: string;\n  index: number;\n  notificationCount?: number;\n  onAppOpen?: (appId: string) => void;\n}\n\nfunction FolderAppIcon({ app, folderId, index, notificationCount = 0, onAppOpen }: FolderAppIconProps) {\n  const { isEditMode, removeFromFolder, closeFolder } = useHomeScreen();\n  const router = useRouter();\n\n  const handleTap = useCallback(() => {\n    if (isEditMode) return;\n\n    // Mark notifications as read\n    if (onAppOpen) {\n      onAppOpen(app.id);\n    }\n\n    if (app.external && app.href) {\n      window.open(app.href, '_blank', 'noopener,noreferrer');\n      return;\n    }\n\n    if (app.href && !app.isChat) {\n      closeFolder();\n      router.push(app.href);\n    }\n  }, [app, router, isEditMode, closeFolder, onAppOpen]);\n\n  return (\n    <motion.div\n      className=\"flex flex-col items-center gap-1 relative\"\n      initial={{ opacity: 0, scale: 0.8 }}\n      animate={{ opacity: 1, scale: 1 }}\n      transition={{ delay: 0.05 }}\n      whileHover={{ scale: 1.05 }}\n      whileTap={{ scale: 0.95 }}\n    >\n      {/* Remove button in edit mode */}\n      {isEditMode && (\n        <motion.button\n          className=\"absolute -top-1 -left-1 z-20 w-5 h-5 bg-black/70 rounded-full flex items-center justify-center border border-white/20\"\n          initial={{ opacity: 0, scale: 0 }}\n          animate={{ opacity: 1, scale: 1 }}\n          onClick={(e) => {\n            e.stopPropagation();\n            removeFromFolder(folderId, app.id);\n          }}\n          whileHover={{ scale: 1.1 }}\n          whileTap={{ scale: 0.9 }}\n        >\n          <X className=\"w-2.5 h-2.5 text-white\" />\n        </motion.button>\n      )}\n\n      {/* Notification badge */}\n      <AnimatePresence>\n        {notificationCount > 0 && !isEditMode && (\n          <motion.div\n            className=\"absolute -top-1 -right-1 z-20 min-w-[16px] h-[16px] px-0.5 bg-red-500 rounded-full flex items-center justify-center shadow-lg shadow-red-500/30\"\n            initial={{ scale: 0, opacity: 0 }}\n            animate={{ scale: 1, opacity: 1 }}\n            exit={{ scale: 0, opacity: 0 }}\n            transition={springs.tight}\n          >\n            <span className=\"text-[9px] font-bold text-white\">\n              {notificationCount > 99 ? '99+' : notificationCount}\n            </span>\n          </motion.div>\n        )}\n      </AnimatePresence>\n\n      <div\n        onClick={handleTap}\n        className=\"cursor-pointer\"\n      >\n        <div\n          className=\"w-14 h-14 rounded-[14px] flex items-center justify-center shadow-lg relative overflow-hidden\"\n          style={{ background: app.imageUrl ? 'transparent' : app.gradient }}\n        >\n          {app.imageUrl ? (\n            <img\n              src={app.imageUrl}\n              alt={app.name}\n              className=\"w-full h-full object-cover\"\n              draggable={false}\n            />\n          ) : (\n            <>\n              <div className=\"absolute inset-0 bg-gradient-to-br from-white/25 via-transparent to-transparent\" />\n              <div className=\"absolute inset-0 bg-gradient-to-t from-black/10 to-transparent\" />\n              <div className=\"relative z-10 text-white scale-90\">\n                {app.icon}\n              </div>\n            </>\n          )}\n        </div>\n      </div>\n      <span className=\"text-white/90 text-[10px] font-medium text-center max-w-[56px] truncate select-none\">\n        {app.name}\n      </span>\n    </motion.div>\n  );\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 1981, "column": 0}, "map": {"version":3,"sources":["file:///Users/jamesspalding/OpenClaw-OS/src/components/ios/StatusBarWatch.tsx"],"sourcesContent":["'use client';\n\nimport { useState, useCallback, useMemo } from 'react';\nimport { motion, AnimatePresence } from 'framer-motion';\nimport { WatchFace } from '@/components/watch/WatchFace';\nimport { WorldClockView } from '@/components/watch/WorldClockView';\nimport { themeToWatch } from '@/lib/watch/theme-to-watch';\nimport { useDesignTheme } from '@/context/DesignThemeContext';\n\nexport function StatusBarWatch() {\n  const [isExpanded, setIsExpanded] = useState(false);\n  const { theme } = useDesignTheme();\n\n  const watchDNA = useMemo(() => themeToWatch(theme), [theme]);\n\n  const toggleExpanded = useCallback(() => {\n    setIsExpanded((prev) => !prev);\n  }, []);\n\n  const handleBackdropClick = useCallback((e: React.MouseEvent) => {\n    if (e.target === e.currentTarget) {\n      setIsExpanded(false);\n    }\n  }, []);\n\n  return (\n    <>\n      {/* Mini watch in status bar */}\n      <motion.button\n        onClick={toggleExpanded}\n        className=\"relative w-8 h-8 flex items-center justify-center cursor-pointer focus:outline-none focus-visible:ring-2 focus-visible:ring-white/50 rounded-full\"\n        aria-label=\"Expand watch\"\n        aria-expanded={isExpanded}\n        whileHover={{ scale: 1.1 }}\n        whileTap={{ scale: 0.95 }}\n      >\n        <WatchFace\n          watchDNA={watchDNA}\n          size={28}\n          showCase={false}\n          interactive={false}\n          className=\"pointer-events-none\"\n        />\n      </motion.button>\n\n      {/* Expanded watch overlay */}\n      <AnimatePresence>\n        {isExpanded && (\n          <motion.div\n            className=\"fixed inset-0 z-[100] flex items-start justify-center pt-20\"\n            initial={{ opacity: 0 }}\n            animate={{ opacity: 1 }}\n            exit={{ opacity: 0 }}\n            transition={{ duration: 0.2 }}\n            onClick={handleBackdropClick}\n          >\n            {/* Backdrop */}\n            <motion.div\n              className=\"absolute inset-0 bg-black/50 backdrop-blur-sm\"\n              initial={{ opacity: 0 }}\n              animate={{ opacity: 1 }}\n              exit={{ opacity: 0 }}\n            />\n\n            {/* World Clock View */}\n            <motion.div\n              className=\"relative z-10\"\n              initial={{ scale: 0.9, opacity: 0, y: -30 }}\n              animate={{ scale: 1, opacity: 1, y: 0 }}\n              exit={{ scale: 0.9, opacity: 0, y: -30 }}\n              transition={{\n                type: 'spring',\n                stiffness: 400,\n                damping: 30,\n              }}\n            >\n              <WorldClockView\n                watchDNA={watchDNA}\n                onClose={toggleExpanded}\n              />\n            </motion.div>\n          </motion.div>\n        )}\n      </AnimatePresence>\n    </>\n  );\n}\n"],"names":[],"mappings":";;;;;AAEA;AACA;AAAA;AACA;AACA;AACA;AACA;;;AAPA;;;;;;;AASO,SAAS;;IACd,MAAM,CAAC,YAAY,cAAc,GAAG,IAAA,kXAAQ,EAAC;IAC7C,MAAM,EAAE,KAAK,EAAE,GAAG,IAAA,0JAAc;IAEhC,MAAM,WAAW,IAAA,iXAAO;4CAAC,IAAM,IAAA,8JAAY,EAAC;2CAAQ;QAAC;KAAM;IAE3D,MAAM,iBAAiB,IAAA,qXAAW;sDAAC;YACjC;8DAAc,CAAC,OAAS,CAAC;;QAC3B;qDAAG,EAAE;IAEL,MAAM,sBAAsB,IAAA,qXAAW;2DAAC,CAAC;YACvC,IAAI,EAAE,MAAM,KAAK,EAAE,aAAa,EAAE;gBAChC,cAAc;YAChB;QACF;0DAAG,EAAE;IAEL,qBACE;;0BAEE,sYAAC,mVAAM,CAAC,MAAM;gBACZ,SAAS;gBACT,WAAU;gBACV,cAAW;gBACX,iBAAe;gBACf,YAAY;oBAAE,OAAO;gBAAI;gBACzB,UAAU;oBAAE,OAAO;gBAAK;0BAExB,cAAA,sYAAC,wJAAS;oBACR,UAAU;oBACV,MAAM;oBACN,UAAU;oBACV,aAAa;oBACb,WAAU;;;;;;;;;;;0BAKd,sYAAC,2VAAe;0BACb,4BACC,sYAAC,mVAAM,CAAC,GAAG;oBACT,WAAU;oBACV,SAAS;wBAAE,SAAS;oBAAE;oBACtB,SAAS;wBAAE,SAAS;oBAAE;oBACtB,MAAM;wBAAE,SAAS;oBAAE;oBACnB,YAAY;wBAAE,UAAU;oBAAI;oBAC5B,SAAS;;sCAGT,sYAAC,mVAAM,CAAC,GAAG;4BACT,WAAU;4BACV,SAAS;gCAAE,SAAS;4BAAE;4BACtB,SAAS;gCAAE,SAAS;4BAAE;4BACtB,MAAM;gCAAE,SAAS;4BAAE;;;;;;sCAIrB,sYAAC,mVAAM,CAAC,GAAG;4BACT,WAAU;4BACV,SAAS;gCAAE,OAAO;gCAAK,SAAS;gCAAG,GAAG,CAAC;4BAAG;4BAC1C,SAAS;gCAAE,OAAO;gCAAG,SAAS;gCAAG,GAAG;4BAAE;4BACtC,MAAM;gCAAE,OAAO;gCAAK,SAAS;gCAAG,GAAG,CAAC;4BAAG;4BACvC,YAAY;gCACV,MAAM;gCACN,WAAW;gCACX,SAAS;4BACX;sCAEA,cAAA,sYAAC,kKAAc;gCACb,UAAU;gCACV,SAAS;;;;;;;;;;;;;;;;;;;;;;;;AAQzB;GA7EgB;;QAEI,0JAAc;;;KAFlB"}},
    {"offset": {"line": 2151, "column": 0}, "map": {"version":3,"sources":["file:///Users/jamesspalding/OpenClaw-OS/src/components/ios/DynamicIsland.tsx"],"sourcesContent":["'use client';\n\nimport React, {\n  createContext,\n  useContext,\n  useState,\n  useCallback,\n  useEffect,\n  ReactNode,\n} from 'react';\nimport { motion, AnimatePresence, useReducedMotion, Variants } from 'framer-motion';\nimport { useMusic } from '@/context/MusicContext';\nimport { useProviderStatus, type ProviderType, type ConnectionStatus } from '@/hooks/useProviderStatus';\nimport { Play, Pause, SkipForward, SkipBack, Timer, Bell, Phone, Mic, Check, X, ChevronDown, Cloud, Cpu, Wifi } from 'lucide-react';\n\n// ============================================================================\n// Types and Configuration\n// ============================================================================\n\nexport type DynamicIslandSize =\n  | 'default'\n  | 'compact'\n  | 'large'\n  | 'tall'\n  | 'long'\n  | 'medium'\n  | 'ultra';\n\nexport type IslandContentType =\n  | 'idle'\n  | 'music'\n  | 'timer'\n  | 'notification'\n  | 'call'\n  | 'recording'\n  | 'success'\n  | 'loading'\n  | 'ralph'\n  | 'provider';\n\ninterface IslandState {\n  size: DynamicIslandSize;\n  previousSize: DynamicIslandSize;\n  contentType: IslandContentType;\n  notification?: {\n    title: string;\n    message: string;\n    icon?: ReactNode;\n  };\n  ralph?: {\n    iteration: number;\n    maxIterations: number;\n    description: string;\n  };\n}\n\ninterface DynamicIslandContextType {\n  state: IslandState;\n  setSize: (size: DynamicIslandSize) => void;\n  setContentType: (type: IslandContentType) => void;\n  showNotification: (title: string, message: string, icon?: ReactNode, duration?: number) => void;\n  showRalphMode: (iteration: number, maxIterations: number, description: string) => void;\n  hideRalphMode: () => void;\n  expand: () => void;\n  collapse: () => void;\n  scheduleAnimation: (size: DynamicIslandSize, delay?: number) => void;\n}\n\n// Size dimensions - based on cult-ui reference and iPhone proportions\nconst SIZE_PRESETS: Record<DynamicIslandSize, { width: number; height: number; aspectRatio: string }> = {\n  default: { width: 126, height: 37, aspectRatio: '126/37' },\n  compact: { width: 100, height: 32, aspectRatio: '100/32' },\n  large: { width: 350, height: 100, aspectRatio: '350/100' }, // Taller for music player with progress\n  tall: { width: 350, height: 200, aspectRatio: '350/200' },\n  long: { width: 350, height: 56, aspectRatio: '350/56' },\n  medium: { width: 350, height: 130, aspectRatio: '350/130' },\n  ultra: { width: 350, height: 300, aspectRatio: '350/300' },\n};\n\n// ============================================================================\n// Context Provider\n// ============================================================================\n\nconst DynamicIslandContext = createContext<DynamicIslandContextType | null>(null);\n\nexport function useDynamicIsland() {\n  const context = useContext(DynamicIslandContext);\n  if (!context) {\n    throw new Error('useDynamicIsland must be used within DynamicIslandProvider');\n  }\n  return context;\n}\n\ninterface DynamicIslandProviderProps {\n  children: ReactNode;\n  initialSize?: DynamicIslandSize;\n}\n\nexport function DynamicIslandProvider({\n  children,\n  initialSize = 'default',\n}: DynamicIslandProviderProps) {\n  const [state, setState] = useState<IslandState>({\n    size: initialSize,\n    previousSize: initialSize,\n    contentType: 'idle',\n  });\n\n  const setSize = useCallback((size: DynamicIslandSize) => {\n    setState((prev) => ({\n      ...prev,\n      previousSize: prev.size,\n      size,\n    }));\n  }, []);\n\n  const setContentType = useCallback((contentType: IslandContentType) => {\n    setState((prev) => ({ ...prev, contentType }));\n  }, []);\n\n  const showNotification = useCallback(\n    (title: string, message: string, icon?: ReactNode, duration = 4000) => {\n      setState((prev) => ({\n        ...prev,\n        previousSize: prev.size,\n        size: 'long',\n        contentType: 'notification',\n        notification: { title, message, icon },\n      }));\n\n      if (duration > 0) {\n        setTimeout(() => {\n          setState((prev) => ({\n            ...prev,\n            previousSize: prev.size,\n            size: 'default',\n            contentType: 'idle',\n            notification: undefined,\n          }));\n        }, duration);\n      }\n    },\n    []\n  );\n\n  const showRalphMode = useCallback(\n    (iteration: number, maxIterations: number, description: string) => {\n      setState((prev) => ({\n        ...prev,\n        previousSize: prev.size,\n        size: 'long',\n        contentType: 'ralph',\n        ralph: { iteration, maxIterations, description },\n      }));\n    },\n    []\n  );\n\n  const hideRalphMode = useCallback(() => {\n    setState((prev) => ({\n      ...prev,\n      previousSize: prev.size,\n      size: 'default',\n      contentType: 'idle',\n      ralph: undefined,\n    }));\n  }, []);\n\n  const expand = useCallback(() => {\n    setState((prev) => ({\n      ...prev,\n      previousSize: prev.size,\n      size: 'large',\n    }));\n  }, []);\n\n  const collapse = useCallback(() => {\n    setState((prev) => ({\n      ...prev,\n      previousSize: prev.size,\n      size: 'default',\n    }));\n  }, []);\n\n  const scheduleAnimation = useCallback((size: DynamicIslandSize, delay = 1000) => {\n    setTimeout(() => setSize(size), delay);\n  }, [setSize]);\n\n  return (\n    <DynamicIslandContext.Provider\n      value={{\n        state,\n        setSize,\n        setContentType,\n        showNotification,\n        showRalphMode,\n        hideRalphMode,\n        expand,\n        collapse,\n        scheduleAnimation,\n      }}\n    >\n      {children}\n    </DynamicIslandContext.Provider>\n  );\n}\n\n// ============================================================================\n// Styled Sub-components\n// ============================================================================\n\ninterface DynamicContainerProps {\n  children: ReactNode;\n  className?: string;\n}\n\nexport function DynamicContainer({ children, className = '' }: DynamicContainerProps) {\n  return (\n    <div className={`absolute inset-0 flex items-center justify-center ${className}`}>\n      {children}\n    </div>\n  );\n}\n\ninterface DynamicTitleProps {\n  children: ReactNode;\n  className?: string;\n  style?: React.CSSProperties;\n}\n\nexport function DynamicTitle({ children, className = '', style }: DynamicTitleProps) {\n  return (\n    <motion.h3\n      initial={{ opacity: 0, y: 5 }}\n      animate={{ opacity: 1, y: 0 }}\n      exit={{ opacity: 0, y: -5 }}\n      className={`font-bold tracking-tight ${className}`}\n      style={style}\n    >\n      {children}\n    </motion.h3>\n  );\n}\n\ninterface DynamicDescriptionProps {\n  children: ReactNode;\n  className?: string;\n}\n\nexport function DynamicDescription({ children, className = '' }: DynamicDescriptionProps) {\n  return (\n    <motion.p\n      initial={{ opacity: 0 }}\n      animate={{ opacity: 1 }}\n      exit={{ opacity: 0 }}\n      className={`text-sm ${className}`}\n    >\n      {children}\n    </motion.p>\n  );\n}\n\n// ============================================================================\n// Content Renderers\n// ============================================================================\n\nfunction MusicContent({ expanded }: { expanded: boolean }) {\n  const { currentTrack, isPlaying, togglePlay, skipToNext, skipToPrevious, currentTime, duration } = useMusic();\n  const prefersReducedMotion = useReducedMotion();\n  const [imageError, setImageError] = useState(false);\n\n  const progressPercent = duration ? (currentTime / duration) * 100 : 0;\n\n  const formatTime = (time: number) => {\n    if (isNaN(time)) return '0:00';\n    const minutes = Math.floor(time / 60);\n    const seconds = Math.floor(time % 60);\n    return `${minutes}:${seconds.toString().padStart(2, '0')}`;\n  };\n\n  if (!expanded) {\n    // Compact music view - like iPhone\n    return (\n      <DynamicContainer className=\"px-2\">\n        <div className=\"flex items-center justify-between w-full\">\n          {/* Album art or profile */}\n          <motion.div\n            className=\"w-7 h-7 rounded-lg overflow-hidden flex-shrink-0\"\n            animate={\n              isPlaying && !prefersReducedMotion\n                ? { scale: [1, 1.03, 1] }\n                : {}\n            }\n            transition={{ duration: 2, repeat: Infinity }}\n          >\n            {currentTrack.albumArt && !imageError ? (\n              // eslint-disable-next-line @next/next/no-img-element\n              <img\n                src={currentTrack.albumArt}\n                alt={currentTrack.album}\n                className=\"w-full h-full object-cover\"\n                onError={() => setImageError(true)}\n              />\n            ) : (\n              <div\n                className=\"w-full h-full flex items-center justify-center\"\n                style={{\n                  background: 'linear-gradient(135deg, hsl(var(--theme-primary)) 0%, hsl(var(--theme-accent)) 100%)',\n                }}\n              >\n                <span className=\"text-xs\">ðŸŽµ</span>\n              </div>\n            )}\n          </motion.div>\n\n          {/* Visualizer bars */}\n          {isPlaying && (\n            <motion.div\n              className=\"flex gap-0.5 items-end h-4\"\n              initial={{ opacity: 0 }}\n              animate={{ opacity: 1 }}\n            >\n              {[...Array(3)].map((_, i) => (\n                <motion.div\n                  key={i}\n                  className=\"w-0.5 rounded-full\"\n                  style={{ backgroundColor: 'hsl(var(--theme-primary))' }}\n                  animate={\n                    prefersReducedMotion\n                      ? { height: '8px' }\n                      : { height: ['4px', '14px', '6px'] }\n                  }\n                  transition={{\n                    duration: 0.5,\n                    repeat: Infinity,\n                    delay: i * 0.12,\n                  }}\n                />\n              ))}\n            </motion.div>\n          )}\n\n          {/* Track title */}\n          <span className=\"text-white/80 text-[11px] font-medium truncate max-w-[50px]\">\n            {currentTrack.title}\n          </span>\n        </div>\n      </DynamicContainer>\n    );\n  }\n\n  // Expanded music view with full controls\n  return (\n    <DynamicContainer className=\"px-4 py-2\">\n      <div className=\"flex flex-col w-full gap-2\">\n        {/* Top row: Album art, track info, controls */}\n        <div className=\"flex items-center justify-between w-full gap-3\">\n          {/* Album art */}\n          <motion.div\n            className=\"w-14 h-14 rounded-xl overflow-hidden flex-shrink-0\"\n            style={{\n              boxShadow: '0 4px 20px hsl(var(--theme-primary) / 0.4)',\n            }}\n            animate={\n              isPlaying && !prefersReducedMotion\n                ? { scale: [1, 1.02, 1] }\n                : {}\n            }\n            transition={{ duration: 2, repeat: Infinity }}\n          >\n            {currentTrack.albumArt && !imageError ? (\n              // eslint-disable-next-line @next/next/no-img-element\n              <img\n                src={currentTrack.albumArt}\n                alt={currentTrack.album}\n                className=\"w-full h-full object-cover\"\n                onError={() => setImageError(true)}\n              />\n            ) : (\n              <div\n                className=\"w-full h-full flex items-end justify-center gap-1 p-2\"\n                style={{\n                  background: 'linear-gradient(135deg, hsl(var(--theme-primary)) 0%, hsl(var(--theme-accent)) 100%)',\n                }}\n              >\n                {/* Visualizer bars when no album art */}\n                {isPlaying && [...Array(5)].map((_, i) => (\n                  <motion.div\n                    key={i}\n                    className=\"w-1.5 bg-white/80 rounded-full\"\n                    animate={\n                      prefersReducedMotion\n                        ? { height: '40%' }\n                        : { height: ['20%', '80%', '40%', '100%', '30%'] }\n                    }\n                    transition={{\n                      duration: 0.8,\n                      repeat: Infinity,\n                      delay: i * 0.1,\n                      ease: 'easeInOut',\n                    }}\n                  />\n                ))}\n              </div>\n            )}\n          </motion.div>\n\n          {/* Track info */}\n          <div className=\"flex-1 min-w-0\">\n            <DynamicTitle className=\"text-white text-sm truncate\">\n              {currentTrack.title}\n            </DynamicTitle>\n            <DynamicDescription className=\"text-white/50 text-xs truncate\">\n              {currentTrack.artist}\n            </DynamicDescription>\n          </div>\n\n          {/* Controls */}\n          <div className=\"flex items-center gap-1\" role=\"group\" aria-label=\"Music playback controls\">\n            <motion.button\n              onClick={(e) => { e.stopPropagation(); skipToPrevious(); }}\n              whileTap={{ scale: 0.9 }}\n              className=\"w-8 h-8 rounded-full bg-white/10 flex items-center justify-center focus:outline-none focus-visible:ring-2 focus-visible:ring-white/50\"\n              aria-label=\"Previous track\"\n            >\n              <SkipBack className=\"w-4 h-4 text-white/70\" fill=\"currentColor\" aria-hidden=\"true\" />\n            </motion.button>\n            <motion.button\n              onClick={(e) => { e.stopPropagation(); togglePlay(); }}\n              whileTap={{ scale: 0.9 }}\n              className=\"w-10 h-10 rounded-full flex items-center justify-center focus:outline-none focus-visible:ring-2 focus-visible:ring-white/50\"\n              style={{\n                background: 'linear-gradient(135deg, hsl(var(--theme-primary)) 0%, hsl(var(--theme-accent)) 100%)',\n              }}\n              aria-label={isPlaying ? 'Pause' : 'Play'}\n              aria-pressed={isPlaying}\n            >\n              {isPlaying ? (\n                <Pause className=\"w-5 h-5 text-white\" fill=\"currentColor\" aria-hidden=\"true\" />\n              ) : (\n                <Play className=\"w-5 h-5 text-white ml-0.5\" fill=\"currentColor\" aria-hidden=\"true\" />\n              )}\n            </motion.button>\n            <motion.button\n              onClick={(e) => { e.stopPropagation(); skipToNext(); }}\n              whileTap={{ scale: 0.9 }}\n              className=\"w-8 h-8 rounded-full bg-white/10 flex items-center justify-center focus:outline-none focus-visible:ring-2 focus-visible:ring-white/50\"\n              aria-label=\"Next track\"\n            >\n              <SkipForward className=\"w-4 h-4 text-white/70\" fill=\"currentColor\" aria-hidden=\"true\" />\n            </motion.button>\n          </div>\n        </div>\n\n        {/* Progress bar */}\n        <div className=\"flex items-center gap-2 w-full\">\n          <span className=\"text-[10px] text-white/40 tabular-nums w-8 text-right\" aria-hidden=\"true\">\n            {formatTime(currentTime)}\n          </span>\n          <div\n            className=\"flex-1 h-1 bg-white/10 rounded-full overflow-hidden\"\n            role=\"progressbar\"\n            aria-label=\"Track progress\"\n            aria-valuenow={Math.round(progressPercent)}\n            aria-valuemin={0}\n            aria-valuemax={100}\n            aria-valuetext={`${formatTime(currentTime)} of ${formatTime(duration)}`}\n          >\n            <motion.div\n              className=\"h-full rounded-full\"\n              style={{\n                background: 'linear-gradient(90deg, hsl(var(--theme-primary)) 0%, hsl(var(--theme-accent)) 100%)',\n                width: `${progressPercent}%`,\n              }}\n              transition={{ duration: 0.1 }}\n            />\n          </div>\n          <span className=\"text-[10px] text-white/40 tabular-nums w-8\" aria-hidden=\"true\">\n            {formatTime(duration)}\n          </span>\n        </div>\n      </div>\n    </DynamicContainer>\n  );\n}\n\nfunction NotificationContent({ notification }: { notification?: { title: string; message: string; icon?: ReactNode } }) {\n  if (!notification) return null;\n\n  return (\n    <DynamicContainer className=\"px-4\">\n      <div className=\"flex items-center gap-3 w-full\">\n        <div\n          className=\"w-10 h-10 rounded-xl flex items-center justify-center flex-shrink-0\"\n          style={{\n            background: 'linear-gradient(135deg, hsl(var(--theme-primary)) 0%, hsl(var(--theme-accent)) 100%)',\n          }}\n        >\n          {notification.icon || <Bell className=\"w-5 h-5 text-white\" />}\n        </div>\n        <div className=\"flex-1 min-w-0\">\n          <DynamicTitle className=\"text-white text-sm truncate\">\n            {notification.title}\n          </DynamicTitle>\n          <DynamicDescription className=\"text-white/60 text-xs truncate\">\n            {notification.message}\n          </DynamicDescription>\n        </div>\n      </div>\n    </DynamicContainer>\n  );\n}\n\nfunction IdleContent() {\n  const { status, getStatusColor } = useProviderStatus();\n  const prefersReducedMotion = useReducedMotion();\n\n  return (\n    <DynamicContainer className=\"px-2\">\n      <div className=\"flex items-center justify-between w-full\">\n        {/* Profile image on left like iPhone */}\n        <div className=\"w-7 h-7 rounded-full overflow-hidden flex-shrink-0 border border-white/20\">\n          {/* eslint-disable-next-line @next/next/no-img-element */}\n          <img\n            src=\"/openclaw-logo.png\"\n            alt=\"James\"\n            className=\"w-full h-full object-cover\"\n          />\n        </div>\n        {/* Provider status indicator on right */}\n        <motion.div\n          className=\"w-3 h-3 rounded-full flex items-center justify-center\"\n          style={{ backgroundColor: getStatusColor() }}\n          animate={\n            status === 'connecting' && !prefersReducedMotion\n              ? { scale: [1, 1.2, 1], opacity: [1, 0.6, 1] }\n              : {}\n          }\n          transition={{ duration: 1.5, repeat: Infinity }}\n          title={`AI: ${status}`}\n        >\n          <div className=\"w-1.5 h-1.5 rounded-full bg-white/80\" />\n        </motion.div>\n      </div>\n    </DynamicContainer>\n  );\n}\n\nfunction ProviderContent({ expanded }: { expanded: boolean }) {\n  const { providerType, status, latencyMs, getStatusColor, getProviderDisplayName } = useProviderStatus();\n  const prefersReducedMotion = useReducedMotion();\n\n  const getProviderIcon = () => {\n    switch (providerType) {\n      case 'lynkr':\n        return <Wifi className=\"w-4 h-4\" style={{ color: getStatusColor() }} />;\n      case 'local':\n        return <Cpu className=\"w-4 h-4\" style={{ color: getStatusColor() }} />;\n      case 'cloud':\n      default:\n        return <Cloud className=\"w-4 h-4\" style={{ color: getStatusColor() }} />;\n    }\n  };\n\n  if (!expanded) {\n    // Compact provider view\n    return (\n      <DynamicContainer className=\"px-3\">\n        <div className=\"flex items-center justify-between w-full\">\n          <div className=\"flex items-center gap-2\">\n            <motion.div\n              className=\"w-2 h-2 rounded-full\"\n              style={{ backgroundColor: getStatusColor() }}\n              animate={\n                status === 'connecting' && !prefersReducedMotion\n                  ? { scale: [1, 1.3, 1], opacity: [1, 0.5, 1] }\n                  : {}\n              }\n              transition={{ duration: 1, repeat: Infinity }}\n            />\n            {getProviderIcon()}\n          </div>\n          <span className=\"text-white/70 text-xs font-medium\">\n            {getProviderDisplayName()}\n          </span>\n        </div>\n      </DynamicContainer>\n    );\n  }\n\n  // Expanded provider view with full status\n  return (\n    <DynamicContainer className=\"px-4\">\n      <div className=\"flex items-center justify-between w-full gap-4\">\n        <div className=\"flex items-center gap-3\">\n          {/* Provider icon with status glow */}\n          <div\n            className=\"w-12 h-12 rounded-full flex items-center justify-center relative\"\n            style={{\n              background: `linear-gradient(135deg, ${getStatusColor()}20 0%, ${getStatusColor()}10 100%)`,\n            }}\n          >\n            {providerType === 'lynkr' && <Wifi className=\"w-6 h-6\" style={{ color: getStatusColor() }} />}\n            {providerType === 'local' && <Cpu className=\"w-6 h-6\" style={{ color: getStatusColor() }} />}\n            {providerType === 'cloud' && <Cloud className=\"w-6 h-6\" style={{ color: getStatusColor() }} />}\n            {/* Pulse ring for connecting state */}\n            {status === 'connecting' && !prefersReducedMotion && (\n              <motion.div\n                className=\"absolute inset-0 rounded-full\"\n                style={{ border: `2px solid ${getStatusColor()}` }}\n                animate={{ scale: [1, 1.3], opacity: [0.8, 0] }}\n                transition={{ duration: 1.5, repeat: Infinity }}\n              />\n            )}\n          </div>\n          <div>\n            <DynamicTitle\n              className=\"text-sm\"\n              style={{ color: getStatusColor() }}\n            >\n              {getProviderDisplayName()}\n            </DynamicTitle>\n            <DynamicDescription className=\"text-white/50 text-xs capitalize\">\n              {status}\n              {latencyMs !== undefined && status === 'connected' && (\n                <span className=\"ml-2 text-white/30\">{latencyMs}ms</span>\n              )}\n            </DynamicDescription>\n          </div>\n        </div>\n        {/* Status indicator */}\n        <motion.div\n          className=\"w-3 h-3 rounded-full\"\n          style={{ backgroundColor: getStatusColor() }}\n          animate={\n            status === 'connecting' && !prefersReducedMotion\n              ? { scale: [1, 1.2, 1], opacity: [1, 0.6, 1] }\n              : {}\n          }\n          transition={{ duration: 1, repeat: Infinity }}\n        />\n      </div>\n    </DynamicContainer>\n  );\n}\n\nfunction TimerContent({ expanded }: { expanded: boolean }) {\n  const [time, setTime] = useState(125); // 2:05 in seconds\n\n  useEffect(() => {\n    const interval = setInterval(() => {\n      setTime((t) => Math.max(0, t - 1));\n    }, 1000);\n    return () => clearInterval(interval);\n  }, []);\n\n  const minutes = Math.floor(time / 60);\n  const seconds = time % 60;\n  const display = `${minutes}:${seconds.toString().padStart(2, '0')}`;\n\n  if (!expanded) {\n    return (\n      <DynamicContainer className=\"px-3\">\n        <div className=\"flex items-center justify-between w-full\">\n          <Timer className=\"w-4 h-4\" style={{ color: 'hsl(var(--theme-primary))' }} />\n          <span\n            className=\"text-sm font-bold tabular-nums\"\n            style={{ color: 'hsl(var(--theme-primary))' }}\n          >\n            {display}\n          </span>\n        </div>\n      </DynamicContainer>\n    );\n  }\n\n  return (\n    <DynamicContainer className=\"px-4\">\n      <div className=\"flex items-center justify-between w-full gap-4\">\n        <div\n          className=\"w-12 h-12 rounded-full flex items-center justify-center\"\n          style={{\n            background: 'linear-gradient(135deg, hsl(var(--theme-primary) / 0.2) 0%, hsl(var(--theme-accent) / 0.2) 100%)',\n          }}\n        >\n          <Timer className=\"w-6 h-6\" style={{ color: 'hsl(var(--theme-primary))' }} />\n        </div>\n        <div className=\"flex-1\">\n          <span\n            className=\"text-3xl font-bold tabular-nums\"\n            style={{ color: 'hsl(var(--theme-primary))' }}\n          >\n            {display}\n          </span>\n        </div>\n        <motion.button\n          whileTap={{ scale: 0.9 }}\n          className=\"w-10 h-10 rounded-full bg-white/10 flex items-center justify-center\"\n        >\n          <X className=\"w-5 h-5 text-white/70\" />\n        </motion.button>\n      </div>\n    </DynamicContainer>\n  );\n}\n\nfunction CallContent({ expanded }: { expanded: boolean }) {\n  if (!expanded) {\n    return (\n      <DynamicContainer className=\"px-3\">\n        <div className=\"flex items-center justify-between w-full\">\n          <div className=\"flex items-center gap-2\">\n            <motion.div\n              className=\"w-2 h-2 rounded-full bg-green-400\"\n              animate={{ scale: [1, 1.2, 1], opacity: [1, 0.7, 1] }}\n              transition={{ duration: 1, repeat: Infinity }}\n            />\n            <Phone className=\"w-4 h-4 text-green-400\" />\n          </div>\n          <span className=\"text-white/70 text-xs font-medium\">12:34</span>\n        </div>\n      </DynamicContainer>\n    );\n  }\n\n  return (\n    <DynamicContainer className=\"px-4\">\n      <div className=\"flex items-center justify-between w-full gap-4\">\n        <div className=\"flex items-center gap-3\">\n          <div className=\"w-12 h-12 rounded-full bg-gradient-to-br from-green-400 to-emerald-500 flex items-center justify-center\">\n            <Phone className=\"w-6 h-6 text-white\" />\n          </div>\n          <div>\n            <DynamicTitle className=\"text-white text-sm\">Incoming Call</DynamicTitle>\n            <DynamicDescription className=\"text-white/50 text-xs\">Mobile â€¢ 12:34</DynamicDescription>\n          </div>\n        </div>\n        <div className=\"flex items-center gap-2\">\n          <motion.button\n            whileTap={{ scale: 0.9 }}\n            className=\"w-10 h-10 rounded-full bg-red-500 flex items-center justify-center\"\n          >\n            <X className=\"w-5 h-5 text-white\" />\n          </motion.button>\n          <motion.button\n            whileTap={{ scale: 0.9 }}\n            className=\"w-10 h-10 rounded-full bg-green-500 flex items-center justify-center\"\n          >\n            <Phone className=\"w-5 h-5 text-white\" />\n          </motion.button>\n        </div>\n      </div>\n    </DynamicContainer>\n  );\n}\n\nfunction RecordingContent() {\n  return (\n    <DynamicContainer className=\"px-3\">\n      <div className=\"flex items-center justify-between w-full\">\n        <div className=\"flex items-center gap-2\">\n          <motion.div\n            className=\"w-2 h-2 rounded-full bg-red-500\"\n            animate={{ opacity: [1, 0.3, 1] }}\n            transition={{ duration: 1, repeat: Infinity }}\n          />\n          <Mic className=\"w-4 h-4 text-red-400\" />\n        </div>\n        <span className=\"text-white/70 text-xs font-medium\">Recording...</span>\n      </div>\n    </DynamicContainer>\n  );\n}\n\nfunction SuccessContent() {\n  return (\n    <DynamicContainer className=\"px-3\">\n      <div className=\"flex items-center gap-2\">\n        <motion.div\n          initial={{ scale: 0 }}\n          animate={{ scale: 1 }}\n          className=\"w-5 h-5 rounded-full bg-green-500 flex items-center justify-center\"\n        >\n          <Check className=\"w-3 h-3 text-white\" />\n        </motion.div>\n        <span className=\"text-green-400 text-xs font-medium\">Success</span>\n      </div>\n    </DynamicContainer>\n  );\n}\n\nfunction LoadingContent() {\n  return (\n    <DynamicContainer className=\"px-3\">\n      <div className=\"flex items-center gap-2\">\n        <motion.div\n          className=\"w-4 h-4 border-2 border-white/20 rounded-full\"\n          style={{ borderTopColor: 'hsl(var(--theme-primary))' }}\n          animate={{ rotate: 360 }}\n          transition={{ duration: 1, repeat: Infinity, ease: 'linear' }}\n        />\n        <span className=\"text-white/50 text-xs font-medium\">Loading...</span>\n      </div>\n    </DynamicContainer>\n  );\n}\n\nfunction RalphModeContent({ ralph }: { ralph?: { iteration: number; maxIterations: number; description: string } }) {\n  const prefersReducedMotion = useReducedMotion();\n\n  if (!ralph) return null;\n\n  return (\n    <DynamicContainer className=\"px-4\">\n      <div className=\"flex items-center gap-3 w-full\">\n        {/* Animated icon */}\n        <div className=\"w-10 h-10 rounded-xl bg-gradient-to-br from-indigo-500 to-purple-600 flex items-center justify-center flex-shrink-0\">\n          <motion.div\n            animate={prefersReducedMotion ? {} : { rotate: 360 }}\n            transition={{ duration: 3, repeat: Infinity, ease: 'linear' }}\n          >\n            <svg width=\"20\" height=\"20\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"white\" strokeWidth=\"2\">\n              <path d=\"M12 2v4M12 18v4M4.93 4.93l2.83 2.83M16.24 16.24l2.83 2.83M2 12h4M18 12h4M4.93 19.07l2.83-2.83M16.24 7.76l2.83-2.83\" />\n            </svg>\n          </motion.div>\n        </div>\n\n        {/* Status text */}\n        <div className=\"flex-1 min-w-0\">\n          <DynamicTitle className=\"text-white text-sm\">\n            Refining {ralph.iteration}/{ralph.maxIterations}\n          </DynamicTitle>\n          <DynamicDescription className=\"text-white/50 text-xs truncate\">\n            {ralph.description}\n          </DynamicDescription>\n        </div>\n\n        {/* Progress indicator */}\n        <div className=\"w-8 h-8 relative flex-shrink-0\">\n          <svg className=\"w-8 h-8 -rotate-90\" viewBox=\"0 0 32 32\">\n            <circle\n              cx=\"16\"\n              cy=\"16\"\n              r=\"12\"\n              stroke=\"rgba(255,255,255,0.1)\"\n              strokeWidth=\"3\"\n              fill=\"none\"\n            />\n            <motion.circle\n              cx=\"16\"\n              cy=\"16\"\n              r=\"12\"\n              stroke=\"url(#ralph-gradient)\"\n              strokeWidth=\"3\"\n              fill=\"none\"\n              strokeLinecap=\"round\"\n              strokeDasharray={75.4}\n              initial={{ strokeDashoffset: 75.4 }}\n              animate={{ strokeDashoffset: 75.4 * (1 - ralph.iteration / ralph.maxIterations) }}\n              transition={{ duration: 0.5 }}\n            />\n            <defs>\n              <linearGradient id=\"ralph-gradient\" x1=\"0%\" y1=\"0%\" x2=\"100%\" y2=\"0%\">\n                <stop offset=\"0%\" stopColor=\"#818cf8\" />\n                <stop offset=\"100%\" stopColor=\"#a855f7\" />\n              </linearGradient>\n            </defs>\n          </svg>\n        </div>\n      </div>\n    </DynamicContainer>\n  );\n}\n\n// ============================================================================\n// Main DynamicIsland Component\n// ============================================================================\n\ninterface DynamicIslandProps {\n  id?: string;\n  className?: string;\n  children?: ReactNode;\n}\n\nexport function DynamicIsland({ id, className = '', children }: DynamicIslandProps) {\n  const { state, expand, collapse } = useDynamicIsland();\n  const { isPlaying } = useMusic();\n  const prefersReducedMotion = useReducedMotion();\n  const [isHovered, setIsHovered] = useState(false);\n\n  const { size, contentType, notification } = state;\n  const isExpanded = ['large', 'tall', 'long', 'medium', 'ultra'].includes(size);\n  const preset = SIZE_PRESETS[size];\n\n  // Auto-expand for music when playing\n  useEffect(() => {\n    if (isPlaying && contentType === 'idle') {\n      // Don't auto-expand, just show music indicator\n    }\n  }, [isPlaying, contentType]);\n\n  // Handle hover to expand music\n  useEffect(() => {\n    if (isHovered && isPlaying && size === 'default') {\n      expand();\n    } else if (!isHovered && size === 'large' && contentType !== 'notification') {\n      collapse();\n    }\n  }, [isHovered, isPlaying, size, contentType, expand, collapse]);\n\n  const handleClick = () => {\n    if (size === 'default' || size === 'compact') {\n      expand();\n    } else {\n      collapse();\n    }\n  };\n\n  // Animation variants\n  const containerVariants: Variants = {\n    initial: {\n      width: SIZE_PRESETS.default.width,\n      height: SIZE_PRESETS.default.height,\n    },\n    animate: {\n      width: preset.width,\n      height: preset.height,\n      transition: prefersReducedMotion\n        ? { duration: 0.2 }\n        : {\n            type: 'spring',\n            stiffness: 400,\n            damping: 30,\n          },\n    },\n  };\n\n  // Render appropriate content\n  const renderContent = () => {\n    if (children) return children;\n\n    switch (contentType) {\n      case 'music':\n        return <MusicContent expanded={isExpanded} />;\n      case 'notification':\n        return <NotificationContent notification={notification} />;\n      case 'timer':\n        return <TimerContent expanded={isExpanded} />;\n      case 'call':\n        return <CallContent expanded={isExpanded} />;\n      case 'recording':\n        return <RecordingContent />;\n      case 'success':\n        return <SuccessContent />;\n      case 'loading':\n        return <LoadingContent />;\n      case 'ralph':\n        return <RalphModeContent ralph={state.ralph} />;\n      case 'provider':\n        return <ProviderContent expanded={isExpanded} />;\n      default:\n        // If music is playing, show music content\n        if (isPlaying) {\n          return <MusicContent expanded={isExpanded} />;\n        }\n        return <IdleContent />;\n    }\n  };\n\n  return (\n    <motion.div\n      id={id}\n      className={`dynamic-island relative cursor-pointer select-none ${className}`}\n      variants={containerVariants}\n      initial=\"initial\"\n      animate=\"animate\"\n      onClick={handleClick}\n      onMouseEnter={() => setIsHovered(true)}\n      onMouseLeave={() => setIsHovered(false)}\n      role=\"status\"\n      aria-label=\"Dynamic Island\"\n      style={{\n        transformOrigin: 'top center',\n      }}\n    >\n      {/* Background with glass effect */}\n      <motion.div\n        className=\"absolute inset-0 overflow-hidden\"\n        style={{\n          borderRadius: isExpanded ? 32 : 20,\n          background: 'linear-gradient(180deg, rgba(0, 0, 0, 0.85) 0%, rgba(0, 0, 0, 0.95) 100%)',\n          boxShadow: `\n            0 4px 30px rgba(0, 0, 0, 0.3),\n            inset 0 1px 0 rgba(255, 255, 255, 0.1),\n            0 0 0 1px rgba(255, 255, 255, 0.05)\n          `,\n        }}\n        layout\n      />\n\n      {/* Subtle glow effect when active */}\n      {(isPlaying || contentType !== 'idle') && !prefersReducedMotion && (\n        <motion.div\n          className=\"absolute inset-0 pointer-events-none\"\n          initial={{ opacity: 0 }}\n          animate={{ opacity: 0.6 }}\n          style={{\n            borderRadius: isExpanded ? 32 : 20,\n            background: `radial-gradient(ellipse at center, hsl(var(--theme-primary) / 0.15) 0%, transparent 70%)`,\n            filter: 'blur(15px)',\n          }}\n        />\n      )}\n\n      {/* Content */}\n      <AnimatePresence mode=\"wait\">\n        <motion.div\n          key={`${size}-${contentType}`}\n          className=\"relative h-full w-full\"\n          initial={{ opacity: 0, scale: 0.9 }}\n          animate={{ opacity: 1, scale: 1 }}\n          exit={{ opacity: 0, scale: 0.9 }}\n          transition={{ duration: 0.15 }}\n        >\n          {renderContent()}\n        </motion.div>\n      </AnimatePresence>\n\n      {/* Expand indicator */}\n      {isExpanded && (\n        <motion.div\n          className=\"absolute -bottom-6 left-1/2 -translate-x-1/2\"\n          initial={{ opacity: 0, y: -5 }}\n          animate={{ opacity: 0.5, y: 0 }}\n          exit={{ opacity: 0 }}\n        >\n          <ChevronDown className=\"w-4 h-4 text-white/30\" />\n        </motion.div>\n      )}\n\n      {/* Breathing animation for idle state */}\n      {contentType === 'idle' && !isPlaying && !prefersReducedMotion && (\n        <motion.div\n          className=\"absolute inset-0 pointer-events-none\"\n          style={{\n            borderRadius: 20,\n            border: '1px solid rgba(255, 255, 255, 0.1)',\n          }}\n          animate={{\n            scale: [1, 1.02, 1],\n            opacity: [0.3, 0.6, 0.3],\n          }}\n          transition={{\n            duration: 3,\n            repeat: Infinity,\n            ease: 'easeInOut',\n          }}\n        />\n      )}\n    </motion.div>\n  );\n}\n\n// ============================================================================\n// Compact Version (for status bar)\n// ============================================================================\n\nexport function DynamicIslandCompact({ className = '' }: { className?: string }) {\n  const { isPlaying, currentTrack } = useMusic();\n  const prefersReducedMotion = useReducedMotion();\n\n  return (\n    <motion.div\n      className={`inline-flex items-center gap-2 px-3 py-1.5 rounded-full cursor-pointer ${className}`}\n      style={{\n        background: 'linear-gradient(180deg, rgba(0, 0, 0, 0.8) 0%, rgba(0, 0, 0, 0.9) 100%)',\n        boxShadow: 'inset 0 1px 0 rgba(255, 255, 255, 0.1)',\n      }}\n      whileHover={{ scale: 1.02 }}\n      whileTap={{ scale: 0.98 }}\n    >\n      {isPlaying ? (\n        <>\n          <motion.div\n            className=\"flex gap-0.5\"\n            initial={{ opacity: 0 }}\n            animate={{ opacity: 1 }}\n          >\n            {[...Array(3)].map((_, i) => (\n              <motion.div\n                key={i}\n                className=\"w-0.5 rounded-full\"\n                style={{ backgroundColor: 'hsl(var(--theme-primary))' }}\n                animate={\n                  prefersReducedMotion\n                    ? { height: '8px' }\n                    : { height: ['4px', '10px', '4px'] }\n                }\n                transition={{\n                  duration: 0.5,\n                  repeat: Infinity,\n                  delay: i * 0.15,\n                }}\n              />\n            ))}\n          </motion.div>\n          <span className=\"text-white/70 text-xs font-medium truncate max-w-[100px]\">\n            {currentTrack.title}\n          </span>\n        </>\n      ) : (\n        <>\n          <div\n            className=\"w-1.5 h-1.5 rounded-full\"\n            style={{ backgroundColor: 'hsl(var(--theme-primary))' }}\n          />\n          <span className=\"text-white/50 text-xs font-medium\">James OS</span>\n        </>\n      )}\n    </motion.div>\n  );\n}\n\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 4330, "column": 0}, "map": {"version":3,"sources":["file:///Users/jamesspalding/OpenClaw-OS/src/components/ios/Desktop.tsx"],"sourcesContent":["'use client';\n\nimport { useState, useEffect, useCallback, useRef } from 'react';\nimport { motion, AnimatePresence, useReducedMotion } from 'framer-motion';\nimport { LiquidGlass } from '@/components/ui/liquid-glass';\nimport { useHomeScreen, defaultApps, GridItem, AppItem } from '@/context/HomeScreenContext';\nimport { useControlCenter } from '@/context/ControlCenterContext';\nimport { DraggableAppIcon } from './DraggableAppIcon';\nimport { AppFolder } from './AppFolder';\nimport { StatusBarWatch } from './StatusBarWatch';\nimport { DynamicIsland, DynamicIslandProvider } from './DynamicIsland';\nimport {\n  BookOpen,\n  Palette,\n  FileText,\n  Music,\n  Lock,\n  NotebookText,\n  Camera,\n  FolderKanban,\n  Box,\n  Layers,\n  RotateCcw,\n  Settings,\n  Waves,\n  Users,\n  Navigation,\n  Calendar,\n  Contact,\n  StickyNote,\n  CloudSun,\n  Gamepad2,\n  Terminal,\n  Sparkles,\n  Briefcase,\n  Search,\n  PenTool,\n  Smartphone,\n  Wrench,\n  NotebookPen,\n  CircleDot,\n  GraduationCap,\n  Map,\n  Clapperboard,\n  HeartPulse,\n  BookHeart,\n  UtensilsCrossed,\n  Compass,\n  Target,\n  Globe,\n  MessageSquare,\n  Infinity,\n  Shield,\n  BookOpenCheck,\n  Clock,\n  Bell,\n  Timer,\n  Rotate3d,\n  CircleUser,\n} from 'lucide-react';\nimport { Icons } from '@/components/icons';\nimport { motionConfig } from '@/components/motion/config';\nimport { useRouter } from 'next/navigation';\nimport { GALLERY_IMAGES } from '@/lib/gallery-images';\nimport { useSessionBrain } from '@/context/SessionBrainContext';\n\n// Screensaver rotation interval (60 seconds)\nconst SCREENSAVER_INTERVAL = 60000;\n\ninterface DesktopProps {\n  isVisible: boolean;\n}\n\n// App icons using lucide-react (same style as dock)\nconst AppIconComponents: Record<string, React.ReactNode> = {\n  // Entry/Core apps\n  story: <BookOpen className=\"w-7 h-7\" />,\n  blog: <NotebookText className=\"w-7 h-7\" />,\n  design: <Palette className=\"w-7 h-7\" />,\n  resume: <FileText className=\"w-7 h-7\" />,\n\n  // Create apps\n  music: <Music className=\"w-7 h-7\" />,\n  jamz: <Waves className=\"w-7 h-7\" />,\n  prototyping: <Layers className=\"w-7 h-7\" />,\n  notes: <StickyNote className=\"w-7 h-7\" />,\n  cowrite: <PenTool className=\"w-7 h-7\" />,\n  product: <Box className=\"w-7 h-7\" />,\n  projects: <FolderKanban className=\"w-7 h-7\" />,\n  mockit: <Smartphone className=\"w-7 h-7\" />,\n\n  // Work/Hire apps\n  humans: <Users className=\"w-7 h-7\" />,\n  activity: <Briefcase className=\"w-7 h-7\" />,\n  calendar: <Calendar className=\"w-7 h-7\" />,\n  contacts: <Contact className=\"w-7 h-7\" />,\n\n  // Explore apps\n  photos: <Camera className=\"w-7 h-7\" />,\n  inspirations: <Sparkles className=\"w-7 h-7\" />,\n  way: <Navigation className=\"w-7 h-7\" />,\n\n  // Theme showcases\n  claude: null, // uses imageUrl\n  chatgpt: null, // uses imageUrl\n  utilitarian: <Wrench className=\"w-7 h-7\" />,\n  notebook: <NotebookPen className=\"w-7 h-7\" />,\n  tao: <CircleDot className=\"w-7 h-7\" />,\n  research: <GraduationCap className=\"w-7 h-7\" />,\n  'field-guide': <Map className=\"w-7 h-7\" />,\n\n  // Social/Connect apps\n  github: <Icons.github className=\"w-7 h-7\" />,\n  linkedin: <Icons.linkedin className=\"w-7 h-7\" />,\n  x: <Icons.x className=\"w-7 h-7\" />,\n\n  // Vibes/Fun apps\n  weather: <CloudSun className=\"w-7 h-7\" />,\n  games: <Gamepad2 className=\"w-7 h-7\" />,\n  terminal: <Terminal className=\"w-7 h-7\" />,\n  reels: <Clapperboard className=\"w-7 h-7\" />,\n\n  // System apps\n  skills: <Sparkles className=\"w-7 h-7\" />,\n  vault: <Lock className=\"w-7 h-7\" />,\n  settings: <Settings className=\"w-7 h-7\" />,\n  search: <Search className=\"w-7 h-7\" />,\n\n  // Neurodiversity apps\n  regulation: <HeartPulse className=\"w-7 h-7\" />,\n  journal: <BookHeart className=\"w-7 h-7\" />,\n  food: <UtensilsCrossed className=\"w-7 h-7\" />,\n  sidequests: <Compass className=\"w-7 h-7\" />,\n  hyperfocus: <Target className=\"w-7 h-7\" />,\n\n  // Research & Knowledge apps\n  'research-app': <Globe className=\"w-7 h-7\" />,\n\n  // Missing icons - added for completeness\n  agent: <Infinity className=\"w-7 h-7\" />,\n  canvas: <Layers className=\"w-7 h-7\" />,\n  messages: <MessageSquare className=\"w-7 h-7\" />,\n  '3d-gallery': <Rotate3d className=\"w-7 h-7\" />,\n  avatar: <CircleUser className=\"w-7 h-7\" />,\n  'bubble-timer': <Timer className=\"w-7 h-7\" />,\n  security: <Shield className=\"w-7 h-7\" />,\n  wiki: <BookOpenCheck className=\"w-7 h-7\" />,\n  watch: <Clock className=\"w-7 h-7\" />,\n  updates: <Bell className=\"w-7 h-7\" />,\n  browser: <Globe className=\"w-7 h-7\" />,\n  threads: null, // uses imageUrl\n};\n\n// Helper to get icon for an app\nfunction getAppIcon(appId: string): React.ReactNode {\n  return AppIconComponents[appId] || null;\n}\n\n// Enrich app with icon\nfunction enrichAppWithIcon(app: AppItem): AppItem {\n  return {\n    ...app,\n    icon: getAppIcon(app.id),\n  };\n}\n\nexport function Desktop({ isVisible }: DesktopProps) {\n  const [currentTime, setCurrentTime] = useState(new Date());\n  const prefersReducedMotion = useReducedMotion();\n  const [focusedAppIndex, setFocusedAppIndex] = useState(0);\n  const { open: openControlCenter } = useControlCenter();\n  const [backgroundIndex, setBackgroundIndex] = useState(0);\n  const gridRef = useRef<HTMLDivElement>(null);\n  const router = useRouter();\n  const {\n    gridItems,\n    isEditMode,\n    exitEditMode,\n    resetToDefault,\n  } = useHomeScreen();\n\n  const { getUnreadCountForApp, markAppNotificationsRead } = useSessionBrain();\n\n  // Handle app open - mark notifications as read\n  const handleAppOpen = useCallback((appId: string) => {\n    markAppNotificationsRead(appId);\n  }, [markAppNotificationsRead]);\n\n  // Time update\n  useEffect(() => {\n    const interval = setInterval(() => {\n      setCurrentTime(new Date());\n    }, 1000);\n    return () => clearInterval(interval);\n  }, []);\n\n  // Screensaver: rotate background every 60 seconds\n  useEffect(() => {\n    const interval = setInterval(() => {\n      setBackgroundIndex((prev) => (prev + 1) % GALLERY_IMAGES.length);\n    }, SCREENSAVER_INTERVAL);\n    return () => clearInterval(interval);\n  }, []);\n\n  // Handle keyboard navigation for app grid\n  const handleGridKeyDown = useCallback((e: React.KeyboardEvent) => {\n    const columns = 4;\n    const itemCount = gridItems.length;\n    let newIndex = focusedAppIndex;\n    let handled = false;\n\n    switch (e.key) {\n      case 'ArrowRight':\n        newIndex = (focusedAppIndex + 1) % itemCount;\n        handled = true;\n        break;\n      case 'ArrowLeft':\n        newIndex = (focusedAppIndex - 1 + itemCount) % itemCount;\n        handled = true;\n        break;\n      case 'ArrowDown':\n        newIndex = Math.min(focusedAppIndex + columns, itemCount - 1);\n        handled = true;\n        break;\n      case 'ArrowUp':\n        newIndex = Math.max(focusedAppIndex - columns, 0);\n        handled = true;\n        break;\n      case 'Home':\n        newIndex = 0;\n        handled = true;\n        break;\n      case 'End':\n        newIndex = itemCount - 1;\n        handled = true;\n        break;\n      case 'Enter':\n      case ' ':\n        // Activate the focused app\n        const item = gridItems[focusedAppIndex];\n        if (item && item.type === 'app' && item.item.href) {\n          e.preventDefault();\n          router.push(item.item.href);\n        }\n        return;\n    }\n\n    if (handled) {\n      e.preventDefault();\n      setFocusedAppIndex(newIndex);\n      // Focus the app icon\n      const icons = gridRef.current?.querySelectorAll<HTMLElement>('[data-app-icon]');\n      icons?.[newIndex]?.focus();\n    }\n  }, [focusedAppIndex, gridItems, router]);\n\n  // Close edit mode when clicking outside or pressing escape\n  useEffect(() => {\n    const handleKeyDown = (e: KeyboardEvent) => {\n      if (e.key === 'Escape') {\n        if (isEditMode) {\n          exitEditMode();\n        } else {\n          // Global escape to go back\n          router.back();\n        }\n      }\n    };\n\n    const handleClickOutside = (e: MouseEvent) => {\n      const target = e.target as HTMLElement;\n      // Check if click is on the background area, not on icons\n      if (isEditMode && target.closest('.app-grid-container') === null && !target.closest('.edit-mode-toolbar')) {\n        exitEditMode();\n      }\n    };\n\n    window.addEventListener('keydown', handleKeyDown);\n    window.addEventListener('mousedown', handleClickOutside);\n\n    return () => {\n      window.removeEventListener('keydown', handleKeyDown);\n      window.removeEventListener('mousedown', handleClickOutside);\n    };\n  }, [isEditMode, exitEditMode, router]);\n\n  const formatTime = (date: Date) => {\n    return date.toLocaleTimeString('en-US', {\n      hour: 'numeric',\n      minute: '2-digit',\n      hour12: true,\n    });\n  };\n\n  if (!isVisible) return null;\n\n  return (\n    <motion.div\n      className=\"fixed inset-0 z-20 flex flex-col\"\n      initial={prefersReducedMotion ? { opacity: 0 } : { opacity: 0, scale: 0.95, filter: 'blur(20px)' }}\n      animate={prefersReducedMotion ? { opacity: 1 } : { opacity: 1, scale: 1, filter: 'blur(0px)' }}\n      transition={prefersReducedMotion ? { duration: 0.15 } : { duration: 0.5, ease: motionConfig.ease.smooth }}\n    >\n      {/* Screensaver background with crossfade */}\n      <div className=\"absolute inset-0 overflow-hidden\">\n        <AnimatePresence mode=\"sync\">\n          <motion.div\n            key={backgroundIndex}\n            className=\"absolute inset-0 bg-cover bg-center bg-no-repeat\"\n            style={{\n              backgroundImage: `url(${GALLERY_IMAGES[backgroundIndex].src})`,\n            }}\n            initial={{ opacity: 0, scale: 1.05 }}\n            animate={{ opacity: 1, scale: 1 }}\n            exit={{ opacity: 0 }}\n            transition={{ duration: 1.5, ease: 'easeInOut' }}\n          />\n        </AnimatePresence>\n      </div>\n\n      {/* Dark overlay for readability */}\n      <div className=\"absolute inset-0 bg-black/30\" />\n\n      {/* Edit Mode Indicator */}\n      <AnimatePresence>\n        {isEditMode && (\n          <motion.div\n            className=\"edit-mode-toolbar absolute top-20 left-1/2 z-50\"\n            initial={{ opacity: 0, y: -20, x: '-50%' }}\n            animate={{ opacity: 1, y: 0, x: '-50%' }}\n            exit={{ opacity: 0, y: -20, x: '-50%' }}\n            role=\"toolbar\"\n            aria-label=\"Edit mode controls\"\n          >\n            <LiquidGlass\n              variant=\"floating\"\n              intensity=\"medium\"\n              className=\"!px-4 !py-2 !rounded-full flex items-center gap-3\"\n              rippleEffect={false}\n            >\n              <span className=\"text-white/80 text-sm font-medium\" aria-live=\"polite\">Edit Mode</span>\n              <div className=\"w-px h-4 bg-white/20\" aria-hidden=\"true\" />\n              <button\n                onClick={resetToDefault}\n                className=\"text-white/60 hover:text-white transition-colors flex items-center gap-1.5 text-sm focus:outline-none focus-visible:ring-2 focus-visible:ring-white/50 rounded-md px-2 py-1\"\n                aria-label=\"Reset to default layout\"\n              >\n                <RotateCcw className=\"w-3.5 h-3.5\" aria-hidden=\"true\" />\n                Reset\n              </button>\n              <button\n                onClick={exitEditMode}\n                className=\"text-white/90 hover:text-white transition-colors text-sm font-medium focus:outline-none focus-visible:ring-2 focus-visible:ring-white/50 rounded-md px-2 py-1\"\n                aria-label=\"Exit edit mode\"\n              >\n                Done\n              </button>\n            </LiquidGlass>\n          </motion.div>\n        )}\n      </AnimatePresence>\n\n      {/* Status Bar - iPhone style with Dynamic Island */}\n      <DynamicIslandProvider>\n        <motion.header\n          className=\"relative z-30 flex items-start justify-between px-6 pt-3 pb-2 text-white/80\"\n          initial={prefersReducedMotion ? false : { opacity: 0, y: -20 }}\n          animate={{ opacity: 1, y: 0 }}\n          transition={prefersReducedMotion ? { duration: 0.15 } : { delay: 0.2 }}\n          role=\"banner\"\n          aria-label=\"System status bar\"\n        >\n          {/* Left - Watch */}\n          <StatusBarWatch />\n\n          {/* Center - Dynamic Island (prominent, like iPhone) */}\n          <div className=\"flex-1 flex justify-center -mt-1\">\n            <DynamicIsland className=\"z-50\" />\n          </div>\n\n          {/* Right - Tap area to open Control Center (icons are inside the shelf) */}\n          <button\n            onClick={openControlCenter}\n            className=\"w-16 h-8 flex items-center justify-end pt-2\"\n            aria-label=\"Open Control Center\"\n          >\n            {/* Subtle grip indicator */}\n            <div className=\"w-1 h-4 rounded-full bg-white/20\" />\n          </button>\n        </motion.header>\n      </DynamicIslandProvider>\n\n      {/* Main Content Area */}\n      <div className=\"relative z-10 flex-1 flex flex-col items-center justify-center px-6 pb-24\">\n        {/* Welcome Message */}\n        <motion.div\n          className=\"text-center mb-12\"\n          initial={prefersReducedMotion ? false : { opacity: 0, y: 20 }}\n          animate={{ opacity: 1, y: 0 }}\n          transition={prefersReducedMotion ? { duration: 0.15 } : { delay: 0.15 }}\n        >\n          <h1 className=\"text-white text-3xl sm:text-4xl font-bold mb-2\">\n            Welcome to OpenClaw-OS\n          </h1>\n          <p className=\"text-white/50 text-sm sm:text-base\">\n            {isEditMode ? 'Long press and drag to rearrange â€¢ Drag icon onto another to create folder' : 'Your agentic workspace'}\n          </p>\n        </motion.div>\n\n        {/* App Grid - 4 columns, 3 rows with folders */}\n        <div\n          ref={gridRef}\n          className=\"app-grid-container grid grid-cols-4 gap-4 sm:gap-6 max-w-md sm:max-w-lg\"\n          role=\"grid\"\n          aria-label=\"Application grid\"\n          onKeyDown={handleGridKeyDown}\n        >\n          {gridItems.map((gridItem, index) => {\n            if (gridItem.type === 'folder') {\n              return (\n                <AppFolder\n                  key={gridItem.item.id}\n                  folder={{\n                    ...gridItem.item,\n                    apps: gridItem.item.apps.map(enrichAppWithIcon),\n                  }}\n                  index={index}\n                  delay={0.1}\n                />\n              );\n            } else {\n              const app = enrichAppWithIcon(gridItem.item);\n              return (\n                <DraggableAppIcon\n                  key={app.id}\n                  app={app}\n                  index={index}\n                  delay={0.1}\n                  tabIndex={index === focusedAppIndex ? 0 : -1}\n                  onFocus={() => setFocusedAppIndex(index)}\n                  notificationCount={getUnreadCountForApp(app.id)}\n                  onAppOpen={handleAppOpen}\n                />\n              );\n            }\n          })}\n        </div>\n      </div>\n\n      {/* Bottom Safe Area for Dock */}\n      <div className=\"h-24\" />\n    </motion.div>\n  );\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 5303, "column": 0}, "map": {"version":3,"sources":["file:///Users/jamesspalding/OpenClaw-OS/src/components/ios/IOSHome.tsx"],"sourcesContent":["'use client';\n\nimport { useState, useEffect, useCallback } from 'react';\nimport { AnimatePresence, motion } from 'framer-motion';\nimport { LockScreen } from './LockScreen';\nimport { Desktop } from './Desktop';\nimport { HomeScreenProvider } from '@/context/HomeScreenContext';\nimport { GALLERY_IMAGES } from '@/lib/gallery-images';\n\nconst UNLOCK_KEY = 'openclaw_unlocked';\n\n// Preload images in the background\nfunction preloadImages(urls: string[]): Promise<void[]> {\n  return Promise.all(\n    urls.map(\n      (url) =>\n        new Promise<void>((resolve) => {\n          const img = new Image();\n          img.onload = () => resolve();\n          img.onerror = () => resolve(); // Don't block on errors\n          img.src = url;\n        })\n    )\n  );\n}\n\nfunction IOSHomeContent() {\n  const [isLocked, setIsLocked] = useState(true);\n  const [showDesktop, setShowDesktop] = useState(false);\n  const [isHydrated, setIsHydrated] = useState(false);\n  const [backgroundReady, setBackgroundReady] = useState(false);\n\n  // Check sessionStorage on mount to restore unlock state\n  useEffect(() => {\n    const wasUnlocked = sessionStorage.getItem(UNLOCK_KEY) === 'true';\n    if (wasUnlocked) {\n      setIsLocked(false);\n      setShowDesktop(true);\n    }\n    setIsHydrated(true);\n\n    // Preload home screen backgrounds in parallel\n    const imagesToPreload = [\n      '/openclaw-logo.png',\n      ...GALLERY_IMAGES.slice(0, 3).map((img) => img.src),\n    ];\n    preloadImages(imagesToPreload);\n  }, []);\n\n  // Callback when 3D background is ready\n  const handleBackgroundReady = useCallback(() => {\n    setBackgroundReady(true);\n  }, []);\n\n  const handleUnlock = () => {\n    setIsLocked(false);\n    sessionStorage.setItem(UNLOCK_KEY, 'true');\n    // Small delay before showing desktop for smooth transition\n    setTimeout(() => {\n      setShowDesktop(true);\n    }, 100);\n  };\n\n  // Allow re-locking with Escape key (for demo purposes)\n  useEffect(() => {\n    const handleKeyDown = (e: KeyboardEvent) => {\n      if (e.key === 'Escape' && !isLocked) {\n        setShowDesktop(false);\n        sessionStorage.removeItem(UNLOCK_KEY);\n        setTimeout(() => {\n          setIsLocked(true);\n          setBackgroundReady(false);\n        }, 300);\n      }\n    };\n\n    window.addEventListener('keydown', handleKeyDown);\n    return () => window.removeEventListener('keydown', handleKeyDown);\n  }, [isLocked]);\n\n  // Don't render until hydrated to avoid flash\n  if (!isHydrated) {\n    return (\n      <div className=\"min-h-screen bg-slate-950\">\n        {/* Show a dark background while hydrating - matches tunnel start */}\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"min-h-screen bg-slate-950 overflow-hidden\">\n      <AnimatePresence mode=\"wait\">\n        {isLocked && (\n          <motion.div\n            key=\"lockscreen\"\n            exit={{\n              opacity: 0,\n              scale: 1.02,\n              filter: 'blur(20px)',\n              y: -30,\n            }}\n            transition={{\n              duration: 0.4,\n              ease: [0.23, 1, 0.32, 1],\n            }}\n          >\n            <LockScreen\n              onUnlock={handleUnlock}\n              onBackgroundReady={handleBackgroundReady}\n              backgroundReady={backgroundReady}\n            />\n          </motion.div>\n        )}\n      </AnimatePresence>\n\n      <Desktop isVisible={showDesktop} />\n    </div>\n  );\n}\n\nexport function IOSHome() {\n  return (\n    <HomeScreenProvider>\n      <IOSHomeContent />\n    </HomeScreenProvider>\n  );\n}\n"],"names":[],"mappings":";;;;;AAEA;AACA;AAAA;AACA;AACA;AACA;AACA;;;AAPA;;;;;;;AASA,MAAM,aAAa;AAEnB,mCAAmC;AACnC,SAAS,cAAc,IAAc;IACnC,OAAO,QAAQ,GAAG,CAChB,KAAK,GAAG,CACN,CAAC,MACC,IAAI,QAAc,CAAC;YACjB,MAAM,MAAM,IAAI;YAChB,IAAI,MAAM,GAAG,IAAM;YACnB,IAAI,OAAO,GAAG,IAAM,WAAW,wBAAwB;YACvD,IAAI,GAAG,GAAG;QACZ;AAGR;AAEA,SAAS;;IACP,MAAM,CAAC,UAAU,YAAY,GAAG,IAAA,kXAAQ,EAAC;IACzC,MAAM,CAAC,aAAa,eAAe,GAAG,IAAA,kXAAQ,EAAC;IAC/C,MAAM,CAAC,YAAY,cAAc,GAAG,IAAA,kXAAQ,EAAC;IAC7C,MAAM,CAAC,iBAAiB,mBAAmB,GAAG,IAAA,kXAAQ,EAAC;IAEvD,wDAAwD;IACxD,IAAA,mXAAS;oCAAC;YACR,MAAM,cAAc,eAAe,OAAO,CAAC,gBAAgB;YAC3D,IAAI,aAAa;gBACf,YAAY;gBACZ,eAAe;YACjB;YACA,cAAc;YAEd,8CAA8C;YAC9C,MAAM,kBAAkB;gBACtB;mBACG,oJAAc,CAAC,KAAK,CAAC,GAAG,GAAG,GAAG;gDAAC,CAAC,MAAQ,IAAI,GAAG;;aACnD;YACD,cAAc;QAChB;mCAAG,EAAE;IAEL,uCAAuC;IACvC,MAAM,wBAAwB,IAAA,qXAAW;6DAAC;YACxC,mBAAmB;QACrB;4DAAG,EAAE;IAEL,MAAM,eAAe;QACnB,YAAY;QACZ,eAAe,OAAO,CAAC,YAAY;QACnC,2DAA2D;QAC3D,WAAW;YACT,eAAe;QACjB,GAAG;IACL;IAEA,uDAAuD;IACvD,IAAA,mXAAS;oCAAC;YACR,MAAM;0DAAgB,CAAC;oBACrB,IAAI,EAAE,GAAG,KAAK,YAAY,CAAC,UAAU;wBACnC,eAAe;wBACf,eAAe,UAAU,CAAC;wBAC1B;sEAAW;gCACT,YAAY;gCACZ,mBAAmB;4BACrB;qEAAG;oBACL;gBACF;;YAEA,OAAO,gBAAgB,CAAC,WAAW;YACnC;4CAAO,IAAM,OAAO,mBAAmB,CAAC,WAAW;;QACrD;mCAAG;QAAC;KAAS;IAEb,6CAA6C;IAC7C,IAAI,CAAC,YAAY;QACf,qBACE,sYAAC;YAAI,WAAU;;;;;;IAInB;IAEA,qBACE,sYAAC;QAAI,WAAU;;0BACb,sYAAC,2VAAe;gBAAC,MAAK;0BACnB,0BACC,sYAAC,mVAAM,CAAC,GAAG;oBAET,MAAM;wBACJ,SAAS;wBACT,OAAO;wBACP,QAAQ;wBACR,GAAG,CAAC;oBACN;oBACA,YAAY;wBACV,UAAU;wBACV,MAAM;4BAAC;4BAAM;4BAAG;4BAAM;yBAAE;oBAC1B;8BAEA,cAAA,sYAAC,wJAAU;wBACT,UAAU;wBACV,mBAAmB;wBACnB,iBAAiB;;;;;;mBAff;;;;;;;;;;0BAqBV,sYAAC,kJAAO;gBAAC,WAAW;;;;;;;;;;;;AAG1B;GA5FS;KAAA;AA8FF,SAAS;IACd,qBACE,sYAAC,6JAAkB;kBACjB,cAAA,sYAAC;;;;;;;;;;AAGP;MANgB"}},
    {"offset": {"line": 5488, "column": 0}, "map": {"version":3,"sources":["file:///Users/jamesspalding/OpenClaw-OS/src/components/ios/AppIcon.tsx"],"sourcesContent":["'use client';\n\nimport { useRef, useCallback } from 'react';\nimport { motion } from 'framer-motion';\nimport Link from 'next/link';\nimport { useRouter } from 'next/navigation';\n\ninterface AppIconProps {\n  name: string;\n  href?: string;\n  icon?: React.ReactNode;\n  imageUrl?: string;\n  gradient: string;\n  delay?: number;\n  external?: boolean;\n  onClick?: () => void;\n}\n\n// Store transition origin for page animations\nexport const APP_TRANSITION_KEY = 'openclaw_appTransition';\n\nexport function AppIcon({ name, href, icon, imageUrl, gradient, delay = 0, external, onClick }: AppIconProps) {\n  const iconRef = useRef<HTMLDivElement>(null);\n  const router = useRouter();\n\n  const handleClick = useCallback((e: React.MouseEvent) => {\n    e.preventDefault();\n\n    // Custom onClick handler (e.g., for Claw AI chat)\n    if (onClick) {\n      onClick();\n      return;\n    }\n\n    // External links open in new tab\n    if (external && href) {\n      window.open(href, '_blank', 'noopener,noreferrer');\n      return;\n    }\n\n    // Internal navigation with transition\n    if (href) {\n      if (iconRef.current) {\n        const rect = iconRef.current.getBoundingClientRect();\n        const transitionData = {\n          x: rect.left + rect.width / 2,\n          y: rect.top + rect.height / 2,\n          width: rect.width,\n          height: rect.height,\n          gradient,\n          timestamp: Date.now(),\n        };\n        sessionStorage.setItem(APP_TRANSITION_KEY, JSON.stringify(transitionData));\n      }\n      router.push(href);\n    }\n  }, [href, gradient, router, external, onClick]);\n\n  return (\n    <motion.div\n      initial={{ opacity: 0, scale: 0.5, y: 20 }}\n      animate={{ opacity: 1, scale: 1, y: 0 }}\n      transition={{\n        delay,\n        type: 'spring',\n        stiffness: 300,\n        damping: 20,\n      }}\n      whileHover={{ scale: 1.05 }}\n      whileTap={{ scale: 0.95 }}\n      className=\"flex flex-col items-center gap-2\"\n    >\n      <div\n        ref={iconRef}\n        onClick={handleClick}\n        className=\"block cursor-pointer\"\n      >\n        <div\n          className=\"w-16 h-16 sm:w-[72px] sm:h-[72px] rounded-[18px] sm:rounded-[20px] flex items-center justify-center shadow-lg relative overflow-hidden\"\n          style={{ background: imageUrl ? 'transparent' : gradient }}\n        >\n          {imageUrl ? (\n            /* Custom image icon */\n            <img\n              src={imageUrl}\n              alt={name}\n              className=\"w-full h-full object-cover\"\n            />\n          ) : (\n            <>\n              {/* Glass overlay */}\n              <div className=\"absolute inset-0 bg-gradient-to-br from-white/25 via-transparent to-transparent\" />\n              <div className=\"absolute inset-0 bg-gradient-to-t from-black/10 to-transparent\" />\n\n              {/* Icon */}\n              <div className=\"relative z-10 text-white\">\n                {icon}\n              </div>\n            </>\n          )}\n        </div>\n      </div>\n      <span className=\"text-white/90 text-xs font-medium text-center max-w-[72px] truncate\">\n        {name}\n      </span>\n    </motion.div>\n  );\n}\n\n// Custom SVG Icons with iOS-style aesthetics\nexport const AppIcons = {\n  // Story icon - open book\n  Story: () => (\n    <svg width=\"32\" height=\"32\" viewBox=\"0 0 32 32\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\n      <path\n        d=\"M6 8C6 6.89543 6.89543 6 8 6H14C15.1046 6 16 6.89543 16 8V26C16 26 14 24 10 24C6 24 6 26 6 26V8Z\"\n        fill=\"white\"\n        fillOpacity=\"0.9\"\n      />\n      <path\n        d=\"M26 8C26 6.89543 25.1046 6 24 6H18C16.8954 6 16 6.89543 16 8V26C16 26 18 24 22 24C26 24 26 26 26 26V8Z\"\n        fill=\"white\"\n        fillOpacity=\"0.7\"\n      />\n      <path d=\"M9 11H13M9 15H13M9 19H11\" stroke=\"currentColor\" strokeOpacity=\"0.3\" strokeWidth=\"1.5\" strokeLinecap=\"round\" />\n      <path d=\"M19 11H23M19 15H23M21 19H23\" stroke=\"currentColor\" strokeOpacity=\"0.3\" strokeWidth=\"1.5\" strokeLinecap=\"round\" />\n    </svg>\n  ),\n\n  // Design icon - palette/brush\n  Design: () => (\n    <svg width=\"32\" height=\"32\" viewBox=\"0 0 32 32\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\n      <circle cx=\"16\" cy=\"16\" r=\"11\" fill=\"white\" fillOpacity=\"0.9\" />\n      <circle cx=\"12\" cy=\"11\" r=\"2.5\" fill=\"#FF6B6B\" />\n      <circle cx=\"20\" cy=\"11\" r=\"2.5\" fill=\"#4ECDC4\" />\n      <circle cx=\"11\" cy=\"18\" r=\"2.5\" fill=\"#45B7D1\" />\n      <circle cx=\"19\" cy=\"19\" r=\"2.5\" fill=\"#96CEB4\" />\n      <circle cx=\"16\" cy=\"16\" r=\"3\" fill=\"white\" />\n    </svg>\n  ),\n\n  // Resume icon - document with person\n  Resume: () => (\n    <svg width=\"32\" height=\"32\" viewBox=\"0 0 32 32\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\n      <rect x=\"7\" y=\"4\" width=\"18\" height=\"24\" rx=\"2\" fill=\"white\" fillOpacity=\"0.9\" />\n      <circle cx=\"16\" cy=\"12\" r=\"4\" fill=\"currentColor\" fillOpacity=\"0.2\" />\n      <path\n        d=\"M10 24C10 20.6863 12.6863 18 16 18C19.3137 18 22 20.6863 22 24\"\n        stroke=\"currentColor\"\n        strokeOpacity=\"0.2\"\n        strokeWidth=\"2\"\n        strokeLinecap=\"round\"\n      />\n    </svg>\n  ),\n\n  // Music icon - note with waves\n  Music: () => (\n    <svg width=\"32\" height=\"32\" viewBox=\"0 0 32 32\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\n      <circle cx=\"11\" cy=\"22\" r=\"4\" fill=\"white\" fillOpacity=\"0.9\" />\n      <circle cx=\"23\" cy=\"19\" r=\"4\" fill=\"white\" fillOpacity=\"0.7\" />\n      <path d=\"M15 22V8L27 5V19\" stroke=\"white\" strokeWidth=\"3\" strokeLinecap=\"round\" strokeLinejoin=\"round\" />\n      <path d=\"M5 12C7 10 9 10 11 12\" stroke=\"white\" strokeOpacity=\"0.5\" strokeWidth=\"1.5\" strokeLinecap=\"round\" />\n      <path d=\"M3 16C6 13 8 13 11 16\" stroke=\"white\" strokeOpacity=\"0.3\" strokeWidth=\"1.5\" strokeLinecap=\"round\" />\n    </svg>\n  ),\n\n  // Jamz Studio icon - DAW waveform with mixing board aesthetic\n  Jamz: () => (\n    <svg width=\"32\" height=\"32\" viewBox=\"0 0 32 32\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\n      {/* Main waveform bars */}\n      <rect x=\"4\" y=\"14\" width=\"3\" height=\"8\" rx=\"1.5\" fill=\"white\" fillOpacity=\"0.9\" />\n      <rect x=\"9\" y=\"10\" width=\"3\" height=\"16\" rx=\"1.5\" fill=\"white\" fillOpacity=\"0.85\" />\n      <rect x=\"14\" y=\"6\" width=\"3\" height=\"24\" rx=\"1.5\" fill=\"white\" fillOpacity=\"0.95\" />\n      <rect x=\"19\" y=\"11\" width=\"3\" height=\"14\" rx=\"1.5\" fill=\"white\" fillOpacity=\"0.8\" />\n      <rect x=\"24\" y=\"13\" width=\"3\" height=\"10\" rx=\"1.5\" fill=\"white\" fillOpacity=\"0.9\" />\n      {/* Mixing knob accents */}\n      <circle cx=\"7\" cy=\"26\" r=\"2\" fill=\"white\" fillOpacity=\"0.6\" />\n      <circle cx=\"16\" cy=\"26\" r=\"2\" fill=\"white\" fillOpacity=\"0.6\" />\n      <circle cx=\"25\" cy=\"26\" r=\"2\" fill=\"white\" fillOpacity=\"0.6\" />\n      {/* Top accent line */}\n      <path d=\"M4 4H28\" stroke=\"white\" strokeOpacity=\"0.4\" strokeWidth=\"1.5\" strokeLinecap=\"round\" />\n    </svg>\n  ),\n\n  // Vault icon - lock with shield\n  Vault: () => (\n    <svg width=\"32\" height=\"32\" viewBox=\"0 0 32 32\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\n      <path\n        d=\"M16 4L6 8V14C6 21.732 10.268 27.268 16 28C21.732 27.268 26 21.732 26 14V8L16 4Z\"\n        fill=\"white\"\n        fillOpacity=\"0.9\"\n      />\n      <rect x=\"12\" y=\"14\" width=\"8\" height=\"8\" rx=\"1\" fill=\"currentColor\" fillOpacity=\"0.25\" />\n      <path d=\"M14 14V12C14 10.8954 14.8954 10 16 10C17.1046 10 18 10.8954 18 12V14\" stroke=\"currentColor\" strokeOpacity=\"0.3\" strokeWidth=\"2\" strokeLinecap=\"round\" />\n      <circle cx=\"16\" cy=\"18\" r=\"1\" fill=\"currentColor\" fillOpacity=\"0.4\" />\n    </svg>\n  ),\n\n  // Blog icon - pencil with lines\n  Blog: () => (\n    <svg width=\"32\" height=\"32\" viewBox=\"0 0 32 32\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\n      <rect x=\"6\" y=\"6\" width=\"20\" height=\"20\" rx=\"3\" fill=\"white\" fillOpacity=\"0.9\" />\n      <path d=\"M10 12H22\" stroke=\"currentColor\" strokeOpacity=\"0.2\" strokeWidth=\"2\" strokeLinecap=\"round\" />\n      <path d=\"M10 16H22\" stroke=\"currentColor\" strokeOpacity=\"0.2\" strokeWidth=\"2\" strokeLinecap=\"round\" />\n      <path d=\"M10 20H17\" stroke=\"currentColor\" strokeOpacity=\"0.2\" strokeWidth=\"2\" strokeLinecap=\"round\" />\n      <path\n        d=\"M20 17L24 13L27 16L23 20L20 21L20 17Z\"\n        fill=\"#FFB347\"\n        stroke=\"#FFB347\"\n        strokeWidth=\"0.5\"\n      />\n    </svg>\n  ),\n\n  // Lab icon - beaker with bubbles\n  Lab: () => (\n    <svg width=\"32\" height=\"32\" viewBox=\"0 0 32 32\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\n      <path\n        d=\"M12 6H20V12L26 26H6L12 12V6Z\"\n        fill=\"white\"\n        fillOpacity=\"0.9\"\n      />\n      <path d=\"M12 6H20\" stroke=\"white\" strokeWidth=\"2\" strokeLinecap=\"round\" />\n      <path\n        d=\"M9 20H23L26 26H6L9 20Z\"\n        fill=\"#A78BFA\"\n        fillOpacity=\"0.5\"\n      />\n      <circle cx=\"12\" cy=\"22\" r=\"1.5\" fill=\"white\" fillOpacity=\"0.8\" />\n      <circle cx=\"16\" cy=\"23\" r=\"1\" fill=\"white\" fillOpacity=\"0.6\" />\n      <circle cx=\"19\" cy=\"21\" r=\"1.5\" fill=\"white\" fillOpacity=\"0.7\" />\n    </svg>\n  ),\n\n  // Settings icon - gear\n  Settings: () => (\n    <svg width=\"32\" height=\"32\" viewBox=\"0 0 32 32\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\n      <path\n        fillRule=\"evenodd\"\n        clipRule=\"evenodd\"\n        d=\"M16 6L18.5 8.5L22 8L24 12L22 14.5V17.5L24 20L22 24L18.5 23.5L16 26L13.5 23.5L10 24L8 20L10 17.5V14.5L8 12L10 8L13.5 8.5L16 6Z\"\n        fill=\"white\"\n        fillOpacity=\"0.9\"\n      />\n      <circle cx=\"16\" cy=\"16\" r=\"4\" fill=\"currentColor\" fillOpacity=\"0.2\" />\n    </svg>\n  ),\n\n  // Humans icon - people silhouettes for people search\n  Humans: () => (\n    <svg width=\"32\" height=\"32\" viewBox=\"0 0 32 32\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\n      {/* Main person in center */}\n      <circle cx=\"16\" cy=\"10\" r=\"4\" fill=\"white\" fillOpacity=\"0.95\" />\n      <path\n        d=\"M10 24C10 20.134 12.686 17 16 17C19.314 17 22 20.134 22 24\"\n        stroke=\"white\"\n        strokeOpacity=\"0.95\"\n        strokeWidth=\"3\"\n        strokeLinecap=\"round\"\n      />\n      {/* Person on left */}\n      <circle cx=\"7\" cy=\"12\" r=\"2.5\" fill=\"white\" fillOpacity=\"0.6\" />\n      <path\n        d=\"M3 22C3 19.5 4.8 17.5 7 17.5C9.2 17.5 11 19.5 11 22\"\n        stroke=\"white\"\n        strokeOpacity=\"0.5\"\n        strokeWidth=\"2\"\n        strokeLinecap=\"round\"\n      />\n      {/* Person on right */}\n      <circle cx=\"25\" cy=\"12\" r=\"2.5\" fill=\"white\" fillOpacity=\"0.6\" />\n      <path\n        d=\"M21 22C21 19.5 22.8 17.5 25 17.5C27.2 17.5 29 19.5 29 22\"\n        stroke=\"white\"\n        strokeOpacity=\"0.5\"\n        strokeWidth=\"2\"\n        strokeLinecap=\"round\"\n      />\n      {/* Search magnifier accent */}\n      <circle cx=\"24\" cy=\"8\" r=\"3\" stroke=\"white\" strokeOpacity=\"0.8\" strokeWidth=\"1.5\" fill=\"none\" />\n      <path d=\"M26.5 10.5L28.5 12.5\" stroke=\"white\" strokeOpacity=\"0.8\" strokeWidth=\"1.5\" strokeLinecap=\"round\" />\n    </svg>\n  ),\n\n  // Canvas icon - infinite canvas with shapes and grid\n  Canvas: () => (\n    <svg width=\"32\" height=\"32\" viewBox=\"0 0 32 32\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\n      {/* Grid background suggesting infinite canvas */}\n      <rect x=\"4\" y=\"4\" width=\"24\" height=\"24\" rx=\"3\" fill=\"white\" fillOpacity=\"0.15\" />\n      {/* Grid lines */}\n      <path d=\"M10 4V28M16 4V28M22 4V28\" stroke=\"white\" strokeOpacity=\"0.2\" strokeWidth=\"0.5\" />\n      <path d=\"M4 10H28M4 16H28M4 22H28\" stroke=\"white\" strokeOpacity=\"0.2\" strokeWidth=\"0.5\" />\n      {/* Creative shapes on canvas */}\n      <rect x=\"7\" y=\"7\" width=\"6\" height=\"6\" rx=\"1\" fill=\"white\" fillOpacity=\"0.9\" />\n      <circle cx=\"22\" cy=\"10\" r=\"4\" fill=\"white\" fillOpacity=\"0.8\" />\n      <path d=\"M8 19L12 25H4L8 19Z\" fill=\"white\" fillOpacity=\"0.85\" />\n      {/* Connection line suggesting flow */}\n      <path d=\"M13 10H18\" stroke=\"white\" strokeOpacity=\"0.6\" strokeWidth=\"1.5\" strokeLinecap=\"round\" strokeDasharray=\"2 2\" />\n      <path d=\"M12 22L18 15\" stroke=\"white\" strokeOpacity=\"0.6\" strokeWidth=\"1.5\" strokeLinecap=\"round\" strokeDasharray=\"2 2\" />\n      {/* Sticky note / text block */}\n      <rect x=\"17\" y=\"17\" width=\"9\" height=\"7\" rx=\"1\" fill=\"white\" fillOpacity=\"0.9\" />\n      <path d=\"M19 20H24M19 23H22\" stroke=\"currentColor\" strokeOpacity=\"0.25\" strokeWidth=\"1\" strokeLinecap=\"round\" />\n      {/* Pencil cursor accent */}\n      <path d=\"M25 5L27 7L24 10L22 8L25 5Z\" fill=\"#FFB347\" />\n    </svg>\n  ),\n};\n\n// Gradient presets for icons - uses theme variables where appropriate\nexport const AppGradients = {\n  story: 'linear-gradient(135deg, #667eea 0%, #764ba2 100%)',\n  design: 'linear-gradient(135deg, #f093fb 0%, #f5576c 100%)',\n  resume: 'linear-gradient(135deg, #4facfe 0%, #00f2fe 100%)',\n  music: 'linear-gradient(135deg, #fa709a 0%, #fee140 100%)',\n  // Jamz uses theme gradient for consistency\n  jamz: 'linear-gradient(135deg, hsl(var(--theme-primary, 262 83% 58%)) 0%, hsl(var(--theme-accent, 187 94% 43%)) 100%)',\n  vault: 'linear-gradient(135deg, #30cfd0 0%, #330867 100%)',\n  blog: 'linear-gradient(135deg, #a8edea 0%, #fed6e3 100%)',\n  lab: 'linear-gradient(135deg, #5ee7df 0%, #b490ca 100%)',\n  // Settings uses theme gradient\n  settings: 'linear-gradient(135deg, hsl(var(--theme-primary, 262 83% 58%)) 0%, hsl(var(--theme-accent, 187 94% 43%)) 100%)',\n  claude: 'linear-gradient(135deg, #D97757 0%, #B8523A 100%)',\n  chatgpt: 'linear-gradient(135deg, #74AA9C 0%, #5A9086 100%)',\n  humans: 'linear-gradient(135deg, #38bdf8 0%, #818cf8 100%)',\n  // Canvas - purple to cyan for creative/infinite feel\n  canvas: 'linear-gradient(135deg, #8b5cf6 0%, #06b6d4 100%)',\n};\n\n// Custom image URLs for app icons\nexport const AppImages = {\n  story: '/storyapp.svg',\n  design: '/designapp.svg',\n  resume: '/resumeapp.svg',\n  music: '/musicapp.svg',\n  vault: '/vaultapp.svg',\n  blog: '/blogapp.svg',\n  claude: '/claudeapp.svg',\n  chatgpt: '/chatgptapp.svg',\n};\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 6539, "column": 0}, "map": {"version":3,"sources":["file:///Users/jamesspalding/OpenClaw-OS/src/components/ios/PageTransition.tsx"],"sourcesContent":["'use client';\n\nimport { useState, useEffect, ReactNode, useMemo } from 'react';\nimport { motion, AnimatePresence } from 'framer-motion';\nimport { APP_TRANSITION_KEY } from './AppIcon';\nimport { springs, motionConfig } from '@/components/motion/config';\n\ninterface PageTransitionProps {\n  children: ReactNode;\n}\n\ninterface TransitionData {\n  x: number;\n  y: number;\n  width: number;\n  height: number;\n  gradient: string;\n  timestamp: number;\n}\n\nexport function PageTransition({ children }: PageTransitionProps) {\n  const [transitionData, setTransitionData] = useState<TransitionData | null>(null);\n  const [showContent, setShowContent] = useState(false);\n  const [isHydrated, setIsHydrated] = useState(false);\n  // Store window dimensions safely in state to avoid SSR issues\n  const [windowDimensions, setWindowDimensions] = useState({ width: 1920, height: 1080 });\n\n  useEffect(() => {\n    // Safely capture window dimensions on client\n    setWindowDimensions({\n      width: window.innerWidth,\n      height: window.innerHeight,\n    });\n\n    // Check for stored transition data\n    const stored = sessionStorage.getItem(APP_TRANSITION_KEY);\n    if (stored) {\n      try {\n        const data = JSON.parse(stored) as TransitionData;\n        // Only use if recent (within last 2 seconds)\n        if (Date.now() - data.timestamp < 2000) {\n          setTransitionData(data);\n          // Clear it so it doesn't replay on refresh\n          sessionStorage.removeItem(APP_TRANSITION_KEY);\n        }\n      } catch (e) {\n        // Invalid data, ignore\n      }\n    }\n    setIsHydrated(true);\n\n    // Show content after a brief delay for animation\n    const timer = setTimeout(() => {\n      setShowContent(true);\n    }, 50);\n\n    return () => clearTimeout(timer);\n  }, []);\n\n  // Compute animation scale safely using state values\n  const animationScale = useMemo(() => {\n    if (!transitionData || transitionData.width === 0) return 50;\n    return Math.max(windowDimensions.width, windowDimensions.height) / transitionData.width * 2.5;\n  }, [transitionData, windowDimensions]);\n\n  if (!isHydrated) {\n    return null;\n  }\n\n  // If we have transition data, animate from the icon position\n  if (transitionData) {\n    return (\n      <>\n        {/* Expanding circle animation */}\n        <motion.div\n          className=\"fixed inset-0 z-50 pointer-events-none\"\n          initial={{ opacity: 1 }}\n          animate={{ opacity: 0 }}\n          transition={{ duration: motionConfig.duration.normal, delay: 0.3 }}\n        >\n          <motion.div\n            className=\"absolute rounded-[20px]\"\n            style={{\n              background: transitionData.gradient,\n              left: transitionData.x - transitionData.width / 2,\n              top: transitionData.y - transitionData.height / 2,\n              width: transitionData.width,\n              height: transitionData.height,\n            }}\n            initial={{\n              scale: 1,\n              borderRadius: '20px',\n            }}\n            animate={{\n              scale: animationScale,\n              borderRadius: '0px',\n            }}\n            transition={{\n              duration: motionConfig.duration.slow,\n              ease: motionConfig.ease.smooth,\n            }}\n          />\n        </motion.div>\n\n        {/* Page content */}\n        <motion.div\n          initial={{ opacity: 0, scale: 0.95 }}\n          animate={{ opacity: 1, scale: 1 }}\n          transition={{\n            ...springs.smooth,\n            delay: 0.15,\n          }}\n        >\n          {children}\n        </motion.div>\n      </>\n    );\n  }\n\n  // No transition data, just fade in\n  return (\n    <motion.div\n      initial={{ opacity: 0, y: 20 }}\n      animate={{ opacity: 1, y: 0 }}\n      transition={springs.smooth}\n    >\n      {children}\n    </motion.div>\n  );\n}\n"],"names":[],"mappings":";;;;;AAEA;AACA;AACA;AACA;;;AALA;;;;;AAoBO,SAAS,eAAe,EAAE,QAAQ,EAAuB;;IAC9D,MAAM,CAAC,gBAAgB,kBAAkB,GAAG,IAAA,kXAAQ,EAAwB;IAC5E,MAAM,CAAC,aAAa,eAAe,GAAG,IAAA,kXAAQ,EAAC;IAC/C,MAAM,CAAC,YAAY,cAAc,GAAG,IAAA,kXAAQ,EAAC;IAC7C,8DAA8D;IAC9D,MAAM,CAAC,kBAAkB,oBAAoB,GAAG,IAAA,kXAAQ,EAAC;QAAE,OAAO;QAAM,QAAQ;IAAK;IAErF,IAAA,mXAAS;oCAAC;YACR,6CAA6C;YAC7C,oBAAoB;gBAClB,OAAO,OAAO,UAAU;gBACxB,QAAQ,OAAO,WAAW;YAC5B;YAEA,mCAAmC;YACnC,MAAM,SAAS,eAAe,OAAO,CAAC,6JAAkB;YACxD,IAAI,QAAQ;gBACV,IAAI;oBACF,MAAM,OAAO,KAAK,KAAK,CAAC;oBACxB,6CAA6C;oBAC7C,IAAI,KAAK,GAAG,KAAK,KAAK,SAAS,GAAG,MAAM;wBACtC,kBAAkB;wBAClB,2CAA2C;wBAC3C,eAAe,UAAU,CAAC,6JAAkB;oBAC9C;gBACF,EAAE,OAAO,GAAG;gBACV,uBAAuB;gBACzB;YACF;YACA,cAAc;YAEd,iDAAiD;YACjD,MAAM,QAAQ;kDAAW;oBACvB,eAAe;gBACjB;iDAAG;YAEH;4CAAO,IAAM,aAAa;;QAC5B;mCAAG,EAAE;IAEL,oDAAoD;IACpD,MAAM,iBAAiB,IAAA,iXAAO;kDAAC;YAC7B,IAAI,CAAC,kBAAkB,eAAe,KAAK,KAAK,GAAG,OAAO;YAC1D,OAAO,KAAK,GAAG,CAAC,iBAAiB,KAAK,EAAE,iBAAiB,MAAM,IAAI,eAAe,KAAK,GAAG;QAC5F;iDAAG;QAAC;QAAgB;KAAiB;IAErC,IAAI,CAAC,YAAY;QACf,OAAO;IACT;IAEA,6DAA6D;IAC7D,IAAI,gBAAgB;QAClB,qBACE;;8BAEE,sYAAC,mVAAM,CAAC,GAAG;oBACT,WAAU;oBACV,SAAS;wBAAE,SAAS;oBAAE;oBACtB,SAAS;wBAAE,SAAS;oBAAE;oBACtB,YAAY;wBAAE,UAAU,wJAAY,CAAC,QAAQ,CAAC,MAAM;wBAAE,OAAO;oBAAI;8BAEjE,cAAA,sYAAC,mVAAM,CAAC,GAAG;wBACT,WAAU;wBACV,OAAO;4BACL,YAAY,eAAe,QAAQ;4BACnC,MAAM,eAAe,CAAC,GAAG,eAAe,KAAK,GAAG;4BAChD,KAAK,eAAe,CAAC,GAAG,eAAe,MAAM,GAAG;4BAChD,OAAO,eAAe,KAAK;4BAC3B,QAAQ,eAAe,MAAM;wBAC/B;wBACA,SAAS;4BACP,OAAO;4BACP,cAAc;wBAChB;wBACA,SAAS;4BACP,OAAO;4BACP,cAAc;wBAChB;wBACA,YAAY;4BACV,UAAU,wJAAY,CAAC,QAAQ,CAAC,IAAI;4BACpC,MAAM,wJAAY,CAAC,IAAI,CAAC,MAAM;wBAChC;;;;;;;;;;;8BAKJ,sYAAC,mVAAM,CAAC,GAAG;oBACT,SAAS;wBAAE,SAAS;wBAAG,OAAO;oBAAK;oBACnC,SAAS;wBAAE,SAAS;wBAAG,OAAO;oBAAE;oBAChC,YAAY;wBACV,GAAG,mJAAO,CAAC,MAAM;wBACjB,OAAO;oBACT;8BAEC;;;;;;;;IAIT;IAEA,mCAAmC;IACnC,qBACE,sYAAC,mVAAM,CAAC,GAAG;QACT,SAAS;YAAE,SAAS;YAAG,GAAG;QAAG;QAC7B,SAAS;YAAE,SAAS;YAAG,GAAG;QAAE;QAC5B,YAAY,mJAAO,CAAC,MAAM;kBAEzB;;;;;;AAGP;GA7GgB;KAAA"}},
    {"offset": {"line": 6710, "column": 0}, "map": {"version":3,"sources":["file:///Users/jamesspalding/OpenClaw-OS/src/components/ios/PageTransitionWrapper.tsx"],"sourcesContent":["'use client';\n\nimport { ReactNode } from 'react';\nimport { PageTransition } from './PageTransition';\n\ninterface PageTransitionWrapperProps {\n  children: ReactNode;\n}\n\nexport function PageTransitionWrapper({ children }: PageTransitionWrapperProps) {\n  return <PageTransition>{children}</PageTransition>;\n}\n"],"names":[],"mappings":";;;;;AAGA;AAHA;;;AASO,SAAS,sBAAsB,EAAE,QAAQ,EAA8B;IAC5E,qBAAO,sYAAC,gKAAc;kBAAE;;;;;;AAC1B;KAFgB"}},
    {"offset": {"line": 6738, "column": 0}, "map": {"version":3,"sources":["file:///Users/jamesspalding/OpenClaw-OS/src/components/ios/index.ts"],"sourcesContent":["export { IOSHome } from './IOSHome';\nexport { LockScreen } from './LockScreen';\nexport { Desktop } from './Desktop';\nexport { AppIcon, AppIcons, AppGradients, AppImages, APP_TRANSITION_KEY } from './AppIcon';\nexport { PageTransition } from './PageTransition';\nexport { PageTransitionWrapper } from './PageTransitionWrapper';\n"],"names":[],"mappings":";AAAA;AACA;AACA;AACA;AACA;AACA"}}]
}