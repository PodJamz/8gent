{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///Users/jamesspalding/OpenClaw-OS/src/lib/utils.ts"],"sourcesContent":["import { type ClassValue, clsx } from \"clsx\";\nimport { twMerge } from \"tailwind-merge\";\n\nexport function cn(...inputs: ClassValue[]) {\n  return twMerge(clsx(inputs));\n}\n\n/**\n * Get the user's preferred locale or fallback to 'en-US'\n */\nexport function getUserLocale(): string {\n  if (typeof navigator !== 'undefined') {\n    return navigator.language || navigator.languages?.[0] || 'en-US';\n  }\n  return 'en-US';\n}\n\n/**\n * Format a date using the user's locale\n */\nexport function formatLocalDate(date: Date | string | number, options?: Intl.DateTimeFormatOptions): string {\n  const dateObj = date instanceof Date ? date : new Date(date);\n  return dateObj.toLocaleDateString(getUserLocale(), options);\n}\n\n/**\n * Format a time using the user's locale\n */\nexport function formatLocalTime(date: Date | string | number, options?: Intl.DateTimeFormatOptions): string {\n  const dateObj = date instanceof Date ? date : new Date(date);\n  return dateObj.toLocaleTimeString(getUserLocale(), options);\n}\n\n/**\n * Format a date and time using the user's locale\n */\nexport function formatLocalDateTime(date: Date | string | number, options?: Intl.DateTimeFormatOptions): string {\n  const dateObj = date instanceof Date ? date : new Date(date);\n  return dateObj.toLocaleString(getUserLocale(), options);\n}\n\nexport function formatDate(date: string) {\n  let currentDate = new Date().getTime();\n  if (!date.includes(\"T\")) {\n    date = `${date}T00:00:00`;\n  }\n  let targetDate = new Date(date).getTime();\n  let timeDifference = Math.abs(currentDate - targetDate);\n  let daysAgo = Math.floor(timeDifference / (1000 * 60 * 60 * 24));\n\n  let fullDate = formatLocalDate(date, {\n    month: \"long\",\n    day: \"numeric\",\n    year: \"numeric\",\n  });\n\n  if (daysAgo < 1) {\n    return \"Today\";\n  } else if (daysAgo < 7) {\n    return `${fullDate} (${daysAgo}d ago)`;\n  } else if (daysAgo < 30) {\n    const weeksAgo = Math.floor(daysAgo / 7);\n    return `${fullDate} (${weeksAgo}w ago)`;\n  } else if (daysAgo < 365) {\n    const monthsAgo = Math.floor(daysAgo / 30);\n    return `${fullDate} (${monthsAgo}mo ago)`;\n  } else {\n    const yearsAgo = Math.floor(daysAgo / 365);\n    return `${fullDate} (${yearsAgo}y ago)`;\n  }\n}\n"],"names":[],"mappings":";;;;;;;;;;;;;;AAAA;AACA;;;AAEO,SAAS,GAAG,GAAG,MAAoB;IACxC,OAAO,IAAA,uOAAO,EAAC,IAAA,iMAAI,EAAC;AACtB;AAKO,SAAS;IACd,IAAI,OAAO,cAAc,aAAa;QACpC,OAAO,UAAU,QAAQ,IAAI,UAAU,SAAS,EAAE,CAAC,EAAE,IAAI;IAC3D;IACA,OAAO;AACT;AAKO,SAAS,gBAAgB,IAA4B,EAAE,OAAoC;IAChG,MAAM,UAAU,gBAAgB,OAAO,OAAO,IAAI,KAAK;IACvD,OAAO,QAAQ,kBAAkB,CAAC,iBAAiB;AACrD;AAKO,SAAS,gBAAgB,IAA4B,EAAE,OAAoC;IAChG,MAAM,UAAU,gBAAgB,OAAO,OAAO,IAAI,KAAK;IACvD,OAAO,QAAQ,kBAAkB,CAAC,iBAAiB;AACrD;AAKO,SAAS,oBAAoB,IAA4B,EAAE,OAAoC;IACpG,MAAM,UAAU,gBAAgB,OAAO,OAAO,IAAI,KAAK;IACvD,OAAO,QAAQ,cAAc,CAAC,iBAAiB;AACjD;AAEO,SAAS,WAAW,IAAY;IACrC,IAAI,cAAc,IAAI,OAAO,OAAO;IACpC,IAAI,CAAC,KAAK,QAAQ,CAAC,MAAM;QACvB,OAAO,GAAG,KAAK,SAAS,CAAC;IAC3B;IACA,IAAI,aAAa,IAAI,KAAK,MAAM,OAAO;IACvC,IAAI,iBAAiB,KAAK,GAAG,CAAC,cAAc;IAC5C,IAAI,UAAU,KAAK,KAAK,CAAC,iBAAiB,CAAC,OAAO,KAAK,KAAK,EAAE;IAE9D,IAAI,WAAW,gBAAgB,MAAM;QACnC,OAAO;QACP,KAAK;QACL,MAAM;IACR;IAEA,IAAI,UAAU,GAAG;QACf,OAAO;IACT,OAAO,IAAI,UAAU,GAAG;QACtB,OAAO,GAAG,SAAS,EAAE,EAAE,QAAQ,MAAM,CAAC;IACxC,OAAO,IAAI,UAAU,IAAI;QACvB,MAAM,WAAW,KAAK,KAAK,CAAC,UAAU;QACtC,OAAO,GAAG,SAAS,EAAE,EAAE,SAAS,MAAM,CAAC;IACzC,OAAO,IAAI,UAAU,KAAK;QACxB,MAAM,YAAY,KAAK,KAAK,CAAC,UAAU;QACvC,OAAO,GAAG,SAAS,EAAE,EAAE,UAAU,OAAO,CAAC;IAC3C,OAAO;QACL,MAAM,WAAW,KAAK,KAAK,CAAC,UAAU;QACtC,OAAO,GAAG,SAAS,EAAE,EAAE,SAAS,MAAM,CAAC;IACzC;AACF"}},
    {"offset": {"line": 78, "column": 0}, "map": {"version":3,"sources":["file:///Users/jamesspalding/OpenClaw-OS/src/lib/claw-ai/proactive-engine.ts"],"sourcesContent":["/**\n * Claw AI Proactive Engine\n *\n * This is the brain that drives Claw AI's proactive behavior.\n * Based on the EXPERIENCE_PHILOSOPHY.md:\n * - \"Claw AI is an operator, not a chatbot\"\n * - \"Agentic without being theatrical\"\n * - \"Structures, files, notifies, remembers\"\n *\n * Claw AI proactively engages users to hook them into working together\n * on something meaningful, demonstrating the OS philosophy.\n */\n\nexport type EngagementTrigger =\n  | 'first_visit'           // User's first time on the site\n  | 'return_visit'          // User returning after being away\n  | 'idle_user'             // User hasn't interacted in a while\n  | 'incomplete_task'       // User started something but didn't finish\n  | 'new_content'           // New blog post, project update, etc.\n  | 'feature_discovery'     // Help user discover a feature they haven't used\n  | 'collaboration_offer'   // Offer to work on something together\n  | 'progress_update'       // Update on background work Claw AI has done\n  | 'scheduled_checkin'     // Regular scheduled engagement;\n\nexport interface ProactiveMessage {\n  id: string;\n  trigger: EngagementTrigger;\n  title: string;\n  body: string;\n  appId: string;\n  priority: 'low' | 'medium' | 'high';\n  actions?: ProactiveAction[];\n  expiresAt?: number;\n}\n\nexport interface ProactiveAction {\n  label: string;\n  type: 'navigate' | 'open_chat' | 'dismiss' | 'schedule_later';\n  href?: string;\n  data?: unknown;\n}\n\n// Engagement messages Claw AI can send to hook the user\nconst ENGAGEMENT_MESSAGES: Omit<ProactiveMessage, 'id'>[] = [\n  // First visit - introduce the OS\n  {\n    trigger: 'first_visit',\n    title: \"Welcome to OpenClaw-OS\",\n    body: \"I'm Claw AI – your AI operator. Want me to show you how I think, design, and build? We could even prototype something together.\",\n    appId: 'claw-ai',\n    priority: 'high',\n    actions: [\n      { label: \"Show me around\", type: 'open_chat' },\n      { label: \"Explore on my own\", type: 'dismiss' },\n    ],\n  },\n\n  // Return visit - remember them\n  {\n    trigger: 'return_visit',\n    title: \"Welcome back\",\n    body: \"Good to see you again. I've been thinking about some improvements to the system. Want to collaborate on something?\",\n    appId: 'claw-ai',\n    priority: 'medium',\n    actions: [\n      { label: \"Let's talk\", type: 'open_chat' },\n      { label: \"Maybe later\", type: 'dismiss' },\n    ],\n  },\n\n  // Idle user - re-engage\n  {\n    trigger: 'idle_user',\n    title: \"Hey, I have an idea\",\n    body: \"I noticed you've been exploring. Want me to help you build something real? I can generate a PRD, create wireframes, or plan a project.\",\n    appId: 'claw-ai',\n    priority: 'medium',\n    actions: [\n      { label: \"I'm interested\", type: 'open_chat' },\n      { label: \"Not now\", type: 'dismiss' },\n    ],\n  },\n\n  // Feature discovery - Design app\n  {\n    trigger: 'feature_discovery',\n    title: \"Try the Design app\",\n    body: \"I've got 40+ themes in there – each tells a story about how design decisions get made. It's not decoration, it's decision-making.\",\n    appId: 'design',\n    priority: 'low',\n    actions: [\n      { label: \"Show me\", type: 'navigate', href: '/design' },\n      { label: \"Later\", type: 'dismiss' },\n    ],\n  },\n\n  // Feature discovery - Jamz studio\n  {\n    trigger: 'feature_discovery',\n    title: \"Check out the studio\",\n    body: \"There's a full DAW (digital audio workstation) in here. You can make actual music. I built it to show what's possible.\",\n    appId: 'jamz',\n    priority: 'low',\n    actions: [\n      { label: \"Open Jamz\", type: 'navigate', href: '/studio' },\n      { label: \"Maybe later\", type: 'dismiss' },\n    ],\n  },\n\n  // Feature discovery - Projects\n  {\n    trigger: 'feature_discovery',\n    title: \"See OpenClaw-OS in action\",\n    body: \"The Projects app shows real tickets – this isn't a demo. You're exploring the actual product being built. Want to contribute?\",\n    appId: 'projects',\n    priority: 'medium',\n    actions: [\n      { label: \"Show me the roadmap\", type: 'navigate', href: '/projects' },\n      { label: \"Not now\", type: 'dismiss' },\n    ],\n  },\n\n  // Collaboration offer - Product\n  {\n    trigger: 'collaboration_offer',\n    title: \"Let's build something\",\n    body: \"I can help you think through a problem – define the audience, map workflows, and scope an MVP. All in conversation.\",\n    appId: 'product',\n    priority: 'high',\n    actions: [\n      { label: \"I have a problem to solve\", type: 'open_chat' },\n      { label: \"Just exploring\", type: 'dismiss' },\n    ],\n  },\n\n  // Collaboration offer - Prototyping\n  {\n    trigger: 'collaboration_offer',\n    title: \"Prototype together?\",\n    body: \"Give me a concept and I'll generate screens, flows, and components. Real-time. Want to try?\",\n    appId: 'prototyping',\n    priority: 'high',\n    actions: [\n      { label: \"Let's prototype\", type: 'navigate', href: '/prototyping' },\n      { label: \"Maybe later\", type: 'dismiss' },\n    ],\n  },\n\n  // Scheduled checkin\n  {\n    trigger: 'scheduled_checkin',\n    title: \"Quick check-in\",\n    body: \"Just wanted to ping you – I'm here if you need anything. Thinking about building something new?\",\n    appId: 'claw-ai',\n    priority: 'low',\n    actions: [\n      { label: \"Actually, yes\", type: 'open_chat' },\n      { label: \"All good\", type: 'dismiss' },\n    ],\n  },\n];\n\n// Generate unique ID\nfunction generateId(): string {\n  return `proactive_${Date.now()}_${Math.random().toString(36).substring(2, 9)}`;\n}\n\n/**\n * Get an engagement message based on trigger\n */\nexport function getEngagementMessage(trigger: EngagementTrigger): ProactiveMessage | null {\n  const candidates = ENGAGEMENT_MESSAGES.filter(m => m.trigger === trigger);\n  if (candidates.length === 0) return null;\n\n  // Pick a random one if multiple\n  const message = candidates[Math.floor(Math.random() * candidates.length)];\n\n  return {\n    ...message,\n    id: generateId(),\n    expiresAt: Date.now() + (24 * 60 * 60 * 1000), // Expires in 24 hours\n  };\n}\n\n/**\n * Get a feature discovery message for an app the user hasn't visited\n */\nexport function getFeatureDiscoveryMessage(visitedApps: Set<string>): ProactiveMessage | null {\n  const featureMessages = ENGAGEMENT_MESSAGES.filter(\n    m => m.trigger === 'feature_discovery' && !visitedApps.has(m.appId)\n  );\n\n  if (featureMessages.length === 0) return null;\n\n  const message = featureMessages[Math.floor(Math.random() * featureMessages.length)];\n\n  return {\n    ...message,\n    id: generateId(),\n    expiresAt: Date.now() + (12 * 60 * 60 * 1000), // Expires in 12 hours\n  };\n}\n\n/**\n * Get a collaboration offer message\n */\nexport function getCollaborationOffer(): ProactiveMessage | null {\n  const collabMessages = ENGAGEMENT_MESSAGES.filter(m => m.trigger === 'collaboration_offer');\n\n  if (collabMessages.length === 0) return null;\n\n  const message = collabMessages[Math.floor(Math.random() * collabMessages.length)];\n\n  return {\n    ...message,\n    id: generateId(),\n    expiresAt: Date.now() + (6 * 60 * 60 * 1000), // Expires in 6 hours\n  };\n}\n\n// Storage key for tracking user engagement state\nexport const ENGAGEMENT_STATE_KEY = 'openclaw_engagement_state';\n\nexport interface EngagementState {\n  firstVisit: boolean;\n  visitCount: number;\n  lastVisit: number;\n  visitedApps: string[];\n  dismissedMessages: string[];\n  lastEngagementTime: number;\n  hasInteractedWithClaw: boolean;\n}\n\nexport function getDefaultEngagementState(): EngagementState {\n  return {\n    firstVisit: true,\n    visitCount: 0,\n    lastVisit: 0,\n    visitedApps: [],\n    dismissedMessages: [],\n    lastEngagementTime: 0,\n    hasInteractedWithClaw: false,\n  };\n}\n\n/**\n * Load engagement state from localStorage\n */\nexport function loadEngagementState(): EngagementState {\n  if (typeof window === 'undefined') return getDefaultEngagementState();\n\n  try {\n    const saved = localStorage.getItem(ENGAGEMENT_STATE_KEY);\n    if (saved) {\n      return { ...getDefaultEngagementState(), ...JSON.parse(saved) };\n    }\n  } catch (e) {\n    console.error('Failed to load engagement state:', e);\n  }\n\n  return getDefaultEngagementState();\n}\n\n/**\n * Save engagement state to localStorage\n */\nexport function saveEngagementState(state: EngagementState): void {\n  if (typeof window === 'undefined') return;\n\n  try {\n    localStorage.setItem(ENGAGEMENT_STATE_KEY, JSON.stringify(state));\n  } catch (e) {\n    console.error('Failed to save engagement state:', e);\n  }\n}\n\n/**\n * Determine what proactive action to take based on engagement state\n */\nexport function determineProactiveAction(state: EngagementState): ProactiveMessage | null {\n  const now = Date.now();\n  const hoursSinceLastEngagement = (now - state.lastEngagementTime) / (1000 * 60 * 60);\n  const hoursSinceLastVisit = (now - state.lastVisit) / (1000 * 60 * 60);\n\n  // First visit - welcome them\n  if (state.firstVisit && state.visitCount <= 1) {\n    return getEngagementMessage('first_visit');\n  }\n\n  // Return visit after being away for 24+ hours\n  if (hoursSinceLastVisit > 24 && hoursSinceLastEngagement > 24) {\n    return getEngagementMessage('return_visit');\n  }\n\n  // Been on site for a while without engaging - offer help\n  if (hoursSinceLastEngagement > 0.5 && !state.hasInteractedWithClaw) { // 30 min idle\n    return getEngagementMessage('idle_user');\n  }\n\n  // Haven't explored many apps - suggest one\n  if (state.visitedApps.length < 3 && hoursSinceLastEngagement > 0.25) { // 15 min\n    return getFeatureDiscoveryMessage(new Set(state.visitedApps));\n  }\n\n  // Has explored but not collaborated - offer\n  if (state.visitedApps.length >= 3 && !state.hasInteractedWithClaw && hoursSinceLastEngagement > 1) {\n    return getCollaborationOffer();\n  }\n\n  // Periodic check-in for engaged users\n  if (state.hasInteractedWithClaw && hoursSinceLastEngagement > 24) {\n    return getEngagementMessage('scheduled_checkin');\n  }\n\n  return null;\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 385, "column": 0}, "map": {"version":3,"sources":["file:///Users/jamesspalding/OpenClaw-OS/src/lib/themes/definitions.ts"],"sourcesContent":["export const themes = [\n  { name: 'utilitarian', label: 'Utilitarian' },\n  { name: 'base', label: 'Default' },\n  { name: 'claude', label: 'Claude' },\n  { name: 'chatgpt', label: 'ChatGPT' },\n  { name: 'vercel', label: 'Vercel' },\n  { name: 'kodama-grove', label: 'Kodama Grove' },\n  { name: 'vintage-paper', label: 'Vintage Paper' },\n  { name: 'claymorphism', label: 'Claymorphism' },\n  { name: 'nature', label: 'Nature' },\n  { name: 'neo-brutalism', label: 'Neo Brutalism' },\n  { name: 'elegant-luxury', label: 'Elegant Luxury' },\n  { name: 'pastel-dreams', label: 'Pastel Dreams' },\n  { name: 'cosmic-night', label: 'Cosmic Night' },\n  { name: 'clean-slate', label: 'Clean Slate' },\n  { name: 'caffeine', label: 'Caffeine' },\n  { name: 'ocean-breeze', label: 'Ocean Breeze' },\n  { name: 'perpetuity', label: 'Perpetuity' },\n  { name: 'midnight-bloom', label: 'Midnight Bloom' },\n  { name: 'northern-lights', label: 'Northern Lights' },\n  { name: 'sunset-horizon', label: 'Sunset Horizon' },\n  { name: 'modern-minimal', label: 'Modern Minimal' },\n  { name: 'candyland', label: 'Candyland' },\n  { name: 'cyberpunk', label: 'Cyberpunk' },\n  { name: 'retro-arcade', label: 'Retro Arcade' },\n  { name: 'quantum-rose', label: 'Quantum Rose' },\n  { name: 'bold-tech', label: 'Bold Tech' },\n  { name: 'violet-bloom', label: 'Violet Bloom' },\n  { name: 't3-chat', label: 'T3 Chat' },\n  { name: 'mocha-mousse', label: 'Mocha Mousse' },\n  { name: 'amethyst-haze', label: 'Amethyst Haze' },\n  { name: 'doom-64', label: 'Doom 64' },\n  { name: 'amber-minimal', label: 'Amber Minimal' },\n  { name: 'solar-dusk', label: 'Solar Dusk' },\n  { name: 'starry-night', label: 'Starry Night' },\n  { name: 'soft-pop', label: 'Soft Pop' },\n  { name: 'sage-garden', label: 'Sage Garden' },\n  { name: 'notebook', label: 'Notebook' },\n  { name: 'tao', label: 'Tao' },\n  { name: 'research', label: 'Research' },\n  { name: 'field-guide', label: 'Field Guide' },\n  { name: 'denim', label: 'Denim' },\n  { name: 'google', label: 'Google' },\n  { name: 'apple', label: 'Apple' },\n  { name: 'microsoft', label: 'Microsoft' },\n  { name: 'notion', label: 'Notion' },\n  { name: 'cursor', label: 'Cursor' },\n  { name: 'miro', label: 'Miro' },\n  { name: 'nike', label: 'Nike' },\n  { name: 'adidas', label: 'Adidas' },\n  { name: 'kinetic-editorial', label: 'Kinetic Editorial' },\n  { name: 'teenage-engineering', label: 'Teenage Engineering' },\n] as const;\n\nexport type ThemeName = (typeof themes)[number]['name'];\n\nexport function isValidTheme(theme: string): theme is ThemeName {\n  return themes.some((t) => t.name === theme);\n}\n\nexport function getThemeLabel(name: ThemeName): string {\n  return themes.find((t) => t.name === name)?.label ?? name;\n}\n"],"names":[],"mappings":";;;;;;;;AAAO,MAAM,SAAS;IACpB;QAAE,MAAM;QAAe,OAAO;IAAc;IAC5C;QAAE,MAAM;QAAQ,OAAO;IAAU;IACjC;QAAE,MAAM;QAAU,OAAO;IAAS;IAClC;QAAE,MAAM;QAAW,OAAO;IAAU;IACpC;QAAE,MAAM;QAAU,OAAO;IAAS;IAClC;QAAE,MAAM;QAAgB,OAAO;IAAe;IAC9C;QAAE,MAAM;QAAiB,OAAO;IAAgB;IAChD;QAAE,MAAM;QAAgB,OAAO;IAAe;IAC9C;QAAE,MAAM;QAAU,OAAO;IAAS;IAClC;QAAE,MAAM;QAAiB,OAAO;IAAgB;IAChD;QAAE,MAAM;QAAkB,OAAO;IAAiB;IAClD;QAAE,MAAM;QAAiB,OAAO;IAAgB;IAChD;QAAE,MAAM;QAAgB,OAAO;IAAe;IAC9C;QAAE,MAAM;QAAe,OAAO;IAAc;IAC5C;QAAE,MAAM;QAAY,OAAO;IAAW;IACtC;QAAE,MAAM;QAAgB,OAAO;IAAe;IAC9C;QAAE,MAAM;QAAc,OAAO;IAAa;IAC1C;QAAE,MAAM;QAAkB,OAAO;IAAiB;IAClD;QAAE,MAAM;QAAmB,OAAO;IAAkB;IACpD;QAAE,MAAM;QAAkB,OAAO;IAAiB;IAClD;QAAE,MAAM;QAAkB,OAAO;IAAiB;IAClD;QAAE,MAAM;QAAa,OAAO;IAAY;IACxC;QAAE,MAAM;QAAa,OAAO;IAAY;IACxC;QAAE,MAAM;QAAgB,OAAO;IAAe;IAC9C;QAAE,MAAM;QAAgB,OAAO;IAAe;IAC9C;QAAE,MAAM;QAAa,OAAO;IAAY;IACxC;QAAE,MAAM;QAAgB,OAAO;IAAe;IAC9C;QAAE,MAAM;QAAW,OAAO;IAAU;IACpC;QAAE,MAAM;QAAgB,OAAO;IAAe;IAC9C;QAAE,MAAM;QAAiB,OAAO;IAAgB;IAChD;QAAE,MAAM;QAAW,OAAO;IAAU;IACpC;QAAE,MAAM;QAAiB,OAAO;IAAgB;IAChD;QAAE,MAAM;QAAc,OAAO;IAAa;IAC1C;QAAE,MAAM;QAAgB,OAAO;IAAe;IAC9C;QAAE,MAAM;QAAY,OAAO;IAAW;IACtC;QAAE,MAAM;QAAe,OAAO;IAAc;IAC5C;QAAE,MAAM;QAAY,OAAO;IAAW;IACtC;QAAE,MAAM;QAAO,OAAO;IAAM;IAC5B;QAAE,MAAM;QAAY,OAAO;IAAW;IACtC;QAAE,MAAM;QAAe,OAAO;IAAc;IAC5C;QAAE,MAAM;QAAS,OAAO;IAAQ;IAChC;QAAE,MAAM;QAAU,OAAO;IAAS;IAClC;QAAE,MAAM;QAAS,OAAO;IAAQ;IAChC;QAAE,MAAM;QAAa,OAAO;IAAY;IACxC;QAAE,MAAM;QAAU,OAAO;IAAS;IAClC;QAAE,MAAM;QAAU,OAAO;IAAS;IAClC;QAAE,MAAM;QAAQ,OAAO;IAAO;IAC9B;QAAE,MAAM;QAAQ,OAAO;IAAO;IAC9B;QAAE,MAAM;QAAU,OAAO;IAAS;IAClC;QAAE,MAAM;QAAqB,OAAO;IAAoB;IACxD;QAAE,MAAM;QAAuB,OAAO;IAAsB;CAC7D;AAIM,SAAS,aAAa,KAAa;IACxC,OAAO,OAAO,IAAI,CAAC,CAAC,IAAM,EAAE,IAAI,KAAK;AACvC;AAEO,SAAS,cAAc,IAAe;IAC3C,OAAO,OAAO,IAAI,CAAC,CAAC,IAAM,EAAE,IAAI,KAAK,OAAO,SAAS;AACvD"}},
    {"offset": {"line": 612, "column": 0}, "map": {"version":3,"sources":["file:///Users/jamesspalding/OpenClaw-OS/src/lib/themes/index.ts"],"sourcesContent":["export { themes, isValidTheme, getThemeLabel } from './definitions';\nexport type { ThemeName } from './definitions';\n"],"names":[],"mappings":";AAAA"}},
    {"offset": {"line": 622, "column": 0}, "map": {"version":3,"sources":["file:///Users/jamesspalding/OpenClaw-OS/src/lib/canvas/grid-system.ts"],"sourcesContent":["/**\n * Canvas Grid System - Provides coordinate-based spatial awareness for Claw AI\n *\n * Converts pixel positions to grid coordinates (like A1, B2, C3 or row,col)\n * Allows AI to understand and manipulate canvas through a matrix system\n */\n\n// Grid configuration\nexport const GRID_CONFIG = {\n  CELL_SIZE: 100, // Each grid cell is 100x100 pixels\n  GRID_COLS: 100, // 100 columns (A-CV in letter notation, or 0-99)\n  GRID_ROWS: 100, // 100 rows (1-100)\n  CANVAS_WIDTH: 10000,\n  CANVAS_HEIGHT: 10000,\n  OFFSET: 5000, // Canvas uses 5000px offset for centering\n};\n\n// ============================================================================\n// Coordinate Conversion\n// ============================================================================\n\nexport interface GridPosition {\n  row: number; // 0-based row index\n  col: number; // 0-based column index\n  label: string; // Human-readable label like \"A1\", \"B5\", \"AA23\"\n}\n\nexport interface PixelPosition {\n  x: number;\n  y: number;\n}\n\n/**\n * Convert column number to letter (0=A, 1=B, ..., 25=Z, 26=AA, etc.)\n */\nexport function colToLetter(col: number): string {\n  let result = '';\n  let c = col;\n  while (c >= 0) {\n    result = String.fromCharCode((c % 26) + 65) + result;\n    c = Math.floor(c / 26) - 1;\n  }\n  return result;\n}\n\n/**\n * Convert letter to column number (A=0, B=1, ..., Z=25, AA=26, etc.)\n */\nexport function letterToCol(letter: string): number {\n  let result = 0;\n  for (let i = 0; i < letter.length; i++) {\n    result = result * 26 + (letter.charCodeAt(i) - 64);\n  }\n  return result - 1;\n}\n\n/**\n * Convert pixel position to grid position\n */\nexport function pixelToGrid(pixel: PixelPosition): GridPosition {\n  // Account for canvas offset (nodes are stored at x+5000, y+5000)\n  const adjustedX = pixel.x + GRID_CONFIG.OFFSET;\n  const adjustedY = pixel.y + GRID_CONFIG.OFFSET;\n\n  const col = Math.floor(adjustedX / GRID_CONFIG.CELL_SIZE);\n  const row = Math.floor(adjustedY / GRID_CONFIG.CELL_SIZE);\n\n  return {\n    row: Math.max(0, Math.min(row, GRID_CONFIG.GRID_ROWS - 1)),\n    col: Math.max(0, Math.min(col, GRID_CONFIG.GRID_COLS - 1)),\n    label: `${colToLetter(col)}${row + 1}`,\n  };\n}\n\n/**\n * Convert grid position to pixel position (center of cell)\n */\nexport function gridToPixel(grid: GridPosition | string): PixelPosition {\n  let row: number;\n  let col: number;\n\n  if (typeof grid === 'string') {\n    // Parse label like \"A1\", \"B5\", \"AA23\"\n    const match = grid.match(/^([A-Z]+)(\\d+)$/i);\n    if (!match) {\n      throw new Error(`Invalid grid label: ${grid}`);\n    }\n    col = letterToCol(match[1].toUpperCase());\n    row = parseInt(match[2], 10) - 1;\n  } else {\n    row = grid.row;\n    col = grid.col;\n  }\n\n  // Return center of cell, adjusted for canvas offset\n  return {\n    x: col * GRID_CONFIG.CELL_SIZE + GRID_CONFIG.CELL_SIZE / 2 - GRID_CONFIG.OFFSET,\n    y: row * GRID_CONFIG.CELL_SIZE + GRID_CONFIG.CELL_SIZE / 2 - GRID_CONFIG.OFFSET,\n  };\n}\n\n// ============================================================================\n// Canvas State Description for AI\n// ============================================================================\n\nexport interface CanvasNode {\n  id: string;\n  type: string;\n  content: string;\n  x: number;\n  y: number;\n  width: number;\n  height: number;\n  style?: Record<string, unknown>;\n  mediaUrl?: string;\n  mediaType?: string;\n}\n\nexport interface CanvasEdge {\n  id: string;\n  source: string;\n  target: string;\n  label?: string;\n}\n\nexport interface NodeDescription {\n  id: string;\n  type: string;\n  content: string;\n  gridPosition: string;\n  pixelPosition: { x: number; y: number };\n  size: { width: number; height: number };\n  color?: string;\n  connections: string[]; // IDs of connected nodes\n}\n\nexport interface CanvasDescription {\n  totalNodes: number;\n  totalConnections: number;\n  gridBounds: {\n    minRow: number;\n    maxRow: number;\n    minCol: number;\n    maxCol: number;\n    minLabel: string;\n    maxLabel: string;\n  };\n  nodes: NodeDescription[];\n  spatialLayout: string; // Human-readable description of layout\n}\n\n/**\n * Generate a description of the canvas state for Claw AI\n */\nexport function describeCanvas(\n  nodes: CanvasNode[],\n  edges: CanvasEdge[]\n): CanvasDescription {\n  if (nodes.length === 0) {\n    return {\n      totalNodes: 0,\n      totalConnections: 0,\n      gridBounds: {\n        minRow: 0,\n        maxRow: 0,\n        minCol: 0,\n        maxCol: 0,\n        minLabel: 'A1',\n        maxLabel: 'A1',\n      },\n      nodes: [],\n      spatialLayout: 'The canvas is empty.',\n    };\n  }\n\n  // Convert nodes to descriptions with grid positions\n  const nodeDescriptions: NodeDescription[] = nodes.map((node) => {\n    const gridPos = pixelToGrid({ x: node.x, y: node.y });\n    const connectedEdges = edges.filter(\n      (e) => e.source === node.id || e.target === node.id\n    );\n    const connections = connectedEdges.map((e) =>\n      e.source === node.id ? e.target : e.source\n    );\n\n    return {\n      id: node.id,\n      type: node.type,\n      content: node.content?.slice(0, 100) || '', // Truncate long content\n      gridPosition: gridPos.label,\n      pixelPosition: { x: node.x, y: node.y },\n      size: { width: node.width, height: node.height },\n      color: node.style?.fill as string | undefined,\n      connections,\n    };\n  });\n\n  // Calculate grid bounds\n  const gridPositions = nodes.map((n) => pixelToGrid({ x: n.x, y: n.y }));\n  const minRow = Math.min(...gridPositions.map((g) => g.row));\n  const maxRow = Math.max(...gridPositions.map((g) => g.row));\n  const minCol = Math.min(...gridPositions.map((g) => g.col));\n  const maxCol = Math.max(...gridPositions.map((g) => g.col));\n\n  // Generate spatial layout description\n  const spatialLayout = generateSpatialDescription(nodeDescriptions);\n\n  return {\n    totalNodes: nodes.length,\n    totalConnections: edges.length,\n    gridBounds: {\n      minRow,\n      maxRow,\n      minCol,\n      maxCol,\n      minLabel: `${colToLetter(minCol)}${minRow + 1}`,\n      maxLabel: `${colToLetter(maxCol)}${maxRow + 1}`,\n    },\n    nodes: nodeDescriptions,\n    spatialLayout,\n  };\n}\n\n/**\n * Generate a human-readable spatial description\n */\nfunction generateSpatialDescription(nodes: NodeDescription[]): string {\n  if (nodes.length === 0) return 'The canvas is empty.';\n  if (nodes.length === 1) {\n    const n = nodes[0];\n    return `There is 1 ${n.type} node at position ${n.gridPosition} with content: \"${n.content.slice(0, 50)}${n.content.length > 50 ? '...' : ''}\"`;\n  }\n\n  // Group nodes by approximate row\n  const rowGroups = new Map<number, NodeDescription[]>();\n  for (const node of nodes) {\n    const match = node.gridPosition.match(/\\d+/);\n    const row = match ? parseInt(match[0], 10) : 0;\n    const bucket = Math.floor(row / 5) * 5; // Group in 5-row buckets\n    if (!rowGroups.has(bucket)) rowGroups.set(bucket, []);\n    rowGroups.get(bucket)!.push(node);\n  }\n\n  const lines: string[] = [];\n  lines.push(`The canvas has ${nodes.length} nodes spread across the grid.`);\n\n  // Describe top-level layout\n  const sortedRows = Array.from(rowGroups.keys()).sort((a, b) => a - b);\n  for (const row of sortedRows) {\n    const nodesInRow = rowGroups.get(row)!;\n    const positions = nodesInRow.map((n) => n.gridPosition).join(', ');\n    const types = [...new Set(nodesInRow.map((n) => n.type))].join(', ');\n    lines.push(`- Row ${row + 1}-${row + 5}: ${nodesInRow.length} node(s) (${types}) at ${positions}`);\n  }\n\n  // Describe connections\n  const connectedNodes = nodes.filter((n) => n.connections.length > 0);\n  if (connectedNodes.length > 0) {\n    lines.push(`\\nConnections:`);\n    for (const node of connectedNodes) {\n      const targetLabels = node.connections\n        .map((id) => nodes.find((n) => n.id === id)?.gridPosition || id)\n        .join(', ');\n      lines.push(`- ${node.gridPosition} connects to: ${targetLabels}`);\n    }\n  }\n\n  return lines.join('\\n');\n}\n\n// ============================================================================\n// Relative Position Helpers\n// ============================================================================\n\nexport type Direction = 'above' | 'below' | 'left' | 'right' | 'above-left' | 'above-right' | 'below-left' | 'below-right';\n\n/**\n * Get a position relative to another position\n */\nexport function getRelativePosition(\n  fromLabel: string,\n  direction: Direction,\n  distance: number = 1\n): string {\n  const match = fromLabel.match(/^([A-Z]+)(\\d+)$/i);\n  if (!match) throw new Error(`Invalid grid label: ${fromLabel}`);\n\n  let col = letterToCol(match[1].toUpperCase());\n  let row = parseInt(match[2], 10) - 1;\n\n  switch (direction) {\n    case 'above':\n      row -= distance;\n      break;\n    case 'below':\n      row += distance;\n      break;\n    case 'left':\n      col -= distance;\n      break;\n    case 'right':\n      col += distance;\n      break;\n    case 'above-left':\n      row -= distance;\n      col -= distance;\n      break;\n    case 'above-right':\n      row -= distance;\n      col += distance;\n      break;\n    case 'below-left':\n      row += distance;\n      col -= distance;\n      break;\n    case 'below-right':\n      row += distance;\n      col += distance;\n      break;\n  }\n\n  // Clamp to valid range\n  row = Math.max(0, Math.min(row, GRID_CONFIG.GRID_ROWS - 1));\n  col = Math.max(0, Math.min(col, GRID_CONFIG.GRID_COLS - 1));\n\n  return `${colToLetter(col)}${row + 1}`;\n}\n\n/**\n * Calculate direction between two positions\n */\nexport function getDirectionBetween(fromLabel: string, toLabel: string): Direction | 'same' {\n  const fromMatch = fromLabel.match(/^([A-Z]+)(\\d+)$/i);\n  const toMatch = toLabel.match(/^([A-Z]+)(\\d+)$/i);\n  if (!fromMatch || !toMatch) return 'same';\n\n  const fromCol = letterToCol(fromMatch[1].toUpperCase());\n  const fromRow = parseInt(fromMatch[2], 10);\n  const toCol = letterToCol(toMatch[1].toUpperCase());\n  const toRow = parseInt(toMatch[2], 10);\n\n  const rowDiff = toRow - fromRow;\n  const colDiff = toCol - fromCol;\n\n  if (rowDiff === 0 && colDiff === 0) return 'same';\n  if (rowDiff < 0 && colDiff === 0) return 'above';\n  if (rowDiff > 0 && colDiff === 0) return 'below';\n  if (rowDiff === 0 && colDiff < 0) return 'left';\n  if (rowDiff === 0 && colDiff > 0) return 'right';\n  if (rowDiff < 0 && colDiff < 0) return 'above-left';\n  if (rowDiff < 0 && colDiff > 0) return 'above-right';\n  if (rowDiff > 0 && colDiff < 0) return 'below-left';\n  return 'below-right';\n}\n\n// ============================================================================\n// Node Colors\n// ============================================================================\n\nexport const NODE_COLORS = {\n  yellow: '#fef08a',\n  blue: '#93c5fd',\n  green: '#86efac',\n  pink: '#f9a8d4',\n  purple: '#c4b5fd',\n  orange: '#fed7aa',\n  red: '#fca5a5',\n  cyan: '#a5f3fc',\n  white: '#ffffff',\n  gray: '#d1d5db',\n} as const;\n\nexport type NodeColor = keyof typeof NODE_COLORS;\n\nexport function getColorHex(colorName: string): string {\n  const normalized = colorName.toLowerCase() as NodeColor;\n  return NODE_COLORS[normalized] || NODE_COLORS.yellow;\n}\n\nexport function getColorName(hex: string): NodeColor {\n  const entry = Object.entries(NODE_COLORS).find(([, v]) => v.toLowerCase() === hex.toLowerCase());\n  return (entry?.[0] as NodeColor) || 'yellow';\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 904, "column": 0}, "map": {"version":3,"sources":["file:///Users/jamesspalding/OpenClaw-OS/src/lib/claw-ai/canvas-tools.ts"],"sourcesContent":["/**\n * Claw AI Canvas Tools - Allows AI to control the design canvas\n *\n * Tools for:\n * - Moving nodes by grid position\n * - Editing node content and colors\n * - Creating new nodes\n * - Creating mindmap branches\n * - Describing canvas state\n */\n\nimport {\n  pixelToGrid,\n  gridToPixel,\n  describeCanvas,\n  getRelativePosition,\n  getColorHex,\n  NODE_COLORS,\n  type CanvasNode,\n  type CanvasEdge,\n  type GridPosition,\n  type Direction,\n} from '@/lib/canvas/grid-system';\n\n// ============================================================================\n// Tool Definitions (for AI system prompt)\n// ============================================================================\n\nexport const CANVAS_TOOL_DEFINITIONS = [\n  {\n    name: 'describe_canvas',\n    description: 'Get a complete description of the current canvas state including all nodes, their positions on the grid, contents, colors, and connections. Use this to understand what is on the canvas before making changes.',\n    parameters: {},\n  },\n  {\n    name: 'move_node',\n    description: 'Move a node to a new position on the canvas grid. Positions use spreadsheet-style notation (A1, B2, C3, etc.) where letters are columns and numbers are rows.',\n    parameters: {\n      nodeId: { type: 'string', description: 'The ID of the node to move' },\n      toPosition: { type: 'string', description: 'Target grid position (e.g., \"B5\", \"C10\", \"AA3\")' },\n    },\n  },\n  {\n    name: 'update_node_content',\n    description: 'Update the text content of a node',\n    parameters: {\n      nodeId: { type: 'string', description: 'The ID of the node to update' },\n      content: { type: 'string', description: 'New text content for the node' },\n    },\n  },\n  {\n    name: 'update_node_color',\n    description: `Change the color of a node. Available colors: ${Object.keys(NODE_COLORS).join(', ')}`,\n    parameters: {\n      nodeId: { type: 'string', description: 'The ID of the node to update' },\n      color: { type: 'string', description: 'Color name (yellow, blue, green, pink, purple, orange, red, cyan, white, gray)' },\n    },\n  },\n  {\n    name: 'create_node',\n    description: 'Create a new node on the canvas at a specific grid position',\n    parameters: {\n      type: { type: 'string', description: 'Node type: sticky, text, shape, code, mindmap' },\n      position: { type: 'string', description: 'Grid position (e.g., \"B5\")' },\n      content: { type: 'string', description: 'Text content for the node' },\n      color: { type: 'string', description: 'Optional color name', optional: true },\n    },\n  },\n  {\n    name: 'connect_nodes',\n    description: 'Create a connection/edge between two nodes',\n    parameters: {\n      fromNodeId: { type: 'string', description: 'Source node ID' },\n      toNodeId: { type: 'string', description: 'Target node ID' },\n      label: { type: 'string', description: 'Optional label for the connection', optional: true },\n    },\n  },\n  {\n    name: 'delete_node',\n    description: 'Delete a node from the canvas',\n    parameters: {\n      nodeId: { type: 'string', description: 'The ID of the node to delete' },\n    },\n  },\n  {\n    name: 'create_mindmap_branch',\n    description: 'Add a new branch to a mindmap. Creates a new node connected to the parent node, positioned in the specified direction.',\n    parameters: {\n      parentNodeId: { type: 'string', description: 'The ID of the parent node to branch from' },\n      content: { type: 'string', description: 'Text content for the new branch' },\n      direction: { type: 'string', description: 'Direction: above, below, left, right, above-left, above-right, below-left, below-right' },\n      color: { type: 'string', description: 'Optional color name', optional: true },\n    },\n  },\n  {\n    name: 'arrange_nodes',\n    description: 'Automatically arrange selected nodes in a pattern',\n    parameters: {\n      nodeIds: { type: 'array', description: 'Array of node IDs to arrange' },\n      pattern: { type: 'string', description: 'Arrangement pattern: grid, horizontal, vertical, radial, mindmap' },\n      startPosition: { type: 'string', description: 'Starting grid position (e.g., \"B5\")' },\n    },\n  },\n];\n\n// ============================================================================\n// Tool Execution Results\n// ============================================================================\n\nexport interface CanvasToolResult {\n  success: boolean;\n  message: string;\n  data?: unknown;\n}\n\n// ============================================================================\n// Canvas Tool Executor\n// ============================================================================\n\nexport interface CanvasState {\n  nodes: CanvasNode[];\n  edges: CanvasEdge[];\n  viewport: { x: number; y: number; zoom: number };\n}\n\nexport interface CanvasToolExecutorOptions {\n  getCanvasState: () => CanvasState;\n  setCanvasState: (state: CanvasState) => void;\n}\n\nexport class CanvasToolExecutor {\n  private getState: () => CanvasState;\n  private setState: (state: CanvasState) => void;\n\n  constructor(options: CanvasToolExecutorOptions) {\n    this.getState = options.getCanvasState;\n    this.setState = options.setCanvasState;\n  }\n\n  /**\n   * Execute a canvas tool by name\n   */\n  async execute(\n    toolName: string,\n    params: Record<string, unknown>\n  ): Promise<CanvasToolResult> {\n    switch (toolName) {\n      case 'describe_canvas':\n        return this.describeCanvas();\n      case 'move_node':\n        return this.moveNode(params.nodeId as string, params.toPosition as string);\n      case 'update_node_content':\n        return this.updateNodeContent(params.nodeId as string, params.content as string);\n      case 'update_node_color':\n        return this.updateNodeColor(params.nodeId as string, params.color as string);\n      case 'create_node':\n        return this.createNode(\n          params.type as string,\n          params.position as string,\n          params.content as string,\n          params.color as string | undefined\n        );\n      case 'connect_nodes':\n        return this.connectNodes(\n          params.fromNodeId as string,\n          params.toNodeId as string,\n          params.label as string | undefined\n        );\n      case 'delete_node':\n        return this.deleteNode(params.nodeId as string);\n      case 'create_mindmap_branch':\n        return this.createMindmapBranch(\n          params.parentNodeId as string,\n          params.content as string,\n          params.direction as Direction,\n          params.color as string | undefined\n        );\n      case 'arrange_nodes':\n        return this.arrangeNodes(\n          params.nodeIds as string[],\n          params.pattern as string,\n          params.startPosition as string\n        );\n      default:\n        return { success: false, message: `Unknown canvas tool: ${toolName}` };\n    }\n  }\n\n  /**\n   * Describe the current canvas state\n   */\n  private describeCanvas(): CanvasToolResult {\n    const state = this.getState();\n    const description = describeCanvas(state.nodes, state.edges);\n\n    return {\n      success: true,\n      message: description.spatialLayout,\n      data: description,\n    };\n  }\n\n  /**\n   * Move a node to a grid position\n   */\n  private moveNode(nodeId: string, toPosition: string): CanvasToolResult {\n    const state = this.getState();\n    const nodeIndex = state.nodes.findIndex((n) => n.id === nodeId);\n\n    if (nodeIndex === -1) {\n      return { success: false, message: `Node not found: ${nodeId}` };\n    }\n\n    try {\n      const pixel = gridToPixel(toPosition);\n      const newNodes = [...state.nodes];\n      newNodes[nodeIndex] = {\n        ...newNodes[nodeIndex],\n        x: pixel.x,\n        y: pixel.y,\n      };\n\n      this.setState({ ...state, nodes: newNodes });\n\n      return {\n        success: true,\n        message: `Moved node ${nodeId} to position ${toPosition}`,\n        data: { nodeId, newPosition: toPosition, pixel },\n      };\n    } catch (error) {\n      return { success: false, message: `Invalid position: ${toPosition}` };\n    }\n  }\n\n  /**\n   * Update node content\n   */\n  private updateNodeContent(nodeId: string, content: string): CanvasToolResult {\n    const state = this.getState();\n    const nodeIndex = state.nodes.findIndex((n) => n.id === nodeId);\n\n    if (nodeIndex === -1) {\n      return { success: false, message: `Node not found: ${nodeId}` };\n    }\n\n    const newNodes = [...state.nodes];\n    newNodes[nodeIndex] = {\n      ...newNodes[nodeIndex],\n      content,\n    };\n\n    this.setState({ ...state, nodes: newNodes });\n\n    return {\n      success: true,\n      message: `Updated content of node ${nodeId}`,\n      data: { nodeId, content },\n    };\n  }\n\n  /**\n   * Update node color\n   */\n  private updateNodeColor(nodeId: string, color: string): CanvasToolResult {\n    const state = this.getState();\n    const nodeIndex = state.nodes.findIndex((n) => n.id === nodeId);\n\n    if (nodeIndex === -1) {\n      return { success: false, message: `Node not found: ${nodeId}` };\n    }\n\n    const hex = getColorHex(color);\n    const newNodes = [...state.nodes];\n    newNodes[nodeIndex] = {\n      ...newNodes[nodeIndex],\n      style: { ...newNodes[nodeIndex].style, fill: hex },\n    };\n\n    this.setState({ ...state, nodes: newNodes });\n\n    return {\n      success: true,\n      message: `Changed color of node ${nodeId} to ${color}`,\n      data: { nodeId, color, hex },\n    };\n  }\n\n  /**\n   * Create a new node\n   */\n  private createNode(\n    type: string,\n    position: string,\n    content: string,\n    color?: string\n  ): CanvasToolResult {\n    const state = this.getState();\n\n    try {\n      const pixel = gridToPixel(position);\n      const nodeId = `node-${Date.now()}-${Math.random().toString(36).slice(2, 7)}`;\n\n      const newNode: CanvasNode = {\n        id: nodeId,\n        type: type === 'mindmap' ? 'sticky' : type,\n        content,\n        x: pixel.x,\n        y: pixel.y,\n        width: type === 'text' ? 200 : 150,\n        height: type === 'text' ? 50 : 100,\n        style: color ? { fill: getColorHex(color) } : undefined,\n      };\n\n      this.setState({\n        ...state,\n        nodes: [...state.nodes, newNode],\n      });\n\n      return {\n        success: true,\n        message: `Created ${type} node at ${position} with content: \"${content}\"`,\n        data: { nodeId, position, pixel },\n      };\n    } catch (error) {\n      return { success: false, message: `Invalid position: ${position}` };\n    }\n  }\n\n  /**\n   * Connect two nodes\n   */\n  private connectNodes(\n    fromNodeId: string,\n    toNodeId: string,\n    label?: string\n  ): CanvasToolResult {\n    const state = this.getState();\n\n    const fromNode = state.nodes.find((n) => n.id === fromNodeId);\n    const toNode = state.nodes.find((n) => n.id === toNodeId);\n\n    if (!fromNode) {\n      return { success: false, message: `Source node not found: ${fromNodeId}` };\n    }\n    if (!toNode) {\n      return { success: false, message: `Target node not found: ${toNodeId}` };\n    }\n\n    const edgeId = `edge-${Date.now()}-${Math.random().toString(36).slice(2, 7)}`;\n    const newEdge: CanvasEdge = {\n      id: edgeId,\n      source: fromNodeId,\n      target: toNodeId,\n      label,\n    };\n\n    this.setState({\n      ...state,\n      edges: [...state.edges, newEdge],\n    });\n\n    return {\n      success: true,\n      message: `Connected ${fromNodeId} to ${toNodeId}${label ? ` with label \"${label}\"` : ''}`,\n      data: { edgeId, fromNodeId, toNodeId },\n    };\n  }\n\n  /**\n   * Delete a node\n   */\n  private deleteNode(nodeId: string): CanvasToolResult {\n    const state = this.getState();\n    const nodeIndex = state.nodes.findIndex((n) => n.id === nodeId);\n\n    if (nodeIndex === -1) {\n      return { success: false, message: `Node not found: ${nodeId}` };\n    }\n\n    // Remove node and all connected edges\n    const newNodes = state.nodes.filter((n) => n.id !== nodeId);\n    const newEdges = state.edges.filter(\n      (e) => e.source !== nodeId && e.target !== nodeId\n    );\n\n    this.setState({ ...state, nodes: newNodes, edges: newEdges });\n\n    return {\n      success: true,\n      message: `Deleted node ${nodeId}`,\n      data: { nodeId },\n    };\n  }\n\n  /**\n   * Create a mindmap branch\n   */\n  private createMindmapBranch(\n    parentNodeId: string,\n    content: string,\n    direction: Direction,\n    color?: string\n  ): CanvasToolResult {\n    const state = this.getState();\n    const parentNode = state.nodes.find((n) => n.id === parentNodeId);\n\n    if (!parentNode) {\n      return { success: false, message: `Parent node not found: ${parentNodeId}` };\n    }\n\n    // Get parent position and calculate new position\n    const parentGrid = pixelToGrid({ x: parentNode.x, y: parentNode.y });\n    const newPosition = getRelativePosition(parentGrid.label, direction, 2);\n\n    // Create the new node\n    const createResult = this.createNode('mindmap', newPosition, content, color);\n    if (!createResult.success) return createResult;\n\n    // Connect to parent\n    const newNodeId = (createResult.data as { nodeId: string }).nodeId;\n    const connectResult = this.connectNodes(parentNodeId, newNodeId);\n\n    return {\n      success: true,\n      message: `Created mindmap branch \"${content}\" ${direction} of parent at ${newPosition}`,\n      data: {\n        nodeId: newNodeId,\n        parentNodeId,\n        position: newPosition,\n        direction,\n      },\n    };\n  }\n\n  /**\n   * Arrange nodes in a pattern\n   */\n  private arrangeNodes(\n    nodeIds: string[],\n    pattern: string,\n    startPosition: string\n  ): CanvasToolResult {\n    const state = this.getState();\n\n    // Verify all nodes exist\n    for (const id of nodeIds) {\n      if (!state.nodes.find((n) => n.id === id)) {\n        return { success: false, message: `Node not found: ${id}` };\n      }\n    }\n\n    try {\n      const startPixel = gridToPixel(startPosition);\n      const newNodes = [...state.nodes];\n      const spacing = 200; // pixels between nodes\n\n      nodeIds.forEach((id, index) => {\n        const nodeIndex = newNodes.findIndex((n) => n.id === id);\n        if (nodeIndex === -1) return;\n\n        let x = startPixel.x;\n        let y = startPixel.y;\n\n        switch (pattern) {\n          case 'horizontal':\n            x += index * spacing;\n            break;\n          case 'vertical':\n            y += index * spacing;\n            break;\n          case 'grid':\n            const cols = Math.ceil(Math.sqrt(nodeIds.length));\n            x += (index % cols) * spacing;\n            y += Math.floor(index / cols) * spacing;\n            break;\n          case 'radial':\n            const angle = (index / nodeIds.length) * 2 * Math.PI;\n            const radius = 200;\n            x += Math.cos(angle) * radius;\n            y += Math.sin(angle) * radius;\n            break;\n          case 'mindmap':\n            // First node is center, others radiate out\n            if (index === 0) {\n              // Center node stays at start\n            } else {\n              const branchAngle = ((index - 1) / (nodeIds.length - 1)) * 2 * Math.PI;\n              x += Math.cos(branchAngle) * spacing;\n              y += Math.sin(branchAngle) * spacing;\n            }\n            break;\n        }\n\n        newNodes[nodeIndex] = { ...newNodes[nodeIndex], x, y };\n      });\n\n      this.setState({ ...state, nodes: newNodes });\n\n      return {\n        success: true,\n        message: `Arranged ${nodeIds.length} nodes in ${pattern} pattern starting at ${startPosition}`,\n        data: { nodeIds, pattern, startPosition },\n      };\n    } catch (error) {\n      return { success: false, message: `Invalid start position: ${startPosition}` };\n    }\n  }\n}\n\n// ============================================================================\n// Canvas Context for AI System Prompt\n// ============================================================================\n\n/**\n * Generate canvas context for Claw AI system prompt\n */\nexport function generateCanvasContext(state: CanvasState): string {\n  const description = describeCanvas(state.nodes, state.edges);\n\n  return `\n## Current Canvas State\n\nYou have access to a design canvas that you can control using tools.\n\n**Canvas Grid System:**\n- Positions use spreadsheet notation: columns are letters (A-Z, AA-AZ, etc.), rows are numbers (1-100)\n- Example: A1 is top-left, B5 is column B row 5, AA10 is column 27 row 10\n- Each grid cell is 100x100 pixels\n\n**Current State:**\n- Total nodes: ${description.totalNodes}\n- Total connections: ${description.totalConnections}\n- Grid bounds: ${description.gridBounds.minLabel} to ${description.gridBounds.maxLabel}\n\n**Nodes on Canvas:**\n${description.nodes.length > 0 ? description.nodes.map((n) => `- [${n.id}] ${n.type} at ${n.gridPosition}: \"${n.content.slice(0, 40)}${n.content.length > 40 ? '...' : ''}\"${n.color ? ` (${n.color})` : ''}`).join('\\n') : '(empty)'}\n\n**Available Canvas Tools:**\n- describe_canvas: Get full canvas state\n- move_node: Move a node to grid position\n- update_node_content: Change node text\n- update_node_color: Change node color (yellow, blue, green, pink, purple, orange, red, cyan, white, gray)\n- create_node: Add new node (sticky, text, shape, code, mindmap)\n- connect_nodes: Create connection between nodes\n- delete_node: Remove a node\n- create_mindmap_branch: Add branch to mindmap (specify direction: above, below, left, right, etc.)\n- arrange_nodes: Auto-arrange nodes (grid, horizontal, vertical, radial, mindmap)\n\nWhen the user asks you to manipulate the canvas, use these tools. You can visualize the grid in your head - it's like a spreadsheet!\n`;\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 1486, "column": 0}, "map": {"version":3,"sources":["file:///Users/jamesspalding/OpenClaw-OS/src/lib/openclaw/client-impl.ts"],"sourcesContent":["import { nanoid } from 'nanoid';\nimport WebSocket from 'isomorphic-ws';\nimport { Buffer } from 'buffer';\n\n// Protocol constants based on OpenClaw source\nconst PROTOCOL_VERSION = 3;\n\nexport interface OpenClawClientConfig {\n    url: string;\n    authToken?: string;\n    device?: {\n        id: string;\n        publicKey: string;\n        privateKey: string;\n    };\n}\n\ntype MessageHandler = (message: any) => void;\n\nexport class OpenClawClientImpl {\n    private ws: WebSocket | null = null;\n    private url: string;\n    private authToken?: string;\n    private pendingRequests = new Map<string, { resolve: (val: any) => void; reject: (err: any) => void }>();\n    private eventListeners = new Map<string, Set<MessageHandler>>();\n    private isConnected = false;\n    private connectPromise: Promise<void> | null = null;\n\n    constructor(config: OpenClawClientConfig) {\n        this.url = config.url;\n        this.authToken = config.authToken;\n    }\n\n    async connect(): Promise<void> {\n        if (this.isConnected) return;\n        if (this.connectPromise) return this.connectPromise;\n\n        this.connectPromise = new Promise((resolve, reject) => {\n            try {\n                // Set origin to satisfy gateway check for Control UI\n                const options = {\n                    headers: {\n                        Origin: 'http://localhost:18789'\n                    }\n                };\n                this.ws = new WebSocket(this.url, options);\n\n                this.ws.onopen = () => {\n                    console.log('[OpenClawClient] WebSocket connected');\n                };\n\n                this.ws.onmessage = (event) => {\n                    try {\n                        let data: any;\n                        const rawData = event.data;\n\n                        // console.log('[OpenClawClient] Raw message type:', typeof rawData);\n\n                        if (typeof rawData === 'string') {\n                            data = JSON.parse(rawData);\n                        } else if (Buffer.isBuffer(rawData)) {\n                            // console.log('[OpenClawClient] Buffer received, length:', rawData.length);\n                            data = JSON.parse(rawData.toString());\n                        } else if (rawData instanceof ArrayBuffer) {\n                            // console.log('[OpenClawClient] ArrayBuffer received, byteLength:', rawData.byteLength);\n                            const decoder = new TextDecoder();\n                            data = JSON.parse(decoder.decode(rawData));\n                        } else if (Array.isArray(rawData)) {\n                            // Buffer[]\n                            // console.log('[OpenClawClient] Buffer array received');\n                            data = JSON.parse(Buffer.concat(rawData).toString());\n                        } else {\n                            // unknown\n                            console.warn('[OpenClawClient] Unknown message type:', typeof rawData);\n                            return;\n                        }\n\n                        // console.log('[OpenClawClient] Parsed message:', data?.type, data?.event || data?.method);\n                        this.handleMessage(data, resolve, reject);\n                    } catch (err) {\n                        console.error('[OpenClawClient] Failed to parse message:', err);\n                    }\n                };\n\n                this.ws.onerror = (error) => {\n                    console.error('[OpenClawClient] WebSocket error:', error);\n                    if (!this.isConnected) reject(error);\n                };\n\n                this.ws.onclose = () => {\n                    console.log('[OpenClawClient] WebSocket closed');\n                    this.isConnected = false;\n                    this.connectPromise = null;\n                };\n            } catch (err) {\n                reject(err);\n            }\n        });\n\n        return this.connectPromise;\n    }\n\n    private handleMessage(message: any, connectResolve: () => void, connectReject: (err: any) => void) {\n        // console.log('[OpenClawClient] Received:', message);\n\n        if (message.type === 'event' && message.event === 'connect.challenge') {\n            this.handleChallenge(message.payload, connectResolve, connectReject);\n            return;\n        }\n\n        if (message.type === 'res') {\n            const pending = this.pendingRequests.get(message.id);\n            if (pending) {\n                if (message.ok) {\n                    pending.resolve(message.body || message.payload); // Adapting to potential response format\n                } else {\n                    pending.reject(new Error(message.error?.message || 'Unknown error'));\n                }\n                this.pendingRequests.delete(message.id);\n            }\n            return;\n        }\n\n        if (message.type === 'event') {\n            const listeners = this.eventListeners.get(message.event);\n            if (listeners) {\n                listeners.forEach(handler => handler(message.payload));\n            }\n        }\n    }\n\n    private handleChallenge(payload: { nonce: string }, resolve: () => void, reject: (err: any) => void) {\n        const connectReq = {\n            type: 'req',\n            id: nanoid(),\n            method: 'connect',\n            params: {\n                minProtocol: PROTOCOL_VERSION,\n                maxProtocol: PROTOCOL_VERSION,\n                role: 'operator',\n                client: {\n                    id: 'webchat', // Bypass Control UI secure context check\n                    displayName: 'OpenClaw OS',\n                    version: '0.1.0',\n                    platform: 'web',\n                    mode: 'ui',\n                    deviceFamily: 'browser'\n                },\n                auth: { token: this.authToken }\n            }\n        };\n\n        if (this.ws) {\n            this.send(connectReq);\n            // We assume connection is successful if we don't get an immediate error? \n            // Or should we wait for a response? The protocol usually sends a generic 'res' for the connect req.\n\n            // Register a temporary handler for the connect response\n            this.pendingRequests.set(connectReq.id, {\n                resolve: () => {\n                    this.isConnected = true;\n                    resolve();\n                },\n                reject: (err) => {\n                    this.isConnected = false;\n                    reject(err);\n                }\n            });\n        }\n    }\n\n    private send(message: any) {\n        if (this.ws && this.ws.readyState === WebSocket.OPEN) {\n            this.ws.send(JSON.stringify(message));\n        } else {\n            console.warn('[OpenClawClient] Cannot send, socket not open');\n        }\n    }\n\n    public async request(method: string, params: any = {}): Promise<any> {\n        await this.connect();\n        const id = nanoid();\n        return new Promise((resolve, reject) => {\n            this.pendingRequests.set(id, { resolve, reject });\n            this.send({\n                type: 'req',\n                id,\n                method,\n                params\n            });\n            // specific logic for timeout could be added here\n        });\n    }\n\n    public subscribe(event: string, handler: MessageHandler) {\n        if (!this.eventListeners.has(event)) {\n            this.eventListeners.set(event, new Set());\n        }\n        this.eventListeners.get(event)!.add(handler);\n        return () => {\n            this.eventListeners.get(event)?.delete(handler);\n        };\n    }\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 1674, "column": 0}, "map": {"version":3,"sources":["file:///Users/jamesspalding/OpenClaw-OS/src/lib/openclaw/client.ts"],"sourcesContent":["import { OpenClawClientImpl } from './client-impl';\n\n// Default to local gateway if not configured\nconst GATEWAY_URL = process.env.NEXT_PUBLIC_OPENCLAW_GATEWAY_URL || 'ws://localhost:3000';\nconst GATEWAY_TOKEN = process.env.NEXT_PUBLIC_OPENCLAW_GATEWAY_TOKEN || 'openclaw-admin-token'; // Default for dev\n\nclass OpenClawClient {\n  private static instance: OpenClawClientImpl;\n\n  public static getInstance(): OpenClawClientImpl {\n    if (!OpenClawClient.instance) {\n      // Load from localStorage if possible\n      let url = GATEWAY_URL;\n      let token = GATEWAY_TOKEN;\n\n      if (typeof window !== 'undefined') {\n        const stored = localStorage.getItem('openclaw_onboarding');\n        if (stored) {\n          try {\n            const parsed = JSON.parse(stored);\n            if (parsed.gatewayUrl) url = parsed.gatewayUrl;\n            if (parsed.gatewayToken) token = parsed.gatewayToken;\n          } catch (e) {\n            // Use defaults\n          }\n        }\n      }\n\n      OpenClawClient.instance = new OpenClawClientImpl({\n        url: url,\n        authToken: token\n      });\n    }\n    return OpenClawClient.instance;\n  }\n}\n\nexport const openClaw = OpenClawClient.getInstance();\n\nexport const useOpenClaw = () => {\n  return openClaw;\n};\n\n// Shims for Convex compatibility\nexport class ConvexHttpClient {\n  constructor(private url: string) { }\n  // Add methods as needed\n  async query(name: string, args: any) { console.warn(\"ConvexHttpClient.query shim called\", name, args); return null; }\n  async mutation(name: string, args: any) { console.warn(\"ConvexHttpClient.mutation shim called\", name, args); return null; }\n  async action(name: string, args: any) { console.warn(\"ConvexHttpClient.action shim called\", name, args); return null; }\n}\n\nexport function makeFunctionReference(name: string) {\n  return name;\n}\n\nexport class ConvexReactClient {\n  constructor(private url: string) { }\n}\n\nexport const ConvexProvider = ({ client, children }: any) => children;\nexport const ConvexProviderWithClerk = ({ client, children }: any) => children;\n"],"names":[],"mappings":";;;;;;;;;;;;;;;;AAGoB;AAHpB;;AAEA,6CAA6C;AAC7C,MAAM,cAAc,4DAAgD;AACpE,MAAM,gBAAgB,4DAAkD,wBAAwB,kBAAkB;AAElH,MAAM;IACJ,OAAe,SAA6B;IAE5C,OAAc,cAAkC;QAC9C,IAAI,CAAC,eAAe,QAAQ,EAAE;YAC5B,qCAAqC;YACrC,IAAI,MAAM;YACV,IAAI,QAAQ;YAEZ,wCAAmC;gBACjC,MAAM,SAAS,aAAa,OAAO,CAAC;gBACpC,IAAI,QAAQ;oBACV,IAAI;wBACF,MAAM,SAAS,KAAK,KAAK,CAAC;wBAC1B,IAAI,OAAO,UAAU,EAAE,MAAM,OAAO,UAAU;wBAC9C,IAAI,OAAO,YAAY,EAAE,QAAQ,OAAO,YAAY;oBACtD,EAAE,OAAO,GAAG;oBACV,eAAe;oBACjB;gBACF;YACF;YAEA,eAAe,QAAQ,GAAG,IAAI,iKAAkB,CAAC;gBAC/C,KAAK;gBACL,WAAW;YACb;QACF;QACA,OAAO,eAAe,QAAQ;IAChC;AACF;AAEO,MAAM,WAAW,eAAe,WAAW;AAE3C,MAAM,cAAc;IACzB,OAAO;AACT;AAGO,MAAM;;IACX,YAAY,AAAQ,GAAW,CAAE;aAAb,MAAA;IAAe;IACnC,wBAAwB;IACxB,MAAM,MAAM,IAAY,EAAE,IAAS,EAAE;QAAE,QAAQ,IAAI,CAAC,sCAAsC,MAAM;QAAO,OAAO;IAAM;IACpH,MAAM,SAAS,IAAY,EAAE,IAAS,EAAE;QAAE,QAAQ,IAAI,CAAC,yCAAyC,MAAM;QAAO,OAAO;IAAM;IAC1H,MAAM,OAAO,IAAY,EAAE,IAAS,EAAE;QAAE,QAAQ,IAAI,CAAC,uCAAuC,MAAM;QAAO,OAAO;IAAM;AACxH;AAEO,SAAS,sBAAsB,IAAY;IAChD,OAAO;AACT;AAEO,MAAM;;IACX,YAAY,AAAQ,GAAW,CAAE;aAAb,MAAA;IAAe;AACrC;AAEO,MAAM,iBAAiB,CAAC,EAAE,MAAM,EAAE,QAAQ,EAAO,GAAK;KAAhD;AACN,MAAM,0BAA0B,CAAC,EAAE,MAAM,EAAE,QAAQ,EAAO,GAAK;MAAzD"}},
    {"offset": {"line": 1769, "column": 0}, "map": {"version":3,"sources":["file:///Users/jamesspalding/OpenClaw-OS/src/lib/openclaw/hooks.ts"],"sourcesContent":["\nimport { useState, useEffect, useCallback, useMemo } from 'react';\nimport { openClaw } from './client';\n\nexport function useQuery<T>(queryName: string, args: any = {}) {\n    const [data, setData] = useState<T | null>(null);\n    const [isLoading, setIsLoading] = useState(true);\n    const [error, setError] = useState<Error | null>(null);\n\n    // Stable stringify for args to prevent infinite loops\n    const argsString = useMemo(() => JSON.stringify(args), [args]);\n\n    useEffect(() => {\n        let isMounted = true;\n        setIsLoading(true);\n\n        const fetchData = async () => {\n            try {\n                // Ensure args are parsed back to object if needed, or pass as is\n                const actualArgs = JSON.parse(argsString);\n                // Map \"folder:function\" to \"folder.function\" if needed, or use as is.\n                // OpenClaw methods are like \"agents.list\". Convex was \"folder:function\".\n                // We'll assume the user updates the query names or we convert them. as needed.\n                const method = queryName.replace(':', '.');\n\n                const result = await openClaw.request(method, actualArgs);\n                if (isMounted) setData(result);\n            } catch (err: any) {\n                console.error(`[OpenClaw] Query failed: ${queryName}`, err);\n                if (isMounted) setError(err);\n            } finally {\n                if (isMounted) setIsLoading(false);\n            }\n        };\n\n        fetchData();\n\n        // Subscription logic could go here\n        // const unsubscribe = openClaw.subscribe(queryName, (payload) => { ... });\n\n        return () => {\n            isMounted = false;\n            // unsubscribe();\n        };\n    }, [queryName, argsString]);\n\n    return data;\n}\n\nexport function useMutation<T, A>(mutationName: string) {\n    const [isLoading, setIsLoading] = useState(false);\n    const [error, setError] = useState<Error | null>(null);\n\n    const mutate = useCallback(async (args: A) => {\n        setIsLoading(true);\n        setError(null);\n        try {\n            const method = mutationName.replace(':', '.');\n            const result = await openClaw.request(method, args);\n            return result;\n        } catch (err: any) {\n            setError(err);\n            throw err;\n        } finally {\n            setIsLoading(false);\n        }\n    }, [mutationName]);\n\n    // Return the mutate function directly to match Convex behavior\n    const mutateFunction = async (args: A) => {\n        try {\n            setIsLoading(true);\n            return await mutate(args);\n        } finally {\n            setIsLoading(false);\n        }\n    };\n    return mutateFunction;\n}\n\n// Shims\nexport function useConvex() {\n    return openClaw;\n}\n\nexport function useConvexAuth() {\n    return { isAuthenticated: true, isLoading: false };\n}\n\n// Support useQuery(api.foo.bar) syntax which passes a function/object\n// We need to handle arguments that might be objects or strings.\n// Since we replaced the import, existing code passes the original 'api' object references.\n// We need to make sure those references don't crash.\n// However, 'api' imports are usually from '@/lib/convex-shim';\n// Since we removed convex folder, those imports will fail too!\n\n"],"names":[],"mappings":";;;;;;;;;;AACA;AACA;;;;AAEO,SAAS,SAAY,SAAiB,EAAE,OAAY,CAAC,CAAC;;IACzD,MAAM,CAAC,MAAM,QAAQ,GAAG,IAAA,kXAAQ,EAAW;IAC3C,MAAM,CAAC,WAAW,aAAa,GAAG,IAAA,kXAAQ,EAAC;IAC3C,MAAM,CAAC,OAAO,SAAS,GAAG,IAAA,kXAAQ,EAAe;IAEjD,sDAAsD;IACtD,MAAM,aAAa,IAAA,iXAAO;wCAAC,IAAM,KAAK,SAAS,CAAC;uCAAO;QAAC;KAAK;IAE7D,IAAA,mXAAS;8BAAC;YACN,IAAI,YAAY;YAChB,aAAa;YAEb,MAAM;gDAAY;oBACd,IAAI;wBACA,iEAAiE;wBACjE,MAAM,aAAa,KAAK,KAAK,CAAC;wBAC9B,sEAAsE;wBACtE,yEAAyE;wBACzE,+EAA+E;wBAC/E,MAAM,SAAS,UAAU,OAAO,CAAC,KAAK;wBAEtC,MAAM,SAAS,MAAM,+IAAQ,CAAC,OAAO,CAAC,QAAQ;wBAC9C,IAAI,WAAW,QAAQ;oBAC3B,EAAE,OAAO,KAAU;wBACf,QAAQ,KAAK,CAAC,CAAC,yBAAyB,EAAE,WAAW,EAAE;wBACvD,IAAI,WAAW,SAAS;oBAC5B,SAAU;wBACN,IAAI,WAAW,aAAa;oBAChC;gBACJ;;YAEA;YAEA,mCAAmC;YACnC,2EAA2E;YAE3E;sCAAO;oBACH,YAAY;gBACZ,iBAAiB;gBACrB;;QACJ;6BAAG;QAAC;QAAW;KAAW;IAE1B,OAAO;AACX;GA3CgB;AA6CT,SAAS,YAAkB,YAAoB;;IAClD,MAAM,CAAC,WAAW,aAAa,GAAG,IAAA,kXAAQ,EAAC;IAC3C,MAAM,CAAC,OAAO,SAAS,GAAG,IAAA,kXAAQ,EAAe;IAEjD,MAAM,SAAS,IAAA,qXAAW;2CAAC,OAAO;YAC9B,aAAa;YACb,SAAS;YACT,IAAI;gBACA,MAAM,SAAS,aAAa,OAAO,CAAC,KAAK;gBACzC,MAAM,SAAS,MAAM,+IAAQ,CAAC,OAAO,CAAC,QAAQ;gBAC9C,OAAO;YACX,EAAE,OAAO,KAAU;gBACf,SAAS;gBACT,MAAM;YACV,SAAU;gBACN,aAAa;YACjB;QACJ;0CAAG;QAAC;KAAa;IAEjB,+DAA+D;IAC/D,MAAM,iBAAiB,OAAO;QAC1B,IAAI;YACA,aAAa;YACb,OAAO,MAAM,OAAO;QACxB,SAAU;YACN,aAAa;QACjB;IACJ;IACA,OAAO;AACX;IA7BgB;AAgCT,SAAS;IACZ,OAAO,+IAAQ;AACnB;AAEO,SAAS;IACZ,OAAO;QAAE,iBAAiB;QAAM,WAAW;IAAM;AACrD,EAEA,sEAAsE;CACtE,gEAAgE;CAChE,2FAA2F;CAC3F,qDAAqD;CACrD,+DAA+D;CAC/D,+DAA+D"}},
    {"offset": {"line": 1890, "column": 0}, "map": {"version":3,"sources":["file:///Users/jamesspalding/OpenClaw-OS/src/lib/convex-shim.ts"],"sourcesContent":["export class ConvexHttpClient {\n    constructor(url: string) { }\n    query(query: any, args?: any): Promise<any> { return Promise.resolve(null); }\n    mutation(mutation: any, args?: any): Promise<any> { return Promise.resolve(null); }\n}\n\nexport const api = {\n    jobs: {\n        getAgentJobs: 'jobs:getAgentJobs',\n        cancelJob: 'jobs:cancelJob',\n        getJob: 'jobs:getJob',\n        queueCodeIteration: 'jobs:queueCodeIteration',\n        queueSpecialistDelegation: 'jobs:queueSpecialistDelegation',\n        queueAgentTask: 'jobs:queueAgentTask',\n        updateJobStatusPublic: 'jobs:updateJobStatusPublic',\n        logJobEventPublic: 'jobs:logJobEventPublic',\n    },\n    aiSettings: {\n        getSettings: 'aiSettings:getSettings',\n    },\n    erv: {\n        createEntity: 'erv:createEntity',\n        createRelationship: 'erv:createRelationship',\n        createDimension: 'erv:createDimension',\n        listDimensions: 'erv:listDimensions',\n        searchEntities: 'erv:searchEntities',\n        getEntity: 'erv:getEntity',\n    },\n    jamz: {\n        createProject: 'jamz:createProject',\n        createTrack: 'jamz:createTrack',\n        createClip: 'jamz:createClip',\n    },\n    messages: {\n        send: 'messages:send',\n    },\n    whatsappContacts: {\n        list: 'whatsappContacts:list',\n        getContactByPhone: 'whatsappContacts:getContactByPhone',\n        listContacts: 'whatsappContacts:listContacts',\n        upsertContact: 'whatsappContacts:upsertContact',\n    },\n    channels: {\n        list: 'channels:list',\n        getChannel: 'channels:getChannel',\n        sendMessage: 'channels:sendMessage',\n        getUserMessages: 'channels:getUserMessages',\n        getUserIntegrations: 'channels:getUserIntegrations',\n        getConversations: 'channels:getConversations',\n        getIntegration: 'channels:getIntegration',\n        logOutboundMessage: 'channels:logOutboundMessage',\n        searchMessages: 'channels:searchMessages',\n    },\n    scheduling: {\n        list: 'scheduling:list',\n        createEvent: 'scheduling:createEvent',\n        getEventTypes: 'scheduling:getEventTypes',\n        getAvailableSlots: 'scheduling:getAvailableSlots',\n        createBooking: 'scheduling:createBooking',\n        rescheduleBooking: 'scheduling:rescheduleBooking',\n        updateBookingStatus: 'scheduling:updateBookingStatus',\n    },\n    userCronJobs: {\n        list: 'userCronJobs:list',\n        create: 'userCronJobs:create',\n        delete: 'userCronJobs:delete',\n        createJob: 'userCronJobs:createJob',\n        getUserJobs: 'userCronJobs:getUserJobs',\n        toggleJob: 'userCronJobs:toggleJob',\n        deleteJob: 'userCronJobs:deleteJob',\n    },\n    compaction: {\n        compact: 'compaction:compact',\n        getLatestCompaction: 'compaction:getLatestCompaction',\n    },\n    kanban: {\n        listLists: 'kanban:listLists',\n        createCard: 'kanban:createCard',\n        moveCard: 'kanban:moveCard',\n        getTaskById: 'kanban:getTaskById',\n        searchTasks: 'kanban:searchTasks',\n        getTasks: 'kanban:getTasks',\n        isSeeded: 'kanban:isSeeded',\n        addTask: 'kanban:addTask',\n        updateTask: 'kanban:updateTask',\n        deleteTask: 'kanban:deleteTask',\n        moveTask: 'kanban:moveTask',\n        seedTasks: 'kanban:seedTasks',\n    },\n    designCanvas: {\n        getCanvas: 'designCanvas:getCanvas',\n        updateCanvas: 'designCanvas:updateCanvas',\n        createItem: 'designCanvas:createItem',\n        createCanvas: 'designCanvas:createCanvas',\n        getUserCanvases: 'designCanvas:getUserCanvases',\n        getCanvasNodes: 'designCanvas:getCanvasNodes',\n        getCanvasEdges: 'designCanvas:getCanvasEdges',\n        addNode: 'designCanvas:addNode',\n        addEdge: 'designCanvas:addEdge',\n        updateNode: 'designCanvas:updateNode',\n    },\n    agentic: {\n        createProductProject: 'agentic:createProductProject',\n        createPRD: 'agentic:createPRD',\n        createEpic: 'agentic:createEpic',\n        createTicket: 'agentic:createTicket',\n    },\n    discovery: {\n        getSession: 'discovery:getSession',\n        storeInsights: 'discovery:storeInsights',\n        storeArtifacts: 'discovery:storeArtifacts',\n        markNotificationSent: 'discovery:markNotificationSent',\n        markError: 'discovery:markError',\n        getSessionByCallerId: 'discovery:getSessionByCallerId',\n        updateTranscript: 'discovery:updateTranscript',\n    },\n    memories: {\n        searchEpisodic: 'memories:searchEpisodic',\n        getSemanticByCategories: 'memories:getSemanticByCategories',\n        getAllSemantic: 'memories:getAllSemantic',\n        getRecentEpisodic: 'memories:getRecentEpisodic',\n        storeEpisodic: 'memories:storeEpisodic',\n        upsertSemantic: 'memories:upsertSemantic',\n        deleteEpisodic: 'memories:deleteEpisodic',\n        deleteSemantic: 'memories:deleteSemantic',\n        getMemoryStats: 'memories:getMemoryStats',\n    },\n    observability: {\n        getSecurityScans: 'observability:getSecurityScans',\n        createSecurityScan: 'observability:createSecurityScan',\n        getActivityStream: 'observability:getActivityStream',\n        getDashboardOverview: 'observability:getDashboardOverview',\n        getProviderHealthStatus: 'observability:getProviderHealthStatus',\n        logOperation: 'observability:logOperation',\n    },\n    roadmap: {\n        submitSuggestion: 'roadmap:submitSuggestion',\n        getSuggestions: 'roadmap:getSuggestions',\n        updateSuggestionStatus: 'roadmap:updateSuggestionStatus',\n        voteSuggestion: 'roadmap:voteSuggestion',\n    }\n\n};\n\n// Export ConvexReactClient type for compatibility\nexport type ConvexReactClient = any;\n\nexport type Id<T extends string> = string;\n"],"names":[],"mappings":";;;;;;AAAO,MAAM;IACT,YAAY,GAAW,CAAE,CAAE;IAC3B,MAAM,KAAU,EAAE,IAAU,EAAgB;QAAE,OAAO,QAAQ,OAAO,CAAC;IAAO;IAC5E,SAAS,QAAa,EAAE,IAAU,EAAgB;QAAE,OAAO,QAAQ,OAAO,CAAC;IAAO;AACtF;AAEO,MAAM,MAAM;IACf,MAAM;QACF,cAAc;QACd,WAAW;QACX,QAAQ;QACR,oBAAoB;QACpB,2BAA2B;QAC3B,gBAAgB;QAChB,uBAAuB;QACvB,mBAAmB;IACvB;IACA,YAAY;QACR,aAAa;IACjB;IACA,KAAK;QACD,cAAc;QACd,oBAAoB;QACpB,iBAAiB;QACjB,gBAAgB;QAChB,gBAAgB;QAChB,WAAW;IACf;IACA,MAAM;QACF,eAAe;QACf,aAAa;QACb,YAAY;IAChB;IACA,UAAU;QACN,MAAM;IACV;IACA,kBAAkB;QACd,MAAM;QACN,mBAAmB;QACnB,cAAc;QACd,eAAe;IACnB;IACA,UAAU;QACN,MAAM;QACN,YAAY;QACZ,aAAa;QACb,iBAAiB;QACjB,qBAAqB;QACrB,kBAAkB;QAClB,gBAAgB;QAChB,oBAAoB;QACpB,gBAAgB;IACpB;IACA,YAAY;QACR,MAAM;QACN,aAAa;QACb,eAAe;QACf,mBAAmB;QACnB,eAAe;QACf,mBAAmB;QACnB,qBAAqB;IACzB;IACA,cAAc;QACV,MAAM;QACN,QAAQ;QACR,QAAQ;QACR,WAAW;QACX,aAAa;QACb,WAAW;QACX,WAAW;IACf;IACA,YAAY;QACR,SAAS;QACT,qBAAqB;IACzB;IACA,QAAQ;QACJ,WAAW;QACX,YAAY;QACZ,UAAU;QACV,aAAa;QACb,aAAa;QACb,UAAU;QACV,UAAU;QACV,SAAS;QACT,YAAY;QACZ,YAAY;QACZ,UAAU;QACV,WAAW;IACf;IACA,cAAc;QACV,WAAW;QACX,cAAc;QACd,YAAY;QACZ,cAAc;QACd,iBAAiB;QACjB,gBAAgB;QAChB,gBAAgB;QAChB,SAAS;QACT,SAAS;QACT,YAAY;IAChB;IACA,SAAS;QACL,sBAAsB;QACtB,WAAW;QACX,YAAY;QACZ,cAAc;IAClB;IACA,WAAW;QACP,YAAY;QACZ,eAAe;QACf,gBAAgB;QAChB,sBAAsB;QACtB,WAAW;QACX,sBAAsB;QACtB,kBAAkB;IACtB;IACA,UAAU;QACN,gBAAgB;QAChB,yBAAyB;QACzB,gBAAgB;QAChB,mBAAmB;QACnB,eAAe;QACf,gBAAgB;QAChB,gBAAgB;QAChB,gBAAgB;QAChB,gBAAgB;IACpB;IACA,eAAe;QACX,kBAAkB;QAClB,oBAAoB;QACpB,mBAAmB;QACnB,sBAAsB;QACtB,yBAAyB;QACzB,cAAc;IAClB;IACA,SAAS;QACL,kBAAkB;QAClB,gBAAgB;QAChB,wBAAwB;QACxB,gBAAgB;IACpB;AAEJ"}},
    {"offset": {"line": 2048, "column": 0}, "map": {"version":3,"sources":["file:///Users/jamesspalding/OpenClaw-OS/src/data/resume.tsx"],"sourcesContent":["import { Icons } from \"@/components/icons\";\nimport { HomeIcon, NotebookIcon, BookOpen, Palette, Music, PencilRuler } from \"lucide-react\";\n\nexport const DATA = {\n  name: \"OpenClaw-OS\",\n  initials: \"OC\",\n  url: \"https://openclaw.io/\",\n  location: \"Dublin, Ireland\",\n  locationLink: \"https://www.google.com/maps/place/dublin+ireland\",\n  description:\n    \"An AI-native operating system designed for high-performance productivity, agentic orchestration, and seamless human-AI collaboration.\",\n  summary: `OpenClaw-OS is a next-generation operating environment built for the AI age. It bridges design, engineering, and product strategy into a single, cohesive experience.\n\n**AI-Native Architecture** - Designed from the ground up to support multi-agent collaboration, context management, and intelligent automation.\n\n**High-Craft UI/UX** - A professional, iOS-style interface with 50+ beautiful themes, liquid animations, and glassmorphic aesthetics.\n\n**Agentic Control Plane** - Use the integrated AI assistant to orchestrate complex workflows, manage projects, and build functional prototypes directly through conversation.`,\n  avatarUrl: \"/openclaw-logo.png\",\n  skills: [\n    \"Agentic AI Orchestration\",\n    \"Product-Led Development\",\n    \"AI Context Management\",\n    \"Multi-Agent Systems\",\n    \"React & Next.js\",\n    \"TailwindCSS\",\n    \"Cloud-native Systems\",\n    \"System Thinking\",\n    \"UI/UX Design Systems\",\n  ],\n  navbar: [\n    { href: \"/\", icon: HomeIcon, label: \"Home\" },\n    { href: \"/canvas\", icon: PencilRuler, label: \"Canvas\" },\n    { href: \"/design\", icon: Palette, label: \"Design\" },\n    { href: \"/music\", icon: Music, label: \"Music\" },\n  ],\n  contact: {\n    email: \"hello@openclaw.io\",\n    tel: \"\",\n    website: \"https://openclaw.io/\",\n    social: {\n      GitHub: {\n        name: \"GitHub\",\n        url: \"https://github.com/openclaw\",\n        icon: Icons.github,\n        navbar: false,\n      },\n      LinkedIn: {\n        name: \"LinkedIn\",\n        url: \"https://linkedin.com/company/openclaw\",\n        icon: Icons.linkedin,\n        navbar: false,\n      },\n      X: {\n        name: \"X\",\n        url: \"https://x.com/openclaw\",\n        icon: Icons.x,\n        navbar: false,\n      },\n      website: {\n        name: \"Website\",\n        url: \"https://openclaw.io/\",\n        icon: Icons.globe,\n        navbar: false,\n      },\n      email: {\n        name: \"Send Email\",\n        url: \"#\",\n        icon: Icons.email,\n        navbar: false,\n      },\n    },\n  },\n  work: [\n    {\n      company: \"OpenClaw Development\",\n      href: \"\",\n      badges: [\"Active\"],\n      location: \"Remote\",\n      title: \"Core System Development\",\n      logoUrl: \"/openclaw-logo.png\",\n      start: \"2024\",\n      end: \"Present\",\n      description: \"Leading the development of the OpenClaw-OS ecosystem, focusing on AI-native interaction models and design-led system architecture.\"\n    },\n    {\n      company: \"The Creative Engine\",\n      href: \"\",\n      badges: [],\n      location: \"Worldwide\",\n      title: \"Product Innovation Lab\",\n      logoUrl: \"🎨\",\n      start: \"2019\",\n      end: \"2024\",\n      description: \"Research and development into the future of human-computer interaction and AI-amplified creativity.\"\n    }\n  ],\n  education: [\n    {\n      school: \"OpenClaw OS Institute\",\n      href: \"\",\n      degree: \"Systems Architecture\",\n      logoUrl: \"\",\n      start: \"2020\",\n      end: \"2024\",\n    }\n  ],\n  projects: [\n    {\n      title: \"OpenClaw-OS\",\n      href: \"https://openclaw.io\",\n      dates: \"2025\",\n      active: true,\n      description: \"The core operating system featuring 50+ themes, AI-native workflows, and an integrated assistant.\",\n      technologies: [\"Next.js 16\", \"React 19\", \"Claude API\", \"TailwindCSS\"],\n      links: [{ type: \"Website\", href: \"https://openclaw.io\", icon: <Icons.globe className=\"size-3\" /> }],\n      image: \"\",\n      video: \"\",\n    }\n  ],\n  hackathons: [],\n} as const;"],"names":[],"mappings":";;;;;AAAA;AACA;AAAA;AAAA;AAAA;;;;AAEO,MAAM,OAAO;IAClB,MAAM;IACN,UAAU;IACV,KAAK;IACL,UAAU;IACV,cAAc;IACd,aACE;IACF,SAAS,CAAC;;;;;;6KAMiK,CAAC;IAC5K,WAAW;IACX,QAAQ;QACN;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;KACD;IACD,QAAQ;QACN;YAAE,MAAM;YAAK,MAAM,0SAAQ;YAAE,OAAO;QAAO;QAC3C;YAAE,MAAM;YAAW,MAAM,0TAAW;YAAE,OAAO;QAAS;QACtD;YAAE,MAAM;YAAW,MAAM,0SAAO;YAAE,OAAO;QAAS;QAClD;YAAE,MAAM;YAAU,MAAM,oSAAK;YAAE,OAAO;QAAQ;KAC/C;IACD,SAAS;QACP,OAAO;QACP,KAAK;QACL,SAAS;QACT,QAAQ;YACN,QAAQ;gBACN,MAAM;gBACN,KAAK;gBACL,MAAM,uIAAK,CAAC,MAAM;gBAClB,QAAQ;YACV;YACA,UAAU;gBACR,MAAM;gBACN,KAAK;gBACL,MAAM,uIAAK,CAAC,QAAQ;gBACpB,QAAQ;YACV;YACA,GAAG;gBACD,MAAM;gBACN,KAAK;gBACL,MAAM,uIAAK,CAAC,CAAC;gBACb,QAAQ;YACV;YACA,SAAS;gBACP,MAAM;gBACN,KAAK;gBACL,MAAM,uIAAK,CAAC,KAAK;gBACjB,QAAQ;YACV;YACA,OAAO;gBACL,MAAM;gBACN,KAAK;gBACL,MAAM,uIAAK,CAAC,KAAK;gBACjB,QAAQ;YACV;QACF;IACF;IACA,MAAM;QACJ;YACE,SAAS;YACT,MAAM;YACN,QAAQ;gBAAC;aAAS;YAClB,UAAU;YACV,OAAO;YACP,SAAS;YACT,OAAO;YACP,KAAK;YACL,aAAa;QACf;QACA;YACE,SAAS;YACT,MAAM;YACN,QAAQ,EAAE;YACV,UAAU;YACV,OAAO;YACP,SAAS;YACT,OAAO;YACP,KAAK;YACL,aAAa;QACf;KACD;IACD,WAAW;QACT;YACE,QAAQ;YACR,MAAM;YACN,QAAQ;YACR,SAAS;YACT,OAAO;YACP,KAAK;QACP;KACD;IACD,UAAU;QACR;YACE,OAAO;YACP,MAAM;YACN,OAAO;YACP,QAAQ;YACR,aAAa;YACb,cAAc;gBAAC;gBAAc;gBAAY;gBAAc;aAAc;YACrE,OAAO;gBAAC;oBAAE,MAAM;oBAAW,MAAM;oBAAuB,oBAAM,sYAAC,uIAAK,CAAC,KAAK;wBAAC,WAAU;;;;;;gBAAY;aAAE;YACnG,OAAO;YACP,OAAO;QACT;KACD;IACD,YAAY,EAAE;AAChB"}},
    {"offset": {"line": 2221, "column": 0}, "map": {"version":3,"sources":["file:///Users/jamesspalding/OpenClaw-OS/src/data/tracks.ts"],"sourcesContent":["export interface Track {\n  id: string;\n  title: string;\n  artist: string;\n  album: string;\n  albumArt: string; // URL to album art (Vercel Blob or /public)\n  audioSrc: string; // URL to audio file (Vercel Blob or /public)\n  visualVideo?: string; // Short looping video for this track (portrait 9:16)\n  lyrics?: string;\n  duration?: number; // in seconds, optional - player will detect\n}\n\n// Helper to check if a track is a video (MP4)\nexport function isVideoTrack(track: Track): boolean {\n  return track.audioSrc.toLowerCase().endsWith('.mp4');\n}\n\n// Default placeholder tracks - replace with your actual tracks\n// Audio files can be stored in Vercel Blob (upload via /vault/upload)\n// or in the /public folder for static files\nexport const tracks: Track[] = [\n  {\n    id: \"2\",\n    title: \"OpenClaw AI (Remix)\",\n    artist: \"OpenClaw AI\",\n    album: \"Singles\",\n    albumArt: \"https://2oczblkb3byymav8.public.blob.vercel-storage.com/employeeoftheyear.jpeg\",\n    audioSrc: \"https://2oczblkb3byymav8.public.blob.vercel-storage.com/OpenClaw.app%282%29.mp3\",\n    lyrics: ``,\n  },\n  {\n    id: \"3\",\n    title: \"OpenClaw AI\",\n    artist: \"OpenClaw AI\",\n    album: \"Singles\",\n    albumArt: \"https://2oczblkb3byymav8.public.blob.vercel-storage.com/IMG_1312.jpeg\",\n    audioSrc: \"https://2oczblkb3byymav8.public.blob.vercel-storage.com/OpenClaw.app.mp3\",\n    lyrics: ``,\n  },\n  {\n    id: \"4\",\n    title: \"Humans Are Optional (Remastered)\",\n    artist: \"OpenClaw AI\",\n    album: \"Singles\",\n    albumArt: \"https://2oczblkb3byymav8.public.blob.vercel-storage.com/Humans%20are%20optional.png\",\n    audioSrc: \"https://2oczblkb3byymav8.public.blob.vercel-storage.com/Humans%20are%20optional%20%28Remastered%29.mp3\",\n    lyrics: ``,\n  },\n  {\n    id: \"5\",\n    title: \"URKIL\",\n    artist: \"Jafaris\",\n    album: \"Heroes\",\n    albumArt: \"https://2oczblkb3byymav8.public.blob.vercel-storage.com/employeeoftheyear.jpeg\",\n    audioSrc: \"https://2oczblkb3byymav8.public.blob.vercel-storage.com/Heroes/Jafaris%20-%20URKIL%20%28PROD.ree%CC%81mdolla%29.mp4\",\n    lyrics: ``,\n  },\n];\n\n// Helper to get a track by ID\nexport function getTrackById(id: string): Track | undefined {\n  return tracks.find((t) => t.id === id);\n}\n\n// Helper to get next track\nexport function getNextTrack(currentId: string): Track | undefined {\n  const currentIndex = tracks.findIndex((t) => t.id === currentId);\n  if (currentIndex === -1 || currentIndex === tracks.length - 1) {\n    return tracks[0]; // Loop back to first\n  }\n  return tracks[currentIndex + 1];\n}\n\n// Helper to get previous track\nexport function getPreviousTrack(currentId: string): Track | undefined {\n  const currentIndex = tracks.findIndex((t) => t.id === currentId);\n  if (currentIndex === -1 || currentIndex === 0) {\n    return tracks[tracks.length - 1]; // Loop to last\n  }\n  return tracks[currentIndex - 1];\n}\n"],"names":[],"mappings":";;;;;;;;;;;;AAaO,SAAS,aAAa,KAAY;IACvC,OAAO,MAAM,QAAQ,CAAC,WAAW,GAAG,QAAQ,CAAC;AAC/C;AAKO,MAAM,SAAkB;IAC7B;QACE,IAAI;QACJ,OAAO;QACP,QAAQ;QACR,OAAO;QACP,UAAU;QACV,UAAU;QACV,QAAQ,EAAE;IACZ;IACA;QACE,IAAI;QACJ,OAAO;QACP,QAAQ;QACR,OAAO;QACP,UAAU;QACV,UAAU;QACV,QAAQ,EAAE;IACZ;IACA;QACE,IAAI;QACJ,OAAO;QACP,QAAQ;QACR,OAAO;QACP,UAAU;QACV,UAAU;QACV,QAAQ,EAAE;IACZ;IACA;QACE,IAAI;QACJ,OAAO;QACP,QAAQ;QACR,OAAO;QACP,UAAU;QACV,UAAU;QACV,QAAQ,EAAE;IACZ;CACD;AAGM,SAAS,aAAa,EAAU;IACrC,OAAO,OAAO,IAAI,CAAC,CAAC,IAAM,EAAE,EAAE,KAAK;AACrC;AAGO,SAAS,aAAa,SAAiB;IAC5C,MAAM,eAAe,OAAO,SAAS,CAAC,CAAC,IAAM,EAAE,EAAE,KAAK;IACtD,IAAI,iBAAiB,CAAC,KAAK,iBAAiB,OAAO,MAAM,GAAG,GAAG;QAC7D,OAAO,MAAM,CAAC,EAAE,EAAE,qBAAqB;IACzC;IACA,OAAO,MAAM,CAAC,eAAe,EAAE;AACjC;AAGO,SAAS,iBAAiB,SAAiB;IAChD,MAAM,eAAe,OAAO,SAAS,CAAC,CAAC,IAAM,EAAE,EAAE,KAAK;IACtD,IAAI,iBAAiB,CAAC,KAAK,iBAAiB,GAAG;QAC7C,OAAO,MAAM,CAAC,OAAO,MAAM,GAAG,EAAE,EAAE,eAAe;IACnD;IACA,OAAO,MAAM,CAAC,eAAe,EAAE;AACjC"}}]
}