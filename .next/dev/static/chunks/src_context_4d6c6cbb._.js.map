{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///Users/jamesspalding/OpenClaw-OS/src/context/SessionBrainContext.tsx"],"sourcesContent":["'use client';\n\nimport React, {\n  createContext,\n  useContext,\n  useState,\n  useCallback,\n  useEffect,\n  useReducer,\n  ReactNode,\n} from 'react';\n\n// ============================================================================\n// Types\n// ============================================================================\n\nexport interface Brief {\n  problem: string;\n  audience: string;\n  currentWorkaround: string;\n  desiredOutcome: string;\n  constraints: string[];\n}\n\nexport interface PRD {\n  goals: string[];\n  nonGoals: string[];\n  keyWorkflows: string[];\n  scopeMvp: string[];\n  risks: string[];\n  successMetrics: string[];\n}\n\nexport interface Prototype {\n  screens: string[];\n  primaryFlow: string;\n  dataInputs: string[];\n  notes: string;\n}\n\nexport interface DesignDirection {\n  toneWords: string[];\n  uiDensity: 'compact' | 'comfortable' | 'spacious';\n  typographyNotes: string;\n  componentRules: string[];\n  selectedTheme?: string;\n}\n\nexport interface Draft {\n  brief: Brief;\n  prd: PRD;\n  prototype: Prototype;\n  designDirection: DesignDirection;\n}\n\nexport interface ChatMessage {\n  id: string;\n  role: 'user' | 'assistant' | 'system';\n  content: string;\n  timestamp: number;\n  metadata?: {\n    model?: string;\n    tokens?: number;\n    draftUpdates?: string[]; // Which draft fields were updated by this message\n  };\n}\n\nexport interface SessionEvent {\n  id: string;\n  type: string;\n  payload: unknown;\n  timestamp: number;\n  source: 'user' | 'ai';\n}\n\nexport interface Notification {\n  id: string;\n  appId: string;\n  type: 'update' | 'complete' | 'suggestion' | 'reminder';\n  title: string;\n  body?: string;\n  count: number;\n  createdAt: number;\n  readAt?: number;\n}\n\nexport interface SessionState {\n  sessionId: string;\n  createdAt: number;\n  lastModified: number;\n  draft: Draft;\n  chatHistory: ChatMessage[];\n  eventLog: SessionEvent[];\n  notifications: Notification[];\n}\n\nexport type DynamicIslandState =\n  | 'idle'\n  | 'planning'\n  | 'drafting-brief'\n  | 'drafting-prd'\n  | 'preparing-prototype'\n  | 'ready'\n  | 'previewing';\n\nexport interface DynamicIslandStatus {\n  state: DynamicIslandState;\n  label: string;\n  progress?: { current: number; total: number };\n  previewApp?: string;\n}\n\n// ============================================================================\n// Default Values\n// ============================================================================\n\nconst createDefaultBrief = (): Brief => ({\n  problem: '',\n  audience: '',\n  currentWorkaround: '',\n  desiredOutcome: '',\n  constraints: [],\n});\n\nconst createDefaultPRD = (): PRD => ({\n  goals: [],\n  nonGoals: [],\n  keyWorkflows: [],\n  scopeMvp: [],\n  risks: [],\n  successMetrics: [],\n});\n\nconst createDefaultPrototype = (): Prototype => ({\n  screens: [],\n  primaryFlow: '',\n  dataInputs: [],\n  notes: '',\n});\n\nconst createDefaultDesignDirection = (): DesignDirection => ({\n  toneWords: [],\n  uiDensity: 'comfortable',\n  typographyNotes: '',\n  componentRules: [],\n});\n\nconst createDefaultDraft = (): Draft => ({\n  brief: createDefaultBrief(),\n  prd: createDefaultPRD(),\n  prototype: createDefaultPrototype(),\n  designDirection: createDefaultDesignDirection(),\n});\n\nconst generateSessionId = (): string => {\n  return `session_${Date.now()}_${Math.random().toString(36).substring(2, 9)}`;\n};\n\nconst createDefaultSession = (): SessionState => ({\n  sessionId: generateSessionId(),\n  createdAt: Date.now(),\n  lastModified: Date.now(),\n  draft: createDefaultDraft(),\n  chatHistory: [],\n  eventLog: [],\n  notifications: [],\n});\n\n// ============================================================================\n// Storage Keys\n// ============================================================================\n\nconst STORAGE_KEY = 'openclaw_session';\nconst ISLAND_STATE_KEY = 'openclaw_island_state';\n\n// ============================================================================\n// Event Types\n// ============================================================================\n\nexport const EventTypes = {\n  // Brief events\n  BRIEF_PROBLEM_UPDATED: 'draft.brief.problem.updated',\n  BRIEF_AUDIENCE_UPDATED: 'draft.brief.audience.updated',\n  BRIEF_WORKAROUND_UPDATED: 'draft.brief.workaround.updated',\n  BRIEF_OUTCOME_UPDATED: 'draft.brief.outcome.updated',\n  BRIEF_CONSTRAINTS_UPDATED: 'draft.brief.constraints.updated',\n  BRIEF_COMPLETED: 'draft.brief.completed',\n\n  // PRD events\n  PRD_GOALS_UPDATED: 'draft.prd.goals.updated',\n  PRD_NONGOALS_UPDATED: 'draft.prd.nongoals.updated',\n  PRD_WORKFLOWS_UPDATED: 'draft.prd.workflows.updated',\n  PRD_SCOPE_UPDATED: 'draft.prd.scope.updated',\n  PRD_RISKS_UPDATED: 'draft.prd.risks.updated',\n  PRD_METRICS_UPDATED: 'draft.prd.metrics.updated',\n  PRD_COMPLETED: 'draft.prd.completed',\n\n  // Prototype events\n  PROTOTYPE_SCREENS_UPDATED: 'draft.prototype.screens.updated',\n  PROTOTYPE_FLOW_UPDATED: 'draft.prototype.flow.updated',\n  PROTOTYPE_INPUTS_UPDATED: 'draft.prototype.inputs.updated',\n  PROTOTYPE_NOTES_UPDATED: 'draft.prototype.notes.updated',\n\n  // Design events\n  DESIGN_DIRECTION_UPDATED: 'draft.design.updated',\n  DESIGN_THEME_SELECTED: 'draft.design.theme.selected',\n\n  // Session events\n  SESSION_SAVED: 'session.saved',\n  SESSION_LOADED: 'session.loaded',\n  SESSION_RESET: 'session.reset',\n\n  // Notification events\n  NOTIFICATION_CREATED: 'notification.created',\n  NOTIFICATION_READ: 'notification.read',\n  NOTIFICATIONS_CLEARED: 'notifications.cleared',\n} as const;\n\n// ============================================================================\n// Reducer\n// ============================================================================\n\ntype SessionAction =\n  | { type: 'SET_SESSION'; payload: SessionState }\n  | { type: 'UPDATE_BRIEF'; payload: Partial<Brief> }\n  | { type: 'UPDATE_PRD'; payload: Partial<PRD> }\n  | { type: 'UPDATE_PROTOTYPE'; payload: Partial<Prototype> }\n  | { type: 'UPDATE_DESIGN_DIRECTION'; payload: Partial<DesignDirection> }\n  | { type: 'ADD_EVENT'; payload: SessionEvent }\n  | { type: 'ADD_CHAT_MESSAGE'; payload: ChatMessage }\n  | { type: 'CLEAR_CHAT_HISTORY' }\n  | { type: 'ADD_NOTIFICATION'; payload: Notification }\n  | { type: 'MARK_NOTIFICATION_READ'; payload: string }\n  | { type: 'MARK_APP_NOTIFICATIONS_READ'; payload: string }\n  | { type: 'CLEAR_NOTIFICATIONS' }\n  | { type: 'RESET_SESSION' };\n\nfunction sessionReducer(state: SessionState, action: SessionAction): SessionState {\n  const now = Date.now();\n\n  switch (action.type) {\n    case 'SET_SESSION':\n      return action.payload;\n\n    case 'UPDATE_BRIEF':\n      return {\n        ...state,\n        lastModified: now,\n        draft: {\n          ...state.draft,\n          brief: { ...state.draft.brief, ...action.payload },\n        },\n      };\n\n    case 'UPDATE_PRD':\n      return {\n        ...state,\n        lastModified: now,\n        draft: {\n          ...state.draft,\n          prd: { ...state.draft.prd, ...action.payload },\n        },\n      };\n\n    case 'UPDATE_PROTOTYPE':\n      return {\n        ...state,\n        lastModified: now,\n        draft: {\n          ...state.draft,\n          prototype: { ...state.draft.prototype, ...action.payload },\n        },\n      };\n\n    case 'UPDATE_DESIGN_DIRECTION':\n      return {\n        ...state,\n        lastModified: now,\n        draft: {\n          ...state.draft,\n          designDirection: { ...state.draft.designDirection, ...action.payload },\n        },\n      };\n\n    case 'ADD_EVENT':\n      return {\n        ...state,\n        lastModified: now,\n        eventLog: [...state.eventLog, action.payload],\n      };\n\n    case 'ADD_CHAT_MESSAGE':\n      return {\n        ...state,\n        lastModified: now,\n        chatHistory: [...state.chatHistory, action.payload],\n      };\n\n    case 'CLEAR_CHAT_HISTORY':\n      return {\n        ...state,\n        lastModified: now,\n        chatHistory: [],\n      };\n\n    case 'ADD_NOTIFICATION':\n      return {\n        ...state,\n        notifications: [...state.notifications, action.payload],\n      };\n\n    case 'MARK_NOTIFICATION_READ':\n      return {\n        ...state,\n        notifications: state.notifications.map((n) =>\n          n.id === action.payload ? { ...n, readAt: now } : n\n        ),\n      };\n\n    case 'MARK_APP_NOTIFICATIONS_READ':\n      return {\n        ...state,\n        notifications: state.notifications.map((n) =>\n          n.appId === action.payload && !n.readAt ? { ...n, readAt: now } : n\n        ),\n      };\n\n    case 'CLEAR_NOTIFICATIONS':\n      return {\n        ...state,\n        notifications: [],\n      };\n\n    case 'RESET_SESSION':\n      return createDefaultSession();\n\n    default:\n      return state;\n  }\n}\n\n// ============================================================================\n// Context\n// ============================================================================\n\ninterface SessionBrainContextValue {\n  // State\n  session: SessionState;\n  isLoaded: boolean;\n\n  // Dynamic Island\n  islandStatus: DynamicIslandStatus;\n  setIslandState: (state: DynamicIslandState, label?: string) => void;\n  setIslandProgress: (current: number, total: number) => void;\n  setPreviewApp: (appName: string | null) => void;\n\n  // Draft updates\n  updateBrief: (updates: Partial<Brief>) => void;\n  updatePRD: (updates: Partial<PRD>) => void;\n  updatePrototype: (updates: Partial<Prototype>) => void;\n  updateDesignDirection: (updates: Partial<DesignDirection>) => void;\n\n  // Event bus\n  emitEvent: (type: string, payload: unknown, source?: 'user' | 'ai') => void;\n\n  // Chat history\n  addChatMessage: (\n    role: ChatMessage['role'],\n    content: string,\n    metadata?: ChatMessage['metadata']\n  ) => ChatMessage;\n  clearChatHistory: () => void;\n  getChatHistory: () => ChatMessage[];\n\n  // Notifications\n  addNotification: (\n    appId: string,\n    type: Notification['type'],\n    title: string,\n    body?: string\n  ) => void;\n  markNotificationRead: (id: string) => void;\n  markAppNotificationsRead: (appId: string) => void;\n  clearNotifications: () => void;\n  getUnreadCountForApp: (appId: string) => number;\n  getTotalUnreadCount: () => number;\n\n  // Session management\n  resetSession: () => void;\n  exportDraft: () => string;\n  importDraft: (data: string) => boolean;\n\n  // Save/Load\n  getSavePayload: () => {\n    sessionId: string;\n    draft: Draft;\n    chatHistory: ChatMessage[];\n    eventLog: SessionEvent[];\n  };\n  loadFromSaved: (data: {\n    draft: Draft;\n    chatHistory?: ChatMessage[];\n    eventLog?: SessionEvent[];\n  }) => void;\n}\n\nconst SessionBrainContext = createContext<SessionBrainContextValue | null>(null);\n\n// ============================================================================\n// Provider\n// ============================================================================\n\ninterface SessionBrainProviderProps {\n  children: ReactNode;\n}\n\nexport function SessionBrainProvider({ children }: SessionBrainProviderProps) {\n  const [session, dispatch] = useReducer(sessionReducer, createDefaultSession());\n  const [isLoaded, setIsLoaded] = useState(false);\n  const [islandStatus, setIslandStatus] = useState<DynamicIslandStatus>({\n    state: 'idle',\n    label: 'Ready',\n  });\n\n  // Load from localStorage on mount\n  useEffect(() => {\n    try {\n      const saved = localStorage.getItem(STORAGE_KEY);\n      if (saved) {\n        const parsed = JSON.parse(saved);\n        dispatch({ type: 'SET_SESSION', payload: parsed });\n      }\n    } catch (e) {\n      console.error('Failed to load session from localStorage:', e);\n    }\n    setIsLoaded(true);\n  }, []);\n\n  // Save to localStorage on changes (debounced)\n  useEffect(() => {\n    if (!isLoaded) return;\n\n    const timeoutId = setTimeout(() => {\n      try {\n        localStorage.setItem(STORAGE_KEY, JSON.stringify(session));\n      } catch (e) {\n        console.error('Failed to save session to localStorage:', e);\n      }\n    }, 500);\n\n    return () => clearTimeout(timeoutId);\n  }, [session, isLoaded]);\n\n  // Dynamic Island state management\n  const setIslandState = useCallback((state: DynamicIslandState, label?: string) => {\n    const labels: Record<DynamicIslandState, string> = {\n      idle: 'Ready',\n      planning: 'Planning...',\n      'drafting-brief': 'Drafting brief',\n      'drafting-prd': 'Drafting PRD',\n      'preparing-prototype': 'Preparing prototype',\n      ready: 'Draft ready',\n      previewing: 'Previewing',\n    };\n\n    setIslandStatus((prev) => ({\n      ...prev,\n      state,\n      label: label || labels[state],\n      previewApp: state === 'previewing' ? prev.previewApp : undefined,\n    }));\n  }, []);\n\n  const setIslandProgress = useCallback((current: number, total: number) => {\n    setIslandStatus((prev) => ({\n      ...prev,\n      progress: { current, total },\n    }));\n  }, []);\n\n  const setPreviewApp = useCallback((appName: string | null) => {\n    if (appName) {\n      setIslandStatus({\n        state: 'previewing',\n        label: `Previewing ${appName}`,\n        previewApp: appName,\n      });\n    } else {\n      setIslandStatus((prev) => ({\n        ...prev,\n        state: 'idle',\n        label: 'Ready',\n        previewApp: undefined,\n      }));\n    }\n  }, []);\n\n  // Draft update functions\n  const updateBrief = useCallback((updates: Partial<Brief>) => {\n    dispatch({ type: 'UPDATE_BRIEF', payload: updates });\n  }, []);\n\n  const updatePRD = useCallback((updates: Partial<PRD>) => {\n    dispatch({ type: 'UPDATE_PRD', payload: updates });\n  }, []);\n\n  const updatePrototype = useCallback((updates: Partial<Prototype>) => {\n    dispatch({ type: 'UPDATE_PROTOTYPE', payload: updates });\n  }, []);\n\n  const updateDesignDirection = useCallback((updates: Partial<DesignDirection>) => {\n    dispatch({ type: 'UPDATE_DESIGN_DIRECTION', payload: updates });\n  }, []);\n\n  // Event bus\n  const emitEvent = useCallback((type: string, payload: unknown, source: 'user' | 'ai' = 'user') => {\n    const event: SessionEvent = {\n      id: `event_${Date.now()}_${Math.random().toString(36).substring(2, 9)}`,\n      type,\n      payload,\n      timestamp: Date.now(),\n      source,\n    };\n    dispatch({ type: 'ADD_EVENT', payload: event });\n  }, []);\n\n  // Chat history functions\n  const addChatMessage = useCallback(\n    (\n      role: ChatMessage['role'],\n      content: string,\n      metadata?: ChatMessage['metadata']\n    ): ChatMessage => {\n      const message: ChatMessage = {\n        id: `msg_${Date.now()}_${Math.random().toString(36).substring(2, 9)}`,\n        role,\n        content,\n        timestamp: Date.now(),\n        metadata,\n      };\n      dispatch({ type: 'ADD_CHAT_MESSAGE', payload: message });\n      return message;\n    },\n    []\n  );\n\n  const clearChatHistory = useCallback(() => {\n    dispatch({ type: 'CLEAR_CHAT_HISTORY' });\n  }, []);\n\n  const getChatHistory = useCallback(() => {\n    return session.chatHistory;\n  }, [session.chatHistory]);\n\n  // Notification functions\n  const addNotification = useCallback(\n    (appId: string, type: Notification['type'], title: string, body?: string) => {\n      const notification: Notification = {\n        id: `notif_${Date.now()}_${Math.random().toString(36).substring(2, 9)}`,\n        appId,\n        type,\n        title,\n        body,\n        count: 1,\n        createdAt: Date.now(),\n      };\n      dispatch({ type: 'ADD_NOTIFICATION', payload: notification });\n      emitEvent(EventTypes.NOTIFICATION_CREATED, { appId, type, title });\n    },\n    [emitEvent]\n  );\n\n  const markNotificationRead = useCallback((id: string) => {\n    dispatch({ type: 'MARK_NOTIFICATION_READ', payload: id });\n  }, []);\n\n  const markAppNotificationsRead = useCallback((appId: string) => {\n    dispatch({ type: 'MARK_APP_NOTIFICATIONS_READ', payload: appId });\n  }, []);\n\n  const clearNotifications = useCallback(() => {\n    dispatch({ type: 'CLEAR_NOTIFICATIONS' });\n  }, []);\n\n  const getUnreadCountForApp = useCallback(\n    (appId: string) => {\n      return session.notifications.filter((n) => n.appId === appId && !n.readAt).length;\n    },\n    [session.notifications]\n  );\n\n  const getTotalUnreadCount = useCallback(() => {\n    return session.notifications.filter((n) => !n.readAt).length;\n  }, [session.notifications]);\n\n  // Session management\n  const resetSession = useCallback(() => {\n    dispatch({ type: 'RESET_SESSION' });\n    localStorage.removeItem(STORAGE_KEY);\n    emitEvent(EventTypes.SESSION_RESET, {});\n  }, [emitEvent]);\n\n  const exportDraft = useCallback(() => {\n    const { draft } = session;\n    const markdown = generateDraftMarkdown(draft);\n    return markdown;\n  }, [session]);\n\n  const importDraft = useCallback((data: string) => {\n    try {\n      const parsed = JSON.parse(data);\n      if (parsed.draft) {\n        dispatch({ type: 'SET_SESSION', payload: { ...session, draft: parsed.draft } });\n        return true;\n      }\n      return false;\n    } catch {\n      return false;\n    }\n  }, [session]);\n\n  const getSavePayload = useCallback(() => {\n    return {\n      sessionId: session.sessionId,\n      draft: session.draft,\n      chatHistory: session.chatHistory,\n      eventLog: session.eventLog,\n    };\n  }, [session]);\n\n  const loadFromSaved = useCallback(\n    (data: { draft: Draft; chatHistory?: ChatMessage[]; eventLog?: SessionEvent[] }) => {\n      dispatch({\n        type: 'SET_SESSION',\n        payload: {\n          ...session,\n          draft: data.draft,\n          chatHistory: data.chatHistory || [],\n          eventLog: data.eventLog || [],\n          lastModified: Date.now(),\n        },\n      });\n    },\n    [session]\n  );\n\n  const value: SessionBrainContextValue = {\n    session,\n    isLoaded,\n    islandStatus,\n    setIslandState,\n    setIslandProgress,\n    setPreviewApp,\n    updateBrief,\n    updatePRD,\n    updatePrototype,\n    updateDesignDirection,\n    emitEvent,\n    addChatMessage,\n    clearChatHistory,\n    getChatHistory,\n    addNotification,\n    markNotificationRead,\n    markAppNotificationsRead,\n    clearNotifications,\n    getUnreadCountForApp,\n    getTotalUnreadCount,\n    resetSession,\n    exportDraft,\n    importDraft,\n    getSavePayload,\n    loadFromSaved,\n  };\n\n  return (\n    <SessionBrainContext.Provider value={value}>{children}</SessionBrainContext.Provider>\n  );\n}\n\n// ============================================================================\n// Hook\n// ============================================================================\n\nexport function useSessionBrain() {\n  const context = useContext(SessionBrainContext);\n  if (!context) {\n    throw new Error('useSessionBrain must be used within a SessionBrainProvider');\n  }\n  return context;\n}\n\n// ============================================================================\n// Utilities\n// ============================================================================\n\nfunction generateDraftMarkdown(draft: Draft): string {\n  const lines: string[] = [];\n\n  lines.push('# Project Draft');\n  lines.push('');\n\n  // Brief\n  lines.push('## Brief');\n  lines.push('');\n  if (draft.brief.problem) {\n    lines.push('### Problem');\n    lines.push(draft.brief.problem);\n    lines.push('');\n  }\n  if (draft.brief.audience) {\n    lines.push('### Target Audience');\n    lines.push(draft.brief.audience);\n    lines.push('');\n  }\n  if (draft.brief.currentWorkaround) {\n    lines.push('### Current Workaround');\n    lines.push(draft.brief.currentWorkaround);\n    lines.push('');\n  }\n  if (draft.brief.desiredOutcome) {\n    lines.push('### Desired Outcome');\n    lines.push(draft.brief.desiredOutcome);\n    lines.push('');\n  }\n  if (draft.brief.constraints.length > 0) {\n    lines.push('### Constraints');\n    draft.brief.constraints.forEach((c) => lines.push(`- ${c}`));\n    lines.push('');\n  }\n\n  // PRD\n  lines.push('## Product Requirements');\n  lines.push('');\n  if (draft.prd.goals.length > 0) {\n    lines.push('### Goals');\n    draft.prd.goals.forEach((g) => lines.push(`- ${g}`));\n    lines.push('');\n  }\n  if (draft.prd.nonGoals.length > 0) {\n    lines.push('### Non-Goals');\n    draft.prd.nonGoals.forEach((g) => lines.push(`- ${g}`));\n    lines.push('');\n  }\n  if (draft.prd.keyWorkflows.length > 0) {\n    lines.push('### Key Workflows');\n    draft.prd.keyWorkflows.forEach((w) => lines.push(`- ${w}`));\n    lines.push('');\n  }\n  if (draft.prd.scopeMvp.length > 0) {\n    lines.push('### MVP Scope');\n    draft.prd.scopeMvp.forEach((s) => lines.push(`- ${s}`));\n    lines.push('');\n  }\n  if (draft.prd.risks.length > 0) {\n    lines.push('### Risks');\n    draft.prd.risks.forEach((r) => lines.push(`- ${r}`));\n    lines.push('');\n  }\n  if (draft.prd.successMetrics.length > 0) {\n    lines.push('### Success Metrics');\n    draft.prd.successMetrics.forEach((m) => lines.push(`- ${m}`));\n    lines.push('');\n  }\n\n  // Prototype\n  lines.push('## Prototype Plan');\n  lines.push('');\n  if (draft.prototype.screens.length > 0) {\n    lines.push('### Screens');\n    draft.prototype.screens.forEach((s) => lines.push(`- ${s}`));\n    lines.push('');\n  }\n  if (draft.prototype.primaryFlow) {\n    lines.push('### Primary Flow');\n    lines.push(draft.prototype.primaryFlow);\n    lines.push('');\n  }\n  if (draft.prototype.dataInputs.length > 0) {\n    lines.push('### Data Inputs');\n    draft.prototype.dataInputs.forEach((d) => lines.push(`- ${d}`));\n    lines.push('');\n  }\n  if (draft.prototype.notes) {\n    lines.push('### Notes');\n    lines.push(draft.prototype.notes);\n    lines.push('');\n  }\n\n  // Design Direction\n  lines.push('## Design Direction');\n  lines.push('');\n  if (draft.designDirection.toneWords.length > 0) {\n    lines.push('### Tone');\n    lines.push(draft.designDirection.toneWords.join(', '));\n    lines.push('');\n  }\n  lines.push('### UI Density');\n  lines.push(draft.designDirection.uiDensity);\n  lines.push('');\n  if (draft.designDirection.typographyNotes) {\n    lines.push('### Typography');\n    lines.push(draft.designDirection.typographyNotes);\n    lines.push('');\n  }\n  if (draft.designDirection.componentRules.length > 0) {\n    lines.push('### Component Rules');\n    draft.designDirection.componentRules.forEach((r) => lines.push(`- ${r}`));\n    lines.push('');\n  }\n\n  return lines.join('\\n');\n}\n\n// Export utility for use elsewhere\nexport { generateDraftMarkdown };\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 709, "column": 0}, "map": {"version":3,"sources":["file:///Users/jamesspalding/OpenClaw-OS/src/context/AppContext.tsx"],"sourcesContent":["'use client';\n\nimport React, { createContext, useContext, useState, useEffect, useCallback, ReactNode } from 'react';\nimport { usePathname } from 'next/navigation';\n\n// ============================================================================\n// App Definitions - All apps in OpenClaw-OS\n// ============================================================================\n\nexport interface AppDefinition {\n  id: string;\n  name: string;\n  route: string;\n  icon: string;\n  description: string;\n  suggestedPrompts: SuggestedPrompt[];\n  contextHints: string[]; // Hints for Claw AI about what the user might want\n}\n\nexport interface SuggestedPrompt {\n  label: string;\n  prompt: string;\n  icon?: string;\n}\n\n// Define all apps with their contextual prompts\nexport const APP_DEFINITIONS: Record<string, AppDefinition> = {\n  home: {\n    id: 'home',\n    name: 'Home',\n    route: '/',\n    icon: 'Home',\n    description: 'OpenClaw-OS Home Screen',\n    suggestedPrompts: [\n      { label: 'Show me around', prompt: 'Give me a tour of what I can do here' },\n      { label: 'Recent projects', prompt: 'What are some recent projects you\\'ve worked on?' },\n    ],\n    contextHints: [\n      'User is on the home screen',\n      'They may want to explore apps',\n      'Good opportunity to suggest navigation or highlight features',\n    ],\n  },\n  control: {\n    id: 'control',\n    name: 'Control Center',\n    route: '/control',\n    icon: 'Cpu',\n    description: 'System management and orchestration hub',\n    suggestedPrompts: [\n      { label: 'System status', prompt: 'Show me the current system status' },\n      { label: 'Manage channels', prompt: 'How do I connect new integrations?' },\n    ],\n    contextHints: [\n      'User is in the Control Center',\n      'They want to manage infrastructure or integrations',\n    ],\n  },\n  agents: {\n    id: 'agents',\n    name: 'Agents Hub',\n    route: '/agents',\n    icon: 'Cpu',\n    description: 'Agent configuration and logic workflows',\n    suggestedPrompts: [\n      { label: 'Agent status', prompt: 'Which agents are currently active?' },\n      { label: 'New skill', prompt: 'How do I add a new skill to an agent?' },\n    ],\n    contextHints: [\n      'User is in the Agents Hub',\n      'They want to configure agent behavior or logic',\n    ],\n  },\n  chat: {\n    id: 'chat',\n    name: 'Chat',\n    route: '/chat',\n    icon: 'MessageSquare',\n    description: 'Claw AI Chat Interface',\n    suggestedPrompts: [\n      { label: 'What can you do?', prompt: 'What are all the things you can help me with?' },\n      { label: 'Portfolio tour', prompt: 'Walk me through the portfolio' },\n    ],\n    contextHints: [\n      'User is in the chat app',\n      'They want to have a conversation',\n      'Can help with navigation, information, or scheduling',\n    ],\n  },\n  settings: {\n    id: 'settings',\n    name: 'Settings',\n    route: '/settings',\n    icon: 'Settings',\n    description: 'OS preferences and developer tools',\n    suggestedPrompts: [\n      { label: 'Change theme', prompt: 'How do I change the system theme?' },\n      { label: 'View logs', prompt: 'Show me the recent system logs' },\n    ],\n    contextHints: [\n      'User is in Settings',\n      'They want to customize or debug the OS',\n    ],\n  },\n};\n\n// ============================================================================\n// Context Types\n// ============================================================================\n\nexport interface AppContextValue {\n  currentApp: AppDefinition | null;\n  currentRoute: string;\n  suggestedPrompts: SuggestedPrompt[];\n  contextHints: string[];\n  setCurrentApp: (appId: string | null) => void;\n  getAppByRoute: (route: string) => AppDefinition | null;\n  getAppById: (id: string) => AppDefinition | null;\n}\n\n// ============================================================================\n// Context\n// ============================================================================\n\nconst AppContext = createContext<AppContextValue | null>(null);\n\n// ============================================================================\n// Provider\n// ============================================================================\n\ninterface AppContextProviderProps {\n  children: ReactNode;\n}\n\nexport function AppContextProvider({ children }: AppContextProviderProps) {\n  const pathname = usePathname();\n  const [currentApp, setCurrentAppState] = useState<AppDefinition | null>(null);\n\n  // Get app by route (matches route prefix)\n  const getAppByRoute = useCallback((route: string): AppDefinition | null => {\n    // Exact match first\n    const exactMatch = Object.values(APP_DEFINITIONS).find(app => app.route === route);\n    if (exactMatch) return exactMatch;\n\n    // Prefix match (for nested routes like /canvas/123)\n    const prefixMatch = Object.values(APP_DEFINITIONS).find(app =>\n      app.route !== '/' && route.startsWith(app.route)\n    );\n    if (prefixMatch) return prefixMatch;\n\n    // Default to home for root\n    if (route === '/') return APP_DEFINITIONS.home;\n\n    return null;\n  }, []);\n\n  // Get app by ID\n  const getAppById = useCallback((id: string): AppDefinition | null => {\n    return APP_DEFINITIONS[id] || null;\n  }, []);\n\n  // Set current app manually\n  const setCurrentApp = useCallback((appId: string | null) => {\n    if (appId) {\n      const app = getAppById(appId);\n      setCurrentAppState(app);\n    } else {\n      setCurrentAppState(null);\n    }\n  }, [getAppById]);\n\n  // Auto-detect app from pathname\n  useEffect(() => {\n    const app = getAppByRoute(pathname);\n    setCurrentAppState(app);\n  }, [pathname, getAppByRoute]);\n\n  // Get suggested prompts for current app\n  const suggestedPrompts = currentApp?.suggestedPrompts || APP_DEFINITIONS.home.suggestedPrompts;\n  const contextHints = currentApp?.contextHints || [];\n\n  const value: AppContextValue = {\n    currentApp,\n    currentRoute: pathname,\n    suggestedPrompts,\n    contextHints,\n    setCurrentApp,\n    getAppByRoute,\n    getAppById,\n  };\n\n  return (\n    <AppContext.Provider value={value}>\n      {children}\n    </AppContext.Provider>\n  );\n}\n\n// ============================================================================\n// Hook\n// ============================================================================\n\nexport function useAppContext() {\n  const context = useContext(AppContext);\n  if (!context) {\n    throw new Error('useAppContext must be used within an AppContextProvider');\n  }\n  return context;\n}\n\n// ============================================================================\n// Utility: Format context for Claw AI\n// ============================================================================\n\nexport function formatAppContextForAI(appContext: AppContextValue): string {\n  if (!appContext.currentApp) {\n    return '';\n  }\n\n  const lines = [\n    `## Current App Context`,\n    `- **App**: ${appContext.currentApp.name}`,\n    `- **Route**: ${appContext.currentRoute}`,\n    `- **Description**: ${appContext.currentApp.description}`,\n    '',\n    '### Context Hints',\n    ...appContext.contextHints.map(hint => `- ${hint}`),\n  ];\n\n  return lines.join('\\n');\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 951, "column": 0}, "map": {"version":3,"sources":["file:///Users/jamesspalding/OpenClaw-OS/src/context/MusicContext.tsx"],"sourcesContent":["'use client';\n\nimport { createContext, useContext, useState, useRef, useEffect, useCallback, type ReactNode } from 'react';\nimport { tracks, getNextTrack, getPreviousTrack, isVideoTrack, type Track } from '@/data/tracks';\n\ninterface MusicContextType {\n  currentTrack: Track;\n  isPlaying: boolean;\n  currentTime: number;\n  duration: number;\n  isVideo: boolean;\n  togglePlay: () => void;\n  pause: () => void;\n  play: () => void;\n  skipToNext: () => void;\n  skipToPrevious: () => void;\n  selectTrack: (track: Track) => void;\n  audioRef: React.RefObject<HTMLAudioElement | null>;\n  videoRef: React.RefObject<HTMLVideoElement | null>;\n  setVideoElement: (el: HTMLVideoElement | null) => void;\n}\n\nexport const MusicContext = createContext<MusicContextType | null>(null);\n\nexport function MusicProvider({ children }: { children: ReactNode }) {\n  const [currentTrack, setCurrentTrack] = useState<Track>(tracks[0]);\n  const [isPlaying, setIsPlaying] = useState(false);\n  const [currentTime, setCurrentTime] = useState(0);\n  const [duration, setDuration] = useState(0);\n  const audioRef = useRef<HTMLAudioElement>(null);\n  const videoRef = useRef<HTMLVideoElement | null>(null);\n  const isVideo = isVideoTrack(currentTrack);\n\n  // Allow components to register their video element for video tracks\n  const setVideoElement = useCallback((el: HTMLVideoElement | null) => {\n    videoRef.current = el;\n  }, []);\n\n  // Get the active media element (audio or video)\n  const getMediaElement = useCallback(() => {\n    if (isVideo && videoRef.current) {\n      return videoRef.current;\n    }\n    return audioRef.current;\n  }, [isVideo]);\n\n  // Audio element event listeners\n  useEffect(() => {\n    const audio = audioRef.current;\n    if (!audio || isVideo) return;\n\n    const updateTime = () => setCurrentTime(audio.currentTime);\n    const updateDuration = () => setDuration(audio.duration);\n    const handleEnded = () => {\n      const next = getNextTrack(currentTrack.id);\n      if (next && tracks.length > 1) {\n        setCurrentTrack(next);\n        setIsPlaying(true);\n      } else {\n        setIsPlaying(false);\n      }\n    };\n    const handlePlay = () => setIsPlaying(true);\n    const handlePause = () => setIsPlaying(false);\n\n    audio.addEventListener('timeupdate', updateTime);\n    audio.addEventListener('loadedmetadata', updateDuration);\n    audio.addEventListener('ended', handleEnded);\n    audio.addEventListener('play', handlePlay);\n    audio.addEventListener('pause', handlePause);\n\n    return () => {\n      audio.removeEventListener('timeupdate', updateTime);\n      audio.removeEventListener('loadedmetadata', updateDuration);\n      audio.removeEventListener('ended', handleEnded);\n      audio.removeEventListener('play', handlePlay);\n      audio.removeEventListener('pause', handlePause);\n    };\n  }, [currentTrack.id, isVideo]);\n\n  // Video element event listeners\n  useEffect(() => {\n    const video = videoRef.current;\n    if (!video || !isVideo) return;\n\n    const updateTime = () => setCurrentTime(video.currentTime);\n    const updateDuration = () => setDuration(video.duration);\n    const handleEnded = () => {\n      const next = getNextTrack(currentTrack.id);\n      if (next && tracks.length > 1) {\n        setCurrentTrack(next);\n        setIsPlaying(true);\n      } else {\n        setIsPlaying(false);\n      }\n    };\n    const handlePlay = () => setIsPlaying(true);\n    const handlePause = () => setIsPlaying(false);\n\n    video.addEventListener('timeupdate', updateTime);\n    video.addEventListener('loadedmetadata', updateDuration);\n    video.addEventListener('ended', handleEnded);\n    video.addEventListener('play', handlePlay);\n    video.addEventListener('pause', handlePause);\n\n    return () => {\n      video.removeEventListener('timeupdate', updateTime);\n      video.removeEventListener('loadedmetadata', updateDuration);\n      video.removeEventListener('ended', handleEnded);\n      video.removeEventListener('play', handlePlay);\n      video.removeEventListener('pause', handlePause);\n    };\n  }, [currentTrack.id, isVideo]);\n\n  // Handle track changes for audio\n  useEffect(() => {\n    if (isVideo) return;\n    const audio = audioRef.current;\n    if (!audio) return;\n\n    const wasPlaying = isPlaying;\n    setCurrentTime(0);\n    setDuration(0);\n    audio.load();\n\n    if (wasPlaying) {\n      audio.play().catch(() => setIsPlaying(false));\n    }\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [currentTrack.id, isVideo]);\n\n  // Handle track changes for video\n  useEffect(() => {\n    if (!isVideo) return;\n    const video = videoRef.current;\n    if (!video) return;\n\n    const wasPlaying = isPlaying;\n    setCurrentTime(0);\n    setDuration(0);\n    video.load();\n\n    if (wasPlaying) {\n      video.play().catch(() => setIsPlaying(false));\n    }\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [currentTrack.id, isVideo]);\n\n  const togglePlay = useCallback(() => {\n    const media = getMediaElement();\n    if (!media) return;\n\n    if (isPlaying) {\n      media.pause();\n    } else {\n      media.play().catch(() => {});\n    }\n  }, [isPlaying, getMediaElement]);\n\n  const pause = useCallback(() => {\n    const media = getMediaElement();\n    if (!media) return;\n    media.pause();\n  }, [getMediaElement]);\n\n  const play = useCallback(() => {\n    const media = getMediaElement();\n    if (!media) return;\n    media.play().catch(() => {});\n  }, [getMediaElement]);\n\n  const skipToNext = useCallback(() => {\n    const next = getNextTrack(currentTrack.id);\n    if (next) {\n      setCurrentTrack(next);\n    }\n  }, [currentTrack.id]);\n\n  const skipToPrevious = useCallback(() => {\n    const prev = getPreviousTrack(currentTrack.id);\n    if (prev) {\n      setCurrentTrack(prev);\n    }\n  }, [currentTrack.id]);\n\n  const selectTrack = useCallback((track: Track) => {\n    setCurrentTrack(track);\n    setIsPlaying(true);\n  }, []);\n\n  return (\n    <MusicContext.Provider\n      value={{\n        currentTrack,\n        isPlaying,\n        currentTime,\n        duration,\n        isVideo,\n        togglePlay,\n        pause,\n        play,\n        skipToNext,\n        skipToPrevious,\n        selectTrack,\n        audioRef,\n        videoRef,\n        setVideoElement,\n      }}\n    >\n      {/* Global audio element - only for audio tracks */}\n      {!isVideo && (\n        <audio ref={audioRef} src={currentTrack.audioSrc} preload=\"metadata\" />\n      )}\n      {children}\n    </MusicContext.Provider>\n  );\n}\n\nexport function useMusic() {\n  const context = useContext(MusicContext);\n  if (!context) {\n    throw new Error('useMusic must be used within a MusicProvider');\n  }\n  return context;\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 1247, "column": 0}, "map": {"version":3,"sources":["file:///Users/jamesspalding/OpenClaw-OS/src/context/OverlayContext.tsx"],"sourcesContent":["'use client';\n\nimport { createContext, useContext, useState, useCallback, ReactNode } from 'react';\n\ntype OverlayType = 'none' | 'chat' | 'music' | 'folder';\n\ninterface OverlayContextValue {\n  activeOverlay: OverlayType;\n  openOverlay: (type: OverlayType) => void;\n  closeOverlay: () => void;\n  toggleOverlay: (type: OverlayType) => void;\n  isOverlayOpen: (type: OverlayType) => boolean;\n}\n\nconst OverlayContext = createContext<OverlayContextValue | null>(null);\n\ninterface OverlayProviderProps {\n  children: ReactNode;\n}\n\nexport function OverlayProvider({ children }: OverlayProviderProps) {\n  const [activeOverlay, setActiveOverlay] = useState<OverlayType>('none');\n\n  const openOverlay = useCallback((type: OverlayType) => {\n    setActiveOverlay(type);\n  }, []);\n\n  const closeOverlay = useCallback(() => {\n    setActiveOverlay('none');\n  }, []);\n\n  const toggleOverlay = useCallback((type: OverlayType) => {\n    setActiveOverlay((current) => (current === type ? 'none' : type));\n  }, []);\n\n  const isOverlayOpen = useCallback(\n    (type: OverlayType) => {\n      return activeOverlay === type;\n    },\n    [activeOverlay]\n  );\n\n  const value: OverlayContextValue = {\n    activeOverlay,\n    openOverlay,\n    closeOverlay,\n    toggleOverlay,\n    isOverlayOpen,\n  };\n\n  return (\n    <OverlayContext.Provider value={value}>\n      {children}\n    </OverlayContext.Provider>\n  );\n}\n\nexport function useOverlay() {\n  const context = useContext(OverlayContext);\n  if (!context) {\n    throw new Error('useOverlay must be used within an OverlayProvider');\n  }\n  return context;\n}\n"],"names":[],"mappings":";;;;;;;AAEA;;;AAFA;;AAcA,MAAM,+BAAiB,IAAA,uXAAa,EAA6B;AAM1D,SAAS,gBAAgB,EAAE,QAAQ,EAAwB;;IAChE,MAAM,CAAC,eAAe,iBAAiB,GAAG,IAAA,kXAAQ,EAAc;IAEhE,MAAM,cAAc,IAAA,qXAAW;oDAAC,CAAC;YAC/B,iBAAiB;QACnB;mDAAG,EAAE;IAEL,MAAM,eAAe,IAAA,qXAAW;qDAAC;YAC/B,iBAAiB;QACnB;oDAAG,EAAE;IAEL,MAAM,gBAAgB,IAAA,qXAAW;sDAAC,CAAC;YACjC;8DAAiB,CAAC,UAAa,YAAY,OAAO,SAAS;;QAC7D;qDAAG,EAAE;IAEL,MAAM,gBAAgB,IAAA,qXAAW;sDAC/B,CAAC;YACC,OAAO,kBAAkB;QAC3B;qDACA;QAAC;KAAc;IAGjB,MAAM,QAA6B;QACjC;QACA;QACA;QACA;QACA;IACF;IAEA,qBACE,sYAAC,eAAe,QAAQ;QAAC,OAAO;kBAC7B;;;;;;AAGP;GAnCgB;KAAA;AAqCT,SAAS;;IACd,MAAM,UAAU,IAAA,oXAAU,EAAC;IAC3B,IAAI,CAAC,SAAS;QACZ,MAAM,IAAI,MAAM;IAClB;IACA,OAAO;AACT;IANgB"}},
    {"offset": {"line": 1323, "column": 0}, "map": {"version":3,"sources":["file:///Users/jamesspalding/OpenClaw-OS/src/context/DesignThemeContext.tsx"],"sourcesContent":["'use client';\n\nimport { createContext, useContext, useState, useEffect, useCallback, type ReactNode } from 'react';\nimport { ThemeName, isValidTheme } from '@/lib/themes';\n\ninterface DesignThemeContextType {\n  designTheme: ThemeName;\n  setDesignTheme: (theme: ThemeName) => void;\n  // Aliases for convenience\n  theme: ThemeName;\n  setTheme: (theme: ThemeName) => void;\n}\n\nconst DesignThemeContext = createContext<DesignThemeContextType | null>(null);\n\nconst STORAGE_KEY = 'design-theme';\nconst DEFAULT_THEME: ThemeName = 'base';\n\nexport function DesignThemeProvider({ children }: { children: ReactNode }) {\n  const [designTheme, setDesignThemeState] = useState<ThemeName>(DEFAULT_THEME);\n  const [mounted, setMounted] = useState(false);\n\n  // Load theme from localStorage on mount\n  useEffect(() => {\n    setMounted(true);\n    const stored = localStorage.getItem(STORAGE_KEY);\n    if (stored && isValidTheme(stored)) {\n      setDesignThemeState(stored);\n    }\n  }, []);\n\n  const setDesignTheme = useCallback((theme: ThemeName) => {\n    setDesignThemeState(theme);\n    localStorage.setItem(STORAGE_KEY, theme);\n  }, []);\n\n  const value: DesignThemeContextType = {\n    designTheme,\n    setDesignTheme,\n    // Aliases\n    theme: designTheme,\n    setTheme: setDesignTheme,\n  };\n\n  // Prevent hydration mismatch by not rendering theme-dependent content until mounted\n  if (!mounted) {\n    return (\n      <DesignThemeContext.Provider value={{ ...value, designTheme: DEFAULT_THEME, theme: DEFAULT_THEME }}>\n        {children}\n      </DesignThemeContext.Provider>\n    );\n  }\n\n  return (\n    <DesignThemeContext.Provider value={value}>\n      {children}\n    </DesignThemeContext.Provider>\n  );\n}\n\nexport function useDesignTheme() {\n  const context = useContext(DesignThemeContext);\n  if (!context) {\n    throw new Error('useDesignTheme must be used within a DesignThemeProvider');\n  }\n  return context;\n}\n\n// Safe version that returns defaults instead of throwing - use for pages that might\n// render before the provider is fully initialized during client-side navigation\nexport function useDesignThemeSafe() {\n  const context = useContext(DesignThemeContext);\n  if (!context) {\n    // Return safe defaults\n    return {\n      designTheme: DEFAULT_THEME,\n      theme: DEFAULT_THEME,\n      setDesignTheme: () => {},\n      setTheme: () => {},\n    };\n  }\n  return context;\n}\n"],"names":[],"mappings":";;;;;;;;;AAEA;AACA;AAAA;;;AAHA;;;AAaA,MAAM,mCAAqB,IAAA,uXAAa,EAAgC;AAExE,MAAM,cAAc;AACpB,MAAM,gBAA2B;AAE1B,SAAS,oBAAoB,EAAE,QAAQ,EAA2B;;IACvE,MAAM,CAAC,aAAa,oBAAoB,GAAG,IAAA,kXAAQ,EAAY;IAC/D,MAAM,CAAC,SAAS,WAAW,GAAG,IAAA,kXAAQ,EAAC;IAEvC,wCAAwC;IACxC,IAAA,mXAAS;yCAAC;YACR,WAAW;YACX,MAAM,SAAS,aAAa,OAAO,CAAC;YACpC,IAAI,UAAU,IAAA,sJAAY,EAAC,SAAS;gBAClC,oBAAoB;YACtB;QACF;wCAAG,EAAE;IAEL,MAAM,iBAAiB,IAAA,qXAAW;2DAAC,CAAC;YAClC,oBAAoB;YACpB,aAAa,OAAO,CAAC,aAAa;QACpC;0DAAG,EAAE;IAEL,MAAM,QAAgC;QACpC;QACA;QACA,UAAU;QACV,OAAO;QACP,UAAU;IACZ;IAEA,oFAAoF;IACpF,IAAI,CAAC,SAAS;QACZ,qBACE,sYAAC,mBAAmB,QAAQ;YAAC,OAAO;gBAAE,GAAG,KAAK;gBAAE,aAAa;gBAAe,OAAO;YAAc;sBAC9F;;;;;;IAGP;IAEA,qBACE,sYAAC,mBAAmB,QAAQ;QAAC,OAAO;kBACjC;;;;;;AAGP;GAxCgB;KAAA;AA0CT,SAAS;;IACd,MAAM,UAAU,IAAA,oXAAU,EAAC;IAC3B,IAAI,CAAC,SAAS;QACZ,MAAM,IAAI,MAAM;IAClB;IACA,OAAO;AACT;IANgB;AAUT,SAAS;;IACd,MAAM,UAAU,IAAA,oXAAU,EAAC;IAC3B,IAAI,CAAC,SAAS;QACZ,uBAAuB;QACvB,OAAO;YACL,aAAa;YACb,OAAO;YACP,gBAAgB,KAAO;YACvB,UAAU,KAAO;QACnB;IACF;IACA,OAAO;AACT;IAZgB"}},
    {"offset": {"line": 1429, "column": 0}, "map": {"version":3,"sources":["file:///Users/jamesspalding/OpenClaw-OS/src/context/HomeScreenContext.tsx"],"sourcesContent":["'use client';\n\nimport React, { createContext, useContext, useState, useCallback, useEffect, ReactNode } from 'react';\n\n// Types\nexport interface AppItem {\n  id: string;\n  name: string;\n  href?: string;\n  icon?: React.ReactNode;\n  imageUrl?: string;\n  gradient: string;\n  external?: boolean;\n  isChat?: boolean;\n}\n\nexport interface FolderItem {\n  id: string;\n  name: string;\n  apps: AppItem[];\n}\n\nexport type GridItem =\n  | { type: 'app'; item: AppItem }\n  | { type: 'folder'; item: FolderItem };\n\ninterface DragState {\n  isDragging: boolean;\n  draggedItem: GridItem | null;\n  draggedIndex: number | null;\n  dropTargetIndex: number | null;\n  dragOffset: { x: number; y: number };\n  dragPosition: { x: number; y: number };\n}\n\ninterface HomeScreenContextValue {\n  // Grid items (apps and folders)\n  gridItems: GridItem[];\n  setGridItems: (items: GridItem[]) => void;\n\n  // Edit mode (wiggle mode)\n  isEditMode: boolean;\n  enterEditMode: () => void;\n  exitEditMode: () => void;\n\n  // Drag state\n  dragState: DragState;\n  startDrag: (item: GridItem, index: number, offset: { x: number; y: number }) => void;\n  updateDragPosition: (position: { x: number; y: number }) => void;\n  setDropTarget: (index: number | null) => void;\n  endDrag: () => void;\n\n  // Folder operations\n  createFolder: (appIndex1: number, appIndex2: number, folderName?: string) => void;\n  addToFolder: (appIndex: number, folderIndex: number) => void;\n  removeFromFolder: (folderId: string, appId: string) => void;\n  renameFolder: (folderId: string, newName: string) => void;\n\n  // Open folder state\n  openFolderId: string | null;\n  openFolder: (folderId: string) => void;\n  closeFolder: () => void;\n\n  // Reordering\n  reorderItems: (fromIndex: number, toIndex: number) => void;\n\n  // Reset\n  resetToDefault: () => void;\n}\n\nconst HomeScreenContext = createContext<HomeScreenContextValue | null>(null);\n\nconst STORAGE_KEY = 'openclaw_homeScreen_v17'; // v17: Hub-based restructure\n\n// ============================================================================\n// ALL APPS - Complete registry of available apps\n// ============================================================================\n// ============================================================================\n// ALL APPS - Curated for OpenClaw OS\n// ============================================================================\nexport const defaultApps: AppItem[] = [\n  // Hub/Main apps\n  { id: 'control', name: 'Control', href: '/control', gradient: 'linear-gradient(135deg, #3b82f6 0%, #6366f1 100%)' },\n  { id: 'agents', name: 'Agents', href: '/agents', gradient: 'linear-gradient(135deg, #8b5cf6 0%, #ec4899 100%)' },\n  { id: 'settings', name: 'Settings', href: '/settings', gradient: 'linear-gradient(135deg, #f43f5e 0%, #fbbf24 100%)' },\n  { id: 'resources', name: 'Resources', href: 'https://docs.openclaw.io', gradient: 'linear-gradient(135deg, #10b981 0%, #14b8a6 100%)', external: true },\n  { id: 'chat', name: 'Chat', href: '/chat', gradient: 'linear-gradient(135deg, #38bdf8 0%, #818cf8 100%)', isChat: true },\n\n  // Secondary apps\n  { id: 'browser', name: 'Browser', href: '/browser', gradient: 'linear-gradient(135deg, #3b82f6 0%, #60a5fa 100%)' },\n  { id: 'terminal', name: 'Terminal', href: '/terminal', gradient: 'linear-gradient(135deg, #22c55e 0%, #16a34a 100%)' },\n  { id: 'canvas', name: 'Canvas', href: '/canvas', gradient: 'linear-gradient(135deg, #8b5cf6 0%, #06b6d4 100%)' },\n  { id: 'notes', name: 'Notes', href: '/notes', gradient: 'linear-gradient(135deg, #fbbf24 0%, #f59e0b 100%)' },\n  { id: 'calendar', name: 'Calendar', href: '/calendar', gradient: 'linear-gradient(135deg, #ef4444 0%, #f97316 100%)' },\n  { id: 'vault', name: 'Vault', href: '/vault', gradient: 'linear-gradient(135deg, #30cfd0 0%, #330867 100%)' },\n  { id: 'wiki', name: 'Wiki', href: '/wiki', gradient: 'linear-gradient(135deg, #0d9488 0%, #0f766e 100%)' },\n\n  // Groups/Folders contents\n  { id: 'projects', name: 'Projects', href: '/projects', gradient: 'linear-gradient(135deg, #10b981 0%, #14b8a6 100%)' },\n  { id: 'product', name: 'Product', href: '/product', gradient: 'linear-gradient(135deg, #3b82f6 0%, #6366f1 100%)' },\n  { id: 'prototyping', name: 'Prototyping', href: '/prototyping', gradient: 'linear-gradient(135deg, #f97316 0%, #eab308 100%)' },\n  { id: 'mockit', name: 'Mockit', href: '/mockit', gradient: 'linear-gradient(135deg, #06b6d4 0%, #0891b2 100%)' },\n  { id: 'photos', name: 'Photos', href: '/photos', gradient: 'linear-gradient(135deg, #f43f5e 0%, #ec4899 100%)' },\n  { id: '3d-gallery', name: '3-D', href: '/gallery-3d', gradient: 'linear-gradient(135deg, #6366f1 0%, #8b5cf6 100%)' },\n  { id: 'games', name: 'Games', href: '/games', gradient: 'linear-gradient(135deg, #a855f7 0%, #ec4899 100%)' },\n  { id: 'weather', name: 'Weather', href: '/weather', gradient: 'linear-gradient(135deg, #38bdf8 0%, #0ea5e9 100%)' },\n  { id: 'security', name: 'Security', href: '/security', gradient: 'linear-gradient(135deg, #ef4444 0%, #991b1b 100%)' },\n  { id: 'skills', name: 'Skills', href: '/skills', gradient: 'linear-gradient(135deg, #f59e0b 0%, #ef4444 100%)' },\n  { id: 'updates', name: 'Updates', href: '/updates', gradient: 'linear-gradient(135deg, #8b5cf6 0%, #a855f7 100%)' },\n  { id: 'humans', name: 'Humans', href: '/humans', gradient: 'linear-gradient(135deg, #38bdf8 0%, #818cf8 100%)' },\n  { id: 'contacts', name: 'Contacts', href: '/contacts', gradient: 'linear-gradient(135deg, #6366f1 0%, #8b5cf6 100%)' },\n];\n\nconst getAppById = (id: string): AppItem | undefined => defaultApps.find(app => app.id === id);\n\nconst createFolderGridItem = (id: string, name: string, appIds: string[]): GridItem => ({\n  type: 'folder',\n  item: {\n    id,\n    name,\n    apps: appIds.map(appId => getAppById(appId)).filter((app): app is AppItem => app !== undefined),\n  },\n});\n\nconst createAppGridItem = (id: string): GridItem | null => {\n  const app = getAppById(id);\n  return app ? { type: 'app', item: app } : null;\n};\n\n// Default grid with Hub-based layout\nconst createDefaultGridItems = (): GridItem[] => {\n  const items: (GridItem | null)[] = [\n    // ========== ROW 1: HUBS ==========\n    createAppGridItem('control'),         // Control Hub\n    createAppGridItem('agents'),          // Agents Hub\n    createAppGridItem('settings'),        // Settings Hub\n    createAppGridItem('resources'),       // Resources Hub\n\n    // ========== ROW 2: CORE TOOLS ==========\n    createAppGridItem('chat'),            // Chat Hub\n    createAppGridItem('browser'),         // Web Browser\n    createAppGridItem('terminal'),        // CLI\n    createAppGridItem('canvas'),          // Design\n\n    // ========== ROW 3: UTILITIES & FOLDERS ==========\n    createAppGridItem('notes'),           // Text\n    createAppGridItem('calendar'),        // Time\n    createFolderGridItem('folder-dev', 'Dev', ['projects', 'product', 'prototyping', 'mockit']),\n    createFolderGridItem('folder-more', 'More', ['photos', '3d-gallery', 'games', 'weather', 'security', 'vault', 'wiki', 'skills', 'updates', 'humans', 'contacts']),\n  ];\n\n  return items.filter((item): item is GridItem => item !== null);\n};\n\nconst defaultGridItems: GridItem[] = createDefaultGridItems();\n\ninterface HomeScreenProviderProps {\n  children: ReactNode;\n}\n\nexport function HomeScreenProvider({ children }: HomeScreenProviderProps) {\n  const [gridItems, setGridItemsState] = useState<GridItem[]>(defaultGridItems);\n  const [isEditMode, setIsEditMode] = useState(false);\n  const [openFolderId, setOpenFolderId] = useState<string | null>(null);\n  const [dragState, setDragState] = useState<DragState>({\n    isDragging: false,\n    draggedItem: null,\n    draggedIndex: null,\n    dropTargetIndex: null,\n    dragOffset: { x: 0, y: 0 },\n    dragPosition: { x: 0, y: 0 },\n  });\n\n  // Load from localStorage on mount\n  useEffect(() => {\n    try {\n      const saved = localStorage.getItem(STORAGE_KEY);\n      if (saved) {\n        const parsed = JSON.parse(saved);\n        // Restore icons to grid items (icons are React elements and can't be serialized)\n        const restored = parsed.map((item: GridItem) => {\n          if (item.type === 'app') {\n            const defaultApp = defaultApps.find(a => a.id === item.item.id);\n            return {\n              ...item,\n              item: { ...item.item, icon: defaultApp?.icon }\n            };\n          } else {\n            return {\n              ...item,\n              item: {\n                ...item.item,\n                apps: item.item.apps.map((app: AppItem) => {\n                  const defaultApp = defaultApps.find(a => a.id === app.id);\n                  return { ...app, icon: defaultApp?.icon };\n                })\n              }\n            };\n          }\n        });\n        setGridItemsState(restored);\n      }\n    } catch (e) {\n      console.error('Failed to load home screen state:', e);\n    }\n  }, []);\n\n  // Save to localStorage when gridItems changes\n  const setGridItems = useCallback((items: GridItem[]) => {\n    setGridItemsState(items);\n    try {\n      // Strip out icon React elements before saving (they can't be serialized)\n      const toSave = items.map(item => {\n        if (item.type === 'app') {\n          const { icon, ...rest } = item.item;\n          return { type: 'app', item: rest };\n        } else {\n          return {\n            type: 'folder',\n            item: {\n              ...item.item,\n              apps: item.item.apps.map(({ icon, ...rest }) => rest)\n            }\n          };\n        }\n      });\n      localStorage.setItem(STORAGE_KEY, JSON.stringify(toSave));\n    } catch (e) {\n      console.error('Failed to save home screen state:', e);\n    }\n  }, []);\n\n  // Edit mode\n  const enterEditMode = useCallback(() => setIsEditMode(true), []);\n  const exitEditMode = useCallback(() => {\n    setIsEditMode(false);\n    setDragState(prev => ({\n      ...prev,\n      isDragging: false,\n      draggedItem: null,\n      draggedIndex: null,\n      dropTargetIndex: null,\n    }));\n  }, []);\n\n  // Drag operations\n  const startDrag = useCallback((item: GridItem, index: number, offset: { x: number; y: number }) => {\n    setDragState({\n      isDragging: true,\n      draggedItem: item,\n      draggedIndex: index,\n      dropTargetIndex: null,\n      dragOffset: offset,\n      dragPosition: { x: 0, y: 0 },\n    });\n  }, []);\n\n  const updateDragPosition = useCallback((position: { x: number; y: number }) => {\n    setDragState(prev => ({\n      ...prev,\n      dragPosition: position,\n    }));\n  }, []);\n\n  const setDropTarget = useCallback((index: number | null) => {\n    setDragState(prev => ({\n      ...prev,\n      dropTargetIndex: index,\n    }));\n  }, []);\n\n  const endDrag = useCallback(() => {\n    const { draggedIndex, dropTargetIndex } = dragState;\n\n    if (draggedIndex !== null && dropTargetIndex !== null && draggedIndex !== dropTargetIndex) {\n      const sourceItem = gridItems[draggedIndex];\n      const targetItem = gridItems[dropTargetIndex];\n\n      // Check if we should create a folder (both are apps)\n      if (sourceItem.type === 'app' && targetItem.type === 'app') {\n        // Create folder with both apps\n        const newFolder: FolderItem = {\n          id: `folder_${Date.now()}`,\n          name: 'New Folder',\n          apps: [targetItem.item, sourceItem.item],\n        };\n\n        const newItems = [...gridItems];\n        // Replace target with folder\n        newItems[dropTargetIndex] = { type: 'folder', item: newFolder };\n        // Remove dragged item\n        newItems.splice(draggedIndex > dropTargetIndex ? draggedIndex : draggedIndex, 1);\n        setGridItems(newItems);\n      } else if (sourceItem.type === 'app' && targetItem.type === 'folder') {\n        // Add app to existing folder\n        const newItems = [...gridItems];\n        const folder = { ...targetItem.item };\n        folder.apps = [...folder.apps, sourceItem.item];\n        newItems[dropTargetIndex] = { type: 'folder', item: folder };\n        newItems.splice(draggedIndex > dropTargetIndex ? draggedIndex : draggedIndex, 1);\n        setGridItems(newItems);\n      } else {\n        // Just reorder\n        reorderItems(draggedIndex, dropTargetIndex);\n      }\n    }\n\n    setDragState({\n      isDragging: false,\n      draggedItem: null,\n      draggedIndex: null,\n      dropTargetIndex: null,\n      dragOffset: { x: 0, y: 0 },\n      dragPosition: { x: 0, y: 0 },\n    });\n  }, [dragState, gridItems, setGridItems]);\n\n  // Folder operations\n  const createFolder = useCallback((appIndex1: number, appIndex2: number, folderName: string = 'New Folder') => {\n    const item1 = gridItems[appIndex1];\n    const item2 = gridItems[appIndex2];\n\n    if (item1.type !== 'app' || item2.type !== 'app') return;\n\n    const newFolder: FolderItem = {\n      id: `folder_${Date.now()}`,\n      name: folderName,\n      apps: [item1.item, item2.item],\n    };\n\n    const newItems = gridItems.filter((_, i) => i !== appIndex1 && i !== appIndex2);\n    const insertIndex = Math.min(appIndex1, appIndex2);\n    newItems.splice(insertIndex, 0, { type: 'folder', item: newFolder });\n    setGridItems(newItems);\n  }, [gridItems, setGridItems]);\n\n  const addToFolder = useCallback((appIndex: number, folderIndex: number) => {\n    const appItem = gridItems[appIndex];\n    const folderItem = gridItems[folderIndex];\n\n    if (appItem.type !== 'app' || folderItem.type !== 'folder') return;\n\n    const newItems = [...gridItems];\n    const folder = { ...folderItem.item };\n    folder.apps = [...folder.apps, appItem.item];\n    newItems[folderIndex] = { type: 'folder', item: folder };\n    newItems.splice(appIndex, 1);\n    setGridItems(newItems);\n  }, [gridItems, setGridItems]);\n\n  const removeFromFolder = useCallback((folderId: string, appId: string) => {\n    const folderIndex = gridItems.findIndex(\n      item => item.type === 'folder' && item.item.id === folderId\n    );\n    if (folderIndex === -1) return;\n\n    const folder = gridItems[folderIndex] as { type: 'folder'; item: FolderItem };\n    const appToRemove = folder.item.apps.find(app => app.id === appId);\n    if (!appToRemove) return;\n\n    const newItems = [...gridItems];\n    const remainingApps = folder.item.apps.filter(app => app.id !== appId);\n\n    if (remainingApps.length === 0) {\n      // Remove empty folder\n      newItems.splice(folderIndex, 1);\n    } else if (remainingApps.length === 1) {\n      // Convert folder back to single app\n      newItems[folderIndex] = { type: 'app', item: remainingApps[0] };\n    } else {\n      // Update folder\n      newItems[folderIndex] = { type: 'folder', item: { ...folder.item, apps: remainingApps } };\n    }\n\n    // Add removed app after the folder position\n    newItems.splice(folderIndex + 1, 0, { type: 'app', item: appToRemove });\n    setGridItems(newItems);\n  }, [gridItems, setGridItems]);\n\n  const renameFolder = useCallback((folderId: string, newName: string) => {\n    const newItems = gridItems.map(item => {\n      if (item.type === 'folder' && item.item.id === folderId) {\n        return { ...item, item: { ...item.item, name: newName } };\n      }\n      return item;\n    });\n    setGridItems(newItems);\n  }, [gridItems, setGridItems]);\n\n  // Open folder\n  const openFolder = useCallback((folderId: string) => {\n    setOpenFolderId(folderId);\n  }, []);\n\n  const closeFolder = useCallback(() => {\n    setOpenFolderId(null);\n  }, []);\n\n  // Reordering\n  const reorderItems = useCallback((fromIndex: number, toIndex: number) => {\n    const newItems = [...gridItems];\n    const [movedItem] = newItems.splice(fromIndex, 1);\n    newItems.splice(toIndex, 0, movedItem);\n    setGridItems(newItems);\n  }, [gridItems, setGridItems]);\n\n  // Reset\n  const resetToDefault = useCallback(() => {\n    const newDefaults = createDefaultGridItems();\n    setGridItems(newDefaults);\n    localStorage.removeItem(STORAGE_KEY);\n  }, [setGridItems]);\n\n  const value: HomeScreenContextValue = {\n    gridItems,\n    setGridItems,\n    isEditMode,\n    enterEditMode,\n    exitEditMode,\n    dragState,\n    startDrag,\n    updateDragPosition,\n    setDropTarget,\n    endDrag,\n    createFolder,\n    addToFolder,\n    removeFromFolder,\n    renameFolder,\n    openFolderId,\n    openFolder,\n    closeFolder,\n    reorderItems,\n    resetToDefault,\n  };\n\n  return (\n    <HomeScreenContext.Provider value={value}>\n      {children}\n    </HomeScreenContext.Provider>\n  );\n}\n\nexport function useHomeScreen() {\n  const context = useContext(HomeScreenContext);\n  if (!context) {\n    throw new Error('useHomeScreen must be used within a HomeScreenProvider');\n  }\n  return context;\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 2091, "column": 0}, "map": {"version":3,"sources":["file:///Users/jamesspalding/OpenClaw-OS/src/context/ProjectContext.tsx"],"sourcesContent":["'use client';\n\n/**\n * ProjectContext - Multi-Project Support\n *\n * Manages projects as contexts within Claw AI OS.\n * Each project contains its own:\n * - Kanban board\n * - Threads\n * - PRDs and artifacts\n * - Design direction\n */\n\nimport {\n  createContext,\n  useContext,\n  useReducer,\n  useEffect,\n  useCallback,\n  ReactNode,\n  useState,\n} from 'react';\n\n// ============================================================================\n// Types\n// ============================================================================\n\nexport interface ProjectArtifact {\n  id: string;\n  type: 'prd' | 'brief' | 'design' | 'prototype' | 'ticket' | 'epic' | 'note';\n  title: string;\n  content: string;\n  version: number;\n  createdAt: number;\n  updatedAt: number;\n}\n\nexport interface ProjectThread {\n  id: string;\n  name: string;\n  status: 'active' | 'paused' | 'completed';\n  createdAt: number;\n  messageCount: number;\n}\n\nexport interface ProjectKanbanTask {\n  id: string;\n  title: string;\n  description?: string;\n  status: 'backlog' | 'todo' | 'in-progress' | 'review' | 'done';\n  priority: 'urgent' | 'high' | 'medium' | 'low';\n  tags?: string[];\n  epicId?: string;\n  createdAt: number;\n  updatedAt: number;\n}\n\nexport interface Project {\n  id: string;\n  name: string;\n  description?: string;\n  status: 'active' | 'archived' | 'completed';\n  color: string;\n  icon?: string;\n  createdAt: number;\n  updatedAt: number;\n  artifacts: ProjectArtifact[];\n  threads: ProjectThread[];\n  tasks: ProjectKanbanTask[];\n  settings: {\n    defaultView?: 'kanban' | 'list' | 'calendar';\n    showCompleted?: boolean;\n  };\n}\n\nexport interface ProjectState {\n  projects: Project[];\n  activeProjectId: string | null;\n  isLoaded: boolean;\n}\n\n// ============================================================================\n// Default Values\n// ============================================================================\n\nconst OPENCLAW_OS_PROJECT: Project = {\n  id: 'openclaw-os',\n  name: 'OpenClaw-OS',\n  description: 'The AI-Native Operating System ecosystem.',\n  status: 'active',\n  color: '#8b5cf6',\n  createdAt: Date.now(),\n  updatedAt: Date.now(),\n  artifacts: [],\n  threads: [],\n  tasks: [],\n  settings: {\n    defaultView: 'kanban',\n    showCompleted: false,\n  },\n};\n\nconst createDefaultState = (): ProjectState => ({\n  projects: [OPENCLAW_OS_PROJECT],\n  activeProjectId: 'openclaw-os',\n  isLoaded: false,\n});\n\n// ============================================================================\n// Storage\n// ============================================================================\n\nconst STORAGE_KEY = 'openclaw_projects';\n\n// ============================================================================\n// Reducer\n// ============================================================================\n\ntype ProjectAction =\n  | { type: 'SET_STATE'; payload: ProjectState }\n  | { type: 'SET_LOADED' }\n  | { type: 'SET_ACTIVE_PROJECT'; payload: string | null }\n  | { type: 'CREATE_PROJECT'; payload: Omit<Project, 'id' | 'createdAt' | 'updatedAt' | 'artifacts' | 'threads' | 'tasks' | 'settings'> }\n  | { type: 'UPDATE_PROJECT'; payload: { id: string; updates: Partial<Project> } }\n  | { type: 'ARCHIVE_PROJECT'; payload: string }\n  | { type: 'DELETE_PROJECT'; payload: string }\n  | { type: 'ADD_ARTIFACT'; payload: { projectId: string; artifact: Omit<ProjectArtifact, 'id' | 'createdAt' | 'updatedAt' | 'version'> } }\n  | { type: 'UPDATE_ARTIFACT'; payload: { projectId: string; artifactId: string; updates: Partial<ProjectArtifact> } }\n  | { type: 'DELETE_ARTIFACT'; payload: { projectId: string; artifactId: string } }\n  | { type: 'ADD_TASK'; payload: { projectId: string; task: Omit<ProjectKanbanTask, 'id' | 'createdAt' | 'updatedAt'> } }\n  | { type: 'UPDATE_TASK'; payload: { projectId: string; taskId: string; updates: Partial<ProjectKanbanTask> } }\n  | { type: 'DELETE_TASK'; payload: { projectId: string; taskId: string } }\n  | { type: 'MOVE_TASK'; payload: { projectId: string; taskId: string; status: ProjectKanbanTask['status'] } };\n\nfunction generateId(): string {\n  return `${Date.now()}_${Math.random().toString(36).substring(2, 9)}`;\n}\n\nfunction projectReducer(state: ProjectState, action: ProjectAction): ProjectState {\n  const now = Date.now();\n\n  switch (action.type) {\n    case 'SET_STATE':\n      return { ...action.payload, isLoaded: true };\n\n    case 'SET_LOADED':\n      return { ...state, isLoaded: true };\n\n    case 'SET_ACTIVE_PROJECT':\n      return { ...state, activeProjectId: action.payload };\n\n    case 'CREATE_PROJECT': {\n      const newProject: Project = {\n        ...action.payload,\n        id: generateId(),\n        createdAt: now,\n        updatedAt: now,\n        artifacts: [],\n        threads: [],\n        tasks: [],\n        settings: { defaultView: 'kanban', showCompleted: false },\n      };\n      return {\n        ...state,\n        projects: [...state.projects, newProject],\n        activeProjectId: newProject.id,\n      };\n    }\n\n    case 'UPDATE_PROJECT':\n      return {\n        ...state,\n        projects: state.projects.map((p) =>\n          p.id === action.payload.id\n            ? { ...p, ...action.payload.updates, updatedAt: now }\n            : p\n        ),\n      };\n\n    case 'ARCHIVE_PROJECT':\n      return {\n        ...state,\n        projects: state.projects.map((p) =>\n          p.id === action.payload\n            ? { ...p, status: 'archived', updatedAt: now }\n            : p\n        ),\n        activeProjectId:\n          state.activeProjectId === action.payload\n            ? state.projects.find((p) => p.id !== action.payload && p.status === 'active')?.id || null\n            : state.activeProjectId,\n      };\n\n    case 'DELETE_PROJECT':\n      // Prevent deleting Claw AI OS\n      if (action.payload === 'openclaw-os') return state;\n      return {\n        ...state,\n        projects: state.projects.filter((p) => p.id !== action.payload),\n        activeProjectId:\n          state.activeProjectId === action.payload\n            ? state.projects.find((p) => p.id !== action.payload)?.id || null\n            : state.activeProjectId,\n      };\n\n    case 'ADD_ARTIFACT': {\n      const { projectId, artifact } = action.payload;\n      const newArtifact: ProjectArtifact = {\n        ...artifact,\n        id: generateId(),\n        version: 1,\n        createdAt: now,\n        updatedAt: now,\n      };\n      return {\n        ...state,\n        projects: state.projects.map((p) =>\n          p.id === projectId\n            ? { ...p, artifacts: [...p.artifacts, newArtifact], updatedAt: now }\n            : p\n        ),\n      };\n    }\n\n    case 'UPDATE_ARTIFACT': {\n      const { projectId, artifactId, updates } = action.payload;\n      return {\n        ...state,\n        projects: state.projects.map((p) =>\n          p.id === projectId\n            ? {\n              ...p,\n              artifacts: p.artifacts.map((a) =>\n                a.id === artifactId\n                  ? { ...a, ...updates, version: a.version + 1, updatedAt: now }\n                  : a\n              ),\n              updatedAt: now,\n            }\n            : p\n        ),\n      };\n    }\n\n    case 'DELETE_ARTIFACT': {\n      const { projectId, artifactId } = action.payload;\n      return {\n        ...state,\n        projects: state.projects.map((p) =>\n          p.id === projectId\n            ? { ...p, artifacts: p.artifacts.filter((a) => a.id !== artifactId), updatedAt: now }\n            : p\n        ),\n      };\n    }\n\n    case 'ADD_TASK': {\n      const { projectId, task } = action.payload;\n      const newTask: ProjectKanbanTask = {\n        ...task,\n        id: generateId(),\n        createdAt: now,\n        updatedAt: now,\n      };\n      return {\n        ...state,\n        projects: state.projects.map((p) =>\n          p.id === projectId\n            ? { ...p, tasks: [...p.tasks, newTask], updatedAt: now }\n            : p\n        ),\n      };\n    }\n\n    case 'UPDATE_TASK': {\n      const { projectId, taskId, updates } = action.payload;\n      return {\n        ...state,\n        projects: state.projects.map((p) =>\n          p.id === projectId\n            ? {\n              ...p,\n              tasks: p.tasks.map((t) =>\n                t.id === taskId ? { ...t, ...updates, updatedAt: now } : t\n              ),\n              updatedAt: now,\n            }\n            : p\n        ),\n      };\n    }\n\n    case 'DELETE_TASK': {\n      const { projectId, taskId } = action.payload;\n      return {\n        ...state,\n        projects: state.projects.map((p) =>\n          p.id === projectId\n            ? { ...p, tasks: p.tasks.filter((t) => t.id !== taskId), updatedAt: now }\n            : p\n        ),\n      };\n    }\n\n    case 'MOVE_TASK': {\n      const { projectId, taskId, status } = action.payload;\n      return {\n        ...state,\n        projects: state.projects.map((p) =>\n          p.id === projectId\n            ? {\n              ...p,\n              tasks: p.tasks.map((t) =>\n                t.id === taskId ? { ...t, status, updatedAt: now } : t\n              ),\n              updatedAt: now,\n            }\n            : p\n        ),\n      };\n    }\n\n    default:\n      return state;\n  }\n}\n\n// ============================================================================\n// Session Management\n// ============================================================================\n\nexport interface OpenClawSessionState {\n  activeProjectId: string | null;\n  setActiveProject: (id: string | null) => void;\n}\n\nexport function useOpenClawSession() {\n  const { activeProjectId, setActiveProject } = useProject();\n  return {\n    activeProjectId,\n    setActiveProject,\n    // Shims for Convex compatibility if needed\n    activeConvexProjectId: activeProjectId,\n    activeConvexProjectSlug: activeProjectId, // Simplify for now\n    setActiveConvexProject: setActiveProject,\n  };\n}\n\n// ============================================================================\n// Context\n// ============================================================================\n\ninterface ProjectContextValue {\n  // State\n  projects: Project[];\n  activeProject: Project | null;\n  activeProjectId: string | null;\n  isLoaded: boolean;\n\n  // Project operations\n  setActiveProject: (id: string | null) => void;\n  createProject: (data: { name: string; description?: string; color: string }) => void;\n  updateProject: (id: string, updates: Partial<Project>) => void;\n  archiveProject: (id: string) => void;\n  deleteProject: (id: string) => void;\n\n  // Artifact operations\n  addArtifact: (projectId: string, artifact: Omit<ProjectArtifact, 'id' | 'createdAt' | 'updatedAt' | 'version'>) => void;\n  updateArtifact: (projectId: string, artifactId: string, updates: Partial<ProjectArtifact>) => void;\n  deleteArtifact: (projectId: string, artifactId: string) => void;\n  getArtifacts: (projectId?: string) => ProjectArtifact[];\n\n  // Task operations\n  addTask: (projectId: string, task: Omit<ProjectKanbanTask, 'id' | 'createdAt' | 'updatedAt'>) => void;\n  updateTask: (projectId: string, taskId: string, updates: Partial<ProjectKanbanTask>) => void;\n  deleteTask: (projectId: string, taskId: string) => void;\n  moveTask: (projectId: string, taskId: string, status: ProjectKanbanTask['status']) => void;\n  getTasks: (projectId?: string) => ProjectKanbanTask[];\n\n  // Helpers\n  getActiveProjects: () => Project[];\n  getArchivedProjects: () => Project[];\n}\n\nconst ProjectContext = createContext<ProjectContextValue | null>(null);\n\n// ============================================================================\n// Provider\n// ============================================================================\n\ninterface ProjectProviderProps {\n  children: ReactNode;\n}\n\nexport function ProjectProvider({ children }: ProjectProviderProps) {\n  const [state, dispatch] = useReducer(projectReducer, createDefaultState());\n\n  // Load from localStorage on mount\n  useEffect(() => {\n    try {\n      const saved = localStorage.getItem(STORAGE_KEY);\n      if (saved) {\n        const parsed = JSON.parse(saved);\n        // Ensure Claw AI OS project exists\n        const currentProjects = parsed.projects || [];\n        const hasOpenClawOS = currentProjects.some((p: Project) => p.id === 'openclaw-os');\n\n        if (!hasOpenClawOS) {\n          parsed.projects = [OPENCLAW_OS_PROJECT, ...currentProjects];\n        }\n        dispatch({ type: 'SET_STATE', payload: parsed });\n      } else {\n        dispatch({ type: 'SET_LOADED' });\n      }\n    } catch (e) {\n      console.error('Failed to load projects from localStorage:', e);\n      dispatch({ type: 'SET_LOADED' });\n    }\n  }, []);\n\n  // Save to localStorage on changes\n  useEffect(() => {\n    if (!state.isLoaded) return;\n\n    const timeoutId = setTimeout(() => {\n      try {\n        localStorage.setItem(STORAGE_KEY, JSON.stringify(state));\n      } catch (e) {\n        console.error('Failed to save projects to localStorage:', e);\n      }\n    }, 500);\n\n    return () => clearTimeout(timeoutId);\n  }, [state]);\n\n  // Project operations\n  const setActiveProject = useCallback((id: string | null) => {\n    dispatch({ type: 'SET_ACTIVE_PROJECT', payload: id });\n  }, []);\n\n  const createProject = useCallback((data: { name: string; description?: string; color: string }) => {\n    dispatch({ type: 'CREATE_PROJECT', payload: { ...data, status: 'active' } });\n  }, []);\n\n  const updateProject = useCallback((id: string, updates: Partial<Project>) => {\n    dispatch({ type: 'UPDATE_PROJECT', payload: { id, updates } });\n  }, []);\n\n  const archiveProject = useCallback((id: string) => {\n    dispatch({ type: 'ARCHIVE_PROJECT', payload: id });\n  }, []);\n\n  const deleteProject = useCallback((id: string) => {\n    dispatch({ type: 'DELETE_PROJECT', payload: id });\n  }, []);\n\n  // Artifact operations\n  const addArtifact = useCallback((projectId: string, artifact: Omit<ProjectArtifact, 'id' | 'createdAt' | 'updatedAt' | 'version'>) => {\n    dispatch({ type: 'ADD_ARTIFACT', payload: { projectId, artifact } });\n  }, []);\n\n  const updateArtifact = useCallback((projectId: string, artifactId: string, updates: Partial<ProjectArtifact>) => {\n    dispatch({ type: 'UPDATE_ARTIFACT', payload: { projectId, artifactId, updates } });\n  }, []);\n\n  const deleteArtifact = useCallback((projectId: string, artifactId: string) => {\n    dispatch({ type: 'DELETE_ARTIFACT', payload: { projectId, artifactId } });\n  }, []);\n\n  const getArtifacts = useCallback((projectId?: string) => {\n    const id = projectId || state.activeProjectId;\n    const project = state.projects.find((p) => p.id === id);\n    return project?.artifacts || [];\n  }, [state.projects, state.activeProjectId]);\n\n  // Task operations\n  const addTask = useCallback((projectId: string, task: Omit<ProjectKanbanTask, 'id' | 'createdAt' | 'updatedAt'>) => {\n    dispatch({ type: 'ADD_TASK', payload: { projectId, task } });\n  }, []);\n\n  const updateTask = useCallback((projectId: string, taskId: string, updates: Partial<ProjectKanbanTask>) => {\n    dispatch({ type: 'UPDATE_TASK', payload: { projectId, taskId, updates } });\n  }, []);\n\n  const deleteTask = useCallback((projectId: string, taskId: string) => {\n    dispatch({ type: 'DELETE_TASK', payload: { projectId, taskId } });\n  }, []);\n\n  const moveTask = useCallback((projectId: string, taskId: string, status: ProjectKanbanTask['status']) => {\n    dispatch({ type: 'MOVE_TASK', payload: { projectId, taskId, status } });\n  }, []);\n\n  const getTasks = useCallback((projectId?: string) => {\n    const id = projectId || state.activeProjectId;\n    const project = state.projects.find((p) => p.id === id);\n    return project?.tasks || [];\n  }, [state.projects, state.activeProjectId]);\n\n  // Helpers\n  const getActiveProjects = useCallback(() => {\n    return state.projects.filter((p) => p.status === 'active');\n  }, [state.projects]);\n\n  const getArchivedProjects = useCallback(() => {\n    return state.projects.filter((p) => p.status === 'archived');\n  }, [state.projects]);\n\n  const activeProject = state.projects.find((p) => p.id === state.activeProjectId) || null;\n\n  const value: ProjectContextValue = {\n    projects: state.projects,\n    activeProject,\n    activeProjectId: state.activeProjectId,\n    isLoaded: state.isLoaded,\n    setActiveProject,\n    createProject,\n    updateProject,\n    archiveProject,\n    deleteProject,\n    addArtifact,\n    updateArtifact,\n    deleteArtifact,\n    getArtifacts,\n    addTask,\n    updateTask,\n    deleteTask,\n    moveTask,\n    getTasks,\n    getActiveProjects,\n    getArchivedProjects,\n  };\n\n  return (\n    <ProjectContext.Provider value={value}>\n      {children}\n    </ProjectContext.Provider>\n  );\n}\n\n// ============================================================================\n// Hook\n// ============================================================================\n\nexport function useProject() {\n  const context = useContext(ProjectContext);\n  if (!context) {\n    throw new Error('useProject must be used within a ProjectProvider');\n  }\n  return context;\n}\n\n// End of Project Context\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 2636, "column": 0}, "map": {"version":3,"sources":["file:///Users/jamesspalding/OpenClaw-OS/src/context/ControlCenterContext.tsx"],"sourcesContent":["'use client';\n\nimport React, { createContext, useContext, useState, useCallback, ReactNode } from 'react';\n\ninterface ControlCenterContextType {\n  isOpen: boolean;\n  open: () => void;\n  close: () => void;\n  toggle: () => void;\n}\n\nconst ControlCenterContext = createContext<ControlCenterContextType | null>(null);\n\nexport function useControlCenter() {\n  const context = useContext(ControlCenterContext);\n  if (!context) {\n    throw new Error('useControlCenter must be used within ControlCenterProvider');\n  }\n  return context;\n}\n\ninterface ControlCenterProviderProps {\n  children: ReactNode;\n}\n\nexport function ControlCenterProvider({ children }: ControlCenterProviderProps) {\n  const [isOpen, setIsOpen] = useState(false);\n\n  const open = useCallback(() => setIsOpen(true), []);\n  const close = useCallback(() => setIsOpen(false), []);\n  const toggle = useCallback(() => setIsOpen((prev) => !prev), []);\n\n  return (\n    <ControlCenterContext.Provider value={{ isOpen, open, close, toggle }}>\n      {children}\n    </ControlCenterContext.Provider>\n  );\n}\n"],"names":[],"mappings":";;;;;;;AAEA;;;AAFA;;AAWA,MAAM,qCAAuB,IAAA,uXAAa,EAAkC;AAErE,SAAS;;IACd,MAAM,UAAU,IAAA,oXAAU,EAAC;IAC3B,IAAI,CAAC,SAAS;QACZ,MAAM,IAAI,MAAM;IAClB;IACA,OAAO;AACT;GANgB;AAYT,SAAS,sBAAsB,EAAE,QAAQ,EAA8B;;IAC5E,MAAM,CAAC,QAAQ,UAAU,GAAG,IAAA,kXAAQ,EAAC;IAErC,MAAM,OAAO,IAAA,qXAAW;mDAAC,IAAM,UAAU;kDAAO,EAAE;IAClD,MAAM,QAAQ,IAAA,qXAAW;oDAAC,IAAM,UAAU;mDAAQ,EAAE;IACpD,MAAM,SAAS,IAAA,qXAAW;qDAAC,IAAM;6DAAU,CAAC,OAAS,CAAC;;oDAAO,EAAE;IAE/D,qBACE,sYAAC,qBAAqB,QAAQ;QAAC,OAAO;YAAE;YAAQ;YAAM;YAAO;QAAO;kBACjE;;;;;;AAGP;IAZgB;KAAA"}},
    {"offset": {"line": 2697, "column": 0}, "map": {"version":3,"sources":["file:///Users/jamesspalding/OpenClaw-OS/src/context/CanvasContext.tsx"],"sourcesContent":["'use client';\n\n/**\n * CanvasContext - Provides global access to canvas state and AI control\n *\n * Allows Claw AI to control the canvas from:\n * - Voice input on the canvas page\n * - Chat popup from the dock\n * - Main chat page\n */\n\nimport React, { createContext, useContext, useState, useCallback, useRef } from 'react';\nimport {\n  CanvasToolExecutor,\n  generateCanvasContext,\n  type CanvasState,\n  type CanvasToolResult,\n} from '@/lib/claw-ai/canvas-tools';\nimport { describeCanvas } from '@/lib/canvas/grid-system';\n\n// ============================================================================\n// Types\n// ============================================================================\n\ninterface CanvasContextValue {\n  // Canvas state\n  canvasState: CanvasState | null;\n  isCanvasActive: boolean;\n  activeCanvasId: string | null;\n\n  // State management\n  setCanvasState: (state: CanvasState) => void;\n  registerCanvas: (canvasId: string, initialState: CanvasState) => void;\n  unregisterCanvas: () => void;\n\n  // AI tool execution\n  executeCanvasTool: (toolName: string, params: Record<string, unknown>) => Promise<CanvasToolResult>;\n  getCanvasContext: () => string;\n  describeCurrentCanvas: () => string;\n\n  // Mindmap helpers\n  addMindmapBranch: (parentId: string, content: string, direction: string) => Promise<CanvasToolResult>;\n  expandMindmap: (centerContent: string, branches: string[]) => Promise<CanvasToolResult[]>;\n}\n\nconst CanvasContext = createContext<CanvasContextValue | null>(null);\n\n// ============================================================================\n// Provider\n// ============================================================================\n\nexport function CanvasProvider({ children }: { children: React.ReactNode }) {\n  const [canvasState, setCanvasStateInternal] = useState<CanvasState | null>(null);\n  const [activeCanvasId, setActiveCanvasId] = useState<string | null>(null);\n\n  // Ref for the executor so it has access to latest state\n  const executorRef = useRef<CanvasToolExecutor | null>(null);\n\n  // Update executor when state changes\n  const setCanvasState = useCallback((state: CanvasState) => {\n    setCanvasStateInternal(state);\n\n    // Update executor's state getter\n    if (executorRef.current) {\n      executorRef.current = new CanvasToolExecutor({\n        getCanvasState: () => state,\n        setCanvasState: (newState) => setCanvasStateInternal(newState),\n      });\n    }\n  }, []);\n\n  // Register a canvas (when canvas page mounts)\n  const registerCanvas = useCallback((canvasId: string, initialState: CanvasState) => {\n    setActiveCanvasId(canvasId);\n    setCanvasStateInternal(initialState);\n\n    executorRef.current = new CanvasToolExecutor({\n      getCanvasState: () => initialState,\n      setCanvasState: (newState) => setCanvasStateInternal(newState),\n    });\n  }, []);\n\n  // Unregister canvas (when canvas page unmounts)\n  const unregisterCanvas = useCallback(() => {\n    setActiveCanvasId(null);\n    setCanvasStateInternal(null);\n    executorRef.current = null;\n  }, []);\n\n  // Execute a canvas tool\n  const executeCanvasTool = useCallback(\n    async (toolName: string, params: Record<string, unknown>): Promise<CanvasToolResult> => {\n      if (!executorRef.current || !canvasState) {\n        return {\n          success: false,\n          message: 'No canvas is currently active. Please open a canvas first.',\n        };\n      }\n\n      // Update executor with latest state before execution\n      executorRef.current = new CanvasToolExecutor({\n        getCanvasState: () => canvasState,\n        setCanvasState: (newState) => setCanvasStateInternal(newState),\n      });\n\n      return executorRef.current.execute(toolName, params);\n    },\n    [canvasState]\n  );\n\n  // Get canvas context for AI system prompt\n  const getCanvasContext = useCallback((): string => {\n    if (!canvasState) {\n      return 'No canvas is currently active.';\n    }\n    return generateCanvasContext(canvasState);\n  }, [canvasState]);\n\n  // Describe current canvas state\n  const describeCurrentCanvas = useCallback((): string => {\n    if (!canvasState) {\n      return 'No canvas is currently active.';\n    }\n    const description = describeCanvas(canvasState.nodes, canvasState.edges);\n    return description.spatialLayout;\n  }, [canvasState]);\n\n  // Helper: Add a mindmap branch\n  const addMindmapBranch = useCallback(\n    async (parentId: string, content: string, direction: string): Promise<CanvasToolResult> => {\n      return executeCanvasTool('create_mindmap_branch', {\n        parentNodeId: parentId,\n        content,\n        direction,\n      });\n    },\n    [executeCanvasTool]\n  );\n\n  // Helper: Expand mindmap with multiple branches\n  const expandMindmap = useCallback(\n    async (centerContent: string, branches: string[]): Promise<CanvasToolResult[]> => {\n      if (!canvasState) {\n        return [{ success: false, message: 'No canvas active' }];\n      }\n\n      const results: CanvasToolResult[] = [];\n\n      // Create center node if not exists\n      let centerNodeId: string;\n      const existingCenter = canvasState.nodes.find((n) =>\n        n.content.toLowerCase().includes(centerContent.toLowerCase())\n      );\n\n      if (existingCenter) {\n        centerNodeId = existingCenter.id;\n      } else {\n        const createResult = await executeCanvasTool('create_node', {\n          type: 'mindmap',\n          position: 'E5', // Center of visible area\n          content: centerContent,\n          color: 'purple',\n        });\n        results.push(createResult);\n        if (!createResult.success) return results;\n        centerNodeId = (createResult.data as { nodeId: string }).nodeId;\n      }\n\n      // Add branches in different directions\n      const directions = ['right', 'below-right', 'below', 'below-left', 'left', 'above-left', 'above', 'above-right'];\n      for (let i = 0; i < branches.length; i++) {\n        const direction = directions[i % directions.length];\n        const result = await addMindmapBranch(centerNodeId, branches[i], direction);\n        results.push(result);\n      }\n\n      return results;\n    },\n    [canvasState, executeCanvasTool, addMindmapBranch]\n  );\n\n  const value: CanvasContextValue = {\n    canvasState,\n    isCanvasActive: canvasState !== null,\n    activeCanvasId,\n    setCanvasState,\n    registerCanvas,\n    unregisterCanvas,\n    executeCanvasTool,\n    getCanvasContext,\n    describeCurrentCanvas,\n    addMindmapBranch,\n    expandMindmap,\n  };\n\n  return (\n    <CanvasContext.Provider value={value}>\n      {children}\n    </CanvasContext.Provider>\n  );\n}\n\n// ============================================================================\n// Hook\n// ============================================================================\n\nexport function useCanvasContext() {\n  const context = useContext(CanvasContext);\n  if (!context) {\n    throw new Error('useCanvasContext must be used within a CanvasProvider');\n  }\n  return context;\n}\n\n// Optional hook that returns null if not in provider (for components that may be outside)\nexport function useCanvasContextOptional() {\n  return useContext(CanvasContext);\n}\n"],"names":[],"mappings":"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"}}]
}