{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///Users/jamesspalding/OpenClaw-OS/src/app/music/MusicClient.tsx"],"sourcesContent":["'use client';\n\nimport { useState, useMemo, useEffect, useRef, useCallback } from 'react';\nimport { motion, AnimatePresence } from 'framer-motion';\nimport BlurFade from '@/components/magicui/blur-fade';\nimport { List, Lock, Music2, Eye, EyeOff, Settings, ChevronLeft, Play, Pause, Disc, Home, Maximize2, Minimize2, Sparkles, Loader2 } from 'lucide-react';\nimport { tracks as publicTracks, isVideoTrack, type Track } from '@/data/tracks';\nimport { useMusic } from '@/context/MusicContext';\nimport { PageTransition } from '@/components/ios';\nimport { PrivateMusicProvider, usePrivateMusic, type PrivateTrack } from '@/context/PrivateMusicContext';\nimport { IPodAuthScreen } from '@/components/music/iPodAuthScreen';\nimport { PrivateMusicAdmin } from '@/components/music/PrivateMusicAdmin';\nimport { VinylCarousel, type Album } from '@/components/music/VinylCarousel';\nimport { useFeatureAccess } from '@/hooks/useFeatureAccess';\nimport { useMusicPlayerMorph } from '@/hooks/useMusicPlayerMorph';\nimport { ExpandedNowPlaying } from '@/components/music/ExpandedNowPlaying';\nimport { LibraryBrowser } from '@/components/music/LibraryBrowser';\nimport { AdminTracksPanel, AdminCollaboratorsPanel } from '@/components/music/AdminPanels';\nimport { useMusicGeneration, MUSIC_PRESETS } from '@/hooks/useMusicGeneration';\n\nconst BLUR_FADE_DELAY = 0.04;\n\n// View types for the iPod screen\ntype ViewType = 'carousel' | 'album' | 'nowPlaying' | 'playlist' | 'auth' | 'create';\n\n// Inner component that uses the private music context\nfunction MusicPageContent() {\n  const {\n    currentTrack,\n    isPlaying,\n    currentTime,\n    duration,\n    isVideo,\n    togglePlay,\n    skipToNext,\n    skipToPrevious,\n    selectTrack,\n    setVideoElement,\n  } = useMusic();\n\n  // Expandable player morph state\n  const {\n    morphProgress,\n    morphState,\n    isDragging,\n    isMobile,\n    ipodScale,\n    ipodBorderRadius,\n    panelOpacity,\n    expand,\n    collapse,\n    toggleExpanded,\n  } = useMusicPlayerMorph();\n\n  const isExpanded = morphProgress > 0.5;\n  const showPanels = morphProgress > 0.3 && !isMobile;\n\n  // Ref for video element\n  const videoRef = useRef<HTMLVideoElement>(null);\n\n  // Register video element with music context when it changes\n  useEffect(() => {\n    if (isVideo && videoRef.current) {\n      setVideoElement(videoRef.current);\n    }\n    return () => {\n      if (isVideo) {\n        setVideoElement(null);\n      }\n    };\n  }, [isVideo, setVideoElement, currentTrack.id]);\n\n  const {\n    hasPrivateAccess,\n    isCollaborator,\n    isAdmin,\n    privateTracks,\n    collaborator,\n    isLoadingTracks,\n  } = usePrivateMusic();\n\n  // Check if user is owner/admin (has full access to music admin)\n  const { hasAccess: hasOwnerAccess } = useFeatureAccess('privateMusic');\n\n  const [currentView, setCurrentView] = useState<ViewType>('carousel');\n  const [selectedAlbum, setSelectedAlbum] = useState<Album | null>(null);\n  const [imageError, setImageError] = useState(false);\n  const [showAdminPanel, setShowAdminPanel] = useState(false);\n  const [adminMode, setAdminMode] = useState(false);\n  // Toggle between public and private view (for collaborators who have access)\n  const [viewingPrivate, setViewingPrivate] = useState(false);\n\n  // Create mode state\n  const [createPrompt, setCreatePrompt] = useState('');\n  const [createDuration, setCreateDuration] = useState(30);\n  const [showAdvancedCreate, setShowAdvancedCreate] = useState(false);\n  const [createLyrics, setCreateLyrics] = useState('');\n  const [createBpm, setCreateBpm] = useState<number | undefined>();\n  const [createKey, setCreateKey] = useState<string | undefined>();\n\n  // Music generation hook\n  const {\n    generate,\n    isGenerating,\n    progress,\n    error: generateError,\n    result: generateResult,\n    reset: resetGeneration,\n  } = useMusicGeneration();\n\n  // Screen container ref for animations\n  const screenRef = useRef<HTMLDivElement>(null);\n\n  // Legacy compatibility\n  const showPlaylist = currentView === 'playlist';\n  const showAuthScreen = currentView === 'auth';\n\n  // Auto-switch to private view when user has access and private tracks exist\n  useEffect(() => {\n    if (hasPrivateAccess && privateTracks.length > 0 && !viewingPrivate) {\n      setViewingPrivate(true);\n    }\n  }, [hasPrivateAccess, privateTracks.length, viewingPrivate]);\n\n  // Determine which tracks to show based on view mode\n  const tracks: Track[] = useMemo(() => {\n    if (viewingPrivate && hasPrivateAccess && privateTracks.length > 0) {\n      return privateTracks.map((pt: PrivateTrack) => ({\n        id: pt.id,\n        title: pt.title,\n        artist: pt.artist,\n        album: pt.album,\n        albumArt: pt.albumArt,\n        audioSrc: pt.audioSrc,\n        lyrics: pt.lyrics,\n      }));\n    }\n    return publicTracks;\n  }, [viewingPrivate, hasPrivateAccess, privateTracks]);\n\n  // Reset to first track when switching modes\n  useEffect(() => {\n    if (tracks.length > 0 && !tracks.find(t => t.id === currentTrack.id)) {\n      selectTrack(tracks[0]);\n    }\n  }, [tracks, currentTrack.id, selectTrack]);\n\n  const formatTime = (time: number) => {\n    if (isNaN(time)) return '0:00';\n    const minutes = Math.floor(time / 60);\n    const seconds = Math.floor(time % 60);\n    return `${minutes}:${seconds.toString().padStart(2, '0')}`;\n  };\n\n  const progressPercent = duration ? (currentTime / duration) * 100 : 0;\n\n  // Handle opening the auth screen\n  const handleOpenAuth = () => {\n    setCurrentView('auth');\n  };\n\n  // Handle closing the auth screen\n  const handleCloseAuth = () => {\n    setCurrentView('carousel');\n  };\n\n  // Handle successful auth\n  const handleAuthSuccess = () => {\n    setCurrentView('carousel');\n    // Refresh the page to get updated auth state\n    window.location.reload();\n  };\n\n  // Handle album selection from carousel\n  const handleSelectAlbum = (album: Album) => {\n    setSelectedAlbum(album);\n    setCurrentView('album');\n  };\n\n  // Handle track selection - go to now playing\n  const handleSelectTrackFromAlbum = (track: Track) => {\n    selectTrack(track);\n    setCurrentView('nowPlaying');\n  };\n\n  // Navigate back based on current view\n  const handleBack = () => {\n    if (currentView === 'nowPlaying') {\n      setCurrentView('album');\n    } else if (currentView === 'album') {\n      setCurrentView('carousel');\n      setSelectedAlbum(null);\n    } else if (currentView === 'playlist') {\n      setCurrentView('carousel');\n    } else if (currentView === 'auth') {\n      handleCloseAuth();\n    } else if (currentView === 'create') {\n      resetGeneration();\n      setCurrentView('carousel');\n    }\n  };\n\n  // Get the back button label\n  const getMenuLabel = () => {\n    if (currentView === 'auth') return 'BACK';\n    if (currentView === 'nowPlaying') return 'ALBUM';\n    if (currentView === 'album') return 'BACK';\n    if (currentView === 'playlist') return 'BACK';\n    if (currentView === 'create') return 'BACK';\n    return 'MENU';\n  };\n\n  return (\n    <PageTransition>\n      <div className=\"min-h-screen bg-background flex flex-col items-center justify-start\">\n        {/* Private Session Indicator - shown when viewing private tracks */}\n        {viewingPrivate && hasPrivateAccess && collaborator && (\n          <BlurFade delay={0.05}>\n            <div className=\"fixed top-6 left-6 z-50\">\n              <div className=\"flex items-center gap-2 px-3 py-1.5 rounded-full bg-emerald-100 dark:bg-emerald-900/30 border border-emerald-200 dark:border-emerald-800\">\n                <Music2 className=\"w-3.5 h-3.5 text-emerald-600 dark:text-emerald-400\" />\n                <span className=\"text-xs font-medium text-emerald-700 dark:text-emerald-300\">\n                  {collaborator.displayName}{isAdmin && ' (Admin)'}\n                </span>\n                <button\n                  onClick={() => setViewingPrivate(false)}\n                  className=\"ml-1 p-0.5 rounded-full hover:bg-emerald-200 dark:hover:bg-emerald-800 transition-colors\"\n                  title=\"Switch to public tracks\"\n                >\n                  <Eye className=\"w-3 h-3 text-emerald-600 dark:text-emerald-400\" />\n                </button>\n                {isAdmin && (\n                  <button\n                    onClick={() => setShowAdminPanel(true)}\n                    className=\"ml-1 p-0.5 rounded-full hover:bg-emerald-200 dark:hover:bg-emerald-800 transition-colors\"\n                    title=\"Admin settings\"\n                  >\n                    <Settings className=\"w-3 h-3 text-emerald-600 dark:text-emerald-400\" />\n                  </button>\n                )}\n              </div>\n            </div>\n          </BlurFade>\n        )}\n\n        {/* Viewing public tracks as collaborator - show toggle to go back to private */}\n        {!viewingPrivate && hasPrivateAccess && privateTracks.length > 0 && (\n          <BlurFade delay={0.1}>\n            <button\n              onClick={() => setViewingPrivate(true)}\n              className=\"fixed top-6 left-6 z-50 flex items-center gap-2 px-3 py-1.5 rounded-full bg-zinc-100 dark:bg-zinc-800 hover:bg-zinc-200 dark:hover:bg-zinc-700 transition-colors group\"\n              title=\"Switch to private tracks\"\n            >\n              <EyeOff className=\"w-3.5 h-3.5 text-zinc-500 group-hover:text-zinc-700 dark:group-hover:text-zinc-300\" />\n              <span className=\"text-xs text-zinc-500 group-hover:text-zinc-700 dark:group-hover:text-zinc-300\">\n                Private\n              </span>\n            </button>\n          </BlurFade>\n        )}\n\n        {/* Background blur overlay when expanded */}\n        <motion.div\n          className=\"fixed inset-0 bg-black/60 backdrop-blur-sm pointer-events-none z-10\"\n          initial={{ opacity: 0 }}\n          animate={{ opacity: isExpanded ? 1 : 0 }}\n          transition={{ duration: 0.3, ease: 'easeOut' }}\n        />\n\n        {/* iPod Classic Container with Expandable Panels */}\n        <div className=\"flex flex-col items-center pt-16 pb-32 px-4 relative z-20\">\n          <BlurFade delay={BLUR_FADE_DELAY}>\n            <div className=\"relative flex items-center justify-center\">\n              {/* Left Panel - Library Browser OR Admin Panel (Desktop only) */}\n              {!isMobile && (\n                <motion.div\n                  className=\"absolute right-full mr-6 w-[320px] h-[520px]\"\n                  initial={{ opacity: 0, x: 50, scale: 0.95 }}\n                  animate={{\n                    opacity: showPanels ? 1 : 0,\n                    x: showPanels ? 0 : 50,\n                    scale: showPanels ? 1 : 0.95,\n                    pointerEvents: showPanels ? 'auto' : 'none',\n                  }}\n                  transition={{\n                    type: 'spring',\n                    stiffness: 400,\n                    damping: 35,\n                    mass: 0.8,\n                  }}\n                >\n                  <div className=\"h-full rounded-2xl bg-gradient-to-b from-[#f5f5f5] to-[#d4d4d4] dark:from-zinc-800 dark:to-zinc-900 border border-white/20 overflow-hidden shadow-2xl\">\n                    {adminMode ? (\n                      <AdminTracksPanel />\n                    ) : (\n                      <LibraryBrowser onClose={collapse} />\n                    )}\n                  </div>\n                </motion.div>\n              )}\n\n              {/* Right Panel - Expanded Now Playing OR Admin Panel (Desktop only) */}\n              {!isMobile && (\n                <motion.div\n                  className=\"absolute left-full ml-6 w-[320px] h-[520px]\"\n                  initial={{ opacity: 0, x: -50, scale: 0.95 }}\n                  animate={{\n                    opacity: showPanels ? 1 : 0,\n                    x: showPanels ? 0 : -50,\n                    scale: showPanels ? 1 : 0.95,\n                    pointerEvents: showPanels ? 'auto' : 'none',\n                  }}\n                  transition={{\n                    type: 'spring',\n                    stiffness: 400,\n                    damping: 35,\n                    mass: 0.8,\n                  }}\n                >\n                  <div className=\"h-full rounded-2xl bg-gradient-to-b from-[#f5f5f5] to-[#d4d4d4] dark:from-zinc-800 dark:to-zinc-900 border border-white/20 overflow-hidden shadow-2xl\">\n                    {adminMode ? (\n                      <AdminCollaboratorsPanel />\n                    ) : (\n                      <ExpandedNowPlaying />\n                    )}\n                  </div>\n                </motion.div>\n              )}\n\n              {/* The iPod itself - with morph capability */}\n              <motion.div\n                className=\"relative\"\n                style={{\n                  scale: ipodScale,\n                }}\n                transition={{ type: 'spring', stiffness: 400, damping: 30 }}\n              >\n                {/* Floating buttons removed - now in dock */}\n\n                <motion.div\n                  className=\"bg-gradient-to-b from-[#f5f5f5] to-[#d4d4d4] dark:from-zinc-800 dark:to-zinc-900 rounded-[32px] p-4 shadow-[0_25px_50px_-12px_rgba(0,0,0,0.4)] border border-white/20 w-[300px] max-w-[calc(100vw-32px)]\"\n                  initial={{ y: 20, opacity: 0 }}\n                  animate={{ y: 0, opacity: 1 }}\n                  style={{\n                    borderRadius: ipodBorderRadius,\n                    boxShadow: isDragging\n                      ? '0 35px 60px -15px rgba(0,0,0,0.5), 0 0 40px rgba(250,204,21,0.15)'\n                      : '0 25px 50px -12px rgba(0,0,0,0.4)',\n                  }}\n                  transition={{ duration: 0.6, ease: 'easeOut' }}\n                  whileHover={!isDragging ? { y: -2 } : undefined}\n                >\n                  {/* Screen - Fixed height for all views */}\n                  <div\n                    ref={screenRef}\n                    className=\"bg-[#8fa39a] dark:bg-[#2a3a35] rounded-lg p-3 mb-4 shadow-inner border-2 border-[#6b7c74] dark:border-zinc-700 relative overflow-hidden cursor-pointer min-h-[240px]\"\n                    onClick={() => {\n                      // Only open auth if not authenticated and in carousel view\n                      if (!hasPrivateAccess && currentView === 'carousel') {\n                        handleOpenAuth();\n                      }\n                    }}\n                  >\n                    <AnimatePresence mode=\"wait\">\n                      {/* Auth Screen */}\n                      {currentView === 'auth' ? (\n                        <motion.div\n                          key=\"auth\"\n                          initial={{ opacity: 0, scale: 0.95 }}\n                          animate={{ opacity: 1, scale: 1 }}\n                          exit={{ opacity: 0, scale: 0.95 }}\n                          transition={{ type: 'spring', stiffness: 400, damping: 30 }}\n                        >\n                          <IPodAuthScreen\n                            onClose={handleCloseAuth}\n                            onSuccess={handleAuthSuccess}\n                          />\n                        </motion.div>\n                      ) : currentView === 'carousel' ? (\n                        /* Vinyl Carousel View */\n                        <motion.div\n                          key=\"carousel\"\n                          initial={{ opacity: 0, scale: 0.95 }}\n                          animate={{ opacity: 1, scale: 1 }}\n                          exit={{ opacity: 0, scale: 0.95 }}\n                          transition={{ duration: 0.2 }}\n                          className=\"min-h-[200px] flex items-center justify-center\"\n                        >\n                          <VinylCarousel\n                            tracks={tracks}\n                            currentTrack={currentTrack}\n                            isPlaying={isPlaying}\n                            onSelectAlbum={handleSelectAlbum}\n                            onSelectTrack={handleSelectTrackFromAlbum}\n                            onTogglePlay={togglePlay}\n                          />\n                        </motion.div>\n                      ) : currentView === 'album' && selectedAlbum ? (\n                        /* Album Detail View - Shows tracks in the selected album */\n                        <motion.div\n                          key=\"album\"\n                          initial={{ x: 100, opacity: 0 }}\n                          animate={{ x: 0, opacity: 1 }}\n                          exit={{ x: -100, opacity: 0 }}\n                          transition={{ duration: 0.2 }}\n                          className=\"min-h-[200px]\"\n                        >\n                          {/* Album header */}\n                          <div className=\"flex items-center gap-2 mb-3\">\n                            <div className=\"w-12 h-12 rounded overflow-hidden shadow-md flex-shrink-0\">\n                              {selectedAlbum.albumArt ? (\n                                // eslint-disable-next-line @next/next/no-img-element\n                                <img\n                                  src={selectedAlbum.albumArt}\n                                  alt={selectedAlbum.name}\n                                  className=\"w-full h-full object-cover\"\n                                />\n                              ) : (\n                                <div className=\"w-full h-full bg-[#697d75] dark:bg-[#1e2a26] flex items-center justify-center text-xl\">\n                                  ðŸŽµ\n                                </div>\n                              )}\n                            </div>\n                            <div className=\"flex-1 min-w-0\">\n                              <div className=\"text-xs font-bold text-[#1a2420] dark:text-[#8fa39a] truncate font-mono\">\n                                {selectedAlbum.name}\n                              </div>\n                              <div className=\"text-[10px] text-[#3a4a45] dark:text-[#5a6a65] truncate font-mono\">\n                                {selectedAlbum.artist}\n                              </div>\n                            </div>\n                          </div>\n\n                          {/* Track list */}\n                          <div className=\"space-y-1 max-h-[140px] overflow-y-auto\">\n                            {selectedAlbum.tracks.map((track, index) => (\n                              <button\n                                key={track.id}\n                                onClick={() => handleSelectTrackFromAlbum(track)}\n                                className={`w-full text-left p-2 rounded transition-colors ${track.id === currentTrack.id\n                                    ? 'bg-[#1a2420] dark:bg-[#8fa39a] text-[#8fa39a] dark:text-[#1a2420]'\n                                    : 'hover:bg-[#697d75] dark:hover:bg-[#1e2a26] text-[#1a2420] dark:text-[#8fa39a]'\n                                  }`}\n                              >\n                                <div className=\"flex items-center gap-2\">\n                                  <span className=\"text-xs font-mono opacity-50 w-4\">{index + 1}</span>\n                                  <div className=\"flex-1 min-w-0\">\n                                    <div className=\"text-xs font-medium truncate font-mono\">{track.title}</div>\n                                  </div>\n                                  {track.id === currentTrack.id && isPlaying && (\n                                    <div className=\"flex gap-0.5\">\n                                      <motion.div\n                                        className=\"w-0.5 h-3 bg-current rounded-full\"\n                                        animate={{ scaleY: [0.3, 1, 0.3] }}\n                                        transition={{ duration: 0.5, repeat: Infinity, delay: 0 }}\n                                      />\n                                      <motion.div\n                                        className=\"w-0.5 h-3 bg-current rounded-full\"\n                                        animate={{ scaleY: [1, 0.3, 1] }}\n                                        transition={{ duration: 0.5, repeat: Infinity, delay: 0.1 }}\n                                      />\n                                      <motion.div\n                                        className=\"w-0.5 h-3 bg-current rounded-full\"\n                                        animate={{ scaleY: [0.5, 1, 0.5] }}\n                                        transition={{ duration: 0.5, repeat: Infinity, delay: 0.2 }}\n                                      />\n                                    </div>\n                                  )}\n                                </div>\n                              </button>\n                            ))}\n                          </div>\n                        </motion.div>\n                      ) : currentView === 'playlist' ? (\n                        /* All Tracks Playlist View */\n                        <motion.div\n                          key=\"playlist\"\n                          initial={{ x: 100, opacity: 0 }}\n                          animate={{ x: 0, opacity: 1 }}\n                          exit={{ x: -100, opacity: 0 }}\n                          transition={{ duration: 0.2 }}\n                          className=\"min-h-[200px]\"\n                        >\n                          <div className=\"text-[10px] font-bold text-[#1a2420] dark:text-[#8fa39a] uppercase tracking-wider mb-2 font-mono\">\n                            All Tracks\n                          </div>\n                          <div className=\"space-y-1 max-h-[180px] overflow-y-auto\">\n                            {tracks.map((track, index) => (\n                              <button\n                                key={track.id}\n                                onClick={() => handleSelectTrackFromAlbum(track)}\n                                className={`w-full text-left p-2 rounded transition-colors ${track.id === currentTrack.id\n                                    ? 'bg-[#1a2420] dark:bg-[#8fa39a] text-[#8fa39a] dark:text-[#1a2420]'\n                                    : 'hover:bg-[#697d75] dark:hover:bg-[#1e2a26] text-[#1a2420] dark:text-[#8fa39a]'\n                                  }`}\n                              >\n                                <div className=\"flex items-center gap-2\">\n                                  <span className=\"text-xs font-mono opacity-50\">{index + 1}</span>\n                                  <div className=\"flex-1 min-w-0\">\n                                    <div className=\"text-xs font-medium truncate font-mono\">{track.title}</div>\n                                    <div className=\"text-[10px] opacity-70 truncate font-mono\">{track.artist}</div>\n                                  </div>\n                                </div>\n                              </button>\n                            ))}\n                          </div>\n                        </motion.div>\n                      ) : currentView === 'create' ? (\n                        /* Create View - AI Music Generation */\n                        <motion.div\n                          key=\"create\"\n                          initial={{ x: 100, opacity: 0 }}\n                          animate={{ x: 0, opacity: 1 }}\n                          exit={{ x: -100, opacity: 0 }}\n                          transition={{ duration: 0.2 }}\n                          className=\"min-h-[200px]\"\n                        >\n                          {isGenerating ? (\n                            /* Generating State */\n                            <div className=\"flex flex-col items-center justify-center py-4\">\n                              <motion.div\n                                className=\"w-20 h-20 rounded-full bg-gradient-to-br from-violet-500 to-purple-600 flex items-center justify-center mb-4\"\n                                animate={{ rotate: 360 }}\n                                transition={{ duration: 3, repeat: Infinity, ease: \"linear\" }}\n                              >\n                                <Sparkles className=\"w-8 h-8 text-white\" />\n                              </motion.div>\n                              <div className=\"text-xs text-[#1a2420] dark:text-[#8fa39a] font-mono mb-2\">\n                                Creating your track...\n                              </div>\n                              <div className=\"w-full max-w-[200px] h-2 bg-[#5a6a65]/30 dark:bg-[#1a2420]/50 rounded-full overflow-hidden\">\n                                <motion.div\n                                  className=\"h-full bg-violet-500\"\n                                  initial={{ width: 0 }}\n                                  animate={{ width: `${progress}%` }}\n                                  transition={{ duration: 0.3 }}\n                                />\n                              </div>\n                              <div className=\"text-[10px] text-[#3a4a45] dark:text-[#5a6a65] mt-1 font-mono\">\n                                {progress}% complete\n                              </div>\n                              <button\n                                onClick={() => resetGeneration()}\n                                className=\"mt-3 text-[10px] text-red-500 hover:text-red-400 font-mono\"\n                              >\n                                Cancel\n                              </button>\n                            </div>\n                          ) : generateResult ? (\n                            /* Success State */\n                            <div className=\"flex flex-col items-center justify-center py-4\">\n                              <motion.div\n                                className=\"w-20 h-20 rounded-full bg-gradient-to-br from-emerald-500 to-green-600 flex items-center justify-center mb-4\"\n                                initial={{ scale: 0 }}\n                                animate={{ scale: 1 }}\n                                transition={{ type: \"spring\", stiffness: 300 }}\n                              >\n                                <Music2 className=\"w-8 h-8 text-white\" />\n                              </motion.div>\n                              <div className=\"text-sm font-bold text-[#1a2420] dark:text-[#8fa39a] font-mono mb-1\">\n                                Track Created!\n                              </div>\n                              <div className=\"text-[10px] text-[#3a4a45] dark:text-[#5a6a65] font-mono mb-3\">\n                                {createPrompt.slice(0, 30)}...\n                              </div>\n                              <div className=\"flex gap-2\">\n                                <button\n                                  onClick={() => {\n                                    // TODO: Play the generated track\n                                    resetGeneration();\n                                    setCurrentView('nowPlaying');\n                                  }}\n                                  className=\"px-3 py-1.5 text-[10px] font-mono bg-[#1a2420] dark:bg-[#8fa39a] text-[#8fa39a] dark:text-[#1a2420] rounded-full\"\n                                >\n                                  Play\n                                </button>\n                                <button\n                                  onClick={() => {\n                                    resetGeneration();\n                                    setCreatePrompt('');\n                                  }}\n                                  className=\"px-3 py-1.5 text-[10px] font-mono bg-[#5a6a65]/30 text-[#1a2420] dark:text-[#8fa39a] rounded-full\"\n                                >\n                                  Create Another\n                                </button>\n                              </div>\n                            </div>\n                          ) : (\n                            /* Input State */\n                            <div className=\"space-y-3\">\n                              <div className=\"text-[10px] font-bold text-[#1a2420] dark:text-[#8fa39a] uppercase tracking-wider font-mono\">\n                                Create with AI\n                              </div>\n\n                              {/* Prompt Input */}\n                              <input\n                                type=\"text\"\n                                value={createPrompt}\n                                onChange={(e) => setCreatePrompt(e.target.value)}\n                                placeholder=\"Describe your track...\"\n                                className=\"w-full px-3 py-2 text-xs font-mono bg-[#5a6a65]/20 dark:bg-[#1a2420]/50 border border-[#5a6a65]/30 dark:border-[#3a4a45]/30 rounded-lg text-[#1a2420] dark:text-[#8fa39a] placeholder-[#3a4a45]/50 dark:placeholder-[#5a6a65]/50 focus:outline-none focus:ring-1 focus:ring-violet-500\"\n                              />\n\n                              {/* Quick Presets */}\n                              <div className=\"flex flex-wrap gap-1\">\n                                {Object.entries(MUSIC_PRESETS).slice(0, 4).map(([key, preset]) => (\n                                  <button\n                                    key={key}\n                                    onClick={() => setCreatePrompt(preset.prompt)}\n                                    className=\"px-2 py-1 text-[9px] font-mono bg-[#5a6a65]/20 dark:bg-[#1a2420]/50 text-[#1a2420] dark:text-[#8fa39a] rounded-full hover:bg-violet-500/20 transition-colors\"\n                                  >\n                                    {preset.prompt.split(' ').slice(0, 2).join(' ')}\n                                  </button>\n                                ))}\n                              </div>\n\n                              {/* Duration Slider */}\n                              <div className=\"flex items-center gap-2\">\n                                <span className=\"text-[9px] font-mono text-[#3a4a45] dark:text-[#5a6a65] w-12\">\n                                  {createDuration}s\n                                </span>\n                                <input\n                                  type=\"range\"\n                                  min=\"10\"\n                                  max=\"60\"\n                                  value={createDuration}\n                                  onChange={(e) => setCreateDuration(Number(e.target.value))}\n                                  className=\"flex-1 h-1 bg-[#5a6a65]/30 rounded-full appearance-none cursor-pointer [&::-webkit-slider-thumb]:appearance-none [&::-webkit-slider-thumb]:w-3 [&::-webkit-slider-thumb]:h-3 [&::-webkit-slider-thumb]:rounded-full [&::-webkit-slider-thumb]:bg-violet-500\"\n                                />\n                              </div>\n\n                              {/* Advanced Toggle */}\n                              <button\n                                onClick={() => setShowAdvancedCreate(!showAdvancedCreate)}\n                                className=\"text-[9px] font-mono text-[#3a4a45] dark:text-[#5a6a65] hover:text-violet-500 transition-colors\"\n                              >\n                                {showAdvancedCreate ? 'â–² Less options' : 'â–¼ More options'}\n                              </button>\n\n                              {/* Advanced Options */}\n                              <AnimatePresence>\n                                {showAdvancedCreate && (\n                                  <motion.div\n                                    initial={{ height: 0, opacity: 0 }}\n                                    animate={{ height: 'auto', opacity: 1 }}\n                                    exit={{ height: 0, opacity: 0 }}\n                                    className=\"space-y-2 overflow-hidden\"\n                                  >\n                                    {/* Lyrics */}\n                                    <textarea\n                                      value={createLyrics}\n                                      onChange={(e) => setCreateLyrics(e.target.value)}\n                                      placeholder=\"[Verse]&#10;Add lyrics here...\"\n                                      rows={3}\n                                      className=\"w-full px-3 py-2 text-[10px] font-mono bg-[#5a6a65]/20 dark:bg-[#1a2420]/50 border border-[#5a6a65]/30 dark:border-[#3a4a45]/30 rounded-lg text-[#1a2420] dark:text-[#8fa39a] placeholder-[#3a4a45]/50 dark:placeholder-[#5a6a65]/50 focus:outline-none focus:ring-1 focus:ring-violet-500 resize-none\"\n                                    />\n                                    {/* BPM & Key */}\n                                    <div className=\"flex gap-2\">\n                                      <input\n                                        type=\"number\"\n                                        value={createBpm || ''}\n                                        onChange={(e) => setCreateBpm(e.target.value ? Number(e.target.value) : undefined)}\n                                        placeholder=\"BPM\"\n                                        className=\"w-16 px-2 py-1 text-[10px] font-mono bg-[#5a6a65]/20 dark:bg-[#1a2420]/50 border border-[#5a6a65]/30 dark:border-[#3a4a45]/30 rounded text-[#1a2420] dark:text-[#8fa39a] placeholder-[#3a4a45]/50 focus:outline-none\"\n                                      />\n                                      <select\n                                        value={createKey || ''}\n                                        onChange={(e) => setCreateKey(e.target.value || undefined)}\n                                        className=\"flex-1 px-2 py-1 text-[10px] font-mono bg-[#5a6a65]/20 dark:bg-[#1a2420]/50 border border-[#5a6a65]/30 dark:border-[#3a4a45]/30 rounded text-[#1a2420] dark:text-[#8fa39a] focus:outline-none\"\n                                      >\n                                        <option value=\"\">Key (auto)</option>\n                                        <option value=\"C major\">C major</option>\n                                        <option value=\"G major\">G major</option>\n                                        <option value=\"D major\">D major</option>\n                                        <option value=\"A minor\">A minor</option>\n                                        <option value=\"E minor\">E minor</option>\n                                      </select>\n                                    </div>\n                                  </motion.div>\n                                )}\n                              </AnimatePresence>\n\n                              {/* Generate Button */}\n                              <button\n                                onClick={() => {\n                                  if (createPrompt.trim()) {\n                                    generate({\n                                      prompt: createPrompt,\n                                      duration: createDuration,\n                                      lyrics: createLyrics || undefined,\n                                      bpm: createBpm,\n                                      key: createKey,\n                                    });\n                                  }\n                                }}\n                                disabled={!createPrompt.trim()}\n                                className=\"w-full py-2 text-xs font-mono font-bold bg-gradient-to-r from-violet-500 to-purple-600 text-white rounded-lg disabled:opacity-50 disabled:cursor-not-allowed hover:from-violet-600 hover:to-purple-700 transition-all\"\n                              >\n                                âœ¨ Generate Track\n                              </button>\n\n                              {/* Error Display */}\n                              {generateError && (\n                                <div className=\"text-[10px] text-red-500 font-mono\">\n                                  {generateError}\n                                </div>\n                              )}\n                            </div>\n                          )}\n                        </motion.div>\n                      ) : (\n                        /* Now Playing View */\n                        <motion.div\n                          key=\"playing\"\n                          initial={{ x: 100, opacity: 0 }}\n                          animate={{ x: 0, opacity: 1 }}\n                          exit={{ x: -100, opacity: 0 }}\n                          transition={{ duration: 0.2 }}\n                        >\n                          {/* Video or Album Art - Large for now playing */}\n                          <div className=\"w-full aspect-square bg-[#697d75] dark:bg-[#1e2a26] rounded-lg mb-3 flex items-center justify-center overflow-hidden shadow-lg relative\">\n                            {isVideo ? (\n                              // Video player for MP4 tracks\n                              <video\n                                ref={videoRef}\n                                src={currentTrack.audioSrc}\n                                className=\"w-full h-full object-cover\"\n                                playsInline\n                                preload=\"metadata\"\n                                onClick={(e) => {\n                                  e.stopPropagation();\n                                  togglePlay();\n                                }}\n                              />\n                            ) : currentTrack.albumArt && !imageError ? (\n                              // eslint-disable-next-line @next/next/no-img-element\n                              <img\n                                src={currentTrack.albumArt}\n                                alt={`${currentTrack.album} cover`}\n                                className=\"w-full h-full object-cover\"\n                                onError={() => setImageError(true)}\n                              />\n                            ) : (\n                              <span className=\"text-5xl\">ðŸŽµ</span>\n                            )}\n                            {/* Play/pause overlay - show for non-video or when paused */}\n                            {(!isVideo || !isPlaying) && (\n                              <motion.div\n                                className=\"absolute inset-0 flex items-center justify-center bg-black/20\"\n                                initial={{ opacity: 0 }}\n                                animate={{ opacity: isPlaying ? 0 : 1 }}\n                                whileHover={{ opacity: 1 }}\n                                onClick={(e) => {\n                                  e.stopPropagation();\n                                  togglePlay();\n                                }}\n                              >\n                                <motion.div\n                                  className=\"p-3 rounded-full bg-white/30 backdrop-blur-sm cursor-pointer\"\n                                  whileHover={{ scale: 1.1 }}\n                                  whileTap={{ scale: 0.95 }}\n                                >\n                                  {isPlaying ? (\n                                    <Pause className=\"w-6 h-6 text-white\" />\n                                  ) : (\n                                    <Play className=\"w-6 h-6 text-white ml-0.5\" />\n                                  )}\n                                </motion.div>\n                              </motion.div>\n                            )}\n                          </div>\n\n                          {/* Track Info */}\n                          <div className=\"text-center mb-2\">\n                            <div className=\"text-[#1a2420] dark:text-[#8fa39a] font-bold text-sm truncate font-mono\">\n                              {currentTrack.title}\n                            </div>\n                            <div className=\"text-[#3a4a45] dark:text-[#5a6a65] text-xs truncate font-mono\">\n                              {currentTrack.artist}\n                            </div>\n                          </div>\n\n                          {/* Progress Bar */}\n                          <div className=\"relative h-2 bg-[#5a6a65] dark:bg-[#1a2420] rounded-full overflow-hidden\">\n                            <div\n                              className=\"absolute left-0 top-0 h-full bg-[#1a2420] dark:bg-[#8fa39a] transition-all duration-150\"\n                              style={{ width: `${progressPercent}%` }}\n                            />\n                          </div>\n                          <div className=\"flex justify-between text-[10px] text-[#3a4a45] dark:text-[#5a6a65] mt-1 font-mono\">\n                            <span>{formatTime(currentTime)}</span>\n                            <span>{formatTime(duration)}</span>\n                          </div>\n                        </motion.div>\n                      )}\n                    </AnimatePresence>\n\n                    {/* Navigation Dock */}\n                    {currentView !== 'auth' && (\n                      <motion.div\n                        initial={{ opacity: 0, y: 10 }}\n                        animate={{ opacity: 1, y: 0 }}\n                        className=\"mt-2 flex justify-center gap-1\"\n                      >\n                        <div className=\"flex items-center gap-0.5 px-2 py-1 rounded-full bg-[#697d75]/50 dark:bg-[#1a2420]/50 border border-[#5a6a65]/30 dark:border-[#3a4a45]/30\">\n                          {/* Now Playing */}\n                          <button\n                            onClick={(e) => {\n                              e.stopPropagation();\n                              if (currentTrack) {\n                                setCurrentView('nowPlaying');\n                              }\n                            }}\n                            className={`p-1.5 rounded-full transition-all ${currentView === 'nowPlaying'\n                                ? 'bg-[#1a2420] dark:bg-[#8fa39a] text-[#8fa39a] dark:text-[#1a2420]'\n                                : 'text-[#1a2420]/70 dark:text-[#8fa39a]/70 hover:text-[#1a2420] dark:hover:text-[#8fa39a] hover:bg-[#5a6a65]/30 dark:hover:bg-[#3a4a45]/30'\n                              }`}\n                            title=\"Now Playing\"\n                          >\n                            {isPlaying ? (\n                              <Music2 className=\"w-3 h-3\" />\n                            ) : (\n                              <Play className=\"w-3 h-3\" />\n                            )}\n                          </button>\n\n                          {/* Albums/Carousel */}\n                          <button\n                            onClick={(e) => {\n                              e.stopPropagation();\n                              setCurrentView('carousel');\n                              setSelectedAlbum(null);\n                            }}\n                            className={`p-1.5 rounded-full transition-all ${currentView === 'carousel'\n                                ? 'bg-[#1a2420] dark:bg-[#8fa39a] text-[#8fa39a] dark:text-[#1a2420]'\n                                : 'text-[#1a2420]/70 dark:text-[#8fa39a]/70 hover:text-[#1a2420] dark:hover:text-[#8fa39a] hover:bg-[#5a6a65]/30 dark:hover:bg-[#3a4a45]/30'\n                              }`}\n                            title=\"Albums\"\n                          >\n                            <Disc className=\"w-3 h-3\" />\n                          </button>\n\n                          {/* Album View (when an album is selected) */}\n                          {selectedAlbum && (\n                            <button\n                              onClick={(e) => {\n                                e.stopPropagation();\n                                setCurrentView('album');\n                              }}\n                              className={`p-1.5 rounded-full transition-all ${currentView === 'album'\n                                  ? 'bg-[#1a2420] dark:bg-[#8fa39a] text-[#8fa39a] dark:text-[#1a2420]'\n                                  : 'text-[#1a2420]/70 dark:text-[#8fa39a]/70 hover:text-[#1a2420] dark:hover:text-[#8fa39a] hover:bg-[#5a6a65]/30 dark:hover:bg-[#3a4a45]/30'\n                                }`}\n                              title={selectedAlbum.name}\n                            >\n                              <Home className=\"w-3 h-3\" />\n                            </button>\n                          )}\n\n                          {/* All Tracks */}\n                          <button\n                            onClick={(e) => {\n                              e.stopPropagation();\n                              setCurrentView('playlist');\n                            }}\n                            className={`p-1.5 rounded-full transition-all ${currentView === 'playlist'\n                                ? 'bg-[#1a2420] dark:bg-[#8fa39a] text-[#8fa39a] dark:text-[#1a2420]'\n                                : 'text-[#1a2420]/70 dark:text-[#8fa39a]/70 hover:text-[#1a2420] dark:hover:text-[#8fa39a] hover:bg-[#5a6a65]/30 dark:hover:bg-[#3a4a45]/30'\n                              }`}\n                            title=\"All Tracks\"\n                          >\n                            <List className=\"w-3 h-3\" />\n                          </button>\n\n                          {/* Create - AI Music Generation */}\n                          <button\n                            onClick={(e) => {\n                              e.stopPropagation();\n                              setCurrentView('create');\n                            }}\n                            className={`p-1.5 rounded-full transition-all ${currentView === 'create'\n                                ? 'bg-violet-600 dark:bg-violet-500 text-white'\n                                : 'text-[#1a2420]/70 dark:text-[#8fa39a]/70 hover:text-[#1a2420] dark:hover:text-[#8fa39a] hover:bg-[#5a6a65]/30 dark:hover:bg-[#3a4a45]/30'\n                              }`}\n                            title=\"Create with AI\"\n                          >\n                            {isGenerating ? (\n                              <Loader2 className=\"w-3 h-3 animate-spin\" />\n                            ) : (\n                              <Sparkles className=\"w-3 h-3\" />\n                            )}\n                          </button>\n\n                          {/* Private/Lock */}\n                          <button\n                            onClick={(e) => {\n                              e.stopPropagation();\n                              if (hasPrivateAccess) {\n                                setViewingPrivate(!viewingPrivate);\n                              } else {\n                                handleOpenAuth();\n                              }\n                            }}\n                            className={`p-1.5 rounded-full transition-all ${viewingPrivate && hasPrivateAccess\n                                ? 'bg-emerald-600 dark:bg-emerald-500 text-white'\n                                : 'text-[#1a2420]/70 dark:text-[#8fa39a]/70 hover:text-[#1a2420] dark:hover:text-[#8fa39a] hover:bg-[#5a6a65]/30 dark:hover:bg-[#3a4a45]/30'\n                              }`}\n                            title={hasPrivateAccess ? (viewingPrivate ? 'Viewing Private' : 'View Private') : 'Private Access'}\n                          >\n                            <Lock className=\"w-3 h-3\" />\n                          </button>\n\n                          {/* Settings - Admin mode (owner only) */}\n                          {hasOwnerAccess && (\n                            <button\n                              onClick={(e) => {\n                                e.stopPropagation();\n                                setAdminMode(!adminMode);\n                                if (!adminMode && !isExpanded) {\n                                  expand();\n                                }\n                              }}\n                              className={`p-1.5 rounded-full transition-all ${adminMode\n                                  ? 'bg-amber-500 dark:bg-amber-400 text-white'\n                                  : 'text-[#1a2420]/70 dark:text-[#8fa39a]/70 hover:text-[#1a2420] dark:hover:text-[#8fa39a] hover:bg-[#5a6a65]/30 dark:hover:bg-[#3a4a45]/30'\n                                }`}\n                              title={adminMode ? 'Exit admin mode' : 'Admin settings'}\n                            >\n                              <Settings className=\"w-3 h-3\" />\n                            </button>\n                          )}\n\n                          {/* Expand/Collapse panels */}\n                          <button\n                            onClick={(e) => {\n                              e.stopPropagation();\n                              if (adminMode) setAdminMode(false);\n                              toggleExpanded();\n                            }}\n                            className={`p-1.5 rounded-full transition-all ${isExpanded\n                                ? 'bg-[#1a2420] dark:bg-[#8fa39a] text-[#8fa39a] dark:text-[#1a2420]'\n                                : 'text-[#1a2420]/70 dark:text-[#8fa39a]/70 hover:text-[#1a2420] dark:hover:text-[#8fa39a] hover:bg-[#5a6a65]/30 dark:hover:bg-[#3a4a45]/30'\n                              }`}\n                            title={isExpanded ? 'Collapse' : 'Expand'}\n                          >\n                            {isExpanded ? (\n                              <Minimize2 className=\"w-3 h-3\" />\n                            ) : (\n                              <Maximize2 className=\"w-3 h-3\" />\n                            )}\n                          </button>\n                        </div>\n                      </motion.div>\n                    )}\n                  </div>\n\n                  {/* Click Wheel */}\n                  <div className=\"relative mx-auto w-[200px] h-[200px]\">\n                    {/* Outer wheel */}\n                    <div className=\"absolute inset-0 rounded-full bg-gradient-to-b from-[#f0f0f0] to-[#c0c0c0] dark:from-zinc-700 dark:to-zinc-800 shadow-lg\">\n                      {/* Menu button */}\n                      <button\n                        onClick={() => {\n                          if (currentView === 'carousel') {\n                            // In carousel view, menu opens all tracks playlist\n                            setCurrentView('playlist');\n                          } else {\n                            // In other views, go back\n                            handleBack();\n                          }\n                        }}\n                        className=\"absolute top-3 left-1/2 -translate-x-1/2 text-[10px] font-bold text-zinc-600 dark:text-zinc-400 tracking-wider hover:text-zinc-900 dark:hover:text-white transition-colors flex items-center gap-1\"\n                      >\n                        {getMenuLabel()}\n                      </button>\n                      {/* Previous track */}\n                      <button\n                        onClick={skipToPrevious}\n                        disabled={showAuthScreen}\n                        className=\"absolute left-3 top-1/2 -translate-y-1/2 text-zinc-600 dark:text-zinc-400 hover:text-zinc-900 dark:hover:text-white transition-colors disabled:opacity-30\"\n                        title=\"Previous track\"\n                      >\n                        <svg width=\"20\" height=\"20\" viewBox=\"0 0 24 24\" fill=\"currentColor\">\n                          <path d=\"M19 20L9 12l10-8v16zM7 19V5H5v14h2z\" />\n                        </svg>\n                      </button>\n                      {/* Next track */}\n                      <button\n                        onClick={skipToNext}\n                        disabled={showAuthScreen}\n                        className=\"absolute right-3 top-1/2 -translate-y-1/2 text-zinc-600 dark:text-zinc-400 hover:text-zinc-900 dark:hover:text-white transition-colors disabled:opacity-30\"\n                        title=\"Next track\"\n                      >\n                        <svg width=\"20\" height=\"20\" viewBox=\"0 0 24 24\" fill=\"currentColor\">\n                          <path d=\"M5 4l10 8-10 8V4zm12 1v14h2V5h-2z\" />\n                        </svg>\n                      </button>\n                      {/* Play/Pause - always show play/pause here */}\n                      <button\n                        onClick={togglePlay}\n                        disabled={showAuthScreen}\n                        className=\"absolute bottom-3 left-1/2 -translate-x-1/2 text-zinc-600 dark:text-zinc-400 hover:text-zinc-900 dark:hover:text-white transition-colors disabled:opacity-30\"\n                        title={isPlaying ? 'Pause' : 'Play'}\n                      >\n                        <svg width=\"20\" height=\"20\" viewBox=\"0 0 24 24\" fill=\"currentColor\">\n                          {isPlaying ? (\n                            <path d=\"M6 4h4v16H6V4zm8 0h4v16h-4V4z\" />\n                          ) : (\n                            <path d=\"M8 5v14l11-7z\" />\n                          )}\n                        </svg>\n                      </button>\n                    </div>\n\n                    {/* Center button - context-aware actions */}\n                    <button\n                      onClick={() => {\n                        if (currentView === 'auth') {\n                          // Do nothing in auth mode\n                          return;\n                        } else if (currentView === 'carousel') {\n                          // In carousel, select the current album\n                          if (selectedAlbum || tracks.length > 0) {\n                            // Find album for current track or select first album\n                            const albumForTrack = tracks.find(t => t.id === currentTrack.id);\n                            if (albumForTrack) {\n                              handleSelectAlbum({\n                                name: albumForTrack.album,\n                                artist: albumForTrack.artist,\n                                albumArt: albumForTrack.albumArt,\n                                tracks: tracks.filter(t => t.album === albumForTrack.album && t.artist === albumForTrack.artist),\n                              });\n                            }\n                          }\n                        } else if (currentView === 'album' && selectedAlbum) {\n                          // In album view, play first track or toggle if already playing\n                          if (selectedAlbum.tracks.some(t => t.id === currentTrack.id)) {\n                            togglePlay();\n                          } else {\n                            handleSelectTrackFromAlbum(selectedAlbum.tracks[0]);\n                          }\n                        } else if (currentView === 'playlist') {\n                          // In playlist, admin can access settings\n                          if (isAdmin) {\n                            setShowAdminPanel(true);\n                          } else {\n                            togglePlay();\n                          }\n                        } else if (currentView === 'nowPlaying') {\n                          // In now playing, toggle play/pause\n                          togglePlay();\n                        }\n                      }}\n                      className=\"absolute inset-0 m-auto w-[70px] h-[70px] rounded-full bg-gradient-to-b from-[#fafafa] to-[#e0e0e0] dark:from-zinc-600 dark:to-zinc-700 shadow-md hover:from-white hover:to-[#e8e8e8] dark:hover:from-zinc-500 dark:hover:to-zinc-600 transition-all active:shadow-inner flex items-center justify-center\"\n                      title={\n                        currentView === 'carousel' ? 'Open album' :\n                          currentView === 'playlist' && isAdmin ? 'Admin Settings' :\n                            'Play/Pause'\n                      }\n                    >\n                      {/* Settings icon - when admin and viewing playlist */}\n                      {isAdmin && currentView === 'playlist' && (\n                        <Settings className=\"w-6 h-6 text-zinc-500 dark:text-zinc-400\" />\n                      )}\n                    </button>\n                  </div>\n                </motion.div>\n              </motion.div>\n            </div>\n          </BlurFade>\n\n          {/* Mobile: Full expanded UI below */}\n          <AnimatePresence>\n            {isMobile && isExpanded && (\n              <motion.div\n                className=\"fixed inset-0 top-20 bg-black/95 backdrop-blur-xl z-30 overflow-auto\"\n                initial={{ opacity: 0, y: 100 }}\n                animate={{ opacity: 1, y: 0 }}\n                exit={{ opacity: 0, y: 100 }}\n                transition={{ type: 'spring', stiffness: 400, damping: 35 }}\n              >\n                <div className=\"max-w-md mx-auto p-4 space-y-6 pb-32\">\n                  {/* Now Playing Section */}\n                  <section>\n                    <h2 className=\"text-white font-semibold text-lg mb-3\">Now Playing</h2>\n                    <div className=\"rounded-xl overflow-hidden\">\n                      <ExpandedNowPlaying />\n                    </div>\n                  </section>\n\n                  {/* Library Section */}\n                  <section>\n                    <h2 className=\"text-white font-semibold text-lg mb-3\">Library</h2>\n                    <div className=\"rounded-xl bg-black/60 border border-white/10 h-[400px] overflow-hidden\">\n                      <LibraryBrowser onClose={collapse} />\n                    </div>\n                  </section>\n                </div>\n\n                {/* Close button for mobile */}\n                <motion.button\n                  className=\"fixed top-4 right-4 z-40 p-3 rounded-full bg-white/10 backdrop-blur-sm text-white hover:bg-white/20 transition-colors\"\n                  onClick={collapse}\n                  whileTap={{ scale: 0.95 }}\n                >\n                  <Minimize2 className=\"w-5 h-5\" />\n                </motion.button>\n              </motion.div>\n            )}\n          </AnimatePresence>\n\n          {/* Morph progress indicator (subtle, only when dragging) */}\n          <AnimatePresence>\n            {isDragging && (\n              <motion.div\n                className=\"fixed bottom-4 left-1/2 -translate-x-1/2 z-50 px-4 py-2 bg-black/80 backdrop-blur-sm rounded-full text-white text-sm font-mono\"\n                initial={{ opacity: 0, y: 20 }}\n                animate={{ opacity: 1, y: 0 }}\n                exit={{ opacity: 0, y: 20 }}\n              >\n                {(morphProgress * 100).toFixed(0)}%\n              </motion.div>\n            )}\n          </AnimatePresence>\n\n          {/* Lyrics Section - only show in now playing view */}\n          {currentTrack.lyrics && currentView === 'nowPlaying' && (\n            <BlurFade delay={BLUR_FADE_DELAY * 3}>\n              <div className=\"w-full max-w-[320px] mt-8\">\n                <h2 className=\"text-xs font-mono uppercase tracking-widest text-zinc-500 dark:text-zinc-500 mb-3 text-center\">\n                  Lyrics\n                </h2>\n                <div className=\"bg-white/60 dark:bg-zinc-900/60 backdrop-blur-sm rounded-xl p-5 border border-zinc-200 dark:border-zinc-800 shadow-sm\">\n                  <pre className=\"text-zinc-700 dark:text-zinc-300 text-sm leading-relaxed whitespace-pre-wrap font-mono text-center\">\n                    {currentTrack.lyrics}\n                  </pre>\n                </div>\n              </div>\n            </BlurFade>\n          )}\n\n          {/* Playlist indicator for multiple tracks - only show in carousel view */}\n          {tracks.length > 1 && currentView === 'carousel' && (\n            <BlurFade delay={BLUR_FADE_DELAY * 4}>\n              <button\n                onClick={() => setCurrentView('playlist')}\n                className=\"mt-6 flex items-center gap-2 text-zinc-500 dark:text-zinc-400 hover:text-zinc-700 dark:hover:text-zinc-200 transition-colors text-sm\"\n              >\n                <List className=\"w-4 h-4\" />\n                <span>View all {tracks.length} tracks</span>\n              </button>\n            </BlurFade>\n          )}\n\n          {/* Loading indicator for private tracks */}\n          {viewingPrivate && hasPrivateAccess && isLoadingTracks && (\n            <BlurFade delay={BLUR_FADE_DELAY * 4}>\n              <div className=\"mt-6 text-sm text-zinc-500 dark:text-zinc-400\">\n                Loading your tracks...\n              </div>\n            </BlurFade>\n          )}\n\n          {/* Empty state for private view with no tracks */}\n          {viewingPrivate && hasPrivateAccess && !isLoadingTracks && privateTracks.length === 0 && (\n            <BlurFade delay={BLUR_FADE_DELAY * 4}>\n              <div className=\"mt-6 text-center\">\n                <p className=\"text-sm text-zinc-500 dark:text-zinc-400\">\n                  No tracks assigned to you yet.\n                </p>\n                <p className=\"text-xs text-zinc-400 dark:text-zinc-500 mt-1\">\n                  Check back later or contact the administrator.\n                </p>\n                <button\n                  onClick={() => setViewingPrivate(false)}\n                  className=\"mt-3 text-xs text-emerald-600 dark:text-emerald-400 hover:underline\"\n                >\n                  View public tracks\n                </button>\n              </div>\n            </BlurFade>\n          )}\n        </div>\n\n        {/* Admin Panel */}\n        <AnimatePresence>\n          {showAdminPanel && (isAdmin || hasOwnerAccess) && (\n            <PrivateMusicAdmin onClose={() => setShowAdminPanel(false)} />\n          )}\n        </AnimatePresence>\n      </div>\n    </PageTransition>\n  );\n}\n\n// Main export wrapped with PrivateMusicProvider\nexport function MusicClient() {\n  return (\n    <PrivateMusicProvider>\n      <MusicPageContent />\n    </PrivateMusicProvider>\n  );\n}\n"],"names":[],"mappings":"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"}}]
}