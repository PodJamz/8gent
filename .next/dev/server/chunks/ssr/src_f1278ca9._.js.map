{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///Users/jamesspalding/OpenClaw-OS/src/context/NotesContext.tsx"],"sourcesContent":["'use client';\n\nimport {\n  createContext,\n  useContext,\n  useState,\n  useCallback,\n  useEffect,\n  type ReactNode,\n} from 'react';\n\n// ============================================================================\n// Types\n// ============================================================================\n\nexport interface Note {\n  id: string;\n  title: string;\n  content: string; // markdown\n  folderId: string | null;\n  tags: string[];\n  createdAt: number;\n  updatedAt: number;\n  isPinned: boolean;\n}\n\nexport interface Folder {\n  id: string;\n  name: string;\n  parentId: string | null;\n  color: string;\n  createdAt: number;\n}\n\nexport type SortOption = 'updated' | 'created' | 'title' | 'manual';\nexport type ViewMode = 'list' | 'grid';\n\ninterface NotesState {\n  notes: Note[];\n  folders: Folder[];\n  selectedNoteId: string | null;\n  selectedFolderId: string | null;\n  searchQuery: string;\n  sortBy: SortOption;\n  viewMode: ViewMode;\n  isQuickCaptureOpen: boolean;\n}\n\ninterface NotesContextType extends NotesState {\n  // Note CRUD\n  createNote: (folderId?: string | null) => Note;\n  updateNote: (id: string, updates: Partial<Omit<Note, 'id' | 'createdAt'>>) => void;\n  deleteNote: (id: string) => void;\n  duplicateNote: (id: string) => Note | null;\n  moveNote: (noteId: string, folderId: string | null) => void;\n  togglePinNote: (id: string) => void;\n\n  // Folder CRUD\n  createFolder: (name: string, parentId?: string | null, color?: string) => Folder;\n  updateFolder: (id: string, updates: Partial<Omit<Folder, 'id' | 'createdAt'>>) => void;\n  deleteFolder: (id: string, deleteNotes?: boolean) => void;\n\n  // Selection\n  selectNote: (id: string | null) => void;\n  selectFolder: (id: string | null) => void;\n\n  // Search & Sort\n  setSearchQuery: (query: string) => void;\n  setSortBy: (sort: SortOption) => void;\n  setViewMode: (mode: ViewMode) => void;\n\n  // Quick Capture\n  openQuickCapture: () => void;\n  closeQuickCapture: () => void;\n  quickCapture: (content: string, folderId?: string | null) => Note;\n\n  // Computed\n  getNotesInFolder: (folderId: string | null) => Note[];\n  getSubfolders: (parentId: string | null) => Folder[];\n  getFilteredNotes: () => Note[];\n  selectedNote: Note | null;\n  selectedFolder: Folder | null;\n}\n\n// ============================================================================\n// Storage Keys\n// ============================================================================\n\nconst STORAGE_KEYS = {\n  notes: 'openclaw.notes',\n  folders: 'openclaw.notes.folders',\n  selectedNoteId: 'openclaw.notes.selectedNoteId',\n  selectedFolderId: 'openclaw.notes.selectedFolderId',\n  sortBy: 'openclaw.notes.sortBy',\n  viewMode: 'openclaw.notes.viewMode',\n} as const;\n\n// ============================================================================\n// Defaults\n// ============================================================================\n\nconst DEFAULT_FOLDERS: Folder[] = [\n  {\n    id: 'inbox',\n    name: 'Inbox',\n    parentId: null,\n    color: '#3b82f6',\n    createdAt: Date.now(),\n  },\n  {\n    id: 'personal',\n    name: 'Personal',\n    parentId: null,\n    color: '#10b981',\n    createdAt: Date.now(),\n  },\n  {\n    id: 'work',\n    name: 'Work',\n    parentId: null,\n    color: '#f59e0b',\n    createdAt: Date.now(),\n  },\n];\n\nconst WELCOME_NOTE: Note = {\n  id: 'welcome',\n  title: 'Welcome to Notes',\n  content: `# Welcome to Notes! üìù\n\nThis is your personal notes app with **markdown support**.\n\n## Features\n\n- üìÅ Organize notes into folders\n- üîç Quick search with \\`‚åòK\\`\n- ‚ö° Instant capture with \\`‚åò‚áßN\\`\n- üì± Works great on mobile\n- üåì Respects your theme\n\n## Markdown Support\n\nYou can use all the usual markdown:\n\n- **Bold** and *italic* text\n- \\`inline code\\` and code blocks\n- [Links](https://example.com)\n- Lists, headings, and more!\n\n\\`\\`\\`javascript\n// Even syntax-highlighted code\nconst greeting = \"Hello, Notes!\";\n\\`\\`\\`\n\n## Keyboard Shortcuts\n\n| Shortcut | Action |\n|----------|--------|\n| \\`‚åò‚áßN\\` | Quick capture |\n| \\`‚åòK\\` | Search notes |\n| \\`‚åòN\\` | New note |\n| \\`‚åòS\\` | Save (auto-saves) |\n\n---\n\nStart writing and your notes will be saved automatically!\n`,\n  folderId: 'inbox',\n  tags: ['welcome', 'getting-started'],\n  createdAt: Date.now(),\n  updatedAt: Date.now(),\n  isPinned: true,\n};\n\n// ============================================================================\n// Utilities\n// ============================================================================\n\nfunction generateId(): string {\n  return `${Date.now()}-${Math.random().toString(36).substr(2, 9)}`;\n}\n\nfunction safeJsonParse<T>(json: string | null, fallback: T): T {\n  if (!json) return fallback;\n  try {\n    return JSON.parse(json);\n  } catch {\n    return fallback;\n  }\n}\n\n// ============================================================================\n// Context\n// ============================================================================\n\nconst NotesContext = createContext<NotesContextType | null>(null);\n\nexport function NotesProvider({ children }: { children: ReactNode }) {\n  // State\n  const [notes, setNotes] = useState<Note[]>([]);\n  const [folders, setFolders] = useState<Folder[]>([]);\n  const [selectedNoteId, setSelectedNoteId] = useState<string | null>(null);\n  const [selectedFolderId, setSelectedFolderId] = useState<string | null>(null);\n  const [searchQuery, setSearchQuery] = useState('');\n  const [sortBy, setSortBy] = useState<SortOption>('updated');\n  const [viewMode, setViewMode] = useState<ViewMode>('list');\n  const [isQuickCaptureOpen, setIsQuickCaptureOpen] = useState(false);\n  const [isHydrated, setIsHydrated] = useState(false);\n\n  // Load from localStorage on mount\n  useEffect(() => {\n    const storedNotes = safeJsonParse<Note[]>(\n      localStorage.getItem(STORAGE_KEYS.notes),\n      []\n    );\n    const storedFolders = safeJsonParse<Folder[]>(\n      localStorage.getItem(STORAGE_KEYS.folders),\n      []\n    );\n    const storedSelectedNote = localStorage.getItem(STORAGE_KEYS.selectedNoteId);\n    const storedSelectedFolder = localStorage.getItem(STORAGE_KEYS.selectedFolderId);\n    const storedSortBy = localStorage.getItem(STORAGE_KEYS.sortBy) as SortOption | null;\n    const storedViewMode = localStorage.getItem(STORAGE_KEYS.viewMode) as ViewMode | null;\n\n    // Initialize with defaults if empty\n    if (storedFolders.length === 0) {\n      setFolders(DEFAULT_FOLDERS);\n    } else {\n      setFolders(storedFolders);\n    }\n\n    if (storedNotes.length === 0) {\n      setNotes([WELCOME_NOTE]);\n      setSelectedNoteId(WELCOME_NOTE.id);\n    } else {\n      setNotes(storedNotes);\n      if (storedSelectedNote) setSelectedNoteId(storedSelectedNote);\n    }\n\n    if (storedSelectedFolder) setSelectedFolderId(storedSelectedFolder);\n    if (storedSortBy) setSortBy(storedSortBy);\n    if (storedViewMode) setViewMode(storedViewMode);\n\n    setIsHydrated(true);\n  }, []);\n\n  // Persist notes to localStorage\n  useEffect(() => {\n    if (!isHydrated) return;\n    localStorage.setItem(STORAGE_KEYS.notes, JSON.stringify(notes));\n  }, [notes, isHydrated]);\n\n  // Persist folders to localStorage\n  useEffect(() => {\n    if (!isHydrated) return;\n    localStorage.setItem(STORAGE_KEYS.folders, JSON.stringify(folders));\n  }, [folders, isHydrated]);\n\n  // Persist selection\n  useEffect(() => {\n    if (!isHydrated) return;\n    if (selectedNoteId) {\n      localStorage.setItem(STORAGE_KEYS.selectedNoteId, selectedNoteId);\n    } else {\n      localStorage.removeItem(STORAGE_KEYS.selectedNoteId);\n    }\n  }, [selectedNoteId, isHydrated]);\n\n  useEffect(() => {\n    if (!isHydrated) return;\n    if (selectedFolderId) {\n      localStorage.setItem(STORAGE_KEYS.selectedFolderId, selectedFolderId);\n    } else {\n      localStorage.removeItem(STORAGE_KEYS.selectedFolderId);\n    }\n  }, [selectedFolderId, isHydrated]);\n\n  // Persist settings\n  useEffect(() => {\n    if (!isHydrated) return;\n    localStorage.setItem(STORAGE_KEYS.sortBy, sortBy);\n  }, [sortBy, isHydrated]);\n\n  useEffect(() => {\n    if (!isHydrated) return;\n    localStorage.setItem(STORAGE_KEYS.viewMode, viewMode);\n  }, [viewMode, isHydrated]);\n\n  // ============================================================================\n  // Note CRUD\n  // ============================================================================\n\n  const createNote = useCallback((folderId: string | null = null): Note => {\n    const newNote: Note = {\n      id: generateId(),\n      title: 'Untitled',\n      content: '',\n      folderId: folderId ?? selectedFolderId,\n      tags: [],\n      createdAt: Date.now(),\n      updatedAt: Date.now(),\n      isPinned: false,\n    };\n    setNotes((prev) => [newNote, ...prev]);\n    setSelectedNoteId(newNote.id);\n    return newNote;\n  }, [selectedFolderId]);\n\n  const updateNote = useCallback(\n    (id: string, updates: Partial<Omit<Note, 'id' | 'createdAt'>>) => {\n      setNotes((prev) =>\n        prev.map((note) =>\n          note.id === id\n            ? { ...note, ...updates, updatedAt: Date.now() }\n            : note\n        )\n      );\n    },\n    []\n  );\n\n  const deleteNote = useCallback((id: string) => {\n    setNotes((prev) => prev.filter((note) => note.id !== id));\n    setSelectedNoteId((prev) => (prev === id ? null : prev));\n  }, []);\n\n  const duplicateNote = useCallback((id: string): Note | null => {\n    const original = notes.find((n) => n.id === id);\n    if (!original) return null;\n\n    const duplicate: Note = {\n      ...original,\n      id: generateId(),\n      title: `${original.title} (Copy)`,\n      createdAt: Date.now(),\n      updatedAt: Date.now(),\n      isPinned: false,\n    };\n    setNotes((prev) => [duplicate, ...prev]);\n    setSelectedNoteId(duplicate.id);\n    return duplicate;\n  }, [notes]);\n\n  const moveNote = useCallback((noteId: string, folderId: string | null) => {\n    updateNote(noteId, { folderId });\n  }, [updateNote]);\n\n  const togglePinNote = useCallback((id: string) => {\n    setNotes((prev) =>\n      prev.map((note) =>\n        note.id === id ? { ...note, isPinned: !note.isPinned, updatedAt: Date.now() } : note\n      )\n    );\n  }, []);\n\n  // ============================================================================\n  // Folder CRUD\n  // ============================================================================\n\n  const createFolder = useCallback(\n    (name: string, parentId: string | null = null, color = '#6366f1'): Folder => {\n      const newFolder: Folder = {\n        id: generateId(),\n        name,\n        parentId,\n        color,\n        createdAt: Date.now(),\n      };\n      setFolders((prev) => [...prev, newFolder]);\n      return newFolder;\n    },\n    []\n  );\n\n  const updateFolder = useCallback(\n    (id: string, updates: Partial<Omit<Folder, 'id' | 'createdAt'>>) => {\n      setFolders((prev) =>\n        prev.map((folder) => (folder.id === id ? { ...folder, ...updates } : folder))\n      );\n    },\n    []\n  );\n\n  const deleteFolder = useCallback(\n    (id: string, deleteNotes = false) => {\n      // Get all descendant folder IDs\n      const getDescendantIds = (folderId: string): string[] => {\n        const children = folders.filter((f) => f.parentId === folderId);\n        return [folderId, ...children.flatMap((c) => getDescendantIds(c.id))];\n      };\n\n      const folderIds = getDescendantIds(id);\n\n      // Either delete or move notes to root\n      if (deleteNotes) {\n        setNotes((prev) => prev.filter((note) => !folderIds.includes(note.folderId ?? '')));\n      } else {\n        setNotes((prev) =>\n          prev.map((note) =>\n            folderIds.includes(note.folderId ?? '') ? { ...note, folderId: null } : note\n          )\n        );\n      }\n\n      // Delete folders\n      setFolders((prev) => prev.filter((f) => !folderIds.includes(f.id)));\n\n      // Clear selection if deleted\n      setSelectedFolderId((prev) => (folderIds.includes(prev ?? '') ? null : prev));\n    },\n    [folders]\n  );\n\n  // ============================================================================\n  // Selection\n  // ============================================================================\n\n  const selectNote = useCallback((id: string | null) => {\n    setSelectedNoteId(id);\n  }, []);\n\n  const selectFolder = useCallback((id: string | null) => {\n    setSelectedFolderId(id);\n  }, []);\n\n  // ============================================================================\n  // Quick Capture\n  // ============================================================================\n\n  const openQuickCapture = useCallback(() => {\n    setIsQuickCaptureOpen(true);\n  }, []);\n\n  const closeQuickCapture = useCallback(() => {\n    setIsQuickCaptureOpen(false);\n  }, []);\n\n  const quickCapture = useCallback(\n    (content: string, folderId: string | null = null): Note => {\n      // Extract title from first line if it's a heading\n      let title = 'Quick Note';\n      let noteContent = content;\n\n      const firstLine = content.split('\\n')[0];\n      if (firstLine.startsWith('#')) {\n        title = firstLine.replace(/^#+\\s*/, '').trim() || 'Quick Note';\n      } else if (firstLine.length > 0 && firstLine.length <= 50) {\n        title = firstLine;\n        noteContent = content.substring(firstLine.length).trim();\n      }\n\n      const newNote: Note = {\n        id: generateId(),\n        title,\n        content: noteContent,\n        folderId: folderId ?? 'inbox',\n        tags: [],\n        createdAt: Date.now(),\n        updatedAt: Date.now(),\n        isPinned: false,\n      };\n\n      setNotes((prev) => [newNote, ...prev]);\n      setIsQuickCaptureOpen(false);\n      return newNote;\n    },\n    []\n  );\n\n  // ============================================================================\n  // Computed Values\n  // ============================================================================\n\n  const getNotesInFolder = useCallback(\n    (folderId: string | null): Note[] => {\n      return notes.filter((note) => note.folderId === folderId);\n    },\n    [notes]\n  );\n\n  const getSubfolders = useCallback(\n    (parentId: string | null): Folder[] => {\n      return folders.filter((folder) => folder.parentId === parentId);\n    },\n    [folders]\n  );\n\n  const getFilteredNotes = useCallback((): Note[] => {\n    let filtered = notes;\n\n    // Filter by folder\n    if (selectedFolderId !== null) {\n      filtered = filtered.filter((note) => note.folderId === selectedFolderId);\n    }\n\n    // Filter by search\n    if (searchQuery.trim()) {\n      const query = searchQuery.toLowerCase();\n      filtered = filtered.filter(\n        (note) =>\n          note.title.toLowerCase().includes(query) ||\n          note.content.toLowerCase().includes(query) ||\n          note.tags.some((tag) => tag.toLowerCase().includes(query))\n      );\n    }\n\n    // Sort\n    const sorted = [...filtered].sort((a, b) => {\n      // Pinned notes first\n      if (a.isPinned && !b.isPinned) return -1;\n      if (!a.isPinned && b.isPinned) return 1;\n\n      switch (sortBy) {\n        case 'updated':\n          return b.updatedAt - a.updatedAt;\n        case 'created':\n          return b.createdAt - a.createdAt;\n        case 'title':\n          return a.title.localeCompare(b.title);\n        default:\n          return b.updatedAt - a.updatedAt;\n      }\n    });\n\n    return sorted;\n  }, [notes, selectedFolderId, searchQuery, sortBy]);\n\n  const selectedNote = notes.find((n) => n.id === selectedNoteId) ?? null;\n  const selectedFolder = folders.find((f) => f.id === selectedFolderId) ?? null;\n\n  // ============================================================================\n  // Context Value\n  // ============================================================================\n\n  const value: NotesContextType = {\n    // State\n    notes,\n    folders,\n    selectedNoteId,\n    selectedFolderId,\n    searchQuery,\n    sortBy,\n    viewMode,\n    isQuickCaptureOpen,\n\n    // Note CRUD\n    createNote,\n    updateNote,\n    deleteNote,\n    duplicateNote,\n    moveNote,\n    togglePinNote,\n\n    // Folder CRUD\n    createFolder,\n    updateFolder,\n    deleteFolder,\n\n    // Selection\n    selectNote,\n    selectFolder,\n\n    // Search & Sort\n    setSearchQuery,\n    setSortBy,\n    setViewMode,\n\n    // Quick Capture\n    openQuickCapture,\n    closeQuickCapture,\n    quickCapture,\n\n    // Computed\n    getNotesInFolder,\n    getSubfolders,\n    getFilteredNotes,\n    selectedNote,\n    selectedFolder,\n  };\n\n  return <NotesContext.Provider value={value}>{children}</NotesContext.Provider>;\n}\n\nexport function useNotes() {\n  const context = useContext(NotesContext);\n  if (!context) {\n    throw new Error('useNotes must be used within a NotesProvider');\n  }\n  return context;\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 490, "column": 0}, "map": {"version":3,"sources":["file:///Users/jamesspalding/OpenClaw-OS/src/components/notes/NotesFolderTree.tsx"],"sourcesContent":["'use client';\n\nimport { useState, useCallback, useRef, useEffect } from 'react';\nimport { motion, AnimatePresence } from 'framer-motion';\nimport {\n  Folder,\n  FolderOpen,\n  ChevronRight,\n  Plus,\n  MoreHorizontal,\n  Edit2,\n  Trash2,\n  FileText,\n  Inbox,\n} from 'lucide-react';\nimport { useNotes, type Folder as FolderType } from '@/context/NotesContext';\nimport { cn } from '@/lib/utils';\n\nconst FOLDER_COLORS = [\n  '#3b82f6', // blue\n  '#10b981', // green\n  '#f59e0b', // amber\n  '#ef4444', // red\n  '#8b5cf6', // violet\n  '#ec4899', // pink\n  '#06b6d4', // cyan\n  '#f97316', // orange\n];\n\ninterface FolderItemProps {\n  folder: FolderType;\n  depth?: number;\n}\n\nfunction FolderItem({ folder, depth = 0 }: FolderItemProps) {\n  const {\n    selectedFolderId,\n    selectFolder,\n    getSubfolders,\n    getNotesInFolder,\n    updateFolder,\n    deleteFolder,\n    createFolder,\n  } = useNotes();\n\n  const [isExpanded, setIsExpanded] = useState(true);\n  const [showMenu, setShowMenu] = useState(false);\n  const [isEditing, setIsEditing] = useState(false);\n  const [editName, setEditName] = useState(folder.name);\n  const [showColorPicker, setShowColorPicker] = useState(false);\n  const menuRef = useRef<HTMLDivElement>(null);\n  const inputRef = useRef<HTMLInputElement>(null);\n\n  const subfolders = getSubfolders(folder.id);\n  const noteCount = getNotesInFolder(folder.id).length;\n  const isSelected = selectedFolderId === folder.id;\n\n  // Close menu on outside click\n  useEffect(() => {\n    const handleClick = (e: MouseEvent) => {\n      if (menuRef.current && !menuRef.current.contains(e.target as Node)) {\n        setShowMenu(false);\n        setShowColorPicker(false);\n      }\n    };\n    document.addEventListener('mousedown', handleClick);\n    return () => document.removeEventListener('mousedown', handleClick);\n  }, []);\n\n  // Focus input when editing\n  useEffect(() => {\n    if (isEditing && inputRef.current) {\n      inputRef.current.focus();\n      inputRef.current.select();\n    }\n  }, [isEditing]);\n\n  const handleClick = useCallback(() => {\n    selectFolder(folder.id);\n  }, [selectFolder, folder.id]);\n\n  const handleToggle = useCallback((e: React.MouseEvent) => {\n    e.stopPropagation();\n    setIsExpanded((prev) => !prev);\n  }, []);\n\n  const handleRename = useCallback(() => {\n    if (editName.trim() && editName !== folder.name) {\n      updateFolder(folder.id, { name: editName.trim() });\n    }\n    setIsEditing(false);\n    setShowMenu(false);\n  }, [editName, folder.id, folder.name, updateFolder]);\n\n  const handleDelete = useCallback(() => {\n    if (confirm(`Delete \"${folder.name}\" and move its notes to All Notes?`)) {\n      deleteFolder(folder.id, false);\n    }\n    setShowMenu(false);\n  }, [deleteFolder, folder.id, folder.name]);\n\n  const handleColorChange = useCallback(\n    (color: string) => {\n      updateFolder(folder.id, { color });\n      setShowColorPicker(false);\n      setShowMenu(false);\n    },\n    [folder.id, updateFolder]\n  );\n\n  const handleAddSubfolder = useCallback(() => {\n    createFolder('New Folder', folder.id);\n    setIsExpanded(true);\n    setShowMenu(false);\n  }, [createFolder, folder.id]);\n\n  return (\n    <div>\n      <div\n        onClick={handleClick}\n        className={cn(\n          'group flex items-center gap-1 px-2 py-1.5 rounded-lg cursor-pointer transition-colors',\n          isSelected\n            ? 'bg-[hsl(var(--theme-primary)/0.15)] text-[hsl(var(--theme-primary))]'\n            : 'text-[hsl(var(--theme-foreground))] hover:bg-[hsl(var(--theme-muted))]'\n        )}\n        style={{ paddingLeft: `${depth * 12 + 8}px` }}\n      >\n        {/* Expand toggle */}\n        {subfolders.length > 0 ? (\n          <button\n            onClick={handleToggle}\n            className=\"p-0.5 rounded hover:bg-[hsl(var(--theme-muted))] transition-colors\"\n          >\n            <ChevronRight\n              className={cn(\n                'w-3.5 h-3.5 transition-transform',\n                isExpanded && 'rotate-90'\n              )}\n            />\n          </button>\n        ) : (\n          <div className=\"w-4\" />\n        )}\n\n        {/* Folder icon */}\n        {isExpanded && subfolders.length > 0 ? (\n          <FolderOpen className=\"w-4 h-4 flex-shrink-0\" style={{ color: folder.color }} />\n        ) : (\n          <Folder className=\"w-4 h-4 flex-shrink-0\" style={{ color: folder.color }} />\n        )}\n\n        {/* Name or input */}\n        {isEditing ? (\n          <input\n            ref={inputRef}\n            value={editName}\n            onChange={(e) => setEditName(e.target.value)}\n            onBlur={handleRename}\n            onKeyDown={(e) => {\n              if (e.key === 'Enter') handleRename();\n              if (e.key === 'Escape') {\n                setEditName(folder.name);\n                setIsEditing(false);\n              }\n            }}\n            className=\"flex-1 min-w-0 px-1 py-0.5 text-sm bg-[hsl(var(--theme-background))] border border-[hsl(var(--theme-border))] rounded outline-none focus:border-[hsl(var(--theme-primary))]\"\n            onClick={(e) => e.stopPropagation()}\n          />\n        ) : (\n          <span className=\"flex-1 min-w-0 text-sm truncate\">{folder.name}</span>\n        )}\n\n        {/* Note count */}\n        {noteCount > 0 && !isEditing && (\n          <span className=\"text-xs text-[hsl(var(--theme-muted-foreground))]\">\n            {noteCount}\n          </span>\n        )}\n\n        {/* More menu */}\n        <div className=\"relative\" ref={menuRef}>\n          <button\n            onClick={(e) => {\n              e.stopPropagation();\n              setShowMenu(!showMenu);\n            }}\n            className={cn(\n              'p-1 rounded transition-colors',\n              showMenu\n                ? 'opacity-100 bg-[hsl(var(--theme-muted))]'\n                : 'opacity-0 group-hover:opacity-100 hover:bg-[hsl(var(--theme-muted))]'\n            )}\n          >\n            <MoreHorizontal className=\"w-3.5 h-3.5\" />\n          </button>\n\n          <AnimatePresence>\n            {showMenu && (\n              <motion.div\n                initial={{ opacity: 0, scale: 0.95 }}\n                animate={{ opacity: 1, scale: 1 }}\n                exit={{ opacity: 0, scale: 0.95 }}\n                transition={{ duration: 0.1 }}\n                className=\"absolute right-0 top-full mt-1 z-50 w-40 rounded-lg border border-[hsl(var(--theme-border))] bg-[hsl(var(--theme-card))] shadow-lg overflow-hidden\"\n                onClick={(e) => e.stopPropagation()}\n              >\n                <button\n                  onClick={() => setIsEditing(true)}\n                  className=\"w-full flex items-center gap-2 px-3 py-2 text-sm text-[hsl(var(--theme-foreground))] hover:bg-[hsl(var(--theme-muted))] transition-colors\"\n                >\n                  <Edit2 className=\"w-3.5 h-3.5\" />\n                  Rename\n                </button>\n\n                <button\n                  onClick={() => setShowColorPicker(!showColorPicker)}\n                  className=\"w-full flex items-center gap-2 px-3 py-2 text-sm text-[hsl(var(--theme-foreground))] hover:bg-[hsl(var(--theme-muted))] transition-colors\"\n                >\n                  <div\n                    className=\"w-3.5 h-3.5 rounded-full border border-[hsl(var(--theme-border))]\"\n                    style={{ backgroundColor: folder.color }}\n                  />\n                  Color\n                </button>\n\n                {showColorPicker && (\n                  <div className=\"px-3 py-2 grid grid-cols-4 gap-1.5\">\n                    {FOLDER_COLORS.map((color) => (\n                      <button\n                        key={color}\n                        onClick={() => handleColorChange(color)}\n                        className={cn(\n                          'w-5 h-5 rounded-full border-2 transition-transform hover:scale-110',\n                          folder.color === color\n                            ? 'border-[hsl(var(--theme-foreground))]'\n                            : 'border-transparent'\n                        )}\n                        style={{ backgroundColor: color }}\n                      />\n                    ))}\n                  </div>\n                )}\n\n                <button\n                  onClick={handleAddSubfolder}\n                  className=\"w-full flex items-center gap-2 px-3 py-2 text-sm text-[hsl(var(--theme-foreground))] hover:bg-[hsl(var(--theme-muted))] transition-colors\"\n                >\n                  <Plus className=\"w-3.5 h-3.5\" />\n                  Add Subfolder\n                </button>\n\n                <div className=\"h-px bg-[hsl(var(--theme-border))]\" />\n\n                <button\n                  onClick={handleDelete}\n                  className=\"w-full flex items-center gap-2 px-3 py-2 text-sm text-red-500 hover:bg-red-500/10 transition-colors\"\n                >\n                  <Trash2 className=\"w-3.5 h-3.5\" />\n                  Delete\n                </button>\n              </motion.div>\n            )}\n          </AnimatePresence>\n        </div>\n      </div>\n\n      {/* Subfolders */}\n      <AnimatePresence>\n        {isExpanded && subfolders.length > 0 && (\n          <motion.div\n            initial={{ height: 0, opacity: 0 }}\n            animate={{ height: 'auto', opacity: 1 }}\n            exit={{ height: 0, opacity: 0 }}\n            transition={{ duration: 0.2 }}\n          >\n            {subfolders.map((subfolder) => (\n              <FolderItem key={subfolder.id} folder={subfolder} depth={depth + 1} />\n            ))}\n          </motion.div>\n        )}\n      </AnimatePresence>\n    </div>\n  );\n}\n\nexport function NotesFolderTree({ className }: { className?: string }) {\n  const { folders, selectedFolderId, selectFolder, createFolder, notes } = useNotes();\n  const [isCreating, setIsCreating] = useState(false);\n  const [newFolderName, setNewFolderName] = useState('');\n  const inputRef = useRef<HTMLInputElement>(null);\n\n  const rootFolders = folders.filter((f) => f.parentId === null);\n  const allNotesCount = notes.length;\n\n  // Focus input when creating\n  useEffect(() => {\n    if (isCreating && inputRef.current) {\n      inputRef.current.focus();\n    }\n  }, [isCreating]);\n\n  const handleCreateFolder = useCallback(() => {\n    if (newFolderName.trim()) {\n      createFolder(newFolderName.trim());\n      setNewFolderName('');\n    }\n    setIsCreating(false);\n  }, [createFolder, newFolderName]);\n\n  return (\n    <div className={cn('flex flex-col h-full', className)}>\n      {/* Header */}\n      <div className=\"flex items-center justify-between px-3 py-2 border-b border-[hsl(var(--theme-border))]\">\n        <span\n          className=\"text-sm font-semibold text-[hsl(var(--theme-foreground))]\"\n          style={{ fontFamily: 'var(--theme-font-heading)' }}\n        >\n          Folders\n        </span>\n        <button\n          onClick={() => setIsCreating(true)}\n          className=\"p-1 rounded-md hover:bg-[hsl(var(--theme-muted))] text-[hsl(var(--theme-muted-foreground))] hover:text-[hsl(var(--theme-foreground))] transition-colors\"\n          title=\"New folder\"\n        >\n          <Plus className=\"w-4 h-4\" />\n        </button>\n      </div>\n\n      {/* Folder list */}\n      <div className=\"flex-1 overflow-y-auto p-2 space-y-0.5\">\n        {/* All Notes */}\n        <div\n          onClick={() => selectFolder(null)}\n          className={cn(\n            'flex items-center gap-2 px-2 py-1.5 rounded-lg cursor-pointer transition-colors',\n            selectedFolderId === null\n              ? 'bg-[hsl(var(--theme-primary)/0.15)] text-[hsl(var(--theme-primary))]'\n              : 'text-[hsl(var(--theme-foreground))] hover:bg-[hsl(var(--theme-muted))]'\n          )}\n        >\n          <FileText className=\"w-4 h-4\" />\n          <span className=\"flex-1 text-sm\">All Notes</span>\n          <span className=\"text-xs text-[hsl(var(--theme-muted-foreground))]\">\n            {allNotesCount}\n          </span>\n        </div>\n\n        {/* Root folders */}\n        {rootFolders.map((folder) => (\n          <FolderItem key={folder.id} folder={folder} />\n        ))}\n\n        {/* New folder input */}\n        <AnimatePresence>\n          {isCreating && (\n            <motion.div\n              initial={{ opacity: 0, height: 0 }}\n              animate={{ opacity: 1, height: 'auto' }}\n              exit={{ opacity: 0, height: 0 }}\n              className=\"flex items-center gap-2 px-2 py-1.5\"\n            >\n              <Folder className=\"w-4 h-4 text-[hsl(var(--theme-muted-foreground))]\" />\n              <input\n                ref={inputRef}\n                value={newFolderName}\n                onChange={(e) => setNewFolderName(e.target.value)}\n                onBlur={handleCreateFolder}\n                onKeyDown={(e) => {\n                  if (e.key === 'Enter') handleCreateFolder();\n                  if (e.key === 'Escape') {\n                    setNewFolderName('');\n                    setIsCreating(false);\n                  }\n                }}\n                placeholder=\"Folder name\"\n                className=\"flex-1 min-w-0 px-2 py-1 text-sm bg-[hsl(var(--theme-background))] border border-[hsl(var(--theme-border))] rounded outline-none focus:border-[hsl(var(--theme-primary))]\"\n              />\n            </motion.div>\n          )}\n        </AnimatePresence>\n      </div>\n    </div>\n  );\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 1076, "column": 0}, "map": {"version":3,"sources":["file:///Users/jamesspalding/OpenClaw-OS/src/components/notes/NotesList.tsx"],"sourcesContent":["'use client';\n\nimport { useCallback, useMemo } from 'react';\nimport { motion, AnimatePresence } from 'framer-motion';\nimport { Plus, Pin, FileText, Clock, Grid, List, SortAsc } from 'lucide-react';\nimport { useNotes, type Note, type SortOption, type ViewMode } from '@/context/NotesContext';\nimport { cn } from '@/lib/utils';\n\ninterface NotesListProps {\n  className?: string;\n}\n\nfunction NoteCard({ note, isSelected }: { note: Note; isSelected: boolean }) {\n  const { selectNote, folders } = useNotes();\n\n  const folder = folders.find((f) => f.id === note.folderId);\n\n  const preview = useMemo(() => {\n    // Strip markdown and get first ~100 chars\n    return note.content\n      .replace(/^#+\\s+/gm, '')\n      .replace(/[*_`~\\[\\]]/g, '')\n      .replace(/\\n+/g, ' ')\n      .trim()\n      .substring(0, 100);\n  }, [note.content]);\n\n  const formatDate = (timestamp: number) => {\n    const now = Date.now();\n    const diff = now - timestamp;\n    const minutes = Math.floor(diff / 60000);\n    const hours = Math.floor(diff / 3600000);\n    const days = Math.floor(diff / 86400000);\n\n    if (minutes < 1) return 'Just now';\n    if (minutes < 60) return `${minutes}m ago`;\n    if (hours < 24) return `${hours}h ago`;\n    if (days < 7) return `${days}d ago`;\n    return new Date(timestamp).toLocaleDateString('en-US', {\n      month: 'short',\n      day: 'numeric',\n    });\n  };\n\n  return (\n    <motion.button\n      onClick={() => selectNote(note.id)}\n      layout\n      initial={{ opacity: 0, y: 10 }}\n      animate={{ opacity: 1, y: 0 }}\n      exit={{ opacity: 0, y: -10 }}\n      className={cn(\n        'w-full text-left p-3 rounded-lg border transition-all',\n        isSelected\n          ? 'bg-[hsl(var(--theme-primary)/0.1)] border-[hsl(var(--theme-primary))]'\n          : 'bg-[hsl(var(--theme-card))] border-[hsl(var(--theme-border))] hover:border-[hsl(var(--theme-primary)/0.5)]'\n      )}\n    >\n      {/* Header */}\n      <div className=\"flex items-start gap-2 mb-1\">\n        <h3\n          className={cn(\n            'flex-1 font-medium text-sm truncate',\n            isSelected\n              ? 'text-[hsl(var(--theme-primary))]'\n              : 'text-[hsl(var(--theme-foreground))]'\n          )}\n          style={{ fontFamily: 'var(--theme-font-heading)' }}\n        >\n          {note.title || 'Untitled'}\n        </h3>\n        {note.isPinned && (\n          <Pin className=\"w-3.5 h-3.5 flex-shrink-0 text-[hsl(var(--theme-primary))]\" />\n        )}\n      </div>\n\n      {/* Preview */}\n      {preview && (\n        <p className=\"text-xs text-[hsl(var(--theme-muted-foreground))] line-clamp-2 mb-2\">\n          {preview}\n        </p>\n      )}\n\n      {/* Footer */}\n      <div className=\"flex items-center gap-2 text-[10px] text-[hsl(var(--theme-muted-foreground))]\">\n        {folder && (\n          <>\n            <span className=\"flex items-center gap-1\">\n              <div\n                className=\"w-2 h-2 rounded-sm\"\n                style={{ backgroundColor: folder.color }}\n              />\n              {folder.name}\n            </span>\n            <span>¬∑</span>\n          </>\n        )}\n        <span className=\"flex items-center gap-1\">\n          <Clock className=\"w-2.5 h-2.5\" />\n          {formatDate(note.updatedAt)}\n        </span>\n      </div>\n    </motion.button>\n  );\n}\n\nfunction NoteRow({ note, isSelected }: { note: Note; isSelected: boolean }) {\n  const { selectNote, folders } = useNotes();\n  const folder = folders.find((f) => f.id === note.folderId);\n\n  const formatDate = (timestamp: number) => {\n    const now = Date.now();\n    const diff = now - timestamp;\n    const minutes = Math.floor(diff / 60000);\n    const hours = Math.floor(diff / 3600000);\n    const days = Math.floor(diff / 86400000);\n\n    if (minutes < 1) return 'Just now';\n    if (minutes < 60) return `${minutes}m`;\n    if (hours < 24) return `${hours}h`;\n    if (days < 7) return `${days}d`;\n    return new Date(timestamp).toLocaleDateString('en-US', {\n      month: 'short',\n      day: 'numeric',\n    });\n  };\n\n  return (\n    <motion.button\n      onClick={() => selectNote(note.id)}\n      layout\n      initial={{ opacity: 0, x: -10 }}\n      animate={{ opacity: 1, x: 0 }}\n      exit={{ opacity: 0, x: 10 }}\n      className={cn(\n        'w-full text-left px-3 py-2.5 flex items-center gap-3 rounded-lg transition-all',\n        isSelected\n          ? 'bg-[hsl(var(--theme-primary)/0.1)] text-[hsl(var(--theme-primary))]'\n          : 'hover:bg-[hsl(var(--theme-muted))] text-[hsl(var(--theme-foreground))]'\n      )}\n    >\n      {note.isPinned ? (\n        <Pin className=\"w-4 h-4 flex-shrink-0 text-[hsl(var(--theme-primary))]\" />\n      ) : (\n        <FileText className=\"w-4 h-4 flex-shrink-0 text-[hsl(var(--theme-muted-foreground))]\" />\n      )}\n\n      <span\n        className=\"flex-1 text-sm truncate font-medium\"\n        style={{ fontFamily: 'var(--theme-font-heading)' }}\n      >\n        {note.title || 'Untitled'}\n      </span>\n\n      {folder && (\n        <span className=\"hidden sm:flex items-center gap-1 text-xs text-[hsl(var(--theme-muted-foreground))]\">\n          <div\n            className=\"w-2 h-2 rounded-sm\"\n            style={{ backgroundColor: folder.color }}\n          />\n        </span>\n      )}\n\n      <span className=\"text-xs text-[hsl(var(--theme-muted-foreground))]\">\n        {formatDate(note.updatedAt)}\n      </span>\n    </motion.button>\n  );\n}\n\nconst SORT_OPTIONS: { value: SortOption; label: string }[] = [\n  { value: 'updated', label: 'Last Modified' },\n  { value: 'created', label: 'Date Created' },\n  { value: 'title', label: 'Title' },\n];\n\nexport function NotesList({ className }: NotesListProps) {\n  const {\n    createNote,\n    selectedNoteId,\n    selectedFolderId,\n    selectedFolder,\n    getFilteredNotes,\n    sortBy,\n    setSortBy,\n    viewMode,\n    setViewMode,\n    searchQuery,\n  } = useNotes();\n\n  const filteredNotes = getFilteredNotes();\n\n  const handleCreateNote = useCallback(() => {\n    createNote(selectedFolderId);\n  }, [createNote, selectedFolderId]);\n\n  const folderName = selectedFolder?.name ?? 'All Notes';\n\n  return (\n    <div className={cn('flex flex-col h-full', className)}>\n      {/* Header */}\n      <div className=\"flex-shrink-0 px-3 py-2 border-b border-[hsl(var(--theme-border))] space-y-2\">\n        <div className=\"flex items-center justify-between\">\n          <h2\n            className=\"text-sm font-semibold text-[hsl(var(--theme-foreground))] truncate\"\n            style={{ fontFamily: 'var(--theme-font-heading)' }}\n          >\n            {searchQuery ? `Search: \"${searchQuery}\"` : folderName}\n          </h2>\n          <button\n            onClick={handleCreateNote}\n            className=\"p-1.5 rounded-lg bg-[hsl(var(--theme-primary))] text-white hover:bg-[hsl(var(--theme-primary)/0.9)] transition-colors\"\n            title=\"New note\"\n            aria-label=\"Create new note\"\n          >\n            <Plus className=\"w-4 h-4\" aria-hidden=\"true\" />\n          </button>\n        </div>\n\n        {/* Sort and view controls */}\n        <div className=\"flex items-center justify-between\">\n          <div className=\"flex items-center gap-1\">\n            <SortAsc className=\"w-3.5 h-3.5 text-[hsl(var(--theme-muted-foreground))]\" />\n            <select\n              value={sortBy}\n              onChange={(e) => setSortBy(e.target.value as SortOption)}\n              className=\"text-xs bg-transparent border-none outline-none text-[hsl(var(--theme-muted-foreground))] cursor-pointer\"\n            >\n              {SORT_OPTIONS.map((opt) => (\n                <option key={opt.value} value={opt.value}>\n                  {opt.label}\n                </option>\n              ))}\n            </select>\n          </div>\n\n          <div className=\"flex items-center gap-0.5 p-0.5 rounded-md bg-[hsl(var(--theme-muted))]\" role=\"group\" aria-label=\"View mode\">\n            <button\n              onClick={() => setViewMode('list')}\n              className={cn(\n                'p-1 rounded transition-colors',\n                viewMode === 'list'\n                  ? 'bg-[hsl(var(--theme-card))] text-[hsl(var(--theme-foreground))]'\n                  : 'text-[hsl(var(--theme-muted-foreground))]'\n              )}\n              aria-label=\"List view\"\n              aria-pressed={viewMode === 'list'}\n            >\n              <List className=\"w-3.5 h-3.5\" aria-hidden=\"true\" />\n            </button>\n            <button\n              onClick={() => setViewMode('grid')}\n              className={cn(\n                'p-1 rounded transition-colors',\n                viewMode === 'grid'\n                  ? 'bg-[hsl(var(--theme-card))] text-[hsl(var(--theme-foreground))]'\n                  : 'text-[hsl(var(--theme-muted-foreground))]'\n              )}\n              aria-label=\"Grid view\"\n              aria-pressed={viewMode === 'grid'}\n            >\n              <Grid className=\"w-3.5 h-3.5\" aria-hidden=\"true\" />\n            </button>\n          </div>\n        </div>\n      </div>\n\n      {/* Notes list */}\n      <div className=\"flex-1 overflow-y-auto p-2\">\n        {filteredNotes.length === 0 ? (\n          <div className=\"flex flex-col items-center justify-center h-full text-center p-4\">\n            <FileText className=\"w-12 h-12 text-[hsl(var(--theme-muted-foreground))] mb-3\" />\n            <p className=\"text-sm text-[hsl(var(--theme-muted-foreground))]\">\n              {searchQuery ? 'No notes found' : 'No notes yet'}\n            </p>\n            {!searchQuery && (\n              <button\n                onClick={handleCreateNote}\n                className=\"mt-3 px-3 py-1.5 text-sm rounded-lg bg-[hsl(var(--theme-primary))] text-white hover:bg-[hsl(var(--theme-primary)/0.9)] transition-colors\"\n              >\n                Create your first note\n              </button>\n            )}\n          </div>\n        ) : viewMode === 'grid' ? (\n          <motion.div layout className=\"grid gap-2\">\n            <AnimatePresence mode=\"popLayout\">\n              {filteredNotes.map((note) => (\n                <NoteCard\n                  key={note.id}\n                  note={note}\n                  isSelected={note.id === selectedNoteId}\n                />\n              ))}\n            </AnimatePresence>\n          </motion.div>\n        ) : (\n          <motion.div layout className=\"space-y-0.5\">\n            <AnimatePresence mode=\"popLayout\">\n              {filteredNotes.map((note) => (\n                <NoteRow\n                  key={note.id}\n                  note={note}\n                  isSelected={note.id === selectedNoteId}\n                />\n              ))}\n            </AnimatePresence>\n          </motion.div>\n        )}\n      </div>\n\n      {/* Footer with count */}\n      <div className=\"flex-shrink-0 px-3 py-1.5 border-t border-[hsl(var(--theme-border))]\">\n        <p className=\"text-[10px] text-[hsl(var(--theme-muted-foreground))]\">\n          {filteredNotes.length} {filteredNotes.length === 1 ? 'note' : 'notes'}\n        </p>\n      </div>\n    </div>\n  );\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 1608, "column": 0}, "map": {"version":3,"sources":["file:///Users/jamesspalding/OpenClaw-OS/src/lib/scheduling/types.ts"],"sourcesContent":["/**\n * Scheduling Types - TypeScript definitions for the Calendly clone\n */\n\nexport type LocationType = \"google_meet\" | \"zoom\" | \"phone\" | \"in_person\" | \"custom\";\n\nexport type BookingStatus =\n  | \"pending\"\n  | \"confirmed\"\n  | \"cancelled\"\n  | \"rescheduled\"\n  | \"completed\"\n  | \"no_show\";\n\nexport interface TimeSlot {\n  start: string; // \"HH:mm\" format\n  end: string;\n}\n\nexport interface DaySchedule {\n  dayOfWeek: number; // 0-6 (Sunday-Saturday)\n  isAvailable: boolean;\n  slots: TimeSlot[];\n}\n\nexport interface Question {\n  id: string;\n  label: string;\n  type: \"text\" | \"textarea\" | \"select\";\n  required: boolean;\n  options?: string[];\n}\n\nexport interface QuestionResponse {\n  questionId: string;\n  questionLabel: string;\n  answer: string;\n}\n\nexport interface EventType {\n  _id: string;\n  ownerId: string;\n  title: string;\n  slug: string;\n  description?: string;\n  duration: number;\n  color: string;\n  isActive: boolean;\n  bufferBefore: number;\n  bufferAfter: number;\n  maxBookingsPerDay?: number;\n  minNotice: number;\n  maxAdvance: number;\n  locationType: LocationType;\n  locationValue?: string;\n  questions: Question[];\n  createdAt: number;\n  updatedAt: number;\n}\n\nexport interface Availability {\n  _id: string;\n  ownerId: string;\n  name: string;\n  isDefault: boolean;\n  timezone: string;\n  schedule: DaySchedule[];\n  createdAt: number;\n  updatedAt: number;\n}\n\nexport interface AvailabilityOverride {\n  _id: string;\n  ownerId: string;\n  date: string;\n  isBlocked: boolean;\n  slots?: TimeSlot[];\n  reason?: string;\n}\n\nexport interface Booking {\n  _id: string;\n  eventTypeId: string;\n  hostId: string;\n  guestEmail: string;\n  guestName: string;\n  guestTimezone: string;\n  startTime: number;\n  endTime: number;\n  status: BookingStatus;\n  title: string;\n  location?: string;\n  locationType: string;\n  notes?: string;\n  responses?: QuestionResponse[];\n  googleEventId?: string;\n  cancelledAt?: number;\n  cancelReason?: string;\n  cancelledBy?: \"host\" | \"guest\";\n  rescheduledFrom?: string;\n  rescheduledTo?: string;\n  createdAt: number;\n  updatedAt: number;\n}\n\nexport interface CalendarIntegration {\n  _id: string;\n  ownerId: string;\n  provider: \"google\";\n  accessToken: string;\n  refreshToken: string;\n  tokenExpiry: number;\n  calendarId: string;\n  calendarEmail: string;\n  syncEnabled: boolean;\n  blockExternalEvents: boolean;\n  lastSyncAt?: number;\n  createdAt: number;\n  updatedAt: number;\n}\n\nexport interface AvailableSlot {\n  time: string; // \"HH:mm\" format\n  timestamp: number;\n}\n\nexport interface GoogleCalendarEvent {\n  id?: string;\n  summary: string;\n  description?: string;\n  start: {\n    dateTime: string;\n    timeZone: string;\n  };\n  end: {\n    dateTime: string;\n    timeZone: string;\n  };\n  attendees?: Array<{\n    email: string;\n    displayName?: string;\n    responseStatus?: string;\n  }>;\n  conferenceData?: {\n    createRequest?: {\n      requestId: string;\n      conferenceSolutionKey: {\n        type: string;\n      };\n    };\n    entryPoints?: Array<{\n      entryPointType: string;\n      uri: string;\n      label?: string;\n    }>;\n  };\n  reminders?: {\n    useDefault: boolean;\n    overrides?: Array<{\n      method: string;\n      minutes: number;\n    }>;\n  };\n}\n\nexport interface GoogleTokenResponse {\n  access_token: string;\n  refresh_token?: string;\n  expires_in: number;\n  token_type: string;\n  scope: string;\n}\n\nexport interface GoogleCalendarListResponse {\n  items: Array<{\n    id: string;\n    summary: string;\n    primary?: boolean;\n    accessRole: string;\n  }>;\n}\n\nexport interface GoogleFreeBusyResponse {\n  calendars: {\n    [calendarId: string]: {\n      busy: Array<{\n        start: string;\n        end: string;\n      }>;\n    };\n  };\n}\n\n// Form types for UI\nexport interface BookingFormData {\n  guestName: string;\n  guestEmail: string;\n  guestTimezone: string;\n  notes?: string;\n  responses?: QuestionResponse[];\n}\n\nexport interface EventTypeFormData {\n  title: string;\n  description?: string;\n  duration: number;\n  color: string;\n  locationType: LocationType;\n  locationValue?: string;\n  bufferBefore?: number;\n  bufferAfter?: number;\n  minNotice?: number;\n  maxAdvance?: number;\n  questions?: Question[];\n}\n\n// Calendar view types\nexport type CalendarView = \"month\" | \"week\" | \"day\" | \"list\";\n\nexport interface CalendarDay {\n  date: Date;\n  isCurrentMonth: boolean;\n  isToday: boolean;\n  bookings: Booking[];\n}\n\n// Duration options\nexport const DURATION_OPTIONS = [\n  { value: 15, label: \"15 minutes\" },\n  { value: 30, label: \"30 minutes\" },\n  { value: 45, label: \"45 minutes\" },\n  { value: 60, label: \"1 hour\" },\n  { value: 90, label: \"1.5 hours\" },\n  { value: 120, label: \"2 hours\" },\n] as const;\n\n// Color options for event types\nexport const EVENT_COLORS = [\n  { value: \"#3b82f6\", label: \"Blue\" },\n  { value: \"#10b981\", label: \"Green\" },\n  { value: \"#f59e0b\", label: \"Yellow\" },\n  { value: \"#ef4444\", label: \"Red\" },\n  { value: \"#8b5cf6\", label: \"Purple\" },\n  { value: \"#ec4899\", label: \"Pink\" },\n  { value: \"#06b6d4\", label: \"Cyan\" },\n  { value: \"#f97316\", label: \"Orange\" },\n] as const;\n\n// Day names\nexport const DAY_NAMES = [\n  \"Sunday\",\n  \"Monday\",\n  \"Tuesday\",\n  \"Wednesday\",\n  \"Thursday\",\n  \"Friday\",\n  \"Saturday\",\n] as const;\n\nexport const DAY_NAMES_SHORT = [\"Sun\", \"Mon\", \"Tue\", \"Wed\", \"Thu\", \"Fri\", \"Sat\"] as const;\n"],"names":[],"mappings":"AAAA;;CAEC;;;;;;;;;;AAiOM,MAAM,mBAAmB;IAC9B;QAAE,OAAO;QAAI,OAAO;IAAa;IACjC;QAAE,OAAO;QAAI,OAAO;IAAa;IACjC;QAAE,OAAO;QAAI,OAAO;IAAa;IACjC;QAAE,OAAO;QAAI,OAAO;IAAS;IAC7B;QAAE,OAAO;QAAI,OAAO;IAAY;IAChC;QAAE,OAAO;QAAK,OAAO;IAAU;CAChC;AAGM,MAAM,eAAe;IAC1B;QAAE,OAAO;QAAW,OAAO;IAAO;IAClC;QAAE,OAAO;QAAW,OAAO;IAAQ;IACnC;QAAE,OAAO;QAAW,OAAO;IAAS;IACpC;QAAE,OAAO;QAAW,OAAO;IAAM;IACjC;QAAE,OAAO;QAAW,OAAO;IAAS;IACpC;QAAE,OAAO;QAAW,OAAO;IAAO;IAClC;QAAE,OAAO;QAAW,OAAO;IAAO;IAClC;QAAE,OAAO;QAAW,OAAO;IAAS;CACrC;AAGM,MAAM,YAAY;IACvB;IACA;IACA;IACA;IACA;IACA;IACA;CACD;AAEM,MAAM,kBAAkB;IAAC;IAAO;IAAO;IAAO;IAAO;IAAO;IAAO;CAAM"}},
    {"offset": {"line": 1702, "column": 0}, "map": {"version":3,"sources":["file:///Users/jamesspalding/OpenClaw-OS/src/lib/scheduling/utils.ts"],"sourcesContent":["/**\n * Scheduling Utilities\n *\n * Helper functions for date/time handling and formatting.\n */\n\nimport { DAY_NAMES, DAY_NAMES_SHORT, type DaySchedule, type TimeSlot } from \"./types\";\n\n// Re-export constants for convenience\nexport { DAY_NAMES, DAY_NAMES_SHORT };\n\n/**\n * Format a date to \"YYYY-MM-DD\" string\n */\nexport function formatDateString(date: Date): string {\n  const year = date.getFullYear();\n  const month = String(date.getMonth() + 1).padStart(2, \"0\");\n  const day = String(date.getDate()).padStart(2, \"0\");\n  return `${year}-${month}-${day}`;\n}\n\n/**\n * Parse \"YYYY-MM-DD\" string to Date\n */\nexport function parseDateString(dateString: string): Date {\n  const [year, month, day] = dateString.split(\"-\").map(Number);\n  return new Date(year, month - 1, day);\n}\n\n/**\n * Format time string from minutes\n */\nexport function formatTimeFromMinutes(minutes: number): string {\n  const hours = Math.floor(minutes / 60);\n  const mins = minutes % 60;\n  return `${hours.toString().padStart(2, \"0\")}:${mins.toString().padStart(2, \"0\")}`;\n}\n\n/**\n * Parse \"HH:mm\" string to minutes from midnight\n */\nexport function parseTimeToMinutes(time: string): number {\n  const [hours, minutes] = time.split(\":\").map(Number);\n  return hours * 60 + minutes;\n}\n\n/**\n * Format timestamp to human-readable date\n */\nexport function formatDate(timestamp: number, options?: Intl.DateTimeFormatOptions): string {\n  return new Date(timestamp).toLocaleDateString(\"en-US\", {\n    weekday: \"long\",\n    year: \"numeric\",\n    month: \"long\",\n    day: \"numeric\",\n    ...options,\n  });\n}\n\n/**\n * Format timestamp to human-readable time\n */\nexport function formatTime(timestamp: number, timezone?: string): string {\n  return new Date(timestamp).toLocaleTimeString(\"en-US\", {\n    hour: \"numeric\",\n    minute: \"2-digit\",\n    hour12: true,\n    ...(timezone && { timeZone: timezone }),\n  });\n}\n\n/**\n * Format timestamp to human-readable date and time\n */\nexport function formatDateTime(timestamp: number, timezone?: string): string {\n  return new Date(timestamp).toLocaleString(\"en-US\", {\n    weekday: \"short\",\n    month: \"short\",\n    day: \"numeric\",\n    hour: \"numeric\",\n    minute: \"2-digit\",\n    hour12: true,\n    ...(timezone && { timeZone: timezone }),\n  });\n}\n\n/**\n * Format duration in minutes to human-readable string\n */\nexport function formatDuration(minutes: number): string {\n  if (minutes < 60) {\n    return `${minutes} min`;\n  }\n  const hours = Math.floor(minutes / 60);\n  const mins = minutes % 60;\n  if (mins === 0) {\n    return hours === 1 ? \"1 hour\" : `${hours} hours`;\n  }\n  return `${hours}h ${mins}m`;\n}\n\n/**\n * Get relative time string (e.g., \"in 2 hours\", \"tomorrow\")\n */\nexport function getRelativeTime(timestamp: number): string {\n  const now = Date.now();\n  const diff = timestamp - now;\n\n  const minutes = Math.floor(diff / 60000);\n  const hours = Math.floor(diff / 3600000);\n  const days = Math.floor(diff / 86400000);\n\n  if (diff < 0) {\n    return \"Past\";\n  }\n\n  if (minutes < 60) {\n    return `in ${minutes} min`;\n  }\n\n  if (hours < 24) {\n    return `in ${hours} hour${hours === 1 ? \"\" : \"s\"}`;\n  }\n\n  if (days === 1) {\n    return \"Tomorrow\";\n  }\n\n  if (days < 7) {\n    return `in ${days} days`;\n  }\n\n  return formatDate(timestamp, { weekday: undefined, year: undefined });\n}\n\n/**\n * Get user's timezone\n */\nexport function getUserTimezone(): string {\n  return Intl.DateTimeFormat().resolvedOptions().timeZone;\n}\n\n/**\n * Format timezone for display\n */\nexport function formatTimezone(timezone: string): string {\n  try {\n    const now = new Date();\n    const formatter = new Intl.DateTimeFormat(\"en-US\", {\n      timeZone: timezone,\n      timeZoneName: \"short\",\n    });\n    const parts = formatter.formatToParts(now);\n    const tzPart = parts.find((p) => p.type === \"timeZoneName\");\n    return tzPart ? `${timezone} (${tzPart.value})` : timezone;\n  } catch {\n    return timezone;\n  }\n}\n\n/**\n * Get day name from day of week number\n */\nexport function getDayName(dayOfWeek: number, short = false): string {\n  return short ? DAY_NAMES_SHORT[dayOfWeek] : DAY_NAMES[dayOfWeek];\n}\n\n/**\n * Generate dates for a calendar month view\n */\nexport function getCalendarDates(year: number, month: number): Date[] {\n  const firstDay = new Date(year, month, 1);\n  const lastDay = new Date(year, month + 1, 0);\n\n  // Start from the Sunday of the first week\n  const startDate = new Date(firstDay);\n  startDate.setDate(startDate.getDate() - firstDay.getDay());\n\n  // End at the Saturday of the last week\n  const endDate = new Date(lastDay);\n  endDate.setDate(endDate.getDate() + (6 - lastDay.getDay()));\n\n  const dates: Date[] = [];\n  const current = new Date(startDate);\n\n  while (current <= endDate) {\n    dates.push(new Date(current));\n    current.setDate(current.getDate() + 1);\n  }\n\n  return dates;\n}\n\n/**\n * Generate dates for a week view\n */\nexport function getWeekDates(date: Date): Date[] {\n  const startOfWeek = new Date(date);\n  startOfWeek.setDate(date.getDate() - date.getDay());\n\n  const dates: Date[] = [];\n  for (let i = 0; i < 7; i++) {\n    const d = new Date(startOfWeek);\n    d.setDate(startOfWeek.getDate() + i);\n    dates.push(d);\n  }\n\n  return dates;\n}\n\n/**\n * Check if two dates are the same day\n */\nexport function isSameDay(date1: Date, date2: Date): boolean {\n  return (\n    date1.getFullYear() === date2.getFullYear() &&\n    date1.getMonth() === date2.getMonth() &&\n    date1.getDate() === date2.getDate()\n  );\n}\n\n/**\n * Check if a date is today\n */\nexport function isToday(date: Date): boolean {\n  return isSameDay(date, new Date());\n}\n\n/**\n * Check if a date is in the past\n */\nexport function isPast(date: Date): boolean {\n  const today = new Date();\n  today.setHours(0, 0, 0, 0);\n  return date < today;\n}\n\n/**\n * Get start and end of day timestamps\n */\nexport function getDayBounds(date: Date): { start: number; end: number } {\n  const start = new Date(date);\n  start.setHours(0, 0, 0, 0);\n\n  const end = new Date(date);\n  end.setHours(23, 59, 59, 999);\n\n  return { start: start.getTime(), end: end.getTime() };\n}\n\n/**\n * Create default availability schedule (9-5 weekdays)\n */\nexport function createDefaultSchedule(): DaySchedule[] {\n  return [\n    { dayOfWeek: 0, isAvailable: false, slots: [] },\n    { dayOfWeek: 1, isAvailable: true, slots: [{ start: \"09:00\", end: \"17:00\" }] },\n    { dayOfWeek: 2, isAvailable: true, slots: [{ start: \"09:00\", end: \"17:00\" }] },\n    { dayOfWeek: 3, isAvailable: true, slots: [{ start: \"09:00\", end: \"17:00\" }] },\n    { dayOfWeek: 4, isAvailable: true, slots: [{ start: \"09:00\", end: \"17:00\" }] },\n    { dayOfWeek: 5, isAvailable: true, slots: [{ start: \"09:00\", end: \"17:00\" }] },\n    { dayOfWeek: 6, isAvailable: false, slots: [] },\n  ];\n}\n\n/**\n * Merge overlapping time slots\n */\nexport function mergeTimeSlots(slots: TimeSlot[]): TimeSlot[] {\n  if (slots.length === 0) return [];\n\n  // Sort by start time\n  const sorted = [...slots].sort((a, b) =>\n    parseTimeToMinutes(a.start) - parseTimeToMinutes(b.start)\n  );\n\n  const merged: TimeSlot[] = [sorted[0]];\n\n  for (let i = 1; i < sorted.length; i++) {\n    const current = sorted[i];\n    const last = merged[merged.length - 1];\n\n    const lastEnd = parseTimeToMinutes(last.end);\n    const currentStart = parseTimeToMinutes(current.start);\n\n    if (currentStart <= lastEnd) {\n      // Overlapping, merge\n      const currentEnd = parseTimeToMinutes(current.end);\n      if (currentEnd > lastEnd) {\n        last.end = current.end;\n      }\n    } else {\n      // No overlap, add new slot\n      merged.push(current);\n    }\n  }\n\n  return merged;\n}\n\n/**\n * Generate time slot options for select inputs\n */\nexport function generateTimeOptions(\n  startHour = 0,\n  endHour = 24,\n  intervalMinutes = 30\n): Array<{ value: string; label: string }> {\n  const options: Array<{ value: string; label: string }> = [];\n\n  for (let minutes = startHour * 60; minutes < endHour * 60; minutes += intervalMinutes) {\n    const time = formatTimeFromMinutes(minutes);\n    const label = formatTime(new Date().setHours(0, minutes, 0, 0));\n    options.push({ value: time, label });\n  }\n\n  return options;\n}\n\n/**\n * Convert timestamp to timezone-aware Date\n */\nexport function toTimezone(timestamp: number, timezone: string): Date {\n  const date = new Date(timestamp);\n  const options: Intl.DateTimeFormatOptions = {\n    timeZone: timezone,\n    year: \"numeric\",\n    month: \"2-digit\",\n    day: \"2-digit\",\n    hour: \"2-digit\",\n    minute: \"2-digit\",\n    second: \"2-digit\",\n    hour12: false,\n  };\n\n  const parts = new Intl.DateTimeFormat(\"en-CA\", options).formatToParts(date);\n  const get = (type: string) => parts.find((p) => p.type === type)?.value || \"0\";\n\n  return new Date(\n    parseInt(get(\"year\")),\n    parseInt(get(\"month\")) - 1,\n    parseInt(get(\"day\")),\n    parseInt(get(\"hour\")),\n    parseInt(get(\"minute\")),\n    parseInt(get(\"second\"))\n  );\n}\n\n/**\n * Get booking link URL\n */\nexport function getBookingLink(username: string, eventSlug: string): string {\n  if (typeof window !== \"undefined\") {\n    return `${window.location.origin}/book/${username}/${eventSlug}`;\n  }\n  return `/book/${username}/${eventSlug}`;\n}\n\n/**\n * Copy text to clipboard\n */\nexport async function copyToClipboard(text: string): Promise<boolean> {\n  try {\n    await navigator.clipboard.writeText(text);\n    return true;\n  } catch {\n    // Fallback for older browsers\n    const textarea = document.createElement(\"textarea\");\n    textarea.value = text;\n    textarea.style.position = \"fixed\";\n    textarea.style.opacity = \"0\";\n    document.body.appendChild(textarea);\n    textarea.select();\n    try {\n      document.execCommand(\"copy\");\n      return true;\n    } catch {\n      return false;\n    } finally {\n      document.body.removeChild(textarea);\n    }\n  }\n}\n\n/**\n * Validate email format\n */\nexport function isValidEmail(email: string): boolean {\n  const emailRegex = /^[^\\s@]+@[^\\s@]+\\.[^\\s@]+$/;\n  return emailRegex.test(email);\n}\n\n/**\n * Generate a unique ID\n */\nexport function generateId(): string {\n  return Math.random().toString(36).substring(2, 11) + Date.now().toString(36);\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 2077, "column": 0}, "map": {"version":3,"sources":["file:///Users/jamesspalding/OpenClaw-OS/src/hooks/useScheduling.ts"],"sourcesContent":["/**\n * useScheduling - Hook for managing scheduling operations\n *\n * Provides access to event types, availability, bookings, and calendar sync.\n */\n\n\"use client\";\n\nimport { useCallback, useEffect, useState } from \"react\";\nimport { useQuery, useMutation } from \"@/lib/openclaw/hooks\";\nimport { getUserTimezone } from \"@/lib/scheduling/utils\";\nimport type {\n  EventType,\n  Availability,\n  Booking,\n  CalendarIntegration,\n  CalendarView,\n} from \"@/lib/scheduling/types\";\n\n// Dynamically import the API to handle cases where schema isn't deployed\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\nlet api: any = null;\ntry {\n  api = require('@/lib/convex-shim').api;\n} catch {\n  // Schema not deployed yet\n}\n\ninterface UseSchedulingOptions {\n  autoInitializeAvailability?: boolean;\n}\n\nexport function useScheduling(options: UseSchedulingOptions = {}) {\n  const { autoInitializeAvailability = true } = options;\n\n  // Local state\n  const [calendarView, setCalendarView] = useState<CalendarView>(\"month\");\n  const [selectedDate, setSelectedDate] = useState<Date>(new Date());\n  const [isConnectingGoogle, setIsConnectingGoogle] = useState(false);\n\n  // Schema is ready if api.scheduling exists (always true with static import)\n  const schemaReady = Boolean(api?.scheduling);\n\n  // Convex queries - use skip pattern for conditional queries\n  const userProfileQuery = useQuery(\n    api.scheduling.getUserProfile,\n    schemaReady ? {} : \"skip\"\n  );\n  const eventTypesQuery = useQuery(\n    api.scheduling.getEventTypes,\n    schemaReady ? {} : \"skip\"\n  );\n  const availabilityQuery = useQuery(\n    api.scheduling.getAvailability,\n    schemaReady ? {} : \"skip\"\n  );\n  const defaultAvailabilityQuery = useQuery(\n    api.scheduling.getDefaultAvailability,\n    schemaReady ? {} : \"skip\"\n  );\n  const calendarIntegrationQuery = useQuery(\n    api.scheduling.getCalendarIntegration,\n    schemaReady ? {} : \"skip\"\n  );\n  const upcomingBookingsQuery = useQuery(\n    api.scheduling.getUpcomingBookings,\n    schemaReady ? { limit: 10 } : \"skip\"\n  );\n\n  // Cast results\n  const userProfile = userProfileQuery as { _id: string; username: string; displayName?: string; email?: string } | null | undefined;\n  const eventTypes = eventTypesQuery as EventType[] | undefined;\n  const availability = availabilityQuery as Availability[] | undefined;\n  const defaultAvailability = defaultAvailabilityQuery as Availability | null | undefined;\n  const calendarIntegration = calendarIntegrationQuery as CalendarIntegration | null | undefined;\n  const upcomingBookings = upcomingBookingsQuery as Booking[] | undefined;\n\n  // Convex mutations - use direct API references\n  const createEventTypeMutation = useMutation(api.scheduling.createEventType);\n  const updateEventTypeMutation = useMutation(api.scheduling.updateEventType);\n  const deleteEventTypeMutation = useMutation(api.scheduling.deleteEventType);\n  const createAvailabilityMutation = useMutation(api.scheduling.createAvailability);\n  const updateAvailabilityMutation = useMutation(api.scheduling.updateAvailability);\n  const deleteAvailabilityMutation = useMutation(api.scheduling.deleteAvailability);\n  const initializeDefaultAvailabilityMutation = useMutation(api.scheduling.initializeDefaultAvailability);\n  const setOverrideMutation = useMutation(api.scheduling.setOverride);\n  const deleteOverrideMutation = useMutation(api.scheduling.deleteOverride);\n  const updateBookingStatusMutation = useMutation(api.scheduling.updateBookingStatus);\n  const rescheduleBookingMutation = useMutation(api.scheduling.rescheduleBooking);\n  const saveCalendarIntegrationMutation = useMutation(api.scheduling.saveCalendarIntegration);\n  const updateCalendarIntegrationMutation = useMutation(api.scheduling.updateCalendarIntegration);\n  const deleteCalendarIntegrationMutation = useMutation(api.scheduling.deleteCalendarIntegration);\n  const updateBookingGoogleEventIdMutation = useMutation(api.scheduling.updateBookingGoogleEventId);\n  const createOrUpdateUserProfileMutation = useMutation(api.scheduling.createOrUpdateUserProfile);\n\n  // Auto-initialize default availability\n  useEffect(() => {\n    if (\n      schemaReady &&\n      autoInitializeAvailability &&\n      availability !== undefined &&\n      availability.length === 0 &&\n      defaultAvailability === null\n    ) {\n      const timezone = getUserTimezone();\n      initializeDefaultAvailabilityMutation({ timezone }).catch(console.error);\n    }\n  }, [\n    schemaReady,\n    autoInitializeAvailability,\n    availability,\n    defaultAvailability,\n    initializeDefaultAvailabilityMutation,\n  ]);\n\n  // User Profile actions\n  const createOrUpdateUserProfile = useCallback(\n    async (data: { username: string; displayName?: string }) => {\n      if (!schemaReady) throw new Error(\"Schema not deployed\");\n      return await createOrUpdateUserProfileMutation(data);\n    },\n    [schemaReady, createOrUpdateUserProfileMutation]\n  );\n\n  // Event Type actions\n  const createEventType = useCallback(\n    async (data: {\n      title: string;\n      description?: string;\n      duration: number;\n      color: string;\n      locationType: \"google_meet\" | \"zoom\" | \"phone\" | \"in_person\" | \"custom\";\n      locationValue?: string;\n      bufferBefore?: number;\n      bufferAfter?: number;\n      minNotice?: number;\n      maxAdvance?: number;\n    }) => {\n      if (!schemaReady) throw new Error(\"Schema not deployed\");\n      return await createEventTypeMutation(data);\n    },\n    [schemaReady, createEventTypeMutation]\n  );\n\n  const updateEventType = useCallback(\n    async (id: string, data: Partial<EventType>) => {\n      if (!schemaReady) throw new Error(\"Schema not deployed\");\n      const { _id, ownerId, createdAt, ...updateData } = data as Record<string, unknown>;\n      await updateEventTypeMutation({ id, ...updateData } as any);\n    },\n    [schemaReady, updateEventTypeMutation]\n  );\n\n  const deleteEventType = useCallback(\n    async (id: string) => {\n      if (!schemaReady) throw new Error(\"Schema not deployed\");\n      await deleteEventTypeMutation({ id } as any);\n    },\n    [schemaReady, deleteEventTypeMutation]\n  );\n\n  // Availability actions\n  const createAvailability = useCallback(\n    async (data: {\n      name: string;\n      timezone: string;\n      isDefault?: boolean;\n      schedule: Array<{\n        dayOfWeek: number;\n        isAvailable: boolean;\n        slots: Array<{ start: string; end: string }>;\n      }>;\n    }) => {\n      if (!schemaReady) throw new Error(\"Schema not deployed\");\n      return await createAvailabilityMutation(data);\n    },\n    [schemaReady, createAvailabilityMutation]\n  );\n\n  const updateAvailability = useCallback(\n    async (id: string, data: Partial<Availability>) => {\n      if (!schemaReady) throw new Error(\"Schema not deployed\");\n      const { _id, ownerId, createdAt, ...updateData } = data as Record<string, unknown>;\n      await updateAvailabilityMutation({ id, ...updateData } as any);\n    },\n    [schemaReady, updateAvailabilityMutation]\n  );\n\n  const deleteAvailability = useCallback(\n    async (id: string) => {\n      if (!schemaReady) throw new Error(\"Schema not deployed\");\n      await deleteAvailabilityMutation({ id } as any);\n    },\n    [schemaReady, deleteAvailabilityMutation]\n  );\n\n  // Override actions\n  const setOverride = useCallback(\n    async (data: {\n      date: string;\n      isBlocked: boolean;\n      slots?: Array<{ start: string; end: string }>;\n      reason?: string;\n    }) => {\n      if (!schemaReady) throw new Error(\"Schema not deployed\");\n      return await setOverrideMutation(data);\n    },\n    [schemaReady, setOverrideMutation]\n  );\n\n  const deleteOverride = useCallback(\n    async (date: string) => {\n      if (!schemaReady) throw new Error(\"Schema not deployed\");\n      await deleteOverrideMutation({ date });\n    },\n    [schemaReady, deleteOverrideMutation]\n  );\n\n  // Booking actions\n  const confirmBooking = useCallback(\n    async (id: string) => {\n      if (!schemaReady) throw new Error(\"Schema not deployed\");\n      await updateBookingStatusMutation({ id, status: \"confirmed\" } as any);\n    },\n    [schemaReady, updateBookingStatusMutation]\n  );\n\n  const cancelBooking = useCallback(\n    async (id: string, reason?: string, cancelledBy?: \"host\" | \"guest\") => {\n      if (!schemaReady) throw new Error(\"Schema not deployed\");\n      await updateBookingStatusMutation({\n        id,\n        status: \"cancelled\",\n        cancelReason: reason,\n        cancelledBy,\n      } as any);\n    },\n    [schemaReady, updateBookingStatusMutation]\n  );\n\n  const markNoShow = useCallback(\n    async (id: string) => {\n      if (!schemaReady) throw new Error(\"Schema not deployed\");\n      await updateBookingStatusMutation({ id, status: \"no_show\" } as any);\n    },\n    [schemaReady, updateBookingStatusMutation]\n  );\n\n  const markCompleted = useCallback(\n    async (id: string) => {\n      if (!schemaReady) throw new Error(\"Schema not deployed\");\n      await updateBookingStatusMutation({ id, status: \"completed\" } as any);\n    },\n    [schemaReady, updateBookingStatusMutation]\n  );\n\n  const rescheduleBooking = useCallback(\n    async (id: string, newStartTime: number) => {\n      if (!schemaReady) throw new Error(\"Schema not deployed\");\n      return await rescheduleBookingMutation({ id, newStartTime } as any);\n    },\n    [schemaReady, rescheduleBookingMutation]\n  );\n\n  // Google Calendar actions\n  const connectGoogleCalendar = useCallback(async () => {\n    setIsConnectingGoogle(true);\n    try {\n      const response = await fetch(\"/api/calendar/google/auth?returnUrl=/calendar\");\n      const data = await response.json();\n\n      if (data.authUrl) {\n        window.location.href = data.authUrl;\n      } else {\n        throw new Error(data.error || \"Failed to get auth URL\");\n      }\n    } catch (error) {\n      console.error(\"Failed to connect Google Calendar:\", error);\n      setIsConnectingGoogle(false);\n      throw error;\n    }\n  }, []);\n\n  const saveGoogleTokens = useCallback(\n    async (tokenData: {\n      accessToken: string;\n      refreshToken: string;\n      tokenExpiry: number;\n      calendarId: string;\n      calendarEmail: string;\n    }) => {\n      if (!schemaReady) throw new Error(\"Schema not deployed\");\n      await saveCalendarIntegrationMutation(tokenData);\n    },\n    [schemaReady, saveCalendarIntegrationMutation]\n  );\n\n  const disconnectGoogleCalendar = useCallback(async () => {\n    if (!schemaReady) throw new Error(\"Schema not deployed\");\n    await deleteCalendarIntegrationMutation();\n  }, [schemaReady, deleteCalendarIntegrationMutation]);\n\n  const syncBookingToCalendar = useCallback(\n    async (booking: Booking, action: \"create\" | \"update\" | \"delete\" = \"create\") => {\n      if (!calendarIntegration) {\n        throw new Error(\"No calendar integration configured\");\n      }\n\n      const response = await fetch(\"/api/calendar/sync\", {\n        method: \"POST\",\n        headers: { \"Content-Type\": \"application/json\" },\n        body: JSON.stringify({\n          action,\n          booking,\n          integration: calendarIntegration,\n          timezone: defaultAvailability?.timezone || getUserTimezone(),\n        }),\n      });\n\n      const data = await response.json();\n\n      if (data.needsTokenUpdate) {\n        await saveCalendarIntegrationMutation({\n          accessToken: data.newTokens.accessToken,\n          refreshToken: data.newTokens.refreshToken,\n          tokenExpiry: data.newTokens.tokenExpiry,\n          calendarId: calendarIntegration.calendarId,\n          calendarEmail: calendarIntegration.calendarEmail,\n        });\n        return syncBookingToCalendar(booking, action);\n      }\n\n      if (!data.success) {\n        throw new Error(data.error || \"Sync failed\");\n      }\n\n      if (action === \"create\" && data.googleEventId) {\n        await updateBookingGoogleEventIdMutation({\n          bookingId: booking._id,\n          googleEventId: data.googleEventId,\n          location: data.meetLink,\n        } as any);\n      }\n\n      return data;\n    },\n    [\n      calendarIntegration,\n      defaultAvailability?.timezone,\n      saveCalendarIntegrationMutation,\n      updateBookingGoogleEventIdMutation,\n    ]\n  );\n\n  // Loading states\n  const isLoading = !schemaReady ||\n    eventTypes === undefined ||\n    availability === undefined ||\n    calendarIntegration === undefined;\n\n  return {\n    // Schema status\n    schemaReady,\n\n    // Data\n    userProfile: userProfile ?? null,\n    eventTypes: eventTypes || [],\n    availability: availability || [],\n    defaultAvailability: defaultAvailability ?? null,\n    calendarIntegration: calendarIntegration ?? null,\n    upcomingBookings: upcomingBookings || [],\n\n    // Calendar view state\n    calendarView,\n    setCalendarView,\n    selectedDate,\n    setSelectedDate,\n\n    // User Profile actions\n    createOrUpdateUserProfile,\n\n    // Event Type actions\n    createEventType,\n    updateEventType,\n    deleteEventType,\n\n    // Availability actions\n    createAvailability,\n    updateAvailability,\n    deleteAvailability,\n    setOverride,\n    deleteOverride,\n\n    // Booking actions\n    confirmBooking,\n    cancelBooking,\n    markNoShow,\n    markCompleted,\n    rescheduleBooking,\n\n    // Google Calendar actions\n    connectGoogleCalendar,\n    saveGoogleTokens,\n    disconnectGoogleCalendar,\n    syncBookingToCalendar,\n    isConnectingGoogle,\n\n    // Loading state\n    isLoading,\n  };\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 2414, "column": 0}, "map": {"version":3,"sources":["file:///Users/jamesspalding/OpenClaw-OS/src/hooks/useReducedMotion.ts"],"sourcesContent":["'use client';\n\nimport { useState, useEffect } from 'react';\n\n/**\n * Hook to detect user's prefers-reduced-motion preference\n *\n * @returns boolean - true if user prefers reduced motion\n *\n * @example\n * ```tsx\n * const prefersReducedMotion = useReducedMotion();\n *\n * <motion.div\n *   animate={{ opacity: 1, y: 0 }}\n *   transition={prefersReducedMotion ? { duration: 0 } : { duration: 0.3 }}\n * />\n * ```\n */\nexport function useReducedMotion(): boolean {\n  const [prefersReducedMotion, setPrefersReducedMotion] = useState(false);\n\n  useEffect(() => {\n    // Check if window is available (SSR safety)\n    if (typeof window === 'undefined') return;\n\n    const mediaQuery = window.matchMedia('(prefers-reduced-motion: reduce)');\n\n    // Set initial value\n    setPrefersReducedMotion(mediaQuery.matches);\n\n    // Listen for changes\n    const handleChange = (event: MediaQueryListEvent) => {\n      setPrefersReducedMotion(event.matches);\n    };\n\n    mediaQuery.addEventListener('change', handleChange);\n\n    return () => {\n      mediaQuery.removeEventListener('change', handleChange);\n    };\n  }, []);\n\n  return prefersReducedMotion;\n}\n\n/**\n * Get motion-safe animation props for Framer Motion\n * Returns empty transition when reduced motion is preferred\n *\n * @example\n * ```tsx\n * const motionProps = useMotionSafe({\n *   initial: { opacity: 0, y: 20 },\n *   animate: { opacity: 1, y: 0 },\n *   transition: { duration: 0.3 }\n * });\n *\n * <motion.div {...motionProps} />\n * ```\n */\nexport function useMotionSafe<T extends Record<string, unknown>>(\n  props: T\n): T {\n  const prefersReducedMotion = useReducedMotion();\n\n  if (prefersReducedMotion) {\n    return {\n      ...props,\n      initial: false,\n      animate: props.animate,\n      exit: undefined,\n      transition: { duration: 0 },\n      whileHover: undefined,\n      whileTap: undefined,\n      whileFocus: undefined,\n      whileDrag: undefined,\n      whileInView: undefined,\n    } as T;\n  }\n\n  return props;\n}\n\n/**\n * Reduced motion safe transition config\n * Use this as the transition prop for Framer Motion\n */\nexport function getReducedMotionTransition(\n  normalTransition: Record<string, unknown>,\n  prefersReducedMotion: boolean\n): Record<string, unknown> {\n  if (prefersReducedMotion) {\n    return { duration: 0 };\n  }\n  return normalTransition;\n}\n\nexport default useReducedMotion;\n"],"names":[],"mappings":";;;;;;;;;;AAEA;AAFA;;AAmBO,SAAS;IACd,MAAM,CAAC,sBAAsB,wBAAwB,GAAG,IAAA,0ZAAQ,EAAC;IAEjE,IAAA,2ZAAS,EAAC;QACR,4CAA4C;QAC5C,wCAAmC;;;QAEnC,MAAM;QAKN,qBAAqB;QACrB,MAAM;IASR,GAAG,EAAE;IAEL,OAAO;AACT;AAiBO,SAAS,cACd,KAAQ;IAER,MAAM,uBAAuB;IAE7B,IAAI,sBAAsB;QACxB,OAAO;YACL,GAAG,KAAK;YACR,SAAS;YACT,SAAS,MAAM,OAAO;YACtB,MAAM;YACN,YAAY;gBAAE,UAAU;YAAE;YAC1B,YAAY;YACZ,UAAU;YACV,YAAY;YACZ,WAAW;YACX,aAAa;QACf;IACF;IAEA,OAAO;AACT;AAMO,SAAS,2BACd,gBAAyC,EACzC,oBAA6B;IAE7B,IAAI,sBAAsB;QACxB,OAAO;YAAE,UAAU;QAAE;IACvB;IACA,OAAO;AACT;uCAEe"}},
    {"offset": {"line": 2473, "column": 0}, "map": {"version":3,"sources":["file:///Users/jamesspalding/OpenClaw-OS/src/hooks/useHorizontalScroll.ts"],"sourcesContent":["'use client';\n\nimport { useRef, useEffect, useCallback } from 'react';\n\n/**\n * Hook to enable mouse wheel scrolling on horizontal scroll containers.\n *\n * Converts vertical wheel movement (deltaY) to horizontal scroll,\n * allowing users to scroll horizontal lists with their mouse wheel.\n *\n * @param options.speed - Multiplier for scroll speed (default: 1)\n * @param options.smooth - Enable smooth scrolling behavior (default: false)\n * @returns A ref to attach to the scrollable container\n *\n * @example\n * ```tsx\n * function HorizontalList() {\n *   const scrollRef = useHorizontalScroll<HTMLDivElement>();\n *   return (\n *     <div ref={scrollRef} className=\"flex overflow-x-auto\">\n *       {items.map(item => <Card key={item.id} />)}\n *     </div>\n *   );\n * }\n * ```\n */\nexport function useHorizontalScroll<T extends HTMLElement>(\n  options: { speed?: number; smooth?: boolean } = {}\n) {\n  const { speed = 1, smooth = false } = options;\n  const ref = useRef<T>(null);\n\n  const handleWheel = useCallback(\n    (e: WheelEvent) => {\n      const el = ref.current;\n      if (!el) return;\n\n      // Don't hijack if user is scrolling horizontally naturally (trackpad)\n      if (Math.abs(e.deltaX) > Math.abs(e.deltaY)) return;\n\n      // Don't hijack if container can't scroll horizontally\n      const canScrollHorizontally = el.scrollWidth > el.clientWidth;\n      if (!canScrollHorizontally) return;\n\n      // Check if we're at the scroll boundaries\n      const isAtStart = el.scrollLeft <= 0;\n      const isAtEnd = el.scrollLeft >= el.scrollWidth - el.clientWidth - 1;\n\n      // Allow natural page scroll if at boundaries and trying to scroll past\n      if ((isAtStart && e.deltaY < 0) || (isAtEnd && e.deltaY > 0)) {\n        return;\n      }\n\n      // Prevent default vertical scroll and convert to horizontal\n      e.preventDefault();\n\n      if (smooth) {\n        el.scrollBy({\n          left: e.deltaY * speed,\n          behavior: 'smooth',\n        });\n      } else {\n        el.scrollLeft += e.deltaY * speed;\n      }\n    },\n    [speed, smooth]\n  );\n\n  useEffect(() => {\n    const el = ref.current;\n    if (!el) return;\n\n    // Must use { passive: false } to enable preventDefault()\n    el.addEventListener('wheel', handleWheel, { passive: false });\n\n    return () => {\n      el.removeEventListener('wheel', handleWheel);\n    };\n  }, [handleWheel]);\n\n  return ref;\n}\n\nexport default useHorizontalScroll;\n"],"names":[],"mappings":";;;;;;AAEA;AAFA;;AA0BO,SAAS,oBACd,UAAgD,CAAC,CAAC;IAElD,MAAM,EAAE,QAAQ,CAAC,EAAE,SAAS,KAAK,EAAE,GAAG;IACtC,MAAM,MAAM,IAAA,wZAAM,EAAI;IAEtB,MAAM,cAAc,IAAA,6ZAAW,EAC7B,CAAC;QACC,MAAM,KAAK,IAAI,OAAO;QACtB,IAAI,CAAC,IAAI;QAET,sEAAsE;QACtE,IAAI,KAAK,GAAG,CAAC,EAAE,MAAM,IAAI,KAAK,GAAG,CAAC,EAAE,MAAM,GAAG;QAE7C,sDAAsD;QACtD,MAAM,wBAAwB,GAAG,WAAW,GAAG,GAAG,WAAW;QAC7D,IAAI,CAAC,uBAAuB;QAE5B,0CAA0C;QAC1C,MAAM,YAAY,GAAG,UAAU,IAAI;QACnC,MAAM,UAAU,GAAG,UAAU,IAAI,GAAG,WAAW,GAAG,GAAG,WAAW,GAAG;QAEnE,uEAAuE;QACvE,IAAI,AAAC,aAAa,EAAE,MAAM,GAAG,KAAO,WAAW,EAAE,MAAM,GAAG,GAAI;YAC5D;QACF;QAEA,4DAA4D;QAC5D,EAAE,cAAc;QAEhB,IAAI,QAAQ;YACV,GAAG,QAAQ,CAAC;gBACV,MAAM,EAAE,MAAM,GAAG;gBACjB,UAAU;YACZ;QACF,OAAO;YACL,GAAG,UAAU,IAAI,EAAE,MAAM,GAAG;QAC9B;IACF,GACA;QAAC;QAAO;KAAO;IAGjB,IAAA,2ZAAS,EAAC;QACR,MAAM,KAAK,IAAI,OAAO;QACtB,IAAI,CAAC,IAAI;QAET,yDAAyD;QACzD,GAAG,gBAAgB,CAAC,SAAS,aAAa;YAAE,SAAS;QAAM;QAE3D,OAAO;YACL,GAAG,mBAAmB,CAAC,SAAS;QAClC;IACF,GAAG;QAAC;KAAY;IAEhB,OAAO;AACT;uCAEe"}},
    {"offset": {"line": 2534, "column": 0}, "map": {"version":3,"sources":["file:///Users/jamesspalding/OpenClaw-OS/src/hooks/index.ts"],"sourcesContent":["// Voice hooks\nexport {\n  useSpeechRecognition,\n  type SpeechRecognitionStatus,\n  type SpeechRecognitionError,\n  type UseSpeechRecognitionReturn,\n  type UseSpeechRecognitionOptions,\n} from './useSpeechRecognition';\n\nexport {\n  useTextToSpeech,\n  type TTSStatus,\n  type TTSError,\n  type TTSVoice,\n  type UseTextToSpeechReturn,\n  type UseTextToSpeechOptions,\n} from './useTextToSpeech';\n\nexport {\n  useVoiceChat,\n  type VoiceChatMode,\n  type VoiceChatError,\n  type UseVoiceChatReturn,\n  type UseVoiceChatOptions,\n} from './useVoiceChat';\n\n// Scheduling hooks\nexport { useScheduling } from './useScheduling';\n\n// Accessibility hooks\nexport {\n  useReducedMotion,\n  useMotionSafe,\n  getReducedMotionTransition,\n} from './useReducedMotion';\n\n// UI hooks\nexport { useHorizontalScroll } from './useHorizontalScroll';\n"],"names":[],"mappings":";AAAA,cAAc;AACd;AAQA;AASA;AAQA,mBAAmB;AACnB;AAEA,sBAAsB;AACtB;AAMA,WAAW;AACX"}},
    {"offset": {"line": 2555, "column": 0}, "map": {"version":3,"sources":["file:///Users/jamesspalding/OpenClaw-OS/src/components/notes/NoteEditor.tsx"],"sourcesContent":["'use client';\n\nimport { useState, useCallback, useEffect, useRef } from 'react';\nimport { useHorizontalScroll } from '@/hooks';\nimport { motion, AnimatePresence } from 'framer-motion';\nimport ReactMarkdown from 'react-markdown';\nimport {\n  Eye,\n  EyeOff,\n  Pin,\n  PinOff,\n  Copy,\n  Trash2,\n  MoreHorizontal,\n  FolderInput,\n  Clock,\n  Hash,\n  Bold,\n  Italic,\n  Strikethrough,\n  List,\n  ListOrdered,\n  Quote,\n  Code,\n  Link2,\n  Image,\n  Heading1,\n  Heading2,\n  CheckSquare,\n} from 'lucide-react';\nimport { useNotes, type Note } from '@/context/NotesContext';\nimport { cn } from '@/lib/utils';\n\ninterface NoteEditorProps {\n  note: Note;\n  className?: string;\n}\n\ntype EditorMode = 'edit' | 'preview' | 'split';\n\nexport function NoteEditor({ note, className }: NoteEditorProps) {\n  const { updateNote, deleteNote, duplicateNote, togglePinNote, folders, moveNote } = useNotes();\n  const [mode, setMode] = useState<EditorMode>('split');\n  const [showMenu, setShowMenu] = useState(false);\n  const [showMoveMenu, setShowMoveMenu] = useState(false);\n  const [localTitle, setLocalTitle] = useState(note.title);\n  const [localContent, setLocalContent] = useState(note.content);\n  const menuRef = useRef<HTMLDivElement>(null);\n  const titleRef = useRef<HTMLInputElement>(null);\n  const contentRef = useRef<HTMLTextAreaElement>(null);\n  const toolbarScrollRef = useHorizontalScroll<HTMLDivElement>();\n\n  // Sync local state when note changes\n  useEffect(() => {\n    setLocalTitle(note.title);\n    setLocalContent(note.content);\n  }, [note.id, note.title, note.content]);\n\n  // Debounced save\n  useEffect(() => {\n    const timeout = setTimeout(() => {\n      if (localTitle !== note.title || localContent !== note.content) {\n        updateNote(note.id, { title: localTitle, content: localContent });\n      }\n    }, 500);\n\n    return () => clearTimeout(timeout);\n  }, [localTitle, localContent, note.id, note.title, note.content, updateNote]);\n\n  // Close menu on outside click\n  useEffect(() => {\n    const handleClick = (e: MouseEvent) => {\n      if (menuRef.current && !menuRef.current.contains(e.target as Node)) {\n        setShowMenu(false);\n        setShowMoveMenu(false);\n      }\n    };\n    document.addEventListener('mousedown', handleClick);\n    return () => document.removeEventListener('mousedown', handleClick);\n  }, []);\n\n  const handleTitleChange = useCallback((e: React.ChangeEvent<HTMLInputElement>) => {\n    setLocalTitle(e.target.value);\n  }, []);\n\n  const handleContentChange = useCallback((e: React.ChangeEvent<HTMLTextAreaElement>) => {\n    setLocalContent(e.target.value);\n  }, []);\n\n  const handleKeyDown = useCallback(\n    (e: React.KeyboardEvent<HTMLTextAreaElement>) => {\n      // Tab key for indentation\n      if (e.key === 'Tab') {\n        e.preventDefault();\n        const start = e.currentTarget.selectionStart;\n        const end = e.currentTarget.selectionEnd;\n        const value = e.currentTarget.value;\n\n        if (e.shiftKey) {\n          // Remove indentation\n          const beforeCursor = value.substring(0, start);\n          const afterCursor = value.substring(end);\n          const lastNewline = beforeCursor.lastIndexOf('\\n') + 1;\n          const lineStart = beforeCursor.substring(lastNewline);\n\n          if (lineStart.startsWith('  ')) {\n            setLocalContent(\n              value.substring(0, lastNewline) + lineStart.substring(2) + afterCursor\n            );\n          }\n        } else {\n          // Add indentation\n          setLocalContent(value.substring(0, start) + '  ' + value.substring(end));\n          setTimeout(() => {\n            if (contentRef.current) {\n              contentRef.current.selectionStart = contentRef.current.selectionEnd = start + 2;\n            }\n          }, 0);\n        }\n      }\n\n      // Cmd/Ctrl + B for bold\n      if ((e.metaKey || e.ctrlKey) && e.key === 'b') {\n        e.preventDefault();\n        wrapSelection('**', '**');\n      }\n\n      // Cmd/Ctrl + I for italic\n      if ((e.metaKey || e.ctrlKey) && e.key === 'i') {\n        e.preventDefault();\n        wrapSelection('*', '*');\n      }\n\n      // Cmd/Ctrl + Shift + K for link (K alone is reserved for global command palette)\n      if ((e.metaKey || e.ctrlKey) && e.shiftKey && e.key === 'k') {\n        e.preventDefault();\n        wrapSelection('[', '](url)');\n      }\n    },\n    []\n  );\n\n  const wrapSelection = useCallback((before: string, after: string) => {\n    if (!contentRef.current) return;\n\n    const start = contentRef.current.selectionStart;\n    const end = contentRef.current.selectionEnd;\n    const text = localContent;\n    const selected = text.substring(start, end) || 'text';\n\n    const newText = text.substring(0, start) + before + selected + after + text.substring(end);\n    setLocalContent(newText);\n\n    setTimeout(() => {\n      if (contentRef.current) {\n        contentRef.current.focus();\n        contentRef.current.selectionStart = start + before.length;\n        contentRef.current.selectionEnd = start + before.length + selected.length;\n      }\n    }, 0);\n  }, [localContent]);\n\n  const insertAtLineStart = useCallback((prefix: string) => {\n    if (!contentRef.current) return;\n\n    const start = contentRef.current.selectionStart;\n    const text = localContent;\n\n    // Find the start of the current line\n    const lineStart = text.lastIndexOf('\\n', start - 1) + 1;\n    const lineEnd = text.indexOf('\\n', start);\n    const endPos = lineEnd === -1 ? text.length : lineEnd;\n\n    const newText = text.substring(0, lineStart) + prefix + text.substring(lineStart);\n    setLocalContent(newText);\n\n    setTimeout(() => {\n      if (contentRef.current) {\n        contentRef.current.focus();\n        contentRef.current.selectionStart = contentRef.current.selectionEnd = start + prefix.length;\n      }\n    }, 0);\n  }, [localContent]);\n\n  const insertCodeBlock = useCallback(() => {\n    if (!contentRef.current) return;\n\n    const start = contentRef.current.selectionStart;\n    const end = contentRef.current.selectionEnd;\n    const text = localContent;\n    const selected = text.substring(start, end) || 'code here';\n\n    const newText = text.substring(0, start) + '\\n```\\n' + selected + '\\n```\\n' + text.substring(end);\n    setLocalContent(newText);\n\n    setTimeout(() => {\n      if (contentRef.current) {\n        contentRef.current.focus();\n        contentRef.current.selectionStart = start + 5;\n        contentRef.current.selectionEnd = start + 5 + selected.length;\n      }\n    }, 0);\n  }, [localContent]);\n\n  const insertImage = useCallback(() => {\n    if (!contentRef.current) return;\n\n    const start = contentRef.current.selectionStart;\n    const text = localContent;\n\n    const imageMarkdown = '![alt text](image-url)';\n    const newText = text.substring(0, start) + imageMarkdown + text.substring(start);\n    setLocalContent(newText);\n\n    setTimeout(() => {\n      if (contentRef.current) {\n        contentRef.current.focus();\n        contentRef.current.selectionStart = start + 2;\n        contentRef.current.selectionEnd = start + 10;\n      }\n    }, 0);\n  }, [localContent]);\n\n  const handleDuplicate = useCallback(() => {\n    duplicateNote(note.id);\n    setShowMenu(false);\n  }, [duplicateNote, note.id]);\n\n  const handleDelete = useCallback(() => {\n    if (confirm('Delete this note? This cannot be undone.')) {\n      deleteNote(note.id);\n    }\n    setShowMenu(false);\n  }, [deleteNote, note.id]);\n\n  const handleMove = useCallback(\n    (folderId: string | null) => {\n      moveNote(note.id, folderId);\n      setShowMenu(false);\n      setShowMoveMenu(false);\n    },\n    [moveNote, note.id]\n  );\n\n  const formatDate = (timestamp: number) => {\n    return new Date(timestamp).toLocaleDateString('en-US', {\n      month: 'short',\n      day: 'numeric',\n      year: 'numeric',\n      hour: 'numeric',\n      minute: '2-digit',\n    });\n  };\n\n  const currentFolder = folders.find((f) => f.id === note.folderId);\n\n  return (\n    <div className={cn('flex flex-col h-full', className)}>\n      {/* Header */}\n      <div className=\"flex-shrink-0 border-b border-[hsl(var(--theme-border))] p-3 space-y-2\">\n        {/* Title and actions */}\n        <div className=\"flex items-center gap-2\">\n          <input\n            ref={titleRef}\n            value={localTitle}\n            onChange={handleTitleChange}\n            placeholder=\"Untitled\"\n            className={cn(\n              'flex-1 text-lg font-semibold bg-transparent border-none outline-none',\n              'text-[hsl(var(--theme-foreground))]',\n              'placeholder-[hsl(var(--theme-muted-foreground))]'\n            )}\n            style={{ fontFamily: 'var(--theme-font-heading)' }}\n          />\n\n          {/* View mode toggle */}\n          <div className=\"flex items-center gap-1 p-1 rounded-lg bg-[hsl(var(--theme-muted))]\">\n            <button\n              onClick={() => setMode('edit')}\n              className={cn(\n                'p-1.5 rounded transition-colors',\n                mode === 'edit'\n                  ? 'bg-[hsl(var(--theme-card))] text-[hsl(var(--theme-foreground))]'\n                  : 'text-[hsl(var(--theme-muted-foreground))] hover:text-[hsl(var(--theme-foreground))]'\n              )}\n              title=\"Edit mode\"\n              aria-label=\"Switch to edit mode\"\n              aria-pressed={mode === 'edit'}\n            >\n              <EyeOff className=\"w-4 h-4\" aria-hidden=\"true\" />\n            </button>\n            <button\n              onClick={() => setMode('split')}\n              className={cn(\n                'p-1.5 rounded transition-colors',\n                mode === 'split'\n                  ? 'bg-[hsl(var(--theme-card))] text-[hsl(var(--theme-foreground))]'\n                  : 'text-[hsl(var(--theme-muted-foreground))] hover:text-[hsl(var(--theme-foreground))]'\n              )}\n              title=\"Split view\"\n              aria-label=\"Switch to split view\"\n              aria-pressed={mode === 'split'}\n            >\n              <div className=\"w-4 h-4 flex gap-0.5\" aria-hidden=\"true\">\n                <div className=\"w-1.5 h-full bg-current rounded-sm\" />\n                <div className=\"w-1.5 h-full bg-current rounded-sm opacity-50\" />\n              </div>\n            </button>\n            <button\n              onClick={() => setMode('preview')}\n              className={cn(\n                'p-1.5 rounded transition-colors',\n                mode === 'preview'\n                  ? 'bg-[hsl(var(--theme-card))] text-[hsl(var(--theme-foreground))]'\n                  : 'text-[hsl(var(--theme-muted-foreground))] hover:text-[hsl(var(--theme-foreground))]'\n              )}\n              title=\"Preview mode\"\n              aria-label=\"Switch to preview mode\"\n              aria-pressed={mode === 'preview'}\n            >\n              <Eye className=\"w-4 h-4\" aria-hidden=\"true\" />\n            </button>\n          </div>\n\n          {/* Pin button */}\n          <button\n            onClick={() => togglePinNote(note.id)}\n            className={cn(\n              'p-2 rounded-lg transition-colors',\n              note.isPinned\n                ? 'text-[hsl(var(--theme-primary))] bg-[hsl(var(--theme-primary)/0.1)]'\n                : 'text-[hsl(var(--theme-muted-foreground))] hover:text-[hsl(var(--theme-foreground))] hover:bg-[hsl(var(--theme-muted))]'\n            )}\n            title={note.isPinned ? 'Unpin' : 'Pin'}\n            aria-label={note.isPinned ? 'Unpin note' : 'Pin note'}\n            aria-pressed={note.isPinned}\n          >\n            {note.isPinned ? <Pin className=\"w-4 h-4\" aria-hidden=\"true\" /> : <PinOff className=\"w-4 h-4\" aria-hidden=\"true\" />}\n          </button>\n\n          {/* More menu */}\n          <div className=\"relative\" ref={menuRef}>\n            <button\n              onClick={() => setShowMenu(!showMenu)}\n              className=\"p-2 rounded-lg text-[hsl(var(--theme-muted-foreground))] hover:text-[hsl(var(--theme-foreground))] hover:bg-[hsl(var(--theme-muted))] transition-colors\"\n              aria-label=\"More options\"\n              aria-haspopup=\"true\"\n              aria-expanded={showMenu}\n            >\n              <MoreHorizontal className=\"w-4 h-4\" aria-hidden=\"true\" />\n            </button>\n\n            <AnimatePresence>\n              {showMenu && (\n                <motion.div\n                  initial={{ opacity: 0, scale: 0.95, y: -5 }}\n                  animate={{ opacity: 1, scale: 1, y: 0 }}\n                  exit={{ opacity: 0, scale: 0.95, y: -5 }}\n                  transition={{ duration: 0.15 }}\n                  className=\"absolute right-0 top-full mt-1 z-50 w-48 rounded-lg border border-[hsl(var(--theme-border))] bg-[hsl(var(--theme-card))] shadow-lg overflow-hidden\"\n                >\n                  <button\n                    onClick={handleDuplicate}\n                    className=\"w-full flex items-center gap-2 px-3 py-2 text-sm text-[hsl(var(--theme-foreground))] hover:bg-[hsl(var(--theme-muted))] transition-colors\"\n                  >\n                    <Copy className=\"w-4 h-4\" />\n                    Duplicate\n                  </button>\n\n                  <div className=\"relative\">\n                    <button\n                      onClick={() => setShowMoveMenu(!showMoveMenu)}\n                      className=\"w-full flex items-center justify-between gap-2 px-3 py-2 text-sm text-[hsl(var(--theme-foreground))] hover:bg-[hsl(var(--theme-muted))] transition-colors\"\n                    >\n                      <span className=\"flex items-center gap-2\">\n                        <FolderInput className=\"w-4 h-4\" />\n                        Move to...\n                      </span>\n                      <span className=\"text-[hsl(var(--theme-muted-foreground))]\">&gt;</span>\n                    </button>\n\n                    <AnimatePresence>\n                      {showMoveMenu && (\n                        <motion.div\n                          initial={{ opacity: 0, x: 5 }}\n                          animate={{ opacity: 1, x: 0 }}\n                          exit={{ opacity: 0, x: 5 }}\n                          className=\"absolute left-full top-0 ml-1 w-40 rounded-lg border border-[hsl(var(--theme-border))] bg-[hsl(var(--theme-card))] shadow-lg overflow-hidden\"\n                        >\n                          <button\n                            onClick={() => handleMove(null)}\n                            className={cn(\n                              'w-full flex items-center gap-2 px-3 py-2 text-sm transition-colors',\n                              note.folderId === null\n                                ? 'bg-[hsl(var(--theme-muted))] text-[hsl(var(--theme-foreground))]'\n                                : 'text-[hsl(var(--theme-foreground))] hover:bg-[hsl(var(--theme-muted))]'\n                            )}\n                          >\n                            All Notes\n                          </button>\n                          {folders.map((folder) => (\n                            <button\n                              key={folder.id}\n                              onClick={() => handleMove(folder.id)}\n                              className={cn(\n                                'w-full flex items-center gap-2 px-3 py-2 text-sm transition-colors',\n                                note.folderId === folder.id\n                                  ? 'bg-[hsl(var(--theme-muted))] text-[hsl(var(--theme-foreground))]'\n                                  : 'text-[hsl(var(--theme-foreground))] hover:bg-[hsl(var(--theme-muted))]'\n                              )}\n                            >\n                              <div\n                                className=\"w-3 h-3 rounded-sm\"\n                                style={{ backgroundColor: folder.color }}\n                              />\n                              {folder.name}\n                            </button>\n                          ))}\n                        </motion.div>\n                      )}\n                    </AnimatePresence>\n                  </div>\n\n                  <div className=\"h-px bg-[hsl(var(--theme-border))]\" />\n\n                  <button\n                    onClick={handleDelete}\n                    className=\"w-full flex items-center gap-2 px-3 py-2 text-sm text-red-500 hover:bg-red-500/10 transition-colors\"\n                  >\n                    <Trash2 className=\"w-4 h-4\" />\n                    Delete\n                  </button>\n                </motion.div>\n              )}\n            </AnimatePresence>\n          </div>\n        </div>\n\n        {/* Metadata row */}\n        <div className=\"flex items-center gap-3 text-xs text-[hsl(var(--theme-muted-foreground))]\">\n          {currentFolder && (\n            <span className=\"flex items-center gap-1\">\n              <div\n                className=\"w-2 h-2 rounded-sm\"\n                style={{ backgroundColor: currentFolder.color }}\n              />\n              {currentFolder.name}\n            </span>\n          )}\n          <span className=\"flex items-center gap-1\">\n            <Clock className=\"w-3 h-3\" />\n            {formatDate(note.updatedAt)}\n          </span>\n          {note.tags.length > 0 && (\n            <span className=\"flex items-center gap-1\">\n              <Hash className=\"w-3 h-3\" />\n              {note.tags.join(', ')}\n            </span>\n          )}\n        </div>\n      </div>\n\n      {/* Formatting toolbar */}\n      {(mode === 'edit' || mode === 'split') && (\n        <div\n          ref={toolbarScrollRef}\n          className=\"flex-shrink-0 flex items-center gap-1 px-3 py-2 border-b border-[hsl(var(--theme-border))] bg-[hsl(var(--theme-muted)/0.3)] overflow-x-auto scrollbar-hide\"\n        >\n          <button\n            onClick={() => wrapSelection('**', '**')}\n            className=\"p-1.5 rounded hover:bg-[hsl(var(--theme-muted))] text-[hsl(var(--theme-muted-foreground))] hover:text-[hsl(var(--theme-foreground))] transition-colors\"\n            title=\"Bold (Cmd+B)\"\n          >\n            <Bold className=\"w-4 h-4\" />\n          </button>\n          <button\n            onClick={() => wrapSelection('*', '*')}\n            className=\"p-1.5 rounded hover:bg-[hsl(var(--theme-muted))] text-[hsl(var(--theme-muted-foreground))] hover:text-[hsl(var(--theme-foreground))] transition-colors\"\n            title=\"Italic (Cmd+I)\"\n          >\n            <Italic className=\"w-4 h-4\" />\n          </button>\n          <button\n            onClick={() => wrapSelection('~~', '~~')}\n            className=\"p-1.5 rounded hover:bg-[hsl(var(--theme-muted))] text-[hsl(var(--theme-muted-foreground))] hover:text-[hsl(var(--theme-foreground))] transition-colors\"\n            title=\"Strikethrough\"\n          >\n            <Strikethrough className=\"w-4 h-4\" />\n          </button>\n\n          <div className=\"w-px h-5 bg-[hsl(var(--theme-border))] mx-1\" />\n\n          <button\n            onClick={() => insertAtLineStart('# ')}\n            className=\"p-1.5 rounded hover:bg-[hsl(var(--theme-muted))] text-[hsl(var(--theme-muted-foreground))] hover:text-[hsl(var(--theme-foreground))] transition-colors\"\n            title=\"Heading 1\"\n          >\n            <Heading1 className=\"w-4 h-4\" />\n          </button>\n          <button\n            onClick={() => insertAtLineStart('## ')}\n            className=\"p-1.5 rounded hover:bg-[hsl(var(--theme-muted))] text-[hsl(var(--theme-muted-foreground))] hover:text-[hsl(var(--theme-foreground))] transition-colors\"\n            title=\"Heading 2\"\n          >\n            <Heading2 className=\"w-4 h-4\" />\n          </button>\n\n          <div className=\"w-px h-5 bg-[hsl(var(--theme-border))] mx-1\" />\n\n          <button\n            onClick={() => insertAtLineStart('- ')}\n            className=\"p-1.5 rounded hover:bg-[hsl(var(--theme-muted))] text-[hsl(var(--theme-muted-foreground))] hover:text-[hsl(var(--theme-foreground))] transition-colors\"\n            title=\"Bullet List\"\n          >\n            <List className=\"w-4 h-4\" />\n          </button>\n          <button\n            onClick={() => insertAtLineStart('1. ')}\n            className=\"p-1.5 rounded hover:bg-[hsl(var(--theme-muted))] text-[hsl(var(--theme-muted-foreground))] hover:text-[hsl(var(--theme-foreground))] transition-colors\"\n            title=\"Numbered List\"\n          >\n            <ListOrdered className=\"w-4 h-4\" />\n          </button>\n          <button\n            onClick={() => insertAtLineStart('- [ ] ')}\n            className=\"p-1.5 rounded hover:bg-[hsl(var(--theme-muted))] text-[hsl(var(--theme-muted-foreground))] hover:text-[hsl(var(--theme-foreground))] transition-colors\"\n            title=\"Task List\"\n          >\n            <CheckSquare className=\"w-4 h-4\" />\n          </button>\n          <button\n            onClick={() => insertAtLineStart('> ')}\n            className=\"p-1.5 rounded hover:bg-[hsl(var(--theme-muted))] text-[hsl(var(--theme-muted-foreground))] hover:text-[hsl(var(--theme-foreground))] transition-colors\"\n            title=\"Quote\"\n          >\n            <Quote className=\"w-4 h-4\" />\n          </button>\n\n          <div className=\"w-px h-5 bg-[hsl(var(--theme-border))] mx-1\" />\n\n          <button\n            onClick={() => wrapSelection('`', '`')}\n            className=\"p-1.5 rounded hover:bg-[hsl(var(--theme-muted))] text-[hsl(var(--theme-muted-foreground))] hover:text-[hsl(var(--theme-foreground))] transition-colors\"\n            title=\"Inline Code\"\n          >\n            <Code className=\"w-4 h-4\" />\n          </button>\n          <button\n            onClick={insertCodeBlock}\n            className=\"p-1.5 rounded hover:bg-[hsl(var(--theme-muted))] text-[hsl(var(--theme-muted-foreground))] hover:text-[hsl(var(--theme-foreground))] transition-colors text-xs font-mono\"\n            title=\"Code Block\"\n          >\n            {'</>'}\n          </button>\n\n          <div className=\"w-px h-5 bg-[hsl(var(--theme-border))] mx-1\" />\n\n          <button\n            onClick={() => wrapSelection('[', '](url)')}\n            className=\"p-1.5 rounded hover:bg-[hsl(var(--theme-muted))] text-[hsl(var(--theme-muted-foreground))] hover:text-[hsl(var(--theme-foreground))] transition-colors\"\n            title=\"Link (Cmd+K)\"\n          >\n            <Link2 className=\"w-4 h-4\" />\n          </button>\n          <button\n            onClick={insertImage}\n            className=\"p-1.5 rounded hover:bg-[hsl(var(--theme-muted))] text-[hsl(var(--theme-muted-foreground))] hover:text-[hsl(var(--theme-foreground))] transition-colors\"\n            title=\"Image\"\n          >\n            <Image className=\"w-4 h-4\" />\n          </button>\n        </div>\n      )}\n\n      {/* Editor area */}\n      <div className=\"flex-1 flex min-h-0\">\n        {/* Edit pane */}\n        <AnimatePresence mode=\"wait\">\n          {(mode === 'edit' || mode === 'split') && (\n            <motion.div\n              initial={{ opacity: 0 }}\n              animate={{ opacity: 1 }}\n              exit={{ opacity: 0 }}\n              className={cn(\n                'flex-1 min-w-0 flex flex-col',\n                mode === 'split' && 'border-r border-[hsl(var(--theme-border))]'\n              )}\n            >\n              <textarea\n                ref={contentRef}\n                value={localContent}\n                onChange={handleContentChange}\n                onKeyDown={handleKeyDown}\n                placeholder=\"Start writing with markdown...\"\n                className={cn(\n                  'w-full h-full p-4 bg-transparent border-none outline-none resize-none',\n                  'text-[hsl(var(--theme-foreground))]',\n                  'placeholder-[hsl(var(--theme-muted-foreground))]',\n                  'font-mono text-sm leading-relaxed'\n                )}\n                spellCheck={false}\n              />\n            </motion.div>\n          )}\n        </AnimatePresence>\n\n        {/* Preview pane */}\n        <AnimatePresence mode=\"wait\">\n          {(mode === 'preview' || mode === 'split') && (\n            <motion.div\n              initial={{ opacity: 0 }}\n              animate={{ opacity: 1 }}\n              exit={{ opacity: 0 }}\n              className=\"flex-1 min-w-0 overflow-auto\"\n            >\n              <div className=\"p-4 prose prose-sm dark:prose-invert max-w-none prose-headings:font-[var(--theme-font-heading)] prose-headings:text-[hsl(var(--theme-foreground))] prose-p:text-[hsl(var(--theme-foreground))] prose-a:text-[hsl(var(--theme-primary))] prose-code:text-[hsl(var(--theme-primary))] prose-code:bg-[hsl(var(--theme-muted))] prose-code:px-1 prose-code:py-0.5 prose-code:rounded prose-pre:bg-[hsl(var(--theme-muted))] prose-pre:border prose-pre:border-[hsl(var(--theme-border))]\">\n                {localContent ? (\n                  <ReactMarkdown>{localContent}</ReactMarkdown>\n                ) : (\n                  <p className=\"text-[hsl(var(--theme-muted-foreground))] italic\">\n                    Nothing to preview yet...\n                  </p>\n                )}\n              </div>\n            </motion.div>\n          )}\n        </AnimatePresence>\n      </div>\n    </div>\n  );\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 3555, "column": 0}, "map": {"version":3,"sources":["file:///Users/jamesspalding/OpenClaw-OS/src/components/notes/NotesSearch.tsx"],"sourcesContent":["'use client';\n\nimport { useRef, useEffect, useCallback } from 'react';\nimport { Search, X, Command } from 'lucide-react';\nimport { useNotes } from '@/context/NotesContext';\nimport { cn } from '@/lib/utils';\n\ninterface NotesSearchProps {\n  className?: string;\n}\n\nexport function NotesSearch({ className }: NotesSearchProps) {\n  const { searchQuery, setSearchQuery } = useNotes();\n  const inputRef = useRef<HTMLInputElement>(null);\n\n  // Keyboard shortcut: Cmd/Ctrl + / to focus search (K is reserved for global command palette)\n  useEffect(() => {\n    const handleKeyDown = (e: KeyboardEvent) => {\n      if ((e.metaKey || e.ctrlKey) && e.key === '/') {\n        e.preventDefault();\n        inputRef.current?.focus();\n      }\n    };\n\n    document.addEventListener('keydown', handleKeyDown);\n    return () => document.removeEventListener('keydown', handleKeyDown);\n  }, []);\n\n  const handleClear = useCallback(() => {\n    setSearchQuery('');\n    inputRef.current?.focus();\n  }, [setSearchQuery]);\n\n  return (\n    <div className={cn('relative', className)}>\n      <div className=\"absolute left-3 top-1/2 -translate-y-1/2 pointer-events-none\">\n        <Search className=\"w-4 h-4 text-[hsl(var(--theme-muted-foreground))]\" />\n      </div>\n\n      <input\n        ref={inputRef}\n        type=\"text\"\n        value={searchQuery}\n        onChange={(e) => setSearchQuery(e.target.value)}\n        placeholder=\"Search notes...\"\n        className={cn(\n          'w-full pl-9 pr-16 py-2 rounded-lg',\n          'bg-[hsl(var(--theme-muted))]',\n          'border border-transparent',\n          'text-sm text-[hsl(var(--theme-foreground))]',\n          'placeholder-[hsl(var(--theme-muted-foreground))]',\n          'outline-none focus:border-[hsl(var(--theme-primary))]',\n          'transition-colors'\n        )}\n      />\n\n      <div className=\"absolute right-2 top-1/2 -translate-y-1/2 flex items-center gap-1\">\n        {searchQuery && (\n          <button\n            onClick={handleClear}\n            className=\"p-1 rounded hover:bg-[hsl(var(--theme-background))] text-[hsl(var(--theme-muted-foreground))] hover:text-[hsl(var(--theme-foreground))] transition-colors\"\n          >\n            <X className=\"w-3.5 h-3.5\" />\n          </button>\n        )}\n        <kbd className=\"hidden sm:flex items-center gap-0.5 px-1.5 py-0.5 text-[10px] font-medium text-[hsl(var(--theme-muted-foreground))] bg-[hsl(var(--theme-background))] border border-[hsl(var(--theme-border))] rounded\">\n          <Command className=\"w-2.5 h-2.5\" />K\n        </kbd>\n      </div>\n    </div>\n  );\n}\n"],"names":[],"mappings":";;;;;AAEA;AACA;AAAA;AAAA;AACA;AACA;AALA;;;;;;AAWO,SAAS,YAAY,EAAE,SAAS,EAAoB;IACzD,MAAM,EAAE,WAAW,EAAE,cAAc,EAAE,GAAG,IAAA,2IAAQ;IAChD,MAAM,WAAW,IAAA,wZAAM,EAAmB;IAE1C,6FAA6F;IAC7F,IAAA,2ZAAS,EAAC;QACR,MAAM,gBAAgB,CAAC;YACrB,IAAI,CAAC,EAAE,OAAO,IAAI,EAAE,OAAO,KAAK,EAAE,GAAG,KAAK,KAAK;gBAC7C,EAAE,cAAc;gBAChB,SAAS,OAAO,EAAE;YACpB;QACF;QAEA,SAAS,gBAAgB,CAAC,WAAW;QACrC,OAAO,IAAM,SAAS,mBAAmB,CAAC,WAAW;IACvD,GAAG,EAAE;IAEL,MAAM,cAAc,IAAA,6ZAAW,EAAC;QAC9B,eAAe;QACf,SAAS,OAAO,EAAE;IACpB,GAAG;QAAC;KAAe;IAEnB,qBACE,ubAAC;QAAI,WAAW,IAAA,yHAAE,EAAC,YAAY;;0BAC7B,ubAAC;gBAAI,WAAU;0BACb,cAAA,ubAAC,oSAAM;oBAAC,WAAU;;;;;;;;;;;0BAGpB,ubAAC;gBACC,KAAK;gBACL,MAAK;gBACL,OAAO;gBACP,UAAU,CAAC,IAAM,eAAe,EAAE,MAAM,CAAC,KAAK;gBAC9C,aAAY;gBACZ,WAAW,IAAA,yHAAE,EACX,qCACA,gCACA,6BACA,+CACA,oDACA,yDACA;;;;;;0BAIJ,ubAAC;gBAAI,WAAU;;oBACZ,6BACC,ubAAC;wBACC,SAAS;wBACT,WAAU;kCAEV,cAAA,ubAAC,qRAAC;4BAAC,WAAU;;;;;;;;;;;kCAGjB,ubAAC;wBAAI,WAAU;;0CACb,ubAAC,uSAAO;gCAAC,WAAU;;;;;;4BAAgB;;;;;;;;;;;;;;;;;;;AAK7C"}},
    {"offset": {"line": 3673, "column": 0}, "map": {"version":3,"sources":["file:///Users/jamesspalding/OpenClaw-OS/src/components/notes/QuickCaptureModal.tsx"],"sourcesContent":["'use client';\n\nimport { useState, useRef, useEffect, useCallback } from 'react';\nimport { motion, AnimatePresence } from 'framer-motion';\nimport { X, Zap, FolderInput, ChevronDown } from 'lucide-react';\nimport { useNotes } from '@/context/NotesContext';\nimport { cn } from '@/lib/utils';\n\nexport function QuickCaptureModal() {\n  const { isQuickCaptureOpen, closeQuickCapture, quickCapture, folders } = useNotes();\n  const [content, setContent] = useState('');\n  const [selectedFolderId, setSelectedFolderId] = useState<string | null>('inbox');\n  const [showFolderPicker, setShowFolderPicker] = useState(false);\n  const textareaRef = useRef<HTMLTextAreaElement>(null);\n  const modalRef = useRef<HTMLDivElement>(null);\n\n  // Focus textarea when modal opens\n  useEffect(() => {\n    if (isQuickCaptureOpen && textareaRef.current) {\n      setTimeout(() => textareaRef.current?.focus(), 100);\n    }\n  }, [isQuickCaptureOpen]);\n\n  // Reset state when modal closes\n  useEffect(() => {\n    if (!isQuickCaptureOpen) {\n      setContent('');\n      setSelectedFolderId('inbox');\n      setShowFolderPicker(false);\n    }\n  }, [isQuickCaptureOpen]);\n\n  // Handle escape to close\n  useEffect(() => {\n    const handleKeyDown = (e: KeyboardEvent) => {\n      if (e.key === 'Escape' && isQuickCaptureOpen) {\n        closeQuickCapture();\n      }\n    };\n    document.addEventListener('keydown', handleKeyDown);\n    return () => document.removeEventListener('keydown', handleKeyDown);\n  }, [isQuickCaptureOpen, closeQuickCapture]);\n\n  const handleSubmit = useCallback(() => {\n    if (content.trim()) {\n      quickCapture(content, selectedFolderId);\n      setContent('');\n    }\n  }, [content, selectedFolderId, quickCapture]);\n\n  const handleKeyDown = useCallback(\n    (e: React.KeyboardEvent) => {\n      // Cmd/Ctrl + Enter to save\n      if ((e.metaKey || e.ctrlKey) && e.key === 'Enter') {\n        e.preventDefault();\n        handleSubmit();\n      }\n    },\n    [handleSubmit]\n  );\n\n  const selectedFolder = folders.find((f) => f.id === selectedFolderId);\n\n  return (\n    <AnimatePresence>\n      {isQuickCaptureOpen && (\n        <motion.div\n          initial={{ opacity: 0 }}\n          animate={{ opacity: 1 }}\n          exit={{ opacity: 0 }}\n          transition={{ duration: 0.2 }}\n          className=\"fixed inset-0 z-[100] flex items-start justify-center pt-[15vh] px-4\"\n          onClick={closeQuickCapture}\n        >\n          {/* Backdrop */}\n          <motion.div\n            initial={{ opacity: 0 }}\n            animate={{ opacity: 1 }}\n            exit={{ opacity: 0 }}\n            className=\"absolute inset-0 bg-black/50 backdrop-blur-sm\"\n          />\n\n          {/* Modal */}\n          <motion.div\n            ref={modalRef}\n            initial={{ opacity: 0, scale: 0.95, y: -20 }}\n            animate={{ opacity: 1, scale: 1, y: 0 }}\n            exit={{ opacity: 0, scale: 0.95, y: -20 }}\n            transition={{ duration: 0.2, ease: 'easeOut' }}\n            onClick={(e) => e.stopPropagation()}\n            className=\"relative w-full max-w-lg rounded-2xl border border-[hsl(var(--theme-border))] bg-[hsl(var(--theme-card))] shadow-2xl overflow-hidden\"\n          >\n            {/* Header */}\n            <div className=\"flex items-center justify-between px-4 py-3 border-b border-[hsl(var(--theme-border))]\">\n              <div className=\"flex items-center gap-2\">\n                <div className=\"w-8 h-8 rounded-lg bg-[hsl(var(--theme-primary)/0.1)] flex items-center justify-center\">\n                  <Zap className=\"w-4 h-4 text-[hsl(var(--theme-primary))]\" />\n                </div>\n                <span\n                  className=\"font-semibold text-[hsl(var(--theme-foreground))]\"\n                  style={{ fontFamily: 'var(--theme-font-heading)' }}\n                >\n                  Quick Capture\n                </span>\n              </div>\n              <button\n                onClick={closeQuickCapture}\n                className=\"p-1.5 rounded-lg hover:bg-[hsl(var(--theme-muted))] text-[hsl(var(--theme-muted-foreground))] hover:text-[hsl(var(--theme-foreground))] transition-colors\"\n              >\n                <X className=\"w-4 h-4\" />\n              </button>\n            </div>\n\n            {/* Content */}\n            <div className=\"p-4\">\n              <textarea\n                ref={textareaRef}\n                value={content}\n                onChange={(e) => setContent(e.target.value)}\n                onKeyDown={handleKeyDown}\n                placeholder=\"Capture your thought... (supports markdown)\"\n                rows={4}\n                className={cn(\n                  'w-full px-3 py-2.5 rounded-lg resize-none',\n                  'bg-[hsl(var(--theme-muted))]',\n                  'border border-transparent',\n                  'text-sm text-[hsl(var(--theme-foreground))]',\n                  'placeholder-[hsl(var(--theme-muted-foreground))]',\n                  'outline-none focus:border-[hsl(var(--theme-primary))]',\n                  'transition-colors'\n                )}\n              />\n            </div>\n\n            {/* Footer */}\n            <div className=\"flex items-center justify-between px-4 py-3 border-t border-[hsl(var(--theme-border))] bg-[hsl(var(--theme-muted)/0.5)]\">\n              {/* Folder picker */}\n              <div className=\"relative\">\n                <button\n                  onClick={() => setShowFolderPicker(!showFolderPicker)}\n                  className=\"flex items-center gap-2 px-2 py-1.5 rounded-lg hover:bg-[hsl(var(--theme-muted))] text-sm text-[hsl(var(--theme-muted-foreground))] transition-colors\"\n                >\n                  <FolderInput className=\"w-4 h-4\" />\n                  {selectedFolder ? (\n                    <span className=\"flex items-center gap-1.5\">\n                      <div\n                        className=\"w-2.5 h-2.5 rounded-sm\"\n                        style={{ backgroundColor: selectedFolder.color }}\n                      />\n                      {selectedFolder.name}\n                    </span>\n                  ) : (\n                    'Inbox'\n                  )}\n                  <ChevronDown className=\"w-3.5 h-3.5\" />\n                </button>\n\n                <AnimatePresence>\n                  {showFolderPicker && (\n                    <motion.div\n                      initial={{ opacity: 0, y: 5 }}\n                      animate={{ opacity: 1, y: 0 }}\n                      exit={{ opacity: 0, y: 5 }}\n                      className=\"absolute bottom-full left-0 mb-1 w-48 rounded-lg border border-[hsl(var(--theme-border))] bg-[hsl(var(--theme-card))] shadow-lg overflow-hidden z-10\"\n                    >\n                      {folders.map((folder) => (\n                        <button\n                          key={folder.id}\n                          onClick={() => {\n                            setSelectedFolderId(folder.id);\n                            setShowFolderPicker(false);\n                          }}\n                          className={cn(\n                            'w-full flex items-center gap-2 px-3 py-2 text-sm transition-colors',\n                            selectedFolderId === folder.id\n                              ? 'bg-[hsl(var(--theme-muted))] text-[hsl(var(--theme-foreground))]'\n                              : 'text-[hsl(var(--theme-foreground))] hover:bg-[hsl(var(--theme-muted))]'\n                          )}\n                        >\n                          <div\n                            className=\"w-3 h-3 rounded-sm\"\n                            style={{ backgroundColor: folder.color }}\n                          />\n                          {folder.name}\n                        </button>\n                      ))}\n                    </motion.div>\n                  )}\n                </AnimatePresence>\n              </div>\n\n              {/* Actions */}\n              <div className=\"flex items-center gap-2\">\n                <span className=\"hidden sm:block text-[10px] text-[hsl(var(--theme-muted-foreground))]\">\n                  ‚åò + Enter to save\n                </span>\n                <button\n                  onClick={handleSubmit}\n                  disabled={!content.trim()}\n                  className={cn(\n                    'px-4 py-1.5 rounded-lg text-sm font-medium transition-colors',\n                    'bg-[hsl(var(--theme-primary))] text-white',\n                    'hover:bg-[hsl(var(--theme-primary)/0.9)]',\n                    'disabled:opacity-50 disabled:cursor-not-allowed'\n                  )}\n                >\n                  Save\n                </button>\n              </div>\n            </div>\n          </motion.div>\n        </motion.div>\n      )}\n    </AnimatePresence>\n  );\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 4047, "column": 0}, "map": {"version":3,"sources":["file:///Users/jamesspalding/OpenClaw-OS/src/components/notes/NotesApp.tsx"],"sourcesContent":["'use client';\n\nimport { useState, useEffect, useCallback } from 'react';\nimport { motion, AnimatePresence } from 'framer-motion';\nimport { springs } from '@/components/motion/config';\nimport {\n  Menu,\n  X,\n  ChevronLeft,\n  FileText,\n  Zap,\n  Sun,\n  Moon,\n  ArrowLeft,\n} from 'lucide-react';\nimport Link from 'next/link';\nimport { useTheme } from 'next-themes';\nimport { useDesignTheme } from '@/context/DesignThemeContext';\nimport { NotesProvider, useNotes } from '@/context/NotesContext';\nimport { NotesFolderTree } from './NotesFolderTree';\nimport { NotesList } from './NotesList';\nimport { NoteEditor } from './NoteEditor';\nimport { NotesSearch } from './NotesSearch';\nimport { QuickCaptureModal } from './QuickCaptureModal';\nimport { cn } from '@/lib/utils';\nimport '@/lib/themes/themes.css';\n\n// Mobile view states\ntype MobileView = 'folders' | 'list' | 'editor';\n\nfunction NotesAppContent() {\n  const { designTheme } = useDesignTheme();\n  const { resolvedTheme, setTheme } = useTheme();\n  // Use resolvedTheme which gives the actual theme (\"light\" or \"dark\")\n  // instead of theme which could be \"system\"\n  const isDarkMode = resolvedTheme === 'dark';\n\n  const { selectedNote, selectedNoteId, openQuickCapture, createNote, selectNote } = useNotes();\n\n  // Mobile state\n  const [isMobile, setIsMobile] = useState(false);\n  const [mobileView, setMobileView] = useState<MobileView>('list');\n  const [showSidebar, setShowSidebar] = useState(false);\n\n  // Detect mobile\n  useEffect(() => {\n    const checkMobile = () => {\n      const mobile = window.innerWidth < 768;\n      setIsMobile(mobile);\n      if (!mobile) {\n        setShowSidebar(false);\n      }\n    };\n\n    checkMobile();\n    window.addEventListener('resize', checkMobile);\n    return () => window.removeEventListener('resize', checkMobile);\n  }, []);\n\n  // Auto-switch to editor on mobile when note selected\n  useEffect(() => {\n    if (isMobile && selectedNoteId) {\n      setMobileView('editor');\n    }\n  }, [isMobile, selectedNoteId]);\n\n  // Global keyboard shortcuts\n  useEffect(() => {\n    const handleKeyDown = (e: KeyboardEvent) => {\n      // Cmd/Ctrl + Shift + N for quick capture\n      if ((e.metaKey || e.ctrlKey) && e.shiftKey && e.key === 'n') {\n        e.preventDefault();\n        openQuickCapture();\n      }\n\n      // Cmd/Ctrl + N for new note\n      if ((e.metaKey || e.ctrlKey) && !e.shiftKey && e.key === 'n') {\n        e.preventDefault();\n        createNote();\n      }\n\n      // Escape to go back on mobile\n      if (e.key === 'Escape' && isMobile && mobileView === 'editor') {\n        setMobileView('list');\n        selectNote(null);\n      }\n    };\n\n    document.addEventListener('keydown', handleKeyDown);\n    return () => document.removeEventListener('keydown', handleKeyDown);\n  }, [openQuickCapture, createNote, isMobile, mobileView, selectNote]);\n\n  const handleMobileBack = useCallback(() => {\n    if (mobileView === 'editor') {\n      setMobileView('list');\n    } else if (mobileView === 'list' && showSidebar) {\n      setShowSidebar(false);\n    }\n  }, [mobileView, showSidebar]);\n\n  // IMPORTANT: .dark must be on an ANCESTOR of [data-design-theme] for CSS selectors to work\n  // CSS: .dark [data-design-theme=\"theme\"] { ... } requires ancestor-descendant relationship\n  return (\n    <div className={isDarkMode ? 'dark' : ''}>\n      <div\n        data-design-theme={designTheme}\n        className=\"min-h-screen flex flex-col transition-colors duration-300\"\n        style={{\n          backgroundColor: 'hsl(var(--theme-background))',\n          color: 'hsl(var(--theme-foreground))',\n          fontFamily: 'var(--theme-font)',\n        }}\n      >\n      {/* Header */}\n      <motion.header\n        initial={{ opacity: 0, y: -20 }}\n        animate={{ opacity: 1, y: 0 }}\n        className=\"flex-shrink-0 h-14 border-b border-[hsl(var(--theme-border))] backdrop-blur-xl\"\n        style={{ backgroundColor: 'hsl(var(--theme-background) / 0.8)' }}\n      >\n        <div className=\"h-full max-w-[1600px] mx-auto px-4 flex items-center justify-between\">\n          {/* Left side */}\n          <div className=\"flex items-center gap-3\">\n            {/* Mobile menu button */}\n            {isMobile && (\n              <button\n                onClick={() => {\n                  if (mobileView === 'editor') {\n                    setMobileView('list');\n                  } else {\n                    setShowSidebar(!showSidebar);\n                  }\n                }}\n                className=\"p-2 rounded-lg hover:bg-[hsl(var(--theme-muted))] transition-colors\"\n              >\n                {mobileView === 'editor' ? (\n                  <ChevronLeft className=\"w-5 h-5\" />\n                ) : showSidebar ? (\n                  <X className=\"w-5 h-5\" />\n                ) : (\n                  <Menu className=\"w-5 h-5\" />\n                )}\n              </button>\n            )}\n\n            {/* Back to home */}\n            <Link\n              href=\"/\"\n              className=\"hidden sm:inline-flex items-center gap-2 text-sm text-[hsl(var(--theme-muted-foreground))] hover:text-[hsl(var(--theme-foreground))] transition-colors\"\n            >\n              <ArrowLeft className=\"w-4 h-4\" />\n              <span>Back</span>\n            </Link>\n\n            {!isMobile && (\n              <div className=\"w-px h-6 bg-[hsl(var(--theme-border))]\" />\n            )}\n\n            {/* App icon and title */}\n            <div className=\"flex items-center gap-2\">\n              <div\n                className=\"w-8 h-8 rounded-lg flex items-center justify-center\"\n                style={{\n                  background:\n                    'linear-gradient(135deg, hsl(var(--theme-primary)), hsl(var(--theme-accent)))',\n                }}\n              >\n                <FileText className=\"w-4 h-4 text-white\" />\n              </div>\n              <h1\n                className=\"text-lg font-semibold text-[hsl(var(--theme-foreground))]\"\n                style={{ fontFamily: 'var(--theme-font-heading)' }}\n              >\n                Notes\n              </h1>\n            </div>\n          </div>\n\n          {/* Center - Search (hidden on mobile) */}\n          {!isMobile && (\n            <div className=\"flex-1 max-w-md mx-4\">\n              <NotesSearch />\n            </div>\n          )}\n\n          {/* Right side */}\n          <div className=\"flex items-center gap-2\">\n            {/* Quick capture button */}\n            <button\n              onClick={openQuickCapture}\n              className=\"flex items-center gap-2 px-3 py-1.5 rounded-lg bg-[hsl(var(--theme-primary))] text-white hover:bg-[hsl(var(--theme-primary)/0.9)] transition-colors\"\n            >\n              <Zap className=\"w-4 h-4\" />\n              <span className=\"hidden sm:inline text-sm\">Capture</span>\n            </button>\n\n            {/* Theme toggle */}\n            <button\n              onClick={() => setTheme(isDarkMode ? 'light' : 'dark')}\n              className=\"p-2 rounded-lg hover:bg-[hsl(var(--theme-muted))] transition-colors\"\n              title={isDarkMode ? 'Light mode' : 'Dark mode'}\n            >\n              {isDarkMode ? (\n                <Sun className=\"w-5 h-5\" />\n              ) : (\n                <Moon className=\"w-5 h-5\" />\n              )}\n            </button>\n          </div>\n        </div>\n      </motion.header>\n\n      {/* Mobile search */}\n      {isMobile && mobileView !== 'editor' && (\n        <div className=\"flex-shrink-0 px-4 py-2 border-b border-[hsl(var(--theme-border))]\">\n          <NotesSearch />\n        </div>\n      )}\n\n      {/* Main content */}\n      <div className=\"flex-1 flex min-h-0 relative\">\n        {/* Desktop: 3-column layout */}\n        {!isMobile ? (\n          <>\n            {/* Folders sidebar */}\n            <motion.div\n              initial={{ opacity: 0, x: -20 }}\n              animate={{ opacity: 1, x: 0 }}\n              className=\"w-56 flex-shrink-0 border-r border-[hsl(var(--theme-border))]\"\n            >\n              <NotesFolderTree />\n            </motion.div>\n\n            {/* Notes list */}\n            <motion.div\n              initial={{ opacity: 0 }}\n              animate={{ opacity: 1 }}\n              transition={{ delay: 0.1 }}\n              className=\"w-72 flex-shrink-0 border-r border-[hsl(var(--theme-border))]\"\n            >\n              <NotesList />\n            </motion.div>\n\n            {/* Editor */}\n            <motion.div\n              initial={{ opacity: 0 }}\n              animate={{ opacity: 1 }}\n              transition={{ delay: 0.2 }}\n              className=\"flex-1 min-w-0\"\n            >\n              {selectedNote ? (\n                <NoteEditor note={selectedNote} />\n              ) : (\n                <div className=\"flex flex-col items-center justify-center h-full text-center p-8\">\n                  <FileText className=\"w-16 h-16 text-[hsl(var(--theme-muted-foreground))] mb-4\" />\n                  <h2\n                    className=\"text-xl font-semibold text-[hsl(var(--theme-foreground))] mb-2\"\n                    style={{ fontFamily: 'var(--theme-font-heading)' }}\n                  >\n                    Select a note\n                  </h2>\n                  <p className=\"text-sm text-[hsl(var(--theme-muted-foreground))] mb-4\">\n                    Choose a note from the list or create a new one\n                  </p>\n                  <div className=\"flex items-center gap-2 text-xs text-[hsl(var(--theme-muted-foreground))]\">\n                    <kbd className=\"px-2 py-1 rounded bg-[hsl(var(--theme-muted))] border border-[hsl(var(--theme-border))]\">\n                      ‚åòN\n                    </kbd>\n                    <span>New note</span>\n                    <span className=\"mx-2\">¬∑</span>\n                    <kbd className=\"px-2 py-1 rounded bg-[hsl(var(--theme-muted))] border border-[hsl(var(--theme-border))]\">\n                      ‚åò‚áßN\n                    </kbd>\n                    <span>Quick capture</span>\n                  </div>\n                </div>\n              )}\n            </motion.div>\n          </>\n        ) : (\n          /* Mobile: Single column with view switching */\n          <>\n            {/* Mobile sidebar overlay */}\n            <AnimatePresence>\n              {showSidebar && (\n                <>\n                  <motion.div\n                    initial={{ opacity: 0 }}\n                    animate={{ opacity: 1 }}\n                    exit={{ opacity: 0 }}\n                    className=\"absolute inset-0 bg-black/30 z-10\"\n                    onClick={() => setShowSidebar(false)}\n                  />\n                  <motion.div\n                    initial={{ x: '-100%' }}\n                    animate={{ x: 0 }}\n                    exit={{ x: '-100%' }}\n                    transition={springs.snappy}\n                    className=\"absolute left-0 top-0 bottom-0 w-64 z-20 bg-[hsl(var(--theme-background))] border-r border-[hsl(var(--theme-border))]\"\n                  >\n                    <NotesFolderTree />\n                  </motion.div>\n                </>\n              )}\n            </AnimatePresence>\n\n            {/* Mobile content */}\n            <AnimatePresence mode=\"wait\">\n              {mobileView === 'list' && (\n                <motion.div\n                  key=\"list\"\n                  initial={{ opacity: 0, x: -20 }}\n                  animate={{ opacity: 1, x: 0 }}\n                  exit={{ opacity: 0, x: -20 }}\n                  transition={springs.snappy}\n                  className=\"flex-1\"\n                >\n                  <NotesList />\n                </motion.div>\n              )}\n\n              {mobileView === 'editor' && selectedNote && (\n                <motion.div\n                  key=\"editor\"\n                  initial={{ opacity: 0, x: 20 }}\n                  animate={{ opacity: 1, x: 0 }}\n                  exit={{ opacity: 0, x: 20 }}\n                  transition={springs.snappy}\n                  className=\"flex-1\"\n                >\n                  <NoteEditor note={selectedNote} />\n                </motion.div>\n              )}\n            </AnimatePresence>\n          </>\n        )}\n      </div>\n\n      {/* Quick Capture Modal */}\n      <QuickCaptureModal />\n      </div>\n    </div>\n  );\n}\n\nexport function NotesApp() {\n  return (\n    <NotesProvider>\n      <NotesAppContent />\n    </NotesProvider>\n  );\n}\n"],"names":[],"mappings":"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"}}]
}