module.exports=[918622,(e,t,r)=>{t.exports=e.x("next/dist/compiled/next-server/app-page-turbo.runtime.prod.js",()=>require("next/dist/compiled/next-server/app-page-turbo.runtime.prod.js"))},556704,(e,t,r)=>{t.exports=e.x("next/dist/server/app-render/work-async-storage.external.js",()=>require("next/dist/server/app-render/work-async-storage.external.js"))},832319,(e,t,r)=>{t.exports=e.x("next/dist/server/app-render/work-unit-async-storage.external.js",()=>require("next/dist/server/app-render/work-unit-async-storage.external.js"))},324725,(e,t,r)=>{t.exports=e.x("next/dist/server/app-render/after-task-async-storage.external.js",()=>require("next/dist/server/app-render/after-task-async-storage.external.js"))},193695,(e,t,r)=>{t.exports=e.x("next/dist/shared/lib/no-fallback-error.external.js",()=>require("next/dist/shared/lib/no-fallback-error.external.js"))},666680,(e,t,r)=>{t.exports=e.x("node:crypto",()=>require("node:crypto"))},524836,(e,t,r)=>{t.exports=e.x("https",()=>require("https"))},921517,(e,t,r)=>{t.exports=e.x("http",()=>require("http"))},504446,(e,t,r)=>{t.exports=e.x("net",()=>require("net"))},755004,(e,t,r)=>{t.exports=e.x("tls",()=>require("tls"))},792509,(e,t,r)=>{t.exports=e.x("url",()=>require("url"))},500874,(e,t,r)=>{t.exports=e.x("buffer",()=>require("buffer"))},254799,(e,t,r)=>{t.exports=e.x("crypto",()=>require("crypto"))},427699,(e,t,r)=>{t.exports=e.x("events",()=>require("events"))},688947,(e,t,r)=>{t.exports=e.x("stream",()=>require("stream"))},406461,(e,t,r)=>{t.exports=e.x("zlib",()=>require("zlib"))},488782,e=>{"use strict";class t{constructor(e){}query(e,t){return Promise.resolve(null)}mutation(e,t){return Promise.resolve(null)}}e.s(["ConvexHttpClient",()=>t,"api",0,{jobs:{getAgentJobs:"jobs:getAgentJobs",cancelJob:"jobs:cancelJob",getJob:"jobs:getJob",queueCodeIteration:"jobs:queueCodeIteration",queueSpecialistDelegation:"jobs:queueSpecialistDelegation",queueAgentTask:"jobs:queueAgentTask",updateJobStatusPublic:"jobs:updateJobStatusPublic",logJobEventPublic:"jobs:logJobEventPublic"},aiSettings:{getSettings:"aiSettings:getSettings"},erv:{createEntity:"erv:createEntity",createRelationship:"erv:createRelationship",createDimension:"erv:createDimension",listDimensions:"erv:listDimensions",searchEntities:"erv:searchEntities",getEntity:"erv:getEntity"},jamz:{createProject:"jamz:createProject",createTrack:"jamz:createTrack",createClip:"jamz:createClip"},messages:{send:"messages:send"},whatsappContacts:{list:"whatsappContacts:list",getContactByPhone:"whatsappContacts:getContactByPhone",listContacts:"whatsappContacts:listContacts",upsertContact:"whatsappContacts:upsertContact"},channels:{list:"channels:list",getChannel:"channels:getChannel",sendMessage:"channels:sendMessage",getUserMessages:"channels:getUserMessages",getUserIntegrations:"channels:getUserIntegrations",getConversations:"channels:getConversations",getIntegration:"channels:getIntegration",logOutboundMessage:"channels:logOutboundMessage",searchMessages:"channels:searchMessages"},scheduling:{list:"scheduling:list",createEvent:"scheduling:createEvent",getEventTypes:"scheduling:getEventTypes",getAvailableSlots:"scheduling:getAvailableSlots",createBooking:"scheduling:createBooking",rescheduleBooking:"scheduling:rescheduleBooking",updateBookingStatus:"scheduling:updateBookingStatus"},userCronJobs:{list:"userCronJobs:list",create:"userCronJobs:create",delete:"userCronJobs:delete",createJob:"userCronJobs:createJob",getUserJobs:"userCronJobs:getUserJobs",toggleJob:"userCronJobs:toggleJob",deleteJob:"userCronJobs:deleteJob"},compaction:{compact:"compaction:compact",getLatestCompaction:"compaction:getLatestCompaction"},kanban:{listLists:"kanban:listLists",createCard:"kanban:createCard",moveCard:"kanban:moveCard",getTaskById:"kanban:getTaskById",searchTasks:"kanban:searchTasks",getTasks:"kanban:getTasks",isSeeded:"kanban:isSeeded",addTask:"kanban:addTask",updateTask:"kanban:updateTask",deleteTask:"kanban:deleteTask",moveTask:"kanban:moveTask",seedTasks:"kanban:seedTasks"},designCanvas:{getCanvas:"designCanvas:getCanvas",updateCanvas:"designCanvas:updateCanvas",createItem:"designCanvas:createItem",createCanvas:"designCanvas:createCanvas",getUserCanvases:"designCanvas:getUserCanvases",getCanvasNodes:"designCanvas:getCanvasNodes",getCanvasEdges:"designCanvas:getCanvasEdges",addNode:"designCanvas:addNode",addEdge:"designCanvas:addEdge",updateNode:"designCanvas:updateNode"},agentic:{createProductProject:"agentic:createProductProject",createPRD:"agentic:createPRD",createEpic:"agentic:createEpic",createTicket:"agentic:createTicket"},discovery:{getSession:"discovery:getSession",storeInsights:"discovery:storeInsights",storeArtifacts:"discovery:storeArtifacts",markNotificationSent:"discovery:markNotificationSent",markError:"discovery:markError",getSessionByCallerId:"discovery:getSessionByCallerId",updateTranscript:"discovery:updateTranscript"},memories:{searchEpisodic:"memories:searchEpisodic",getSemanticByCategories:"memories:getSemanticByCategories",getAllSemantic:"memories:getAllSemantic",getRecentEpisodic:"memories:getRecentEpisodic",storeEpisodic:"memories:storeEpisodic",upsertSemantic:"memories:upsertSemantic",deleteEpisodic:"memories:deleteEpisodic",deleteSemantic:"memories:deleteSemantic",getMemoryStats:"memories:getMemoryStats"},observability:{getSecurityScans:"observability:getSecurityScans",createSecurityScan:"observability:createSecurityScan",getActivityStream:"observability:getActivityStream",getDashboardOverview:"observability:getDashboardOverview",getProviderHealthStatus:"observability:getProviderHealthStatus",logOperation:"observability:logOperation"},roadmap:{submitSuggestion:"roadmap:submitSuggestion",getSuggestions:"roadmap:getSuggestions",updateSuggestionStatus:"roadmap:updateSuggestionStatus",voteSuggestion:"roadmap:voteSuggestion"}}])},879389,e=>{"use strict";var t=e.i(848920);let r=null;async function s(e,s,o){try{let n,i=(null===r&&process.env.NEXT_PUBLIC_CONVEX_URL&&(r=new t.ConvexHttpClient(process.env.NEXT_PUBLIC_CONVEX_URL)),r);if(!i){console.warn("[Security] Convex client not available, logging to console only"),console.log("[Security Event]",e.eventType,e.message);return}let l=a(s),c=s.headers.get("user-agent")||"unknown",d=(n={},/bot|crawler|spider|crawling/i.test(c)?n.deviceType="bot":/mobile|android|iphone|ipad|ipod|blackberry|windows phone/i.test(c)?/ipad|tablet|playbook|silk/i.test(c)?n.deviceType="tablet":n.deviceType="mobile":n.deviceType="desktop",/firefox/i.test(c)?n.browser="Firefox":/edg/i.test(c)?n.browser="Edge":/chrome|chromium|crios/i.test(c)?n.browser="Chrome":/safari/i.test(c)?n.browser="Safari":/opera|opr/i.test(c)?n.browser="Opera":/msie|trident/i.test(c)?n.browser="IE":n.browser="Unknown",/windows/i.test(c)?n.os="Windows":/macintosh|mac os x/i.test(c)?n.os="macOS":/linux/i.test(c)?n.os="Linux":/android/i.test(c)?n.os="Android":/iphone|ipad|ipod/i.test(c)?n.os="iOS":n.os="Unknown",n),u=function(e,t,r){let s=`${e}|${t}|`,a=0;for(let e=0;e<s.length;e++)a=(a<<5)-a+s.charCodeAt(e),a&=a;return Math.abs(a).toString(16).padStart(8,"0")}(l,c),g=(0,t.makeFunctionReference)("security:logSecurityEvent");await i.mutation(g,{eventType:e.eventType,severity:e.severity,actorType:e.actorType,actorId:e.actorId,actorEmail:e.actorEmail,message:e.message,metadata:e.metadata,targetResource:e.targetResource,targetId:e.targetId,ipAddress:l,userAgent:c,fingerprint:u,deviceType:d.deviceType,browser:d.browser,os:d.os,country:o?.country,region:o?.region,city:o?.city}),console.log("[Security] Event logged:",e.eventType,e.severity)}catch(t){console.error("[Security] Failed to log event to Convex:",t),console.log("[Security Event Fallback]",e.eventType,e.message)}}function a(e){let t=e.headers,r=t.get("x-vercel-forwarded-for");if(r)return r.split(",")[0].trim();let s=t.get("cf-connecting-ip");if(s)return s;let a=t.get("x-forwarded-for");if(a)return a.split(",")[0].trim();let o=t.get("x-real-ip");return o||"unknown"}let o=new Map;function n(e,t){let r=Date.now(),s=o.get(e);if(!s||s.resetAt<r){let s=r+t.windowMs;return o.set(e,{count:1,resetAt:s}),{allowed:!0,remaining:t.maxRequests-1,resetAt:s}}return s.count>=t.maxRequests?{allowed:!1,remaining:0,resetAt:s.resetAt}:(s.count++,{allowed:!0,remaining:t.maxRequests-s.count,resetAt:s.resetAt})}"u">typeof setInterval&&setInterval(()=>{let e=Date.now();for(let[t,r]of o.entries())r.resetAt<e&&o.delete(t)},6e4);let i=new Map;function l(e,t={maxAttempts:5,windowMs:9e5}){let r=Date.now(),s=i.get(e);return!s||r-s.firstAttempt>t.windowMs?(i.set(e,{count:1,firstAttempt:r}),!1):(s.count++,s.count>=t.maxAttempts)}function c(e){i.delete(e)}e.s(["checkRateLimit",()=>n,"clearFailedAttempts",()=>c,"getClientIp",()=>a,"logSecurityEvent",()=>s,"recordFailedAttempt",()=>l])},572067,e=>{"use strict";e.i(39334);let t=async()=>({id:"mock-user-id",firstName:"OpenClaw",lastName:"AI",emailAddresses:[{emailAddress:"james@example.com"}]});e.s(["auth",0,()=>({userId:"mock-user-id",sessionId:"mock-session-id",getToken:async()=>"mock-token",redirectToSignIn:()=>({})}),"clerkClient",0,{users:{getUser:async()=>t()}}])},710429,e=>{"use strict";var t=e.i(254799);let r=null;function s(){return r||(r=function(){let e=process.env.PASSCODE_SECRET;if(!e)throw Error("PASSCODE_SECRET environment variable is required");if(e.length<32)throw Error("PASSCODE_SECRET must be at least 32 characters long");return e}()),r}function a(e,r){let a=t.default.createHmac("sha256",s()).update(e).digest("hex"),o=Buffer.from(a),n=Buffer.from(r);return o.length===n.length&&t.default.timingSafeEqual(o,n)}function o(e){let r=Buffer.from(JSON.stringify(e)).toString("base64url"),a=t.default.createHmac("sha256",s()).update(r).digest("base64url");return`${r}.${a}`}function n(e){if(!e)return null;let r=e.split(".");if(2!==r.length)return null;let[a,o]=r,n=t.default.createHmac("sha256",s()).update(a).digest("base64url"),i=Buffer.from(o),l=Buffer.from(n);if(i.length!==l.length||!t.default.timingSafeEqual(i,l))return null;try{let e=JSON.parse(Buffer.from(a,"base64url").toString());if(Date.now()>e.exp)return null;return e}catch{return null}}function i(e){return o({type:"admin",subject:e,exp:Date.now()+864e5})}function l(e){return o({type:"area",subject:e,exp:Date.now()+6048e5})}function c(e){return o({type:"ipod",subject:e,exp:Date.now()+6048e5})}function d(e){return`jamos_area_${e}`}function u(e){return/^\d{6}$/.test(e)}e.s(["ADMIN_COOKIE",0,"jamos_admin","IPOD_COOKIE",0,"jamos_ipod","createAdminSession",()=>i,"createAreaSession",()=>l,"createiPodSession",()=>c,"getAreaCookieName",()=>d,"isValidPasscodeFormat",()=>u,"verifyPasscode",()=>a,"verifySession",()=>n])},201703,802425,e=>{"use strict";class t{baseUrl;timeout;defaultModel;constructor(e){this.baseUrl=e.baseUrl.replace(/\/$/,""),this.timeout=e.timeout??3e4,this.defaultModel=e.defaultModel??"gpt-oss:20b"}async health(){let e=Date.now();try{let t,r=await this.fetchWithTimeout(`${this.baseUrl}/api/tags`,{method:"GET"});if(!r.ok)return{connected:!1,models:[],error:`Server returned ${r.status}`,latencyMs:Date.now()-e};let s=(await r.json()).models||[];try{let e=await this.fetchWithTimeout(`${this.baseUrl}/api/version`,{method:"GET"});e.ok&&(t=(await e.json()).version)}catch(e){console.debug("[Ollama] Version endpoint not available:",e)}return{connected:!0,version:t,models:s,latencyMs:Date.now()-e}}catch(t){return{connected:!1,models:[],error:t instanceof Error?t.message:"Connection failed",latencyMs:Date.now()-e}}}async listModels(){let e=await this.fetchWithTimeout(`${this.baseUrl}/api/tags`,{method:"GET"});if(!e.ok)throw Error(`Failed to list models: ${e.status}`);return(await e.json()).models||[]}async chat(e){let t=await this.fetchWithTimeout(`${this.baseUrl}/api/chat`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({...e,model:e.model||this.defaultModel,stream:!1})});if(!t.ok){let e=await t.text();throw Error(`Chat failed: ${t.status} - ${e}`)}return t.json()}async *chatStream(e){let t=await this.fetchWithTimeout(`${this.baseUrl}/api/chat`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({...e,model:e.model||this.defaultModel,stream:!0})});if(!t.ok){let e=await t.text();throw Error(`Chat stream failed: ${t.status} - ${e}`)}let r=t.body?.getReader();if(!r)throw Error("No response body");let s=new TextDecoder,a="";try{for(;;){let{done:e,value:t}=await r.read();if(e)break;let o=(a+=s.decode(t,{stream:!0})).split("\n");for(let e of(a=o.pop()||"",o))if(e.trim())try{let t=JSON.parse(e);yield t}catch(t){console.error("[Ollama] Malformed JSON in chat stream:",e.substring(0,100),t)}}if(a.trim())try{let e=JSON.parse(a);yield e}catch(e){console.error("[Ollama] Malformed JSON in chat buffer:",a.substring(0,100),e)}}finally{r.releaseLock()}}async generate(e){let t=await this.fetchWithTimeout(`${this.baseUrl}/api/generate`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({...e,model:e.model||this.defaultModel,stream:!1})});if(!t.ok){let e=await t.text();throw Error(`Generate failed: ${t.status} - ${e}`)}return t.json()}async *generateStream(e){let t=await this.fetchWithTimeout(`${this.baseUrl}/api/generate`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({...e,model:e.model||this.defaultModel,stream:!0})});if(!t.ok){let e=await t.text();throw Error(`Generate stream failed: ${t.status} - ${e}`)}let r=t.body?.getReader();if(!r)throw Error("No response body");let s=new TextDecoder,a="";try{for(;;){let{done:e,value:t}=await r.read();if(e)break;let o=(a+=s.decode(t,{stream:!0})).split("\n");for(let e of(a=o.pop()||"",o))if(e.trim())try{let t=JSON.parse(e);yield t}catch(t){console.error("[Ollama] Malformed JSON in generate stream:",e.substring(0,100),t)}}if(a.trim())try{let e=JSON.parse(a);yield e}catch(e){console.error("[Ollama] Malformed JSON in generate buffer:",a.substring(0,100),e)}}finally{r.releaseLock()}}async pullModel(e){let t=await fetch(`${this.baseUrl}/api/pull`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:e})});if(!t.ok){let e=await t.text();throw Error(`Failed to pull model: ${t.status} - ${e}`)}let r=t.body?.getReader();if(r){for(new TextDecoder;;){let{done:e}=await r.read();if(e)break}r.releaseLock()}}async fetchWithTimeout(e,t){let r=new AbortController,s=setTimeout(()=>r.abort(),this.timeout);try{return await fetch(e,{...t,signal:r.signal})}catch(e){if(e instanceof Error&&"AbortError"===e.name)throw Error(`Request timed out after ${this.timeout}ms`);throw e}finally{clearTimeout(s)}}}async function r(e){return new t({baseUrl:e??process.env.OLLAMA_BASE_URL??"http://localhost:11434",timeout:5e3}).health()}e.s(["OllamaClient",()=>t,"checkOllamaHealth",()=>r],802425),e.s([],201703)},230444,e=>{"use strict";var t=e.i(379970);let r=new Set(["search_portfolio","navigate_to","list_themes","open_search_app","show_weather","show_photos"]),s=new Set([...r,"show_kanban_tasks","list_projects","get_project_kanban","get_available_times","get_upcoming_bookings","get_active_context","load_context_from_reference","list_coding_tasks","list_directory","read_file","search_codebase","git_status","git_diff","list_cron_jobs","get_compaction_summary","list_channel_integrations","get_channel_conversations","search_channel_messages"]);function a(e,t){switch(t){case"owner":return!0;case"collaborator":return r.has(e)||s.has(e);case"visitor":return r.has(e);default:return!1}}function o(e){return t.CLAW_AI_TOOLS.filter(t=>a(t.name,e))}function n(e,t){let r=[],s=[];for(let o of e)a(o.name,t)?r.push(o):s.push(o);return{permitted:r,denied:s}}[...r,...s],e.s(["filterToolCalls",()=>n,"getToolsForAccessLevel",()=>o])},545283,e=>{e.v(t=>Promise.all(["server/chunks/node_modules__pnpm_0b50f2fe._.js"].map(t=>e.l(t))).then(()=>t(872403)))},606552,e=>{e.v(t=>Promise.all(["server/chunks/src_lib_tpmjs_client_ts_57c4d5de._.js"].map(t=>e.l(t))).then(()=>t(909461)))}];

//# sourceMappingURL=%5Broot-of-the-server%5D__4ca4e81e._.js.map