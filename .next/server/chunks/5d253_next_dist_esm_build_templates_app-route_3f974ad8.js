module.exports=[17525,e=>{"use strict";var t=e.i(457375),n=e.i(174015),i=e.i(116384),a=e.i(63831),r=e.i(868001),o=e.i(842780),s=e.i(763077),d=e.i(502964),l=e.i(993216),u=e.i(783900),p=e.i(295731),c=e.i(726839),h=e.i(775778),y=e.i(40992),w=e.i(432128),m=e.i(193695);e.i(44807);var g=e.i(989978),R=e.i(39334);let f=new Map,v=["US","BS","BZ","KY","PW","PR","GU","VI"];function E(e,t){let n=new Date((e+t)*1e3),i=n.getUTCHours(),a=n.getUTCMinutes();return`${i%12||12}:${a.toString().padStart(2,"0")} ${i>=12?"PM":"AM"}`}function b(e,t){return e>=200&&e<300?{type:"stormy",description:t}:e>=300&&e<400||e>=500&&e<600?{type:"rainy",description:t}:e>=600&&e<700?{type:"snowy",description:t}:e>=700&&e<800?{type:"foggy",description:t}:800===e?{type:"sunny",description:t}:{type:"cloudy",description:t}}async function C(e){let t=process.env.OPENWEATHER_API_KEY;if(!t)return console.warn("OPENWEATHER_API_KEY not set, using mock data"),null;try{var n,i;let a,r,o,s=await fetch(`https://api.openweathermap.org/data/2.5/weather?q=${encodeURIComponent(e)}&appid=${t}&units=metric`,{next:{revalidate:1800}});if(!s.ok)return console.error(`Weather API error: ${s.status}`),null;let d=await s.json(),l=d.sys.country,u=v.includes(l),{lat:p,lon:c}=d.coord,h=d.timezone,y=d;if(u){let n=await fetch(`https://api.openweathermap.org/data/2.5/weather?q=${encodeURIComponent(e)}&appid=${t}&units=imperial`,{next:{revalidate:1800}});n.ok&&(y=await n.json())}let w=await fetch(`https://api.openweathermap.org/data/2.5/forecast?q=${encodeURIComponent(e)}&appid=${t}&units=${u?"imperial":"metric"}`,{next:{revalidate:1800}}),m=[],g=[];if(w.ok){let e=await w.json();g=e.list.slice(0,8).map((e,t)=>{let n=new Date(1e3*e.dt).getHours();return{time:0===t?"Now":`${n%12||12}${n>=12?"PM":"AM"}`,temperature:Math.round(e.main.temp),condition:b(e.weather[0].id,e.weather[0].description),precipProbability:Math.round(100*(e.pop||0)),isNow:0===t}});let t={};e.list.forEach(e=>{let n=new Date(1e3*e.dt),i=n.toLocaleDateString("en-US",{weekday:"short"}),a=n.toLocaleDateString("en-US",{month:"short",day:"numeric"});t[i]||(t[i]={temps:[],condition:b(e.weather[0].id,e.weather[0].description),icon:e.weather[0].icon,date:a,pop:[]}),t[i].temps.push(e.main.temp),t[i].pop.push(e.pop||0)});let n=new Date().toLocaleDateString("en-US",{weekday:"short"});m=Object.entries(t).slice(0,5).map(([e,t])=>({day:e===n?"Today":e,date:t.date,high:Math.round(Math.max(...t.temps)),low:Math.round(Math.min(...t.temps)),condition:t.condition,icon:t.icon,precipProbability:Math.round(100*Math.max(...t.pop))}))}let R=u?Math.round(y.wind.speed):Math.round(3.6*y.wind.speed),f={uvIndex:0,uvDescription:"N/A",visibility:u?Math.round((y.visibility||1e4)/1609.34):Math.round((y.visibility||1e4)/1e3),visibilityUnit:u?"mi":"km",pressure:y.main.pressure,pressureTrend:"steady",dewPoint:Math.round(y.main.temp-(100-y.main.humidity)/5),cloudCover:y.clouds?.all||0,precipProbability:g[0]?.precipProbability||0,windDirection:(n=y.wind.deg||0,["N","NNE","NE","ENE","E","ESE","SE","SSE","S","SSW","SW","WSW","W","WNW","NW","NNW"][Math.round(n/22.5)%16]),windGust:y.wind.gust?u?Math.round(y.wind.gust):Math.round(3.6*y.wind.gust):void 0},C={sunrise:E(y.sys.sunrise,h),sunset:E(y.sys.sunset,h),dayLength:(i=y.sys.sunrise,a=y.sys.sunset-i,r=Math.floor(a/3600),o=Math.floor(a%3600/60),`${r}h ${o}m`)};return{location:y.name,country:y.sys.country,temperature:Math.round(y.main.temp),feelsLike:Math.round(y.main.feels_like),condition:b(y.weather[0].id,y.weather[0].description),humidity:y.main.humidity,windSpeed:R,windUnit:u?"mph":"km/h",icon:y.weather[0].icon,forecast:m,hourlyForecast:g,details:f,sunMoon:C,lastUpdated:new Date().toISOString(),unit:u?"F":"C",timezone:h}}catch(e){return console.error("Error fetching weather:",e),null}}async function P(e){let t,n,i,a,r,{searchParams:o}=new URL(e.url),s=o.get("city")||"San Francisco",d=s.toLowerCase(),l=f.get(d);if(l&&Date.now()-l.timestamp<18e5)return R.NextResponse.json(l.data);let u=await C(s);if(u)return f.set(d,{data:u,timestamp:Date.now()}),R.NextResponse.json(u);let p=(t=s.toLowerCase().includes("san francisco")||s.toLowerCase().includes("us"),n=e=>t?e:Math.round((e-32)*5/9),i=new Date,a=Array.from({length:24},(e,a)=>{let r=new Date(i.getTime()+3600*a*1e3).getHours(),o=8*Math.sin((r-6)*Math.PI/12);return{time:0===a?"Now":`${r%12||12}${r>=12?"PM":"AM"}`,temperature:n(Math.round((t?62:48)+o)),condition:t?{type:"sunny",description:"Clear"}:{type:"rainy",description:"Rain"},precipProbability:t?5:65,isNow:0===a}}),r={uvIndex:t?6:2,uvDescription:t?"High":"Low",visibility:t?10:5,visibilityUnit:t?"mi":"km",pressure:1015,pressureTrend:"steady",dewPoint:n(t?52:42),cloudCover:t?10:85,precipProbability:t?5:70,windDirection:t?"W":"SW",windGust:t?18:45},{location:t?"San Francisco":"Dublin",country:t?"US":"IE",temperature:n(t?62:48),feelsLike:n(t?60:45),condition:t?{type:"sunny",description:"Clear sky"}:{type:"rainy",description:"Light rain"},humidity:t?65:82,windSpeed:t?12:29,windUnit:t?"mph":"km/h",icon:t?"01d":"10d",forecast:[{day:"Today",date:"Jan 17",high:n(t?65:50),low:n(t?52:42),condition:t?{type:"sunny",description:"Clear"}:{type:"rainy",description:"Rain"},icon:t?"01d":"10d",precipProbability:t?5:70},{day:"Sat",date:"Jan 18",high:n(t?68:52),low:n(t?54:44),condition:{type:"cloudy",description:"Partly cloudy"},icon:"02d",precipProbability:25},{day:"Sun",date:"Jan 19",high:n(t?64:48),low:n(t?50:40),condition:{type:"rainy",description:"Light rain"},icon:"10d",precipProbability:80},{day:"Mon",date:"Jan 20",high:n(t?62:46),low:n(t?48:38),condition:{type:"cloudy",description:"Overcast"},icon:"04d",precipProbability:40},{day:"Tue",date:"Jan 21",high:n(t?66:50),low:n(t?52:42),condition:{type:"sunny",description:"Clear"},icon:"01d",precipProbability:10}],hourlyForecast:a,details:r,sunMoon:{sunrise:t?"7:12 AM":"8:23 AM",sunset:t?"5:28 PM":"4:52 PM",moonPhase:"Waxing Gibbous",dayLength:t?"10h 16m":"8h 29m"},lastUpdated:new Date().toISOString(),unit:t?"F":"C",timezone:t?-28800:0});return f.set(d,{data:p,timestamp:Date.now()}),R.NextResponse.json(p)}e.s(["GET",()=>P],951133);var M=e.i(951133);let S=new t.AppRouteRouteModule({definition:{kind:n.RouteKind.APP_ROUTE,page:"/api/weather/route",pathname:"/api/weather",filename:"route",bundlePath:""},distDir:".next",relativeProjectDir:"",resolvedPagePath:"[project]/src/app/api/weather/route.ts",nextConfigOutput:"",userland:M}),{workAsyncStorage:x,workUnitAsyncStorage:N,serverHooks:A}=S;function T(){return(0,i.patchFetch)({workAsyncStorage:x,workUnitAsyncStorage:N})}async function U(e,t,i){S.isDev&&(0,a.addRequestMeta)(e,"devRequestTimingInternalsEnd",process.hrtime.bigint());let R="/api/weather/route";R=R.replace(/\/index$/,"")||"/";let f=await S.prepare(e,t,{srcPage:R,multiZoneDraftMode:!1});if(!f)return t.statusCode=400,t.end("Bad Request"),null==i.waitUntil||i.waitUntil.call(i,Promise.resolve()),null;let{buildId:v,params:E,nextConfig:b,parsedUrl:C,isDraftMode:P,prerenderManifest:M,routerServerContext:x,isOnDemandRevalidate:N,revalidateOnlyGenerated:A,resolvedPathname:T,clientReferenceManifest:U,serverActionsManifest:D}=f,I=(0,s.normalizeAppPath)(R),k=!!(M.dynamicRoutes[I]||M.routes[T]),O=async()=>((null==x?void 0:x.render404)?await x.render404(e,t,C,!1):t.end("This page could not be found"),null);if(k&&!P){let e=!!M.routes[T],t=M.dynamicRoutes[I];if(t&&!1===t.fallback&&!e){if(b.experimental.adapterPath)return await O();throw new m.NoFallbackError}}let $=null;!k||S.isDev||P||($="/index"===($=T)?"/":$);let _=!0===S.isDev||!k,H=k&&!_;D&&U&&(0,o.setManifestsSingleton)({page:R,clientReferenceManifest:U,serverActionsManifest:D});let L=e.method||"GET",W=(0,r.getTracer)(),q=W.getActiveScopeSpan(),j={params:E,prerenderManifest:M,renderOpts:{experimental:{authInterrupts:!!b.experimental.authInterrupts},cacheComponents:!!b.cacheComponents,supportsDynamicResponse:_,incrementalCache:(0,a.getRequestMeta)(e,"incrementalCache"),cacheLifeProfiles:b.cacheLife,waitUntil:i.waitUntil,onClose:e=>{t.on("close",e)},onAfterTaskError:void 0,onInstrumentationRequestError:(t,n,i,a)=>S.onRequestError(e,t,i,a,x)},sharedContext:{buildId:v}},F=new d.NodeNextRequest(e),K=new d.NodeNextResponse(t),G=l.NextRequestAdapter.fromNodeNextRequest(F,(0,l.signalFromNodeResponse)(t));try{let o=async e=>S.handle(G,j).finally(()=>{if(!e)return;e.setAttributes({"http.status_code":t.statusCode,"next.rsc":!1});let n=W.getRootSpanAttributes();if(!n)return;if(n.get("next.span_type")!==u.BaseServerSpan.handleRequest)return void console.warn(`Unexpected root span type '${n.get("next.span_type")}'. Please report this Next.js issue https://github.com/vercel/next.js`);let i=n.get("next.route");if(i){let t=`${L} ${i}`;e.setAttributes({"next.route":i,"http.route":i,"next.span_name":t}),e.updateName(t)}else e.updateName(`${L} ${R}`)}),s=!!(0,a.getRequestMeta)(e,"minimalMode"),d=async a=>{var r,d;let l=async({previousCacheEntry:n})=>{try{if(!s&&N&&A&&!n)return t.statusCode=404,t.setHeader("x-nextjs-cache","REVALIDATED"),t.end("This page could not be found"),null;let r=await o(a);e.fetchMetrics=j.renderOpts.fetchMetrics;let d=j.renderOpts.pendingWaitUntil;d&&i.waitUntil&&(i.waitUntil(d),d=void 0);let l=j.renderOpts.collectedTags;if(!k)return await (0,c.sendResponse)(F,K,r,j.renderOpts.pendingWaitUntil),null;{let e=await r.blob(),t=(0,h.toNodeOutgoingHttpHeaders)(r.headers);l&&(t[w.NEXT_CACHE_TAGS_HEADER]=l),!t["content-type"]&&e.type&&(t["content-type"]=e.type);let n=void 0!==j.renderOpts.collectedRevalidate&&!(j.renderOpts.collectedRevalidate>=w.INFINITE_CACHE)&&j.renderOpts.collectedRevalidate,i=void 0===j.renderOpts.collectedExpire||j.renderOpts.collectedExpire>=w.INFINITE_CACHE?void 0:j.renderOpts.collectedExpire;return{value:{kind:g.CachedRouteKind.APP_ROUTE,status:r.status,body:Buffer.from(await e.arrayBuffer()),headers:t},cacheControl:{revalidate:n,expire:i}}}}catch(t){throw(null==n?void 0:n.isStale)&&await S.onRequestError(e,t,{routerKind:"App Router",routePath:R,routeType:"route",revalidateReason:(0,p.getRevalidateReason)({isStaticGeneration:H,isOnDemandRevalidate:N})},!1,x),t}},u=await S.handleResponse({req:e,nextConfig:b,cacheKey:$,routeKind:n.RouteKind.APP_ROUTE,isFallback:!1,prerenderManifest:M,isRoutePPREnabled:!1,isOnDemandRevalidate:N,revalidateOnlyGenerated:A,responseGenerator:l,waitUntil:i.waitUntil,isMinimalMode:s});if(!k)return null;if((null==u||null==(r=u.value)?void 0:r.kind)!==g.CachedRouteKind.APP_ROUTE)throw Object.defineProperty(Error(`Invariant: app-route received invalid cache entry ${null==u||null==(d=u.value)?void 0:d.kind}`),"__NEXT_ERROR_CODE",{value:"E701",enumerable:!1,configurable:!0});s||t.setHeader("x-nextjs-cache",N?"REVALIDATED":u.isMiss?"MISS":u.isStale?"STALE":"HIT"),P&&t.setHeader("Cache-Control","private, no-cache, no-store, max-age=0, must-revalidate");let m=(0,h.fromNodeOutgoingHttpHeaders)(u.value.headers);return s&&k||m.delete(w.NEXT_CACHE_TAGS_HEADER),!u.cacheControl||t.getHeader("Cache-Control")||m.get("Cache-Control")||m.set("Cache-Control",(0,y.getCacheControlHeader)(u.cacheControl)),await (0,c.sendResponse)(F,K,new Response(u.value.body,{headers:m,status:u.value.status||200})),null};q?await d(q):await W.withPropagatedContext(e.headers,()=>W.trace(u.BaseServerSpan.handleRequest,{spanName:`${L} ${R}`,kind:r.SpanKind.SERVER,attributes:{"http.method":L,"http.target":e.url}},d))}catch(t){if(t instanceof m.NoFallbackError||await S.onRequestError(e,t,{routerKind:"App Router",routePath:I,routeType:"route",revalidateReason:(0,p.getRevalidateReason)({isStaticGeneration:H,isOnDemandRevalidate:N})},!1,x),k)throw t;return await (0,c.sendResponse)(F,K,new Response(null,{status:500})),null}}e.s(["handler",()=>U,"patchFetch",()=>T,"routeModule",()=>S,"serverHooks",()=>A,"workAsyncStorage",()=>x,"workUnitAsyncStorage",()=>N],17525)}];

//# sourceMappingURL=5d253_next_dist_esm_build_templates_app-route_3f974ad8.js.map