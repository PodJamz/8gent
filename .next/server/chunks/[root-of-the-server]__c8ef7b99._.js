module.exports=[918622,(e,t,r)=>{t.exports=e.x("next/dist/compiled/next-server/app-page-turbo.runtime.prod.js",()=>require("next/dist/compiled/next-server/app-page-turbo.runtime.prod.js"))},556704,(e,t,r)=>{t.exports=e.x("next/dist/server/app-render/work-async-storage.external.js",()=>require("next/dist/server/app-render/work-async-storage.external.js"))},832319,(e,t,r)=>{t.exports=e.x("next/dist/server/app-render/work-unit-async-storage.external.js",()=>require("next/dist/server/app-render/work-unit-async-storage.external.js"))},324725,(e,t,r)=>{t.exports=e.x("next/dist/server/app-render/after-task-async-storage.external.js",()=>require("next/dist/server/app-render/after-task-async-storage.external.js"))},193695,(e,t,r)=>{t.exports=e.x("next/dist/shared/lib/no-fallback-error.external.js",()=>require("next/dist/shared/lib/no-fallback-error.external.js"))},953334,e=>{"use strict";var t=e.i(457375),r=e.i(174015),o=e.i(116384),a=e.i(63831),n=e.i(868001),s=e.i(842780),i=e.i(763077),d=e.i(502964),l=e.i(993216),u=e.i(783900),p=e.i(295731),c=e.i(726839),m=e.i(775778),h=e.i(40992),f=e.i(432128),R=e.i(193695);e.i(44807);var x=e.i(989978),g=e.i(39334);let v=new Map;async function w(e){let t=`render-${Date.now()}-${Math.random().toString(36).slice(2,8)}`,r={id:t,compositionId:e.compositionId,compositionName:e.compositionName,format:e.format||"mp4",quality:e.quality||"standard",status:"not_configured",progress:0,error:"Server-side rendering not configured. Use sandbox mode (mode='sandbox') for local rendering with ffmpeg.wasm, or set up Remotion Lambda for cloud rendering.",createdAt:Date.now(),completedAt:Date.now()};return v.set(t,r),r}async function y(e){try{let t=await e.json();if(!t.compositionId||!t.compositionData)return g.NextResponse.json({error:"Missing compositionId or compositionData"},{status:400});let r={compositionId:t.compositionId,compositionName:t.compositionName||"Untitled",compositionData:{width:t.compositionData.width||1920,height:t.compositionData.height||1080,fps:t.compositionData.fps||30,durationInFrames:t.compositionData.durationInFrames||300,props:t.compositionData.props||{}},format:t.format||"mp4",quality:t.quality||"standard"},o=await w(r);return g.NextResponse.json({success:!0,job:{id:o.id,status:o.status,progress:o.progress,createdAt:o.createdAt},message:`Render job ${o.id} queued successfully`})}catch(e){return console.error("Render error:",e),g.NextResponse.json({error:e instanceof Error?e.message:"Failed to start render"},{status:500})}}async function E(e){try{let{searchParams:t}=new URL(e.url),r=t.get("jobId");if(r){let e=v.get(r);if(!e)return g.NextResponse.json({error:"Render job not found"},{status:404});return g.NextResponse.json({success:!0,job:{id:e.id,compositionId:e.compositionId,compositionName:e.compositionName,format:e.format,quality:e.quality,status:e.status,progress:e.progress,outputUrl:e.outputUrl,error:e.error,createdAt:e.createdAt,startedAt:e.startedAt,completedAt:e.completedAt,durationMs:e.durationMs}})}let o=Array.from(v.values()).sort((e,t)=>t.createdAt-e.createdAt);return g.NextResponse.json({success:!0,jobs:o.map(e=>({id:e.id,compositionName:e.compositionName,format:e.format,status:e.status,progress:e.progress,outputUrl:e.outputUrl,createdAt:e.createdAt})),total:o.length})}catch(e){return console.error("Get render status error:",e),g.NextResponse.json({error:"Failed to get render status"},{status:500})}}async function A(e){try{let t,{searchParams:r}=new URL(e.url),o=r.get("jobId");if(!o)return g.NextResponse.json({error:"Missing jobId parameter"},{status:400});if(!(t=v.get(o))||"completed"===t.status||"failed"===t.status||(t.status="failed",t.error="Cancelled by user",t.completedAt=Date.now(),0))return g.NextResponse.json({error:"Job not found or already completed"},{status:404});return g.NextResponse.json({success:!0,message:`Render job ${o} cancelled`})}catch(e){return console.error("Cancel render error:",e),g.NextResponse.json({error:"Failed to cancel render"},{status:500})}}e.s(["DELETE",()=>A,"GET",()=>E,"POST",()=>y],519165);var N=e.i(519165);let b=new t.AppRouteRouteModule({definition:{kind:r.RouteKind.APP_ROUTE,page:"/api/video/render/route",pathname:"/api/video/render",filename:"route",bundlePath:""},distDir:".next",relativeProjectDir:"",resolvedPagePath:"[project]/src/app/api/video/render/route.ts",nextConfigOutput:"",userland:N}),{workAsyncStorage:j,workUnitAsyncStorage:C,serverHooks:I}=b;function T(){return(0,o.patchFetch)({workAsyncStorage:j,workUnitAsyncStorage:C})}async function q(e,t,o){b.isDev&&(0,a.addRequestMeta)(e,"devRequestTimingInternalsEnd",process.hrtime.bigint());let g="/api/video/render/route";g=g.replace(/\/index$/,"")||"/";let v=await b.prepare(e,t,{srcPage:g,multiZoneDraftMode:!1});if(!v)return t.statusCode=400,t.end("Bad Request"),null==o.waitUntil||o.waitUntil.call(o,Promise.resolve()),null;let{buildId:w,params:y,nextConfig:E,parsedUrl:A,isDraftMode:N,prerenderManifest:j,routerServerContext:C,isOnDemandRevalidate:I,revalidateOnlyGenerated:T,resolvedPathname:q,clientReferenceManifest:D,serverActionsManifest:P}=v,U=(0,i.normalizeAppPath)(g),O=!!(j.dynamicRoutes[U]||j.routes[q]),S=async()=>((null==C?void 0:C.render404)?await C.render404(e,t,A,!1):t.end("This page could not be found"),null);if(O&&!N){let e=!!j.routes[q],t=j.dynamicRoutes[U];if(t&&!1===t.fallback&&!e){if(E.experimental.adapterPath)return await S();throw new R.NoFallbackError}}let k=null;!O||b.isDev||N||(k="/index"===(k=q)?"/":k);let _=!0===b.isDev||!O,M=O&&!_;P&&D&&(0,s.setManifestsSingleton)({page:g,clientReferenceManifest:D,serverActionsManifest:P});let H=e.method||"GET",F=(0,n.getTracer)(),$=F.getActiveScopeSpan(),L={params:y,prerenderManifest:j,renderOpts:{experimental:{authInterrupts:!!E.experimental.authInterrupts},cacheComponents:!!E.cacheComponents,supportsDynamicResponse:_,incrementalCache:(0,a.getRequestMeta)(e,"incrementalCache"),cacheLifeProfiles:E.cacheLife,waitUntil:o.waitUntil,onClose:e=>{t.on("close",e)},onAfterTaskError:void 0,onInstrumentationRequestError:(t,r,o,a)=>b.onRequestError(e,t,o,a,C)},sharedContext:{buildId:w}},K=new d.NodeNextRequest(e),B=new d.NodeNextResponse(t),G=l.NextRequestAdapter.fromNodeNextRequest(K,(0,l.signalFromNodeResponse)(t));try{let s=async e=>b.handle(G,L).finally(()=>{if(!e)return;e.setAttributes({"http.status_code":t.statusCode,"next.rsc":!1});let r=F.getRootSpanAttributes();if(!r)return;if(r.get("next.span_type")!==u.BaseServerSpan.handleRequest)return void console.warn(`Unexpected root span type '${r.get("next.span_type")}'. Please report this Next.js issue https://github.com/vercel/next.js`);let o=r.get("next.route");if(o){let t=`${H} ${o}`;e.setAttributes({"next.route":o,"http.route":o,"next.span_name":t}),e.updateName(t)}else e.updateName(`${H} ${g}`)}),i=!!(0,a.getRequestMeta)(e,"minimalMode"),d=async a=>{var n,d;let l=async({previousCacheEntry:r})=>{try{if(!i&&I&&T&&!r)return t.statusCode=404,t.setHeader("x-nextjs-cache","REVALIDATED"),t.end("This page could not be found"),null;let n=await s(a);e.fetchMetrics=L.renderOpts.fetchMetrics;let d=L.renderOpts.pendingWaitUntil;d&&o.waitUntil&&(o.waitUntil(d),d=void 0);let l=L.renderOpts.collectedTags;if(!O)return await (0,c.sendResponse)(K,B,n,L.renderOpts.pendingWaitUntil),null;{let e=await n.blob(),t=(0,m.toNodeOutgoingHttpHeaders)(n.headers);l&&(t[f.NEXT_CACHE_TAGS_HEADER]=l),!t["content-type"]&&e.type&&(t["content-type"]=e.type);let r=void 0!==L.renderOpts.collectedRevalidate&&!(L.renderOpts.collectedRevalidate>=f.INFINITE_CACHE)&&L.renderOpts.collectedRevalidate,o=void 0===L.renderOpts.collectedExpire||L.renderOpts.collectedExpire>=f.INFINITE_CACHE?void 0:L.renderOpts.collectedExpire;return{value:{kind:x.CachedRouteKind.APP_ROUTE,status:n.status,body:Buffer.from(await e.arrayBuffer()),headers:t},cacheControl:{revalidate:r,expire:o}}}}catch(t){throw(null==r?void 0:r.isStale)&&await b.onRequestError(e,t,{routerKind:"App Router",routePath:g,routeType:"route",revalidateReason:(0,p.getRevalidateReason)({isStaticGeneration:M,isOnDemandRevalidate:I})},!1,C),t}},u=await b.handleResponse({req:e,nextConfig:E,cacheKey:k,routeKind:r.RouteKind.APP_ROUTE,isFallback:!1,prerenderManifest:j,isRoutePPREnabled:!1,isOnDemandRevalidate:I,revalidateOnlyGenerated:T,responseGenerator:l,waitUntil:o.waitUntil,isMinimalMode:i});if(!O)return null;if((null==u||null==(n=u.value)?void 0:n.kind)!==x.CachedRouteKind.APP_ROUTE)throw Object.defineProperty(Error(`Invariant: app-route received invalid cache entry ${null==u||null==(d=u.value)?void 0:d.kind}`),"__NEXT_ERROR_CODE",{value:"E701",enumerable:!1,configurable:!0});i||t.setHeader("x-nextjs-cache",I?"REVALIDATED":u.isMiss?"MISS":u.isStale?"STALE":"HIT"),N&&t.setHeader("Cache-Control","private, no-cache, no-store, max-age=0, must-revalidate");let R=(0,m.fromNodeOutgoingHttpHeaders)(u.value.headers);return i&&O||R.delete(f.NEXT_CACHE_TAGS_HEADER),!u.cacheControl||t.getHeader("Cache-Control")||R.get("Cache-Control")||R.set("Cache-Control",(0,h.getCacheControlHeader)(u.cacheControl)),await (0,c.sendResponse)(K,B,new Response(u.value.body,{headers:R,status:u.value.status||200})),null};$?await d($):await F.withPropagatedContext(e.headers,()=>F.trace(u.BaseServerSpan.handleRequest,{spanName:`${H} ${g}`,kind:n.SpanKind.SERVER,attributes:{"http.method":H,"http.target":e.url}},d))}catch(t){if(t instanceof R.NoFallbackError||await b.onRequestError(e,t,{routerKind:"App Router",routePath:U,routeType:"route",revalidateReason:(0,p.getRevalidateReason)({isStaticGeneration:M,isOnDemandRevalidate:I})},!1,C),O)throw t;return await (0,c.sendResponse)(K,B,new Response(null,{status:500})),null}}e.s(["handler",()=>q,"patchFetch",()=>T,"routeModule",()=>b,"serverHooks",()=>I,"workAsyncStorage",()=>j,"workUnitAsyncStorage",()=>C],953334)}];

//# sourceMappingURL=%5Broot-of-the-server%5D__c8ef7b99._.js.map