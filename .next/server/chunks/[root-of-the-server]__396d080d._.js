module.exports=[918622,(e,t,r)=>{t.exports=e.x("next/dist/compiled/next-server/app-page-turbo.runtime.prod.js",()=>require("next/dist/compiled/next-server/app-page-turbo.runtime.prod.js"))},556704,(e,t,r)=>{t.exports=e.x("next/dist/server/app-render/work-async-storage.external.js",()=>require("next/dist/server/app-render/work-async-storage.external.js"))},832319,(e,t,r)=>{t.exports=e.x("next/dist/server/app-render/work-unit-async-storage.external.js",()=>require("next/dist/server/app-render/work-unit-async-storage.external.js"))},324725,(e,t,r)=>{t.exports=e.x("next/dist/server/app-render/after-task-async-storage.external.js",()=>require("next/dist/server/app-render/after-task-async-storage.external.js"))},193695,(e,t,r)=>{t.exports=e.x("next/dist/shared/lib/no-fallback-error.external.js",()=>require("next/dist/shared/lib/no-fallback-error.external.js"))},806389,e=>{"use strict";var t=e.i(457375),r=e.i(174015),a=e.i(116384),n=e.i(63831),i=e.i(868001),o=e.i(842780),s=e.i(763077),l=e.i(502964),c=e.i(993216),u=e.i(783900),p=e.i(295731),d=e.i(726839),h=e.i(775778),m=e.i(40992),g=e.i(432128),f=e.i(193695);e.i(44807);var w=e.i(989978),y=e.i(39334);async function x(e,t){try{let r=await fetch(`https://api.github.com/repos/${e}/${t}`,{headers:{Accept:"application/vnd.github.v3+json",...process.env.GITHUB_TOKEN&&{Authorization:`token ${process.env.GITHUB_TOKEN}`}}});if(!r.ok)return;let a=await r.json();return{owner:e,repo:t,stars:a.stargazers_count,forks:a.forks_count,language:a.language,description:a.description,topics:a.topics||[],lastUpdated:a.updated_at,license:a.license?.name}}catch{return{owner:e,repo:t}}}async function R(e){try{let t=await fetch(e,{headers:{"User-Agent":"Mozilla/5.0 (compatible; ResearchBot/1.0; +https://openclaw.io)",Accept:"text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8"}});if(!t.ok)throw Error(`Failed to fetch: ${t.status}`);let r=await t.text(),a=r.match(/<title[^>]*>([^<]+)<\/title>/i),n=a?.[1]?.trim(),i=r.match(/<meta[^>]*property=["']og:image["'][^>]*content=["']([^"']+)["']/i),o=r.match(/<meta[^>]*name=["']twitter:image["'][^>]*content=["']([^"']+)["']/i),s=i?.[1]||o?.[1],l=r.match(/<meta[^>]*name=["']description["'][^>]*content=["']([^"']+)["']/i),c=r.match(/<meta[^>]*property=["']og:description["'][^>]*content=["']([^"']+)["']/i),u=l?.[1]||c?.[1],p=r.match(/<link[^>]*rel=["'](?:shortcut )?icon["'][^>]*href=["']([^"']+)["']/i),d=p?.[1];if(d&&!d.startsWith("http")){let t=new URL(e);d=new URL(d,t.origin).href}if(!d){let t=new URL(e);d=`${t.origin}/favicon.ico`}return{html:r,title:n,excerpt:u,thumbnail:s,favicon:d}}catch(e){return console.error("Error fetching page:",e),{html:""}}}async function v(e,t){if(!process.env.ANTHROPIC_API_KEY)return{};try{let r=await fetch("https://api.anthropic.com/v1/messages",{method:"POST",headers:{"Content-Type":"application/json","x-api-key":process.env.ANTHROPIC_API_KEY,"anthropic-version":"2023-06-01"},body:JSON.stringify({model:"claude-3-5-haiku-20241022",max_tokens:500,messages:[{role:"user",content:`Analyze this content and provide:
1. A 2-3 sentence summary
2. 3-5 relevant keywords/tags

Title: ${t}
Content (first 2000 chars): ${e.slice(0,2e3)}

Respond in JSON format:
{"summary": "...", "keywords": ["...", "..."]}`}]})});if(!r.ok)return{};let a=await r.json(),n=a.content?.[0]?.text;if(n){let e=n.match(/\{[\s\S]*\}/);if(e){let t=JSON.parse(e[0]);return{summary:t.summary,keywords:t.keywords}}}return{}}catch(e){return console.error("AI summary error:",e),{}}}async function b(e){try{let t,{url:r}=await e.json();if(!r)return y.NextResponse.json({error:"URL is required"},{status:400});try{t=new URL(r).href}catch{return y.NextResponse.json({error:"Invalid URL"},{status:400})}let a=function(e){try{return new URL(e).hostname.replace("www.","")}catch{return e}}(t),n=function(e,t){if("github.com"===t){let t=e.split("/").filter(Boolean);if(t.length>=4){if("blob"===t[3])return"github_file";if("tree"===t[3])return"github_readme"}return t.length,"github_repo"}return["youtube.com","youtu.be","vimeo.com"].includes(t)?"video":["npmjs.com","pypi.org","crates.io","rubygems.org"].includes(t)?"package":t.includes("docs.")||t.includes("documentation")||e.includes("/docs/")?"documentation":["twitter.com","x.com"].includes(t)?"tweet":"linkedin.com"===t&&e.includes("/in/")?"person":"article"}(t,a),i={url:t,domain:a,contentType:n};if(n.startsWith("github")){let e=new URL(t).pathname.split("/").filter(Boolean);if(e.length>=2){let[t,r]=e;if(i.githubData=await x(t,r),i.title=i.githubData?.description||`${t}/${r}`,i.tags=i.githubData?.topics||[],i.githubData?.description){let e=await v(i.githubData.description+(i.githubData.topics?.join(", ")||""),`${t}/${r}`);i.aiSummary=e.summary,i.aiKeywords=e.keywords}}}if("video"===n&&a.includes("youtube")){let e=new URL(t),r=e.searchParams.get("v");r||"youtu.be"!==a||(r=e.pathname.slice(1)),r&&(i.videoData={platform:"youtube",videoId:r,embedUrl:`https://www.youtube.com/embed/${r}`},i.thumbnail=`https://img.youtube.com/vi/${r}/maxresdefault.jpg`)}if("npmjs.com"===a){let e=new URL(t).pathname.split("/").filter(Boolean);if("package"===e[0]&&e[1]){let t=e.slice(1).join("/");try{let e=await fetch(`https://registry.npmjs.org/${t}`);if(e.ok){let r=await e.json();i.packageData={registry:"npm",name:t,version:r["dist-tags"]?.latest,license:r.license},i.title=r.name,i.excerpt=r.description}}catch{}}}if(!i.title){let e=await R(t);if(i.title=e.title||a,i.excerpt=e.excerpt,i.thumbnail=e.thumbnail,i.favicon=e.favicon,"article"===n||"documentation"===n){let t=e.excerpt||e.html.replace(/<[^>]+>/g," ").slice(0,3e3),r=await v(t,i.title||"");i.aiSummary=r.summary,i.aiKeywords=r.keywords,r.keywords&&(i.tags=r.keywords)}}return y.NextResponse.json(i)}catch(e){return console.error("Scraping error:",e),y.NextResponse.json({error:"Failed to scrape URL"},{status:500})}}e.s(["POST",()=>b],451268);var E=e.i(451268);let k=new t.AppRouteRouteModule({definition:{kind:r.RouteKind.APP_ROUTE,page:"/api/research/scrape/route",pathname:"/api/research/scrape",filename:"route",bundlePath:""},distDir:".next",relativeProjectDir:"",resolvedPagePath:"[project]/src/app/api/research/scrape/route.ts",nextConfigOutput:"",userland:E}),{workAsyncStorage:A,workUnitAsyncStorage:C,serverHooks:N}=k;function T(){return(0,a.patchFetch)({workAsyncStorage:A,workUnitAsyncStorage:C})}async function j(e,t,a){k.isDev&&(0,n.addRequestMeta)(e,"devRequestTimingInternalsEnd",process.hrtime.bigint());let y="/api/research/scrape/route";y=y.replace(/\/index$/,"")||"/";let x=await k.prepare(e,t,{srcPage:y,multiZoneDraftMode:!1});if(!x)return t.statusCode=400,t.end("Bad Request"),null==a.waitUntil||a.waitUntil.call(a,Promise.resolve()),null;let{buildId:R,params:v,nextConfig:b,parsedUrl:E,isDraftMode:A,prerenderManifest:C,routerServerContext:N,isOnDemandRevalidate:T,revalidateOnlyGenerated:j,resolvedPathname:_,clientReferenceManifest:U,serverActionsManifest:O}=x,P=(0,s.normalizeAppPath)(y),S=!!(C.dynamicRoutes[P]||C.routes[_]),I=async()=>((null==N?void 0:N.render404)?await N.render404(e,t,E,!1):t.end("This page could not be found"),null);if(S&&!A){let e=!!C.routes[_],t=C.dynamicRoutes[P];if(t&&!1===t.fallback&&!e){if(b.experimental.adapterPath)return await I();throw new f.NoFallbackError}}let $=null;!S||k.isDev||A||($="/index"===($=_)?"/":$);let q=!0===k.isDev||!S,D=S&&!q;O&&U&&(0,o.setManifestsSingleton)({page:y,clientReferenceManifest:U,serverActionsManifest:O});let H=e.method||"GET",L=(0,i.getTracer)(),K=L.getActiveScopeSpan(),M={params:v,prerenderManifest:C,renderOpts:{experimental:{authInterrupts:!!b.experimental.authInterrupts},cacheComponents:!!b.cacheComponents,supportsDynamicResponse:q,incrementalCache:(0,n.getRequestMeta)(e,"incrementalCache"),cacheLifeProfiles:b.cacheLife,waitUntil:a.waitUntil,onClose:e=>{t.on("close",e)},onAfterTaskError:void 0,onInstrumentationRequestError:(t,r,a,n)=>k.onRequestError(e,t,a,n,N)},sharedContext:{buildId:R}},B=new l.NodeNextRequest(e),F=new l.NodeNextResponse(t),z=c.NextRequestAdapter.fromNodeNextRequest(B,(0,c.signalFromNodeResponse)(t));try{let o=async e=>k.handle(z,M).finally(()=>{if(!e)return;e.setAttributes({"http.status_code":t.statusCode,"next.rsc":!1});let r=L.getRootSpanAttributes();if(!r)return;if(r.get("next.span_type")!==u.BaseServerSpan.handleRequest)return void console.warn(`Unexpected root span type '${r.get("next.span_type")}'. Please report this Next.js issue https://github.com/vercel/next.js`);let a=r.get("next.route");if(a){let t=`${H} ${a}`;e.setAttributes({"next.route":a,"http.route":a,"next.span_name":t}),e.updateName(t)}else e.updateName(`${H} ${y}`)}),s=!!(0,n.getRequestMeta)(e,"minimalMode"),l=async n=>{var i,l;let c=async({previousCacheEntry:r})=>{try{if(!s&&T&&j&&!r)return t.statusCode=404,t.setHeader("x-nextjs-cache","REVALIDATED"),t.end("This page could not be found"),null;let i=await o(n);e.fetchMetrics=M.renderOpts.fetchMetrics;let l=M.renderOpts.pendingWaitUntil;l&&a.waitUntil&&(a.waitUntil(l),l=void 0);let c=M.renderOpts.collectedTags;if(!S)return await (0,d.sendResponse)(B,F,i,M.renderOpts.pendingWaitUntil),null;{let e=await i.blob(),t=(0,h.toNodeOutgoingHttpHeaders)(i.headers);c&&(t[g.NEXT_CACHE_TAGS_HEADER]=c),!t["content-type"]&&e.type&&(t["content-type"]=e.type);let r=void 0!==M.renderOpts.collectedRevalidate&&!(M.renderOpts.collectedRevalidate>=g.INFINITE_CACHE)&&M.renderOpts.collectedRevalidate,a=void 0===M.renderOpts.collectedExpire||M.renderOpts.collectedExpire>=g.INFINITE_CACHE?void 0:M.renderOpts.collectedExpire;return{value:{kind:w.CachedRouteKind.APP_ROUTE,status:i.status,body:Buffer.from(await e.arrayBuffer()),headers:t},cacheControl:{revalidate:r,expire:a}}}}catch(t){throw(null==r?void 0:r.isStale)&&await k.onRequestError(e,t,{routerKind:"App Router",routePath:y,routeType:"route",revalidateReason:(0,p.getRevalidateReason)({isStaticGeneration:D,isOnDemandRevalidate:T})},!1,N),t}},u=await k.handleResponse({req:e,nextConfig:b,cacheKey:$,routeKind:r.RouteKind.APP_ROUTE,isFallback:!1,prerenderManifest:C,isRoutePPREnabled:!1,isOnDemandRevalidate:T,revalidateOnlyGenerated:j,responseGenerator:c,waitUntil:a.waitUntil,isMinimalMode:s});if(!S)return null;if((null==u||null==(i=u.value)?void 0:i.kind)!==w.CachedRouteKind.APP_ROUTE)throw Object.defineProperty(Error(`Invariant: app-route received invalid cache entry ${null==u||null==(l=u.value)?void 0:l.kind}`),"__NEXT_ERROR_CODE",{value:"E701",enumerable:!1,configurable:!0});s||t.setHeader("x-nextjs-cache",T?"REVALIDATED":u.isMiss?"MISS":u.isStale?"STALE":"HIT"),A&&t.setHeader("Cache-Control","private, no-cache, no-store, max-age=0, must-revalidate");let f=(0,h.fromNodeOutgoingHttpHeaders)(u.value.headers);return s&&S||f.delete(g.NEXT_CACHE_TAGS_HEADER),!u.cacheControl||t.getHeader("Cache-Control")||f.get("Cache-Control")||f.set("Cache-Control",(0,m.getCacheControlHeader)(u.cacheControl)),await (0,d.sendResponse)(B,F,new Response(u.value.body,{headers:f,status:u.value.status||200})),null};K?await l(K):await L.withPropagatedContext(e.headers,()=>L.trace(u.BaseServerSpan.handleRequest,{spanName:`${H} ${y}`,kind:i.SpanKind.SERVER,attributes:{"http.method":H,"http.target":e.url}},l))}catch(t){if(t instanceof f.NoFallbackError||await k.onRequestError(e,t,{routerKind:"App Router",routePath:P,routeType:"route",revalidateReason:(0,p.getRevalidateReason)({isStaticGeneration:D,isOnDemandRevalidate:T})},!1,N),S)throw t;return await (0,d.sendResponse)(B,F,new Response(null,{status:500})),null}}e.s(["handler",()=>j,"patchFetch",()=>T,"routeModule",()=>k,"serverHooks",()=>N,"workAsyncStorage",()=>A,"workUnitAsyncStorage",()=>C],806389)}];

//# sourceMappingURL=%5Broot-of-the-server%5D__396d080d._.js.map