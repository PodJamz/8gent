{"version":3,"sources":["../../../../src/components/scheduling/EventTypeCard.tsx","../../../../src/components/scheduling/EventTypeForm.tsx","../../../../src/components/scheduling/AvailabilityEditor.tsx","../../../../src/components/scheduling/BookingCalendar.tsx","../../../../src/components/scheduling/BookingForm.tsx","../../../../src/components/scheduling/BookingConfirmation.tsx","../../../../src/components/scheduling/TimeSlotPicker.tsx","../../../../src/components/scheduling/UpcomingBookings.tsx","../../../../src/components/scheduling/GoogleCalendarConnect.tsx","../../../../src/components/scheduling/ConversationalBooking.tsx"],"sourcesContent":["'use client';\n\n/**\n * EventTypeCard - Display card for an event type\n */\n\nimport { useState } from 'react';\nimport { Clock, Copy, ExternalLink, MoreVertical, Pencil, Trash2, ToggleLeft, ToggleRight } from 'lucide-react';\nimport { motion } from 'framer-motion';\nimport { LiquidGlass } from '@/components/ui/liquid-glass';\nimport type { EventType } from '@/lib/scheduling/types';\nimport { formatDuration, copyToClipboard, getBookingLink } from '@/lib/scheduling/utils';\n\ninterface EventTypeCardProps {\n  eventType: EventType;\n  username: string;\n  onEdit: (eventType: EventType) => void;\n  onDelete: (id: string) => void;\n  onToggleActive: (id: string, isActive: boolean) => void;\n}\n\nexport function EventTypeCard({\n  eventType,\n  username,\n  onEdit,\n  onDelete,\n  onToggleActive,\n}: EventTypeCardProps) {\n  const [showMenu, setShowMenu] = useState(false);\n  const [copied, setCopied] = useState(false);\n\n  const bookingLink = getBookingLink(username, eventType.slug);\n\n  const handleCopyLink = async () => {\n    const success = await copyToClipboard(bookingLink);\n    if (success) {\n      setCopied(true);\n      setTimeout(() => setCopied(false), 2000);\n    }\n  };\n\n  const locationLabels: Record<string, string> = {\n    google_meet: 'Google Meet',\n    zoom: 'Zoom',\n    phone: 'Phone Call',\n    in_person: 'In Person',\n    custom: 'Custom Location',\n  };\n\n  return (\n    <LiquidGlass className=\"relative p-4 rounded-xl\">\n      <div className=\"flex items-start gap-4\">\n        {/* Color indicator */}\n        <div\n          className=\"w-3 h-full min-h-[80px] rounded-full flex-shrink-0\"\n          style={{ backgroundColor: eventType.color }}\n        />\n\n        {/* Content */}\n        <div className=\"flex-1 min-w-0\">\n          <div className=\"flex items-start justify-between gap-2\">\n            <div>\n              <h3 className=\"font-semibold text-lg\" style={{ color: 'hsl(var(--foreground))' }}>\n                {eventType.title}\n              </h3>\n              {eventType.description && (\n                <p className=\"text-sm mt-1 line-clamp-2\" style={{ color: 'hsl(var(--muted-foreground))' }}>\n                  {eventType.description}\n                </p>\n              )}\n            </div>\n\n            {/* Menu */}\n            <div className=\"relative\">\n              <button\n                onClick={() => setShowMenu(!showMenu)}\n                className=\"p-2 rounded-lg hover:bg-black/10 dark:hover:bg-white/10 transition-colors\"\n              >\n                <MoreVertical className=\"w-4 h-4\" style={{ color: 'hsl(var(--muted-foreground))' }} />\n              </button>\n\n              {showMenu && (\n                <>\n                  <div\n                    className=\"fixed inset-0 z-10\"\n                    onClick={() => setShowMenu(false)}\n                  />\n                  <motion.div\n                    initial={{ opacity: 0, scale: 0.95 }}\n                    animate={{ opacity: 1, scale: 1 }}\n                    className=\"absolute right-0 top-full mt-1 z-20 min-w-[160px] rounded-lg shadow-lg overflow-hidden\"\n                    style={{ backgroundColor: 'hsl(var(--popover))', border: '1px solid hsl(var(--border))' }}\n                  >\n                    <button\n                      onClick={() => {\n                        onEdit(eventType);\n                        setShowMenu(false);\n                      }}\n                      className=\"w-full px-4 py-2 text-left text-sm flex items-center gap-2 hover:bg-black/5 dark:hover:bg-white/5\"\n                    >\n                      <Pencil className=\"w-4 h-4\" />\n                      Edit\n                    </button>\n                    <button\n                      onClick={() => {\n                        onToggleActive(eventType._id, !eventType.isActive);\n                        setShowMenu(false);\n                      }}\n                      className=\"w-full px-4 py-2 text-left text-sm flex items-center gap-2 hover:bg-black/5 dark:hover:bg-white/5\"\n                    >\n                      {eventType.isActive ? (\n                        <>\n                          <ToggleRight className=\"w-4 h-4\" />\n                          Disable\n                        </>\n                      ) : (\n                        <>\n                          <ToggleLeft className=\"w-4 h-4\" />\n                          Enable\n                        </>\n                      )}\n                    </button>\n                    <button\n                      onClick={() => {\n                        onDelete(eventType._id);\n                        setShowMenu(false);\n                      }}\n                      className=\"w-full px-4 py-2 text-left text-sm flex items-center gap-2 text-red-500 hover:bg-red-500/10\"\n                    >\n                      <Trash2 className=\"w-4 h-4\" />\n                      Delete\n                    </button>\n                  </motion.div>\n                </>\n              )}\n            </div>\n          </div>\n\n          {/* Meta info */}\n          <div className=\"flex flex-wrap items-center gap-3 mt-3 text-sm\" style={{ color: 'hsl(var(--muted-foreground))' }}>\n            <span className=\"flex items-center gap-1\">\n              <Clock className=\"w-4 h-4\" />\n              {formatDuration(eventType.duration)}\n            </span>\n            <span className=\"px-2 py-0.5 rounded-full text-xs\" style={{ backgroundColor: 'hsl(var(--muted))' }}>\n              {locationLabels[eventType.locationType]}\n            </span>\n            {!eventType.isActive && (\n              <span className=\"px-2 py-0.5 rounded-full text-xs bg-yellow-500/20 text-yellow-600 dark:text-yellow-400\">\n                Disabled\n              </span>\n            )}\n          </div>\n\n          {/* Actions */}\n          <div className=\"flex items-center gap-2 mt-4\">\n            <button\n              onClick={handleCopyLink}\n              className=\"flex items-center gap-2 px-3 py-1.5 rounded-lg text-sm transition-colors\"\n              style={{\n                backgroundColor: 'hsl(var(--primary))',\n                color: 'hsl(var(--primary-foreground))',\n              }}\n            >\n              <Copy className=\"w-4 h-4\" />\n              {copied ? 'Copied!' : 'Copy Link'}\n            </button>\n            <a\n              href={bookingLink}\n              target=\"_blank\"\n              rel=\"noopener noreferrer\"\n              className=\"flex items-center gap-2 px-3 py-1.5 rounded-lg text-sm transition-colors hover:bg-black/5 dark:hover:bg-white/5\"\n              style={{ border: '1px solid hsl(var(--border))' }}\n            >\n              <ExternalLink className=\"w-4 h-4\" />\n              Preview\n            </a>\n          </div>\n        </div>\n      </div>\n    </LiquidGlass>\n  );\n}\n","'use client';\n\n/**\n * EventTypeForm - Create/Edit form for event types\n */\n\nimport { useState } from 'react';\nimport { X, Plus, Trash2 } from 'lucide-react';\nimport { motion, AnimatePresence } from 'framer-motion';\nimport { LiquidGlass } from '@/components/ui/liquid-glass';\nimport type { EventType, Question, LocationType } from '@/lib/scheduling/types';\nimport { DURATION_OPTIONS, EVENT_COLORS } from '@/lib/scheduling/types';\nimport { generateId } from '@/lib/scheduling/utils';\n\ninterface EventTypeFormProps {\n  eventType?: EventType | null;\n  onSave: (data: EventTypeFormData) => Promise<void>;\n  onClose: () => void;\n}\n\ninterface EventTypeFormData {\n  title: string;\n  description?: string;\n  duration: number;\n  color: string;\n  locationType: LocationType;\n  locationValue?: string;\n  bufferBefore?: number;\n  bufferAfter?: number;\n  minNotice?: number;\n  maxAdvance?: number;\n  questions?: Question[];\n}\n\nexport function EventTypeForm({ eventType, onSave, onClose }: EventTypeFormProps) {\n  const [isSubmitting, setIsSubmitting] = useState(false);\n  const [formData, setFormData] = useState<EventTypeFormData>({\n    title: eventType?.title || '',\n    description: eventType?.description || '',\n    duration: eventType?.duration || 30,\n    color: eventType?.color || EVENT_COLORS[0].value,\n    locationType: eventType?.locationType || 'google_meet',\n    locationValue: eventType?.locationValue || '',\n    bufferBefore: eventType?.bufferBefore || 0,\n    bufferAfter: eventType?.bufferAfter || 0,\n    minNotice: eventType?.minNotice || 24,\n    maxAdvance: eventType?.maxAdvance || 60,\n    questions: eventType?.questions || [],\n  });\n\n  const handleSubmit = async (e: React.FormEvent) => {\n    e.preventDefault();\n    if (!formData.title.trim()) return;\n\n    setIsSubmitting(true);\n    try {\n      await onSave(formData);\n      onClose();\n    } catch (error) {\n      console.error('Failed to save event type:', error);\n    } finally {\n      setIsSubmitting(false);\n    }\n  };\n\n  const addQuestion = () => {\n    setFormData({\n      ...formData,\n      questions: [\n        ...(formData.questions || []),\n        {\n          id: generateId(),\n          label: '',\n          type: 'text',\n          required: false,\n        },\n      ],\n    });\n  };\n\n  const updateQuestion = (index: number, updates: Partial<Question>) => {\n    const newQuestions = [...(formData.questions || [])];\n    newQuestions[index] = { ...newQuestions[index], ...updates };\n    setFormData({ ...formData, questions: newQuestions });\n  };\n\n  const removeQuestion = (index: number) => {\n    const newQuestions = [...(formData.questions || [])];\n    newQuestions.splice(index, 1);\n    setFormData({ ...formData, questions: newQuestions });\n  };\n\n  return (\n    <motion.div\n      initial={{ opacity: 0 }}\n      animate={{ opacity: 1 }}\n      exit={{ opacity: 0 }}\n      className=\"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/50 backdrop-blur-sm\"\n      onClick={(e) => e.target === e.currentTarget && onClose()}\n    >\n      <motion.div\n        initial={{ scale: 0.95, opacity: 0 }}\n        animate={{ scale: 1, opacity: 1 }}\n        exit={{ scale: 0.95, opacity: 0 }}\n        className=\"w-full max-w-lg max-h-[90vh] overflow-y-auto\"\n      >\n        <LiquidGlass className=\"p-6 rounded-2xl\">\n          <div className=\"flex items-center justify-between mb-6\">\n            <h2 className=\"text-xl font-semibold\" style={{ color: 'hsl(var(--foreground))' }}>\n              {eventType ? 'Edit Event Type' : 'New Event Type'}\n            </h2>\n            <button\n              onClick={onClose}\n              className=\"p-2 rounded-lg hover:bg-black/10 dark:hover:bg-white/10 transition-colors\"\n            >\n              <X className=\"w-5 h-5\" />\n            </button>\n          </div>\n\n          <form onSubmit={handleSubmit} className=\"space-y-5\">\n            {/* Title */}\n            <div>\n              <label className=\"block text-sm font-medium mb-2\" style={{ color: 'hsl(var(--foreground))' }}>\n                Title *\n              </label>\n              <input\n                type=\"text\"\n                value={formData.title}\n                onChange={(e) => setFormData({ ...formData, title: e.target.value })}\n                placeholder=\"30 Minute Meeting\"\n                className=\"w-full px-4 py-2 rounded-lg outline-none transition-all\"\n                style={{\n                  backgroundColor: 'hsl(var(--muted))',\n                  border: '1px solid hsl(var(--border))',\n                  color: 'hsl(var(--foreground))',\n                }}\n                required\n              />\n            </div>\n\n            {/* Description */}\n            <div>\n              <label className=\"block text-sm font-medium mb-2\" style={{ color: 'hsl(var(--foreground))' }}>\n                Description\n              </label>\n              <textarea\n                value={formData.description}\n                onChange={(e) => setFormData({ ...formData, description: e.target.value })}\n                placeholder=\"A quick chat to discuss your project\"\n                rows={3}\n                className=\"w-full px-4 py-2 rounded-lg outline-none transition-all resize-none\"\n                style={{\n                  backgroundColor: 'hsl(var(--muted))',\n                  border: '1px solid hsl(var(--border))',\n                  color: 'hsl(var(--foreground))',\n                }}\n              />\n            </div>\n\n            {/* Duration & Color */}\n            <div className=\"grid grid-cols-2 gap-4\">\n              <div>\n                <label className=\"block text-sm font-medium mb-2\" style={{ color: 'hsl(var(--foreground))' }}>\n                  Duration\n                </label>\n                <select\n                  value={formData.duration}\n                  onChange={(e) => setFormData({ ...formData, duration: Number(e.target.value) })}\n                  className=\"w-full px-4 py-2 rounded-lg outline-none\"\n                  style={{\n                    backgroundColor: 'hsl(var(--muted))',\n                    border: '1px solid hsl(var(--border))',\n                    color: 'hsl(var(--foreground))',\n                  }}\n                >\n                  {DURATION_OPTIONS.map((opt) => (\n                    <option key={opt.value} value={opt.value}>\n                      {opt.label}\n                    </option>\n                  ))}\n                </select>\n              </div>\n\n              <div>\n                <label className=\"block text-sm font-medium mb-2\" style={{ color: 'hsl(var(--foreground))' }}>\n                  Color\n                </label>\n                <div className=\"flex gap-2 flex-wrap\">\n                  {EVENT_COLORS.map((color) => (\n                    <button\n                      key={color.value}\n                      type=\"button\"\n                      onClick={() => setFormData({ ...formData, color: color.value })}\n                      className=\"w-8 h-8 rounded-full transition-transform hover:scale-110\"\n                      style={{\n                        backgroundColor: color.value,\n                        boxShadow: formData.color === color.value ? `0 0 0 2px hsl(var(--background)), 0 0 0 4px ${color.value}` : 'none',\n                      }}\n                      title={color.label}\n                    />\n                  ))}\n                </div>\n              </div>\n            </div>\n\n            {/* Location Type */}\n            <div>\n              <label className=\"block text-sm font-medium mb-2\" style={{ color: 'hsl(var(--foreground))' }}>\n                Location\n              </label>\n              <select\n                value={formData.locationType}\n                onChange={(e) => setFormData({ ...formData, locationType: e.target.value as LocationType })}\n                className=\"w-full px-4 py-2 rounded-lg outline-none\"\n                style={{\n                  backgroundColor: 'hsl(var(--muted))',\n                  border: '1px solid hsl(var(--border))',\n                  color: 'hsl(var(--foreground))',\n                }}\n              >\n                <option value=\"google_meet\">Google Meet</option>\n                <option value=\"zoom\">Zoom</option>\n                <option value=\"phone\">Phone Call</option>\n                <option value=\"in_person\">In Person</option>\n                <option value=\"custom\">Custom Link</option>\n              </select>\n\n              {(formData.locationType === 'phone' || formData.locationType === 'in_person' || formData.locationType === 'custom') && (\n                <input\n                  type=\"text\"\n                  value={formData.locationValue}\n                  onChange={(e) => setFormData({ ...formData, locationValue: e.target.value })}\n                  placeholder={\n                    formData.locationType === 'phone'\n                      ? 'Phone number'\n                      : formData.locationType === 'in_person'\n                        ? 'Address'\n                        : 'Meeting link'\n                  }\n                  className=\"w-full px-4 py-2 rounded-lg outline-none mt-2\"\n                  style={{\n                    backgroundColor: 'hsl(var(--muted))',\n                    border: '1px solid hsl(var(--border))',\n                    color: 'hsl(var(--foreground))',\n                  }}\n                />\n              )}\n            </div>\n\n            {/* Buffer Times */}\n            <div className=\"grid grid-cols-2 gap-4\">\n              <div>\n                <label className=\"block text-sm font-medium mb-2\" style={{ color: 'hsl(var(--foreground))' }}>\n                  Buffer Before (min)\n                </label>\n                <input\n                  type=\"number\"\n                  min=\"0\"\n                  max=\"60\"\n                  value={formData.bufferBefore}\n                  onChange={(e) => setFormData({ ...formData, bufferBefore: Number(e.target.value) })}\n                  className=\"w-full px-4 py-2 rounded-lg outline-none\"\n                  style={{\n                    backgroundColor: 'hsl(var(--muted))',\n                    border: '1px solid hsl(var(--border))',\n                    color: 'hsl(var(--foreground))',\n                  }}\n                />\n              </div>\n              <div>\n                <label className=\"block text-sm font-medium mb-2\" style={{ color: 'hsl(var(--foreground))' }}>\n                  Buffer After (min)\n                </label>\n                <input\n                  type=\"number\"\n                  min=\"0\"\n                  max=\"60\"\n                  value={formData.bufferAfter}\n                  onChange={(e) => setFormData({ ...formData, bufferAfter: Number(e.target.value) })}\n                  className=\"w-full px-4 py-2 rounded-lg outline-none\"\n                  style={{\n                    backgroundColor: 'hsl(var(--muted))',\n                    border: '1px solid hsl(var(--border))',\n                    color: 'hsl(var(--foreground))',\n                  }}\n                />\n              </div>\n            </div>\n\n            {/* Scheduling Window */}\n            <div className=\"grid grid-cols-2 gap-4\">\n              <div>\n                <label className=\"block text-sm font-medium mb-2\" style={{ color: 'hsl(var(--foreground))' }}>\n                  Min Notice (hours)\n                </label>\n                <input\n                  type=\"number\"\n                  min=\"0\"\n                  value={formData.minNotice}\n                  onChange={(e) => setFormData({ ...formData, minNotice: Number(e.target.value) })}\n                  className=\"w-full px-4 py-2 rounded-lg outline-none\"\n                  style={{\n                    backgroundColor: 'hsl(var(--muted))',\n                    border: '1px solid hsl(var(--border))',\n                    color: 'hsl(var(--foreground))',\n                  }}\n                />\n              </div>\n              <div>\n                <label className=\"block text-sm font-medium mb-2\" style={{ color: 'hsl(var(--foreground))' }}>\n                  Max Advance (days)\n                </label>\n                <input\n                  type=\"number\"\n                  min=\"1\"\n                  value={formData.maxAdvance}\n                  onChange={(e) => setFormData({ ...formData, maxAdvance: Number(e.target.value) })}\n                  className=\"w-full px-4 py-2 rounded-lg outline-none\"\n                  style={{\n                    backgroundColor: 'hsl(var(--muted))',\n                    border: '1px solid hsl(var(--border))',\n                    color: 'hsl(var(--foreground))',\n                  }}\n                />\n              </div>\n            </div>\n\n            {/* Custom Questions */}\n            <div>\n              <div className=\"flex items-center justify-between mb-2\">\n                <label className=\"text-sm font-medium\" style={{ color: 'hsl(var(--foreground))' }}>\n                  Booking Questions\n                </label>\n                <button\n                  type=\"button\"\n                  onClick={addQuestion}\n                  className=\"flex items-center gap-1 px-2 py-1 text-sm rounded-lg hover:bg-black/5 dark:hover:bg-white/5\"\n                  style={{ color: 'hsl(var(--primary))' }}\n                >\n                  <Plus className=\"w-4 h-4\" />\n                  Add\n                </button>\n              </div>\n\n              <AnimatePresence>\n                {formData.questions?.map((question, index) => (\n                  <motion.div\n                    key={question.id}\n                    initial={{ opacity: 0, height: 0 }}\n                    animate={{ opacity: 1, height: 'auto' }}\n                    exit={{ opacity: 0, height: 0 }}\n                    className=\"flex gap-2 mb-2\"\n                  >\n                    <input\n                      type=\"text\"\n                      value={question.label}\n                      onChange={(e) => updateQuestion(index, { label: e.target.value })}\n                      placeholder=\"Question\"\n                      className=\"flex-1 px-3 py-2 rounded-lg text-sm outline-none\"\n                      style={{\n                        backgroundColor: 'hsl(var(--muted))',\n                        border: '1px solid hsl(var(--border))',\n                        color: 'hsl(var(--foreground))',\n                      }}\n                    />\n                    <select\n                      value={question.type}\n                      onChange={(e) => updateQuestion(index, { type: e.target.value as Question['type'] })}\n                      className=\"px-2 py-2 rounded-lg text-sm outline-none\"\n                      style={{\n                        backgroundColor: 'hsl(var(--muted))',\n                        border: '1px solid hsl(var(--border))',\n                        color: 'hsl(var(--foreground))',\n                      }}\n                    >\n                      <option value=\"text\">Text</option>\n                      <option value=\"textarea\">Long Text</option>\n                      <option value=\"select\">Select</option>\n                    </select>\n                    <label className=\"flex items-center gap-1 text-sm\" style={{ color: 'hsl(var(--muted-foreground))' }}>\n                      <input\n                        type=\"checkbox\"\n                        checked={question.required}\n                        onChange={(e) => updateQuestion(index, { required: e.target.checked })}\n                      />\n                      Req\n                    </label>\n                    <button\n                      type=\"button\"\n                      onClick={() => removeQuestion(index)}\n                      className=\"p-2 text-red-500 hover:bg-red-500/10 rounded-lg\"\n                    >\n                      <Trash2 className=\"w-4 h-4\" />\n                    </button>\n                  </motion.div>\n                ))}\n              </AnimatePresence>\n            </div>\n\n            {/* Actions */}\n            <div className=\"flex gap-3 pt-4\">\n              <button\n                type=\"button\"\n                onClick={onClose}\n                className=\"flex-1 px-4 py-2 rounded-lg transition-colors\"\n                style={{\n                  border: '1px solid hsl(var(--border))',\n                  color: 'hsl(var(--foreground))',\n                }}\n              >\n                Cancel\n              </button>\n              <button\n                type=\"submit\"\n                disabled={isSubmitting || !formData.title.trim()}\n                className=\"flex-1 px-4 py-2 rounded-lg transition-colors disabled:opacity-50\"\n                style={{\n                  backgroundColor: 'hsl(var(--primary))',\n                  color: 'hsl(var(--primary-foreground))',\n                }}\n              >\n                {isSubmitting ? 'Saving...' : eventType ? 'Update' : 'Create'}\n              </button>\n            </div>\n          </form>\n        </LiquidGlass>\n      </motion.div>\n    </motion.div>\n  );\n}\n","'use client';\n\n/**\n * AvailabilityEditor - Edit weekly availability schedule\n */\n\nimport { useState, useCallback } from 'react';\nimport { Plus, Trash2, Clock } from 'lucide-react';\nimport { motion, AnimatePresence } from 'framer-motion';\nimport { LiquidGlass } from '@/components/ui/liquid-glass';\nimport type { Availability, DaySchedule, TimeSlot } from '@/lib/scheduling/types';\nimport { DAY_NAMES, generateTimeOptions } from '@/lib/scheduling/utils';\n\ninterface AvailabilityEditorProps {\n  availability: Availability | null;\n  onSave: (schedule: DaySchedule[]) => Promise<void>;\n  timezone: string;\n}\n\nconst TIME_OPTIONS = generateTimeOptions(0, 24, 30);\n\nexport function AvailabilityEditor({\n  availability,\n  onSave,\n  timezone,\n}: AvailabilityEditorProps) {\n  const [schedule, setSchedule] = useState<DaySchedule[]>(\n    availability?.schedule || [\n      { dayOfWeek: 0, isAvailable: false, slots: [] },\n      { dayOfWeek: 1, isAvailable: true, slots: [{ start: '09:00', end: '17:00' }] },\n      { dayOfWeek: 2, isAvailable: true, slots: [{ start: '09:00', end: '17:00' }] },\n      { dayOfWeek: 3, isAvailable: true, slots: [{ start: '09:00', end: '17:00' }] },\n      { dayOfWeek: 4, isAvailable: true, slots: [{ start: '09:00', end: '17:00' }] },\n      { dayOfWeek: 5, isAvailable: true, slots: [{ start: '09:00', end: '17:00' }] },\n      { dayOfWeek: 6, isAvailable: false, slots: [] },\n    ]\n  );\n  const [isSaving, setIsSaving] = useState(false);\n  const [hasChanges, setHasChanges] = useState(false);\n\n  const updateSchedule = useCallback((dayOfWeek: number, updates: Partial<DaySchedule>) => {\n    setSchedule((prev) =>\n      prev.map((day) =>\n        day.dayOfWeek === dayOfWeek ? { ...day, ...updates } : day\n      )\n    );\n    setHasChanges(true);\n  }, []);\n\n  const toggleDay = useCallback((dayOfWeek: number) => {\n    setSchedule((prev) =>\n      prev.map((day) => {\n        if (day.dayOfWeek !== dayOfWeek) return day;\n        return {\n          ...day,\n          isAvailable: !day.isAvailable,\n          slots: !day.isAvailable && day.slots.length === 0\n            ? [{ start: '09:00', end: '17:00' }]\n            : day.slots,\n        };\n      })\n    );\n    setHasChanges(true);\n  }, []);\n\n  const addSlot = useCallback((dayOfWeek: number) => {\n    setSchedule((prev) =>\n      prev.map((day) => {\n        if (day.dayOfWeek !== dayOfWeek) return day;\n        const lastSlot = day.slots[day.slots.length - 1];\n        const newStart = lastSlot ? lastSlot.end : '09:00';\n        const newStartMinutes = parseInt(newStart.split(':')[0]) * 60 + parseInt(newStart.split(':')[1]);\n        const newEndMinutes = Math.min(newStartMinutes + 60, 24 * 60);\n        const newEnd = `${String(Math.floor(newEndMinutes / 60)).padStart(2, '0')}:${String(newEndMinutes % 60).padStart(2, '0')}`;\n\n        return {\n          ...day,\n          slots: [...day.slots, { start: newStart, end: newEnd }],\n        };\n      })\n    );\n    setHasChanges(true);\n  }, []);\n\n  const updateSlot = useCallback((dayOfWeek: number, slotIndex: number, updates: Partial<TimeSlot>) => {\n    setSchedule((prev) =>\n      prev.map((day) => {\n        if (day.dayOfWeek !== dayOfWeek) return day;\n        return {\n          ...day,\n          slots: day.slots.map((slot, idx) =>\n            idx === slotIndex ? { ...slot, ...updates } : slot\n          ),\n        };\n      })\n    );\n    setHasChanges(true);\n  }, []);\n\n  const removeSlot = useCallback((dayOfWeek: number, slotIndex: number) => {\n    setSchedule((prev) =>\n      prev.map((day) => {\n        if (day.dayOfWeek !== dayOfWeek) return day;\n        return {\n          ...day,\n          slots: day.slots.filter((_, idx) => idx !== slotIndex),\n        };\n      })\n    );\n    setHasChanges(true);\n  }, []);\n\n  const handleSave = async () => {\n    setIsSaving(true);\n    try {\n      await onSave(schedule);\n      setHasChanges(false);\n    } catch (error) {\n      console.error('Failed to save availability:', error);\n    } finally {\n      setIsSaving(false);\n    }\n  };\n\n  return (\n    <LiquidGlass className=\"p-6 rounded-2xl\">\n      <div className=\"flex items-center justify-between mb-6\">\n        <div>\n          <h2 className=\"text-xl font-semibold\" style={{ color: 'hsl(var(--foreground))' }}>\n            Weekly Availability\n          </h2>\n          <p className=\"text-sm mt-1\" style={{ color: 'hsl(var(--muted-foreground))' }}>\n            Set your available hours for each day\n          </p>\n        </div>\n\n        <div className=\"flex items-center gap-2 text-sm\" style={{ color: 'hsl(var(--muted-foreground))' }}>\n          <Clock className=\"w-4 h-4\" />\n          {timezone}\n        </div>\n      </div>\n\n      <div className=\"space-y-4\">\n        {schedule.map((day) => (\n          <div\n            key={day.dayOfWeek}\n            className=\"flex items-start gap-4 py-3\"\n            style={{ borderBottom: '1px solid hsl(var(--border))' }}\n          >\n            {/* Day toggle */}\n            <div className=\"w-28 flex-shrink-0\">\n              <label className=\"flex items-center gap-2 cursor-pointer\">\n                <input\n                  type=\"checkbox\"\n                  checked={day.isAvailable}\n                  onChange={() => toggleDay(day.dayOfWeek)}\n                  className=\"w-4 h-4 rounded\"\n                />\n                <span\n                  className=\"font-medium\"\n                  style={{\n                    color: day.isAvailable\n                      ? 'hsl(var(--foreground))'\n                      : 'hsl(var(--muted-foreground))',\n                  }}\n                >\n                  {DAY_NAMES[day.dayOfWeek]}\n                </span>\n              </label>\n            </div>\n\n            {/* Time slots */}\n            <div className=\"flex-1\">\n              <AnimatePresence mode=\"sync\">\n                {day.isAvailable ? (\n                  <motion.div\n                    initial={{ opacity: 0, height: 0 }}\n                    animate={{ opacity: 1, height: 'auto' }}\n                    exit={{ opacity: 0, height: 0 }}\n                    className=\"space-y-2\"\n                  >\n                    {day.slots.map((slot, slotIndex) => (\n                      <motion.div\n                        key={slotIndex}\n                        initial={{ opacity: 0, x: -10 }}\n                        animate={{ opacity: 1, x: 0 }}\n                        exit={{ opacity: 0, x: -10 }}\n                        className=\"flex items-center gap-2\"\n                      >\n                        <select\n                          value={slot.start}\n                          onChange={(e) => updateSlot(day.dayOfWeek, slotIndex, { start: e.target.value })}\n                          className=\"px-3 py-1.5 rounded-lg text-sm outline-none\"\n                          style={{\n                            backgroundColor: 'hsl(var(--muted))',\n                            border: '1px solid hsl(var(--border))',\n                            color: 'hsl(var(--foreground))',\n                          }}\n                        >\n                          {TIME_OPTIONS.map((opt) => (\n                            <option key={opt.value} value={opt.value}>\n                              {opt.label}\n                            </option>\n                          ))}\n                        </select>\n\n                        <span style={{ color: 'hsl(var(--muted-foreground))' }}>to</span>\n\n                        <select\n                          value={slot.end}\n                          onChange={(e) => updateSlot(day.dayOfWeek, slotIndex, { end: e.target.value })}\n                          className=\"px-3 py-1.5 rounded-lg text-sm outline-none\"\n                          style={{\n                            backgroundColor: 'hsl(var(--muted))',\n                            border: '1px solid hsl(var(--border))',\n                            color: 'hsl(var(--foreground))',\n                          }}\n                        >\n                          {TIME_OPTIONS.map((opt) => (\n                            <option key={opt.value} value={opt.value}>\n                              {opt.label}\n                            </option>\n                          ))}\n                        </select>\n\n                        <button\n                          onClick={() => removeSlot(day.dayOfWeek, slotIndex)}\n                          className=\"p-1.5 text-red-500 hover:bg-red-500/10 rounded-lg transition-colors\"\n                        >\n                          <Trash2 className=\"w-4 h-4\" />\n                        </button>\n                      </motion.div>\n                    ))}\n\n                    <button\n                      onClick={() => addSlot(day.dayOfWeek)}\n                      className=\"flex items-center gap-1 px-3 py-1.5 text-sm rounded-lg hover:bg-black/5 dark:hover:bg-white/5 transition-colors\"\n                      style={{ color: 'hsl(var(--primary))' }}\n                    >\n                      <Plus className=\"w-4 h-4\" />\n                      Add time slot\n                    </button>\n                  </motion.div>\n                ) : (\n                  <motion.p\n                    initial={{ opacity: 0 }}\n                    animate={{ opacity: 1 }}\n                    exit={{ opacity: 0 }}\n                    className=\"text-sm py-1.5\"\n                    style={{ color: 'hsl(var(--muted-foreground))' }}\n                  >\n                    Unavailable\n                  </motion.p>\n                )}\n              </AnimatePresence>\n            </div>\n          </div>\n        ))}\n      </div>\n\n      {/* Save button */}\n      <div className=\"mt-6 flex justify-end\">\n        <button\n          onClick={handleSave}\n          disabled={isSaving || !hasChanges}\n          className=\"px-6 py-2 rounded-lg transition-colors disabled:opacity-50\"\n          style={{\n            backgroundColor: 'hsl(var(--primary))',\n            color: 'hsl(var(--primary-foreground))',\n          }}\n        >\n          {isSaving ? 'Saving...' : 'Save Changes'}\n        </button>\n      </div>\n    </LiquidGlass>\n  );\n}\n","'use client';\n\n/**\n * BookingCalendar - Calendar view for selecting a booking date\n */\n\nimport { useMemo } from 'react';\nimport { ChevronLeft, ChevronRight } from 'lucide-react';\nimport { motion } from 'framer-motion';\nimport { getCalendarDates, isSameDay, isToday, isPast, formatDateString } from '@/lib/scheduling/utils';\nimport { DAY_NAMES_SHORT } from '@/lib/scheduling/types';\n\ninterface BookingCalendarProps {\n  selectedDate: Date | null;\n  onSelectDate: (date: Date) => void;\n  currentMonth: Date;\n  onMonthChange: (date: Date) => void;\n  availableDates?: string[]; // Array of \"YYYY-MM-DD\" strings\n  maxAdvanceDays?: number;\n}\n\nexport function BookingCalendar({\n  selectedDate,\n  onSelectDate,\n  currentMonth,\n  onMonthChange,\n  availableDates,\n  maxAdvanceDays = 60,\n}: BookingCalendarProps) {\n  const dates = useMemo(\n    () => getCalendarDates(currentMonth.getFullYear(), currentMonth.getMonth()),\n    [currentMonth]\n  );\n\n  const maxDate = useMemo(() => {\n    const date = new Date();\n    date.setDate(date.getDate() + maxAdvanceDays);\n    return date;\n  }, [maxAdvanceDays]);\n\n  const goToPreviousMonth = () => {\n    const prev = new Date(currentMonth);\n    prev.setMonth(prev.getMonth() - 1);\n    onMonthChange(prev);\n  };\n\n  const goToNextMonth = () => {\n    const next = new Date(currentMonth);\n    next.setMonth(next.getMonth() + 1);\n    onMonthChange(next);\n  };\n\n  const isDateAvailable = (date: Date) => {\n    if (isPast(date)) return false;\n    if (date > maxDate) return false;\n    if (!availableDates) return true;\n    return availableDates.includes(formatDateString(date));\n  };\n\n  const monthLabel = currentMonth.toLocaleDateString('en-US', {\n    month: 'long',\n    year: 'numeric',\n  });\n\n  return (\n    <div>\n      {/* Header */}\n      <div className=\"flex items-center justify-between mb-4\">\n        <button\n          onClick={goToPreviousMonth}\n          className=\"p-2 rounded-lg hover:bg-black/5 dark:hover:bg-white/5 transition-colors\"\n        >\n          <ChevronLeft className=\"w-5 h-5\" />\n        </button>\n\n        <h3 className=\"font-semibold text-lg\" style={{ color: 'hsl(var(--foreground))' }}>\n          {monthLabel}\n        </h3>\n\n        <button\n          onClick={goToNextMonth}\n          className=\"p-2 rounded-lg hover:bg-black/5 dark:hover:bg-white/5 transition-colors\"\n        >\n          <ChevronRight className=\"w-5 h-5\" />\n        </button>\n      </div>\n\n      {/* Day headers */}\n      <div className=\"grid grid-cols-7 gap-1 mb-2\">\n        {DAY_NAMES_SHORT.map((day) => (\n          <div\n            key={day}\n            className=\"text-center text-sm font-medium py-2\"\n            style={{ color: 'hsl(var(--muted-foreground))' }}\n          >\n            {day}\n          </div>\n        ))}\n      </div>\n\n      {/* Calendar grid */}\n      <div className=\"grid grid-cols-7 gap-1\">\n        {dates.map((date, index) => {\n          const isCurrentMonth = date.getMonth() === currentMonth.getMonth();\n          const isSelected = selectedDate && isSameDay(date, selectedDate);\n          const isTodayDate = isToday(date);\n          const isAvailable = isDateAvailable(date);\n\n          return (\n            <motion.button\n              key={index}\n              onClick={() => isAvailable && onSelectDate(date)}\n              disabled={!isAvailable}\n              whileHover={isAvailable ? { scale: 1.1 } : undefined}\n              whileTap={isAvailable ? { scale: 0.95 } : undefined}\n              className={`\n                relative aspect-square flex items-center justify-center rounded-lg text-sm font-medium\n                transition-colors\n                ${!isCurrentMonth ? 'opacity-30' : ''}\n                ${!isAvailable ? 'opacity-30 cursor-not-allowed' : 'cursor-pointer'}\n              `}\n              style={{\n                backgroundColor: isSelected\n                  ? 'hsl(var(--primary))'\n                  : isTodayDate\n                    ? 'hsl(var(--muted))'\n                    : 'transparent',\n                color: isSelected\n                  ? 'hsl(var(--primary-foreground))'\n                  : 'hsl(var(--foreground))',\n              }}\n            >\n              {date.getDate()}\n              {isTodayDate && !isSelected && (\n                <span\n                  className=\"absolute bottom-1 left-1/2 -translate-x-1/2 w-1 h-1 rounded-full\"\n                  style={{ backgroundColor: 'hsl(var(--primary))' }}\n                />\n              )}\n            </motion.button>\n          );\n        })}\n      </div>\n    </div>\n  );\n}\n","'use client';\n\n/**\n * BookingForm - Form for guests to book a meeting\n */\n\nimport { useState } from 'react';\nimport { Calendar, Clock, Globe, User, Mail, MessageSquare } from 'lucide-react';\nimport { motion } from 'framer-motion';\nimport { LiquidGlass } from '@/components/ui/liquid-glass';\nimport type { EventType, AvailableSlot, Question, QuestionResponse } from '@/lib/scheduling/types';\nimport { formatDate, formatTime, formatDuration, getUserTimezone, isValidEmail } from '@/lib/scheduling/utils';\n\ninterface BookingFormProps {\n  eventType: EventType;\n  selectedDate: Date;\n  selectedSlot: AvailableSlot;\n  onSubmit: (data: BookingFormData) => Promise<void>;\n  onBack: () => void;\n}\n\ninterface BookingFormData {\n  guestName: string;\n  guestEmail: string;\n  guestTimezone: string;\n  notes?: string;\n  responses?: QuestionResponse[];\n}\n\nexport function BookingForm({\n  eventType,\n  selectedDate,\n  selectedSlot,\n  onSubmit,\n  onBack,\n}: BookingFormProps) {\n  const [isSubmitting, setIsSubmitting] = useState(false);\n  const [error, setError] = useState<string | null>(null);\n  const [formData, setFormData] = useState<BookingFormData>({\n    guestName: '',\n    guestEmail: '',\n    guestTimezone: getUserTimezone(),\n    notes: '',\n    responses: eventType.questions?.map((q) => ({\n      questionId: q.id,\n      questionLabel: q.label,\n      answer: '',\n    })) || [],\n  });\n\n  const handleSubmit = async (e: React.FormEvent) => {\n    e.preventDefault();\n    setError(null);\n\n    // Validation\n    if (!formData.guestName.trim()) {\n      setError('Please enter your name');\n      return;\n    }\n\n    if (!formData.guestEmail.trim() || !isValidEmail(formData.guestEmail)) {\n      setError('Please enter a valid email address');\n      return;\n    }\n\n    // Check required questions\n    const missingRequired = eventType.questions?.find((q) => {\n      if (!q.required) return false;\n      const response = formData.responses?.find((r) => r.questionId === q.id);\n      return !response?.answer.trim();\n    });\n\n    if (missingRequired) {\n      setError(`Please answer: ${missingRequired.label}`);\n      return;\n    }\n\n    setIsSubmitting(true);\n    try {\n      await onSubmit(formData);\n    } catch (err) {\n      setError(err instanceof Error ? err.message : 'Failed to book meeting');\n    } finally {\n      setIsSubmitting(false);\n    }\n  };\n\n  const updateResponse = (questionId: string, answer: string) => {\n    setFormData({\n      ...formData,\n      responses: formData.responses?.map((r) =>\n        r.questionId === questionId ? { ...r, answer } : r\n      ),\n    });\n  };\n\n  const locationLabels: Record<string, string> = {\n    google_meet: 'Google Meet video call',\n    zoom: 'Zoom video call',\n    phone: 'Phone call',\n    in_person: 'In person',\n    custom: 'Custom location',\n  };\n\n  return (\n    <div className=\"space-y-6\">\n      {/* Meeting summary */}\n      <LiquidGlass className=\"p-4 rounded-xl\">\n        <h3 className=\"font-semibold text-lg mb-3\" style={{ color: 'hsl(var(--foreground))' }}>\n          {eventType.title}\n        </h3>\n\n        <div className=\"space-y-2 text-sm\" style={{ color: 'hsl(var(--muted-foreground))' }}>\n          <div className=\"flex items-center gap-2\">\n            <Clock className=\"w-4 h-4\" />\n            {formatDuration(eventType.duration)}\n          </div>\n\n          <div className=\"flex items-center gap-2\">\n            <Calendar className=\"w-4 h-4\" />\n            {formatDate(selectedDate.getTime())}\n          </div>\n\n          <div className=\"flex items-center gap-2\">\n            <Clock className=\"w-4 h-4\" />\n            {formatTime(selectedSlot.timestamp, formData.guestTimezone)}\n          </div>\n\n          <div className=\"flex items-center gap-2\">\n            <Globe className=\"w-4 h-4\" />\n            {formData.guestTimezone}\n          </div>\n        </div>\n\n        <p className=\"mt-3 text-sm\" style={{ color: 'hsl(var(--muted-foreground))' }}>\n          {locationLabels[eventType.locationType]}\n          {eventType.locationValue && `: ${eventType.locationValue}`}\n        </p>\n      </LiquidGlass>\n\n      {/* Booking form */}\n      <form onSubmit={handleSubmit} className=\"space-y-4\">\n        {/* Name */}\n        <div>\n          <label className=\"flex items-center gap-2 text-sm font-medium mb-2\" style={{ color: 'hsl(var(--foreground))' }}>\n            <User className=\"w-4 h-4\" />\n            Your Name *\n          </label>\n          <input\n            type=\"text\"\n            value={formData.guestName}\n            onChange={(e) => setFormData({ ...formData, guestName: e.target.value })}\n            placeholder=\"John Doe\"\n            className=\"w-full px-4 py-2 rounded-lg outline-none transition-all\"\n            style={{\n              backgroundColor: 'hsl(var(--muted))',\n              border: '1px solid hsl(var(--border))',\n              color: 'hsl(var(--foreground))',\n            }}\n            required\n          />\n        </div>\n\n        {/* Email */}\n        <div>\n          <label className=\"flex items-center gap-2 text-sm font-medium mb-2\" style={{ color: 'hsl(var(--foreground))' }}>\n            <Mail className=\"w-4 h-4\" />\n            Email Address *\n          </label>\n          <input\n            type=\"email\"\n            value={formData.guestEmail}\n            onChange={(e) => setFormData({ ...formData, guestEmail: e.target.value })}\n            placeholder=\"john@example.com\"\n            className=\"w-full px-4 py-2 rounded-lg outline-none transition-all\"\n            style={{\n              backgroundColor: 'hsl(var(--muted))',\n              border: '1px solid hsl(var(--border))',\n              color: 'hsl(var(--foreground))',\n            }}\n            required\n          />\n        </div>\n\n        {/* Custom questions */}\n        {eventType.questions?.map((question) => (\n          <div key={question.id}>\n            <label className=\"text-sm font-medium mb-2 block\" style={{ color: 'hsl(var(--foreground))' }}>\n              {question.label} {question.required && '*'}\n            </label>\n\n            {question.type === 'text' && (\n              <input\n                type=\"text\"\n                value={formData.responses?.find((r) => r.questionId === question.id)?.answer || ''}\n                onChange={(e) => updateResponse(question.id, e.target.value)}\n                className=\"w-full px-4 py-2 rounded-lg outline-none transition-all\"\n                style={{\n                  backgroundColor: 'hsl(var(--muted))',\n                  border: '1px solid hsl(var(--border))',\n                  color: 'hsl(var(--foreground))',\n                }}\n                required={question.required}\n              />\n            )}\n\n            {question.type === 'textarea' && (\n              <textarea\n                value={formData.responses?.find((r) => r.questionId === question.id)?.answer || ''}\n                onChange={(e) => updateResponse(question.id, e.target.value)}\n                rows={3}\n                className=\"w-full px-4 py-2 rounded-lg outline-none transition-all resize-none\"\n                style={{\n                  backgroundColor: 'hsl(var(--muted))',\n                  border: '1px solid hsl(var(--border))',\n                  color: 'hsl(var(--foreground))',\n                }}\n                required={question.required}\n              />\n            )}\n\n            {question.type === 'select' && (\n              <select\n                value={formData.responses?.find((r) => r.questionId === question.id)?.answer || ''}\n                onChange={(e) => updateResponse(question.id, e.target.value)}\n                className=\"w-full px-4 py-2 rounded-lg outline-none\"\n                style={{\n                  backgroundColor: 'hsl(var(--muted))',\n                  border: '1px solid hsl(var(--border))',\n                  color: 'hsl(var(--foreground))',\n                }}\n                required={question.required}\n              >\n                <option value=\"\">Select an option</option>\n                {question.options?.map((opt) => (\n                  <option key={opt} value={opt}>\n                    {opt}\n                  </option>\n                ))}\n              </select>\n            )}\n          </div>\n        ))}\n\n        {/* Notes */}\n        <div>\n          <label className=\"flex items-center gap-2 text-sm font-medium mb-2\" style={{ color: 'hsl(var(--foreground))' }}>\n            <MessageSquare className=\"w-4 h-4\" />\n            Additional Notes\n          </label>\n          <textarea\n            value={formData.notes}\n            onChange={(e) => setFormData({ ...formData, notes: e.target.value })}\n            placeholder=\"Anything you'd like to share before the meeting...\"\n            rows={3}\n            className=\"w-full px-4 py-2 rounded-lg outline-none transition-all resize-none\"\n            style={{\n              backgroundColor: 'hsl(var(--muted))',\n              border: '1px solid hsl(var(--border))',\n              color: 'hsl(var(--foreground))',\n            }}\n          />\n        </div>\n\n        {/* Error message */}\n        {error && (\n          <motion.p\n            initial={{ opacity: 0, y: -10 }}\n            animate={{ opacity: 1, y: 0 }}\n            className=\"text-sm text-red-500\"\n          >\n            {error}\n          </motion.p>\n        )}\n\n        {/* Actions */}\n        <div className=\"flex gap-3 pt-2\">\n          <button\n            type=\"button\"\n            onClick={onBack}\n            className=\"flex-1 px-4 py-2.5 rounded-lg transition-colors\"\n            style={{\n              border: '1px solid hsl(var(--border))',\n              color: 'hsl(var(--foreground))',\n            }}\n          >\n            Back\n          </button>\n          <button\n            type=\"submit\"\n            disabled={isSubmitting}\n            className=\"flex-1 px-4 py-2.5 rounded-lg transition-colors disabled:opacity-50\"\n            style={{\n              backgroundColor: 'hsl(var(--primary))',\n              color: 'hsl(var(--primary-foreground))',\n            }}\n          >\n            {isSubmitting ? 'Booking...' : 'Confirm Booking'}\n          </button>\n        </div>\n      </form>\n    </div>\n  );\n}\n","'use client';\n\n/**\n * BookingConfirmation - Success screen after booking\n */\n\nimport { Check, Calendar, Clock, Globe, Video, ExternalLink } from 'lucide-react';\nimport { motion } from 'framer-motion';\nimport { LiquidGlass } from '@/components/ui/liquid-glass';\nimport type { Booking, EventType } from '@/lib/scheduling/types';\nimport { formatDate, formatTime, formatDuration } from '@/lib/scheduling/utils';\n\ninterface BookingConfirmationProps {\n  booking: Booking;\n  eventType: EventType;\n  onClose?: () => void;\n}\n\nexport function BookingConfirmation({\n  booking,\n  eventType,\n  onClose,\n}: BookingConfirmationProps) {\n  const locationLabels: Record<string, string> = {\n    google_meet: 'Google Meet',\n    zoom: 'Zoom',\n    phone: 'Phone Call',\n    in_person: 'In Person',\n    custom: 'Custom',\n  };\n\n  // Generate calendar links\n  const startDate = new Date(booking.startTime);\n  const endDate = new Date(booking.endTime);\n\n  const formatICSDate = (date: Date) =>\n    date.toISOString().replace(/[-:]/g, '').split('.')[0] + 'Z';\n\n  const googleCalendarUrl = new URL('https://calendar.google.com/calendar/render');\n  googleCalendarUrl.searchParams.set('action', 'TEMPLATE');\n  googleCalendarUrl.searchParams.set('text', booking.title);\n  googleCalendarUrl.searchParams.set(\n    'dates',\n    `${formatICSDate(startDate)}/${formatICSDate(endDate)}`\n  );\n  if (booking.location) {\n    googleCalendarUrl.searchParams.set('location', booking.location);\n  }\n\n  return (\n    <motion.div\n      initial={{ opacity: 0, scale: 0.95 }}\n      animate={{ opacity: 1, scale: 1 }}\n      className=\"max-w-md mx-auto\"\n    >\n      <LiquidGlass className=\"p-6 rounded-2xl text-center\">\n        {/* Success icon */}\n        <motion.div\n          initial={{ scale: 0 }}\n          animate={{ scale: 1 }}\n          transition={{ type: 'spring', stiffness: 300, damping: 20, delay: 0.1 }}\n          className=\"w-16 h-16 mx-auto mb-4 rounded-full flex items-center justify-center\"\n          style={{ backgroundColor: 'hsl(var(--primary))' }}\n        >\n          <Check className=\"w-8 h-8\" style={{ color: 'hsl(var(--primary-foreground))' }} />\n        </motion.div>\n\n        <h2 className=\"text-2xl font-bold mb-2\" style={{ color: 'hsl(var(--foreground))' }}>\n          Booking Confirmed!\n        </h2>\n\n        <p className=\"text-sm mb-6\" style={{ color: 'hsl(var(--muted-foreground))' }}>\n          A confirmation email has been sent to {booking.guestEmail}\n        </p>\n\n        {/* Booking details */}\n        <div\n          className=\"text-left p-4 rounded-xl mb-6\"\n          style={{ backgroundColor: 'hsl(var(--muted))' }}\n        >\n          <h3\n            className=\"font-semibold mb-3\"\n            style={{ color: 'hsl(var(--foreground))' }}\n          >\n            {eventType.title}\n          </h3>\n\n          <div className=\"space-y-2 text-sm\" style={{ color: 'hsl(var(--muted-foreground))' }}>\n            <div className=\"flex items-center gap-2\">\n              <Calendar className=\"w-4 h-4\" />\n              {formatDate(booking.startTime)}\n            </div>\n\n            <div className=\"flex items-center gap-2\">\n              <Clock className=\"w-4 h-4\" />\n              {formatTime(booking.startTime, booking.guestTimezone)} -{' '}\n              {formatTime(booking.endTime, booking.guestTimezone)}\n            </div>\n\n            <div className=\"flex items-center gap-2\">\n              <Globe className=\"w-4 h-4\" />\n              {booking.guestTimezone}\n            </div>\n\n            {booking.location && (\n              <div className=\"flex items-center gap-2\">\n                <Video className=\"w-4 h-4\" />\n                <a\n                  href={booking.location}\n                  target=\"_blank\"\n                  rel=\"noopener noreferrer\"\n                  className=\"underline hover:no-underline\"\n                  style={{ color: 'hsl(var(--primary))' }}\n                >\n                  Join Meeting\n                </a>\n              </div>\n            )}\n\n            <div className=\"flex items-center gap-2\">\n              <Clock className=\"w-4 h-4\" />\n              {formatDuration(eventType.duration)}\n            </div>\n          </div>\n        </div>\n\n        {/* Calendar links */}\n        <div className=\"flex flex-col gap-2\">\n          <a\n            href={googleCalendarUrl.toString()}\n            target=\"_blank\"\n            rel=\"noopener noreferrer\"\n            className=\"flex items-center justify-center gap-2 px-4 py-2.5 rounded-lg transition-colors\"\n            style={{\n              backgroundColor: 'hsl(var(--primary))',\n              color: 'hsl(var(--primary-foreground))',\n            }}\n          >\n            <Calendar className=\"w-4 h-4\" />\n            Add to Google Calendar\n            <ExternalLink className=\"w-3 h-3\" />\n          </a>\n\n          {onClose && (\n            <button\n              onClick={onClose}\n              className=\"px-4 py-2.5 rounded-lg transition-colors\"\n              style={{\n                border: '1px solid hsl(var(--border))',\n                color: 'hsl(var(--foreground))',\n              }}\n            >\n              Done\n            </button>\n          )}\n        </div>\n      </LiquidGlass>\n    </motion.div>\n  );\n}\n","'use client';\n\n/**\n * TimeSlotPicker - Select available time slots for a date\n */\n\nimport { motion } from 'framer-motion';\nimport type { AvailableSlot } from '@/lib/scheduling/types';\nimport { formatTime } from '@/lib/scheduling/utils';\n\ninterface TimeSlotPickerProps {\n  slots: AvailableSlot[];\n  selectedSlot: AvailableSlot | null;\n  onSelectSlot: (slot: AvailableSlot) => void;\n  timezone: string;\n  isLoading?: boolean;\n}\n\nexport function TimeSlotPicker({\n  slots,\n  selectedSlot,\n  onSelectSlot,\n  timezone,\n  isLoading,\n}: TimeSlotPickerProps) {\n  if (isLoading) {\n    return (\n      <div className=\"space-y-2\">\n        {[1, 2, 3, 4, 5].map((i) => (\n          <div\n            key={i}\n            className=\"h-12 rounded-lg animate-pulse\"\n            style={{ backgroundColor: 'hsl(var(--muted))' }}\n          />\n        ))}\n      </div>\n    );\n  }\n\n  if (slots.length === 0) {\n    return (\n      <div\n        className=\"text-center py-8 rounded-lg\"\n        style={{\n          backgroundColor: 'hsl(var(--muted))',\n          color: 'hsl(var(--muted-foreground))',\n        }}\n      >\n        <p className=\"font-medium\">No available times</p>\n        <p className=\"text-sm mt-1\">Please select another date</p>\n      </div>\n    );\n  }\n\n  // Group slots by morning, afternoon, evening\n  const morning = slots.filter((s) => {\n    const hour = new Date(s.timestamp).getHours();\n    return hour >= 0 && hour < 12;\n  });\n\n  const afternoon = slots.filter((s) => {\n    const hour = new Date(s.timestamp).getHours();\n    return hour >= 12 && hour < 17;\n  });\n\n  const evening = slots.filter((s) => {\n    const hour = new Date(s.timestamp).getHours();\n    return hour >= 17 && hour < 24;\n  });\n\n  const renderSlots = (slotsToRender: AvailableSlot[], label: string) => {\n    if (slotsToRender.length === 0) return null;\n\n    return (\n      <div className=\"mb-4\">\n        <p\n          className=\"text-xs uppercase font-medium mb-2\"\n          style={{ color: 'hsl(var(--muted-foreground))' }}\n        >\n          {label}\n        </p>\n        <div className=\"grid grid-cols-2 gap-2\">\n          {slotsToRender.map((slot) => {\n            const isSelected = selectedSlot?.timestamp === slot.timestamp;\n\n            return (\n              <motion.button\n                key={slot.timestamp}\n                onClick={() => onSelectSlot(slot)}\n                whileHover={{ scale: 1.02 }}\n                whileTap={{ scale: 0.98 }}\n                className=\"px-4 py-3 rounded-lg text-sm font-medium transition-colors\"\n                style={{\n                  backgroundColor: isSelected\n                    ? 'hsl(var(--primary))'\n                    : 'transparent',\n                  color: isSelected\n                    ? 'hsl(var(--primary-foreground))'\n                    : 'hsl(var(--foreground))',\n                  border: `1px solid ${isSelected ? 'hsl(var(--primary))' : 'hsl(var(--border))'}`,\n                }}\n              >\n                {formatTime(slot.timestamp, timezone)}\n              </motion.button>\n            );\n          })}\n        </div>\n      </div>\n    );\n  };\n\n  return (\n    <div>\n      {renderSlots(morning, 'Morning')}\n      {renderSlots(afternoon, 'Afternoon')}\n      {renderSlots(evening, 'Evening')}\n    </div>\n  );\n}\n","'use client';\n\n/**\n * UpcomingBookings - List of upcoming bookings\n */\n\nimport { Calendar, Clock, User, Video, MoreVertical, X, Check, AlertCircle } from 'lucide-react';\nimport { motion, AnimatePresence } from 'framer-motion';\nimport { useState } from 'react';\nimport { LiquidGlass } from '@/components/ui/liquid-glass';\nimport type { Booking } from '@/lib/scheduling/types';\nimport { formatDate, formatTime, formatDuration, getRelativeTime } from '@/lib/scheduling/utils';\n\ninterface UpcomingBookingsProps {\n  bookings: Booking[];\n  onCancel: (id: string, reason?: string) => Promise<void>;\n  onMarkComplete: (id: string) => Promise<void>;\n  onMarkNoShow: (id: string) => Promise<void>;\n}\n\nexport function UpcomingBookings({\n  bookings,\n  onCancel,\n  onMarkComplete,\n  onMarkNoShow,\n}: UpcomingBookingsProps) {\n  const [menuOpen, setMenuOpen] = useState<string | null>(null);\n  const [cancellingId, setCancellingId] = useState<string | null>(null);\n\n  const handleCancel = async (id: string) => {\n    setCancellingId(id);\n    try {\n      await onCancel(id, 'Cancelled by host');\n    } finally {\n      setCancellingId(null);\n      setMenuOpen(null);\n    }\n  };\n\n  if (bookings.length === 0) {\n    return (\n      <LiquidGlass className=\"p-8 rounded-2xl text-center\">\n        <Calendar\n          className=\"w-12 h-12 mx-auto mb-4 opacity-50\"\n          style={{ color: 'hsl(var(--muted-foreground))' }}\n        />\n        <h3 className=\"font-semibold mb-2\" style={{ color: 'hsl(var(--foreground))' }}>\n          No upcoming bookings\n        </h3>\n        <p className=\"text-sm\" style={{ color: 'hsl(var(--muted-foreground))' }}>\n          Share your booking link to start getting meetings\n        </p>\n      </LiquidGlass>\n    );\n  }\n\n  const locationIcons: Record<string, React.ReactNode> = {\n    google_meet: <Video className=\"w-4 h-4\" />,\n    zoom: <Video className=\"w-4 h-4\" />,\n  };\n\n  const statusColors: Record<string, string> = {\n    pending: 'bg-yellow-500/20 text-yellow-600 dark:text-yellow-400',\n    confirmed: 'bg-green-500/20 text-green-600 dark:text-green-400',\n    cancelled: 'bg-red-500/20 text-red-600 dark:text-red-400',\n    completed: 'bg-blue-500/20 text-blue-600 dark:text-blue-400',\n    no_show: 'bg-gray-500/20 text-gray-600 dark:text-gray-400',\n  };\n\n  return (\n    <div className=\"space-y-3\">\n      <AnimatePresence mode=\"popLayout\">\n        {bookings.map((booking) => (\n          <motion.div\n            key={booking._id}\n            initial={{ opacity: 0, y: 20 }}\n            animate={{ opacity: 1, y: 0 }}\n            exit={{ opacity: 0, x: -100 }}\n            layout\n          >\n            <LiquidGlass className=\"p-4 rounded-xl\">\n              <div className=\"flex items-start gap-4\">\n                {/* Time indicator */}\n                <div className=\"text-center min-w-[60px]\">\n                  <div className=\"text-2xl font-bold\" style={{ color: 'hsl(var(--foreground))' }}>\n                    {new Date(booking.startTime).getDate()}\n                  </div>\n                  <div className=\"text-xs uppercase\" style={{ color: 'hsl(var(--muted-foreground))' }}>\n                    {new Date(booking.startTime).toLocaleDateString('en-US', { month: 'short' })}\n                  </div>\n                </div>\n\n                {/* Details */}\n                <div className=\"flex-1 min-w-0\">\n                  <div className=\"flex items-start justify-between\">\n                    <div>\n                      <h4 className=\"font-semibold\" style={{ color: 'hsl(var(--foreground))' }}>\n                        {booking.title}\n                      </h4>\n                      <div className=\"flex items-center gap-2 mt-1 text-sm\" style={{ color: 'hsl(var(--muted-foreground))' }}>\n                        <User className=\"w-3 h-3\" />\n                        {booking.guestName}\n                      </div>\n                    </div>\n\n                    {/* Status & Menu */}\n                    <div className=\"flex items-center gap-2\">\n                      <span className={`px-2 py-0.5 rounded-full text-xs font-medium ${statusColors[booking.status]}`}>\n                        {booking.status}\n                      </span>\n\n                      <div className=\"relative\">\n                        <button\n                          onClick={() => setMenuOpen(menuOpen === booking._id ? null : booking._id)}\n                          className=\"p-1.5 rounded-lg hover:bg-black/5 dark:hover:bg-white/5 transition-colors\"\n                        >\n                          <MoreVertical className=\"w-4 h-4\" style={{ color: 'hsl(var(--muted-foreground))' }} />\n                        </button>\n\n                        {menuOpen === booking._id && (\n                          <>\n                            <div\n                              className=\"fixed inset-0 z-10\"\n                              onClick={() => setMenuOpen(null)}\n                            />\n                            <motion.div\n                              initial={{ opacity: 0, scale: 0.95 }}\n                              animate={{ opacity: 1, scale: 1 }}\n                              className=\"absolute right-0 top-full mt-1 z-20 min-w-[160px] rounded-lg shadow-lg overflow-hidden\"\n                              style={{ backgroundColor: 'hsl(var(--popover))', border: '1px solid hsl(var(--border))' }}\n                            >\n                              {booking.status === 'confirmed' && (\n                                <>\n                                  <button\n                                    onClick={() => {\n                                      onMarkComplete(booking._id);\n                                      setMenuOpen(null);\n                                    }}\n                                    className=\"w-full px-4 py-2 text-left text-sm flex items-center gap-2 hover:bg-black/5 dark:hover:bg-white/5\"\n                                  >\n                                    <Check className=\"w-4 h-4 text-green-500\" />\n                                    Mark Complete\n                                  </button>\n                                  <button\n                                    onClick={() => {\n                                      onMarkNoShow(booking._id);\n                                      setMenuOpen(null);\n                                    }}\n                                    className=\"w-full px-4 py-2 text-left text-sm flex items-center gap-2 hover:bg-black/5 dark:hover:bg-white/5\"\n                                  >\n                                    <AlertCircle className=\"w-4 h-4 text-yellow-500\" />\n                                    No Show\n                                  </button>\n                                </>\n                              )}\n                              <button\n                                onClick={() => handleCancel(booking._id)}\n                                disabled={cancellingId === booking._id}\n                                className=\"w-full px-4 py-2 text-left text-sm flex items-center gap-2 text-red-500 hover:bg-red-500/10\"\n                              >\n                                <X className=\"w-4 h-4\" />\n                                {cancellingId === booking._id ? 'Cancelling...' : 'Cancel'}\n                              </button>\n                            </motion.div>\n                          </>\n                        )}\n                      </div>\n                    </div>\n                  </div>\n\n                  {/* Time & Location */}\n                  <div className=\"flex flex-wrap items-center gap-3 mt-2 text-sm\" style={{ color: 'hsl(var(--muted-foreground))' }}>\n                    <span className=\"flex items-center gap-1\">\n                      <Clock className=\"w-3 h-3\" />\n                      {formatTime(booking.startTime)} - {formatTime(booking.endTime)}\n                    </span>\n\n                    <span className=\"px-2 py-0.5 rounded-full text-xs\" style={{ backgroundColor: 'hsl(var(--muted))' }}>\n                      {getRelativeTime(booking.startTime)}\n                    </span>\n\n                    {booking.location && (\n                      <a\n                        href={booking.location}\n                        target=\"_blank\"\n                        rel=\"noopener noreferrer\"\n                        className=\"flex items-center gap-1 hover:underline\"\n                        style={{ color: 'hsl(var(--primary))' }}\n                      >\n                        {locationIcons[booking.locationType] || <Video className=\"w-3 h-3\" />}\n                        Join\n                      </a>\n                    )}\n                  </div>\n\n                  {/* Notes */}\n                  {booking.notes && (\n                    <p\n                      className=\"mt-2 text-sm italic line-clamp-2\"\n                      style={{ color: 'hsl(var(--muted-foreground))' }}\n                    >\n                      \"{booking.notes}\"\n                    </p>\n                  )}\n                </div>\n              </div>\n            </LiquidGlass>\n          </motion.div>\n        ))}\n      </AnimatePresence>\n    </div>\n  );\n}\n","'use client';\n\n/**\n * GoogleCalendarConnect - Connect/disconnect Google Calendar integration\n */\n\nimport { useState } from 'react';\nimport { Calendar, Check, ExternalLink, Loader2, Unlink } from 'lucide-react';\nimport { motion } from 'framer-motion';\nimport { LiquidGlass } from '@/components/ui/liquid-glass';\nimport type { CalendarIntegration } from '@/lib/scheduling/types';\n\ninterface GoogleCalendarConnectProps {\n  integration: CalendarIntegration | null;\n  onConnect: () => Promise<void>;\n  onDisconnect: () => Promise<void>;\n  isConnecting?: boolean;\n}\n\nexport function GoogleCalendarConnect({\n  integration,\n  onConnect,\n  onDisconnect,\n  isConnecting,\n}: GoogleCalendarConnectProps) {\n  const [isDisconnecting, setIsDisconnecting] = useState(false);\n\n  const handleDisconnect = async () => {\n    setIsDisconnecting(true);\n    try {\n      await onDisconnect();\n    } finally {\n      setIsDisconnecting(false);\n    }\n  };\n\n  return (\n    <LiquidGlass className=\"p-6 rounded-2xl\">\n      <div className=\"flex items-start gap-4\">\n        {/* Google Calendar icon */}\n        <div\n          className=\"w-12 h-12 rounded-xl flex items-center justify-center flex-shrink-0\"\n          style={{\n            backgroundColor: integration ? 'hsl(142 76% 36%)' : 'hsl(var(--muted))',\n          }}\n        >\n          {integration ? (\n            <Check className=\"w-6 h-6 text-white\" />\n          ) : (\n            <Calendar className=\"w-6 h-6\" style={{ color: 'hsl(var(--muted-foreground))' }} />\n          )}\n        </div>\n\n        {/* Content */}\n        <div className=\"flex-1 min-w-0\">\n          <h3 className=\"font-semibold\" style={{ color: 'hsl(var(--foreground))' }}>\n            Google Calendar\n          </h3>\n\n          {integration ? (\n            <>\n              <p className=\"text-sm mt-1\" style={{ color: 'hsl(var(--muted-foreground))' }}>\n                Connected as {integration.calendarEmail}\n              </p>\n              <div className=\"flex items-center gap-2 mt-3\">\n                <span\n                  className=\"flex items-center gap-1 px-2 py-1 rounded-full text-xs font-medium\"\n                  style={{\n                    backgroundColor: integration.syncEnabled\n                      ? 'hsl(142 76% 36% / 0.2)'\n                      : 'hsl(var(--muted))',\n                    color: integration.syncEnabled\n                      ? 'hsl(142 76% 36%)'\n                      : 'hsl(var(--muted-foreground))',\n                  }}\n                >\n                  {integration.syncEnabled ? 'Sync enabled' : 'Sync disabled'}\n                </span>\n              </div>\n            </>\n          ) : (\n            <p className=\"text-sm mt-1\" style={{ color: 'hsl(var(--muted-foreground))' }}>\n              Connect your Google Calendar to sync bookings and check availability\n            </p>\n          )}\n        </div>\n\n        {/* Action button */}\n        {integration ? (\n          <button\n            onClick={handleDisconnect}\n            disabled={isDisconnecting}\n            className=\"flex items-center gap-2 px-4 py-2 rounded-lg text-sm transition-colors text-red-500 hover:bg-red-500/10\"\n            style={{ border: '1px solid hsl(var(--border))' }}\n          >\n            {isDisconnecting ? (\n              <Loader2 className=\"w-4 h-4 animate-spin\" />\n            ) : (\n              <Unlink className=\"w-4 h-4\" />\n            )}\n            Disconnect\n          </button>\n        ) : (\n          <button\n            onClick={onConnect}\n            disabled={isConnecting}\n            className=\"flex items-center gap-2 px-4 py-2 rounded-lg text-sm transition-colors\"\n            style={{\n              backgroundColor: 'hsl(var(--primary))',\n              color: 'hsl(var(--primary-foreground))',\n            }}\n          >\n            {isConnecting ? (\n              <Loader2 className=\"w-4 h-4 animate-spin\" />\n            ) : (\n              <ExternalLink className=\"w-4 h-4\" />\n            )}\n            Connect\n          </button>\n        )}\n      </div>\n\n      {/* Features list */}\n      {!integration && (\n        <motion.div\n          initial={{ opacity: 0, height: 0 }}\n          animate={{ opacity: 1, height: 'auto' }}\n          className=\"mt-4 pt-4\"\n          style={{ borderTop: '1px solid hsl(var(--border))' }}\n        >\n          <p\n            className=\"text-xs uppercase font-medium mb-2\"\n            style={{ color: 'hsl(var(--muted-foreground))' }}\n          >\n            Features\n          </p>\n          <ul className=\"space-y-1.5 text-sm\" style={{ color: 'hsl(var(--muted-foreground))' }}>\n            <li className=\"flex items-center gap-2\">\n              <Check className=\"w-3 h-3 text-green-500\" />\n              Auto-create Google Meet links for meetings\n            </li>\n            <li className=\"flex items-center gap-2\">\n              <Check className=\"w-3 h-3 text-green-500\" />\n              Sync bookings to your calendar\n            </li>\n            <li className=\"flex items-center gap-2\">\n              <Check className=\"w-3 h-3 text-green-500\" />\n              Block times from existing events\n            </li>\n            <li className=\"flex items-center gap-2\">\n              <Check className=\"w-3 h-3 text-green-500\" />\n              Send calendar invites to guests\n            </li>\n          </ul>\n        </motion.div>\n      )}\n    </LiquidGlass>\n  );\n}\n","'use client';\n\n/**\n * Conversational Booking Experience\n *\n * A beautiful, AI-native booking flow that feels like chatting with James.\n * Inspired by onboarding flows with smooth transitions and binary choices.\n */\n\nimport { useState, useEffect, useCallback, useMemo } from 'react';\nimport { motion, AnimatePresence } from 'framer-motion';\nimport { Check, ArrowRight, Calendar, Clock, ChevronLeft, ChevronRight, Sparkles } from 'lucide-react';\nimport { TextEffect, FadeIn, FadeInUp } from '@/components/motion';\nimport { springs } from '@/components/motion/config';\nimport type { EventType, AvailableSlot } from '@/lib/scheduling/types';\nimport { cn } from '@/lib/utils';\n\n// ============================================================================\n// Types\n// ============================================================================\n\ntype BookingStep =\n  | 'welcome'\n  | 'duration'\n  | 'date'\n  | 'time'\n  | 'name'\n  | 'email'\n  | 'topic'\n  | 'confirm'\n  | 'success';\n\ninterface BookingData {\n  duration: number;\n  date: Date | null;\n  time: AvailableSlot | null;\n  name: string;\n  email: string;\n  topic: string;\n}\n\ninterface ConversationalBookingProps {\n  eventTypes: EventType[];\n  availableSlots?: AvailableSlot[];\n  onDateSelect: (date: Date) => void;\n  onSubmit: (data: {\n    eventTypeId: string;\n    guestName: string;\n    guestEmail: string;\n    guestTimezone: string;\n    startTime: number;\n    notes?: string;\n  }) => Promise<void>;\n  isLoadingSlots?: boolean;\n  hostName?: string;\n  onSwitchToClassic?: () => void;\n}\n\n// ============================================================================\n// Animation Variants\n// ============================================================================\n\nconst stepVariants = {\n  enter: { opacity: 0, y: 30, filter: 'blur(8px)' },\n  center: { opacity: 1, y: 0, filter: 'blur(0px)' },\n  exit: { opacity: 0, y: -30, filter: 'blur(8px)' },\n};\n\nconst buttonVariants = {\n  initial: { opacity: 0, scale: 0.9 },\n  animate: { opacity: 1, scale: 1 },\n  hover: { scale: 1.02 },\n  tap: { scale: 0.98 },\n};\n\nconst pulseVariants = {\n  animate: {\n    scale: [1, 1.05, 1],\n    opacity: [0.5, 0.8, 0.5],\n    transition: { duration: 2, repeat: Infinity, ease: 'easeInOut' as const },\n  },\n};\n\n// ============================================================================\n// Utility Functions\n// ============================================================================\n\nconst generateCalendarDays = (month: Date) => {\n  const year = month.getFullYear();\n  const monthIndex = month.getMonth();\n  const firstDay = new Date(year, monthIndex, 1);\n  const lastDay = new Date(year, monthIndex + 1, 0);\n  const startPadding = firstDay.getDay();\n\n  const days: (Date | null)[] = [];\n\n  // Add padding for days before the first of the month\n  for (let i = 0; i < startPadding; i++) {\n    days.push(null);\n  }\n\n  // Add all days in the month\n  for (let day = 1; day <= lastDay.getDate(); day++) {\n    days.push(new Date(year, monthIndex, day));\n  }\n\n  return days;\n};\n\nconst formatTime = (timestamp: number) => {\n  const date = new Date(timestamp);\n  return date.toLocaleTimeString('en-US', {\n    hour: 'numeric',\n    minute: '2-digit',\n    hour12: true\n  });\n};\n\nconst formatDateFull = (date: Date) => {\n  return date.toLocaleDateString('en-US', {\n    weekday: 'long',\n    month: 'long',\n    day: 'numeric',\n  });\n};\n\nconst isToday = (date: Date) => {\n  const today = new Date();\n  return date.toDateString() === today.toDateString();\n};\n\nconst isPastDate = (date: Date) => {\n  const today = new Date();\n  today.setHours(0, 0, 0, 0);\n  return date < today;\n};\n\n// ============================================================================\n// Sub-Components\n// ============================================================================\n\ninterface ChoiceButtonProps {\n  children: React.ReactNode;\n  onClick: () => void;\n  selected?: boolean;\n  delay?: number;\n  icon?: React.ReactNode;\n  subtitle?: string;\n}\n\nfunction ChoiceButton({ children, onClick, selected, delay = 0, icon, subtitle }: ChoiceButtonProps) {\n  return (\n    <motion.button\n      variants={buttonVariants}\n      initial=\"initial\"\n      animate=\"animate\"\n      whileHover=\"hover\"\n      whileTap=\"tap\"\n      transition={{ ...springs.snappy, delay }}\n      onClick={onClick}\n      className={cn(\n        'relative px-6 py-4 rounded-2xl font-medium transition-colors',\n        'border-2 text-left w-full',\n        selected\n          ? 'border-primary bg-primary/10 text-primary'\n          : 'border-border/50 hover:border-primary/50 text-foreground hover:bg-primary/5'\n      )}\n    >\n      <div className=\"flex items-center gap-3\">\n        {icon && <span className=\"text-2xl\">{icon}</span>}\n        <div className=\"flex-1\">\n          <span className=\"text-lg\">{children}</span>\n          {subtitle && (\n            <p className=\"text-sm text-muted-foreground mt-0.5\">{subtitle}</p>\n          )}\n        </div>\n        {selected && (\n          <motion.div\n            initial={{ scale: 0 }}\n            animate={{ scale: 1 }}\n            transition={springs.bouncy}\n          >\n            <Check className=\"w-5 h-5 text-primary\" />\n          </motion.div>\n        )}\n      </div>\n    </motion.button>\n  );\n}\n\ninterface ContinueButtonProps {\n  onClick: () => void;\n  disabled?: boolean;\n  children?: React.ReactNode;\n}\n\nfunction ContinueButton({ onClick, disabled, children = 'Continue' }: ContinueButtonProps) {\n  return (\n    <motion.button\n      variants={buttonVariants}\n      initial=\"initial\"\n      animate=\"animate\"\n      whileHover={disabled ? undefined : \"hover\"}\n      whileTap={disabled ? undefined : \"tap\"}\n      transition={{ ...springs.snappy, delay: 0.3 }}\n      onClick={onClick}\n      disabled={disabled}\n      className={cn(\n        'flex items-center justify-center gap-2 px-8 py-4 rounded-full font-semibold text-lg',\n        'transition-all duration-200',\n        disabled\n          ? 'bg-muted text-muted-foreground cursor-not-allowed'\n          : 'bg-primary text-primary-foreground shadow-lg shadow-primary/25 hover:shadow-xl hover:shadow-primary/30'\n      )}\n    >\n      {children}\n      <ArrowRight className=\"w-5 h-5\" />\n    </motion.button>\n  );\n}\n\ninterface QuestionTextProps {\n  children: string;\n  emoji?: string;\n}\n\nfunction QuestionText({ children, emoji }: QuestionTextProps) {\n  return (\n    <div className=\"text-center mb-8\">\n      {emoji && (\n        <motion.div\n          initial={{ scale: 0, rotate: -20 }}\n          animate={{ scale: 1, rotate: 0 }}\n          transition={{ ...springs.bouncy, delay: 0.1 }}\n          className=\"text-6xl mb-4\"\n        >\n          {emoji}\n        </motion.div>\n      )}\n      <TextEffect\n        per=\"word\"\n        preset=\"blur\"\n        as=\"h2\"\n        className=\"text-2xl md:text-3xl font-bold text-foreground\"\n      >\n        {children}\n      </TextEffect>\n    </div>\n  );\n}\n\n// ============================================================================\n// Step Components\n// ============================================================================\n\ninterface StepProps {\n  onNext: () => void;\n  data: BookingData;\n  setData: React.Dispatch<React.SetStateAction<BookingData>>;\n}\n\nfunction WelcomeStep({ onNext, hostName = 'James' }: StepProps & { hostName?: string }) {\n  return (\n    <div className=\"flex flex-col items-center text-center\">\n      <motion.div\n        initial={{ scale: 0 }}\n        animate={{ scale: 1 }}\n        transition={{ ...springs.bouncy, delay: 0.2 }}\n        className=\"relative mb-6\"\n      >\n        {/* Pulsing ring */}\n        <motion.div\n          variants={pulseVariants}\n          animate=\"animate\"\n          className=\"absolute inset-0 rounded-full bg-primary/20 scale-150\"\n        />\n        <div className=\"relative w-24 h-24 rounded-full bg-gradient-to-br from-primary/20 to-primary/5 flex items-center justify-center text-5xl\">\n          \n        </div>\n      </motion.div>\n\n      <TextEffect\n        per=\"word\"\n        preset=\"blur\"\n        as=\"h1\"\n        className=\"text-3xl md:text-4xl font-bold text-foreground mb-3\"\n      >\n        {`Hi! I'm ${hostName}.`}\n      </TextEffect>\n\n      <TextEffect\n        per=\"word\"\n        preset=\"fade-in-blur\"\n        delay={0.3}\n        className=\"text-lg text-muted-foreground mb-8\"\n      >\n        Ready to schedule a chat?\n      </TextEffect>\n\n      <FadeInUp delay={0.5}>\n        <ContinueButton onClick={onNext}>\n          {\"Let's do it\"}\n        </ContinueButton>\n      </FadeInUp>\n    </div>\n  );\n}\n\nfunction DurationStep({ onNext, data, setData, eventTypes }: StepProps & { eventTypes: EventType[] }) {\n  const durations = useMemo(() => {\n    // Get unique durations from event types\n    const uniqueDurations = [...new Set(eventTypes.map(et => et.duration))].sort((a, b) => a - b);\n    return uniqueDurations.length > 0 ? uniqueDurations : [15, 30];\n  }, [eventTypes]);\n\n  const durationLabels: Record<number, { label: string; subtitle: string; icon: string }> = {\n    15: { label: '15 minutes', subtitle: 'Quick sync', icon: '' },\n    30: { label: '30 minutes', subtitle: 'Full conversation', icon: '' },\n    45: { label: '45 minutes', subtitle: 'Deep dive', icon: '' },\n    60: { label: '1 hour', subtitle: 'Extended session', icon: '' },\n  };\n\n  const handleSelect = (duration: number) => {\n    setData(prev => ({ ...prev, duration }));\n  };\n\n  return (\n    <div className=\"flex flex-col items-center\">\n      <QuestionText emoji=\"\">How much time would you like?</QuestionText>\n\n      <div className=\"w-full max-w-md space-y-3 mb-8\">\n        {durations.map((duration, index) => {\n          const config = durationLabels[duration] || {\n            label: `${duration} minutes`,\n            subtitle: 'Meeting',\n            icon: ''\n          };\n          return (\n            <ChoiceButton\n              key={duration}\n              onClick={() => handleSelect(duration)}\n              selected={data.duration === duration}\n              delay={index * 0.1}\n              icon={config.icon}\n              subtitle={config.subtitle}\n            >\n              {config.label}\n            </ChoiceButton>\n          );\n        })}\n      </div>\n\n      <ContinueButton onClick={onNext} disabled={!data.duration} />\n    </div>\n  );\n}\n\nfunction DateStep({ onNext, data, setData, onDateSelect }: StepProps & { onDateSelect: (date: Date) => void }) {\n  const [currentMonth, setCurrentMonth] = useState(new Date());\n  const days = generateCalendarDays(currentMonth);\n  const weekDays = ['Sun', 'Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat'];\n\n  const handleDateSelect = (date: Date) => {\n    setData(prev => ({ ...prev, date, time: null }));\n    onDateSelect(date);\n  };\n\n  const prevMonth = () => {\n    setCurrentMonth(new Date(currentMonth.getFullYear(), currentMonth.getMonth() - 1));\n  };\n\n  const nextMonth = () => {\n    setCurrentMonth(new Date(currentMonth.getFullYear(), currentMonth.getMonth() + 1));\n  };\n\n  return (\n    <div className=\"flex flex-col items-center\">\n      <QuestionText emoji=\"\">When works for you?</QuestionText>\n\n      <motion.div\n        initial={{ opacity: 0, y: 20 }}\n        animate={{ opacity: 1, y: 0 }}\n        transition={springs.smooth}\n        className=\"w-full max-w-sm bg-card/50 rounded-2xl p-4 border border-border/50 mb-8\"\n      >\n        {/* Month navigation */}\n        <div className=\"flex items-center justify-between mb-4\">\n          <button\n            onClick={prevMonth}\n            className=\"p-2 rounded-full hover:bg-muted transition-colors\"\n          >\n            <ChevronLeft className=\"w-5 h-5\" />\n          </button>\n          <h3 className=\"font-semibold text-lg\">\n            {currentMonth.toLocaleDateString('en-US', { month: 'long', year: 'numeric' })}\n          </h3>\n          <button\n            onClick={nextMonth}\n            className=\"p-2 rounded-full hover:bg-muted transition-colors\"\n          >\n            <ChevronRight className=\"w-5 h-5\" />\n          </button>\n        </div>\n\n        {/* Week day headers */}\n        <div className=\"grid grid-cols-7 gap-1 mb-2\">\n          {weekDays.map(day => (\n            <div key={day} className=\"text-center text-xs text-muted-foreground font-medium py-1\">\n              {day}\n            </div>\n          ))}\n        </div>\n\n        {/* Calendar grid */}\n        <div className=\"grid grid-cols-7 gap-1\">\n          {days.map((date, index) => {\n            if (!date) {\n              return <div key={`empty-${index}`} className=\"aspect-square\" />;\n            }\n\n            const isSelected = data.date?.toDateString() === date.toDateString();\n            const isPast = isPastDate(date);\n            const isTodayDate = isToday(date);\n\n            return (\n              <motion.button\n                key={date.toISOString()}\n                whileHover={!isPast ? { scale: 1.1 } : undefined}\n                whileTap={!isPast ? { scale: 0.95 } : undefined}\n                onClick={() => !isPast && handleDateSelect(date)}\n                disabled={isPast}\n                className={cn(\n                  'aspect-square rounded-xl flex items-center justify-center text-sm font-medium transition-colors relative',\n                  isPast && 'text-muted-foreground/30 cursor-not-allowed',\n                  !isPast && !isSelected && 'hover:bg-primary/10 text-foreground',\n                  isSelected && 'bg-primary text-primary-foreground',\n                  isTodayDate && !isSelected && 'ring-2 ring-primary/30'\n                )}\n              >\n                {date.getDate()}\n                {isTodayDate && !isSelected && (\n                  <span className=\"absolute bottom-1 w-1 h-1 rounded-full bg-primary\" />\n                )}\n              </motion.button>\n            );\n          })}\n        </div>\n      </motion.div>\n\n      <ContinueButton onClick={onNext} disabled={!data.date} />\n    </div>\n  );\n}\n\nfunction TimeStep({ onNext, data, setData, availableSlots, isLoading }: StepProps & { availableSlots?: AvailableSlot[]; isLoading?: boolean }) {\n  const handleTimeSelect = (slot: AvailableSlot) => {\n    setData(prev => ({ ...prev, time: slot }));\n  };\n\n  if (isLoading) {\n    return (\n      <div className=\"flex flex-col items-center\">\n        <QuestionText emoji=\"\">Finding available times...</QuestionText>\n        <motion.div\n          animate={{ rotate: 360 }}\n          transition={{ duration: 1, repeat: Infinity, ease: 'linear' }}\n          className=\"w-8 h-8 border-2 border-primary border-t-transparent rounded-full\"\n        />\n      </div>\n    );\n  }\n\n  if (!availableSlots || availableSlots.length === 0) {\n    return (\n      <div className=\"flex flex-col items-center text-center\">\n        <QuestionText emoji=\"\">No times available</QuestionText>\n        <p className=\"text-muted-foreground mb-6\">\n          Try selecting a different date\n        </p>\n        <ContinueButton onClick={() => setData(prev => ({ ...prev, date: null }))}>\n          Pick another date\n        </ContinueButton>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"flex flex-col items-center\">\n      <QuestionText emoji=\"\">\n        {data.date ? `What time on ${data.date.toLocaleDateString('en-US', { weekday: 'long', month: 'short', day: 'numeric' })}?` : 'Pick a time'}\n      </QuestionText>\n\n      <div className=\"w-full max-w-md grid grid-cols-3 gap-2 mb-8\">\n        {availableSlots.slice(0, 12).map((slot, index) => (\n          <motion.button\n            key={slot.timestamp}\n            initial={{ opacity: 0, scale: 0.9 }}\n            animate={{ opacity: 1, scale: 1 }}\n            transition={{ ...springs.snappy, delay: index * 0.05 }}\n            whileHover={{ scale: 1.05 }}\n            whileTap={{ scale: 0.95 }}\n            onClick={() => handleTimeSelect(slot)}\n            className={cn(\n              'px-4 py-3 rounded-xl font-medium transition-colors border-2',\n              data.time?.timestamp === slot.timestamp\n                ? 'border-primary bg-primary/10 text-primary'\n                : 'border-border/50 hover:border-primary/50 text-foreground'\n            )}\n          >\n            {formatTime(slot.timestamp)}\n          </motion.button>\n        ))}\n      </div>\n\n      {availableSlots.length > 12 && (\n        <p className=\"text-sm text-muted-foreground mb-4\">\n          Showing first 12 times\n        </p>\n      )}\n\n      <ContinueButton onClick={onNext} disabled={!data.time} />\n    </div>\n  );\n}\n\nfunction NameStep({ onNext, data, setData }: StepProps) {\n  const [inputValue, setInputValue] = useState(data.name);\n\n  const handleSubmit = (e: React.FormEvent) => {\n    e.preventDefault();\n    if (inputValue.trim()) {\n      setData(prev => ({ ...prev, name: inputValue.trim() }));\n      onNext();\n    }\n  };\n\n  return (\n    <div className=\"flex flex-col items-center\">\n      <QuestionText emoji=\"\">What&apos;s your name?</QuestionText>\n\n      <form onSubmit={handleSubmit} className=\"w-full max-w-md\">\n        <motion.input\n          initial={{ opacity: 0, y: 20 }}\n          animate={{ opacity: 1, y: 0 }}\n          transition={springs.smooth}\n          type=\"text\"\n          value={inputValue}\n          onChange={(e) => setInputValue(e.target.value)}\n          placeholder=\"Your name\"\n          autoFocus\n          className={cn(\n            'w-full text-center text-2xl font-medium py-4 px-6 rounded-2xl',\n            'bg-transparent border-2 border-border/50 focus:border-primary',\n            'outline-none transition-colors placeholder:text-muted-foreground/50'\n          )}\n        />\n\n        <div className=\"flex justify-center mt-8\">\n          <ContinueButton onClick={() => handleSubmit({ preventDefault: () => {} } as React.FormEvent)} disabled={!inputValue.trim()} />\n        </div>\n      </form>\n    </div>\n  );\n}\n\nfunction EmailStep({ onNext, data, setData }: StepProps) {\n  const [inputValue, setInputValue] = useState(data.email);\n  const isValidEmail = /^[^\\s@]+@[^\\s@]+\\.[^\\s@]+$/.test(inputValue);\n\n  const handleSubmit = (e: React.FormEvent) => {\n    e.preventDefault();\n    if (isValidEmail) {\n      setData(prev => ({ ...prev, email: inputValue.trim() }));\n      onNext();\n    }\n  };\n\n  return (\n    <div className=\"flex flex-col items-center\">\n      <QuestionText emoji=\"\">And your email?</QuestionText>\n\n      <form onSubmit={handleSubmit} className=\"w-full max-w-md\">\n        <motion.input\n          initial={{ opacity: 0, y: 20 }}\n          animate={{ opacity: 1, y: 0 }}\n          transition={springs.smooth}\n          type=\"email\"\n          value={inputValue}\n          onChange={(e) => setInputValue(e.target.value)}\n          placeholder=\"you@email.com\"\n          autoFocus\n          className={cn(\n            'w-full text-center text-xl font-medium py-4 px-6 rounded-2xl',\n            'bg-transparent border-2 border-border/50 focus:border-primary',\n            'outline-none transition-colors placeholder:text-muted-foreground/50'\n          )}\n        />\n\n        <p className=\"text-center text-sm text-muted-foreground mt-3\">\n          We&apos;ll send you a calendar invite\n        </p>\n\n        <div className=\"flex justify-center mt-8\">\n          <ContinueButton onClick={() => handleSubmit({ preventDefault: () => {} } as React.FormEvent)} disabled={!isValidEmail} />\n        </div>\n      </form>\n    </div>\n  );\n}\n\nfunction TopicStep({ onNext, data, setData }: StepProps) {\n  const [inputValue, setInputValue] = useState(data.topic);\n\n  const handleContinue = () => {\n    setData(prev => ({ ...prev, topic: inputValue.trim() }));\n    onNext();\n  };\n\n  const handleSkip = () => {\n    setData(prev => ({ ...prev, topic: '' }));\n    onNext();\n  };\n\n  return (\n    <div className=\"flex flex-col items-center\">\n      <QuestionText emoji=\"\">Anything specific you&apos;d like to discuss?</QuestionText>\n\n      <motion.textarea\n        initial={{ opacity: 0, y: 20 }}\n        animate={{ opacity: 1, y: 0 }}\n        transition={springs.smooth}\n        value={inputValue}\n        onChange={(e) => setInputValue(e.target.value)}\n        placeholder=\"Optional: Tell me what's on your mind...\"\n        rows={3}\n        className={cn(\n          'w-full max-w-md text-lg py-4 px-6 rounded-2xl resize-none',\n          'bg-transparent border-2 border-border/50 focus:border-primary',\n          'outline-none transition-colors placeholder:text-muted-foreground/50'\n        )}\n      />\n\n      <div className=\"flex flex-col sm:flex-row items-center gap-3 mt-8\">\n        <ContinueButton onClick={handleContinue}>\n          {inputValue.trim() ? 'Continue' : 'Skip'}\n        </ContinueButton>\n        {inputValue.trim() && (\n          <motion.button\n            initial={{ opacity: 0 }}\n            animate={{ opacity: 1 }}\n            onClick={handleSkip}\n            className=\"text-muted-foreground hover:text-foreground transition-colors\"\n          >\n            Skip this\n          </motion.button>\n        )}\n      </div>\n    </div>\n  );\n}\n\nfunction ConfirmStep({ onNext, data, isSubmitting }: StepProps & { isSubmitting?: boolean }) {\n  return (\n    <div className=\"flex flex-col items-center\">\n      <QuestionText emoji=\"\">Ready to book?</QuestionText>\n\n      <motion.div\n        initial={{ opacity: 0, y: 20 }}\n        animate={{ opacity: 1, y: 0 }}\n        transition={springs.smooth}\n        className=\"w-full max-w-md bg-card/50 rounded-2xl p-6 border border-border/50 mb-8\"\n      >\n        <div className=\"space-y-4\">\n          <div className=\"flex items-center gap-3\">\n            <div className=\"w-10 h-10 rounded-full bg-primary/10 flex items-center justify-center\">\n              <Calendar className=\"w-5 h-5 text-primary\" />\n            </div>\n            <div>\n              <p className=\"text-sm text-muted-foreground\">When</p>\n              <p className=\"font-medium\">\n                {data.date && formatDateFull(data.date)}\n                {data.time && ` at ${formatTime(data.time.timestamp)}`}\n              </p>\n            </div>\n          </div>\n\n          <div className=\"flex items-center gap-3\">\n            <div className=\"w-10 h-10 rounded-full bg-primary/10 flex items-center justify-center\">\n              <Clock className=\"w-5 h-5 text-primary\" />\n            </div>\n            <div>\n              <p className=\"text-sm text-muted-foreground\">Duration</p>\n              <p className=\"font-medium\">{data.duration} minutes</p>\n            </div>\n          </div>\n\n          <div className=\"pt-4 border-t border-border/50\">\n            <p className=\"text-sm text-muted-foreground mb-1\">Your details</p>\n            <p className=\"font-medium\">{data.name}</p>\n            <p className=\"text-muted-foreground\">{data.email}</p>\n            {data.topic && (\n              <p className=\"text-sm mt-2 text-muted-foreground italic\">&ldquo;{data.topic}&rdquo;</p>\n            )}\n          </div>\n        </div>\n      </motion.div>\n\n      <motion.button\n        variants={buttonVariants}\n        initial=\"initial\"\n        animate=\"animate\"\n        whileHover={isSubmitting ? undefined : \"hover\"}\n        whileTap={isSubmitting ? undefined : \"tap\"}\n        onClick={onNext}\n        disabled={isSubmitting}\n        className={cn(\n          'flex items-center justify-center gap-2 px-8 py-4 rounded-full font-semibold text-lg',\n          'bg-primary text-primary-foreground shadow-lg shadow-primary/25',\n          isSubmitting && 'opacity-70 cursor-wait'\n        )}\n      >\n        {isSubmitting ? (\n          <>\n            <motion.div\n              animate={{ rotate: 360 }}\n              transition={{ duration: 1, repeat: Infinity, ease: 'linear' }}\n              className=\"w-5 h-5 border-2 border-primary-foreground border-t-transparent rounded-full\"\n            />\n            Booking...\n          </>\n        ) : (\n          <>\n            <Sparkles className=\"w-5 h-5\" />\n            Confirm Booking\n          </>\n        )}\n      </motion.button>\n    </div>\n  );\n}\n\nfunction SuccessStep({ data, hostName = 'James' }: { data: BookingData; hostName?: string }) {\n  return (\n    <div className=\"flex flex-col items-center text-center\">\n      <motion.div\n        initial={{ scale: 0 }}\n        animate={{ scale: 1 }}\n        transition={{ ...springs.bouncy, delay: 0.2 }}\n        className=\"text-7xl mb-6\"\n      >\n        \n      </motion.div>\n\n      <TextEffect\n        per=\"word\"\n        preset=\"blur\"\n        as=\"h2\"\n        className=\"text-3xl md:text-4xl font-bold text-foreground mb-3\"\n      >\n        You&apos;re all set!\n      </TextEffect>\n\n      <TextEffect\n        per=\"word\"\n        preset=\"fade-in-blur\"\n        delay={0.3}\n        className=\"text-lg text-muted-foreground mb-8\"\n      >\n        {`See you ${data.date ? formatDateFull(data.date) : 'soon'}${data.time ? ` at ${formatTime(data.time.timestamp)}` : ''}`}\n      </TextEffect>\n\n      <FadeInUp delay={0.5}>\n        <div className=\"bg-card/50 rounded-2xl p-6 border border-border/50 max-w-md\">\n          <div className=\"flex items-center gap-3 mb-4\">\n            <div className=\"w-10 h-10 rounded-full bg-green-500/10 flex items-center justify-center\">\n              <Check className=\"w-5 h-5 text-green-500\" />\n            </div>\n            <div className=\"text-left\">\n              <p className=\"font-medium\">Calendar invite sent</p>\n              <p className=\"text-sm text-muted-foreground\">{data.email}</p>\n            </div>\n          </div>\n          <p className=\"text-sm text-muted-foreground\">\n            {hostName} will send you a meeting link before the call.\n          </p>\n        </div>\n      </FadeInUp>\n    </div>\n  );\n}\n\n// ============================================================================\n// Main Component\n// ============================================================================\n\nexport function ConversationalBooking({\n  eventTypes,\n  availableSlots,\n  onDateSelect,\n  onSubmit,\n  isLoadingSlots,\n  hostName = 'James',\n  onSwitchToClassic,\n}: ConversationalBookingProps) {\n  const [step, setStep] = useState<BookingStep>('welcome');\n  const [isSubmitting, setIsSubmitting] = useState(false);\n  const [data, setData] = useState<BookingData>({\n    duration: 0,\n    date: null,\n    time: null,\n    name: '',\n    email: '',\n    topic: '',\n  });\n\n  // Get the selected event type based on duration\n  const selectedEventType = useMemo(() => {\n    return eventTypes.find(et => et.duration === data.duration);\n  }, [eventTypes, data.duration]);\n\n  const handleSubmit = useCallback(async () => {\n    if (!selectedEventType || !data.time || !data.name || !data.email) return;\n\n    setIsSubmitting(true);\n    try {\n      await onSubmit({\n        eventTypeId: selectedEventType._id as string,\n        guestName: data.name,\n        guestEmail: data.email,\n        guestTimezone: Intl.DateTimeFormat().resolvedOptions().timeZone,\n        startTime: data.time.timestamp,\n        notes: data.topic || undefined,\n      });\n      setStep('success');\n    } catch (error) {\n      console.error('Booking failed:', error);\n      // Could show error state here\n    } finally {\n      setIsSubmitting(false);\n    }\n  }, [selectedEventType, data, onSubmit]);\n\n  const goToStep = (nextStep: BookingStep) => setStep(nextStep);\n\n  // Progress indicator\n  const steps: BookingStep[] = ['welcome', 'duration', 'date', 'time', 'name', 'email', 'topic', 'confirm'];\n  const currentStepIndex = steps.indexOf(step);\n  const progress = step === 'success' ? 100 : (currentStepIndex / (steps.length - 1)) * 100;\n\n  return (\n    <div className=\"min-h-screen flex flex-col\">\n      {/* Progress bar */}\n      {step !== 'welcome' && step !== 'success' && (\n        <motion.div\n          initial={{ opacity: 0 }}\n          animate={{ opacity: 1 }}\n          className=\"fixed top-0 left-0 right-0 h-1 bg-muted z-50\"\n        >\n          <motion.div\n            className=\"h-full bg-primary\"\n            initial={{ width: 0 }}\n            animate={{ width: `${progress}%` }}\n            transition={springs.smooth}\n          />\n        </motion.div>\n      )}\n\n      {/* Switch to classic view */}\n      {onSwitchToClassic && step !== 'success' && (\n        <motion.button\n          initial={{ opacity: 0 }}\n          animate={{ opacity: 1 }}\n          transition={{ delay: 1 }}\n          onClick={onSwitchToClassic}\n          className=\"fixed top-4 right-4 text-sm text-muted-foreground hover:text-foreground transition-colors z-50\"\n        >\n          Switch to classic view\n        </motion.button>\n      )}\n\n      {/* Main content */}\n      <div className=\"flex-1 flex items-center justify-center p-6\">\n        <AnimatePresence mode=\"wait\">\n          <motion.div\n            key={step}\n            variants={stepVariants}\n            initial=\"enter\"\n            animate=\"center\"\n            exit=\"exit\"\n            transition={springs.smooth}\n            className=\"w-full max-w-lg\"\n          >\n            {step === 'welcome' && (\n              <WelcomeStep\n                onNext={() => goToStep('duration')}\n                data={data}\n                setData={setData}\n                hostName={hostName}\n              />\n            )}\n            {step === 'duration' && (\n              <DurationStep\n                onNext={() => goToStep('date')}\n                data={data}\n                setData={setData}\n                eventTypes={eventTypes}\n              />\n            )}\n            {step === 'date' && (\n              <DateStep\n                onNext={() => goToStep('time')}\n                data={data}\n                setData={setData}\n                onDateSelect={onDateSelect}\n              />\n            )}\n            {step === 'time' && (\n              <TimeStep\n                onNext={() => goToStep('name')}\n                data={data}\n                setData={setData}\n                availableSlots={availableSlots}\n                isLoading={isLoadingSlots}\n              />\n            )}\n            {step === 'name' && (\n              <NameStep\n                onNext={() => goToStep('email')}\n                data={data}\n                setData={setData}\n              />\n            )}\n            {step === 'email' && (\n              <EmailStep\n                onNext={() => goToStep('topic')}\n                data={data}\n                setData={setData}\n              />\n            )}\n            {step === 'topic' && (\n              <TopicStep\n                onNext={() => goToStep('confirm')}\n                data={data}\n                setData={setData}\n              />\n            )}\n            {step === 'confirm' && (\n              <ConfirmStep\n                onNext={handleSubmit}\n                data={data}\n                setData={setData}\n                isSubmitting={isSubmitting}\n              />\n            )}\n            {step === 'success' && (\n              <SuccessStep data={data} hostName={hostName} />\n            )}\n          </motion.div>\n        </AnimatePresence>\n      </div>\n\n      {/* Back button */}\n      {step !== 'welcome' && step !== 'success' && (\n        <motion.button\n          initial={{ opacity: 0 }}\n          animate={{ opacity: 1 }}\n          onClick={() => {\n            const prevStep = steps[currentStepIndex - 1];\n            if (prevStep) setStep(prevStep);\n          }}\n          className=\"fixed bottom-6 left-6 flex items-center gap-2 text-muted-foreground hover:text-foreground transition-colors\"\n        >\n          <ChevronLeft className=\"w-4 h-4\" />\n          Back\n        </motion.button>\n      )}\n    </div>\n  );\n}\n\nexport default ConversationalBooking;\n"],"names":[],"mappings":"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"}