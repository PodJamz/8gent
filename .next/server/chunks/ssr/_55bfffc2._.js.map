{"version":3,"sources":["../../../../src/context/NotesContext.tsx","../../../../src/components/notes/NotesFolderTree.tsx","../../../../src/components/notes/NotesList.tsx","../../../../src/components/notes/NoteEditor.tsx","../../../../src/components/notes/NotesSearch.tsx","../../../../src/components/notes/QuickCaptureModal.tsx","../../../../src/components/notes/NotesApp.tsx"],"sourcesContent":["'use client';\n\nimport {\n  createContext,\n  useContext,\n  useState,\n  useCallback,\n  useEffect,\n  type ReactNode,\n} from 'react';\n\n// ============================================================================\n// Types\n// ============================================================================\n\nexport interface Note {\n  id: string;\n  title: string;\n  content: string; // markdown\n  folderId: string | null;\n  tags: string[];\n  createdAt: number;\n  updatedAt: number;\n  isPinned: boolean;\n}\n\nexport interface Folder {\n  id: string;\n  name: string;\n  parentId: string | null;\n  color: string;\n  createdAt: number;\n}\n\nexport type SortOption = 'updated' | 'created' | 'title' | 'manual';\nexport type ViewMode = 'list' | 'grid';\n\ninterface NotesState {\n  notes: Note[];\n  folders: Folder[];\n  selectedNoteId: string | null;\n  selectedFolderId: string | null;\n  searchQuery: string;\n  sortBy: SortOption;\n  viewMode: ViewMode;\n  isQuickCaptureOpen: boolean;\n}\n\ninterface NotesContextType extends NotesState {\n  // Note CRUD\n  createNote: (folderId?: string | null) => Note;\n  updateNote: (id: string, updates: Partial<Omit<Note, 'id' | 'createdAt'>>) => void;\n  deleteNote: (id: string) => void;\n  duplicateNote: (id: string) => Note | null;\n  moveNote: (noteId: string, folderId: string | null) => void;\n  togglePinNote: (id: string) => void;\n\n  // Folder CRUD\n  createFolder: (name: string, parentId?: string | null, color?: string) => Folder;\n  updateFolder: (id: string, updates: Partial<Omit<Folder, 'id' | 'createdAt'>>) => void;\n  deleteFolder: (id: string, deleteNotes?: boolean) => void;\n\n  // Selection\n  selectNote: (id: string | null) => void;\n  selectFolder: (id: string | null) => void;\n\n  // Search & Sort\n  setSearchQuery: (query: string) => void;\n  setSortBy: (sort: SortOption) => void;\n  setViewMode: (mode: ViewMode) => void;\n\n  // Quick Capture\n  openQuickCapture: () => void;\n  closeQuickCapture: () => void;\n  quickCapture: (content: string, folderId?: string | null) => Note;\n\n  // Computed\n  getNotesInFolder: (folderId: string | null) => Note[];\n  getSubfolders: (parentId: string | null) => Folder[];\n  getFilteredNotes: () => Note[];\n  selectedNote: Note | null;\n  selectedFolder: Folder | null;\n}\n\n// ============================================================================\n// Storage Keys\n// ============================================================================\n\nconst STORAGE_KEYS = {\n  notes: 'openclaw.notes',\n  folders: 'openclaw.notes.folders',\n  selectedNoteId: 'openclaw.notes.selectedNoteId',\n  selectedFolderId: 'openclaw.notes.selectedFolderId',\n  sortBy: 'openclaw.notes.sortBy',\n  viewMode: 'openclaw.notes.viewMode',\n} as const;\n\n// ============================================================================\n// Defaults\n// ============================================================================\n\nconst DEFAULT_FOLDERS: Folder[] = [\n  {\n    id: 'inbox',\n    name: 'Inbox',\n    parentId: null,\n    color: '#3b82f6',\n    createdAt: Date.now(),\n  },\n  {\n    id: 'personal',\n    name: 'Personal',\n    parentId: null,\n    color: '#10b981',\n    createdAt: Date.now(),\n  },\n  {\n    id: 'work',\n    name: 'Work',\n    parentId: null,\n    color: '#f59e0b',\n    createdAt: Date.now(),\n  },\n];\n\nconst WELCOME_NOTE: Note = {\n  id: 'welcome',\n  title: 'Welcome to Notes',\n  content: `# Welcome to Notes! üìù\n\nThis is your personal notes app with **markdown support**.\n\n## Features\n\n- üìÅ Organize notes into folders\n- üîç Quick search with \\`‚åòK\\`\n- ‚ö° Instant capture with \\`‚åò‚áßN\\`\n- üì± Works great on mobile\n- üåì Respects your theme\n\n## Markdown Support\n\nYou can use all the usual markdown:\n\n- **Bold** and *italic* text\n- \\`inline code\\` and code blocks\n- [Links](https://example.com)\n- Lists, headings, and more!\n\n\\`\\`\\`javascript\n// Even syntax-highlighted code\nconst greeting = \"Hello, Notes!\";\n\\`\\`\\`\n\n## Keyboard Shortcuts\n\n| Shortcut | Action |\n|----------|--------|\n| \\`‚åò‚áßN\\` | Quick capture |\n| \\`‚åòK\\` | Search notes |\n| \\`‚åòN\\` | New note |\n| \\`‚åòS\\` | Save (auto-saves) |\n\n---\n\nStart writing and your notes will be saved automatically!\n`,\n  folderId: 'inbox',\n  tags: ['welcome', 'getting-started'],\n  createdAt: Date.now(),\n  updatedAt: Date.now(),\n  isPinned: true,\n};\n\n// ============================================================================\n// Utilities\n// ============================================================================\n\nfunction generateId(): string {\n  return `${Date.now()}-${Math.random().toString(36).substr(2, 9)}`;\n}\n\nfunction safeJsonParse<T>(json: string | null, fallback: T): T {\n  if (!json) return fallback;\n  try {\n    return JSON.parse(json);\n  } catch {\n    return fallback;\n  }\n}\n\n// ============================================================================\n// Context\n// ============================================================================\n\nconst NotesContext = createContext<NotesContextType | null>(null);\n\nexport function NotesProvider({ children }: { children: ReactNode }) {\n  // State\n  const [notes, setNotes] = useState<Note[]>([]);\n  const [folders, setFolders] = useState<Folder[]>([]);\n  const [selectedNoteId, setSelectedNoteId] = useState<string | null>(null);\n  const [selectedFolderId, setSelectedFolderId] = useState<string | null>(null);\n  const [searchQuery, setSearchQuery] = useState('');\n  const [sortBy, setSortBy] = useState<SortOption>('updated');\n  const [viewMode, setViewMode] = useState<ViewMode>('list');\n  const [isQuickCaptureOpen, setIsQuickCaptureOpen] = useState(false);\n  const [isHydrated, setIsHydrated] = useState(false);\n\n  // Load from localStorage on mount\n  useEffect(() => {\n    const storedNotes = safeJsonParse<Note[]>(\n      localStorage.getItem(STORAGE_KEYS.notes),\n      []\n    );\n    const storedFolders = safeJsonParse<Folder[]>(\n      localStorage.getItem(STORAGE_KEYS.folders),\n      []\n    );\n    const storedSelectedNote = localStorage.getItem(STORAGE_KEYS.selectedNoteId);\n    const storedSelectedFolder = localStorage.getItem(STORAGE_KEYS.selectedFolderId);\n    const storedSortBy = localStorage.getItem(STORAGE_KEYS.sortBy) as SortOption | null;\n    const storedViewMode = localStorage.getItem(STORAGE_KEYS.viewMode) as ViewMode | null;\n\n    // Initialize with defaults if empty\n    if (storedFolders.length === 0) {\n      setFolders(DEFAULT_FOLDERS);\n    } else {\n      setFolders(storedFolders);\n    }\n\n    if (storedNotes.length === 0) {\n      setNotes([WELCOME_NOTE]);\n      setSelectedNoteId(WELCOME_NOTE.id);\n    } else {\n      setNotes(storedNotes);\n      if (storedSelectedNote) setSelectedNoteId(storedSelectedNote);\n    }\n\n    if (storedSelectedFolder) setSelectedFolderId(storedSelectedFolder);\n    if (storedSortBy) setSortBy(storedSortBy);\n    if (storedViewMode) setViewMode(storedViewMode);\n\n    setIsHydrated(true);\n  }, []);\n\n  // Persist notes to localStorage\n  useEffect(() => {\n    if (!isHydrated) return;\n    localStorage.setItem(STORAGE_KEYS.notes, JSON.stringify(notes));\n  }, [notes, isHydrated]);\n\n  // Persist folders to localStorage\n  useEffect(() => {\n    if (!isHydrated) return;\n    localStorage.setItem(STORAGE_KEYS.folders, JSON.stringify(folders));\n  }, [folders, isHydrated]);\n\n  // Persist selection\n  useEffect(() => {\n    if (!isHydrated) return;\n    if (selectedNoteId) {\n      localStorage.setItem(STORAGE_KEYS.selectedNoteId, selectedNoteId);\n    } else {\n      localStorage.removeItem(STORAGE_KEYS.selectedNoteId);\n    }\n  }, [selectedNoteId, isHydrated]);\n\n  useEffect(() => {\n    if (!isHydrated) return;\n    if (selectedFolderId) {\n      localStorage.setItem(STORAGE_KEYS.selectedFolderId, selectedFolderId);\n    } else {\n      localStorage.removeItem(STORAGE_KEYS.selectedFolderId);\n    }\n  }, [selectedFolderId, isHydrated]);\n\n  // Persist settings\n  useEffect(() => {\n    if (!isHydrated) return;\n    localStorage.setItem(STORAGE_KEYS.sortBy, sortBy);\n  }, [sortBy, isHydrated]);\n\n  useEffect(() => {\n    if (!isHydrated) return;\n    localStorage.setItem(STORAGE_KEYS.viewMode, viewMode);\n  }, [viewMode, isHydrated]);\n\n  // ============================================================================\n  // Note CRUD\n  // ============================================================================\n\n  const createNote = useCallback((folderId: string | null = null): Note => {\n    const newNote: Note = {\n      id: generateId(),\n      title: 'Untitled',\n      content: '',\n      folderId: folderId ?? selectedFolderId,\n      tags: [],\n      createdAt: Date.now(),\n      updatedAt: Date.now(),\n      isPinned: false,\n    };\n    setNotes((prev) => [newNote, ...prev]);\n    setSelectedNoteId(newNote.id);\n    return newNote;\n  }, [selectedFolderId]);\n\n  const updateNote = useCallback(\n    (id: string, updates: Partial<Omit<Note, 'id' | 'createdAt'>>) => {\n      setNotes((prev) =>\n        prev.map((note) =>\n          note.id === id\n            ? { ...note, ...updates, updatedAt: Date.now() }\n            : note\n        )\n      );\n    },\n    []\n  );\n\n  const deleteNote = useCallback((id: string) => {\n    setNotes((prev) => prev.filter((note) => note.id !== id));\n    setSelectedNoteId((prev) => (prev === id ? null : prev));\n  }, []);\n\n  const duplicateNote = useCallback((id: string): Note | null => {\n    const original = notes.find((n) => n.id === id);\n    if (!original) return null;\n\n    const duplicate: Note = {\n      ...original,\n      id: generateId(),\n      title: `${original.title} (Copy)`,\n      createdAt: Date.now(),\n      updatedAt: Date.now(),\n      isPinned: false,\n    };\n    setNotes((prev) => [duplicate, ...prev]);\n    setSelectedNoteId(duplicate.id);\n    return duplicate;\n  }, [notes]);\n\n  const moveNote = useCallback((noteId: string, folderId: string | null) => {\n    updateNote(noteId, { folderId });\n  }, [updateNote]);\n\n  const togglePinNote = useCallback((id: string) => {\n    setNotes((prev) =>\n      prev.map((note) =>\n        note.id === id ? { ...note, isPinned: !note.isPinned, updatedAt: Date.now() } : note\n      )\n    );\n  }, []);\n\n  // ============================================================================\n  // Folder CRUD\n  // ============================================================================\n\n  const createFolder = useCallback(\n    (name: string, parentId: string | null = null, color = '#6366f1'): Folder => {\n      const newFolder: Folder = {\n        id: generateId(),\n        name,\n        parentId,\n        color,\n        createdAt: Date.now(),\n      };\n      setFolders((prev) => [...prev, newFolder]);\n      return newFolder;\n    },\n    []\n  );\n\n  const updateFolder = useCallback(\n    (id: string, updates: Partial<Omit<Folder, 'id' | 'createdAt'>>) => {\n      setFolders((prev) =>\n        prev.map((folder) => (folder.id === id ? { ...folder, ...updates } : folder))\n      );\n    },\n    []\n  );\n\n  const deleteFolder = useCallback(\n    (id: string, deleteNotes = false) => {\n      // Get all descendant folder IDs\n      const getDescendantIds = (folderId: string): string[] => {\n        const children = folders.filter((f) => f.parentId === folderId);\n        return [folderId, ...children.flatMap((c) => getDescendantIds(c.id))];\n      };\n\n      const folderIds = getDescendantIds(id);\n\n      // Either delete or move notes to root\n      if (deleteNotes) {\n        setNotes((prev) => prev.filter((note) => !folderIds.includes(note.folderId ?? '')));\n      } else {\n        setNotes((prev) =>\n          prev.map((note) =>\n            folderIds.includes(note.folderId ?? '') ? { ...note, folderId: null } : note\n          )\n        );\n      }\n\n      // Delete folders\n      setFolders((prev) => prev.filter((f) => !folderIds.includes(f.id)));\n\n      // Clear selection if deleted\n      setSelectedFolderId((prev) => (folderIds.includes(prev ?? '') ? null : prev));\n    },\n    [folders]\n  );\n\n  // ============================================================================\n  // Selection\n  // ============================================================================\n\n  const selectNote = useCallback((id: string | null) => {\n    setSelectedNoteId(id);\n  }, []);\n\n  const selectFolder = useCallback((id: string | null) => {\n    setSelectedFolderId(id);\n  }, []);\n\n  // ============================================================================\n  // Quick Capture\n  // ============================================================================\n\n  const openQuickCapture = useCallback(() => {\n    setIsQuickCaptureOpen(true);\n  }, []);\n\n  const closeQuickCapture = useCallback(() => {\n    setIsQuickCaptureOpen(false);\n  }, []);\n\n  const quickCapture = useCallback(\n    (content: string, folderId: string | null = null): Note => {\n      // Extract title from first line if it's a heading\n      let title = 'Quick Note';\n      let noteContent = content;\n\n      const firstLine = content.split('\\n')[0];\n      if (firstLine.startsWith('#')) {\n        title = firstLine.replace(/^#+\\s*/, '').trim() || 'Quick Note';\n      } else if (firstLine.length > 0 && firstLine.length <= 50) {\n        title = firstLine;\n        noteContent = content.substring(firstLine.length).trim();\n      }\n\n      const newNote: Note = {\n        id: generateId(),\n        title,\n        content: noteContent,\n        folderId: folderId ?? 'inbox',\n        tags: [],\n        createdAt: Date.now(),\n        updatedAt: Date.now(),\n        isPinned: false,\n      };\n\n      setNotes((prev) => [newNote, ...prev]);\n      setIsQuickCaptureOpen(false);\n      return newNote;\n    },\n    []\n  );\n\n  // ============================================================================\n  // Computed Values\n  // ============================================================================\n\n  const getNotesInFolder = useCallback(\n    (folderId: string | null): Note[] => {\n      return notes.filter((note) => note.folderId === folderId);\n    },\n    [notes]\n  );\n\n  const getSubfolders = useCallback(\n    (parentId: string | null): Folder[] => {\n      return folders.filter((folder) => folder.parentId === parentId);\n    },\n    [folders]\n  );\n\n  const getFilteredNotes = useCallback((): Note[] => {\n    let filtered = notes;\n\n    // Filter by folder\n    if (selectedFolderId !== null) {\n      filtered = filtered.filter((note) => note.folderId === selectedFolderId);\n    }\n\n    // Filter by search\n    if (searchQuery.trim()) {\n      const query = searchQuery.toLowerCase();\n      filtered = filtered.filter(\n        (note) =>\n          note.title.toLowerCase().includes(query) ||\n          note.content.toLowerCase().includes(query) ||\n          note.tags.some((tag) => tag.toLowerCase().includes(query))\n      );\n    }\n\n    // Sort\n    const sorted = [...filtered].sort((a, b) => {\n      // Pinned notes first\n      if (a.isPinned && !b.isPinned) return -1;\n      if (!a.isPinned && b.isPinned) return 1;\n\n      switch (sortBy) {\n        case 'updated':\n          return b.updatedAt - a.updatedAt;\n        case 'created':\n          return b.createdAt - a.createdAt;\n        case 'title':\n          return a.title.localeCompare(b.title);\n        default:\n          return b.updatedAt - a.updatedAt;\n      }\n    });\n\n    return sorted;\n  }, [notes, selectedFolderId, searchQuery, sortBy]);\n\n  const selectedNote = notes.find((n) => n.id === selectedNoteId) ?? null;\n  const selectedFolder = folders.find((f) => f.id === selectedFolderId) ?? null;\n\n  // ============================================================================\n  // Context Value\n  // ============================================================================\n\n  const value: NotesContextType = {\n    // State\n    notes,\n    folders,\n    selectedNoteId,\n    selectedFolderId,\n    searchQuery,\n    sortBy,\n    viewMode,\n    isQuickCaptureOpen,\n\n    // Note CRUD\n    createNote,\n    updateNote,\n    deleteNote,\n    duplicateNote,\n    moveNote,\n    togglePinNote,\n\n    // Folder CRUD\n    createFolder,\n    updateFolder,\n    deleteFolder,\n\n    // Selection\n    selectNote,\n    selectFolder,\n\n    // Search & Sort\n    setSearchQuery,\n    setSortBy,\n    setViewMode,\n\n    // Quick Capture\n    openQuickCapture,\n    closeQuickCapture,\n    quickCapture,\n\n    // Computed\n    getNotesInFolder,\n    getSubfolders,\n    getFilteredNotes,\n    selectedNote,\n    selectedFolder,\n  };\n\n  return <NotesContext.Provider value={value}>{children}</NotesContext.Provider>;\n}\n\nexport function useNotes() {\n  const context = useContext(NotesContext);\n  if (!context) {\n    throw new Error('useNotes must be used within a NotesProvider');\n  }\n  return context;\n}\n","'use client';\n\nimport { useState, useCallback, useRef, useEffect } from 'react';\nimport { motion, AnimatePresence } from 'framer-motion';\nimport {\n  Folder,\n  FolderOpen,\n  ChevronRight,\n  Plus,\n  MoreHorizontal,\n  Edit2,\n  Trash2,\n  FileText,\n  Inbox,\n} from 'lucide-react';\nimport { useNotes, type Folder as FolderType } from '@/context/NotesContext';\nimport { cn } from '@/lib/utils';\n\nconst FOLDER_COLORS = [\n  '#3b82f6', // blue\n  '#10b981', // green\n  '#f59e0b', // amber\n  '#ef4444', // red\n  '#8b5cf6', // violet\n  '#ec4899', // pink\n  '#06b6d4', // cyan\n  '#f97316', // orange\n];\n\ninterface FolderItemProps {\n  folder: FolderType;\n  depth?: number;\n}\n\nfunction FolderItem({ folder, depth = 0 }: FolderItemProps) {\n  const {\n    selectedFolderId,\n    selectFolder,\n    getSubfolders,\n    getNotesInFolder,\n    updateFolder,\n    deleteFolder,\n    createFolder,\n  } = useNotes();\n\n  const [isExpanded, setIsExpanded] = useState(true);\n  const [showMenu, setShowMenu] = useState(false);\n  const [isEditing, setIsEditing] = useState(false);\n  const [editName, setEditName] = useState(folder.name);\n  const [showColorPicker, setShowColorPicker] = useState(false);\n  const menuRef = useRef<HTMLDivElement>(null);\n  const inputRef = useRef<HTMLInputElement>(null);\n\n  const subfolders = getSubfolders(folder.id);\n  const noteCount = getNotesInFolder(folder.id).length;\n  const isSelected = selectedFolderId === folder.id;\n\n  // Close menu on outside click\n  useEffect(() => {\n    const handleClick = (e: MouseEvent) => {\n      if (menuRef.current && !menuRef.current.contains(e.target as Node)) {\n        setShowMenu(false);\n        setShowColorPicker(false);\n      }\n    };\n    document.addEventListener('mousedown', handleClick);\n    return () => document.removeEventListener('mousedown', handleClick);\n  }, []);\n\n  // Focus input when editing\n  useEffect(() => {\n    if (isEditing && inputRef.current) {\n      inputRef.current.focus();\n      inputRef.current.select();\n    }\n  }, [isEditing]);\n\n  const handleClick = useCallback(() => {\n    selectFolder(folder.id);\n  }, [selectFolder, folder.id]);\n\n  const handleToggle = useCallback((e: React.MouseEvent) => {\n    e.stopPropagation();\n    setIsExpanded((prev) => !prev);\n  }, []);\n\n  const handleRename = useCallback(() => {\n    if (editName.trim() && editName !== folder.name) {\n      updateFolder(folder.id, { name: editName.trim() });\n    }\n    setIsEditing(false);\n    setShowMenu(false);\n  }, [editName, folder.id, folder.name, updateFolder]);\n\n  const handleDelete = useCallback(() => {\n    if (confirm(`Delete \"${folder.name}\" and move its notes to All Notes?`)) {\n      deleteFolder(folder.id, false);\n    }\n    setShowMenu(false);\n  }, [deleteFolder, folder.id, folder.name]);\n\n  const handleColorChange = useCallback(\n    (color: string) => {\n      updateFolder(folder.id, { color });\n      setShowColorPicker(false);\n      setShowMenu(false);\n    },\n    [folder.id, updateFolder]\n  );\n\n  const handleAddSubfolder = useCallback(() => {\n    createFolder('New Folder', folder.id);\n    setIsExpanded(true);\n    setShowMenu(false);\n  }, [createFolder, folder.id]);\n\n  return (\n    <div>\n      <div\n        onClick={handleClick}\n        className={cn(\n          'group flex items-center gap-1 px-2 py-1.5 rounded-lg cursor-pointer transition-colors',\n          isSelected\n            ? 'bg-[hsl(var(--theme-primary)/0.15)] text-[hsl(var(--theme-primary))]'\n            : 'text-[hsl(var(--theme-foreground))] hover:bg-[hsl(var(--theme-muted))]'\n        )}\n        style={{ paddingLeft: `${depth * 12 + 8}px` }}\n      >\n        {/* Expand toggle */}\n        {subfolders.length > 0 ? (\n          <button\n            onClick={handleToggle}\n            className=\"p-0.5 rounded hover:bg-[hsl(var(--theme-muted))] transition-colors\"\n          >\n            <ChevronRight\n              className={cn(\n                'w-3.5 h-3.5 transition-transform',\n                isExpanded && 'rotate-90'\n              )}\n            />\n          </button>\n        ) : (\n          <div className=\"w-4\" />\n        )}\n\n        {/* Folder icon */}\n        {isExpanded && subfolders.length > 0 ? (\n          <FolderOpen className=\"w-4 h-4 flex-shrink-0\" style={{ color: folder.color }} />\n        ) : (\n          <Folder className=\"w-4 h-4 flex-shrink-0\" style={{ color: folder.color }} />\n        )}\n\n        {/* Name or input */}\n        {isEditing ? (\n          <input\n            ref={inputRef}\n            value={editName}\n            onChange={(e) => setEditName(e.target.value)}\n            onBlur={handleRename}\n            onKeyDown={(e) => {\n              if (e.key === 'Enter') handleRename();\n              if (e.key === 'Escape') {\n                setEditName(folder.name);\n                setIsEditing(false);\n              }\n            }}\n            className=\"flex-1 min-w-0 px-1 py-0.5 text-sm bg-[hsl(var(--theme-background))] border border-[hsl(var(--theme-border))] rounded outline-none focus:border-[hsl(var(--theme-primary))]\"\n            onClick={(e) => e.stopPropagation()}\n          />\n        ) : (\n          <span className=\"flex-1 min-w-0 text-sm truncate\">{folder.name}</span>\n        )}\n\n        {/* Note count */}\n        {noteCount > 0 && !isEditing && (\n          <span className=\"text-xs text-[hsl(var(--theme-muted-foreground))]\">\n            {noteCount}\n          </span>\n        )}\n\n        {/* More menu */}\n        <div className=\"relative\" ref={menuRef}>\n          <button\n            onClick={(e) => {\n              e.stopPropagation();\n              setShowMenu(!showMenu);\n            }}\n            className={cn(\n              'p-1 rounded transition-colors',\n              showMenu\n                ? 'opacity-100 bg-[hsl(var(--theme-muted))]'\n                : 'opacity-0 group-hover:opacity-100 hover:bg-[hsl(var(--theme-muted))]'\n            )}\n          >\n            <MoreHorizontal className=\"w-3.5 h-3.5\" />\n          </button>\n\n          <AnimatePresence>\n            {showMenu && (\n              <motion.div\n                initial={{ opacity: 0, scale: 0.95 }}\n                animate={{ opacity: 1, scale: 1 }}\n                exit={{ opacity: 0, scale: 0.95 }}\n                transition={{ duration: 0.1 }}\n                className=\"absolute right-0 top-full mt-1 z-50 w-40 rounded-lg border border-[hsl(var(--theme-border))] bg-[hsl(var(--theme-card))] shadow-lg overflow-hidden\"\n                onClick={(e) => e.stopPropagation()}\n              >\n                <button\n                  onClick={() => setIsEditing(true)}\n                  className=\"w-full flex items-center gap-2 px-3 py-2 text-sm text-[hsl(var(--theme-foreground))] hover:bg-[hsl(var(--theme-muted))] transition-colors\"\n                >\n                  <Edit2 className=\"w-3.5 h-3.5\" />\n                  Rename\n                </button>\n\n                <button\n                  onClick={() => setShowColorPicker(!showColorPicker)}\n                  className=\"w-full flex items-center gap-2 px-3 py-2 text-sm text-[hsl(var(--theme-foreground))] hover:bg-[hsl(var(--theme-muted))] transition-colors\"\n                >\n                  <div\n                    className=\"w-3.5 h-3.5 rounded-full border border-[hsl(var(--theme-border))]\"\n                    style={{ backgroundColor: folder.color }}\n                  />\n                  Color\n                </button>\n\n                {showColorPicker && (\n                  <div className=\"px-3 py-2 grid grid-cols-4 gap-1.5\">\n                    {FOLDER_COLORS.map((color) => (\n                      <button\n                        key={color}\n                        onClick={() => handleColorChange(color)}\n                        className={cn(\n                          'w-5 h-5 rounded-full border-2 transition-transform hover:scale-110',\n                          folder.color === color\n                            ? 'border-[hsl(var(--theme-foreground))]'\n                            : 'border-transparent'\n                        )}\n                        style={{ backgroundColor: color }}\n                      />\n                    ))}\n                  </div>\n                )}\n\n                <button\n                  onClick={handleAddSubfolder}\n                  className=\"w-full flex items-center gap-2 px-3 py-2 text-sm text-[hsl(var(--theme-foreground))] hover:bg-[hsl(var(--theme-muted))] transition-colors\"\n                >\n                  <Plus className=\"w-3.5 h-3.5\" />\n                  Add Subfolder\n                </button>\n\n                <div className=\"h-px bg-[hsl(var(--theme-border))]\" />\n\n                <button\n                  onClick={handleDelete}\n                  className=\"w-full flex items-center gap-2 px-3 py-2 text-sm text-red-500 hover:bg-red-500/10 transition-colors\"\n                >\n                  <Trash2 className=\"w-3.5 h-3.5\" />\n                  Delete\n                </button>\n              </motion.div>\n            )}\n          </AnimatePresence>\n        </div>\n      </div>\n\n      {/* Subfolders */}\n      <AnimatePresence>\n        {isExpanded && subfolders.length > 0 && (\n          <motion.div\n            initial={{ height: 0, opacity: 0 }}\n            animate={{ height: 'auto', opacity: 1 }}\n            exit={{ height: 0, opacity: 0 }}\n            transition={{ duration: 0.2 }}\n          >\n            {subfolders.map((subfolder) => (\n              <FolderItem key={subfolder.id} folder={subfolder} depth={depth + 1} />\n            ))}\n          </motion.div>\n        )}\n      </AnimatePresence>\n    </div>\n  );\n}\n\nexport function NotesFolderTree({ className }: { className?: string }) {\n  const { folders, selectedFolderId, selectFolder, createFolder, notes } = useNotes();\n  const [isCreating, setIsCreating] = useState(false);\n  const [newFolderName, setNewFolderName] = useState('');\n  const inputRef = useRef<HTMLInputElement>(null);\n\n  const rootFolders = folders.filter((f) => f.parentId === null);\n  const allNotesCount = notes.length;\n\n  // Focus input when creating\n  useEffect(() => {\n    if (isCreating && inputRef.current) {\n      inputRef.current.focus();\n    }\n  }, [isCreating]);\n\n  const handleCreateFolder = useCallback(() => {\n    if (newFolderName.trim()) {\n      createFolder(newFolderName.trim());\n      setNewFolderName('');\n    }\n    setIsCreating(false);\n  }, [createFolder, newFolderName]);\n\n  return (\n    <div className={cn('flex flex-col h-full', className)}>\n      {/* Header */}\n      <div className=\"flex items-center justify-between px-3 py-2 border-b border-[hsl(var(--theme-border))]\">\n        <span\n          className=\"text-sm font-semibold text-[hsl(var(--theme-foreground))]\"\n          style={{ fontFamily: 'var(--theme-font-heading)' }}\n        >\n          Folders\n        </span>\n        <button\n          onClick={() => setIsCreating(true)}\n          className=\"p-1 rounded-md hover:bg-[hsl(var(--theme-muted))] text-[hsl(var(--theme-muted-foreground))] hover:text-[hsl(var(--theme-foreground))] transition-colors\"\n          title=\"New folder\"\n        >\n          <Plus className=\"w-4 h-4\" />\n        </button>\n      </div>\n\n      {/* Folder list */}\n      <div className=\"flex-1 overflow-y-auto p-2 space-y-0.5\">\n        {/* All Notes */}\n        <div\n          onClick={() => selectFolder(null)}\n          className={cn(\n            'flex items-center gap-2 px-2 py-1.5 rounded-lg cursor-pointer transition-colors',\n            selectedFolderId === null\n              ? 'bg-[hsl(var(--theme-primary)/0.15)] text-[hsl(var(--theme-primary))]'\n              : 'text-[hsl(var(--theme-foreground))] hover:bg-[hsl(var(--theme-muted))]'\n          )}\n        >\n          <FileText className=\"w-4 h-4\" />\n          <span className=\"flex-1 text-sm\">All Notes</span>\n          <span className=\"text-xs text-[hsl(var(--theme-muted-foreground))]\">\n            {allNotesCount}\n          </span>\n        </div>\n\n        {/* Root folders */}\n        {rootFolders.map((folder) => (\n          <FolderItem key={folder.id} folder={folder} />\n        ))}\n\n        {/* New folder input */}\n        <AnimatePresence>\n          {isCreating && (\n            <motion.div\n              initial={{ opacity: 0, height: 0 }}\n              animate={{ opacity: 1, height: 'auto' }}\n              exit={{ opacity: 0, height: 0 }}\n              className=\"flex items-center gap-2 px-2 py-1.5\"\n            >\n              <Folder className=\"w-4 h-4 text-[hsl(var(--theme-muted-foreground))]\" />\n              <input\n                ref={inputRef}\n                value={newFolderName}\n                onChange={(e) => setNewFolderName(e.target.value)}\n                onBlur={handleCreateFolder}\n                onKeyDown={(e) => {\n                  if (e.key === 'Enter') handleCreateFolder();\n                  if (e.key === 'Escape') {\n                    setNewFolderName('');\n                    setIsCreating(false);\n                  }\n                }}\n                placeholder=\"Folder name\"\n                className=\"flex-1 min-w-0 px-2 py-1 text-sm bg-[hsl(var(--theme-background))] border border-[hsl(var(--theme-border))] rounded outline-none focus:border-[hsl(var(--theme-primary))]\"\n              />\n            </motion.div>\n          )}\n        </AnimatePresence>\n      </div>\n    </div>\n  );\n}\n","'use client';\n\nimport { useCallback, useMemo } from 'react';\nimport { motion, AnimatePresence } from 'framer-motion';\nimport { Plus, Pin, FileText, Clock, Grid, List, SortAsc } from 'lucide-react';\nimport { useNotes, type Note, type SortOption, type ViewMode } from '@/context/NotesContext';\nimport { cn } from '@/lib/utils';\n\ninterface NotesListProps {\n  className?: string;\n}\n\nfunction NoteCard({ note, isSelected }: { note: Note; isSelected: boolean }) {\n  const { selectNote, folders } = useNotes();\n\n  const folder = folders.find((f) => f.id === note.folderId);\n\n  const preview = useMemo(() => {\n    // Strip markdown and get first ~100 chars\n    return note.content\n      .replace(/^#+\\s+/gm, '')\n      .replace(/[*_`~\\[\\]]/g, '')\n      .replace(/\\n+/g, ' ')\n      .trim()\n      .substring(0, 100);\n  }, [note.content]);\n\n  const formatDate = (timestamp: number) => {\n    const now = Date.now();\n    const diff = now - timestamp;\n    const minutes = Math.floor(diff / 60000);\n    const hours = Math.floor(diff / 3600000);\n    const days = Math.floor(diff / 86400000);\n\n    if (minutes < 1) return 'Just now';\n    if (minutes < 60) return `${minutes}m ago`;\n    if (hours < 24) return `${hours}h ago`;\n    if (days < 7) return `${days}d ago`;\n    return new Date(timestamp).toLocaleDateString('en-US', {\n      month: 'short',\n      day: 'numeric',\n    });\n  };\n\n  return (\n    <motion.button\n      onClick={() => selectNote(note.id)}\n      layout\n      initial={{ opacity: 0, y: 10 }}\n      animate={{ opacity: 1, y: 0 }}\n      exit={{ opacity: 0, y: -10 }}\n      className={cn(\n        'w-full text-left p-3 rounded-lg border transition-all',\n        isSelected\n          ? 'bg-[hsl(var(--theme-primary)/0.1)] border-[hsl(var(--theme-primary))]'\n          : 'bg-[hsl(var(--theme-card))] border-[hsl(var(--theme-border))] hover:border-[hsl(var(--theme-primary)/0.5)]'\n      )}\n    >\n      {/* Header */}\n      <div className=\"flex items-start gap-2 mb-1\">\n        <h3\n          className={cn(\n            'flex-1 font-medium text-sm truncate',\n            isSelected\n              ? 'text-[hsl(var(--theme-primary))]'\n              : 'text-[hsl(var(--theme-foreground))]'\n          )}\n          style={{ fontFamily: 'var(--theme-font-heading)' }}\n        >\n          {note.title || 'Untitled'}\n        </h3>\n        {note.isPinned && (\n          <Pin className=\"w-3.5 h-3.5 flex-shrink-0 text-[hsl(var(--theme-primary))]\" />\n        )}\n      </div>\n\n      {/* Preview */}\n      {preview && (\n        <p className=\"text-xs text-[hsl(var(--theme-muted-foreground))] line-clamp-2 mb-2\">\n          {preview}\n        </p>\n      )}\n\n      {/* Footer */}\n      <div className=\"flex items-center gap-2 text-[10px] text-[hsl(var(--theme-muted-foreground))]\">\n        {folder && (\n          <>\n            <span className=\"flex items-center gap-1\">\n              <div\n                className=\"w-2 h-2 rounded-sm\"\n                style={{ backgroundColor: folder.color }}\n              />\n              {folder.name}\n            </span>\n            <span>¬∑</span>\n          </>\n        )}\n        <span className=\"flex items-center gap-1\">\n          <Clock className=\"w-2.5 h-2.5\" />\n          {formatDate(note.updatedAt)}\n        </span>\n      </div>\n    </motion.button>\n  );\n}\n\nfunction NoteRow({ note, isSelected }: { note: Note; isSelected: boolean }) {\n  const { selectNote, folders } = useNotes();\n  const folder = folders.find((f) => f.id === note.folderId);\n\n  const formatDate = (timestamp: number) => {\n    const now = Date.now();\n    const diff = now - timestamp;\n    const minutes = Math.floor(diff / 60000);\n    const hours = Math.floor(diff / 3600000);\n    const days = Math.floor(diff / 86400000);\n\n    if (minutes < 1) return 'Just now';\n    if (minutes < 60) return `${minutes}m`;\n    if (hours < 24) return `${hours}h`;\n    if (days < 7) return `${days}d`;\n    return new Date(timestamp).toLocaleDateString('en-US', {\n      month: 'short',\n      day: 'numeric',\n    });\n  };\n\n  return (\n    <motion.button\n      onClick={() => selectNote(note.id)}\n      layout\n      initial={{ opacity: 0, x: -10 }}\n      animate={{ opacity: 1, x: 0 }}\n      exit={{ opacity: 0, x: 10 }}\n      className={cn(\n        'w-full text-left px-3 py-2.5 flex items-center gap-3 rounded-lg transition-all',\n        isSelected\n          ? 'bg-[hsl(var(--theme-primary)/0.1)] text-[hsl(var(--theme-primary))]'\n          : 'hover:bg-[hsl(var(--theme-muted))] text-[hsl(var(--theme-foreground))]'\n      )}\n    >\n      {note.isPinned ? (\n        <Pin className=\"w-4 h-4 flex-shrink-0 text-[hsl(var(--theme-primary))]\" />\n      ) : (\n        <FileText className=\"w-4 h-4 flex-shrink-0 text-[hsl(var(--theme-muted-foreground))]\" />\n      )}\n\n      <span\n        className=\"flex-1 text-sm truncate font-medium\"\n        style={{ fontFamily: 'var(--theme-font-heading)' }}\n      >\n        {note.title || 'Untitled'}\n      </span>\n\n      {folder && (\n        <span className=\"hidden sm:flex items-center gap-1 text-xs text-[hsl(var(--theme-muted-foreground))]\">\n          <div\n            className=\"w-2 h-2 rounded-sm\"\n            style={{ backgroundColor: folder.color }}\n          />\n        </span>\n      )}\n\n      <span className=\"text-xs text-[hsl(var(--theme-muted-foreground))]\">\n        {formatDate(note.updatedAt)}\n      </span>\n    </motion.button>\n  );\n}\n\nconst SORT_OPTIONS: { value: SortOption; label: string }[] = [\n  { value: 'updated', label: 'Last Modified' },\n  { value: 'created', label: 'Date Created' },\n  { value: 'title', label: 'Title' },\n];\n\nexport function NotesList({ className }: NotesListProps) {\n  const {\n    createNote,\n    selectedNoteId,\n    selectedFolderId,\n    selectedFolder,\n    getFilteredNotes,\n    sortBy,\n    setSortBy,\n    viewMode,\n    setViewMode,\n    searchQuery,\n  } = useNotes();\n\n  const filteredNotes = getFilteredNotes();\n\n  const handleCreateNote = useCallback(() => {\n    createNote(selectedFolderId);\n  }, [createNote, selectedFolderId]);\n\n  const folderName = selectedFolder?.name ?? 'All Notes';\n\n  return (\n    <div className={cn('flex flex-col h-full', className)}>\n      {/* Header */}\n      <div className=\"flex-shrink-0 px-3 py-2 border-b border-[hsl(var(--theme-border))] space-y-2\">\n        <div className=\"flex items-center justify-between\">\n          <h2\n            className=\"text-sm font-semibold text-[hsl(var(--theme-foreground))] truncate\"\n            style={{ fontFamily: 'var(--theme-font-heading)' }}\n          >\n            {searchQuery ? `Search: \"${searchQuery}\"` : folderName}\n          </h2>\n          <button\n            onClick={handleCreateNote}\n            className=\"p-1.5 rounded-lg bg-[hsl(var(--theme-primary))] text-white hover:bg-[hsl(var(--theme-primary)/0.9)] transition-colors\"\n            title=\"New note\"\n            aria-label=\"Create new note\"\n          >\n            <Plus className=\"w-4 h-4\" aria-hidden=\"true\" />\n          </button>\n        </div>\n\n        {/* Sort and view controls */}\n        <div className=\"flex items-center justify-between\">\n          <div className=\"flex items-center gap-1\">\n            <SortAsc className=\"w-3.5 h-3.5 text-[hsl(var(--theme-muted-foreground))]\" />\n            <select\n              value={sortBy}\n              onChange={(e) => setSortBy(e.target.value as SortOption)}\n              className=\"text-xs bg-transparent border-none outline-none text-[hsl(var(--theme-muted-foreground))] cursor-pointer\"\n            >\n              {SORT_OPTIONS.map((opt) => (\n                <option key={opt.value} value={opt.value}>\n                  {opt.label}\n                </option>\n              ))}\n            </select>\n          </div>\n\n          <div className=\"flex items-center gap-0.5 p-0.5 rounded-md bg-[hsl(var(--theme-muted))]\" role=\"group\" aria-label=\"View mode\">\n            <button\n              onClick={() => setViewMode('list')}\n              className={cn(\n                'p-1 rounded transition-colors',\n                viewMode === 'list'\n                  ? 'bg-[hsl(var(--theme-card))] text-[hsl(var(--theme-foreground))]'\n                  : 'text-[hsl(var(--theme-muted-foreground))]'\n              )}\n              aria-label=\"List view\"\n              aria-pressed={viewMode === 'list'}\n            >\n              <List className=\"w-3.5 h-3.5\" aria-hidden=\"true\" />\n            </button>\n            <button\n              onClick={() => setViewMode('grid')}\n              className={cn(\n                'p-1 rounded transition-colors',\n                viewMode === 'grid'\n                  ? 'bg-[hsl(var(--theme-card))] text-[hsl(var(--theme-foreground))]'\n                  : 'text-[hsl(var(--theme-muted-foreground))]'\n              )}\n              aria-label=\"Grid view\"\n              aria-pressed={viewMode === 'grid'}\n            >\n              <Grid className=\"w-3.5 h-3.5\" aria-hidden=\"true\" />\n            </button>\n          </div>\n        </div>\n      </div>\n\n      {/* Notes list */}\n      <div className=\"flex-1 overflow-y-auto p-2\">\n        {filteredNotes.length === 0 ? (\n          <div className=\"flex flex-col items-center justify-center h-full text-center p-4\">\n            <FileText className=\"w-12 h-12 text-[hsl(var(--theme-muted-foreground))] mb-3\" />\n            <p className=\"text-sm text-[hsl(var(--theme-muted-foreground))]\">\n              {searchQuery ? 'No notes found' : 'No notes yet'}\n            </p>\n            {!searchQuery && (\n              <button\n                onClick={handleCreateNote}\n                className=\"mt-3 px-3 py-1.5 text-sm rounded-lg bg-[hsl(var(--theme-primary))] text-white hover:bg-[hsl(var(--theme-primary)/0.9)] transition-colors\"\n              >\n                Create your first note\n              </button>\n            )}\n          </div>\n        ) : viewMode === 'grid' ? (\n          <motion.div layout className=\"grid gap-2\">\n            <AnimatePresence mode=\"popLayout\">\n              {filteredNotes.map((note) => (\n                <NoteCard\n                  key={note.id}\n                  note={note}\n                  isSelected={note.id === selectedNoteId}\n                />\n              ))}\n            </AnimatePresence>\n          </motion.div>\n        ) : (\n          <motion.div layout className=\"space-y-0.5\">\n            <AnimatePresence mode=\"popLayout\">\n              {filteredNotes.map((note) => (\n                <NoteRow\n                  key={note.id}\n                  note={note}\n                  isSelected={note.id === selectedNoteId}\n                />\n              ))}\n            </AnimatePresence>\n          </motion.div>\n        )}\n      </div>\n\n      {/* Footer with count */}\n      <div className=\"flex-shrink-0 px-3 py-1.5 border-t border-[hsl(var(--theme-border))]\">\n        <p className=\"text-[10px] text-[hsl(var(--theme-muted-foreground))]\">\n          {filteredNotes.length} {filteredNotes.length === 1 ? 'note' : 'notes'}\n        </p>\n      </div>\n    </div>\n  );\n}\n","'use client';\n\nimport { useState, useCallback, useEffect, useRef } from 'react';\nimport { useHorizontalScroll } from '@/hooks';\nimport { motion, AnimatePresence } from 'framer-motion';\nimport ReactMarkdown from 'react-markdown';\nimport {\n  Eye,\n  EyeOff,\n  Pin,\n  PinOff,\n  Copy,\n  Trash2,\n  MoreHorizontal,\n  FolderInput,\n  Clock,\n  Hash,\n  Bold,\n  Italic,\n  Strikethrough,\n  List,\n  ListOrdered,\n  Quote,\n  Code,\n  Link2,\n  Image,\n  Heading1,\n  Heading2,\n  CheckSquare,\n} from 'lucide-react';\nimport { useNotes, type Note } from '@/context/NotesContext';\nimport { cn } from '@/lib/utils';\n\ninterface NoteEditorProps {\n  note: Note;\n  className?: string;\n}\n\ntype EditorMode = 'edit' | 'preview' | 'split';\n\nexport function NoteEditor({ note, className }: NoteEditorProps) {\n  const { updateNote, deleteNote, duplicateNote, togglePinNote, folders, moveNote } = useNotes();\n  const [mode, setMode] = useState<EditorMode>('split');\n  const [showMenu, setShowMenu] = useState(false);\n  const [showMoveMenu, setShowMoveMenu] = useState(false);\n  const [localTitle, setLocalTitle] = useState(note.title);\n  const [localContent, setLocalContent] = useState(note.content);\n  const menuRef = useRef<HTMLDivElement>(null);\n  const titleRef = useRef<HTMLInputElement>(null);\n  const contentRef = useRef<HTMLTextAreaElement>(null);\n  const toolbarScrollRef = useHorizontalScroll<HTMLDivElement>();\n\n  // Sync local state when note changes\n  useEffect(() => {\n    setLocalTitle(note.title);\n    setLocalContent(note.content);\n  }, [note.id, note.title, note.content]);\n\n  // Debounced save\n  useEffect(() => {\n    const timeout = setTimeout(() => {\n      if (localTitle !== note.title || localContent !== note.content) {\n        updateNote(note.id, { title: localTitle, content: localContent });\n      }\n    }, 500);\n\n    return () => clearTimeout(timeout);\n  }, [localTitle, localContent, note.id, note.title, note.content, updateNote]);\n\n  // Close menu on outside click\n  useEffect(() => {\n    const handleClick = (e: MouseEvent) => {\n      if (menuRef.current && !menuRef.current.contains(e.target as Node)) {\n        setShowMenu(false);\n        setShowMoveMenu(false);\n      }\n    };\n    document.addEventListener('mousedown', handleClick);\n    return () => document.removeEventListener('mousedown', handleClick);\n  }, []);\n\n  const handleTitleChange = useCallback((e: React.ChangeEvent<HTMLInputElement>) => {\n    setLocalTitle(e.target.value);\n  }, []);\n\n  const handleContentChange = useCallback((e: React.ChangeEvent<HTMLTextAreaElement>) => {\n    setLocalContent(e.target.value);\n  }, []);\n\n  const handleKeyDown = useCallback(\n    (e: React.KeyboardEvent<HTMLTextAreaElement>) => {\n      // Tab key for indentation\n      if (e.key === 'Tab') {\n        e.preventDefault();\n        const start = e.currentTarget.selectionStart;\n        const end = e.currentTarget.selectionEnd;\n        const value = e.currentTarget.value;\n\n        if (e.shiftKey) {\n          // Remove indentation\n          const beforeCursor = value.substring(0, start);\n          const afterCursor = value.substring(end);\n          const lastNewline = beforeCursor.lastIndexOf('\\n') + 1;\n          const lineStart = beforeCursor.substring(lastNewline);\n\n          if (lineStart.startsWith('  ')) {\n            setLocalContent(\n              value.substring(0, lastNewline) + lineStart.substring(2) + afterCursor\n            );\n          }\n        } else {\n          // Add indentation\n          setLocalContent(value.substring(0, start) + '  ' + value.substring(end));\n          setTimeout(() => {\n            if (contentRef.current) {\n              contentRef.current.selectionStart = contentRef.current.selectionEnd = start + 2;\n            }\n          }, 0);\n        }\n      }\n\n      // Cmd/Ctrl + B for bold\n      if ((e.metaKey || e.ctrlKey) && e.key === 'b') {\n        e.preventDefault();\n        wrapSelection('**', '**');\n      }\n\n      // Cmd/Ctrl + I for italic\n      if ((e.metaKey || e.ctrlKey) && e.key === 'i') {\n        e.preventDefault();\n        wrapSelection('*', '*');\n      }\n\n      // Cmd/Ctrl + Shift + K for link (K alone is reserved for global command palette)\n      if ((e.metaKey || e.ctrlKey) && e.shiftKey && e.key === 'k') {\n        e.preventDefault();\n        wrapSelection('[', '](url)');\n      }\n    },\n    []\n  );\n\n  const wrapSelection = useCallback((before: string, after: string) => {\n    if (!contentRef.current) return;\n\n    const start = contentRef.current.selectionStart;\n    const end = contentRef.current.selectionEnd;\n    const text = localContent;\n    const selected = text.substring(start, end) || 'text';\n\n    const newText = text.substring(0, start) + before + selected + after + text.substring(end);\n    setLocalContent(newText);\n\n    setTimeout(() => {\n      if (contentRef.current) {\n        contentRef.current.focus();\n        contentRef.current.selectionStart = start + before.length;\n        contentRef.current.selectionEnd = start + before.length + selected.length;\n      }\n    }, 0);\n  }, [localContent]);\n\n  const insertAtLineStart = useCallback((prefix: string) => {\n    if (!contentRef.current) return;\n\n    const start = contentRef.current.selectionStart;\n    const text = localContent;\n\n    // Find the start of the current line\n    const lineStart = text.lastIndexOf('\\n', start - 1) + 1;\n    const lineEnd = text.indexOf('\\n', start);\n    const endPos = lineEnd === -1 ? text.length : lineEnd;\n\n    const newText = text.substring(0, lineStart) + prefix + text.substring(lineStart);\n    setLocalContent(newText);\n\n    setTimeout(() => {\n      if (contentRef.current) {\n        contentRef.current.focus();\n        contentRef.current.selectionStart = contentRef.current.selectionEnd = start + prefix.length;\n      }\n    }, 0);\n  }, [localContent]);\n\n  const insertCodeBlock = useCallback(() => {\n    if (!contentRef.current) return;\n\n    const start = contentRef.current.selectionStart;\n    const end = contentRef.current.selectionEnd;\n    const text = localContent;\n    const selected = text.substring(start, end) || 'code here';\n\n    const newText = text.substring(0, start) + '\\n```\\n' + selected + '\\n```\\n' + text.substring(end);\n    setLocalContent(newText);\n\n    setTimeout(() => {\n      if (contentRef.current) {\n        contentRef.current.focus();\n        contentRef.current.selectionStart = start + 5;\n        contentRef.current.selectionEnd = start + 5 + selected.length;\n      }\n    }, 0);\n  }, [localContent]);\n\n  const insertImage = useCallback(() => {\n    if (!contentRef.current) return;\n\n    const start = contentRef.current.selectionStart;\n    const text = localContent;\n\n    const imageMarkdown = '![alt text](image-url)';\n    const newText = text.substring(0, start) + imageMarkdown + text.substring(start);\n    setLocalContent(newText);\n\n    setTimeout(() => {\n      if (contentRef.current) {\n        contentRef.current.focus();\n        contentRef.current.selectionStart = start + 2;\n        contentRef.current.selectionEnd = start + 10;\n      }\n    }, 0);\n  }, [localContent]);\n\n  const handleDuplicate = useCallback(() => {\n    duplicateNote(note.id);\n    setShowMenu(false);\n  }, [duplicateNote, note.id]);\n\n  const handleDelete = useCallback(() => {\n    if (confirm('Delete this note? This cannot be undone.')) {\n      deleteNote(note.id);\n    }\n    setShowMenu(false);\n  }, [deleteNote, note.id]);\n\n  const handleMove = useCallback(\n    (folderId: string | null) => {\n      moveNote(note.id, folderId);\n      setShowMenu(false);\n      setShowMoveMenu(false);\n    },\n    [moveNote, note.id]\n  );\n\n  const formatDate = (timestamp: number) => {\n    return new Date(timestamp).toLocaleDateString('en-US', {\n      month: 'short',\n      day: 'numeric',\n      year: 'numeric',\n      hour: 'numeric',\n      minute: '2-digit',\n    });\n  };\n\n  const currentFolder = folders.find((f) => f.id === note.folderId);\n\n  return (\n    <div className={cn('flex flex-col h-full', className)}>\n      {/* Header */}\n      <div className=\"flex-shrink-0 border-b border-[hsl(var(--theme-border))] p-3 space-y-2\">\n        {/* Title and actions */}\n        <div className=\"flex items-center gap-2\">\n          <input\n            ref={titleRef}\n            value={localTitle}\n            onChange={handleTitleChange}\n            placeholder=\"Untitled\"\n            className={cn(\n              'flex-1 text-lg font-semibold bg-transparent border-none outline-none',\n              'text-[hsl(var(--theme-foreground))]',\n              'placeholder-[hsl(var(--theme-muted-foreground))]'\n            )}\n            style={{ fontFamily: 'var(--theme-font-heading)' }}\n          />\n\n          {/* View mode toggle */}\n          <div className=\"flex items-center gap-1 p-1 rounded-lg bg-[hsl(var(--theme-muted))]\">\n            <button\n              onClick={() => setMode('edit')}\n              className={cn(\n                'p-1.5 rounded transition-colors',\n                mode === 'edit'\n                  ? 'bg-[hsl(var(--theme-card))] text-[hsl(var(--theme-foreground))]'\n                  : 'text-[hsl(var(--theme-muted-foreground))] hover:text-[hsl(var(--theme-foreground))]'\n              )}\n              title=\"Edit mode\"\n              aria-label=\"Switch to edit mode\"\n              aria-pressed={mode === 'edit'}\n            >\n              <EyeOff className=\"w-4 h-4\" aria-hidden=\"true\" />\n            </button>\n            <button\n              onClick={() => setMode('split')}\n              className={cn(\n                'p-1.5 rounded transition-colors',\n                mode === 'split'\n                  ? 'bg-[hsl(var(--theme-card))] text-[hsl(var(--theme-foreground))]'\n                  : 'text-[hsl(var(--theme-muted-foreground))] hover:text-[hsl(var(--theme-foreground))]'\n              )}\n              title=\"Split view\"\n              aria-label=\"Switch to split view\"\n              aria-pressed={mode === 'split'}\n            >\n              <div className=\"w-4 h-4 flex gap-0.5\" aria-hidden=\"true\">\n                <div className=\"w-1.5 h-full bg-current rounded-sm\" />\n                <div className=\"w-1.5 h-full bg-current rounded-sm opacity-50\" />\n              </div>\n            </button>\n            <button\n              onClick={() => setMode('preview')}\n              className={cn(\n                'p-1.5 rounded transition-colors',\n                mode === 'preview'\n                  ? 'bg-[hsl(var(--theme-card))] text-[hsl(var(--theme-foreground))]'\n                  : 'text-[hsl(var(--theme-muted-foreground))] hover:text-[hsl(var(--theme-foreground))]'\n              )}\n              title=\"Preview mode\"\n              aria-label=\"Switch to preview mode\"\n              aria-pressed={mode === 'preview'}\n            >\n              <Eye className=\"w-4 h-4\" aria-hidden=\"true\" />\n            </button>\n          </div>\n\n          {/* Pin button */}\n          <button\n            onClick={() => togglePinNote(note.id)}\n            className={cn(\n              'p-2 rounded-lg transition-colors',\n              note.isPinned\n                ? 'text-[hsl(var(--theme-primary))] bg-[hsl(var(--theme-primary)/0.1)]'\n                : 'text-[hsl(var(--theme-muted-foreground))] hover:text-[hsl(var(--theme-foreground))] hover:bg-[hsl(var(--theme-muted))]'\n            )}\n            title={note.isPinned ? 'Unpin' : 'Pin'}\n            aria-label={note.isPinned ? 'Unpin note' : 'Pin note'}\n            aria-pressed={note.isPinned}\n          >\n            {note.isPinned ? <Pin className=\"w-4 h-4\" aria-hidden=\"true\" /> : <PinOff className=\"w-4 h-4\" aria-hidden=\"true\" />}\n          </button>\n\n          {/* More menu */}\n          <div className=\"relative\" ref={menuRef}>\n            <button\n              onClick={() => setShowMenu(!showMenu)}\n              className=\"p-2 rounded-lg text-[hsl(var(--theme-muted-foreground))] hover:text-[hsl(var(--theme-foreground))] hover:bg-[hsl(var(--theme-muted))] transition-colors\"\n              aria-label=\"More options\"\n              aria-haspopup=\"true\"\n              aria-expanded={showMenu}\n            >\n              <MoreHorizontal className=\"w-4 h-4\" aria-hidden=\"true\" />\n            </button>\n\n            <AnimatePresence>\n              {showMenu && (\n                <motion.div\n                  initial={{ opacity: 0, scale: 0.95, y: -5 }}\n                  animate={{ opacity: 1, scale: 1, y: 0 }}\n                  exit={{ opacity: 0, scale: 0.95, y: -5 }}\n                  transition={{ duration: 0.15 }}\n                  className=\"absolute right-0 top-full mt-1 z-50 w-48 rounded-lg border border-[hsl(var(--theme-border))] bg-[hsl(var(--theme-card))] shadow-lg overflow-hidden\"\n                >\n                  <button\n                    onClick={handleDuplicate}\n                    className=\"w-full flex items-center gap-2 px-3 py-2 text-sm text-[hsl(var(--theme-foreground))] hover:bg-[hsl(var(--theme-muted))] transition-colors\"\n                  >\n                    <Copy className=\"w-4 h-4\" />\n                    Duplicate\n                  </button>\n\n                  <div className=\"relative\">\n                    <button\n                      onClick={() => setShowMoveMenu(!showMoveMenu)}\n                      className=\"w-full flex items-center justify-between gap-2 px-3 py-2 text-sm text-[hsl(var(--theme-foreground))] hover:bg-[hsl(var(--theme-muted))] transition-colors\"\n                    >\n                      <span className=\"flex items-center gap-2\">\n                        <FolderInput className=\"w-4 h-4\" />\n                        Move to...\n                      </span>\n                      <span className=\"text-[hsl(var(--theme-muted-foreground))]\">&gt;</span>\n                    </button>\n\n                    <AnimatePresence>\n                      {showMoveMenu && (\n                        <motion.div\n                          initial={{ opacity: 0, x: 5 }}\n                          animate={{ opacity: 1, x: 0 }}\n                          exit={{ opacity: 0, x: 5 }}\n                          className=\"absolute left-full top-0 ml-1 w-40 rounded-lg border border-[hsl(var(--theme-border))] bg-[hsl(var(--theme-card))] shadow-lg overflow-hidden\"\n                        >\n                          <button\n                            onClick={() => handleMove(null)}\n                            className={cn(\n                              'w-full flex items-center gap-2 px-3 py-2 text-sm transition-colors',\n                              note.folderId === null\n                                ? 'bg-[hsl(var(--theme-muted))] text-[hsl(var(--theme-foreground))]'\n                                : 'text-[hsl(var(--theme-foreground))] hover:bg-[hsl(var(--theme-muted))]'\n                            )}\n                          >\n                            All Notes\n                          </button>\n                          {folders.map((folder) => (\n                            <button\n                              key={folder.id}\n                              onClick={() => handleMove(folder.id)}\n                              className={cn(\n                                'w-full flex items-center gap-2 px-3 py-2 text-sm transition-colors',\n                                note.folderId === folder.id\n                                  ? 'bg-[hsl(var(--theme-muted))] text-[hsl(var(--theme-foreground))]'\n                                  : 'text-[hsl(var(--theme-foreground))] hover:bg-[hsl(var(--theme-muted))]'\n                              )}\n                            >\n                              <div\n                                className=\"w-3 h-3 rounded-sm\"\n                                style={{ backgroundColor: folder.color }}\n                              />\n                              {folder.name}\n                            </button>\n                          ))}\n                        </motion.div>\n                      )}\n                    </AnimatePresence>\n                  </div>\n\n                  <div className=\"h-px bg-[hsl(var(--theme-border))]\" />\n\n                  <button\n                    onClick={handleDelete}\n                    className=\"w-full flex items-center gap-2 px-3 py-2 text-sm text-red-500 hover:bg-red-500/10 transition-colors\"\n                  >\n                    <Trash2 className=\"w-4 h-4\" />\n                    Delete\n                  </button>\n                </motion.div>\n              )}\n            </AnimatePresence>\n          </div>\n        </div>\n\n        {/* Metadata row */}\n        <div className=\"flex items-center gap-3 text-xs text-[hsl(var(--theme-muted-foreground))]\">\n          {currentFolder && (\n            <span className=\"flex items-center gap-1\">\n              <div\n                className=\"w-2 h-2 rounded-sm\"\n                style={{ backgroundColor: currentFolder.color }}\n              />\n              {currentFolder.name}\n            </span>\n          )}\n          <span className=\"flex items-center gap-1\">\n            <Clock className=\"w-3 h-3\" />\n            {formatDate(note.updatedAt)}\n          </span>\n          {note.tags.length > 0 && (\n            <span className=\"flex items-center gap-1\">\n              <Hash className=\"w-3 h-3\" />\n              {note.tags.join(', ')}\n            </span>\n          )}\n        </div>\n      </div>\n\n      {/* Formatting toolbar */}\n      {(mode === 'edit' || mode === 'split') && (\n        <div\n          ref={toolbarScrollRef}\n          className=\"flex-shrink-0 flex items-center gap-1 px-3 py-2 border-b border-[hsl(var(--theme-border))] bg-[hsl(var(--theme-muted)/0.3)] overflow-x-auto scrollbar-hide\"\n        >\n          <button\n            onClick={() => wrapSelection('**', '**')}\n            className=\"p-1.5 rounded hover:bg-[hsl(var(--theme-muted))] text-[hsl(var(--theme-muted-foreground))] hover:text-[hsl(var(--theme-foreground))] transition-colors\"\n            title=\"Bold (Cmd+B)\"\n          >\n            <Bold className=\"w-4 h-4\" />\n          </button>\n          <button\n            onClick={() => wrapSelection('*', '*')}\n            className=\"p-1.5 rounded hover:bg-[hsl(var(--theme-muted))] text-[hsl(var(--theme-muted-foreground))] hover:text-[hsl(var(--theme-foreground))] transition-colors\"\n            title=\"Italic (Cmd+I)\"\n          >\n            <Italic className=\"w-4 h-4\" />\n          </button>\n          <button\n            onClick={() => wrapSelection('~~', '~~')}\n            className=\"p-1.5 rounded hover:bg-[hsl(var(--theme-muted))] text-[hsl(var(--theme-muted-foreground))] hover:text-[hsl(var(--theme-foreground))] transition-colors\"\n            title=\"Strikethrough\"\n          >\n            <Strikethrough className=\"w-4 h-4\" />\n          </button>\n\n          <div className=\"w-px h-5 bg-[hsl(var(--theme-border))] mx-1\" />\n\n          <button\n            onClick={() => insertAtLineStart('# ')}\n            className=\"p-1.5 rounded hover:bg-[hsl(var(--theme-muted))] text-[hsl(var(--theme-muted-foreground))] hover:text-[hsl(var(--theme-foreground))] transition-colors\"\n            title=\"Heading 1\"\n          >\n            <Heading1 className=\"w-4 h-4\" />\n          </button>\n          <button\n            onClick={() => insertAtLineStart('## ')}\n            className=\"p-1.5 rounded hover:bg-[hsl(var(--theme-muted))] text-[hsl(var(--theme-muted-foreground))] hover:text-[hsl(var(--theme-foreground))] transition-colors\"\n            title=\"Heading 2\"\n          >\n            <Heading2 className=\"w-4 h-4\" />\n          </button>\n\n          <div className=\"w-px h-5 bg-[hsl(var(--theme-border))] mx-1\" />\n\n          <button\n            onClick={() => insertAtLineStart('- ')}\n            className=\"p-1.5 rounded hover:bg-[hsl(var(--theme-muted))] text-[hsl(var(--theme-muted-foreground))] hover:text-[hsl(var(--theme-foreground))] transition-colors\"\n            title=\"Bullet List\"\n          >\n            <List className=\"w-4 h-4\" />\n          </button>\n          <button\n            onClick={() => insertAtLineStart('1. ')}\n            className=\"p-1.5 rounded hover:bg-[hsl(var(--theme-muted))] text-[hsl(var(--theme-muted-foreground))] hover:text-[hsl(var(--theme-foreground))] transition-colors\"\n            title=\"Numbered List\"\n          >\n            <ListOrdered className=\"w-4 h-4\" />\n          </button>\n          <button\n            onClick={() => insertAtLineStart('- [ ] ')}\n            className=\"p-1.5 rounded hover:bg-[hsl(var(--theme-muted))] text-[hsl(var(--theme-muted-foreground))] hover:text-[hsl(var(--theme-foreground))] transition-colors\"\n            title=\"Task List\"\n          >\n            <CheckSquare className=\"w-4 h-4\" />\n          </button>\n          <button\n            onClick={() => insertAtLineStart('> ')}\n            className=\"p-1.5 rounded hover:bg-[hsl(var(--theme-muted))] text-[hsl(var(--theme-muted-foreground))] hover:text-[hsl(var(--theme-foreground))] transition-colors\"\n            title=\"Quote\"\n          >\n            <Quote className=\"w-4 h-4\" />\n          </button>\n\n          <div className=\"w-px h-5 bg-[hsl(var(--theme-border))] mx-1\" />\n\n          <button\n            onClick={() => wrapSelection('`', '`')}\n            className=\"p-1.5 rounded hover:bg-[hsl(var(--theme-muted))] text-[hsl(var(--theme-muted-foreground))] hover:text-[hsl(var(--theme-foreground))] transition-colors\"\n            title=\"Inline Code\"\n          >\n            <Code className=\"w-4 h-4\" />\n          </button>\n          <button\n            onClick={insertCodeBlock}\n            className=\"p-1.5 rounded hover:bg-[hsl(var(--theme-muted))] text-[hsl(var(--theme-muted-foreground))] hover:text-[hsl(var(--theme-foreground))] transition-colors text-xs font-mono\"\n            title=\"Code Block\"\n          >\n            {'</>'}\n          </button>\n\n          <div className=\"w-px h-5 bg-[hsl(var(--theme-border))] mx-1\" />\n\n          <button\n            onClick={() => wrapSelection('[', '](url)')}\n            className=\"p-1.5 rounded hover:bg-[hsl(var(--theme-muted))] text-[hsl(var(--theme-muted-foreground))] hover:text-[hsl(var(--theme-foreground))] transition-colors\"\n            title=\"Link (Cmd+K)\"\n          >\n            <Link2 className=\"w-4 h-4\" />\n          </button>\n          <button\n            onClick={insertImage}\n            className=\"p-1.5 rounded hover:bg-[hsl(var(--theme-muted))] text-[hsl(var(--theme-muted-foreground))] hover:text-[hsl(var(--theme-foreground))] transition-colors\"\n            title=\"Image\"\n          >\n            <Image className=\"w-4 h-4\" />\n          </button>\n        </div>\n      )}\n\n      {/* Editor area */}\n      <div className=\"flex-1 flex min-h-0\">\n        {/* Edit pane */}\n        <AnimatePresence mode=\"wait\">\n          {(mode === 'edit' || mode === 'split') && (\n            <motion.div\n              initial={{ opacity: 0 }}\n              animate={{ opacity: 1 }}\n              exit={{ opacity: 0 }}\n              className={cn(\n                'flex-1 min-w-0 flex flex-col',\n                mode === 'split' && 'border-r border-[hsl(var(--theme-border))]'\n              )}\n            >\n              <textarea\n                ref={contentRef}\n                value={localContent}\n                onChange={handleContentChange}\n                onKeyDown={handleKeyDown}\n                placeholder=\"Start writing with markdown...\"\n                className={cn(\n                  'w-full h-full p-4 bg-transparent border-none outline-none resize-none',\n                  'text-[hsl(var(--theme-foreground))]',\n                  'placeholder-[hsl(var(--theme-muted-foreground))]',\n                  'font-mono text-sm leading-relaxed'\n                )}\n                spellCheck={false}\n              />\n            </motion.div>\n          )}\n        </AnimatePresence>\n\n        {/* Preview pane */}\n        <AnimatePresence mode=\"wait\">\n          {(mode === 'preview' || mode === 'split') && (\n            <motion.div\n              initial={{ opacity: 0 }}\n              animate={{ opacity: 1 }}\n              exit={{ opacity: 0 }}\n              className=\"flex-1 min-w-0 overflow-auto\"\n            >\n              <div className=\"p-4 prose prose-sm dark:prose-invert max-w-none prose-headings:font-[var(--theme-font-heading)] prose-headings:text-[hsl(var(--theme-foreground))] prose-p:text-[hsl(var(--theme-foreground))] prose-a:text-[hsl(var(--theme-primary))] prose-code:text-[hsl(var(--theme-primary))] prose-code:bg-[hsl(var(--theme-muted))] prose-code:px-1 prose-code:py-0.5 prose-code:rounded prose-pre:bg-[hsl(var(--theme-muted))] prose-pre:border prose-pre:border-[hsl(var(--theme-border))]\">\n                {localContent ? (\n                  <ReactMarkdown>{localContent}</ReactMarkdown>\n                ) : (\n                  <p className=\"text-[hsl(var(--theme-muted-foreground))] italic\">\n                    Nothing to preview yet...\n                  </p>\n                )}\n              </div>\n            </motion.div>\n          )}\n        </AnimatePresence>\n      </div>\n    </div>\n  );\n}\n","'use client';\n\nimport { useRef, useEffect, useCallback } from 'react';\nimport { Search, X, Command } from 'lucide-react';\nimport { useNotes } from '@/context/NotesContext';\nimport { cn } from '@/lib/utils';\n\ninterface NotesSearchProps {\n  className?: string;\n}\n\nexport function NotesSearch({ className }: NotesSearchProps) {\n  const { searchQuery, setSearchQuery } = useNotes();\n  const inputRef = useRef<HTMLInputElement>(null);\n\n  // Keyboard shortcut: Cmd/Ctrl + / to focus search (K is reserved for global command palette)\n  useEffect(() => {\n    const handleKeyDown = (e: KeyboardEvent) => {\n      if ((e.metaKey || e.ctrlKey) && e.key === '/') {\n        e.preventDefault();\n        inputRef.current?.focus();\n      }\n    };\n\n    document.addEventListener('keydown', handleKeyDown);\n    return () => document.removeEventListener('keydown', handleKeyDown);\n  }, []);\n\n  const handleClear = useCallback(() => {\n    setSearchQuery('');\n    inputRef.current?.focus();\n  }, [setSearchQuery]);\n\n  return (\n    <div className={cn('relative', className)}>\n      <div className=\"absolute left-3 top-1/2 -translate-y-1/2 pointer-events-none\">\n        <Search className=\"w-4 h-4 text-[hsl(var(--theme-muted-foreground))]\" />\n      </div>\n\n      <input\n        ref={inputRef}\n        type=\"text\"\n        value={searchQuery}\n        onChange={(e) => setSearchQuery(e.target.value)}\n        placeholder=\"Search notes...\"\n        className={cn(\n          'w-full pl-9 pr-16 py-2 rounded-lg',\n          'bg-[hsl(var(--theme-muted))]',\n          'border border-transparent',\n          'text-sm text-[hsl(var(--theme-foreground))]',\n          'placeholder-[hsl(var(--theme-muted-foreground))]',\n          'outline-none focus:border-[hsl(var(--theme-primary))]',\n          'transition-colors'\n        )}\n      />\n\n      <div className=\"absolute right-2 top-1/2 -translate-y-1/2 flex items-center gap-1\">\n        {searchQuery && (\n          <button\n            onClick={handleClear}\n            className=\"p-1 rounded hover:bg-[hsl(var(--theme-background))] text-[hsl(var(--theme-muted-foreground))] hover:text-[hsl(var(--theme-foreground))] transition-colors\"\n          >\n            <X className=\"w-3.5 h-3.5\" />\n          </button>\n        )}\n        <kbd className=\"hidden sm:flex items-center gap-0.5 px-1.5 py-0.5 text-[10px] font-medium text-[hsl(var(--theme-muted-foreground))] bg-[hsl(var(--theme-background))] border border-[hsl(var(--theme-border))] rounded\">\n          <Command className=\"w-2.5 h-2.5\" />K\n        </kbd>\n      </div>\n    </div>\n  );\n}\n","'use client';\n\nimport { useState, useRef, useEffect, useCallback } from 'react';\nimport { motion, AnimatePresence } from 'framer-motion';\nimport { X, Zap, FolderInput, ChevronDown } from 'lucide-react';\nimport { useNotes } from '@/context/NotesContext';\nimport { cn } from '@/lib/utils';\n\nexport function QuickCaptureModal() {\n  const { isQuickCaptureOpen, closeQuickCapture, quickCapture, folders } = useNotes();\n  const [content, setContent] = useState('');\n  const [selectedFolderId, setSelectedFolderId] = useState<string | null>('inbox');\n  const [showFolderPicker, setShowFolderPicker] = useState(false);\n  const textareaRef = useRef<HTMLTextAreaElement>(null);\n  const modalRef = useRef<HTMLDivElement>(null);\n\n  // Focus textarea when modal opens\n  useEffect(() => {\n    if (isQuickCaptureOpen && textareaRef.current) {\n      setTimeout(() => textareaRef.current?.focus(), 100);\n    }\n  }, [isQuickCaptureOpen]);\n\n  // Reset state when modal closes\n  useEffect(() => {\n    if (!isQuickCaptureOpen) {\n      setContent('');\n      setSelectedFolderId('inbox');\n      setShowFolderPicker(false);\n    }\n  }, [isQuickCaptureOpen]);\n\n  // Handle escape to close\n  useEffect(() => {\n    const handleKeyDown = (e: KeyboardEvent) => {\n      if (e.key === 'Escape' && isQuickCaptureOpen) {\n        closeQuickCapture();\n      }\n    };\n    document.addEventListener('keydown', handleKeyDown);\n    return () => document.removeEventListener('keydown', handleKeyDown);\n  }, [isQuickCaptureOpen, closeQuickCapture]);\n\n  const handleSubmit = useCallback(() => {\n    if (content.trim()) {\n      quickCapture(content, selectedFolderId);\n      setContent('');\n    }\n  }, [content, selectedFolderId, quickCapture]);\n\n  const handleKeyDown = useCallback(\n    (e: React.KeyboardEvent) => {\n      // Cmd/Ctrl + Enter to save\n      if ((e.metaKey || e.ctrlKey) && e.key === 'Enter') {\n        e.preventDefault();\n        handleSubmit();\n      }\n    },\n    [handleSubmit]\n  );\n\n  const selectedFolder = folders.find((f) => f.id === selectedFolderId);\n\n  return (\n    <AnimatePresence>\n      {isQuickCaptureOpen && (\n        <motion.div\n          initial={{ opacity: 0 }}\n          animate={{ opacity: 1 }}\n          exit={{ opacity: 0 }}\n          transition={{ duration: 0.2 }}\n          className=\"fixed inset-0 z-[100] flex items-start justify-center pt-[15vh] px-4\"\n          onClick={closeQuickCapture}\n        >\n          {/* Backdrop */}\n          <motion.div\n            initial={{ opacity: 0 }}\n            animate={{ opacity: 1 }}\n            exit={{ opacity: 0 }}\n            className=\"absolute inset-0 bg-black/50 backdrop-blur-sm\"\n          />\n\n          {/* Modal */}\n          <motion.div\n            ref={modalRef}\n            initial={{ opacity: 0, scale: 0.95, y: -20 }}\n            animate={{ opacity: 1, scale: 1, y: 0 }}\n            exit={{ opacity: 0, scale: 0.95, y: -20 }}\n            transition={{ duration: 0.2, ease: 'easeOut' }}\n            onClick={(e) => e.stopPropagation()}\n            className=\"relative w-full max-w-lg rounded-2xl border border-[hsl(var(--theme-border))] bg-[hsl(var(--theme-card))] shadow-2xl overflow-hidden\"\n          >\n            {/* Header */}\n            <div className=\"flex items-center justify-between px-4 py-3 border-b border-[hsl(var(--theme-border))]\">\n              <div className=\"flex items-center gap-2\">\n                <div className=\"w-8 h-8 rounded-lg bg-[hsl(var(--theme-primary)/0.1)] flex items-center justify-center\">\n                  <Zap className=\"w-4 h-4 text-[hsl(var(--theme-primary))]\" />\n                </div>\n                <span\n                  className=\"font-semibold text-[hsl(var(--theme-foreground))]\"\n                  style={{ fontFamily: 'var(--theme-font-heading)' }}\n                >\n                  Quick Capture\n                </span>\n              </div>\n              <button\n                onClick={closeQuickCapture}\n                className=\"p-1.5 rounded-lg hover:bg-[hsl(var(--theme-muted))] text-[hsl(var(--theme-muted-foreground))] hover:text-[hsl(var(--theme-foreground))] transition-colors\"\n              >\n                <X className=\"w-4 h-4\" />\n              </button>\n            </div>\n\n            {/* Content */}\n            <div className=\"p-4\">\n              <textarea\n                ref={textareaRef}\n                value={content}\n                onChange={(e) => setContent(e.target.value)}\n                onKeyDown={handleKeyDown}\n                placeholder=\"Capture your thought... (supports markdown)\"\n                rows={4}\n                className={cn(\n                  'w-full px-3 py-2.5 rounded-lg resize-none',\n                  'bg-[hsl(var(--theme-muted))]',\n                  'border border-transparent',\n                  'text-sm text-[hsl(var(--theme-foreground))]',\n                  'placeholder-[hsl(var(--theme-muted-foreground))]',\n                  'outline-none focus:border-[hsl(var(--theme-primary))]',\n                  'transition-colors'\n                )}\n              />\n            </div>\n\n            {/* Footer */}\n            <div className=\"flex items-center justify-between px-4 py-3 border-t border-[hsl(var(--theme-border))] bg-[hsl(var(--theme-muted)/0.5)]\">\n              {/* Folder picker */}\n              <div className=\"relative\">\n                <button\n                  onClick={() => setShowFolderPicker(!showFolderPicker)}\n                  className=\"flex items-center gap-2 px-2 py-1.5 rounded-lg hover:bg-[hsl(var(--theme-muted))] text-sm text-[hsl(var(--theme-muted-foreground))] transition-colors\"\n                >\n                  <FolderInput className=\"w-4 h-4\" />\n                  {selectedFolder ? (\n                    <span className=\"flex items-center gap-1.5\">\n                      <div\n                        className=\"w-2.5 h-2.5 rounded-sm\"\n                        style={{ backgroundColor: selectedFolder.color }}\n                      />\n                      {selectedFolder.name}\n                    </span>\n                  ) : (\n                    'Inbox'\n                  )}\n                  <ChevronDown className=\"w-3.5 h-3.5\" />\n                </button>\n\n                <AnimatePresence>\n                  {showFolderPicker && (\n                    <motion.div\n                      initial={{ opacity: 0, y: 5 }}\n                      animate={{ opacity: 1, y: 0 }}\n                      exit={{ opacity: 0, y: 5 }}\n                      className=\"absolute bottom-full left-0 mb-1 w-48 rounded-lg border border-[hsl(var(--theme-border))] bg-[hsl(var(--theme-card))] shadow-lg overflow-hidden z-10\"\n                    >\n                      {folders.map((folder) => (\n                        <button\n                          key={folder.id}\n                          onClick={() => {\n                            setSelectedFolderId(folder.id);\n                            setShowFolderPicker(false);\n                          }}\n                          className={cn(\n                            'w-full flex items-center gap-2 px-3 py-2 text-sm transition-colors',\n                            selectedFolderId === folder.id\n                              ? 'bg-[hsl(var(--theme-muted))] text-[hsl(var(--theme-foreground))]'\n                              : 'text-[hsl(var(--theme-foreground))] hover:bg-[hsl(var(--theme-muted))]'\n                          )}\n                        >\n                          <div\n                            className=\"w-3 h-3 rounded-sm\"\n                            style={{ backgroundColor: folder.color }}\n                          />\n                          {folder.name}\n                        </button>\n                      ))}\n                    </motion.div>\n                  )}\n                </AnimatePresence>\n              </div>\n\n              {/* Actions */}\n              <div className=\"flex items-center gap-2\">\n                <span className=\"hidden sm:block text-[10px] text-[hsl(var(--theme-muted-foreground))]\">\n                  ‚åò + Enter to save\n                </span>\n                <button\n                  onClick={handleSubmit}\n                  disabled={!content.trim()}\n                  className={cn(\n                    'px-4 py-1.5 rounded-lg text-sm font-medium transition-colors',\n                    'bg-[hsl(var(--theme-primary))] text-white',\n                    'hover:bg-[hsl(var(--theme-primary)/0.9)]',\n                    'disabled:opacity-50 disabled:cursor-not-allowed'\n                  )}\n                >\n                  Save\n                </button>\n              </div>\n            </div>\n          </motion.div>\n        </motion.div>\n      )}\n    </AnimatePresence>\n  );\n}\n","'use client';\n\nimport { useState, useEffect, useCallback } from 'react';\nimport { motion, AnimatePresence } from 'framer-motion';\nimport { springs } from '@/components/motion/config';\nimport {\n  Menu,\n  X,\n  ChevronLeft,\n  FileText,\n  Zap,\n  Sun,\n  Moon,\n  ArrowLeft,\n} from 'lucide-react';\nimport Link from 'next/link';\nimport { useTheme } from 'next-themes';\nimport { useDesignTheme } from '@/context/DesignThemeContext';\nimport { NotesProvider, useNotes } from '@/context/NotesContext';\nimport { NotesFolderTree } from './NotesFolderTree';\nimport { NotesList } from './NotesList';\nimport { NoteEditor } from './NoteEditor';\nimport { NotesSearch } from './NotesSearch';\nimport { QuickCaptureModal } from './QuickCaptureModal';\nimport { cn } from '@/lib/utils';\nimport '@/lib/themes/themes.css';\n\n// Mobile view states\ntype MobileView = 'folders' | 'list' | 'editor';\n\nfunction NotesAppContent() {\n  const { designTheme } = useDesignTheme();\n  const { resolvedTheme, setTheme } = useTheme();\n  // Use resolvedTheme which gives the actual theme (\"light\" or \"dark\")\n  // instead of theme which could be \"system\"\n  const isDarkMode = resolvedTheme === 'dark';\n\n  const { selectedNote, selectedNoteId, openQuickCapture, createNote, selectNote } = useNotes();\n\n  // Mobile state\n  const [isMobile, setIsMobile] = useState(false);\n  const [mobileView, setMobileView] = useState<MobileView>('list');\n  const [showSidebar, setShowSidebar] = useState(false);\n\n  // Detect mobile\n  useEffect(() => {\n    const checkMobile = () => {\n      const mobile = window.innerWidth < 768;\n      setIsMobile(mobile);\n      if (!mobile) {\n        setShowSidebar(false);\n      }\n    };\n\n    checkMobile();\n    window.addEventListener('resize', checkMobile);\n    return () => window.removeEventListener('resize', checkMobile);\n  }, []);\n\n  // Auto-switch to editor on mobile when note selected\n  useEffect(() => {\n    if (isMobile && selectedNoteId) {\n      setMobileView('editor');\n    }\n  }, [isMobile, selectedNoteId]);\n\n  // Global keyboard shortcuts\n  useEffect(() => {\n    const handleKeyDown = (e: KeyboardEvent) => {\n      // Cmd/Ctrl + Shift + N for quick capture\n      if ((e.metaKey || e.ctrlKey) && e.shiftKey && e.key === 'n') {\n        e.preventDefault();\n        openQuickCapture();\n      }\n\n      // Cmd/Ctrl + N for new note\n      if ((e.metaKey || e.ctrlKey) && !e.shiftKey && e.key === 'n') {\n        e.preventDefault();\n        createNote();\n      }\n\n      // Escape to go back on mobile\n      if (e.key === 'Escape' && isMobile && mobileView === 'editor') {\n        setMobileView('list');\n        selectNote(null);\n      }\n    };\n\n    document.addEventListener('keydown', handleKeyDown);\n    return () => document.removeEventListener('keydown', handleKeyDown);\n  }, [openQuickCapture, createNote, isMobile, mobileView, selectNote]);\n\n  const handleMobileBack = useCallback(() => {\n    if (mobileView === 'editor') {\n      setMobileView('list');\n    } else if (mobileView === 'list' && showSidebar) {\n      setShowSidebar(false);\n    }\n  }, [mobileView, showSidebar]);\n\n  // IMPORTANT: .dark must be on an ANCESTOR of [data-design-theme] for CSS selectors to work\n  // CSS: .dark [data-design-theme=\"theme\"] { ... } requires ancestor-descendant relationship\n  return (\n    <div className={isDarkMode ? 'dark' : ''}>\n      <div\n        data-design-theme={designTheme}\n        className=\"min-h-screen flex flex-col transition-colors duration-300\"\n        style={{\n          backgroundColor: 'hsl(var(--theme-background))',\n          color: 'hsl(var(--theme-foreground))',\n          fontFamily: 'var(--theme-font)',\n        }}\n      >\n      {/* Header */}\n      <motion.header\n        initial={{ opacity: 0, y: -20 }}\n        animate={{ opacity: 1, y: 0 }}\n        className=\"flex-shrink-0 h-14 border-b border-[hsl(var(--theme-border))] backdrop-blur-xl\"\n        style={{ backgroundColor: 'hsl(var(--theme-background) / 0.8)' }}\n      >\n        <div className=\"h-full max-w-[1600px] mx-auto px-4 flex items-center justify-between\">\n          {/* Left side */}\n          <div className=\"flex items-center gap-3\">\n            {/* Mobile menu button */}\n            {isMobile && (\n              <button\n                onClick={() => {\n                  if (mobileView === 'editor') {\n                    setMobileView('list');\n                  } else {\n                    setShowSidebar(!showSidebar);\n                  }\n                }}\n                className=\"p-2 rounded-lg hover:bg-[hsl(var(--theme-muted))] transition-colors\"\n              >\n                {mobileView === 'editor' ? (\n                  <ChevronLeft className=\"w-5 h-5\" />\n                ) : showSidebar ? (\n                  <X className=\"w-5 h-5\" />\n                ) : (\n                  <Menu className=\"w-5 h-5\" />\n                )}\n              </button>\n            )}\n\n            {/* Back to home */}\n            <Link\n              href=\"/\"\n              className=\"hidden sm:inline-flex items-center gap-2 text-sm text-[hsl(var(--theme-muted-foreground))] hover:text-[hsl(var(--theme-foreground))] transition-colors\"\n            >\n              <ArrowLeft className=\"w-4 h-4\" />\n              <span>Back</span>\n            </Link>\n\n            {!isMobile && (\n              <div className=\"w-px h-6 bg-[hsl(var(--theme-border))]\" />\n            )}\n\n            {/* App icon and title */}\n            <div className=\"flex items-center gap-2\">\n              <div\n                className=\"w-8 h-8 rounded-lg flex items-center justify-center\"\n                style={{\n                  background:\n                    'linear-gradient(135deg, hsl(var(--theme-primary)), hsl(var(--theme-accent)))',\n                }}\n              >\n                <FileText className=\"w-4 h-4 text-white\" />\n              </div>\n              <h1\n                className=\"text-lg font-semibold text-[hsl(var(--theme-foreground))]\"\n                style={{ fontFamily: 'var(--theme-font-heading)' }}\n              >\n                Notes\n              </h1>\n            </div>\n          </div>\n\n          {/* Center - Search (hidden on mobile) */}\n          {!isMobile && (\n            <div className=\"flex-1 max-w-md mx-4\">\n              <NotesSearch />\n            </div>\n          )}\n\n          {/* Right side */}\n          <div className=\"flex items-center gap-2\">\n            {/* Quick capture button */}\n            <button\n              onClick={openQuickCapture}\n              className=\"flex items-center gap-2 px-3 py-1.5 rounded-lg bg-[hsl(var(--theme-primary))] text-white hover:bg-[hsl(var(--theme-primary)/0.9)] transition-colors\"\n            >\n              <Zap className=\"w-4 h-4\" />\n              <span className=\"hidden sm:inline text-sm\">Capture</span>\n            </button>\n\n            {/* Theme toggle */}\n            <button\n              onClick={() => setTheme(isDarkMode ? 'light' : 'dark')}\n              className=\"p-2 rounded-lg hover:bg-[hsl(var(--theme-muted))] transition-colors\"\n              title={isDarkMode ? 'Light mode' : 'Dark mode'}\n            >\n              {isDarkMode ? (\n                <Sun className=\"w-5 h-5\" />\n              ) : (\n                <Moon className=\"w-5 h-5\" />\n              )}\n            </button>\n          </div>\n        </div>\n      </motion.header>\n\n      {/* Mobile search */}\n      {isMobile && mobileView !== 'editor' && (\n        <div className=\"flex-shrink-0 px-4 py-2 border-b border-[hsl(var(--theme-border))]\">\n          <NotesSearch />\n        </div>\n      )}\n\n      {/* Main content */}\n      <div className=\"flex-1 flex min-h-0 relative\">\n        {/* Desktop: 3-column layout */}\n        {!isMobile ? (\n          <>\n            {/* Folders sidebar */}\n            <motion.div\n              initial={{ opacity: 0, x: -20 }}\n              animate={{ opacity: 1, x: 0 }}\n              className=\"w-56 flex-shrink-0 border-r border-[hsl(var(--theme-border))]\"\n            >\n              <NotesFolderTree />\n            </motion.div>\n\n            {/* Notes list */}\n            <motion.div\n              initial={{ opacity: 0 }}\n              animate={{ opacity: 1 }}\n              transition={{ delay: 0.1 }}\n              className=\"w-72 flex-shrink-0 border-r border-[hsl(var(--theme-border))]\"\n            >\n              <NotesList />\n            </motion.div>\n\n            {/* Editor */}\n            <motion.div\n              initial={{ opacity: 0 }}\n              animate={{ opacity: 1 }}\n              transition={{ delay: 0.2 }}\n              className=\"flex-1 min-w-0\"\n            >\n              {selectedNote ? (\n                <NoteEditor note={selectedNote} />\n              ) : (\n                <div className=\"flex flex-col items-center justify-center h-full text-center p-8\">\n                  <FileText className=\"w-16 h-16 text-[hsl(var(--theme-muted-foreground))] mb-4\" />\n                  <h2\n                    className=\"text-xl font-semibold text-[hsl(var(--theme-foreground))] mb-2\"\n                    style={{ fontFamily: 'var(--theme-font-heading)' }}\n                  >\n                    Select a note\n                  </h2>\n                  <p className=\"text-sm text-[hsl(var(--theme-muted-foreground))] mb-4\">\n                    Choose a note from the list or create a new one\n                  </p>\n                  <div className=\"flex items-center gap-2 text-xs text-[hsl(var(--theme-muted-foreground))]\">\n                    <kbd className=\"px-2 py-1 rounded bg-[hsl(var(--theme-muted))] border border-[hsl(var(--theme-border))]\">\n                      ‚åòN\n                    </kbd>\n                    <span>New note</span>\n                    <span className=\"mx-2\">¬∑</span>\n                    <kbd className=\"px-2 py-1 rounded bg-[hsl(var(--theme-muted))] border border-[hsl(var(--theme-border))]\">\n                      ‚åò‚áßN\n                    </kbd>\n                    <span>Quick capture</span>\n                  </div>\n                </div>\n              )}\n            </motion.div>\n          </>\n        ) : (\n          /* Mobile: Single column with view switching */\n          <>\n            {/* Mobile sidebar overlay */}\n            <AnimatePresence>\n              {showSidebar && (\n                <>\n                  <motion.div\n                    initial={{ opacity: 0 }}\n                    animate={{ opacity: 1 }}\n                    exit={{ opacity: 0 }}\n                    className=\"absolute inset-0 bg-black/30 z-10\"\n                    onClick={() => setShowSidebar(false)}\n                  />\n                  <motion.div\n                    initial={{ x: '-100%' }}\n                    animate={{ x: 0 }}\n                    exit={{ x: '-100%' }}\n                    transition={springs.snappy}\n                    className=\"absolute left-0 top-0 bottom-0 w-64 z-20 bg-[hsl(var(--theme-background))] border-r border-[hsl(var(--theme-border))]\"\n                  >\n                    <NotesFolderTree />\n                  </motion.div>\n                </>\n              )}\n            </AnimatePresence>\n\n            {/* Mobile content */}\n            <AnimatePresence mode=\"wait\">\n              {mobileView === 'list' && (\n                <motion.div\n                  key=\"list\"\n                  initial={{ opacity: 0, x: -20 }}\n                  animate={{ opacity: 1, x: 0 }}\n                  exit={{ opacity: 0, x: -20 }}\n                  transition={springs.snappy}\n                  className=\"flex-1\"\n                >\n                  <NotesList />\n                </motion.div>\n              )}\n\n              {mobileView === 'editor' && selectedNote && (\n                <motion.div\n                  key=\"editor\"\n                  initial={{ opacity: 0, x: 20 }}\n                  animate={{ opacity: 1, x: 0 }}\n                  exit={{ opacity: 0, x: 20 }}\n                  transition={springs.snappy}\n                  className=\"flex-1\"\n                >\n                  <NoteEditor note={selectedNote} />\n                </motion.div>\n              )}\n            </AnimatePresence>\n          </>\n        )}\n      </div>\n\n      {/* Quick Capture Modal */}\n      <QuickCaptureModal />\n      </div>\n    </div>\n  );\n}\n\nexport function NotesApp() {\n  return (\n    <NotesProvider>\n      <NotesAppContent />\n    </NotesProvider>\n  );\n}\n"],"names":[],"mappings":"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"}