{"version":3,"sources":["../../../../src/components/reels/ReelsPlayer.tsx","../../../../src/components/reels/AudioVisualizer.tsx","../../../../src/data/reels.ts","../../../../src/app/reels/page.tsx"],"sourcesContent":["'use client';\n\nimport * as React from 'react';\nimport { motion, AnimatePresence } from 'framer-motion';\nimport {\n  Play,\n  Pause,\n  Volume2,\n  VolumeX,\n  SkipForward,\n  SkipBack,\n} from 'lucide-react';\nimport { cn } from '@/lib/utils';\nimport { type VideoReel } from '@/data/reels';\nimport { AudioVisualizer } from './AudioVisualizer';\n\ninterface ReelsPlayerProps {\n  reels: VideoReel[];\n  initialReelId?: string;\n  className?: string;\n  /** When true, videos loop and reels advance when music ends (not video) */\n  musicFirst?: boolean;\n}\n\nexport function ReelsPlayer({ reels, initialReelId, className, musicFirst = false }: ReelsPlayerProps) {\n  const initialIndex = initialReelId\n    ? reels.findIndex((r) => r.id === initialReelId)\n    : 0;\n  const [currentIndex, setCurrentIndex] = React.useState(Math.max(0, initialIndex));\n  const [isPlaying, setIsPlaying] = React.useState(false);\n  const [isMuted, setIsMuted] = React.useState(false);\n  const [progress, setProgress] = React.useState(0);\n  const [musicProgress, setMusicProgress] = React.useState(0);\n  const [currentTime, setCurrentTime] = React.useState(0);\n  const [duration, setDuration] = React.useState(0);\n\n  const videoRef = React.useRef<HTMLVideoElement>(null);\n  const audioRef = React.useRef<HTMLAudioElement>(null);\n\n  // Audio context refs - lifted here so they persist across reel changes\n  const audioContextRef = React.useRef<AudioContext | null>(null);\n  const analyserRef = React.useRef<AnalyserNode | null>(null);\n  const sourceRef = React.useRef<MediaElementAudioSourceNode | null>(null);\n\n  const currentReel = reels[currentIndex];\n\n  // Set up audio context for visualization (persists across reel changes)\n  const setupAudioContext = React.useCallback(() => {\n    const audio = audioRef.current;\n    if (!audio || audioContextRef.current) return;\n\n    try {\n      const audioContext = new (window.AudioContext || (window as typeof window & { webkitAudioContext: typeof AudioContext }).webkitAudioContext)();\n      audioContextRef.current = audioContext;\n\n      const analyser = audioContext.createAnalyser();\n      analyser.fftSize = 256;\n      analyser.smoothingTimeConstant = 0.8;\n      analyserRef.current = analyser;\n\n      // Only create source once per audio element\n      if (!sourceRef.current) {\n        const source = audioContext.createMediaElementSource(audio);\n        source.connect(analyser);\n        analyser.connect(audioContext.destination);\n        sourceRef.current = source;\n      }\n    } catch (e) {\n      console.error('Audio context error:', e);\n    }\n  }, []);\n\n  // Resume audio context if suspended (browser autoplay policy)\n  const resumeAudioContext = React.useCallback(async () => {\n    if (audioContextRef.current?.state === 'suspended') {\n      try {\n        await audioContextRef.current.resume();\n      } catch (e) {\n        console.error('Failed to resume audio context:', e);\n      }\n    }\n  }, []);\n\n  // Format time helper\n  const formatTime = (time: number) => {\n    if (isNaN(time)) return '0:00';\n    const minutes = Math.floor(time / 60);\n    const seconds = Math.floor(time % 60);\n    return `${minutes}:${seconds.toString().padStart(2, '0')}`;\n  };\n\n  // Sync video and audio playback\n  const syncPlayback = React.useCallback(async (play: boolean) => {\n    const video = videoRef.current;\n    const audio = audioRef.current;\n\n    if (play) {\n      try {\n        // Set up audio context on first play (requires user interaction)\n        setupAudioContext();\n        await resumeAudioContext();\n\n        if (video?.src) await video.play();\n        if (audio?.src) await audio.play();\n        setIsPlaying(true);\n      } catch {\n        setIsPlaying(false);\n      }\n    } else {\n      video?.pause();\n      audio?.pause();\n      setIsPlaying(false);\n    }\n  }, [setupAudioContext, resumeAudioContext]);\n\n  // Toggle play/pause\n  const togglePlay = React.useCallback(() => {\n    syncPlayback(!isPlaying);\n  }, [isPlaying, syncPlayback]);\n\n  // Toggle mute\n  const toggleMute = React.useCallback(() => {\n    if (videoRef.current) videoRef.current.muted = !isMuted;\n    if (audioRef.current) audioRef.current.muted = !isMuted;\n    setIsMuted(!isMuted);\n  }, [isMuted]);\n\n  // Navigate to next reel\n  const goToNext = React.useCallback(() => {\n    const nextIndex = currentIndex < reels.length - 1 ? currentIndex + 1 : 0;\n    setCurrentIndex(nextIndex);\n    setProgress(0);\n    setMusicProgress(0);\n    setCurrentTime(0);\n  }, [currentIndex, reels.length]);\n\n  // Navigate to previous reel\n  const goToPrevious = React.useCallback(() => {\n    const prevIndex = currentIndex > 0 ? currentIndex - 1 : reels.length - 1;\n    setCurrentIndex(prevIndex);\n    setProgress(0);\n    setMusicProgress(0);\n    setCurrentTime(0);\n  }, [currentIndex, reels.length]);\n\n  // Handle video time updates\n  const handleVideoTimeUpdate = React.useCallback(() => {\n    if (videoRef.current && videoRef.current.duration) {\n      setProgress((videoRef.current.currentTime / videoRef.current.duration) * 100);\n    }\n  }, []);\n\n  // Handle audio time updates\n  const handleAudioTimeUpdate = React.useCallback(() => {\n    if (audioRef.current && audioRef.current.duration) {\n      setMusicProgress((audioRef.current.currentTime / audioRef.current.duration) * 100);\n      setCurrentTime(audioRef.current.currentTime);\n      setDuration(audioRef.current.duration);\n    }\n  }, []);\n\n  // Handle video end\n  const handleVideoEnded = React.useCallback(() => {\n    if (musicFirst) {\n      if (videoRef.current) {\n        videoRef.current.currentTime = 0;\n        videoRef.current.play();\n      }\n      return;\n    }\n    goToNext();\n  }, [goToNext, musicFirst]);\n\n  // Handle audio end\n  const handleAudioEnded = React.useCallback(() => {\n    goToNext();\n  }, [goToNext]);\n\n  // Keyboard navigation\n  React.useEffect(() => {\n    const handleKeyDown = (e: KeyboardEvent) => {\n      switch (e.key) {\n        case 'ArrowUp':\n        case 'ArrowLeft':\n          e.preventDefault();\n          goToPrevious();\n          break;\n        case 'ArrowDown':\n        case 'ArrowRight':\n          e.preventDefault();\n          goToNext();\n          break;\n        case ' ':\n          e.preventDefault();\n          togglePlay();\n          break;\n        case 'm':\n          e.preventDefault();\n          toggleMute();\n          break;\n      }\n    };\n\n    window.addEventListener('keydown', handleKeyDown);\n    return () => window.removeEventListener('keydown', handleKeyDown);\n  }, [goToNext, goToPrevious, togglePlay, toggleMute]);\n\n  // Touch navigation\n  const touchStartY = React.useRef<number>(0);\n  const handleTouchStart = (e: React.TouchEvent) => {\n    touchStartY.current = e.touches[0].clientY;\n  };\n  const handleTouchEnd = (e: React.TouchEvent) => {\n    const deltaY = touchStartY.current - e.changedTouches[0].clientY;\n    if (Math.abs(deltaY) > 50) {\n      if (deltaY > 0) goToNext();\n      else goToPrevious();\n    }\n  };\n\n  // Auto-play on reel change\n  React.useEffect(() => {\n    const video = videoRef.current;\n    const audio = audioRef.current;\n\n    if (video) {\n      video.load();\n      video.currentTime = 0;\n    }\n    if (audio) {\n      audio.load();\n      audio.currentTime = 0;\n    }\n\n    const timer = setTimeout(() => {\n      syncPlayback(true);\n    }, 100);\n\n    return () => clearTimeout(timer);\n  }, [currentIndex, syncPlayback]);\n\n  if (!currentReel) return null;\n\n  return (\n    <motion.div\n      className={cn(\n        'w-[300px] md:w-[340px] bg-gradient-to-b from-[#1a1a1a] to-[#0d0d0d] rounded-[32px] p-4 shadow-[0_25px_50px_-12px_rgba(0,0,0,0.6)] border border-white/5',\n        className\n      )}\n      initial={{ y: 20, opacity: 0 }}\n      animate={{ y: 0, opacity: 1 }}\n      transition={{ duration: 0.6, ease: 'easeOut' }}\n    >\n      {/* Screen */}\n      <div\n        className=\"bg-black rounded-2xl overflow-hidden relative aspect-[9/14] shadow-inner border border-white/5\"\n        onTouchStart={handleTouchStart}\n        onTouchEnd={handleTouchEnd}\n      >\n        {/* Video/Visualizer Layer */}\n        <AnimatePresence mode=\"wait\">\n          <motion.div\n            key={currentReel.id}\n            initial={{ opacity: 0, scale: 0.98 }}\n            animate={{ opacity: 1, scale: 1 }}\n            exit={{ opacity: 0, scale: 0.98 }}\n            transition={{ duration: 0.3 }}\n            className=\"absolute inset-0\"\n          >\n            {currentReel.videoSrc ? (\n              <video\n                ref={videoRef}\n                src={currentReel.videoSrc}\n                poster={currentReel.thumbnail}\n                className=\"w-full h-full object-cover\"\n                loop={musicFirst || reels.length === 1}\n                muted={isMuted}\n                playsInline\n                onTimeUpdate={handleVideoTimeUpdate}\n                onEnded={handleVideoEnded}\n                onClick={togglePlay}\n              />\n            ) : (\n              <div className=\"w-full h-full cursor-pointer relative\" onClick={togglePlay}>\n                <AudioVisualizer\n                  analyserRef={analyserRef}\n                  isPlaying={isPlaying}\n                  className=\"absolute inset-0\"\n                />\n              </div>\n            )}\n          </motion.div>\n        </AnimatePresence>\n\n        {/* Background Audio */}\n        {currentReel.track && (\n          <audio\n            ref={audioRef}\n            src={currentReel.track.audioSrc}\n            loop={!musicFirst}\n            muted={isMuted}\n            onTimeUpdate={handleAudioTimeUpdate}\n            onEnded={musicFirst ? handleAudioEnded : undefined}\n          />\n        )}\n\n        {/* Track Info Overlay */}\n        <div className=\"absolute bottom-0 left-0 right-0 bg-gradient-to-t from-black/90 via-black/50 to-transparent p-4 pt-12\">\n          {currentReel.track && (\n            <div className=\"flex items-center gap-3\">\n              <div className={cn(\n                'w-12 h-12 rounded-lg overflow-hidden shadow-lg ring-1 ring-white/10 flex-shrink-0',\n                isPlaying && 'animate-pulse'\n              )}>\n                <img\n                  src={currentReel.track.albumArt}\n                  alt={currentReel.track.title}\n                  className=\"w-full h-full object-cover\"\n                />\n              </div>\n              <div className=\"flex-1 min-w-0\">\n                <p className=\"text-white font-mono text-sm font-medium truncate\">\n                  {currentReel.track.title}\n                </p>\n                <p className=\"text-white/60 font-mono text-xs truncate\">\n                  {currentReel.track.artist}\n                </p>\n              </div>\n            </div>\n          )}\n\n          {/* Progress Bar */}\n          <div className=\"mt-3\">\n            <div className=\"h-1 bg-white/20 rounded-full overflow-hidden\">\n              <motion.div\n                className=\"h-full bg-gradient-to-r from-rose-500 to-orange-400 rounded-full\"\n                style={{ width: `${musicFirst ? musicProgress : progress}%` }}\n                transition={{ duration: 0.1 }}\n              />\n            </div>\n            <div className=\"flex justify-between text-[10px] text-white/40 mt-1 font-mono\">\n              <span>{formatTime(currentTime)}</span>\n              <span>{formatTime(duration)}</span>\n            </div>\n          </div>\n        </div>\n\n        {/* Center Play Button (only when paused) */}\n        <AnimatePresence>\n          {!isPlaying && (\n            <motion.button\n              initial={{ opacity: 0, scale: 0.8 }}\n              animate={{ opacity: 1, scale: 1 }}\n              exit={{ opacity: 0, scale: 0.8 }}\n              className=\"absolute inset-0 flex items-center justify-center\"\n              onClick={togglePlay}\n            >\n              <div className=\"w-16 h-16 rounded-full bg-white/10 backdrop-blur-md flex items-center justify-center border border-white/20\">\n                <Play className=\"w-7 h-7 text-white ml-1\" />\n              </div>\n            </motion.button>\n          )}\n        </AnimatePresence>\n\n        {/* Track Counter */}\n        <div className=\"absolute top-3 right-3 text-xs text-white/50 font-mono bg-black/30 px-2 py-1 rounded-full backdrop-blur-sm\">\n          {currentIndex + 1} / {reels.length}\n        </div>\n      </div>\n\n      {/* Control Wheel - iPod style */}\n      <div className=\"relative w-[160px] md:w-[180px] h-[160px] md:h-[180px] mx-auto mt-4\">\n        {/* Outer wheel */}\n        <div className=\"absolute inset-0 rounded-full bg-gradient-to-b from-zinc-800 to-zinc-900 shadow-lg border border-white/10\">\n          {/* Mute button (top) */}\n          <button\n            onClick={toggleMute}\n            className=\"absolute top-2 left-1/2 -translate-x-1/2 text-zinc-400 hover:text-white transition-colors p-2\"\n            title={isMuted ? 'Unmute' : 'Mute'}\n          >\n            {isMuted ? (\n              <VolumeX className=\"w-5 h-5\" />\n            ) : (\n              <Volume2 className=\"w-5 h-5\" />\n            )}\n          </button>\n\n          {/* Previous button (left) */}\n          <button\n            onClick={goToPrevious}\n            className=\"absolute left-2 top-1/2 -translate-y-1/2 text-zinc-400 hover:text-white transition-colors p-2\"\n            title=\"Previous\"\n          >\n            <SkipBack className=\"w-5 h-5\" />\n          </button>\n\n          {/* Next button (right) */}\n          <button\n            onClick={goToNext}\n            className=\"absolute right-2 top-1/2 -translate-y-1/2 text-zinc-400 hover:text-white transition-colors p-2\"\n            title=\"Next\"\n          >\n            <SkipForward className=\"w-5 h-5\" />\n          </button>\n\n          {/* Play/Pause indicator (bottom) */}\n          <div className=\"absolute bottom-3 left-1/2 -translate-x-1/2 text-[10px] font-mono text-zinc-500 uppercase tracking-wider\">\n            {isPlaying ? 'Playing' : 'Paused'}\n          </div>\n        </div>\n\n        {/* Center button - Play/Pause */}\n        <button\n          onClick={togglePlay}\n          className=\"absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 w-[60px] md:w-[70px] h-[60px] md:h-[70px] rounded-full bg-gradient-to-b from-zinc-700 to-zinc-800 shadow-md hover:from-zinc-600 hover:to-zinc-700 transition-all active:shadow-inner flex items-center justify-center border border-white/10\"\n        >\n          {isPlaying ? (\n            <Pause className=\"w-6 h-6 text-white\" />\n          ) : (\n            <Play className=\"w-6 h-6 text-white ml-0.5\" />\n          )}\n        </button>\n      </div>\n    </motion.div>\n  );\n}\n","'use client';\n\nimport * as React from 'react';\nimport { cn } from '@/lib/utils';\n\n// Vertex shader - simple passthrough\nconst vertexShaderSource = `\n  attribute vec2 a_position;\n  void main() {\n    gl_Position = vec4(a_position, 0.0, 1.0);\n  }\n`;\n\n// Fragment shader - psychedelic audio-reactive visualization\nconst fragmentShaderSource = `\n  precision highp float;\n\n  uniform vec2 u_resolution;\n  uniform float u_time;\n  uniform float u_bass;\n  uniform float u_mid;\n  uniform float u_treble;\n  uniform float u_energy;\n  uniform float u_waveform[64];\n\n  #define PI 3.14159265359\n\n  // Noise functions\n  float random(vec2 st) {\n    return fract(sin(dot(st.xy, vec2(12.9898, 78.233))) * 43758.5453123);\n  }\n\n  float noise(vec2 st) {\n    vec2 i = floor(st);\n    vec2 f = fract(st);\n    float a = random(i);\n    float b = random(i + vec2(1.0, 0.0));\n    float c = random(i + vec2(0.0, 1.0));\n    float d = random(i + vec2(1.0, 1.0));\n    vec2 u = f * f * (3.0 - 2.0 * f);\n    return mix(a, b, u.x) + (c - a) * u.y * (1.0 - u.x) + (d - b) * u.x * u.y;\n  }\n\n  float fbm(vec2 st) {\n    float value = 0.0;\n    float amplitude = 0.5;\n    for (int i = 0; i < 5; i++) {\n      value += amplitude * noise(st);\n      st *= 2.0;\n      amplitude *= 0.5;\n    }\n    return value;\n  }\n\n  // Color palette\n  vec3 palette(float t) {\n    vec3 a = vec3(0.5, 0.5, 0.5);\n    vec3 b = vec3(0.5, 0.5, 0.5);\n    vec3 c = vec3(1.0, 1.0, 1.0);\n    vec3 d = vec3(0.263, 0.416, 0.557);\n    return a + b * cos(6.28318 * (c * t + d));\n  }\n\n  void main() {\n    vec2 uv = gl_FragCoord.xy / u_resolution.xy;\n    vec2 centered = uv - 0.5;\n    centered.x *= u_resolution.x / u_resolution.y;\n\n    float time = u_time * 0.5;\n\n    // Radial distance from center\n    float dist = length(centered);\n    float angle = atan(centered.y, centered.x);\n\n    // Audio-reactive warping\n    float warp = u_bass * 0.3 + u_energy * 0.2;\n    vec2 warped = centered;\n    warped += vec2(\n      sin(angle * 3.0 + time) * warp * 0.1,\n      cos(angle * 2.0 - time) * warp * 0.1\n    );\n\n    // Layered noise with audio reactivity\n    float n1 = fbm(warped * (3.0 + u_mid * 2.0) + time * 0.3);\n    float n2 = fbm(warped * (5.0 + u_treble * 3.0) - time * 0.2 + n1);\n    float n3 = fbm(warped * (2.0 + u_bass) + vec2(n1, n2) * 0.5);\n\n    // Combine noise layers\n    float pattern = n1 * 0.5 + n2 * 0.3 + n3 * 0.2;\n\n    // Add circular waveform visualization\n    float waveIndex = (angle + PI) / (2.0 * PI) * 64.0;\n    int idx = int(mod(waveIndex, 64.0));\n    float waveVal = 0.0;\n    for (int i = 0; i < 64; i++) {\n      if (i == idx) waveVal = u_waveform[i];\n    }\n\n    float waveRing = smoothstep(0.02, 0.0, abs(dist - 0.3 - waveVal * 0.15 * u_energy));\n\n    // Pulsing rings\n    float rings = sin(dist * 20.0 - time * 2.0 - u_bass * 5.0) * 0.5 + 0.5;\n    rings *= smoothstep(0.8, 0.2, dist);\n\n    // Color based on pattern and audio\n    float colorShift = pattern + time * 0.1 + u_mid * 0.5;\n    vec3 color = palette(colorShift);\n\n    // Add bass-reactive glow\n    color += vec3(0.8, 0.2, 0.4) * u_bass * rings * 0.5;\n\n    // Add treble sparkles\n    float sparkle = step(0.97, random(uv * 100.0 + time)) * u_treble * 2.0;\n    color += vec3(1.0) * sparkle;\n\n    // Add waveform ring\n    color += vec3(0.3, 0.6, 1.0) * waveRing * 2.0;\n\n    // Vignette\n    float vignette = 1.0 - dist * 0.8;\n    color *= vignette;\n\n    // Energy-based brightness boost\n    color *= 0.7 + u_energy * 0.5;\n\n    gl_FragColor = vec4(color, 1.0);\n  }\n`;\n\ninterface AudioVisualizerProps {\n  analyserRef: React.RefObject<AnalyserNode | null>;\n  className?: string;\n  isPlaying?: boolean;\n}\n\nexport function AudioVisualizer({ analyserRef, className, isPlaying }: AudioVisualizerProps) {\n  const canvasRef = React.useRef<HTMLCanvasElement>(null);\n  const glRef = React.useRef<WebGLRenderingContext | null>(null);\n  const programRef = React.useRef<WebGLProgram | null>(null);\n  const animationRef = React.useRef<number>(0);\n  const startTimeRef = React.useRef<number>(Date.now());\n\n  // Initialize WebGL\n  React.useEffect(() => {\n    const canvas = canvasRef.current;\n    if (!canvas) return;\n\n    const gl = canvas.getContext('webgl', { antialias: true, alpha: false });\n    if (!gl) {\n      console.error('WebGL not supported');\n      return;\n    }\n    glRef.current = gl;\n\n    // Compile shaders\n    const vertexShader = gl.createShader(gl.VERTEX_SHADER)!;\n    gl.shaderSource(vertexShader, vertexShaderSource);\n    gl.compileShader(vertexShader);\n\n    const fragmentShader = gl.createShader(gl.FRAGMENT_SHADER)!;\n    gl.shaderSource(fragmentShader, fragmentShaderSource);\n    gl.compileShader(fragmentShader);\n\n    if (!gl.getShaderParameter(fragmentShader, gl.COMPILE_STATUS)) {\n      console.error('Fragment shader error:', gl.getShaderInfoLog(fragmentShader));\n    }\n\n    // Create program\n    const program = gl.createProgram()!;\n    gl.attachShader(program, vertexShader);\n    gl.attachShader(program, fragmentShader);\n    gl.linkProgram(program);\n    programRef.current = program;\n\n    // Set up geometry (fullscreen quad)\n    const positions = new Float32Array([-1, -1, 1, -1, -1, 1, 1, 1]);\n    const buffer = gl.createBuffer();\n    gl.bindBuffer(gl.ARRAY_BUFFER, buffer);\n    gl.bufferData(gl.ARRAY_BUFFER, positions, gl.STATIC_DRAW);\n\n    const positionLocation = gl.getAttribLocation(program, 'a_position');\n    gl.enableVertexAttribArray(positionLocation);\n    gl.vertexAttribPointer(positionLocation, 2, gl.FLOAT, false, 0, 0);\n\n    return () => {\n      cancelAnimationFrame(animationRef.current);\n    };\n  }, []);\n\n  // Animation loop\n  React.useEffect(() => {\n    const gl = glRef.current;\n    const program = programRef.current;\n    const canvas = canvasRef.current;\n    if (!gl || !program || !canvas) return;\n\n    const render = () => {\n      // Resize canvas if needed\n      const displayWidth = canvas.clientWidth * window.devicePixelRatio;\n      const displayHeight = canvas.clientHeight * window.devicePixelRatio;\n      if (canvas.width !== displayWidth || canvas.height !== displayHeight) {\n        canvas.width = displayWidth;\n        canvas.height = displayHeight;\n        gl.viewport(0, 0, canvas.width, canvas.height);\n      }\n\n      gl.useProgram(program);\n\n      // Get audio data\n      let bass = 0, mid = 0, treble = 0, energy = 0;\n      const waveform = new Float32Array(64);\n\n      if (analyserRef.current && isPlaying) {\n        const frequencyData = new Uint8Array(analyserRef.current.frequencyBinCount);\n        analyserRef.current.getByteFrequencyData(frequencyData);\n\n        const timeData = new Uint8Array(analyserRef.current.frequencyBinCount);\n        analyserRef.current.getByteTimeDomainData(timeData);\n\n        // Calculate frequency bands\n        const binCount = frequencyData.length;\n        const bassEnd = Math.floor(binCount * 0.1);\n        const midEnd = Math.floor(binCount * 0.5);\n\n        for (let i = 0; i < binCount; i++) {\n          const val = frequencyData[i] / 255;\n          energy += val;\n          if (i < bassEnd) bass += val;\n          else if (i < midEnd) mid += val;\n          else treble += val;\n        }\n\n        bass /= bassEnd;\n        mid /= (midEnd - bassEnd);\n        treble /= (binCount - midEnd);\n        energy /= binCount;\n\n        // Get waveform data\n        for (let i = 0; i < 64; i++) {\n          const idx = Math.floor((i / 64) * timeData.length);\n          waveform[i] = (timeData[idx] - 128) / 128;\n        }\n      } else {\n        // Idle animation when not playing\n        const t = (Date.now() - startTimeRef.current) / 1000;\n        bass = 0.2 + Math.sin(t * 0.5) * 0.1;\n        mid = 0.3 + Math.sin(t * 0.7) * 0.1;\n        treble = 0.2 + Math.sin(t * 1.1) * 0.1;\n        energy = 0.3;\n        for (let i = 0; i < 64; i++) {\n          waveform[i] = Math.sin(t * 2 + i * 0.2) * 0.3;\n        }\n      }\n\n      // Set uniforms\n      const time = (Date.now() - startTimeRef.current) / 1000;\n      gl.uniform2f(gl.getUniformLocation(program, 'u_resolution'), canvas.width, canvas.height);\n      gl.uniform1f(gl.getUniformLocation(program, 'u_time'), time);\n      gl.uniform1f(gl.getUniformLocation(program, 'u_bass'), bass);\n      gl.uniform1f(gl.getUniformLocation(program, 'u_mid'), mid);\n      gl.uniform1f(gl.getUniformLocation(program, 'u_treble'), treble);\n      gl.uniform1f(gl.getUniformLocation(program, 'u_energy'), energy);\n      gl.uniform1fv(gl.getUniformLocation(program, 'u_waveform'), waveform);\n\n      // Draw\n      gl.drawArrays(gl.TRIANGLE_STRIP, 0, 4);\n\n      animationRef.current = requestAnimationFrame(render);\n    };\n\n    render();\n\n    return () => {\n      cancelAnimationFrame(animationRef.current);\n    };\n  }, [isPlaying]);\n\n  return (\n    <canvas\n      ref={canvasRef}\n      className={cn('w-full h-full', className)}\n      style={{ background: '#000' }}\n    />\n  );\n}\n","import type { Track } from './tracks';\nimport { tracks } from './tracks';\n\nexport interface VideoReel {\n  id: string;\n  title: string;\n  description?: string;\n  videoSrc: string;\n  thumbnail?: string;\n  track?: Track; // Optional background music\n  creator: string;\n  createdAt?: string;\n  likes?: number;\n  views?: number;\n}\n\n/**\n * Auto-generate reels from tracks that have visualVideo set.\n * This is the recommended way to create music-first reels:\n * 1. Add a short looping video URL to your track's `visualVideo` field\n * 2. The reel will automatically be created with the track as audio\n */\nexport function generateReelsFromTracks(trackList: Track[] = tracks): VideoReel[] {\n  return trackList\n    .filter((track) => track.visualVideo) // Only tracks with videos\n    .map((track) => ({\n      id: `track-${track.id}`,\n      title: track.title,\n      description: `${track.album} • ${track.artist}`,\n      videoSrc: track.visualVideo!, // Short looping video\n      thumbnail: track.albumArt,\n      track: track, // Full audio track\n      creator: track.artist,\n      likes: 0,\n      views: 0,\n    }));\n}\n\n// Manual reels - music reels with visualizer (no videos yet)\n// When visualVideo is added to tracks, they'll auto-generate via generateReelsFromTracks()\nexport const manualReels: VideoReel[] = [\n  {\n    id: '1',\n    title: '8gent.app (Remix)',\n    description: 'Singles • James Spalding',\n    videoSrc: '', // Visualizer fallback\n    thumbnail: 'https://2oczblkb3byymav8.public.blob.vercel-storage.com/employeeoftheyear.jpeg',\n    track: tracks[0],\n    creator: \"James Spalding\",\n    likes: 42,\n    views: 1337,\n  },\n  {\n    id: '2',\n    title: '8gent.app',\n    description: 'Singles • James Spalding',\n    videoSrc: '', // Visualizer fallback\n    thumbnail: 'https://2oczblkb3byymav8.public.blob.vercel-storage.com/IMG_1312.jpeg',\n    track: tracks[1],\n    creator: \"James Spalding\",\n    likes: 28,\n    views: 892,\n  },\n  {\n    id: '3',\n    title: 'Humans Are Optional (Remastered)',\n    description: 'Singles • James Spalding',\n    videoSrc: '', // Visualizer fallback\n    thumbnail: 'https://2oczblkb3byymav8.public.blob.vercel-storage.com/Humans%20are%20optional.png',\n    track: tracks[2],\n    creator: \"James Spalding\",\n    likes: 64,\n    views: 2048,\n  },\n];\n\n// Combined reels: auto-generated from tracks + manual reels\nexport const reels: VideoReel[] = [\n  ...generateReelsFromTracks(),\n  ...manualReels,\n];\n\n// Helper to get a reel by ID\nexport function getReelById(id: string): VideoReel | undefined {\n  return reels.find((r) => r.id === id);\n}\n\n// Helper to get next reel\nexport function getNextReel(currentId: string): VideoReel | undefined {\n  const currentIndex = reels.findIndex((r) => r.id === currentId);\n  if (currentIndex === -1 || currentIndex === reels.length - 1) {\n    return reels[0];\n  }\n  return reels[currentIndex + 1];\n}\n\n// Helper to get previous reel\nexport function getPreviousReel(currentId: string): VideoReel | undefined {\n  const currentIndex = reels.findIndex((r) => r.id === currentId);\n  if (currentIndex === -1 || currentIndex === 0) {\n    return reels[reels.length - 1];\n  }\n  return reels[currentIndex - 1];\n}\n","'use client';\n\nimport { ReelsPlayer } from '@/components/reels/ReelsPlayer';\nimport { reels } from '@/data/reels';\nimport { PageTransition } from '@/components/ios';\nimport { Sparkles } from 'lucide-react';\n\nexport default function ReelsPage() {\n  const allReels = reels;\n\n  return (\n    <PageTransition>\n      <div className=\"min-h-screen bg-black flex items-center justify-center\">\n        {/* Subtle ambient glow */}\n        <div className=\"fixed inset-0 pointer-events-none overflow-hidden\">\n          <div className=\"absolute top-1/3 left-1/3 w-[500px] h-[500px] bg-rose-500/[0.03] rounded-full blur-[120px]\" />\n          <div className=\"absolute bottom-1/3 right-1/3 w-[500px] h-[500px] bg-orange-500/[0.03] rounded-full blur-[120px]\" />\n        </div>\n\n        {/* Player */}\n        <div className=\"relative z-10\">\n          {allReels.length > 0 ? (\n            <ReelsPlayer reels={allReels} musicFirst={true} />\n          ) : (\n            <div className=\"w-[300px] md:w-[340px] bg-gradient-to-b from-[#1a1a1a] to-[#0d0d0d] rounded-[32px] p-4 shadow-[0_25px_50px_-12px_rgba(0,0,0,0.6)] border border-white/5\">\n              <div className=\"bg-black rounded-2xl aspect-[9/14] flex items-center justify-center\">\n                <div className=\"text-center p-6\">\n                  <Sparkles className=\"w-10 h-10 text-zinc-600 mx-auto mb-4\" />\n                  <p className=\"text-white/60 text-sm font-mono mb-2\">No tracks yet</p>\n                  <p className=\"text-white/30 text-xs font-mono\">\n                    Add tracks in src/data/tracks.ts\n                  </p>\n                </div>\n              </div>\n            </div>\n          )}\n        </div>\n      </div>\n    </PageTransition>\n  );\n}\n"],"names":[],"mappings":"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"}