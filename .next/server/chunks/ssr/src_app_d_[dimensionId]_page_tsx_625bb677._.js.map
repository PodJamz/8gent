{"version":3,"sources":["../../../../src/app/d/%5BdimensionId%5D/page.tsx","../../../../src/components/erv/EntityCard.tsx","../../../../src/components/erv/Connection.tsx","../../../../src/components/erv/DimensionRenderer.tsx","../../../../src/components/erv/DimensionPortal.tsx"],"sourcesContent":["/**\n * Dynamic Dimension Page\n *\n * Renders a specific dimension with its entities and relationships.\n * Supports both preset and custom dimensions.\n * Uses real Convex data (ERV Phase 4).\n * Features matrix-bending portal transitions.\n */\n\n\"use client\";\n\nimport { useCallback, useEffect, useState, use, useMemo, useRef } from \"react\";\nimport { motion, AnimatePresence } from \"framer-motion\";\nimport { useRouter } from \"next/navigation\";\nimport { useQuery } from \"@/lib/openclaw/hooks\";\nimport { api } from '@/lib/convex-shim';\nimport { cn } from \"@/lib/utils\";\nimport { DimensionRenderer } from \"@/components/erv/DimensionRenderer\";\nimport { DimensionHeader } from \"@/components/erv/DimensionHeader\";\nimport { DimensionPortal } from \"@/components/erv/DimensionPortal\";\nimport {\n  useDimensionNavigation,\n  useSwipeNavigation,\n} from \"@/context/DimensionNavigationContext\";\nimport { PageTransitionWrapper } from \"@/components/ios/PageTransitionWrapper\";\nimport type {\n  DimensionConfig,\n  Entity,\n  Relationship,\n  PresetDimensionId,\n  EntityType,\n} from \"@/lib/erv/types\";\n\n// =============================================================================\n// Preset Dimension Configurations\n// =============================================================================\n\nconst PRESET_CONFIGS: Record<PresetDimensionId, DimensionConfig> = {\n  feed: {\n    id: \"feed\",\n    name: \"Feed\",\n    description: \"Chronological stream of all entities\",\n    icon: \"ðŸ“°\",\n    gradient: \"from-blue-500 to-cyan-500\",\n    metaphor: \"river\",\n    container: \"frame\",\n    arrangement: \"list\",\n    entityShape: \"square\",\n    connectionStyle: \"none\",\n    decorations: [{ type: \"shadow\" }],\n    interactions: [\n      { type: \"click\", action: \"navigate\" },\n      { type: \"longpress\", action: \"reveal\" },\n    ],\n    transition: \"slide\",\n    sort: { field: \"createdAt\", direction: \"desc\" },\n    itemSize: \"md\",\n    gap: 12,\n  },\n  kanban: {\n    id: \"kanban\",\n    name: \"Kanban\",\n    description: \"Ticket and task management board\",\n    icon: \"ðŸ“‹\",\n    gradient: \"from-violet-500 to-purple-500\",\n    metaphor: \"board\",\n    container: \"panel\",\n    arrangement: \"grid\",\n    entityShape: \"square\",\n    connectionStyle: \"none\",\n    decorations: [{ type: \"badge\" }, { type: \"border\" }],\n    interactions: [\n      { type: \"drag\", action: \"custom\" },\n      { type: \"click\", action: \"edit\" },\n    ],\n    transition: \"morph\",\n    filter: { entityTypes: [\"Ticket\"] },\n    group: { by: \"status\", showEmpty: true },\n    columns: 5,\n    gap: 16,\n    itemSize: \"sm\",\n  },\n  graph: {\n    id: \"graph\",\n    name: \"Graph\",\n    description: \"Entity relationship visualization\",\n    icon: \"ðŸ•¸ï¸\",\n    gradient: \"from-emerald-500 to-green-500\",\n    metaphor: \"constellation\",\n    container: \"frame\",\n    arrangement: \"graph\",\n    entityShape: \"circle\",\n    connectionStyle: \"curve\",\n    decorations: [{ type: \"glow\", condition: \"importance > 0.8\" }],\n    interactions: [\n      { type: \"drag\", action: \"custom\" },\n      { type: \"click\", action: \"select\" },\n      { type: \"hover\", action: \"preview\" },\n    ],\n    transition: \"morph\",\n    sizeMapping: { field: \"connections\", min: 40, max: 100 },\n    physicsEnabled: true,\n  },\n  \"graph-3d\": {\n    id: \"graph-3d\",\n    name: \"Graph 3D\",\n    description: \"Immersive 3D relationship space\",\n    icon: \"ðŸŒ\",\n    gradient: \"from-pink-500 to-rose-500\",\n    metaphor: \"solar\",\n    container: \"frame\",\n    arrangement: \"orbit\",\n    entityShape: \"circle\",\n    connectionStyle: \"glow\",\n    decorations: [{ type: \"glow\" }],\n    interactions: [\n      { type: \"click\", action: \"navigate\" },\n      { type: \"pinch\", action: \"custom\" },\n    ],\n    transition: \"morph\",\n    is3D: true,\n    cameraPosition: { x: 0, y: 0, z: 10 },\n    physicsEnabled: true,\n  },\n  calendar: {\n    id: \"calendar\",\n    name: \"Calendar\",\n    description: \"Time-based event visualization\",\n    icon: \"ðŸ“…\",\n    gradient: \"from-amber-500 to-orange-500\",\n    metaphor: \"timeline\",\n    container: \"panel\",\n    arrangement: \"grid\",\n    entityShape: \"square\",\n    connectionStyle: \"line\",\n    decorations: [{ type: \"badge\" }],\n    interactions: [\n      { type: \"click\", action: \"edit\" },\n      { type: \"drag\", action: \"custom\" },\n    ],\n    transition: \"slide\",\n    filter: { entityTypes: [\"Event\"] },\n    sort: { field: \"createdAt\", direction: \"asc\" },\n    columns: 7,\n    gap: 8,\n    itemSize: \"sm\",\n  },\n  grid: {\n    id: \"grid\",\n    name: \"Grid\",\n    description: \"Gallery-style entity browser\",\n    icon: \"ðŸ–¼ï¸\",\n    gradient: \"from-cyan-500 to-teal-500\",\n    metaphor: \"mosaic\",\n    container: \"frame\",\n    arrangement: \"grid\",\n    entityShape: \"square\",\n    connectionStyle: \"none\",\n    decorations: [{ type: \"shadow\" }, { type: \"label\" }],\n    interactions: [\n      { type: \"click\", action: \"navigate\" },\n      { type: \"hover\", action: \"preview\" },\n    ],\n    transition: \"scale\",\n    columns: 4,\n    gap: 16,\n    itemSize: \"md\",\n  },\n  table: {\n    id: \"table\",\n    name: \"Table\",\n    description: \"Spreadsheet-like data view\",\n    icon: \"ðŸ“Š\",\n    gradient: \"from-slate-500 to-zinc-500\",\n    metaphor: \"ledger\",\n    container: \"panel\",\n    arrangement: \"list\",\n    entityShape: \"square\",\n    connectionStyle: \"none\",\n    decorations: [{ type: \"border\" }],\n    interactions: [\n      { type: \"click\", action: \"edit\" },\n      { type: \"hover\", action: \"preview\" },\n    ],\n    transition: \"fade\",\n    sort: { field: \"name\", direction: \"asc\" },\n    gap: 0,\n    itemSize: \"sm\",\n  },\n  ipod: {\n    id: \"ipod\",\n    name: \"iPod\",\n    description: \"Music-centric navigation\",\n    icon: \"ðŸŽµ\",\n    gradient: \"from-indigo-500 to-blue-500\",\n    metaphor: \"vinyl\",\n    container: \"card\",\n    arrangement: \"flow\",\n    entityShape: \"square\",\n    connectionStyle: \"none\",\n    decorations: [{ type: \"shadow\" }],\n    interactions: [\n      { type: \"click\", action: \"navigate\" },\n      { type: \"longpress\", action: \"reveal\" },\n    ],\n    transition: \"slide\",\n    filter: { entityTypes: [\"Track\"] },\n    itemSize: \"lg\",\n    gap: 24,\n  },\n  \"quest-log\": {\n    id: \"quest-log\",\n    name: \"Quest Log\",\n    description: \"Gamified task progression\",\n    icon: \"âš”ï¸\",\n    gradient: \"from-red-500 to-orange-500\",\n    metaphor: \"dungeon\",\n    container: \"panel\",\n    arrangement: \"tree\",\n    entityShape: \"hexagon\",\n    connectionStyle: \"arrow\",\n    decorations: [{ type: \"badge\" }, { type: \"glow\", condition: \"importance > 0.7\" }],\n    interactions: [\n      { type: \"click\", action: \"navigate\" },\n      { type: \"longpress\", action: \"reveal\" },\n    ],\n    transition: \"morph\",\n    filter: { entityTypes: [\"Ticket\", \"Epic\"] },\n  },\n  \"skill-tree\": {\n    id: \"skill-tree\",\n    name: \"Skill Tree\",\n    description: \"Interconnected skill progression\",\n    icon: \"ðŸŒ³\",\n    gradient: \"from-emerald-500 to-teal-500\",\n    metaphor: \"tree\",\n    container: \"frame\",\n    arrangement: \"tree\",\n    entityShape: \"circle\",\n    connectionStyle: \"curve\",\n    decorations: [{ type: \"glow\" }, { type: \"badge\" }],\n    interactions: [\n      { type: \"click\", action: \"navigate\" },\n      { type: \"hover\", action: \"preview\" },\n    ],\n    transition: \"morph\",\n    filter: { entityTypes: [\"Skill\"] },\n  },\n  \"agent-tasks\": {\n    id: \"agent-tasks\",\n    name: \"Agent Tasks\",\n    description: \"Monitor background tasks, code iterations, and specialist delegations\",\n    icon: \"ðŸ¤–\",\n    gradient: \"from-sky-500 to-blue-500\",\n    metaphor: \"console\",\n    container: \"panel\",\n    arrangement: \"list\",\n    entityShape: \"square\",\n    connectionStyle: \"none\",\n    decorations: [{ type: \"badge\" }, { type: \"border\" }],\n    interactions: [\n      { type: \"click\", action: \"navigate\" },\n      { type: \"hover\", action: \"preview\" },\n    ],\n    transition: \"slide\",\n    filter: { entityTypes: [\"AgentTask\"] },\n    sort: { field: \"createdAt\", direction: \"desc\" },\n    itemSize: \"md\",\n    gap: 12,\n  },\n};\n\n// =============================================================================\n// Helper: Convert Convex entity to ERV Entity type\n// =============================================================================\n\ninterface ConvexEntity {\n  _id: string;\n  entityId: string;\n  entityType: string;\n  name: string;\n  data: string;\n  tags: string[];\n  searchText: string;\n  thumbnail?: string;\n  ownerId: string;\n  createdAt: number;\n  updatedAt: number;\n  importance?: number;\n  archivedAt?: number;\n}\n\ninterface ConvexRelationship {\n  _id: string;\n  sourceEntityId: string;\n  targetEntityId: string;\n  relationshipType: string;\n  bidirectional: boolean;\n  weight?: number;\n  label?: string;\n  createdAt: number;\n  createdBy: string;\n}\n\nfunction convertToEntity(convexEntity: ConvexEntity): Entity {\n  return {\n    _id: convexEntity._id,\n    entityId: convexEntity.entityId,\n    entityType: convexEntity.entityType as EntityType,\n    name: convexEntity.name,\n    data: convexEntity.data,\n    tags: convexEntity.tags,\n    searchText: convexEntity.searchText,\n    thumbnail: convexEntity.thumbnail,\n    ownerId: convexEntity.ownerId,\n    createdAt: convexEntity.createdAt,\n    updatedAt: convexEntity.updatedAt,\n    importance: convexEntity.importance,\n  };\n}\n\nfunction convertToRelationship(convexRel: ConvexRelationship): Relationship {\n  return {\n    _id: convexRel._id,\n    sourceEntityId: convexRel.sourceEntityId,\n    targetEntityId: convexRel.targetEntityId,\n    relationshipType: convexRel.relationshipType as Relationship[\"relationshipType\"],\n    bidirectional: convexRel.bidirectional,\n    weight: convexRel.weight,\n    createdAt: convexRel.createdAt,\n    createdBy: convexRel.createdBy,\n  };\n}\n\n// =============================================================================\n// Page Component\n// =============================================================================\n\ninterface DimensionPageProps {\n  params: Promise<{ dimensionId: string }>;\n}\n\nexport default function DimensionPage({ params }: DimensionPageProps) {\n  const { dimensionId } = use(params);\n  const router = useRouter();\n  const { navigateTo } = useDimensionNavigation();\n  const { touchHandlers } = useSwipeNavigation();\n\n  // State\n  const [selectedEntityId, setSelectedEntityId] = useState<string | undefined>();\n  const [showPortal, setShowPortal] = useState(true);\n  const [portalComplete, setPortalComplete] = useState(false);\n  const prevDimensionRef = useRef<string | null>(null);\n\n  // Trigger portal on dimension change\n  useEffect(() => {\n    if (prevDimensionRef.current !== null && prevDimensionRef.current !== dimensionId) {\n      // Dimension changed - show portal transition\n      setShowPortal(true);\n      setPortalComplete(false);\n    }\n    prevDimensionRef.current = dimensionId;\n  }, [dimensionId]);\n\n  // Handle portal completion\n  const handlePortalComplete = useCallback(() => {\n    setShowPortal(false);\n    setPortalComplete(true);\n  }, []);\n\n  // Check if it's a preset dimension\n  const isPreset = dimensionId in PRESET_CONFIGS;\n  const presetConfig = isPreset\n    ? PRESET_CONFIGS[dimensionId as PresetDimensionId]\n    : null;\n\n  // Get entity type filter from config\n  const entityTypeFilter = useMemo(() => {\n    if (presetConfig?.filter?.entityTypes) {\n      return presetConfig.filter.entityTypes as EntityType[];\n    }\n    return undefined;\n  }, [presetConfig]);\n\n  // Load custom dimension from Convex (only if not preset)\n  const customDimension = useQuery(\n    api.erv.getDimension,\n    !isPreset ? { dimensionId } : \"skip\"\n  );\n\n  // Build effective config\n  const config = useMemo<DimensionConfig | null>(() => {\n    if (presetConfig) return presetConfig;\n    if (customDimension) {\n      try {\n        const parsed = JSON.parse(customDimension.config);\n        return {\n          id: customDimension.dimensionId,\n          name: customDimension.name,\n          description: customDimension.description,\n          icon: customDimension.icon,\n          gradient: customDimension.gradient,\n          metaphor: customDimension.metaphor,\n          ...parsed,\n        } as DimensionConfig;\n      } catch {\n        return null;\n      }\n    }\n    return null;\n  }, [presetConfig, customDimension]);\n\n  // Load entities from Convex\n  const entitiesResult = useQuery(api.erv.listEntities, {\n    entityTypes: entityTypeFilter,\n    limit: 100,\n  });\n\n  // Get entity IDs for relationship query\n  const entityIds = useMemo(() => {\n    if (!entitiesResult?.entities) return [];\n    return entitiesResult.entities.map((e: { entityId: string }) => e.entityId);\n  }, [entitiesResult?.entities]);\n\n  // Load relationships for entities\n  const relationshipsResult = useQuery(\n    api.erv.getRelationshipsForEntities,\n    entityIds.length > 0 ? { entityIds } : \"skip\"\n  );\n\n  // Convert to typed entities and relationships\n  const entities = useMemo<Entity[]>(() => {\n    if (!entitiesResult?.entities) return [];\n    return entitiesResult.entities.map((e: ConvexEntity) => convertToEntity(e));\n  }, [entitiesResult?.entities]);\n\n  const relationships = useMemo<Relationship[]>(() => {\n    if (!relationshipsResult) return [];\n    return relationshipsResult.map((r: ConvexRelationship) => convertToRelationship(r));\n  }, [relationshipsResult]);\n\n  // Loading and error states\n  const loading = entitiesResult === undefined;\n  const error = useMemo(() => {\n    if (!isPreset && customDimension === null && !loading) {\n      return `Dimension \"${dimensionId}\" not found`;\n    }\n    return undefined;\n  }, [isPreset, customDimension, dimensionId, loading]);\n\n  // Update navigation context\n  useEffect(() => {\n    if (config) {\n      navigateTo(config.id, config.name);\n    }\n  }, [config, navigateTo]);\n\n  // Handlers\n  const handleHomeClick = useCallback(() => {\n    router.push(\"/\");\n  }, [router]);\n\n  const handleEntityClick = useCallback((entity: Entity) => {\n    setSelectedEntityId(entity.entityId);\n    // TODO: Navigate to entity detail or open preview\n  }, []);\n\n  const handleEntityLongPress = useCallback((entity: Entity) => {\n    // TODO: Show \"beyond the veil\" reveal\n    console.log(\"Long press on:\", entity.name);\n  }, []);\n\n  const handleConnectionClick = useCallback((relationship: Relationship) => {\n    // TODO: Show relationship details\n    console.log(\"Connection clicked:\", relationship);\n  }, []);\n\n  if (!config && !loading && !error) {\n    return null;\n  }\n\n  // Get target dimension info for portal\n  const portalTarget = config ? {\n    id: config.id,\n    name: config.name,\n    gradient: config.gradient,\n    metaphor: config.metaphor,\n  } : undefined;\n\n  return (\n    <PageTransitionWrapper>\n      {/* Reality-bending portal transition */}\n      <AnimatePresence>\n        {showPortal && portalTarget && (\n          <DimensionPortal\n            isTransitioning={showPortal}\n            targetDimension={portalTarget}\n            onTransitionComplete={handlePortalComplete}\n            duration={1200}\n            intensity={0.8}\n          />\n        )}\n      </AnimatePresence>\n\n      <motion.div\n        className={cn(\n          \"min-h-screen flex flex-col\",\n          \"bg-[hsl(var(--theme-background))]\"\n        )}\n        initial={{ opacity: 0 }}\n        animate={{ opacity: portalComplete || !showPortal ? 1 : 0 }}\n        transition={{ duration: 0.3, delay: showPortal ? 0 : 0.2 }}\n        {...touchHandlers}\n      >\n        {/* Header */}\n        <DimensionHeader\n          config={config || undefined}\n          onHomeClick={handleHomeClick}\n          showAIContext={true}\n        />\n\n        {/* Content */}\n        <main className=\"flex-1 overflow-hidden\">\n          <DimensionRenderer\n            config={config || {\n              id: dimensionId,\n              name: dimensionId,\n              container: \"frame\",\n              arrangement: \"grid\",\n              entityShape: \"square\",\n              connectionStyle: \"none\",\n              decorations: [],\n              interactions: [],\n              transition: \"fade\",\n            }}\n            entities={entities}\n            relationships={relationships}\n            selectedEntityId={selectedEntityId}\n            loading={loading}\n            error={error}\n            onEntityClick={handleEntityClick}\n            onEntityLongPress={handleEntityLongPress}\n            onConnectionClick={handleConnectionClick}\n            className=\"h-full\"\n          />\n        </main>\n\n        {/* Dimension info footer */}\n        {config && !loading && !error && (\n          <motion.footer\n            className={cn(\n              \"flex items-center justify-between\",\n              \"px-4 py-3\",\n              \"bg-[hsl(var(--theme-card)/0.8)]\",\n              \"backdrop-blur-lg\",\n              \"border-t border-[hsl(var(--theme-border)/0.5)]\"\n            )}\n            initial={{ opacity: 0, y: 20 }}\n            animate={{ opacity: 1, y: 0 }}\n            transition={{ delay: 0.3 }}\n          >\n            <div className=\"flex items-center gap-3\">\n              <span className=\"text-2xl\">{config.icon}</span>\n              <div>\n                <p className=\"text-sm font-medium text-[hsl(var(--theme-foreground))]\">\n                  {config.name}\n                </p>\n                <p className=\"text-xs text-[hsl(var(--theme-muted-foreground))]\">\n                  {entities.length} entities â€¢ {relationships.length} connections\n                </p>\n              </div>\n            </div>\n\n            <div className=\"flex items-center gap-2\">\n              {/* Metaphor badge */}\n              {config.metaphor && (\n                <span\n                  className={cn(\n                    \"px-2 py-1 rounded-full text-xs\",\n                    \"bg-[hsl(var(--theme-primary)/0.1)]\",\n                    \"text-[hsl(var(--theme-primary))]\"\n                  )}\n                >\n                  âœ¨ {config.metaphor}\n                </span>\n              )}\n\n              {/* Arrangement badge */}\n              <span\n                className={cn(\n                  \"px-2 py-1 rounded-full text-xs\",\n                  \"bg-[hsl(var(--theme-muted))]\",\n                  \"text-[hsl(var(--theme-muted-foreground))]\"\n                )}\n              >\n                {config.arrangement}\n              </span>\n            </div>\n          </motion.footer>\n        )}\n      </motion.div>\n    </PageTransitionWrapper>\n  );\n}\n","/**\n * ERV EntityCard Component\n *\n * A polymorphic card that renders any entity type with appropriate\n * visual treatment based on entityType and DimensionConfig.\n *\n * Phase 2, Story 2.1: EntityCard Primitive\n */\n\n\"use client\";\n\nimport { memo, useMemo, useCallback } from \"react\";\nimport { motion } from \"framer-motion\";\nimport {\n  User,\n  FolderKanban,\n  Music,\n  FileText,\n  Pencil,\n  Ticket,\n  Target,\n  Calendar,\n  Brain,\n  Heart,\n  Layers,\n  FolderOpen,\n  Sparkles,\n  Bell,\n  Bot,\n  MoreHorizontal,\n  type LucideIcon,\n} from \"lucide-react\";\nimport { cn } from \"@/lib/utils\";\nimport type { Entity, EntityType, ShapeType } from \"@/lib/erv/types\";\n\n// =============================================================================\n// Type Definitions\n// =============================================================================\n\nexport interface EntityCardProps {\n  entity: Entity;\n  /** Card shape from dimension config */\n  shape?: ShapeType;\n  /** Size variant */\n  size?: \"sm\" | \"md\" | \"lg\";\n  /** Whether this card is selected */\n  selected?: boolean;\n  /** Whether to show the thumbnail */\n  showThumbnail?: boolean;\n  /** Whether to show tags */\n  showTags?: boolean;\n  /** Whether to show the type badge */\n  showTypeBadge?: boolean;\n  /** Custom color override */\n  color?: string;\n  /** Click handler */\n  onClick?: (entity: Entity) => void;\n  /** Long press handler (for \"beyond the veil\" reveal) */\n  onLongPress?: (entity: Entity) => void;\n  /** Drag start handler */\n  onDragStart?: (e: React.DragEvent, entity: Entity) => void;\n  /** Additional class names */\n  className?: string;\n}\n\n// =============================================================================\n// Entity Type Configuration\n// =============================================================================\n\ninterface EntityTypeConfig {\n  icon: LucideIcon;\n  gradient: string;\n  label: string;\n}\n\nconst ENTITY_TYPE_CONFIG: Record<EntityType, EntityTypeConfig> = {\n  Person: {\n    icon: User,\n    gradient: \"from-blue-500 to-cyan-500\",\n    label: \"Person\",\n  },\n  Project: {\n    icon: FolderKanban,\n    gradient: \"from-violet-500 to-purple-500\",\n    label: \"Project\",\n  },\n  Track: {\n    icon: Music,\n    gradient: \"from-pink-500 to-rose-500\",\n    label: \"Track\",\n  },\n  Draft: {\n    icon: FileText,\n    gradient: \"from-amber-500 to-orange-500\",\n    label: \"Draft\",\n  },\n  Sketch: {\n    icon: Pencil,\n    gradient: \"from-emerald-500 to-green-500\",\n    label: \"Sketch\",\n  },\n  Ticket: {\n    icon: Ticket,\n    gradient: \"from-cyan-500 to-teal-500\",\n    label: \"Ticket\",\n  },\n  Epic: {\n    icon: Target,\n    gradient: \"from-indigo-500 to-blue-500\",\n    label: \"Epic\",\n  },\n  Event: {\n    icon: Calendar,\n    gradient: \"from-red-500 to-pink-500\",\n    label: \"Event\",\n  },\n  Memory: {\n    icon: Brain,\n    gradient: \"from-purple-500 to-fuchsia-500\",\n    label: \"Memory\",\n  },\n  Value: {\n    icon: Heart,\n    gradient: \"from-rose-500 to-red-500\",\n    label: \"Value\",\n  },\n  Dimension: {\n    icon: Layers,\n    gradient: \"from-slate-500 to-zinc-500\",\n    label: \"Dimension\",\n  },\n  Collection: {\n    icon: FolderOpen,\n    gradient: \"from-yellow-500 to-amber-500\",\n    label: \"Collection\",\n  },\n  Skill: {\n    icon: Sparkles,\n    gradient: \"from-fuchsia-500 to-pink-500\",\n    label: \"Skill\",\n  },\n  Reminder: {\n    icon: Bell,\n    gradient: \"from-orange-500 to-red-500\",\n    label: \"Reminder\",\n  },\n  AgentTask: {\n    icon: Bot,\n    gradient: \"from-sky-500 to-blue-500\",\n    label: \"Agent Task\",\n  },\n};\n\n// =============================================================================\n// Size Configuration\n// =============================================================================\n\nconst SIZE_CONFIG = {\n  sm: {\n    card: \"p-2 gap-2\",\n    icon: \"w-4 h-4\",\n    iconContainer: \"w-8 h-8\",\n    title: \"text-sm\",\n    meta: \"text-xs\",\n    thumbnail: \"w-8 h-8\",\n  },\n  md: {\n    card: \"p-3 gap-3\",\n    icon: \"w-5 h-5\",\n    iconContainer: \"w-10 h-10\",\n    title: \"text-base\",\n    meta: \"text-sm\",\n    thumbnail: \"w-12 h-12\",\n  },\n  lg: {\n    card: \"p-4 gap-4\",\n    icon: \"w-6 h-6\",\n    iconContainer: \"w-14 h-14\",\n    title: \"text-lg\",\n    meta: \"text-sm\",\n    thumbnail: \"w-16 h-16\",\n  },\n};\n\n// =============================================================================\n// Shape Configuration\n// =============================================================================\n\nconst SHAPE_CONFIG: Record<ShapeType, string> = {\n  circle: \"rounded-full aspect-square\",\n  square: \"rounded-lg\",\n  hexagon: \"rounded-lg\", // TODO: clip-path hexagon\n  custom: \"rounded-lg\",\n};\n\n// =============================================================================\n// Component\n// =============================================================================\n\nexport const EntityCard = memo(function EntityCard({\n  entity,\n  shape = \"square\",\n  size = \"md\",\n  selected = false,\n  showThumbnail = true,\n  showTags = true,\n  showTypeBadge = true,\n  color,\n  onClick,\n  onLongPress,\n  onDragStart,\n  className,\n}: EntityCardProps) {\n  const config = ENTITY_TYPE_CONFIG[entity.entityType];\n  const sizeConfig = SIZE_CONFIG[size];\n  const Icon = config.icon;\n\n  // Parse entity data for type-specific rendering\n  const parsedData = useMemo(() => {\n    try {\n      return JSON.parse(entity.data);\n    } catch {\n      return {};\n    }\n  }, [entity.data]);\n\n  // Get subtitle based on entity type\n  const subtitle = useMemo(() => {\n    switch (entity.entityType) {\n      case \"Person\":\n        return parsedData.title || parsedData.company || parsedData.email;\n      case \"Project\":\n        return parsedData.status;\n      case \"Track\":\n        return parsedData.artist;\n      case \"Ticket\":\n        return `${parsedData.ticketId} â€¢ ${parsedData.priority}`;\n      case \"Event\":\n        return parsedData.startTime\n          ? new Date(parsedData.startTime).toLocaleDateString()\n          : undefined;\n      case \"Memory\":\n        return parsedData.memoryType;\n      default:\n        return undefined;\n    }\n  }, [entity.entityType, parsedData]);\n\n  // Handle click\n  const handleClick = useCallback(() => {\n    onClick?.(entity);\n  }, [onClick, entity]);\n\n  // Handle drag start\n  const handleDragStart = useCallback(\n    (e: React.DragEvent) => {\n      onDragStart?.(e, entity);\n    },\n    [onDragStart, entity]\n  );\n\n  // Long press handling\n  const handleLongPress = useCallback(() => {\n    onLongPress?.(entity);\n  }, [onLongPress, entity]);\n\n  // Keyboard navigation\n  const handleKeyDown = useCallback(\n    (e: React.KeyboardEvent) => {\n      if (e.key === \"Enter\" || e.key === \" \") {\n        e.preventDefault();\n        onClick?.(entity);\n      }\n    },\n    [onClick, entity]\n  );\n\n  // Determine if we should show circular (for nodes in graph)\n  const isCircular = shape === \"circle\";\n\n  const cardContent = (\n    <motion.div\n      layout\n      layoutId={entity.entityId}\n      initial={{ opacity: 0, scale: 0.95 }}\n      animate={{\n        opacity: 1,\n        scale: selected ? 1.02 : 1,\n      }}\n      exit={{ opacity: 0, scale: 0.95 }}\n      transition={{ duration: 0.2 }}\n      tabIndex={0}\n      role=\"button\"\n      aria-label={`${entity.name}, ${config.label}`}\n      aria-selected={selected}\n      onClick={handleClick}\n      onKeyDown={handleKeyDown}\n      className={cn(\n        // Base styles\n        \"relative cursor-pointer select-none\",\n        \"bg-[hsl(var(--theme-card))] border border-[hsl(var(--theme-border))]\",\n        \"hover:border-[hsl(var(--theme-primary)/0.5)] hover:shadow-lg\",\n        \"focus:outline-none focus-visible:ring-2 focus-visible:ring-[hsl(var(--theme-primary))]\",\n        \"transition-all duration-200\",\n        // Shape\n        isCircular ? SHAPE_CONFIG.circle : SHAPE_CONFIG[shape],\n        // Size\n        sizeConfig.card,\n        // Selected state\n        selected && \"ring-2 ring-[hsl(var(--theme-primary))] shadow-lg\",\n        // Layout\n        isCircular ? \"flex items-center justify-center\" : \"flex items-start\",\n        className\n      )}\n    >\n      {/* Circular mode - icon only */}\n      {isCircular ? (\n        <div\n          className={cn(\n            \"flex items-center justify-center rounded-full\",\n            \"bg-gradient-to-br\",\n            color || config.gradient,\n            sizeConfig.iconContainer\n          )}\n        >\n          <Icon className={cn(\"text-white\", sizeConfig.icon)} />\n        </div>\n      ) : (\n        <>\n          {/* Thumbnail or Icon */}\n          <div className=\"flex-shrink-0\">\n            {showThumbnail && entity.thumbnail ? (\n              <img\n                src={entity.thumbnail}\n                alt=\"\"\n                className={cn(\n                  \"object-cover rounded-lg\",\n                  sizeConfig.thumbnail\n                )}\n              />\n            ) : (\n              <div\n                className={cn(\n                  \"flex items-center justify-center rounded-lg\",\n                  \"bg-gradient-to-br\",\n                  color || config.gradient,\n                  sizeConfig.iconContainer\n                )}\n              >\n                <Icon className={cn(\"text-white\", sizeConfig.icon)} />\n              </div>\n            )}\n          </div>\n\n          {/* Content */}\n          <div className=\"flex-1 min-w-0\">\n            {/* Type badge */}\n            {showTypeBadge && (\n              <div className=\"flex items-center gap-1 mb-0.5\">\n                <span\n                  className={cn(\n                    \"px-1.5 py-0.5 rounded text-[10px] font-medium uppercase tracking-wider\",\n                    \"bg-[hsl(var(--theme-muted))] text-[hsl(var(--theme-muted-foreground))]\"\n                  )}\n                >\n                  {config.label}\n                </span>\n              </div>\n            )}\n\n            {/* Title */}\n            <h3\n              className={cn(\n                \"font-medium truncate text-[hsl(var(--theme-foreground))]\",\n                sizeConfig.title\n              )}\n            >\n              {entity.name}\n            </h3>\n\n            {/* Subtitle */}\n            {subtitle && (\n              <p\n                className={cn(\n                  \"truncate text-[hsl(var(--theme-muted-foreground))]\",\n                  sizeConfig.meta\n                )}\n              >\n                {subtitle}\n              </p>\n            )}\n\n            {/* Tags */}\n            {showTags && entity.tags.length > 0 && (\n              <div className=\"flex flex-wrap gap-1 mt-2\">\n                {entity.tags.slice(0, 3).map((tag) => (\n                  <span\n                    key={tag}\n                    className={cn(\n                      \"px-1.5 py-0.5 rounded-full text-[10px]\",\n                      \"bg-[hsl(var(--theme-accent))] text-[hsl(var(--theme-accent-foreground))]\"\n                    )}\n                  >\n                    {tag}\n                  </span>\n                ))}\n                {entity.tags.length > 3 && (\n                  <span className=\"text-[10px] text-[hsl(var(--theme-muted-foreground))]\">\n                    +{entity.tags.length - 3}\n                  </span>\n                )}\n              </div>\n            )}\n          </div>\n\n          {/* Importance indicator */}\n          {entity.importance !== undefined && entity.importance > 0.7 && (\n            <div\n              className=\"absolute top-2 right-2 w-2 h-2 rounded-full bg-amber-500\"\n              title={`Importance: ${Math.round(entity.importance * 100)}%`}\n            />\n          )}\n        </>\n      )}\n    </motion.div>\n  );\n\n  // Wrap with drag handler if needed\n  if (onDragStart) {\n    return (\n      <div\n        draggable\n        onDragStart={handleDragStart}\n      >\n        {cardContent}\n      </div>\n    );\n  }\n\n  return cardContent;\n});\n\nexport default EntityCard;\n","/**\n * ERV Connection Primitives\n *\n * SVG-based connection components for drawing edges between entities\n * in graph-based dimensions.\n *\n * Phase 2, Story 2.2: SVG Connection Primitives\n */\n\n\"use client\";\n\nimport { memo, useMemo } from \"react\";\nimport { motion } from \"framer-motion\";\nimport { cn } from \"@/lib/utils\";\nimport type { ConnectionType } from \"@/lib/erv/types\";\n\n// =============================================================================\n// Type Definitions\n// =============================================================================\n\nexport interface Point {\n  x: number;\n  y: number;\n}\n\nexport interface ConnectionProps {\n  /** Start point */\n  from: Point;\n  /** End point */\n  to: Point;\n  /** Connection style */\n  type?: ConnectionType;\n  /** Stroke color */\n  color?: string;\n  /** Stroke width */\n  strokeWidth?: number;\n  /** Whether to animate the connection */\n  animated?: boolean;\n  /** Whether the connection is bidirectional */\n  bidirectional?: boolean;\n  /** Optional label */\n  label?: string;\n  /** Weight (0-1) affects opacity/thickness */\n  weight?: number;\n  /** Whether this connection is highlighted */\n  highlighted?: boolean;\n  /** Click handler */\n  onClick?: () => void;\n  /** Additional class names for the SVG group */\n  className?: string;\n}\n\n// =============================================================================\n// Helper Functions\n// =============================================================================\n\n/**\n * Calculate control points for a bezier curve\n */\nfunction getBezierControlPoints(\n  from: Point,\n  to: Point,\n  curvature: number = 0.5\n): { cp1: Point; cp2: Point } {\n  const dx = to.x - from.x;\n  const dy = to.y - from.y;\n  const midX = from.x + dx / 2;\n  const midY = from.y + dy / 2;\n\n  // Perpendicular offset for curve\n  const perpX = -dy * curvature * 0.3;\n  const perpY = dx * curvature * 0.3;\n\n  return {\n    cp1: { x: midX + perpX, y: midY + perpY },\n    cp2: { x: midX + perpX, y: midY + perpY },\n  };\n}\n\n/**\n * Generate SVG path for different connection types\n */\nfunction getPath(from: Point, to: Point, type: ConnectionType): string {\n  switch (type) {\n    case \"line\":\n      return `M ${from.x} ${from.y} L ${to.x} ${to.y}`;\n\n    case \"curve\": {\n      const { cp1, cp2 } = getBezierControlPoints(from, to);\n      return `M ${from.x} ${from.y} C ${cp1.x} ${cp1.y}, ${cp2.x} ${cp2.y}, ${to.x} ${to.y}`;\n    }\n\n    case \"arrow\":\n      return `M ${from.x} ${from.y} L ${to.x} ${to.y}`;\n\n    case \"glow\":\n      return `M ${from.x} ${from.y} L ${to.x} ${to.y}`;\n\n    case \"none\":\n    default:\n      return \"\";\n  }\n}\n\n/**\n * Calculate arrow head points\n */\nfunction getArrowHeadPoints(from: Point, to: Point, size: number = 10): string {\n  const angle = Math.atan2(to.y - from.y, to.x - from.x);\n  const arrowAngle = Math.PI / 6; // 30 degrees\n\n  const x1 = to.x - size * Math.cos(angle - arrowAngle);\n  const y1 = to.y - size * Math.sin(angle - arrowAngle);\n  const x2 = to.x - size * Math.cos(angle + arrowAngle);\n  const y2 = to.y - size * Math.sin(angle + arrowAngle);\n\n  return `M ${x1} ${y1} L ${to.x} ${to.y} L ${x2} ${y2}`;\n}\n\n/**\n * Calculate midpoint for label placement\n */\nfunction getMidpoint(from: Point, to: Point): Point {\n  return {\n    x: (from.x + to.x) / 2,\n    y: (from.y + to.y) / 2,\n  };\n}\n\n// =============================================================================\n// Connection Component\n// =============================================================================\n\nexport const Connection = memo(function Connection({\n  from,\n  to,\n  type = \"line\",\n  color = \"hsl(var(--theme-border))\",\n  strokeWidth = 2,\n  animated = false,\n  bidirectional = false,\n  label,\n  weight = 1,\n  highlighted = false,\n  onClick,\n  className,\n}: ConnectionProps) {\n  // Don't render invisible connections\n  if (type === \"none\") return null;\n\n  // Calculate path\n  const path = useMemo(() => getPath(from, to, type), [from, to, type]);\n\n  // Calculate arrow heads\n  const arrowPath = useMemo(() => {\n    if (type !== \"arrow\") return null;\n    return getArrowHeadPoints(from, to, 10);\n  }, [from, to, type]);\n\n  const reverseArrowPath = useMemo(() => {\n    if (type !== \"arrow\" || !bidirectional) return null;\n    return getArrowHeadPoints(to, from, 10);\n  }, [from, to, type, bidirectional]);\n\n  // Calculate label position\n  const labelPos = useMemo(() => getMidpoint(from, to), [from, to]);\n\n  // Calculate stroke opacity based on weight\n  const strokeOpacity = 0.3 + weight * 0.7;\n\n  // Calculate dynamic stroke width based on weight and highlight\n  const dynamicStrokeWidth = highlighted\n    ? strokeWidth * 1.5\n    : strokeWidth * (0.5 + weight * 0.5);\n\n  // Animation variants\n  const pathVariants = {\n    hidden: { pathLength: 0, opacity: 0 },\n    visible: {\n      pathLength: 1,\n      opacity: strokeOpacity,\n      transition: { duration: 0.5, ease: \"easeOut\" as const },\n    },\n  };\n\n  return (\n    <g className={cn(\"connection\", className)} onClick={onClick}>\n      {/* Glow effect for glow type */}\n      {type === \"glow\" && (\n        <motion.path\n          d={path}\n          fill=\"none\"\n          stroke={color}\n          strokeWidth={dynamicStrokeWidth * 3}\n          strokeLinecap=\"round\"\n          strokeOpacity={0.2}\n          filter=\"blur(4px)\"\n          initial=\"hidden\"\n          animate=\"visible\"\n          variants={pathVariants}\n        />\n      )}\n\n      {/* Main path */}\n      <motion.path\n        d={path}\n        fill=\"none\"\n        stroke={highlighted ? \"hsl(var(--theme-primary))\" : color}\n        strokeWidth={dynamicStrokeWidth}\n        strokeLinecap=\"round\"\n        strokeOpacity={strokeOpacity}\n        strokeDasharray={animated ? \"5 5\" : undefined}\n        initial=\"hidden\"\n        animate=\"visible\"\n        variants={pathVariants}\n        style={\n          animated\n            ? {\n                animation: \"dash 1s linear infinite\",\n              }\n            : undefined\n        }\n      />\n\n      {/* Arrow head */}\n      {arrowPath && (\n        <motion.path\n          d={arrowPath}\n          fill=\"none\"\n          stroke={highlighted ? \"hsl(var(--theme-primary))\" : color}\n          strokeWidth={dynamicStrokeWidth}\n          strokeLinecap=\"round\"\n          strokeLinejoin=\"round\"\n          strokeOpacity={strokeOpacity}\n          initial={{ opacity: 0 }}\n          animate={{ opacity: strokeOpacity }}\n          transition={{ delay: 0.3 }}\n        />\n      )}\n\n      {/* Reverse arrow head for bidirectional */}\n      {reverseArrowPath && (\n        <motion.path\n          d={reverseArrowPath}\n          fill=\"none\"\n          stroke={highlighted ? \"hsl(var(--theme-primary))\" : color}\n          strokeWidth={dynamicStrokeWidth}\n          strokeLinecap=\"round\"\n          strokeLinejoin=\"round\"\n          strokeOpacity={strokeOpacity}\n          initial={{ opacity: 0 }}\n          animate={{ opacity: strokeOpacity }}\n          transition={{ delay: 0.3 }}\n        />\n      )}\n\n      {/* Label */}\n      {label && (\n        <motion.g\n          initial={{ opacity: 0 }}\n          animate={{ opacity: 1 }}\n          transition={{ delay: 0.4 }}\n        >\n          <rect\n            x={labelPos.x - label.length * 3.5}\n            y={labelPos.y - 10}\n            width={label.length * 7}\n            height={20}\n            rx={4}\n            fill=\"hsl(var(--theme-background))\"\n            stroke={color}\n            strokeWidth={1}\n            strokeOpacity={0.5}\n          />\n          <text\n            x={labelPos.x}\n            y={labelPos.y + 4}\n            textAnchor=\"middle\"\n            fontSize={11}\n            fill=\"hsl(var(--theme-muted-foreground))\"\n            className=\"select-none pointer-events-none\"\n          >\n            {label}\n          </text>\n        </motion.g>\n      )}\n\n      {/* Clickable hit area (invisible wider stroke) */}\n      {onClick && (\n        <path\n          d={path}\n          fill=\"none\"\n          stroke=\"transparent\"\n          strokeWidth={Math.max(dynamicStrokeWidth * 3, 20)}\n          className=\"cursor-pointer\"\n        />\n      )}\n\n      {/* CSS for animated dash */}\n      <style>\n        {`\n          @keyframes dash {\n            to {\n              stroke-dashoffset: -10;\n            }\n          }\n        `}\n      </style>\n    </g>\n  );\n});\n\n// =============================================================================\n// Specialized Connection Components\n// =============================================================================\n\n/**\n * Simple line connection\n */\nexport const LineConnection = memo(function LineConnection(\n  props: Omit<ConnectionProps, \"type\">\n) {\n  return <Connection {...props} type=\"line\" />;\n});\n\n/**\n * Curved bezier connection\n */\nexport const CurveConnection = memo(function CurveConnection(\n  props: Omit<ConnectionProps, \"type\">\n) {\n  return <Connection {...props} type=\"curve\" />;\n});\n\n/**\n * Arrow connection with directional indicator\n */\nexport const ArrowConnection = memo(function ArrowConnection(\n  props: Omit<ConnectionProps, \"type\">\n) {\n  return <Connection {...props} type=\"arrow\" />;\n});\n\n/**\n * Glowing connection for emphasis\n */\nexport const GlowConnection = memo(function GlowConnection(\n  props: Omit<ConnectionProps, \"type\">\n) {\n  return <Connection {...props} type=\"glow\" />;\n});\n\n// =============================================================================\n// Connection Container (SVG wrapper)\n// =============================================================================\n\nexport interface ConnectionContainerProps {\n  children: React.ReactNode;\n  width: number;\n  height: number;\n  className?: string;\n}\n\nexport const ConnectionContainer = memo(function ConnectionContainer({\n  children,\n  width,\n  height,\n  className,\n}: ConnectionContainerProps) {\n  return (\n    <svg\n      width={width}\n      height={height}\n      className={cn(\"absolute inset-0 pointer-events-none\", className)}\n      style={{ overflow: \"visible\" }}\n    >\n      <defs>\n        {/* Arrow marker definition */}\n        <marker\n          id=\"arrow-marker\"\n          viewBox=\"0 0 10 10\"\n          refX=\"9\"\n          refY=\"5\"\n          markerWidth=\"6\"\n          markerHeight=\"6\"\n          orient=\"auto-start-reverse\"\n        >\n          <path d=\"M 0 0 L 10 5 L 0 10 z\" fill=\"currentColor\" />\n        </marker>\n\n        {/* Glow filter */}\n        <filter id=\"glow-filter\" x=\"-50%\" y=\"-50%\" width=\"200%\" height=\"200%\">\n          <feGaussianBlur stdDeviation=\"2\" result=\"blur\" />\n          <feMerge>\n            <feMergeNode in=\"blur\" />\n            <feMergeNode in=\"SourceGraphic\" />\n          </feMerge>\n        </filter>\n      </defs>\n      {children}\n    </svg>\n  );\n});\n\nexport default Connection;\n","/**\n * ERV Dimension Renderer\n *\n * The cinematic heart of the ERV architecture.\n * Renders any dimension configuration with spectacular visual effects.\n * Makes UIs \"melt and conjure like magic.\"\n *\n * Phase 3, Story 3.1: DimensionRenderer Component\n */\n\n\"use client\";\n\nimport {\n  memo,\n  useCallback,\n  useEffect,\n  useMemo,\n  useRef,\n  useState,\n} from \"react\";\nimport {\n  motion,\n  AnimatePresence,\n  useMotionValue,\n  useTransform,\n  useSpring,\n  type Variants,\n} from \"framer-motion\";\nimport { cn } from \"@/lib/utils\";\nimport { EntityCard } from \"./EntityCard\";\nimport { Connection, ConnectionContainer } from \"./Connection\";\nimport { useDimensionNavigation } from \"@/context/DimensionNavigationContext\";\nimport type {\n  Entity,\n  Relationship,\n  DimensionConfig,\n  ArrangementType,\n  GraphNode,\n  GraphEdge,\n} from \"@/lib/erv/types\";\n\n// =============================================================================\n// Animation Configuration - iOS-inspired springs\n// =============================================================================\n\nconst springs = {\n  smooth: { type: \"spring\" as const, stiffness: 200, damping: 25, mass: 0.8 },\n  snappy: { type: \"spring\" as const, stiffness: 400, damping: 30 },\n  bouncy: { type: \"spring\" as const, stiffness: 400, damping: 15 },\n  gentle: { type: \"spring\" as const, stiffness: 150, damping: 20, mass: 1 },\n  magic: { type: \"spring\" as const, stiffness: 300, damping: 20, mass: 0.5 },\n};\n\n// =============================================================================\n// Dimension Transition Effects\n// =============================================================================\n\nconst dimensionTransitions: Record<string, Variants> = {\n  // Entities dissolve into particles, then reform\n  dissolve: {\n    initial: {\n      opacity: 0,\n      scale: 0.8,\n      filter: \"blur(20px)\",\n      y: 30,\n    },\n    animate: {\n      opacity: 1,\n      scale: 1,\n      filter: \"blur(0px)\",\n      y: 0,\n      transition: springs.magic,\n    },\n    exit: {\n      opacity: 0,\n      scale: 1.1,\n      filter: \"blur(30px)\",\n      y: -20,\n      transition: { duration: 0.4 },\n    },\n  },\n\n  // Cards flip and morph into new arrangement\n  morph: {\n    initial: {\n      opacity: 0,\n      rotateY: -90,\n      scale: 0.5,\n    },\n    animate: {\n      opacity: 1,\n      rotateY: 0,\n      scale: 1,\n      transition: springs.bouncy,\n    },\n    exit: {\n      opacity: 0,\n      rotateY: 90,\n      scale: 0.5,\n      transition: { duration: 0.3 },\n    },\n  },\n\n  // Slide up with blur - elegant iOS style\n  slideBlur: {\n    initial: {\n      opacity: 0,\n      y: 60,\n      filter: \"blur(10px)\",\n    },\n    animate: {\n      opacity: 1,\n      y: 0,\n      filter: \"blur(0px)\",\n      transition: springs.smooth,\n    },\n    exit: {\n      opacity: 0,\n      y: -40,\n      filter: \"blur(10px)\",\n      transition: { duration: 0.25 },\n    },\n  },\n\n  // Cosmic zoom - for graph/orbit arrangements\n  cosmic: {\n    initial: {\n      opacity: 0,\n      scale: 0,\n      rotate: 180,\n    },\n    animate: {\n      opacity: 1,\n      scale: 1,\n      rotate: 0,\n      transition: { ...springs.magic, delay: 0.1 },\n    },\n    exit: {\n      opacity: 0,\n      scale: 2,\n      rotate: -180,\n      transition: { duration: 0.5 },\n    },\n  },\n\n  // Waterfall - staggered cascade\n  waterfall: {\n    initial: {\n      opacity: 0,\n      y: -100,\n      rotateX: 45,\n    },\n    animate: {\n      opacity: 1,\n      y: 0,\n      rotateX: 0,\n      transition: springs.bouncy,\n    },\n    exit: {\n      opacity: 0,\n      y: 100,\n      rotateX: -45,\n      transition: { duration: 0.3 },\n    },\n  },\n};\n\n// =============================================================================\n// Stagger Configurations\n// =============================================================================\n\nconst containerVariants: Variants = {\n  hidden: { opacity: 0 },\n  visible: {\n    opacity: 1,\n    transition: {\n      staggerChildren: 0.03,\n      delayChildren: 0.1,\n    },\n  },\n  exit: {\n    opacity: 0,\n    transition: {\n      staggerChildren: 0.02,\n      staggerDirection: -1,\n    },\n  },\n};\n\n// =============================================================================\n// Type Definitions\n// =============================================================================\n\nexport interface DimensionRendererProps {\n  /** The dimension configuration to render */\n  config: DimensionConfig;\n  /** Entities to display */\n  entities: Entity[];\n  /** Relationships between entities */\n  relationships?: Relationship[];\n  /** Currently selected entity */\n  selectedEntityId?: string;\n  /** Loading state */\n  loading?: boolean;\n  /** Error state */\n  error?: string;\n  /** Callback when entity is clicked */\n  onEntityClick?: (entity: Entity) => void;\n  /** Callback when entity is long-pressed */\n  onEntityLongPress?: (entity: Entity) => void;\n  /** Callback when connection is clicked */\n  onConnectionClick?: (relationship: Relationship) => void;\n  /** Container class name */\n  className?: string;\n  /** Debug mode - shows arrangement guides */\n  debug?: boolean;\n}\n\n// =============================================================================\n// Position Calculators\n// =============================================================================\n\nfunction calculateGridPositions(\n  count: number,\n  columns: number = 4,\n  gap: number = 16,\n  itemWidth: number = 200,\n  itemHeight: number = 150\n): { x: number; y: number }[] {\n  return Array.from({ length: count }, (_, i) => ({\n    x: (i % columns) * (itemWidth + gap),\n    y: Math.floor(i / columns) * (itemHeight + gap),\n  }));\n}\n\nfunction calculateSpiralPositions(\n  count: number,\n  centerX: number,\n  centerY: number,\n  baseRadius: number = 80,\n  growth: number = 20\n): { x: number; y: number }[] {\n  return Array.from({ length: count }, (_, i) => {\n    const angle = i * 0.5;\n    const radius = baseRadius + growth * angle;\n    return {\n      x: centerX + radius * Math.cos(angle),\n      y: centerY + radius * Math.sin(angle),\n    };\n  });\n}\n\nfunction calculateOrbitPositions(\n  count: number,\n  centerX: number,\n  centerY: number,\n  orbitRadius: number = 200\n): { x: number; y: number }[] {\n  return Array.from({ length: count }, (_, i) => {\n    const angle = (i / count) * Math.PI * 2 - Math.PI / 2;\n    return {\n      x: centerX + orbitRadius * Math.cos(angle),\n      y: centerY + orbitRadius * Math.sin(angle),\n    };\n  });\n}\n\nfunction calculateFlowPositions(\n  count: number,\n  containerWidth: number,\n  itemWidth: number = 200,\n  itemHeight: number = 150,\n  gap: number = 16\n): { x: number; y: number }[] {\n  const itemsPerRow = Math.floor(containerWidth / (itemWidth + gap)) || 1;\n  return Array.from({ length: count }, (_, i) => ({\n    x: (i % itemsPerRow) * (itemWidth + gap),\n    y: Math.floor(i / itemsPerRow) * (itemHeight + gap),\n  }));\n}\n\nfunction calculateTreePositions(\n  entities: Entity[],\n  relationships: Relationship[],\n  containerWidth: number\n): { x: number; y: number }[] {\n  // Find root nodes (no incoming edges)\n  const targetIds = new Set(relationships.map((r) => r.targetEntityId));\n  const roots = entities.filter((e) => !targetIds.has(e.entityId));\n\n  // Simple tree layout - BFS from roots\n  const positions: { x: number; y: number }[] = [];\n  const levels: Map<string, number> = new Map();\n  const indexInLevel: Map<number, number> = new Map();\n\n  // Set root levels\n  roots.forEach((root, i) => {\n    levels.set(root.entityId, 0);\n    positions[entities.findIndex((e) => e.entityId === root.entityId)] = {\n      x: (i + 1) * (containerWidth / (roots.length + 1)),\n      y: 50,\n    };\n  });\n\n  // BFS to assign levels\n  const queue = [...roots.map((r) => r.entityId)];\n  while (queue.length > 0) {\n    const nodeId = queue.shift()!;\n    const nodeLevel = levels.get(nodeId) || 0;\n\n    const children = relationships\n      .filter((r) => r.sourceEntityId === nodeId)\n      .map((r) => r.targetEntityId);\n\n    children.forEach((childId) => {\n      if (!levels.has(childId)) {\n        levels.set(childId, nodeLevel + 1);\n        queue.push(childId);\n\n        const level = nodeLevel + 1;\n        const idx = indexInLevel.get(level) || 0;\n        indexInLevel.set(level, idx + 1);\n\n        const entityIdx = entities.findIndex((e) => e.entityId === childId);\n        if (entityIdx >= 0) {\n          positions[entityIdx] = {\n            x: (idx + 1) * 150,\n            y: level * 120 + 50,\n          };\n        }\n      }\n    });\n  }\n\n  // Fill remaining positions\n  return entities.map((e, i) => positions[i] || { x: 50 + (i % 5) * 150, y: 50 + Math.floor(i / 5) * 120 });\n}\n\nfunction calculateGraphPositions(\n  entities: Entity[],\n  relationships: Relationship[],\n  width: number,\n  height: number\n): { x: number; y: number }[] {\n  // Force-directed layout simulation (simplified)\n  const positions = entities.map(() => ({\n    x: Math.random() * (width - 100) + 50,\n    y: Math.random() * (height - 100) + 50,\n  }));\n\n  // Run a few iterations of force simulation\n  const iterations = 50;\n  const repulsion = 5000;\n  const attraction = 0.01;\n\n  for (let iter = 0; iter < iterations; iter++) {\n    const forces = positions.map(() => ({ x: 0, y: 0 }));\n\n    // Repulsion between all nodes\n    for (let i = 0; i < entities.length; i++) {\n      for (let j = i + 1; j < entities.length; j++) {\n        const dx = positions[j].x - positions[i].x;\n        const dy = positions[j].y - positions[i].y;\n        const dist = Math.sqrt(dx * dx + dy * dy) || 1;\n        const force = repulsion / (dist * dist);\n\n        forces[i].x -= (dx / dist) * force;\n        forces[i].y -= (dy / dist) * force;\n        forces[j].x += (dx / dist) * force;\n        forces[j].y += (dy / dist) * force;\n      }\n    }\n\n    // Attraction along edges\n    relationships.forEach((rel) => {\n      const sourceIdx = entities.findIndex((e) => e.entityId === rel.sourceEntityId);\n      const targetIdx = entities.findIndex((e) => e.entityId === rel.targetEntityId);\n      if (sourceIdx >= 0 && targetIdx >= 0) {\n        const dx = positions[targetIdx].x - positions[sourceIdx].x;\n        const dy = positions[targetIdx].y - positions[sourceIdx].y;\n\n        forces[sourceIdx].x += dx * attraction;\n        forces[sourceIdx].y += dy * attraction;\n        forces[targetIdx].x -= dx * attraction;\n        forces[targetIdx].y -= dy * attraction;\n      }\n    });\n\n    // Apply forces\n    const damping = 0.85;\n    positions.forEach((pos, i) => {\n      pos.x += forces[i].x * damping;\n      pos.y += forces[i].y * damping;\n      // Clamp to bounds\n      pos.x = Math.max(50, Math.min(width - 50, pos.x));\n      pos.y = Math.max(50, Math.min(height - 50, pos.y));\n    });\n  }\n\n  return positions;\n}\n\n// =============================================================================\n// Arrangement Renderers\n// =============================================================================\n\ninterface ArrangementProps {\n  entities: Entity[];\n  relationships: Relationship[];\n  config: DimensionConfig;\n  positions: { x: number; y: number }[];\n  selectedEntityId?: string;\n  onEntityClick?: (entity: Entity) => void;\n  onEntityLongPress?: (entity: Entity) => void;\n  onConnectionClick?: (relationship: Relationship) => void;\n  containerRef: React.RefObject<HTMLDivElement | null>;\n}\n\nconst GridArrangement = memo(function GridArrangement({\n  entities,\n  config,\n  selectedEntityId,\n  onEntityClick,\n  onEntityLongPress,\n}: ArrangementProps) {\n  const columns = config.columns || 4;\n  const gap = config.gap || 16;\n\n  return (\n    <motion.div\n      variants={containerVariants}\n      initial=\"hidden\"\n      animate=\"visible\"\n      exit=\"exit\"\n      className=\"grid\"\n      style={{\n        gridTemplateColumns: `repeat(${columns}, minmax(0, 1fr))`,\n        gap: `${gap}px`,\n      }}\n    >\n      {entities.map((entity, index) => (\n        <motion.div\n          key={entity.entityId}\n          variants={dimensionTransitions.slideBlur}\n          custom={index}\n          layout\n          layoutId={entity.entityId}\n        >\n          <EntityCard\n            entity={entity}\n            shape={config.entityShape}\n            size={config.itemSize === \"auto\" ? \"md\" : config.itemSize}\n            selected={selectedEntityId === entity.entityId}\n            onClick={onEntityClick}\n            onLongPress={onEntityLongPress}\n          />\n        </motion.div>\n      ))}\n    </motion.div>\n  );\n});\n\nconst ListArrangement = memo(function ListArrangement({\n  entities,\n  config,\n  selectedEntityId,\n  onEntityClick,\n  onEntityLongPress,\n}: ArrangementProps) {\n  return (\n    <motion.div\n      variants={containerVariants}\n      initial=\"hidden\"\n      animate=\"visible\"\n      exit=\"exit\"\n      className=\"flex flex-col\"\n      style={{ gap: `${config.gap || 8}px` }}\n    >\n      {entities.map((entity, index) => (\n        <motion.div\n          key={entity.entityId}\n          variants={dimensionTransitions.slideBlur}\n          custom={index}\n          layout\n          layoutId={entity.entityId}\n        >\n          <EntityCard\n            entity={entity}\n            shape=\"square\"\n            size={config.itemSize === \"auto\" ? \"md\" : config.itemSize}\n            selected={selectedEntityId === entity.entityId}\n            onClick={onEntityClick}\n            onLongPress={onEntityLongPress}\n          />\n        </motion.div>\n      ))}\n    </motion.div>\n  );\n});\n\nconst FlowArrangement = memo(function FlowArrangement({\n  entities,\n  config,\n  selectedEntityId,\n  onEntityClick,\n  onEntityLongPress,\n}: ArrangementProps) {\n  return (\n    <motion.div\n      variants={containerVariants}\n      initial=\"hidden\"\n      animate=\"visible\"\n      exit=\"exit\"\n      className=\"flex flex-wrap\"\n      style={{ gap: `${config.gap || 16}px` }}\n    >\n      {entities.map((entity, index) => (\n        <motion.div\n          key={entity.entityId}\n          variants={dimensionTransitions.dissolve}\n          custom={index}\n          layout\n          layoutId={entity.entityId}\n        >\n          <EntityCard\n            entity={entity}\n            shape={config.entityShape}\n            size={config.itemSize === \"auto\" ? \"md\" : config.itemSize}\n            selected={selectedEntityId === entity.entityId}\n            onClick={onEntityClick}\n            onLongPress={onEntityLongPress}\n          />\n        </motion.div>\n      ))}\n    </motion.div>\n  );\n});\n\nconst SpiralArrangement = memo(function SpiralArrangement({\n  entities,\n  positions,\n  config,\n  selectedEntityId,\n  onEntityClick,\n  onEntityLongPress,\n  containerRef,\n}: ArrangementProps) {\n  return (\n    <motion.div\n      variants={containerVariants}\n      initial=\"hidden\"\n      animate=\"visible\"\n      exit=\"exit\"\n      className=\"relative w-full h-full min-h-[600px]\"\n    >\n      {entities.map((entity, index) => {\n        const pos = positions[index] || { x: 0, y: 0 };\n        return (\n          <motion.div\n            key={entity.entityId}\n            className=\"absolute\"\n            variants={dimensionTransitions.cosmic}\n            custom={index}\n            layout\n            layoutId={entity.entityId}\n            style={{\n              left: pos.x,\n              top: pos.y,\n              transform: \"translate(-50%, -50%)\",\n            }}\n          >\n            <EntityCard\n              entity={entity}\n              shape=\"circle\"\n              size={config.itemSize === \"auto\" ? \"md\" : config.itemSize}\n              selected={selectedEntityId === entity.entityId}\n              onClick={onEntityClick}\n              onLongPress={onEntityLongPress}\n            />\n          </motion.div>\n        );\n      })}\n    </motion.div>\n  );\n});\n\nconst OrbitArrangement = memo(function OrbitArrangement({\n  entities,\n  positions,\n  config,\n  selectedEntityId,\n  onEntityClick,\n  onEntityLongPress,\n}: ArrangementProps) {\n  // Central \"sun\" - first entity or a summary\n  const centerEntity = entities[0];\n  const orbitEntities = entities.slice(1);\n  const orbitPositions = positions.slice(1);\n\n  return (\n    <motion.div\n      variants={containerVariants}\n      initial=\"hidden\"\n      animate=\"visible\"\n      exit=\"exit\"\n      className=\"relative w-full h-full min-h-[600px]\"\n    >\n      {/* Center entity */}\n      {centerEntity && (\n        <motion.div\n          className=\"absolute left-1/2 top-1/2\"\n          variants={dimensionTransitions.cosmic}\n          layout\n          layoutId={centerEntity.entityId}\n          style={{ transform: \"translate(-50%, -50%)\" }}\n        >\n          <EntityCard\n            entity={centerEntity}\n            shape=\"circle\"\n            size=\"lg\"\n            selected={selectedEntityId === centerEntity.entityId}\n            onClick={onEntityClick}\n            onLongPress={onEntityLongPress}\n          />\n        </motion.div>\n      )}\n\n      {/* Orbiting entities */}\n      {orbitEntities.map((entity, index) => {\n        const pos = orbitPositions[index] || { x: 0, y: 0 };\n        return (\n          <motion.div\n            key={entity.entityId}\n            className=\"absolute\"\n            variants={dimensionTransitions.cosmic}\n            custom={index}\n            layout\n            layoutId={entity.entityId}\n            animate={{\n              left: pos.x,\n              top: pos.y,\n              rotate: [0, 360],\n            }}\n            transition={{\n              rotate: {\n                duration: 60 + index * 10,\n                repeat: Infinity,\n                ease: \"linear\",\n              },\n              ...springs.magic,\n            }}\n            style={{ transform: \"translate(-50%, -50%)\" }}\n          >\n            <EntityCard\n              entity={entity}\n              shape=\"circle\"\n              size={config.itemSize === \"auto\" ? \"sm\" : config.itemSize}\n              selected={selectedEntityId === entity.entityId}\n              onClick={onEntityClick}\n              onLongPress={onEntityLongPress}\n            />\n          </motion.div>\n        );\n      })}\n\n      {/* Orbit rings */}\n      <svg className=\"absolute inset-0 w-full h-full pointer-events-none opacity-20\">\n        <circle\n          cx=\"50%\"\n          cy=\"50%\"\n          r=\"200\"\n          fill=\"none\"\n          stroke=\"hsl(var(--theme-primary))\"\n          strokeWidth=\"1\"\n          strokeDasharray=\"4 4\"\n        />\n      </svg>\n    </motion.div>\n  );\n});\n\nconst GraphArrangement = memo(function GraphArrangement({\n  entities,\n  relationships,\n  positions,\n  config,\n  selectedEntityId,\n  onEntityClick,\n  onEntityLongPress,\n  onConnectionClick,\n  containerRef,\n}: ArrangementProps) {\n  const containerBounds = containerRef.current?.getBoundingClientRect();\n  const width = containerBounds?.width || 800;\n  const height = containerBounds?.height || 600;\n\n  // Map entity IDs to positions\n  const positionMap = useMemo(() => {\n    const map = new Map<string, { x: number; y: number }>();\n    entities.forEach((e, i) => {\n      map.set(e.entityId, positions[i] || { x: 0, y: 0 });\n    });\n    return map;\n  }, [entities, positions]);\n\n  return (\n    <motion.div\n      variants={containerVariants}\n      initial=\"hidden\"\n      animate=\"visible\"\n      exit=\"exit\"\n      className=\"relative w-full h-full min-h-[600px]\"\n    >\n      {/* Connection layer */}\n      <ConnectionContainer width={width} height={height}>\n        {relationships.map((rel) => {\n          const from = positionMap.get(rel.sourceEntityId);\n          const to = positionMap.get(rel.targetEntityId);\n          if (!from || !to) return null;\n\n          return (\n            <Connection\n              key={rel._id}\n              from={from}\n              to={to}\n              type={config.connectionStyle}\n              weight={rel.weight}\n              label={rel.label}\n              highlighted={\n                selectedEntityId === rel.sourceEntityId ||\n                selectedEntityId === rel.targetEntityId\n              }\n              onClick={() => onConnectionClick?.(rel)}\n            />\n          );\n        })}\n      </ConnectionContainer>\n\n      {/* Node layer */}\n      {entities.map((entity, index) => {\n        const pos = positions[index] || { x: 0, y: 0 };\n        return (\n          <motion.div\n            key={entity.entityId}\n            className=\"absolute z-10\"\n            variants={dimensionTransitions.dissolve}\n            custom={index}\n            layout\n            layoutId={entity.entityId}\n            drag\n            dragMomentum={false}\n            dragElastic={0.1}\n            style={{\n              left: pos.x,\n              top: pos.y,\n              transform: \"translate(-50%, -50%)\",\n            }}\n          >\n            <EntityCard\n              entity={entity}\n              shape={config.entityShape}\n              size={config.itemSize === \"auto\" ? \"md\" : config.itemSize}\n              selected={selectedEntityId === entity.entityId}\n              onClick={onEntityClick}\n              onLongPress={onEntityLongPress}\n            />\n          </motion.div>\n        );\n      })}\n    </motion.div>\n  );\n});\n\nconst TreeArrangement = memo(function TreeArrangement({\n  entities,\n  relationships,\n  positions,\n  config,\n  selectedEntityId,\n  onEntityClick,\n  onEntityLongPress,\n  onConnectionClick,\n  containerRef,\n}: ArrangementProps) {\n  const containerBounds = containerRef.current?.getBoundingClientRect();\n  const width = containerBounds?.width || 800;\n  const height = containerBounds?.height || 600;\n\n  // Map entity IDs to positions\n  const positionMap = useMemo(() => {\n    const map = new Map<string, { x: number; y: number }>();\n    entities.forEach((e, i) => {\n      map.set(e.entityId, positions[i] || { x: 0, y: 0 });\n    });\n    return map;\n  }, [entities, positions]);\n\n  return (\n    <motion.div\n      variants={containerVariants}\n      initial=\"hidden\"\n      animate=\"visible\"\n      exit=\"exit\"\n      className=\"relative w-full h-full min-h-[600px]\"\n    >\n      {/* Connection layer */}\n      <ConnectionContainer width={width} height={height}>\n        {relationships.map((rel) => {\n          const from = positionMap.get(rel.sourceEntityId);\n          const to = positionMap.get(rel.targetEntityId);\n          if (!from || !to) return null;\n\n          return (\n            <Connection\n              key={rel._id}\n              from={from}\n              to={to}\n              type=\"curve\"\n              weight={rel.weight}\n              highlighted={\n                selectedEntityId === rel.sourceEntityId ||\n                selectedEntityId === rel.targetEntityId\n              }\n              onClick={() => onConnectionClick?.(rel)}\n            />\n          );\n        })}\n      </ConnectionContainer>\n\n      {/* Node layer */}\n      {entities.map((entity, index) => {\n        const pos = positions[index] || { x: 0, y: 0 };\n        return (\n          <motion.div\n            key={entity.entityId}\n            className=\"absolute z-10\"\n            variants={dimensionTransitions.waterfall}\n            custom={index}\n            layout\n            layoutId={entity.entityId}\n            style={{\n              left: pos.x,\n              top: pos.y,\n              transform: \"translate(-50%, -50%)\",\n            }}\n          >\n            <EntityCard\n              entity={entity}\n              shape={config.entityShape}\n              size={config.itemSize === \"auto\" ? \"md\" : config.itemSize}\n              selected={selectedEntityId === entity.entityId}\n              onClick={onEntityClick}\n              onLongPress={onEntityLongPress}\n            />\n          </motion.div>\n        );\n      })}\n    </motion.div>\n  );\n});\n\n// =============================================================================\n// Loading & Error States\n// =============================================================================\n\nconst LoadingState = memo(function LoadingState() {\n  return (\n    <motion.div\n      initial={{ opacity: 0 }}\n      animate={{ opacity: 1 }}\n      exit={{ opacity: 0 }}\n      className=\"flex items-center justify-center h-full min-h-[400px]\"\n    >\n      <div className=\"flex flex-col items-center gap-4\">\n        <motion.div\n          className=\"w-16 h-16 rounded-full border-4 border-[hsl(var(--theme-primary)/0.2)] border-t-[hsl(var(--theme-primary))]\"\n          animate={{ rotate: 360 }}\n          transition={{ duration: 1, repeat: Infinity, ease: \"linear\" }}\n        />\n        <motion.p\n          className=\"text-[hsl(var(--theme-muted-foreground))]\"\n          animate={{ opacity: [0.5, 1, 0.5] }}\n          transition={{ duration: 1.5, repeat: Infinity }}\n        >\n          Conjuring dimension...\n        </motion.p>\n      </div>\n    </motion.div>\n  );\n});\n\nconst ErrorState = memo(function ErrorState({ message }: { message: string }) {\n  return (\n    <motion.div\n      initial={{ opacity: 0, scale: 0.95 }}\n      animate={{ opacity: 1, scale: 1 }}\n      exit={{ opacity: 0, scale: 0.95 }}\n      className=\"flex items-center justify-center h-full min-h-[400px]\"\n    >\n      <div className=\"text-center p-8 rounded-xl bg-red-500/10 border border-red-500/20 max-w-md\">\n        <div className=\"w-12 h-12 rounded-full bg-red-500/20 flex items-center justify-center mx-auto mb-4\">\n          <span className=\"text-2xl\">âš ï¸</span>\n        </div>\n        <h3 className=\"text-lg font-semibold text-red-500 mb-2\">\n          Dimension Error\n        </h3>\n        <p className=\"text-[hsl(var(--theme-muted-foreground))]\">{message}</p>\n      </div>\n    </motion.div>\n  );\n});\n\nconst EmptyState = memo(function EmptyState({ config }: { config: DimensionConfig }) {\n  return (\n    <motion.div\n      initial={{ opacity: 0, y: 20 }}\n      animate={{ opacity: 1, y: 0 }}\n      exit={{ opacity: 0, y: -20 }}\n      className=\"flex items-center justify-center h-full min-h-[400px]\"\n    >\n      <div className=\"text-center p-8\">\n        <motion.div\n          className=\"w-20 h-20 rounded-full bg-[hsl(var(--theme-muted))] flex items-center justify-center mx-auto mb-4\"\n          animate={{\n            scale: [1, 1.05, 1],\n            opacity: [0.5, 0.8, 0.5],\n          }}\n          transition={{ duration: 3, repeat: Infinity }}\n        >\n          <span className=\"text-3xl\">âœ¨</span>\n        </motion.div>\n        <h3 className=\"text-lg font-semibold text-[hsl(var(--theme-foreground))] mb-2\">\n          {config.name} is empty\n        </h3>\n        <p className=\"text-[hsl(var(--theme-muted-foreground))]\">\n          No entities found for this dimension\n        </p>\n      </div>\n    </motion.div>\n  );\n});\n\n// =============================================================================\n// Main Component\n// =============================================================================\n\nexport const DimensionRenderer = memo(function DimensionRenderer({\n  config,\n  entities,\n  relationships = [],\n  selectedEntityId,\n  loading = false,\n  error,\n  onEntityClick,\n  onEntityLongPress,\n  onConnectionClick,\n  className,\n  debug = false,\n}: DimensionRendererProps) {\n  const containerRef = useRef<HTMLDivElement>(null);\n  const [containerSize, setContainerSize] = useState({ width: 800, height: 600 });\n\n  // Get navigation context for Claw AI updates\n  const navigation = useDimensionNavigation();\n\n  // Track container size\n  useEffect(() => {\n    if (!containerRef.current) return;\n\n    const observer = new ResizeObserver((entries) => {\n      const entry = entries[0];\n      if (entry) {\n        setContainerSize({\n          width: entry.contentRect.width,\n          height: entry.contentRect.height,\n        });\n      }\n    });\n\n    observer.observe(containerRef.current);\n    return () => observer.disconnect();\n  }, []);\n\n  // Calculate positions based on arrangement\n  const positions = useMemo(() => {\n    const { width, height } = containerSize;\n    const centerX = width / 2;\n    const centerY = height / 2;\n\n    switch (config.arrangement) {\n      case \"grid\":\n        return calculateGridPositions(\n          entities.length,\n          config.columns || 4,\n          config.gap || 16\n        );\n      case \"spiral\":\n        return calculateSpiralPositions(entities.length, centerX, centerY);\n      case \"orbit\":\n        return calculateOrbitPositions(entities.length, centerX, centerY);\n      case \"flow\":\n        return calculateFlowPositions(entities.length, width);\n      case \"tree\":\n        return calculateTreePositions(entities, relationships, width);\n      case \"graph\":\n        return calculateGraphPositions(entities, relationships, width, height);\n      case \"list\":\n      default:\n        return entities.map((_, i) => ({ x: 0, y: i * 80 }));\n    }\n  }, [config.arrangement, config.columns, config.gap, entities, relationships, containerSize]);\n\n  // Update navigation context when dimension changes\n  useEffect(() => {\n    navigation.navigateTo(config.id, config.name);\n  }, [config.id, config.name, navigation]);\n\n  // Select the appropriate arrangement renderer\n  const ArrangementComponent = useMemo(() => {\n    const arrangements: Record<ArrangementType, typeof GridArrangement> = {\n      grid: GridArrangement,\n      list: ListArrangement,\n      flow: FlowArrangement,\n      spiral: SpiralArrangement,\n      orbit: OrbitArrangement,\n      tree: TreeArrangement,\n      graph: GraphArrangement,\n    };\n    return arrangements[config.arrangement] || GridArrangement;\n  }, [config.arrangement]);\n\n  // Choose transition based on arrangement\n  const transitionKey = useMemo(() => {\n    const transitions: Record<ArrangementType, string> = {\n      grid: \"slideBlur\",\n      list: \"slideBlur\",\n      flow: \"dissolve\",\n      spiral: \"cosmic\",\n      orbit: \"cosmic\",\n      tree: \"waterfall\",\n      graph: \"dissolve\",\n    };\n    return transitions[config.arrangement] || \"slideBlur\";\n  }, [config.arrangement]);\n\n  return (\n    <motion.div\n      ref={containerRef}\n      className={cn(\n        \"relative w-full h-full overflow-auto\",\n        \"bg-[hsl(var(--theme-background))]\",\n        className\n      )}\n      initial={{ opacity: 0 }}\n      animate={{ opacity: 1 }}\n      exit={{ opacity: 0 }}\n    >\n      {/* Debug overlay */}\n      {debug && (\n        <div className=\"absolute top-2 left-2 z-50 text-xs bg-black/80 text-white p-2 rounded\">\n          <div>Arrangement: {config.arrangement}</div>\n          <div>Entities: {entities.length}</div>\n          <div>Relationships: {relationships.length}</div>\n          <div>Size: {containerSize.width}x{containerSize.height}</div>\n        </div>\n      )}\n\n      {/* Background gradient based on dimension */}\n      <div\n        className={cn(\n          \"absolute inset-0 opacity-30 pointer-events-none\",\n          config.gradient && `bg-gradient-to-br ${config.gradient}`\n        )}\n      />\n\n      {/* Main content */}\n      <div className=\"relative z-10 p-4 md:p-6\">\n        <AnimatePresence mode=\"wait\">\n          {loading ? (\n            <LoadingState key=\"loading\" />\n          ) : error ? (\n            <ErrorState key=\"error\" message={error} />\n          ) : entities.length === 0 ? (\n            <EmptyState key=\"empty\" config={config} />\n          ) : (\n            <motion.div\n              key={`${config.id}-${transitionKey}`}\n              initial={{ opacity: 0 }}\n              animate={{ opacity: 1 }}\n              exit={{ opacity: 0 }}\n              transition={{ duration: 0.2 }}\n            >\n              <ArrangementComponent\n                entities={entities}\n                relationships={relationships}\n                config={config}\n                positions={positions}\n                selectedEntityId={selectedEntityId}\n                onEntityClick={onEntityClick}\n                onEntityLongPress={onEntityLongPress}\n                onConnectionClick={onConnectionClick}\n                containerRef={containerRef}\n              />\n            </motion.div>\n          )}\n        </AnimatePresence>\n      </div>\n\n      {/* Ambient particles for magical effect */}\n      <AmbientParticles arrangement={config.arrangement} />\n    </motion.div>\n  );\n});\n\n// =============================================================================\n// Ambient Particles - The \"Magic\" Effect\n// =============================================================================\n\nconst AmbientParticles = memo(function AmbientParticles({\n  arrangement,\n}: {\n  arrangement: ArrangementType;\n}) {\n  const [particles, setParticles] = useState<\n    { id: number; x: number; y: number; size: number; duration: number }[]\n  >([]);\n\n  useEffect(() => {\n    // Generate particles based on arrangement\n    const count = arrangement === \"orbit\" || arrangement === \"spiral\" ? 30 : 15;\n    const newParticles = Array.from({ length: count }, (_, i) => ({\n      id: i,\n      x: Math.random() * 100,\n      y: Math.random() * 100,\n      size: 2 + Math.random() * 4,\n      duration: 3 + Math.random() * 4,\n    }));\n    setParticles(newParticles);\n  }, [arrangement]);\n\n  return (\n    <div className=\"absolute inset-0 overflow-hidden pointer-events-none\">\n      {particles.map((particle) => (\n        <motion.div\n          key={particle.id}\n          className=\"absolute rounded-full bg-[hsl(var(--theme-primary))]\"\n          style={{\n            width: particle.size,\n            height: particle.size,\n            left: `${particle.x}%`,\n            top: `${particle.y}%`,\n          }}\n          animate={{\n            opacity: [0, 0.6, 0],\n            scale: [0.5, 1, 0.5],\n            y: [0, -30, -60],\n          }}\n          transition={{\n            duration: particle.duration,\n            repeat: Infinity,\n            delay: Math.random() * 2,\n            ease: \"easeInOut\",\n          }}\n        />\n      ))}\n    </div>\n  );\n});\n\nexport default DimensionRenderer;\n","/**\n * Dimension Portal - Reality-Bending Transition Effect\n *\n * Creates a full-screen \"matrix-bending\" effect when transitioning\n * between dimensions. The UI fragments, dissolves into digital particles,\n * then reforms as the new dimension materializes.\n *\n * \"The fabric of the interface is being rewritten.\"\n */\n\n\"use client\";\n\nimport { memo, useEffect, useState, useCallback, useRef } from \"react\";\nimport { motion, AnimatePresence, useMotionValue, useTransform, useSpring } from \"framer-motion\";\nimport { cn } from \"@/lib/utils\";\n\n// =============================================================================\n// Types\n// =============================================================================\n\nexport interface DimensionPortalProps {\n  /** Whether the portal transition is active */\n  isTransitioning: boolean;\n  /** The dimension we're transitioning to */\n  targetDimension?: {\n    id: string;\n    name: string;\n    gradient?: string;\n    metaphor?: string;\n  };\n  /** Called when transition completes */\n  onTransitionComplete?: () => void;\n  /** Duration of the transition in ms */\n  duration?: number;\n  /** Intensity of the effect (0-1) */\n  intensity?: number;\n}\n\ninterface Particle {\n  id: number;\n  x: number;\n  y: number;\n  size: number;\n  color: string;\n  velocity: { x: number; y: number };\n  life: number;\n  maxLife: number;\n  char?: string;\n}\n\ninterface GridCell {\n  x: number;\n  y: number;\n  opacity: number;\n  scale: number;\n  rotation: number;\n  delay: number;\n}\n\n// =============================================================================\n// Constants\n// =============================================================================\n\nconst MATRIX_CHARS = \"ã‚¢ã‚¤ã‚¦ã‚¨ã‚ªã‚«ã‚­ã‚¯ã‚±ã‚³ã‚µã‚·ã‚¹ã‚»ã‚½ã‚¿ãƒãƒ„ãƒ†ãƒˆãƒŠãƒ‹ãƒŒãƒãƒŽãƒãƒ’ãƒ•ãƒ˜ãƒ›ãƒžãƒŸãƒ ãƒ¡ãƒ¢ãƒ¤ãƒ¦ãƒ¨ãƒ©ãƒªãƒ«ãƒ¬ãƒ­ãƒ¯ãƒ²ãƒ³0123456789\";\nconst PARTICLE_COUNT = 150;\nconst GRID_SIZE = 20;\n\n// =============================================================================\n// Shaders / Visual Effects (CSS-based)\n// =============================================================================\n\nconst glitchKeyframes = `\n  @keyframes glitch-anim {\n    0% { clip-path: inset(40% 0 61% 0); transform: translate(-2px, 2px); }\n    20% { clip-path: inset(92% 0 1% 0); transform: translate(2px, -2px); }\n    40% { clip-path: inset(43% 0 1% 0); transform: translate(-2px, 2px); }\n    60% { clip-path: inset(25% 0 58% 0); transform: translate(2px, -2px); }\n    80% { clip-path: inset(54% 0 7% 0); transform: translate(-2px, 2px); }\n    100% { clip-path: inset(58% 0 43% 0); transform: translate(0); }\n  }\n\n  @keyframes reality-tear {\n    0% { transform: scaleY(1) translateY(0); filter: blur(0px); }\n    25% { transform: scaleY(1.02) translateY(-2px); filter: blur(1px); }\n    50% { transform: scaleY(0.98) translateY(2px); filter: blur(2px); }\n    75% { transform: scaleY(1.01) translateY(-1px); filter: blur(1px); }\n    100% { transform: scaleY(1) translateY(0); filter: blur(0px); }\n  }\n\n  @keyframes digital-rain {\n    0% { transform: translateY(-100%); opacity: 0; }\n    10% { opacity: 1; }\n    90% { opacity: 1; }\n    100% { transform: translateY(100vh); opacity: 0; }\n  }\n\n  @keyframes pulse-glow {\n    0%, 100% { box-shadow: 0 0 20px hsl(var(--theme-primary) / 0.3); }\n    50% { box-shadow: 0 0 60px hsl(var(--theme-primary) / 0.6); }\n  }\n`;\n\n// =============================================================================\n// Sub-components\n// =============================================================================\n\n/** Matrix-style digital rain effect */\nconst DigitalRain = memo(function DigitalRain({ active }: { active: boolean }) {\n  const [columns, setColumns] = useState<{ id: number; x: number; chars: string[]; speed: number; delay: number }[]>([]);\n\n  useEffect(() => {\n    if (!active) return;\n\n    const colCount = Math.floor(window.innerWidth / 20);\n    const newColumns = Array.from({ length: colCount }, (_, i) => ({\n      id: i,\n      x: i * 20,\n      chars: Array.from({ length: 30 }, () => MATRIX_CHARS[Math.floor(Math.random() * MATRIX_CHARS.length)]),\n      speed: 1 + Math.random() * 2,\n      delay: Math.random() * 2,\n    }));\n    setColumns(newColumns);\n  }, [active]);\n\n  if (!active) return null;\n\n  return (\n    <div className=\"absolute inset-0 overflow-hidden pointer-events-none z-20\">\n      {columns.map((col) => (\n        <motion.div\n          key={col.id}\n          className=\"absolute top-0 text-[hsl(var(--theme-primary))] font-mono text-sm leading-tight\"\n          style={{ left: col.x }}\n          initial={{ y: \"-100%\" }}\n          animate={{ y: \"100vh\" }}\n          transition={{\n            duration: col.speed,\n            delay: col.delay,\n            ease: \"linear\",\n          }}\n        >\n          {col.chars.map((char, i) => (\n            <div\n              key={i}\n              style={{\n                opacity: 1 - i * 0.03,\n                textShadow: i === 0 ? \"0 0 10px currentColor\" : \"none\",\n              }}\n            >\n              {char}\n            </div>\n          ))}\n        </motion.div>\n      ))}\n    </div>\n  );\n});\n\n/** Fragmenting grid effect - reality breaking apart */\nconst FragmentGrid = memo(function FragmentGrid({\n  active,\n  phase,\n}: {\n  active: boolean;\n  phase: \"fragment\" | \"void\" | \"reform\";\n}) {\n  const [cells, setCells] = useState<GridCell[]>([]);\n\n  useEffect(() => {\n    if (!active) return;\n\n    const cols = Math.ceil(window.innerWidth / GRID_SIZE);\n    const rows = Math.ceil(window.innerHeight / GRID_SIZE);\n    const newCells: GridCell[] = [];\n\n    for (let y = 0; y < rows; y++) {\n      for (let x = 0; x < cols; x++) {\n        const distFromCenter = Math.sqrt(\n          Math.pow(x - cols / 2, 2) + Math.pow(y - rows / 2, 2)\n        );\n        newCells.push({\n          x: x * GRID_SIZE,\n          y: y * GRID_SIZE,\n          opacity: 1,\n          scale: 1,\n          rotation: 0,\n          delay: distFromCenter * 0.01,\n        });\n      }\n    }\n    setCells(newCells);\n  }, [active]);\n\n  if (!active) return null;\n\n  return (\n    <div className=\"absolute inset-0 overflow-hidden pointer-events-none z-10\">\n      {cells.map((cell, i) => (\n        <motion.div\n          key={i}\n          className=\"absolute bg-[hsl(var(--theme-background))] border border-[hsl(var(--theme-primary)/0.1)]\"\n          style={{\n            left: cell.x,\n            top: cell.y,\n            width: GRID_SIZE,\n            height: GRID_SIZE,\n          }}\n          initial={{ opacity: 1, scale: 1, rotate: 0 }}\n          animate={\n            phase === \"fragment\"\n              ? {\n                  opacity: [1, 0.8, 0],\n                  scale: [1, 1.2, 0],\n                  rotate: [0, Math.random() * 180 - 90],\n                  x: (Math.random() - 0.5) * 200,\n                  y: (Math.random() - 0.5) * 200,\n                }\n              : phase === \"reform\"\n              ? {\n                  opacity: [0, 0.8, 1],\n                  scale: [0, 1.1, 1],\n                  rotate: [Math.random() * 180 - 90, 0],\n                  x: 0,\n                  y: 0,\n                }\n              : {}\n          }\n          transition={{\n            duration: 0.6,\n            delay: cell.delay,\n            ease: [0.43, 0.13, 0.23, 0.96],\n          }}\n        />\n      ))}\n    </div>\n  );\n});\n\n/** The void between dimensions - pure chaos */\nconst DimensionalVoid = memo(function DimensionalVoid({ active }: { active: boolean }) {\n  if (!active) return null;\n\n  return (\n    <motion.div\n      className=\"absolute inset-0 z-15\"\n      initial={{ opacity: 0 }}\n      animate={{ opacity: 1 }}\n      exit={{ opacity: 0 }}\n      transition={{ duration: 0.3 }}\n    >\n      {/* Radial gradient void */}\n      <div\n        className=\"absolute inset-0\"\n        style={{\n          background: `radial-gradient(circle at 50% 50%,\n            transparent 0%,\n            hsl(var(--theme-background) / 0.5) 30%,\n            hsl(var(--theme-background)) 70%\n          )`,\n        }}\n      />\n\n      {/* Pulsing core */}\n      <motion.div\n        className=\"absolute left-1/2 top-1/2 -translate-x-1/2 -translate-y-1/2 w-4 h-4 rounded-full bg-[hsl(var(--theme-primary))]\"\n        animate={{\n          scale: [1, 50, 100],\n          opacity: [1, 0.5, 0],\n        }}\n        transition={{\n          duration: 0.8,\n          ease: \"easeOut\",\n        }}\n        style={{\n          boxShadow: \"0 0 100px 50px hsl(var(--theme-primary) / 0.5)\",\n        }}\n      />\n\n      {/* Glitch lines */}\n      {Array.from({ length: 8 }).map((_, i) => (\n        <motion.div\n          key={i}\n          className=\"absolute left-0 right-0 h-px bg-[hsl(var(--theme-primary))]\"\n          style={{ top: `${10 + i * 12}%` }}\n          initial={{ scaleX: 0, opacity: 0 }}\n          animate={{\n            scaleX: [0, 1, 0],\n            opacity: [0, 1, 0],\n            x: [\"-100%\", \"0%\", \"100%\"],\n          }}\n          transition={{\n            duration: 0.3,\n            delay: i * 0.05,\n            ease: \"easeInOut\",\n          }}\n        />\n      ))}\n    </motion.div>\n  );\n});\n\n/** Dimension name reveal effect */\nconst DimensionReveal = memo(function DimensionReveal({\n  name,\n  metaphor,\n  gradient,\n}: {\n  name: string;\n  metaphor?: string;\n  gradient?: string;\n}) {\n  return (\n    <motion.div\n      className=\"absolute inset-0 flex items-center justify-center z-30 pointer-events-none\"\n      initial={{ opacity: 0 }}\n      animate={{ opacity: 1 }}\n      exit={{ opacity: 0 }}\n    >\n      <div className=\"text-center\">\n        {/* Dimension name with glitch effect */}\n        <motion.h1\n          className={cn(\n            \"text-6xl md:text-8xl font-bold tracking-tighter\",\n            gradient\n              ? `bg-gradient-to-r ${gradient} bg-clip-text text-transparent`\n              : \"text-[hsl(var(--theme-foreground))]\"\n          )}\n          initial={{ y: 50, opacity: 0, filter: \"blur(10px)\" }}\n          animate={{ y: 0, opacity: 1, filter: \"blur(0px)\" }}\n          transition={{ duration: 0.5, delay: 0.3 }}\n        >\n          {name.split(\"\").map((char, i) => (\n            <motion.span\n              key={i}\n              initial={{ opacity: 0, y: 20 }}\n              animate={{ opacity: 1, y: 0 }}\n              transition={{ delay: 0.3 + i * 0.03 }}\n            >\n              {char}\n            </motion.span>\n          ))}\n        </motion.h1>\n\n        {/* Metaphor subtitle */}\n        {metaphor && (\n          <motion.p\n            className=\"mt-4 text-xl text-[hsl(var(--theme-muted-foreground))] uppercase tracking-[0.3em]\"\n            initial={{ opacity: 0 }}\n            animate={{ opacity: 1 }}\n            transition={{ delay: 0.6 }}\n          >\n            âœ§ {metaphor} âœ§\n          </motion.p>\n        )}\n      </div>\n    </motion.div>\n  );\n});\n\n// =============================================================================\n// Main Component\n// =============================================================================\n\nexport const DimensionPortal = memo(function DimensionPortal({\n  isTransitioning,\n  targetDimension,\n  onTransitionComplete,\n  duration = 1500,\n  intensity = 0.8,\n}: DimensionPortalProps) {\n  const [phase, setPhase] = useState<\"idle\" | \"fragment\" | \"void\" | \"reform\" | \"reveal\">(\"idle\");\n\n  useEffect(() => {\n    if (!isTransitioning) {\n      setPhase(\"idle\");\n      return;\n    }\n\n    // Phase sequence: fragment â†’ void â†’ reform â†’ reveal â†’ complete\n    const timeline = [\n      { phase: \"fragment\" as const, delay: 0 },\n      { phase: \"void\" as const, delay: duration * 0.25 },\n      { phase: \"reform\" as const, delay: duration * 0.5 },\n      { phase: \"reveal\" as const, delay: duration * 0.7 },\n      { phase: \"idle\" as const, delay: duration },\n    ];\n\n    const timeouts: NodeJS.Timeout[] = [];\n\n    timeline.forEach(({ phase: p, delay }) => {\n      const timeout = setTimeout(() => {\n        setPhase(p);\n        if (p === \"idle\" && onTransitionComplete) {\n          onTransitionComplete();\n        }\n      }, delay);\n      timeouts.push(timeout);\n    });\n\n    return () => timeouts.forEach(clearTimeout);\n  }, [isTransitioning, duration, onTransitionComplete]);\n\n  if (phase === \"idle\") return null;\n\n  return (\n    <motion.div\n      className=\"fixed inset-0 z-[9999] overflow-hidden\"\n      initial={{ opacity: 0 }}\n      animate={{ opacity: 1 }}\n      exit={{ opacity: 0 }}\n    >\n      {/* Inject keyframes */}\n      <style dangerouslySetInnerHTML={{ __html: glitchKeyframes }} />\n\n      {/* Background with blur */}\n      <motion.div\n        className=\"absolute inset-0 bg-[hsl(var(--theme-background))]\"\n        animate={{\n          opacity: phase === \"void\" ? 1 : 0.95,\n        }}\n      />\n\n      {/* Digital rain effect */}\n      <DigitalRain active={phase === \"fragment\" || phase === \"void\"} />\n\n      {/* Fragmenting grid */}\n      <FragmentGrid active={phase === \"fragment\" || phase === \"reform\"} phase={phase as \"fragment\" | \"reform\"} />\n\n      {/* The void */}\n      <AnimatePresence>\n        {phase === \"void\" && <DimensionalVoid active />}\n      </AnimatePresence>\n\n      {/* Dimension reveal */}\n      <AnimatePresence>\n        {phase === \"reveal\" && targetDimension && (\n          <DimensionReveal\n            name={targetDimension.name}\n            metaphor={targetDimension.metaphor}\n            gradient={targetDimension.gradient}\n          />\n        )}\n      </AnimatePresence>\n\n      {/* Scanlines overlay */}\n      <div\n        className=\"absolute inset-0 pointer-events-none opacity-10\"\n        style={{\n          backgroundImage: `repeating-linear-gradient(\n            0deg,\n            transparent,\n            transparent 2px,\n            hsl(var(--theme-foreground) / 0.03) 2px,\n            hsl(var(--theme-foreground) / 0.03) 4px\n          )`,\n        }}\n      />\n\n      {/* Chromatic aberration effect at edges */}\n      {phase === \"fragment\" && (\n        <>\n          <motion.div\n            className=\"absolute inset-0 mix-blend-screen pointer-events-none\"\n            style={{\n              background: \"linear-gradient(90deg, rgba(255,0,0,0.1), transparent 10%, transparent 90%, rgba(0,255,255,0.1))\",\n            }}\n            animate={{ x: [-5, 5, -5] }}\n            transition={{ duration: 0.1, repeat: 5 }}\n          />\n        </>\n      )}\n    </motion.div>\n  );\n});\n\nexport default DimensionPortal;\n"],"names":[],"mappings":"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"}