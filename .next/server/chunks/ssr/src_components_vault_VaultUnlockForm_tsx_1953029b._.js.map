{"version":3,"sources":["../../../../src/components/vault/VaultUnlockForm.tsx"],"sourcesContent":["\"use client\";\n\nimport React, { useState } from \"react\";\nimport { useRouter } from \"next/navigation\";\n\nexport function VaultUnlockForm() {\n  const [password, setPassword] = useState(\"\");\n  const [loading, setLoading] = useState(false);\n  const [error, setError] = useState<string | null>(null);\n  const router = useRouter();\n\n  const onSubmit = async (e: React.FormEvent) => {\n    e.preventDefault();\n    setLoading(true);\n    setError(null);\n    try {\n      const res = await fetch(\"/api/vault/login\", {\n        method: \"POST\",\n        headers: { \"Content-Type\": \"application/json\" },\n        body: JSON.stringify({ password }),\n      });\n      if (res.ok) {\n        // Ensure server components re-read cookies\n        router.replace(\"/vault\");\n        router.refresh();\n      } else {\n        setError(\"Invalid password\");\n      }\n    } catch (err) {\n      setError(\"Something went wrong\");\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  return (\n    <form className=\"space-y-4\" onSubmit={onSubmit}>\n      <input\n        type=\"password\"\n        name=\"password\"\n        className=\"w-full rounded-md border px-3 py-2 bg-background\"\n        placeholder=\"Password\"\n        autoComplete=\"current-password\"\n        value={password}\n        onChange={(e) => setPassword(e.target.value)}\n      />\n      {error && <p className=\"text-sm text-red-500\">{error}</p>}\n      <button type=\"submit\" disabled={loading} className=\"inline-flex items-center rounded-md border px-4 py-2\">\n        {loading ? \"Unlocking...\" : \"Unlock\"}\n      </button>\n    </form>\n  );\n}\n"],"names":[],"mappings":"0DAEA,EAAA,EAAA,CAAA,CAAA,QACA,EAAA,EAAA,CAAA,CAAA,QAEO,SAAS,IACd,GAAM,CAAC,EAAU,EAAY,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,EAAC,IACnC,CAAC,EAAS,EAAW,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,GAAC,GACjC,CAAC,EAAO,EAAS,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,EAAgB,MAC5C,EAAS,CAAA,EAAA,EAAA,SAAS,AAAT,IAET,EAAW,MAAO,IACtB,EAAE,cAAc,GAChB,GAAW,GACX,EAAS,MACT,GAAI,CAME,CALQ,MAAM,MAAM,mBAAoB,CAC1C,OAAQ,OACR,QAAS,CAAE,eAAgB,kBAAmB,EAC9C,KAAM,KAAK,SAAS,CAAC,UAAE,CAAS,EAClC,EAAA,EACQ,EAAE,EAAE,AAEV,EAAO,OAAO,CAAC,UACf,EAAO,OAAO,IAEd,EAAS,mBAEb,CAAE,MAAO,EAAK,CACZ,EAAS,uBACX,QAAU,CACR,GAAW,EACb,CACF,EAEA,MACE,CAAA,EAAA,EAAA,IAAA,EAAC,OAAA,CAAK,UAAU,YAAY,SAAU,YACpC,CAAA,EAAA,EAAA,GAAA,EAAC,QAAA,CACC,KAAK,WACL,KAAK,WACL,UAAU,mDACV,YAAY,WACZ,aAAa,mBACb,MAAO,EACP,SAAW,AAAD,GAAO,EAAY,EAAE,MAAM,CAAC,KAAK,IAE5C,GAAS,CAAA,EAAA,EAAA,GAAA,EAAC,IAAA,CAAE,UAAU,gCAAwB,IAC/C,CAAA,EAAA,EAAA,GAAA,EAAC,SAAA,CAAO,KAAK,SAAS,SAAU,EAAS,UAAU,gEAChD,EAAU,eAAiB,aAIpC"}