{"version":3,"sources":["../../../../src/app/video/page.tsx"],"sourcesContent":["\"use client\";\n\nimport { useState, useCallback } from \"react\";\nimport { motion, AnimatePresence } from \"framer-motion\";\nimport { PageTransition } from \"@/components/ios/PageTransition\";\nimport {\n  Video,\n  Mic,\n  ImagePlus,\n  Sparkles,\n  Play,\n  Download,\n  RefreshCw,\n  ChevronRight,\n  Check,\n  Loader2,\n  Volume2,\n  Film,\n  Wand2,\n  Settings,\n  Upload,\n  X,\n} from \"lucide-react\";\nimport type { SceneStyle, TalkingVideoStatus } from \"@/lib/talking-video/types\";\n\ntype WorkflowStep = \"topic\" | \"photo\" | \"scene\" | \"generating\" | \"complete\";\n\nconst SCENE_OPTIONS: { value: SceneStyle; label: string; description: string }[] = [\n  { value: \"podcast_studio\", label: \"Podcast Studio\", description: \"Professional recording setup\" },\n  { value: \"office\", label: \"Modern Office\", description: \"Clean workspace environment\" },\n  { value: \"outdoor\", label: \"Outdoor\", description: \"Natural scenery backdrop\" },\n  { value: \"news_desk\", label: \"News Desk\", description: \"Professional broadcast setup\" },\n  { value: \"living_room\", label: \"Living Room\", description: \"Cozy home setting\" },\n  { value: \"conference\", label: \"Conference Room\", description: \"Business meeting space\" },\n];\n\nconst TONE_OPTIONS = [\n  { value: \"professional\", label: \"Professional\" },\n  { value: \"casual\", label: \"Casual\" },\n  { value: \"educational\", label: \"Educational\" },\n  { value: \"entertaining\", label: \"Entertaining\" },\n];\n\ninterface GenerationState {\n  status: TalkingVideoStatus;\n  script?: string;\n  audioUrl?: string;\n  backgroundVideoUrl?: string;\n  finalVideoUrl?: string;\n  error?: string;\n}\n\nexport default function VideoPage() {\n  const [step, setStep] = useState<WorkflowStep>(\"topic\");\n  const [topic, setTopic] = useState(\"\");\n  const [photoUrl, setPhotoUrl] = useState(\"\");\n  const [photoPreview, setPhotoPreview] = useState<string | null>(null);\n  const [sceneStyle, setSceneStyle] = useState<SceneStyle>(\"podcast_studio\");\n  const [tone, setTone] = useState<\"professional\" | \"casual\" | \"educational\" | \"entertaining\">(\n    \"professional\"\n  );\n  const [duration, setDuration] = useState(90);\n  const [generation, setGeneration] = useState<GenerationState | null>(null);\n\n  const handlePhotoUpload = useCallback((e: React.ChangeEvent<HTMLInputElement>) => {\n    const file = e.target.files?.[0];\n    if (file) {\n      const reader = new FileReader();\n      reader.onloadend = () => {\n        setPhotoPreview(reader.result as string);\n        setPhotoUrl(reader.result as string);\n      };\n      reader.readAsDataURL(file);\n    }\n  }, []);\n\n  const handleGenerate = useCallback(async () => {\n    if (!topic || !photoUrl) return;\n\n    setStep(\"generating\");\n    setGeneration({ status: \"generating_script\" });\n\n    try {\n      const response = await fetch(\"/api/talking-video\", {\n        method: \"POST\",\n        headers: { \"Content-Type\": \"application/json\" },\n        body: JSON.stringify({\n          action: \"run_workflow\",\n          topic,\n          sourcePhotoUrl: photoUrl,\n          sceneStyle,\n          tone,\n          duration,\n        }),\n      });\n\n      const result = await response.json();\n\n      if (result.error) {\n        setGeneration({ status: \"error\", error: result.error });\n      } else {\n        setGeneration({\n          status: \"complete\",\n          script: result.script,\n          audioUrl: result.audioUrl,\n          backgroundVideoUrl: result.backgroundVideoUrl,\n          finalVideoUrl: result.finalVideoUrl,\n        });\n        setStep(\"complete\");\n      }\n    } catch (error) {\n      setGeneration({\n        status: \"error\",\n        error: error instanceof Error ? error.message : \"Generation failed\",\n      });\n    }\n  }, [topic, photoUrl, sceneStyle, tone, duration]);\n\n  const handleReset = useCallback(() => {\n    setStep(\"topic\");\n    setTopic(\"\");\n    setPhotoUrl(\"\");\n    setPhotoPreview(null);\n    setSceneStyle(\"podcast_studio\");\n    setTone(\"professional\");\n    setDuration(90);\n    setGeneration(null);\n  }, []);\n\n  const renderStepIndicator = () => {\n    const steps = [\n      { id: \"topic\", label: \"Topic\", icon: Sparkles },\n      { id: \"photo\", label: \"Photo\", icon: ImagePlus },\n      { id: \"scene\", label: \"Scene\", icon: Film },\n      { id: \"generating\", label: \"Create\", icon: Wand2 },\n    ];\n\n    return (\n      <div className=\"flex items-center justify-center gap-2 mb-8\">\n        {steps.map((s, i) => {\n          const Icon = s.icon;\n          const isActive = step === s.id || (step === \"complete\" && s.id === \"generating\");\n          const isComplete =\n            steps.findIndex((x) => x.id === step) > i ||\n            (step === \"complete\" && s.id !== \"generating\");\n\n          return (\n            <div key={s.id} className=\"flex items-center\">\n              <div\n                className={`flex items-center gap-2 px-3 py-1.5 rounded-full text-sm transition-all ${\n                  isActive\n                    ? \"bg-white text-black\"\n                    : isComplete\n                      ? \"bg-green-500/20 text-green-400\"\n                      : \"bg-white/10 text-white/40\"\n                }`}\n              >\n                {isComplete ? <Check className=\"w-4 h-4\" /> : <Icon className=\"w-4 h-4\" />}\n                <span className=\"hidden sm:inline\">{s.label}</span>\n              </div>\n              {i < steps.length - 1 && (\n                <ChevronRight className=\"w-4 h-4 text-white/20 mx-1\" />\n              )}\n            </div>\n          );\n        })}\n      </div>\n    );\n  };\n\n  return (\n    <PageTransition>\n      <div className=\"min-h-screen bg-black text-white\">\n        {/* Header */}\n        <header className=\"sticky top-0 z-40 bg-black/80 backdrop-blur-xl border-b border-white/10\">\n          <div className=\"flex items-center justify-between px-4 py-3\">\n            <div className=\"flex items-center gap-3\">\n              <div className=\"p-2 bg-gradient-to-br from-purple-500 to-pink-500 rounded-xl\">\n                <Video className=\"w-5 h-5 text-white\" />\n              </div>\n              <div>\n                <h1 className=\"text-lg font-semibold\">Talking Video</h1>\n                <p className=\"text-xs text-white/40\">AI-powered video creation</p>\n              </div>\n            </div>\n            {step !== \"topic\" && (\n              <button\n                onClick={handleReset}\n                className=\"p-2 hover:bg-white/10 rounded-lg transition-colors\"\n              >\n                <RefreshCw className=\"w-5 h-5\" />\n              </button>\n            )}\n          </div>\n        </header>\n\n        <main className=\"max-w-2xl mx-auto px-4 py-8\">\n          {renderStepIndicator()}\n\n          <AnimatePresence mode=\"wait\">\n            {/* Step 1: Topic */}\n            {step === \"topic\" && (\n              <motion.div\n                key=\"topic\"\n                initial={{ opacity: 0, y: 20 }}\n                animate={{ opacity: 1, y: 0 }}\n                exit={{ opacity: 0, y: -20 }}\n                className=\"space-y-6\"\n              >\n                <div className=\"text-center mb-8\">\n                  <h2 className=\"text-2xl font-bold mb-2\">What do you want to talk about?</h2>\n                  <p className=\"text-white/50\">\n                    AI will write a {duration}-second script for your video\n                  </p>\n                </div>\n\n                <textarea\n                  value={topic}\n                  onChange={(e) => setTopic(e.target.value)}\n                  placeholder=\"e.g., The future of AI in creative industries, Why I love building products, Tips for startup founders...\"\n                  className=\"w-full h-32 bg-white/5 rounded-xl p-4 text-lg placeholder:text-white/30 focus:outline-none focus:ring-2 focus:ring-purple-500/50 resize-none\"\n                  autoFocus\n                />\n\n                {/* Tone selector */}\n                <div className=\"space-y-2\">\n                  <label className=\"text-sm text-white/60\">Tone</label>\n                  <div className=\"flex gap-2 flex-wrap\">\n                    {TONE_OPTIONS.map((t) => (\n                      <button\n                        key={t.value}\n                        onClick={() => setTone(t.value as typeof tone)}\n                        className={`px-4 py-2 rounded-lg text-sm font-medium transition-all ${\n                          tone === t.value\n                            ? \"bg-purple-500 text-white\"\n                            : \"bg-white/10 text-white/60 hover:bg-white/20\"\n                        }`}\n                      >\n                        {t.label}\n                      </button>\n                    ))}\n                  </div>\n                </div>\n\n                {/* Duration slider */}\n                <div className=\"space-y-2\">\n                  <div className=\"flex justify-between text-sm\">\n                    <span className=\"text-white/60\">Duration</span>\n                    <span className=\"text-white\">{duration} seconds</span>\n                  </div>\n                  <input\n                    type=\"range\"\n                    min={30}\n                    max={180}\n                    step={15}\n                    value={duration}\n                    onChange={(e) => setDuration(Number(e.target.value))}\n                    className=\"w-full accent-purple-500\"\n                  />\n                  <div className=\"flex justify-between text-xs text-white/40\">\n                    <span>30s</span>\n                    <span>90s</span>\n                    <span>180s</span>\n                  </div>\n                </div>\n\n                <button\n                  onClick={() => setStep(\"photo\")}\n                  disabled={!topic.trim()}\n                  className=\"w-full py-4 bg-gradient-to-r from-purple-500 to-pink-500 rounded-xl font-semibold text-lg disabled:opacity-50 disabled:cursor-not-allowed transition-all hover:scale-[1.02] active:scale-[0.98]\"\n                >\n                  Continue\n                </button>\n              </motion.div>\n            )}\n\n            {/* Step 2: Photo */}\n            {step === \"photo\" && (\n              <motion.div\n                key=\"photo\"\n                initial={{ opacity: 0, y: 20 }}\n                animate={{ opacity: 1, y: 0 }}\n                exit={{ opacity: 0, y: -20 }}\n                className=\"space-y-6\"\n              >\n                <div className=\"text-center mb-8\">\n                  <h2 className=\"text-2xl font-bold mb-2\">Upload your photo</h2>\n                  <p className=\"text-white/50\">\n                    A clear headshot works best for the talking video\n                  </p>\n                </div>\n\n                {photoPreview ? (\n                  <div className=\"relative aspect-video rounded-xl overflow-hidden bg-white/5\">\n                    <img\n                      src={photoPreview}\n                      alt=\"Preview\"\n                      className=\"w-full h-full object-contain\"\n                    />\n                    <button\n                      onClick={() => {\n                        setPhotoPreview(null);\n                        setPhotoUrl(\"\");\n                      }}\n                      className=\"absolute top-3 right-3 p-2 bg-black/50 rounded-full hover:bg-black/70 transition-colors\"\n                    >\n                      <X className=\"w-4 h-4\" />\n                    </button>\n                  </div>\n                ) : (\n                  <label className=\"block aspect-video rounded-xl border-2 border-dashed border-white/20 hover:border-purple-500/50 transition-colors cursor-pointer\">\n                    <input\n                      type=\"file\"\n                      accept=\"image/*\"\n                      onChange={handlePhotoUpload}\n                      className=\"hidden\"\n                    />\n                    <div className=\"h-full flex flex-col items-center justify-center gap-4\">\n                      <div className=\"p-4 bg-white/10 rounded-full\">\n                        <Upload className=\"w-8 h-8 text-white/60\" />\n                      </div>\n                      <div className=\"text-center\">\n                        <p className=\"font-medium\">Click to upload</p>\n                        <p className=\"text-sm text-white/40\">or drag and drop</p>\n                      </div>\n                    </div>\n                  </label>\n                )}\n\n                {/* Or paste URL */}\n                <div className=\"relative\">\n                  <div className=\"absolute inset-0 flex items-center\">\n                    <div className=\"w-full border-t border-white/10\" />\n                  </div>\n                  <div className=\"relative flex justify-center\">\n                    <span className=\"px-3 bg-black text-sm text-white/40\">or paste URL</span>\n                  </div>\n                </div>\n\n                <input\n                  type=\"url\"\n                  value={photoUrl.startsWith(\"data:\") ? \"\" : photoUrl}\n                  onChange={(e) => {\n                    setPhotoUrl(e.target.value);\n                    setPhotoPreview(e.target.value);\n                  }}\n                  placeholder=\"https://example.com/photo.jpg\"\n                  className=\"w-full bg-white/5 rounded-xl px-4 py-3 placeholder:text-white/30 focus:outline-none focus:ring-2 focus:ring-purple-500/50\"\n                />\n\n                <div className=\"flex gap-3\">\n                  <button\n                    onClick={() => setStep(\"topic\")}\n                    className=\"flex-1 py-4 bg-white/10 rounded-xl font-medium hover:bg-white/20 transition-colors\"\n                  >\n                    Back\n                  </button>\n                  <button\n                    onClick={() => setStep(\"scene\")}\n                    disabled={!photoUrl}\n                    className=\"flex-1 py-4 bg-gradient-to-r from-purple-500 to-pink-500 rounded-xl font-semibold disabled:opacity-50 disabled:cursor-not-allowed transition-all hover:scale-[1.02] active:scale-[0.98]\"\n                  >\n                    Continue\n                  </button>\n                </div>\n              </motion.div>\n            )}\n\n            {/* Step 3: Scene */}\n            {step === \"scene\" && (\n              <motion.div\n                key=\"scene\"\n                initial={{ opacity: 0, y: 20 }}\n                animate={{ opacity: 1, y: 0 }}\n                exit={{ opacity: 0, y: -20 }}\n                className=\"space-y-6\"\n              >\n                <div className=\"text-center mb-8\">\n                  <h2 className=\"text-2xl font-bold mb-2\">Choose your scene</h2>\n                  <p className=\"text-white/50\">\n                    Select a background environment for your video\n                  </p>\n                </div>\n\n                <div className=\"grid grid-cols-2 gap-3\">\n                  {SCENE_OPTIONS.map((scene) => (\n                    <button\n                      key={scene.value}\n                      onClick={() => setSceneStyle(scene.value)}\n                      className={`p-4 rounded-xl text-left transition-all ${\n                        sceneStyle === scene.value\n                          ? \"bg-purple-500/20 border-2 border-purple-500\"\n                          : \"bg-white/5 border-2 border-transparent hover:bg-white/10\"\n                      }`}\n                    >\n                      <p className=\"font-medium\">{scene.label}</p>\n                      <p className=\"text-sm text-white/50\">{scene.description}</p>\n                    </button>\n                  ))}\n                </div>\n\n                <div className=\"flex gap-3\">\n                  <button\n                    onClick={() => setStep(\"photo\")}\n                    className=\"flex-1 py-4 bg-white/10 rounded-xl font-medium hover:bg-white/20 transition-colors\"\n                  >\n                    Back\n                  </button>\n                  <button\n                    onClick={handleGenerate}\n                    className=\"flex-1 py-4 bg-gradient-to-r from-purple-500 to-pink-500 rounded-xl font-semibold transition-all hover:scale-[1.02] active:scale-[0.98]\"\n                  >\n                    Generate Video\n                  </button>\n                </div>\n              </motion.div>\n            )}\n\n            {/* Step 4: Generating */}\n            {step === \"generating\" && generation && (\n              <motion.div\n                key=\"generating\"\n                initial={{ opacity: 0, y: 20 }}\n                animate={{ opacity: 1, y: 0 }}\n                exit={{ opacity: 0, y: -20 }}\n                className=\"space-y-8\"\n              >\n                <div className=\"text-center\">\n                  <h2 className=\"text-2xl font-bold mb-2\">Creating your video</h2>\n                  <p className=\"text-white/50\">This may take a few minutes</p>\n                </div>\n\n                {/* Progress steps */}\n                <div className=\"space-y-4\">\n                  {[\n                    {\n                      id: \"generating_script\",\n                      label: \"Writing script\",\n                      icon: Sparkles,\n                      statuses: [\"generating_script\"],\n                    },\n                    {\n                      id: \"generating_voice\",\n                      label: \"Generating voice\",\n                      icon: Mic,\n                      statuses: [\"script_ready\", \"generating_voice\"],\n                    },\n                    {\n                      id: \"generating_background\",\n                      label: \"Creating background\",\n                      icon: Film,\n                      statuses: [\"voice_ready\", \"generating_background\"],\n                    },\n                    {\n                      id: \"lip_syncing\",\n                      label: \"Syncing lips\",\n                      icon: Volume2,\n                      statuses: [\"background_ready\", \"lip_syncing\"],\n                    },\n                  ].map((s, i) => {\n                    const Icon = s.icon;\n                    const isActive = s.statuses.includes(generation.status);\n                    const isPast =\n                      [\"script_ready\", \"voice_ready\", \"background_ready\", \"complete\"].indexOf(\n                        generation.status\n                      ) > i;\n                    const isComplete = isPast || generation.status === \"complete\";\n\n                    return (\n                      <div\n                        key={s.id}\n                        className={`flex items-center gap-4 p-4 rounded-xl transition-all ${\n                          isActive\n                            ? \"bg-purple-500/20 border border-purple-500/50\"\n                            : isComplete\n                              ? \"bg-green-500/10 border border-green-500/30\"\n                              : \"bg-white/5 border border-transparent\"\n                        }`}\n                      >\n                        <div\n                          className={`p-2 rounded-lg ${\n                            isActive\n                              ? \"bg-purple-500/30\"\n                              : isComplete\n                                ? \"bg-green-500/30\"\n                                : \"bg-white/10\"\n                          }`}\n                        >\n                          {isActive ? (\n                            <Loader2 className=\"w-5 h-5 animate-spin\" />\n                          ) : isComplete ? (\n                            <Check className=\"w-5 h-5 text-green-400\" />\n                          ) : (\n                            <Icon className=\"w-5 h-5 text-white/40\" />\n                          )}\n                        </div>\n                        <span\n                          className={\n                            isActive\n                              ? \"text-white\"\n                              : isComplete\n                                ? \"text-green-400\"\n                                : \"text-white/40\"\n                          }\n                        >\n                          {s.label}\n                        </span>\n                      </div>\n                    );\n                  })}\n                </div>\n\n                {generation.status === \"error\" && (\n                  <div className=\"p-4 bg-red-500/20 border border-red-500/50 rounded-xl\">\n                    <p className=\"text-red-400\">{generation.error}</p>\n                    <button\n                      onClick={handleReset}\n                      className=\"mt-3 px-4 py-2 bg-red-500/30 rounded-lg text-sm font-medium hover:bg-red-500/40 transition-colors\"\n                    >\n                      Try Again\n                    </button>\n                  </div>\n                )}\n              </motion.div>\n            )}\n\n            {/* Step 5: Complete */}\n            {step === \"complete\" && generation?.finalVideoUrl && (\n              <motion.div\n                key=\"complete\"\n                initial={{ opacity: 0, y: 20 }}\n                animate={{ opacity: 1, y: 0 }}\n                exit={{ opacity: 0, y: -20 }}\n                className=\"space-y-6\"\n              >\n                <div className=\"text-center mb-4\">\n                  <div className=\"inline-flex items-center gap-2 px-4 py-2 bg-green-500/20 rounded-full text-green-400 mb-4\">\n                    <Check className=\"w-4 h-4\" />\n                    <span>Video complete!</span>\n                  </div>\n                  <h2 className=\"text-2xl font-bold\">{topic}</h2>\n                </div>\n\n                {/* Video player */}\n                <div className=\"aspect-video rounded-xl overflow-hidden bg-black\">\n                  <video\n                    src={generation.finalVideoUrl}\n                    controls\n                    className=\"w-full h-full\"\n                    poster={photoPreview || undefined}\n                  />\n                </div>\n\n                {/* Script preview */}\n                {generation.script && (\n                  <div className=\"bg-white/5 rounded-xl p-4\">\n                    <p className=\"text-sm text-white/40 mb-2\">Generated Script</p>\n                    <p className=\"text-sm text-white/80 whitespace-pre-wrap\">\n                      {generation.script}\n                    </p>\n                  </div>\n                )}\n\n                {/* Actions */}\n                <div className=\"flex gap-3\">\n                  <a\n                    href={generation.finalVideoUrl}\n                    download={`talking-video-${Date.now()}.mp4`}\n                    className=\"flex-1 flex items-center justify-center gap-2 py-4 bg-gradient-to-r from-purple-500 to-pink-500 rounded-xl font-semibold transition-all hover:scale-[1.02] active:scale-[0.98]\"\n                  >\n                    <Download className=\"w-5 h-5\" />\n                    Download\n                  </a>\n                  <button\n                    onClick={handleReset}\n                    className=\"px-6 py-4 bg-white/10 rounded-xl font-medium hover:bg-white/20 transition-colors\"\n                  >\n                    New Video\n                  </button>\n                </div>\n              </motion.div>\n            )}\n          </AnimatePresence>\n        </main>\n      </div>\n    </PageTransition>\n  );\n}\n"],"names":[],"mappings":"0DAEA,EAAA,EAAA,CAAA,CAAA,QACA,EAAA,EAAA,CAAA,CAAA,QAAA,EAAA,EAAA,CAAA,CAAA,QACA,EAAA,EAAA,CAAA,CAAA,QACA,EAAA,EAAA,CAAA,CAAA,QAAA,EAAA,EAAA,CAAA,CAAA,0BAAA,EAAA,EAAA,CAAA,CAAA,QAAA,EAAA,EAAA,CAAA,CAAA,QAAA,EAAA,EAAA,CAAA,CAAA,QAAA,EAAA,EAAA,CAAA,CAAA,QAAA,EAAA,EAAA,CAAA,CAAA,QAAA,EAAA,EAAA,CAAA,CAAA,QAAA,EAAA,EAAA,CAAA,CAAA,QAAA,EAAA,EAAA,CAAA,CAAA,QAAA,EAAA,EAAA,CAAA,CAAA,QAAA,EAAA,EAAA,CAAA,CAAA,QAAA,EAAA,EAAA,CAAA,CAAA,QAsBA,IAAM,EAA6E,CACjF,CAAE,MAAO,iBAAkB,MAAO,iBAAkB,YAAa,8BAA+B,EAChG,CAAE,MAAO,SAAU,MAAO,gBAAiB,YAAa,6BAA8B,EACtF,CAAE,MAAO,UAAW,MAAO,UAAW,YAAa,0BAA2B,EAC9E,CAAE,MAAO,YAAa,MAAO,YAAa,YAAa,8BAA+B,EACtF,CAAE,MAAO,cAAe,MAAO,cAAe,YAAa,mBAAoB,EAC/E,CAAE,MAAO,aAAc,MAAO,kBAAmB,YAAa,wBAAyB,EACxF,CAEK,EAAe,CACnB,CAAE,MAAO,eAAgB,MAAO,cAAe,EAC/C,CAAE,MAAO,SAAU,MAAO,QAAS,EACnC,CAAE,MAAO,cAAe,MAAO,aAAc,EAC7C,CAAE,MAAO,eAAgB,MAAO,cAAe,EAChD,CAWc,SAAS,IACtB,IA6EQ,EA7EF,CAAC,EAAM,EAAQ,CAAG,CAAA,EAAA,EAAA,QAAQ,AAAR,EAAuB,SACzC,CAAC,EAAO,EAAS,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,EAAC,IAC7B,CAAC,EAAU,EAAY,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,EAAC,IACnC,CAAC,EAAc,EAAgB,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,EAAgB,MAC1D,CAAC,EAAY,EAAc,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,EAAa,kBACnD,CAAC,EAAM,EAAQ,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,EAC9B,gBAEI,CAAC,EAAU,EAAY,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,EAAC,IACnC,CAAC,EAAY,EAAc,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,EAAyB,MAE/D,EAAoB,CAAA,EAAA,EAAA,WAAA,AAAW,EAAC,AAAC,IACrC,IAAM,EAAO,EAAE,MAAM,CAAC,KAAK,EAAE,CAAC,EAAE,CAChC,GAAI,EAAM,CACR,IAAM,EAAS,IAAI,WACnB,EAAO,SAAS,CAAG,KACjB,EAAgB,EAAO,MAAM,EAC7B,EAAY,EAAO,MAAM,CAC3B,EACA,EAAO,aAAa,CAAC,EACvB,CACF,EAAG,EAAE,EAEC,EAAiB,CAAA,EAAA,EAAA,WAAW,AAAX,EAAY,UACjC,GAAI,AAAC,GAAU,GAEf,EAAQ,CAFM,IAAW,SAGzB,EAAc,CAAE,OAAQ,mBAAoB,GAE5C,GAAI,CACF,IAAM,EAAW,MAAM,MAAM,qBAAsB,CACjD,OAAQ,OACR,QAAS,CAAE,eAAgB,kBAAmB,EAC9C,KAAM,KAAK,SAAS,CAAC,CACnB,OAAQ,qBACR,EACA,eAAgB,aAChB,OACA,WACA,CACF,EACF,GAEM,EAAS,MAAM,EAAS,IAAI,GAE9B,EAAO,KAAK,CACd,CADgB,CACF,CAAE,OAAQ,QAAS,MAAO,EAAO,KAAK,AAAC,IAErD,EAAc,CACZ,OAAQ,WACR,OAAQ,EAAO,MAAM,CACrB,SAAU,EAAO,QAAQ,CACzB,mBAAoB,EAAO,kBAAkB,CAC7C,cAAe,EAAO,aAAa,AACrC,GACA,EAAQ,YAEZ,CAAE,MAAO,EAAO,CACd,EAAc,CACZ,OAAQ,QACR,MAAO,aAAiB,MAAQ,EAAM,OAAO,CAAG,mBAClD,EACF,EACF,EAAG,CAAC,EAAO,EAAU,EAAY,EAAM,EAAS,EAE1C,EAAc,CAAA,EAAA,EAAA,WAAA,AAAW,EAAC,KAC9B,EAAQ,SACR,EAAS,IACT,EAAY,IACZ,EAAgB,MAChB,EAAc,kBACd,EAAQ,gBACR,EAAY,IACZ,EAAc,KAChB,EAAG,EAAE,EA2CL,MACE,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,cAAc,CAAA,UACb,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,6CAEb,CAAA,EAAA,EAAA,GAAA,EAAC,SAAA,CAAO,UAAU,mFAChB,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,wDACb,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,oCACb,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,wEACb,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,KAAK,CAAA,CAAC,UAAU,yBAEnB,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,WACC,CAAA,EAAA,EAAA,GAAA,EAAC,KAAA,CAAG,UAAU,iCAAwB,kBACtC,CAAA,EAAA,EAAA,GAAA,EAAC,IAAA,CAAE,UAAU,iCAAwB,oCAG/B,UAAT,GACC,CAAA,EAAA,EAAA,GAAA,EAAC,SAAA,CACC,QAAS,EACT,UAAU,8DAEV,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,SAAS,CAAA,CAAC,UAAU,mBAM7B,CAAA,EAAA,EAAA,IAAA,EAAC,OAAA,CAAK,UAAU,2CAlEN,CACZ,CAAE,GAAI,QAAS,MAAO,QAAS,KAAM,EAAA,QAAQ,AAAC,EAC9C,CAAE,GAAI,QAAS,MAAO,QAAS,KAAM,EAAA,OAAS,AAAC,EAC/C,CAAE,GAAI,QAAS,MAAO,QAAS,KAAM,EAAA,IAAI,AAAC,EAC1C,CAAE,GAAI,aAAc,MAAO,SAAU,KAAM,EAAA,KAAK,AAAC,EAClD,CAGC,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,uDACZ,EAAM,GAAG,CAAC,CAAC,EAAG,KACb,IAAM,EAAO,EAAE,IAAI,CACb,EAAW,IAAS,EAAE,EAAE,EAAc,aAAT,GAAgC,eAAT,EAAE,EAAE,CACxD,EACJ,EAAM,SAAS,CAAC,AAAC,GAAM,EAAE,EAAE,GAAK,GAAQ,GAC9B,aAAT,GAAgC,eAAT,EAAE,EAAE,CAE9B,MACE,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAe,UAAU,8BACxB,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CACC,UAAW,CAAC,wEAAwE,EAClF,EACI,sBACA,EACE,iCACA,4BAAA,CACN,WAED,EAAa,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,KAAK,CAAA,CAAC,UAAU,YAAe,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,CAAK,UAAU,YAC9D,CAAA,EAAA,EAAA,GAAA,EAAC,OAAA,CAAK,UAAU,4BAAoB,EAAE,KAAK,MAE5C,EAAI,EAAM,MAAM,CAAG,GAClB,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,YAAY,CAAA,CAAC,UAAU,iCAdlB,EAAE,EAAE,CAkBlB,MAkCE,CAAA,EAAA,EAAA,IAAA,EAAC,EAAA,eAAe,CAAA,CAAC,KAAK,iBAEV,UAAT,GACC,CAAA,EAAA,EAAA,IAAA,EAAC,EAAA,MAAM,CAAC,GAAG,CAAA,CAET,QAAS,CAAE,QAAS,EAAG,EAAG,EAAG,EAC7B,QAAS,CAAE,QAAS,EAAG,EAAG,CAAE,EAC5B,KAAM,CAAE,QAAS,EAAG,EAAG,CAAC,EAAG,EAC3B,UAAU,sBAEV,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,6BACb,CAAA,EAAA,EAAA,GAAA,EAAC,KAAA,CAAG,UAAU,mCAA0B,oCACxC,CAAA,EAAA,EAAA,IAAA,EAAC,IAAA,CAAE,UAAU,0BAAgB,mBACV,EAAS,sCAI9B,CAAA,EAAA,EAAA,GAAA,EAAC,WAAA,CACC,MAAO,EACP,SAAU,AAAC,GAAM,EAAS,EAAE,MAAM,CAAC,KAAK,EACxC,YAAY,4GACZ,UAAU,+IACV,SAAS,CAAA,CAAA,IAIX,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,sBACb,CAAA,EAAA,EAAA,GAAA,EAAC,QAAA,CAAM,UAAU,iCAAwB,SACzC,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,gCACZ,EAAa,GAAG,CAAC,AAAC,GACjB,CAAA,EAAA,EAAA,GAAA,EAAC,SAAA,CAEC,QAAS,IAAM,EAAQ,EAAE,KAAK,EAC9B,UAAW,CAAC,wDAAwD,EAClE,IAAS,EAAE,KAAK,CACZ,2BACA,8CAAA,CACJ,UAED,EAAE,KAAK,EARH,EAAE,KAAK,QAepB,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,sBACb,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,yCACb,CAAA,EAAA,EAAA,GAAA,EAAC,OAAA,CAAK,UAAU,yBAAgB,aAChC,CAAA,EAAA,EAAA,IAAA,EAAC,OAAA,CAAK,UAAU,uBAAc,EAAS,iBAEzC,CAAA,EAAA,EAAA,GAAA,EAAC,QAAA,CACC,KAAK,QACL,IAAK,GACL,IAAK,IACL,KAAM,GACN,MAAO,EACP,SAAU,AAAC,GAAM,EAAY,OAAO,EAAE,MAAM,CAAC,KAAK,GAClD,UAAU,6BAEZ,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,uDACb,CAAA,EAAA,EAAA,GAAA,EAAC,OAAA,UAAK,QACN,CAAA,EAAA,EAAA,GAAA,EAAC,OAAA,UAAK,QACN,CAAA,EAAA,EAAA,GAAA,EAAC,OAAA,UAAK,eAIV,CAAA,EAAA,EAAA,GAAA,EAAC,SAAA,CACC,QAAS,IAAM,EAAQ,SACvB,SAAU,CAAC,EAAM,IAAI,GACrB,UAAU,2MACX,eAnEG,SA0EE,UAAT,GACC,CAAA,EAAA,EAAA,IAAA,EAAC,EAAA,MAAM,CAAC,GAAG,CAAA,CAET,QAAS,CAAE,QAAS,EAAG,EAAG,EAAG,EAC7B,QAAS,CAAE,QAAS,EAAG,EAAG,CAAE,EAC5B,KAAM,CAAE,QAAS,EAAG,EAAG,CAAC,EAAG,EAC3B,UAAU,sBAEV,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,6BACb,CAAA,EAAA,EAAA,GAAA,EAAC,KAAA,CAAG,UAAU,mCAA0B,sBACxC,CAAA,EAAA,EAAA,GAAA,EAAC,IAAA,CAAE,UAAU,yBAAgB,yDAK9B,EACC,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,wEACb,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CACC,IAAK,EACL,IAAI,UACJ,UAAU,iCAEZ,CAAA,EAAA,EAAA,GAAA,EAAC,SAAA,CACC,QAAS,KACP,EAAgB,MAChB,EAAY,GACd,EACA,UAAU,mGAEV,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,CAAC,CAAA,CAAC,UAAU,iBAIjB,CAAA,EAAA,EAAA,IAAA,EAAC,QAAA,CAAM,UAAU,6IACf,CAAA,EAAA,EAAA,GAAA,EAAC,QAAA,CACC,KAAK,OACL,OAAO,UACP,SAAU,EACV,UAAU,WAEZ,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,mEACb,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,wCACb,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,MAAM,CAAA,CAAC,UAAU,4BAEpB,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,wBACb,CAAA,EAAA,EAAA,GAAA,EAAC,IAAA,CAAE,UAAU,uBAAc,oBAC3B,CAAA,EAAA,EAAA,GAAA,EAAC,IAAA,CAAE,UAAU,iCAAwB,8BAO7C,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,qBACb,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,8CACb,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,sCAEjB,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,wCACb,CAAA,EAAA,EAAA,GAAA,EAAC,OAAA,CAAK,UAAU,+CAAsC,sBAI1D,CAAA,EAAA,EAAA,GAAA,EAAC,QAAA,CACC,KAAK,MACL,MAAO,EAAS,UAAU,CAAC,SAAW,GAAK,EAC3C,SAAU,AAAC,IACT,EAAY,EAAE,MAAM,CAAC,KAAK,EAC1B,EAAgB,EAAE,MAAM,CAAC,KAAK,CAChC,EACA,YAAY,gCACZ,UAAU,8HAGZ,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,uBACb,CAAA,EAAA,EAAA,GAAA,EAAC,SAAA,CACC,QAAS,IAAM,EAAQ,SACvB,UAAU,8FACX,SAGD,CAAA,EAAA,EAAA,GAAA,EAAC,SAAA,CACC,QAAS,IAAM,EAAQ,SACvB,SAAU,CAAC,EACX,UAAU,mMACX,kBAlFC,SA0FP,AAAS,aACR,CAAA,EAAA,EAAA,IAAA,EAAC,EAAA,MAAM,CAAC,GAAG,CAAA,CAET,QAAS,CAAE,QAAS,EAAG,EAAG,EAAG,EAC7B,QAAS,CAAE,QAAS,EAAG,EAAG,CAAE,EAC5B,KAAM,CAAE,QAAS,EAAG,EAAG,CAAC,EAAG,EAC3B,UAAU,sBAEV,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,6BACb,CAAA,EAAA,EAAA,GAAA,EAAC,KAAA,CAAG,UAAU,mCAA0B,sBACxC,CAAA,EAAA,EAAA,GAAA,EAAC,IAAA,CAAE,UAAU,yBAAgB,sDAK/B,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,kCACZ,EAAc,GAAG,CAAC,AAAC,GAClB,CAAA,EAAA,EAAA,IAAA,EAAC,SAAA,CAEC,QAAS,IAAM,EAAc,EAAM,KAAK,EACxC,UAAW,CAAC,wCAAwC,EAClD,IAAe,EAAM,KAAK,CACtB,8CACA,2DAAA,CACJ,WAEF,CAAA,EAAA,EAAA,GAAA,EAAC,IAAA,CAAE,UAAU,uBAAe,EAAM,KAAK,GACvC,CAAA,EAAA,EAAA,GAAA,EAAC,IAAA,CAAE,UAAU,iCAAyB,EAAM,WAAW,KATlD,EAAM,KAAK,KActB,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,uBACb,CAAA,EAAA,EAAA,GAAA,EAAC,SAAA,CACC,QAAS,IAAM,EAAQ,SACvB,UAAU,8FACX,SAGD,CAAA,EAAA,EAAA,GAAA,EAAC,SAAA,CACC,QAAS,EACT,UAAU,mJACX,wBAxCC,SAgDE,eAAT,GAAyB,GACxB,CAAA,EAAA,EAAA,IAAA,EAAC,EAAA,MAAM,CAAC,GAAG,CAAA,CAET,QAAS,CAAE,QAAS,EAAG,EAAG,EAAG,EAC7B,QAAS,CAAE,QAAS,EAAG,EAAG,CAAE,EAC5B,KAAM,CAAE,QAAS,EAAG,EAAG,CAAC,EAAG,EAC3B,UAAU,sBAEV,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,wBACb,CAAA,EAAA,EAAA,GAAA,EAAC,KAAA,CAAG,UAAU,mCAA0B,wBACxC,CAAA,EAAA,EAAA,GAAA,EAAC,IAAA,CAAE,UAAU,yBAAgB,mCAI/B,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,qBACZ,CACC,CACE,GAAI,oBACJ,MAAO,iBACP,KAAM,EAAA,QAAQ,CACd,SAAU,CAAC,oBAAoB,AACjC,EACA,CACE,GAAI,mBACJ,MAAO,mBACP,KAAM,EAAA,GAAG,CACT,SAAU,CAAC,eAAgB,mBAAmB,AAChD,EACA,CACE,GAAI,wBACJ,MAAO,sBACP,KAAM,EAAA,IAAI,CACV,SAAU,CAAC,cAAe,wBAAwB,AACpD,EACA,CACE,GAAI,cACJ,MAAO,eACP,KAAM,EAAA,OAAO,CACb,SAAU,CAAC,mBAAoB,cACjC,AAD+C,EAEhD,CAAC,GAAG,CAAC,CAAC,EAAG,KACR,IAAM,EAAO,EAAE,IAAI,CACb,EAAW,EAAE,QAAQ,CAAC,QAAQ,CAAC,EAAW,MAAM,EAKhD,EAHJ,AAGiB,CAHhB,eAAgB,cAAe,mBAAoB,WAAW,CAAC,OAAO,CACrE,EAAW,MAAM,EACf,GAC6C,aAAtB,EAAW,MAAM,CAE9C,MACE,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAEC,UAAW,CAAC,sDAAsD,EAChE,EACI,+CACA,EACE,6CACA,uCAAA,CACN,WAEF,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CACC,UAAW,CAAC,eAAe,EACzB,EACI,mBACA,EACE,kBACA,cAAA,CACN,UAED,EACC,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,OAAO,CAAA,CAAC,UAAU,yBACjB,EACF,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,KAAK,CAAA,CAAC,UAAU,2BAEjB,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,CAAK,UAAU,4BAGpB,CAAA,EAAA,EAAA,GAAA,EAAC,OAAA,CACC,UACE,EACI,aACA,EACE,iBACA,yBAGP,EAAE,KAAK,KAnCL,EAAE,EAAE,CAuCf,KAGqB,UAAtB,EAAW,MAAM,EAChB,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,kEACb,CAAA,EAAA,EAAA,GAAA,EAAC,IAAA,CAAE,UAAU,wBAAgB,EAAW,KAAK,GAC7C,CAAA,EAAA,EAAA,GAAA,EAAC,SAAA,CACC,QAAS,EACT,UAAU,6GACX,mBAjGD,cA0GE,aAAT,GAAuB,GAAY,eAClC,CAAA,EAAA,EAAA,IAAA,EAAC,EAAA,MAAM,CAAC,GAAG,CAAA,CAET,QAAS,CAAE,QAAS,EAAG,EAAG,EAAG,EAC7B,QAAS,CAAE,QAAS,EAAG,EAAG,CAAE,EAC5B,KAAM,CAAE,QAAS,EAAG,EAAG,CAAC,EAAG,EAC3B,UAAU,sBAEV,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,6BACb,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,sGACb,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,KAAK,CAAA,CAAC,UAAU,YACjB,CAAA,EAAA,EAAA,GAAA,EAAC,OAAA,UAAK,uBAER,CAAA,EAAA,EAAA,GAAA,EAAC,KAAA,CAAG,UAAU,8BAAsB,OAItC,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,4DACb,CAAA,EAAA,EAAA,GAAA,EAAC,QAAA,CACC,IAAK,EAAW,aAAa,CAC7B,QAAQ,CAAA,CAAA,EACR,UAAU,gBACV,OAAQ,QAAgB,MAK3B,EAAW,MAAM,EAChB,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,sCACb,CAAA,EAAA,EAAA,GAAA,EAAC,IAAA,CAAE,UAAU,sCAA6B,qBAC1C,CAAA,EAAA,EAAA,GAAA,EAAC,IAAA,CAAE,UAAU,qDACV,EAAW,MAAM,MAMxB,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,uBACb,CAAA,EAAA,EAAA,IAAA,EAAC,IAAA,CACC,KAAM,EAAW,aAAa,CAC9B,SAAU,CAAC,cAAc,EAAE,KAAK,GAAG,GAAG,IAAI,CAAC,CAC3C,UAAU,2LAEV,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,QAAQ,CAAA,CAAC,UAAU,YAAY,cAGlC,CAAA,EAAA,EAAA,GAAA,EAAC,SAAA,CACC,QAAS,EACT,UAAU,4FACX,mBA/CC,sBA0DpB"}