module.exports=[670537,a=>{"use strict";var b=Object.defineProperty;class c{constructor(){((a,c,d)=>{let e;return(e="symbol"!=typeof c?c+"":c)in a?b(a,e,{enumerable:!0,configurable:!0,writable:!0,value:d}):a[e]=d})(this,"_listeners")}addEventListener(a,b){void 0===this._listeners&&(this._listeners={});let c=this._listeners;void 0===c[a]&&(c[a]=[]),-1===c[a].indexOf(b)&&c[a].push(b)}hasEventListener(a,b){if(void 0===this._listeners)return!1;let c=this._listeners;return void 0!==c[a]&&-1!==c[a].indexOf(b)}removeEventListener(a,b){if(void 0===this._listeners)return;let c=this._listeners[a];if(void 0!==c){let a=c.indexOf(b);-1!==a&&c.splice(a,1)}}dispatchEvent(a){if(void 0===this._listeners)return;let b=this._listeners[a.type];if(void 0!==b){a.target=this;let c=b.slice(0);for(let b=0,d=c.length;b<d;b++)c[b].call(this,a);a.target=null}}}a.s(["EventDispatcher",()=>c])},212637,a=>{"use strict";function b(){return(b=Object.assign.bind()).apply(null,arguments)}a.s(["default",()=>b])},532572,a=>{"use strict";var b=a.i(863050),c=a.i(835572),d=a.i(572423),e=a.i(235871);let f=a=>a===Object(a)&&!Array.isArray(a)&&"function"!=typeof a;function g(a,g){let h=(0,d.useThree)(a=>a.gl),i=(0,e.useLoader)(c.TextureLoader,f(a)?Object.values(a):a);return(0,b.useLayoutEffect)(()=>{null==g||g(i)},[g]),(0,b.useEffect)(()=>{if("initTexture"in h){let a=[];Array.isArray(i)?a=i:i instanceof c.Texture?a=[i]:f(i)&&(a=Object.values(i)),a.forEach(a=>{a instanceof c.Texture&&h.initTexture(a)})}},[h,i]),(0,b.useMemo)(()=>{if(!f(a))return i;{let b={},c=0;for(let d in a)b[d]=i[c++];return b}},[a,i])}g.preload=a=>e.useLoader.preload(c.TextureLoader,a),g.clear=a=>e.useLoader.clear(c.TextureLoader,a),a.s(["useTexture",()=>g])},826123,a=>{"use strict";var b=a.i(499969),c=a.i(863050),d=a.i(926725),e=a.i(75812),f=a.i(572423),g=a.i(532572),h=a.i(935194),i=a.i(212637),j=a.i(835572),k=a.i(670537),l=Object.defineProperty,m=(a,b,c)=>{let d;return(d="symbol"!=typeof b?b+"":b)in a?l(a,d,{enumerable:!0,configurable:!0,writable:!0,value:c}):a[d]=c,c};let n=new j.Euler(0,0,0,"YXZ"),o=new j.Vector3,p={type:"change"},q={type:"lock"},r={type:"unlock"},s=Math.PI/2;class t extends k.EventDispatcher{constructor(a,b){super(),m(this,"camera"),m(this,"domElement"),m(this,"isLocked"),m(this,"minPolarAngle"),m(this,"maxPolarAngle"),m(this,"pointerSpeed"),m(this,"onMouseMove",a=>{this.domElement&&!1!==this.isLocked&&(n.setFromQuaternion(this.camera.quaternion),n.y-=.002*a.movementX*this.pointerSpeed,n.x-=.002*a.movementY*this.pointerSpeed,n.x=Math.max(s-this.maxPolarAngle,Math.min(s-this.minPolarAngle,n.x)),this.camera.quaternion.setFromEuler(n),this.dispatchEvent(p))}),m(this,"onPointerlockChange",()=>{this.domElement&&(this.domElement.ownerDocument.pointerLockElement===this.domElement?(this.dispatchEvent(q),this.isLocked=!0):(this.dispatchEvent(r),this.isLocked=!1))}),m(this,"onPointerlockError",()=>{console.error("THREE.PointerLockControls: Unable to use Pointer Lock API")}),m(this,"connect",a=>{this.domElement=a||this.domElement,this.domElement&&(this.domElement.ownerDocument.addEventListener("mousemove",this.onMouseMove),this.domElement.ownerDocument.addEventListener("pointerlockchange",this.onPointerlockChange),this.domElement.ownerDocument.addEventListener("pointerlockerror",this.onPointerlockError))}),m(this,"disconnect",()=>{this.domElement&&(this.domElement.ownerDocument.removeEventListener("mousemove",this.onMouseMove),this.domElement.ownerDocument.removeEventListener("pointerlockchange",this.onPointerlockChange),this.domElement.ownerDocument.removeEventListener("pointerlockerror",this.onPointerlockError))}),m(this,"dispose",()=>{this.disconnect()}),m(this,"getObject",()=>this.camera),m(this,"direction",new j.Vector3(0,0,-1)),m(this,"getDirection",a=>a.copy(this.direction).applyQuaternion(this.camera.quaternion)),m(this,"moveForward",a=>{o.setFromMatrixColumn(this.camera.matrix,0),o.crossVectors(this.camera.up,o),this.camera.position.addScaledVector(o,a)}),m(this,"moveRight",a=>{o.setFromMatrixColumn(this.camera.matrix,0),this.camera.position.addScaledVector(o,a)}),m(this,"lock",()=>{this.domElement&&this.domElement.requestPointerLock()}),m(this,"unlock",()=>{this.domElement&&this.domElement.ownerDocument.exitPointerLock()}),this.camera=a,this.domElement=b,this.isLocked=!1,this.minPolarAngle=0,this.maxPolarAngle=Math.PI,this.pointerSpeed=1,b&&this.connect(b)}}let u=c.forwardRef(({domElement:a,selector:b,onChange:d,onLock:e,onUnlock:g,enabled:h=!0,makeDefault:j,...k},l)=>{let{camera:m,...n}=k,o=(0,f.useThree)(a=>a.setEvents),p=(0,f.useThree)(a=>a.gl),q=(0,f.useThree)(a=>a.camera),r=(0,f.useThree)(a=>a.invalidate),s=(0,f.useThree)(a=>a.events),u=(0,f.useThree)(a=>a.get),v=(0,f.useThree)(a=>a.set),w=m||q,x=a||s.connected||p.domElement,y=c.useMemo(()=>new t(w),[w]);return c.useEffect(()=>{if(h){y.connect(x);let a=u().events.compute;return o({compute(a,b){let c=b.size.width/2,d=b.size.height/2;b.pointer.set(c/b.size.width*2-1,-(2*(d/b.size.height))+1),b.raycaster.setFromCamera(b.pointer,b.camera)}}),()=>{y.disconnect(),o({compute:a})}}},[h,y]),c.useEffect(()=>{let a=a=>{r(),d&&d(a)};y.addEventListener("change",a),e&&y.addEventListener("lock",e),g&&y.addEventListener("unlock",g);let c=()=>y.lock(),f=b?Array.from(document.querySelectorAll(b)):[document];return f.forEach(a=>a&&a.addEventListener("click",c)),()=>{y.removeEventListener("change",a),e&&y.removeEventListener("lock",e),g&&y.removeEventListener("unlock",g),f.forEach(a=>a?a.removeEventListener("click",c):void 0)}},[d,e,g,b,y,r]),c.useEffect(()=>{if(j){let a=u().controls;return v({controls:y}),()=>v({controls:a})}},[j,y]),c.createElement("primitive",(0,i.default)({ref:l,object:y},n))});var v=a.i(233379);function w({image:a,position:d,rotation:f,size:i,index:k,onHover:l,onClick:m,isHovered:n,audioData:o}){let p=(0,c.useRef)(null),q=(0,c.useRef)(null),r=(0,g.useTexture)(a.src),[s,t]=(0,c.useState)(.5);(0,e.useFrame)((a,b)=>{let c=n?1.5:.5;if(o?.enabled){let a=[o.bass,o.lowMid,o.mid,o.highMid,o.treble][k%5]||0;c+=.8*a,o.isBeat&&(c+=.5*o.beatIntensity)}if(t(a=>(0,v.lerp)(a,c,5*b)),q.current&&o?.enabled&&q.current.material instanceof j.MeshStandardMaterial){let b=(.05*a.clock.elapsedTime+.1*k)%1;q.current.material.emissive.setHSL(b,.6,.2),q.current.material.emissiveIntensity=.3*o.beatIntensity}});let u=r.image?r.image.width/r.image.height:1,w=u>1?i:i*u,x=u>1?i/u:i,y=o?.enabled?`hsl(${40+30*o.mid}, ${50+30*o.energy}%, 90%)`:"#fff5e6";return(0,b.jsxs)("group",{position:d,rotation:f,children:[(0,b.jsx)("spotLight",{position:[0,x/2+.5,.5],angle:o?.enabled?.6+.2*o.energy:.6,penumbra:.5,intensity:s,color:y,"target-position":[0,0,0]}),(0,b.jsxs)("mesh",{ref:q,position:[0,0,-.025],children:[(0,b.jsx)("boxGeometry",{args:[w+.16,x+.16,.05]}),(0,b.jsx)("meshStandardMaterial",{color:n?"#8b7355":"#5c4a32",metalness:o?.enabled?.3+.3*o.treble:.3,roughness:.7,emissive:"#4f46e5",emissiveIntensity:0})]}),(0,b.jsxs)("mesh",{ref:p,position:[0,0,.01],onPointerEnter:()=>l(k),onPointerLeave:()=>l(null),onClick:m,children:[(0,b.jsx)("planeGeometry",{args:[w,x]}),(0,b.jsx)("meshStandardMaterial",{map:r})]}),n&&a.alt&&(0,b.jsx)(h.Html,{center:!0,position:[0,-x/2-.4,.1],children:(0,b.jsxs)("div",{className:"bg-white/95 text-gray-800 px-4 py-2 rounded shadow-lg min-w-[150px]",children:[(0,b.jsx)("p",{className:"font-serif text-sm font-medium",children:a.alt}),a.description&&(0,b.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:a.description})]})})]})}function x({speed:a}){let{camera:b}=(0,f.useThree)(),d=(0,c.useRef)(new j.Vector3),e=(0,c.useRef)(new j.Vector3);return(0,c.useEffect)(()=>{let c={},f=a=>{c[a.code]=!0},g=a=>{c[a.code]=!1};window.addEventListener("keydown",f),window.addEventListener("keyup",g);let h=setInterval(()=>{e.current.set(0,0,0),(c.KeyW||c.ArrowUp)&&(e.current.z-=1),(c.KeyS||c.ArrowDown)&&(e.current.z+=1),(c.KeyA||c.ArrowLeft)&&(e.current.x-=1),(c.KeyD||c.ArrowRight)&&(e.current.x+=1),e.current.normalize(),e.current.applyQuaternion(b.quaternion),e.current.y=0,d.current.lerp(e.current.multiplyScalar(a),.1),b.position.add(d.current),b.position.y=1.6},16);return()=>{window.removeEventListener("keydown",f),window.removeEventListener("keyup",g),clearInterval(h)}},[b,a]),null}function y({images:a,roomWidth:d,roomHeight:e,roomDepth:f,frameSize:g,walkSpeed:h,onImageClick:i,audioData:j}){let[k,l]=(0,c.useState)(null),[m,n]=(0,c.useState)(!1),o=(0,c.useMemo)(()=>{let b=[],c=0,g=Math.floor(f/3)-1;for(let h=0;h<g&&c<a.length;h++)b.push({image:a[c],position:[-d/2+.1,e/2-.5,-f/2+3+3*h],rotation:[0,Math.PI/2,0],index:c}),c++;let h=Math.floor(f/3)-1;for(let g=0;g<h&&c<a.length;g++)b.push({image:a[c],position:[d/2-.1,e/2-.5,-f/2+3+3*g],rotation:[0,-Math.PI/2,0],index:c}),c++;let i=Math.floor(d/3)-1;for(let g=0;g<i&&c<a.length;g++)b.push({image:a[c],position:[-d/2+3+3*g,e/2-.5,f/2-.1],rotation:[0,Math.PI,0],index:c}),c++;return b},[a,d,e,f]);return(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)("ambientLight",{intensity:j?.enabled?.25+.2*j.energy:.3}),(0,b.jsx)("hemisphereLight",{intensity:j?.enabled?.35+.2*j.mid:.4,groundColor:j?.enabled?`hsl(${30+20*j.bass}, 30%, 15%)`:"#3d3d3d"}),Array.from({length:4}).map((a,c)=>{let d=[j?.bass||0,j?.lowMid||0,j?.mid||0,j?.treble||0],g=j?.enabled?.8+.6*d[c]:.8,h=j?.enabled?.5+.5*j.beatIntensity:.5;return(0,b.jsxs)("group",{position:[0,e-.1,-f/4+c*f/3],children:[(0,b.jsx)("pointLight",{intensity:g,distance:j?.enabled?8+4*j.energy:8,color:j?.enabled?`hsl(${40+30*j.mid}, 70%, 90%)`:"#fff5e6"}),(0,b.jsxs)("mesh",{children:[(0,b.jsx)("cylinderGeometry",{args:[.3,.3,.05,32]}),(0,b.jsx)("meshStandardMaterial",{color:"#ffffff",emissive:j?.enabled?`hsl(${40+20*j.mid}, 80%, 70%)`:"#fff5e6",emissiveIntensity:h})]})]},c)}),(0,b.jsxs)("mesh",{rotation:[-Math.PI/2,0,0],position:[0,0,0],receiveShadow:!0,children:[(0,b.jsx)("planeGeometry",{args:[d,f]}),(0,b.jsx)("meshStandardMaterial",{color:j?.enabled?`hsl(${30+10*j.bass}, 15%, 12%)`:"#2a2520",roughness:j?.enabled?.8-.2*j.energy:.8,metalness:j?.enabled?.1+.2*j.treble:.1})]}),(0,b.jsxs)("mesh",{rotation:[Math.PI/2,0,0],position:[0,e,0],children:[(0,b.jsx)("planeGeometry",{args:[d,f]}),(0,b.jsx)("meshStandardMaterial",{color:"#f5f5f0"})]}),(0,b.jsxs)("mesh",{position:[-d/2,e/2,0],rotation:[0,Math.PI/2,0],children:[(0,b.jsx)("planeGeometry",{args:[f,e]}),(0,b.jsx)("meshStandardMaterial",{color:"#e8e4df"})]}),(0,b.jsxs)("mesh",{position:[d/2,e/2,0],rotation:[0,-Math.PI/2,0],children:[(0,b.jsx)("planeGeometry",{args:[f,e]}),(0,b.jsx)("meshStandardMaterial",{color:"#e8e4df"})]}),(0,b.jsxs)("mesh",{position:[0,e/2,f/2],rotation:[0,Math.PI,0],children:[(0,b.jsx)("planeGeometry",{args:[d,e]}),(0,b.jsx)("meshStandardMaterial",{color:"#dcd8d3"})]}),(0,b.jsxs)("mesh",{position:[0,e/2,-f/2],children:[(0,b.jsx)("planeGeometry",{args:[d,e]}),(0,b.jsx)("meshStandardMaterial",{color:"#e8e4df"})]}),o.map(({image:a,position:c,rotation:d,index:e})=>(0,b.jsx)(w,{image:a,position:c,rotation:d,size:g,index:e,onHover:l,onClick:()=>i?.(a,e),isHovered:k===e,audioData:j},`${a.src}-${e}`)),(0,b.jsxs)("mesh",{position:[0,.25,0],children:[(0,b.jsx)("boxGeometry",{args:[2,.5,.6]}),(0,b.jsx)("meshStandardMaterial",{color:"#4a3f35"})]}),(0,b.jsx)(x,{speed:h}),(0,b.jsx)(u,{onLock:()=>n(!0),onUnlock:()=>n(!1)})]})}function z({images:a}){return(0,b.jsx)("div",{className:"w-full h-full bg-gradient-to-b from-stone-100 to-stone-200 p-8 overflow-y-auto",children:(0,b.jsxs)("div",{className:"max-w-4xl mx-auto",children:[(0,b.jsx)("h2",{className:"text-2xl font-serif text-stone-800 mb-6 text-center",children:"Gallery Exhibition"}),(0,b.jsx)("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-6",children:a.map((a,c)=>(0,b.jsxs)("div",{className:"bg-white p-4 shadow-lg",children:[(0,b.jsx)("img",{src:a.src,alt:a.alt||"",className:"w-full h-40 object-cover"}),a.alt&&(0,b.jsx)("p",{className:"text-stone-600 text-sm mt-2 font-serif",children:a.alt})]},c))})]})})}function A({images:a,className:e="w-full h-[700px]",roomWidth:f=12,roomHeight:g=4,roomDepth:h=20,frameSize:i=1.8,walkSpeed:j=.08,onImageClick:k,audioData:l}){let[m,n]=(0,c.useState)(!0);return((0,c.useEffect)(()=>{try{let a=document.createElement("canvas");a.getContext("webgl")||a.getContext("experimental-webgl")||n(!1)}catch{n(!1)}},[]),m)?(0,b.jsxs)("div",{className:e,children:[(0,b.jsx)(d.Canvas,{camera:{position:[0,1.6,-h/2+2],fov:75},shadows:!0,gl:{antialias:!0},style:{background:"#1a1a1a"},children:(0,b.jsx)(y,{images:a,roomWidth:f,roomHeight:g,roomDepth:h,frameSize:i,walkSpeed:l?.enabled?j*(1+.5*l.energy):j,onImageClick:k,audioData:l})}),(0,b.jsx)("div",{className:"absolute bottom-4 left-1/2 -translate-x-1/2 bg-black/70 text-white px-4 py-2 rounded-lg text-sm",children:"Click to look around | WASD or Arrow keys to walk"})]}):(0,b.jsx)("div",{className:e,children:(0,b.jsx)(z,{images:a})})}a.s(["default",()=>A],826123)}];

//# sourceMappingURL=_15f8c0c8._.js.map