{"version":3,"sources":["../../../../node_modules/.pnpm/three-stdlib%402.36.1_three%400.170.0/node_modules/src/controls/EventDispatcher.ts","../../../../node_modules/.pnpm/%40babel%2Bruntime%407.28.6/node_modules/%40babel/runtime/helpers/esm/extends.js","../../../../node_modules/.pnpm/%40react-three%2Bdrei%4010.7.7_%40react-three%2Bfiber%409.5.0_%40types%2Breact%4019.2.8_react-dom%4019.2.3_react%40_otfyaga7ti6f5mvznauek6nyga/node_modules/%40react-three/drei/core/Texture.js","../../../../node_modules/.pnpm/%40react-three%2Bdrei%4010.7.7_%40react-three%2Bfiber%409.5.0_%40types%2Breact%4019.2.8_react-dom%4019.2.3_react%40_otfyaga7ti6f5mvznauek6nyga/node_modules/%40react-three/drei/core/PointerLockControls.js","../../../../src/components/gallery-3d/RoomGallery.tsx","../../../../node_modules/.pnpm/three-stdlib%402.36.1_three%400.170.0/node_modules/src/controls/PointerLockControls.ts"],"sourcesContent":["/*\nDue to @types/three r168 breaking change\nwe have to manually copy the EventDispatcher class from three.js.\nSo this files merges the declarations from https://github.com/DefinitelyTyped/DefinitelyTyped/blob/master/types/three/src/core/EventDispatcher.d.ts\nwith the implementation from https://github.com/mrdoob/three.js/blob/dev/src/core/EventDispatcher.js\nMore info in https://github.com/pmndrs/three-stdlib/issues/387\n*/\n\n/**\n * The minimal basic Event that can be dispatched by a {@link EventDispatcher<>}.\n */\nexport interface BaseEvent<TEventType extends string = string> {\n    readonly type: TEventType;\n    // not defined in @types/three\n    target: any;\n}\n\n/**\n * The minimal expected contract of a fired Event that was dispatched by a {@link EventDispatcher<>}.\n */\nexport interface Event<TEventType extends string = string, TTarget = unknown> {\n    readonly type: TEventType;\n    readonly target: TTarget;\n}\n\nexport type EventListener<TEventData, TEventType extends string, TTarget> = (\n    event: TEventData & Event<TEventType, TTarget>,\n) => void;\n\nexport class EventDispatcher<TEventMap extends {} = {}> {\n    // not defined in @types/three\n    private _listeners: any;\n\n    /**\n     * Adds a listener to an event type.\n     * @param type The type of event to listen to.\n     * @param listener The function that gets called when the event is fired.\n     */\n\taddEventListener<T extends Extract<keyof TEventMap, string>>(\n        type: T,\n        listener: EventListener<TEventMap[T], T, this>,\n    ): void {\n\n\t\tif ( this._listeners === undefined ) this._listeners = {};\n\n\t\tconst listeners = this._listeners;\n\n\t\tif ( listeners[ type ] === undefined ) {\n\n\t\t\tlisteners[ type ] = [];\n\n\t\t}\n\n\t\tif ( listeners[ type ].indexOf( listener ) === - 1 ) {\n\n\t\t\tlisteners[ type ].push( listener );\n\n\t\t}\n\n\t}\n\n\t/**\n     * Checks if listener is added to an event type.\n     * @param type The type of event to listen to.\n     * @param listener The function that gets called when the event is fired.\n     */\n    hasEventListener<T extends Extract<keyof TEventMap, string>>(\n        type: T,\n        listener: EventListener<TEventMap[T], T, this>,\n    ): boolean {\n\n\t\tif ( this._listeners === undefined ) return false;\n\n\t\tconst listeners = this._listeners;\n\n\t\treturn listeners[ type ] !== undefined && listeners[ type ].indexOf( listener ) !== - 1;\n\n\t}\n\n\t/**\n     * Removes a listener from an event type.\n     * @param type The type of the listener that gets removed.\n     * @param listener The listener function that gets removed.\n     */\n    removeEventListener<T extends Extract<keyof TEventMap, string>>(\n        type: T,\n        listener: EventListener<TEventMap[T], T, this>,\n    ): void {\n\n\t\tif ( this._listeners === undefined ) return;\n\n\t\tconst listeners = this._listeners;\n\t\tconst listenerArray = listeners[ type ];\n\n\t\tif ( listenerArray !== undefined ) {\n\n\t\t\tconst index = listenerArray.indexOf( listener );\n\n\t\t\tif ( index !== - 1 ) {\n\n\t\t\t\tlistenerArray.splice( index, 1 );\n\n\t\t\t}\n\n\t\t}\n\n\t}\n\n\t/**\n     * Fire an event type.\n     * @param event The event that gets fired.\n     */\n    dispatchEvent<T extends Extract<keyof TEventMap, string>>(event: BaseEvent<T> & TEventMap[T]): void {\n\n\t\tif ( this._listeners === undefined ) return;\n\n\t\tconst listeners = this._listeners;\n\t\tconst listenerArray = listeners[ event.type ];\n\n\t\tif ( listenerArray !== undefined ) {\n\n\t\t\tevent.target = this;\n\n\t\t\t// Make a copy, in case listeners are removed while iterating.\n\t\t\tconst array = listenerArray.slice( 0 );\n\n\t\t\tfor ( let i = 0, l = array.length; i < l; i ++ ) {\n\n\t\t\t\tarray[ i ].call( this, event );\n\n\t\t\t}\n\n\t\t\tevent.target = null;\n\n\t\t}\n\n\t}\n\n}","function _extends() {\n  return _extends = Object.assign ? Object.assign.bind() : function (n) {\n    for (var e = 1; e < arguments.length; e++) {\n      var t = arguments[e];\n      for (var r in t) ({}).hasOwnProperty.call(t, r) && (n[r] = t[r]);\n    }\n    return n;\n  }, _extends.apply(null, arguments);\n}\nexport { _extends as default };","import * as React from 'react';\nimport { useLayoutEffect, useEffect, useMemo } from 'react';\nimport { TextureLoader, Texture as Texture$1 } from 'three';\nimport { useThree, useLoader } from '@react-three/fiber';\n\nconst IsObject = url => url === Object(url) && !Array.isArray(url) && typeof url !== 'function';\nfunction useTexture(input, onLoad) {\n  const gl = useThree(state => state.gl);\n  const textures = useLoader(TextureLoader, IsObject(input) ? Object.values(input) : input);\n  useLayoutEffect(() => {\n    onLoad == null || onLoad(textures);\n  }, [onLoad]);\n\n  // https://github.com/mrdoob/three.js/issues/22696\n  // Upload the texture to the GPU immediately instead of waiting for the first render\n  // NOTE: only available for WebGLRenderer\n  useEffect(() => {\n    if ('initTexture' in gl) {\n      let textureArray = [];\n      if (Array.isArray(textures)) {\n        textureArray = textures;\n      } else if (textures instanceof Texture$1) {\n        textureArray = [textures];\n      } else if (IsObject(textures)) {\n        textureArray = Object.values(textures);\n      }\n      textureArray.forEach(texture => {\n        if (texture instanceof Texture$1) {\n          gl.initTexture(texture);\n        }\n      });\n    }\n  }, [gl, textures]);\n  const mappedTextures = useMemo(() => {\n    if (IsObject(input)) {\n      const keyed = {};\n      let i = 0;\n      for (const key in input) keyed[key] = textures[i++];\n      return keyed;\n    } else {\n      return textures;\n    }\n  }, [input, textures]);\n  return mappedTextures;\n}\nuseTexture.preload = url => useLoader.preload(TextureLoader, url);\nuseTexture.clear = input => useLoader.clear(TextureLoader, input);\n\n//\n\nconst Texture = ({\n  children,\n  input,\n  onLoad\n}) => {\n  const ret = useTexture(input, onLoad);\n  return /*#__PURE__*/React.createElement(React.Fragment, null, children == null ? void 0 : children(ret));\n};\n\nexport { IsObject, Texture, useTexture };\n","import _extends from '@babel/runtime/helpers/esm/extends';\nimport { useThree } from '@react-three/fiber';\nimport * as React from 'react';\nimport { PointerLockControls as PointerLockControls$1 } from 'three-stdlib';\n\nconst PointerLockControls = /* @__PURE__ */React.forwardRef(({\n  domElement,\n  selector,\n  onChange,\n  onLock,\n  onUnlock,\n  enabled = true,\n  makeDefault,\n  ...props\n}, ref) => {\n  const {\n    camera,\n    ...rest\n  } = props;\n  const setEvents = useThree(state => state.setEvents);\n  const gl = useThree(state => state.gl);\n  const defaultCamera = useThree(state => state.camera);\n  const invalidate = useThree(state => state.invalidate);\n  const events = useThree(state => state.events);\n  const get = useThree(state => state.get);\n  const set = useThree(state => state.set);\n  const explCamera = camera || defaultCamera;\n  const explDomElement = domElement || events.connected || gl.domElement;\n  const controls = React.useMemo(() => new PointerLockControls$1(explCamera), [explCamera]);\n  React.useEffect(() => {\n    if (enabled) {\n      controls.connect(explDomElement);\n      // Force events to be centered while PLC is active\n      const oldComputeOffsets = get().events.compute;\n      setEvents({\n        compute(event, state) {\n          const offsetX = state.size.width / 2;\n          const offsetY = state.size.height / 2;\n          state.pointer.set(offsetX / state.size.width * 2 - 1, -(offsetY / state.size.height) * 2 + 1);\n          state.raycaster.setFromCamera(state.pointer, state.camera);\n        }\n      });\n      return () => {\n        controls.disconnect();\n        setEvents({\n          compute: oldComputeOffsets\n        });\n      };\n    }\n  }, [enabled, controls]);\n  React.useEffect(() => {\n    const callback = e => {\n      invalidate();\n      if (onChange) onChange(e);\n    };\n    controls.addEventListener('change', callback);\n    if (onLock) controls.addEventListener('lock', onLock);\n    if (onUnlock) controls.addEventListener('unlock', onUnlock);\n\n    // Enforce previous interaction\n    const handler = () => controls.lock();\n    const elements = selector ? Array.from(document.querySelectorAll(selector)) : [document];\n    elements.forEach(element => element && element.addEventListener('click', handler));\n    return () => {\n      controls.removeEventListener('change', callback);\n      if (onLock) controls.removeEventListener('lock', onLock);\n      if (onUnlock) controls.removeEventListener('unlock', onUnlock);\n      elements.forEach(element => element ? element.removeEventListener('click', handler) : undefined);\n    };\n  }, [onChange, onLock, onUnlock, selector, controls, invalidate]);\n  React.useEffect(() => {\n    if (makeDefault) {\n      const old = get().controls;\n      // @ts-ignore https://github.com/three-types/three-ts-types/pull/1398\n      set({\n        controls\n      });\n      return () => set({\n        controls: old\n      });\n    }\n  }, [makeDefault, controls]);\n  return /*#__PURE__*/React.createElement(\"primitive\", _extends({\n    ref: ref,\n    object: controls\n  }, rest));\n});\n\nexport { PointerLockControls };\n","'use client';\n\nimport { useRef, useMemo, useState, useEffect, useCallback } from 'react';\nimport { Canvas, useFrame, useThree } from '@react-three/fiber';\nimport { useTexture, Html, PointerLockControls } from '@react-three/drei';\nimport * as THREE from 'three';\nimport type { GalleryImage, AudioReactiveData } from './types';\nimport { lerp } from './utils';\n\ninterface RoomGalleryProps {\n  images: GalleryImage[];\n  className?: string;\n  roomWidth?: number;\n  roomHeight?: number;\n  roomDepth?: number;\n  frameSize?: number;\n  walkSpeed?: number;\n  onImageClick?: (image: GalleryImage, index: number) => void;\n  audioData?: AudioReactiveData;\n}\n\ninterface WallPaintingProps {\n  image: GalleryImage;\n  position: [number, number, number];\n  rotation: [number, number, number];\n  size: number;\n  index: number;\n  onHover: (index: number | null) => void;\n  onClick: () => void;\n  isHovered: boolean;\n  audioData?: AudioReactiveData;\n}\n\nfunction WallPainting({\n  image,\n  position,\n  rotation,\n  size,\n  index,\n  onHover,\n  onClick,\n  isHovered,\n  audioData,\n}: WallPaintingProps) {\n  const meshRef = useRef<THREE.Mesh>(null);\n  const frameRef = useRef<THREE.Mesh>(null);\n  const texture = useTexture(image.src);\n  const [lightIntensity, setLightIntensity] = useState(0.5);\n\n  useFrame((state, delta) => {\n    // Calculate target light intensity with audio reactivity\n    let targetIntensity = isHovered ? 1.5 : 0.5;\n\n    if (audioData?.enabled) {\n      // Each painting responds to different frequency bands\n      const freqValues = [audioData.bass, audioData.lowMid, audioData.mid, audioData.highMid, audioData.treble];\n      const freqResponse = freqValues[index % 5] || 0;\n      targetIntensity += freqResponse * 0.8;\n\n      if (audioData.isBeat) {\n        targetIntensity += audioData.beatIntensity * 0.5;\n      }\n    }\n\n    setLightIntensity((prev) => lerp(prev, targetIntensity, delta * 5));\n\n    // Audio reactive frame glow\n    if (frameRef.current && audioData?.enabled) {\n      if (frameRef.current.material instanceof THREE.MeshStandardMaterial) {\n        const hue = (state.clock.elapsedTime * 0.05 + index * 0.1) % 1;\n        frameRef.current.material.emissive.setHSL(hue, 0.6, 0.2);\n        frameRef.current.material.emissiveIntensity = audioData.beatIntensity * 0.3;\n      }\n    }\n  });\n\n  const aspect = texture.image ? texture.image.width / texture.image.height : 1;\n  const width = aspect > 1 ? size : size * aspect;\n  const height = aspect > 1 ? size / aspect : size;\n\n  const frameThickness = 0.08;\n  const frameDepth = 0.05;\n\n  // Calculate spotlight color based on audio\n  const spotlightColor = audioData?.enabled\n    ? `hsl(${40 + audioData.mid * 30}, ${50 + audioData.energy * 30}%, 90%)`\n    : '#fff5e6';\n\n  return (\n    <group position={position} rotation={rotation}>\n      {/* Spotlight for painting with audio reactivity */}\n      <spotLight\n        position={[0, height / 2 + 0.5, 0.5]}\n        angle={audioData?.enabled ? 0.6 + audioData.energy * 0.2 : 0.6}\n        penumbra={0.5}\n        intensity={lightIntensity}\n        color={spotlightColor}\n        target-position={[0, 0, 0]}\n      />\n\n      {/* Frame with audio-reactive emissive */}\n      <mesh ref={frameRef} position={[0, 0, -frameDepth / 2]}>\n        <boxGeometry args={[width + frameThickness * 2, height + frameThickness * 2, frameDepth]} />\n        <meshStandardMaterial\n          color={isHovered ? '#8b7355' : '#5c4a32'}\n          metalness={audioData?.enabled ? 0.3 + audioData.treble * 0.3 : 0.3}\n          roughness={0.7}\n          emissive=\"#4f46e5\"\n          emissiveIntensity={0}\n        />\n      </mesh>\n\n      {/* Canvas/Painting */}\n      <mesh\n        ref={meshRef}\n        position={[0, 0, 0.01]}\n        onPointerEnter={() => onHover(index)}\n        onPointerLeave={() => onHover(null)}\n        onClick={onClick}\n      >\n        <planeGeometry args={[width, height]} />\n        <meshStandardMaterial map={texture} />\n      </mesh>\n\n      {/* Museum label */}\n      {isHovered && image.alt && (\n        <Html center position={[0, -height / 2 - 0.4, 0.1]}>\n          <div className=\"bg-white/95 text-gray-800 px-4 py-2 rounded shadow-lg min-w-[150px]\">\n            <p className=\"font-serif text-sm font-medium\">{image.alt}</p>\n            {image.description && (\n              <p className=\"text-xs text-gray-500 mt-1\">{image.description}</p>\n            )}\n          </div>\n        </Html>\n      )}\n    </group>\n  );\n}\n\ninterface RoomSceneProps {\n  images: GalleryImage[];\n  roomWidth: number;\n  roomHeight: number;\n  roomDepth: number;\n  frameSize: number;\n  walkSpeed: number;\n  onImageClick?: (image: GalleryImage, index: number) => void;\n  audioData?: AudioReactiveData;\n}\n\nfunction Player({ speed }: { speed: number }) {\n  const { camera } = useThree();\n  const velocity = useRef(new THREE.Vector3());\n  const direction = useRef(new THREE.Vector3());\n\n  useEffect(() => {\n    const keys: { [key: string]: boolean } = {};\n\n    const handleKeyDown = (e: KeyboardEvent) => {\n      keys[e.code] = true;\n    };\n\n    const handleKeyUp = (e: KeyboardEvent) => {\n      keys[e.code] = false;\n    };\n\n    window.addEventListener('keydown', handleKeyDown);\n    window.addEventListener('keyup', handleKeyUp);\n\n    const interval = setInterval(() => {\n      direction.current.set(0, 0, 0);\n\n      if (keys['KeyW'] || keys['ArrowUp']) direction.current.z -= 1;\n      if (keys['KeyS'] || keys['ArrowDown']) direction.current.z += 1;\n      if (keys['KeyA'] || keys['ArrowLeft']) direction.current.x -= 1;\n      if (keys['KeyD'] || keys['ArrowRight']) direction.current.x += 1;\n\n      direction.current.normalize();\n      direction.current.applyQuaternion(camera.quaternion);\n      direction.current.y = 0;\n\n      velocity.current.lerp(direction.current.multiplyScalar(speed), 0.1);\n      camera.position.add(velocity.current);\n\n      // Keep camera at eye level\n      camera.position.y = 1.6;\n    }, 16);\n\n    return () => {\n      window.removeEventListener('keydown', handleKeyDown);\n      window.removeEventListener('keyup', handleKeyUp);\n      clearInterval(interval);\n    };\n  }, [camera, speed]);\n\n  return null;\n}\n\nfunction RoomScene({\n  images,\n  roomWidth,\n  roomHeight,\n  roomDepth,\n  frameSize,\n  walkSpeed,\n  onImageClick,\n  audioData,\n}: RoomSceneProps) {\n  const [hoveredIndex, setHoveredIndex] = useState<number | null>(null);\n  const [isLocked, setIsLocked] = useState(false);\n\n  // Calculate painting positions along walls\n  const paintings = useMemo(() => {\n    const result: Array<{\n      image: GalleryImage;\n      position: [number, number, number];\n      rotation: [number, number, number];\n      index: number;\n    }> = [];\n\n    const spacing = 3;\n    let imageIndex = 0;\n\n    // Left wall\n    const leftWallPaintings = Math.floor(roomDepth / spacing) - 1;\n    for (let i = 0; i < leftWallPaintings && imageIndex < images.length; i++) {\n      result.push({\n        image: images[imageIndex],\n        position: [-roomWidth / 2 + 0.1, roomHeight / 2 - 0.5, -roomDepth / 2 + spacing + i * spacing],\n        rotation: [0, Math.PI / 2, 0],\n        index: imageIndex,\n      });\n      imageIndex++;\n    }\n\n    // Right wall\n    const rightWallPaintings = Math.floor(roomDepth / spacing) - 1;\n    for (let i = 0; i < rightWallPaintings && imageIndex < images.length; i++) {\n      result.push({\n        image: images[imageIndex],\n        position: [roomWidth / 2 - 0.1, roomHeight / 2 - 0.5, -roomDepth / 2 + spacing + i * spacing],\n        rotation: [0, -Math.PI / 2, 0],\n        index: imageIndex,\n      });\n      imageIndex++;\n    }\n\n    // Back wall\n    const backWallPaintings = Math.floor(roomWidth / spacing) - 1;\n    for (let i = 0; i < backWallPaintings && imageIndex < images.length; i++) {\n      result.push({\n        image: images[imageIndex],\n        position: [-roomWidth / 2 + spacing + i * spacing, roomHeight / 2 - 0.5, roomDepth / 2 - 0.1],\n        rotation: [0, Math.PI, 0],\n        index: imageIndex,\n      });\n      imageIndex++;\n    }\n\n    return result;\n  }, [images, roomWidth, roomHeight, roomDepth]);\n\n  return (\n    <>\n      {/* Ambient museum lighting with audio reactivity */}\n      <ambientLight intensity={audioData?.enabled ? 0.25 + audioData.energy * 0.2 : 0.3} />\n      <hemisphereLight\n        intensity={audioData?.enabled ? 0.35 + audioData.mid * 0.2 : 0.4}\n        groundColor={audioData?.enabled ? `hsl(${30 + audioData.bass * 20}, 30%, 15%)` : '#3d3d3d'}\n      />\n\n      {/* Ceiling lights with audio-reactive pulse */}\n      {Array.from({ length: 4 }).map((_, i) => {\n        const freqValues = [audioData?.bass || 0, audioData?.lowMid || 0, audioData?.mid || 0, audioData?.treble || 0];\n        const lightPulse = audioData?.enabled ? 0.8 + freqValues[i] * 0.6 : 0.8;\n        const emissivePulse = audioData?.enabled ? 0.5 + audioData.beatIntensity * 0.5 : 0.5;\n\n        return (\n          <group key={i} position={[0, roomHeight - 0.1, -roomDepth / 4 + (i * roomDepth) / 3]}>\n            <pointLight\n              intensity={lightPulse}\n              distance={audioData?.enabled ? 8 + audioData.energy * 4 : 8}\n              color={audioData?.enabled ? `hsl(${40 + audioData.mid * 30}, 70%, 90%)` : '#fff5e6'}\n            />\n            <mesh>\n              <cylinderGeometry args={[0.3, 0.3, 0.05, 32]} />\n              <meshStandardMaterial\n                color=\"#ffffff\"\n                emissive={audioData?.enabled ? `hsl(${40 + audioData.mid * 20}, 80%, 70%)` : '#fff5e6'}\n                emissiveIntensity={emissivePulse}\n              />\n            </mesh>\n          </group>\n        );\n      })}\n\n      {/* Floor with audio-reactive reflectivity */}\n      <mesh rotation={[-Math.PI / 2, 0, 0]} position={[0, 0, 0]} receiveShadow>\n        <planeGeometry args={[roomWidth, roomDepth]} />\n        <meshStandardMaterial\n          color={audioData?.enabled ? `hsl(${30 + audioData.bass * 10}, 15%, 12%)` : '#2a2520'}\n          roughness={audioData?.enabled ? 0.8 - audioData.energy * 0.2 : 0.8}\n          metalness={audioData?.enabled ? 0.1 + audioData.treble * 0.2 : 0.1}\n        />\n      </mesh>\n\n      {/* Ceiling */}\n      <mesh rotation={[Math.PI / 2, 0, 0]} position={[0, roomHeight, 0]}>\n        <planeGeometry args={[roomWidth, roomDepth]} />\n        <meshStandardMaterial color=\"#f5f5f0\" />\n      </mesh>\n\n      {/* Walls */}\n      {/* Left wall */}\n      <mesh position={[-roomWidth / 2, roomHeight / 2, 0]} rotation={[0, Math.PI / 2, 0]}>\n        <planeGeometry args={[roomDepth, roomHeight]} />\n        <meshStandardMaterial color=\"#e8e4df\" />\n      </mesh>\n\n      {/* Right wall */}\n      <mesh position={[roomWidth / 2, roomHeight / 2, 0]} rotation={[0, -Math.PI / 2, 0]}>\n        <planeGeometry args={[roomDepth, roomHeight]} />\n        <meshStandardMaterial color=\"#e8e4df\" />\n      </mesh>\n\n      {/* Back wall */}\n      <mesh position={[0, roomHeight / 2, roomDepth / 2]} rotation={[0, Math.PI, 0]}>\n        <planeGeometry args={[roomWidth, roomHeight]} />\n        <meshStandardMaterial color=\"#dcd8d3\" />\n      </mesh>\n\n      {/* Front wall (with entrance) */}\n      <mesh position={[0, roomHeight / 2, -roomDepth / 2]}>\n        <planeGeometry args={[roomWidth, roomHeight]} />\n        <meshStandardMaterial color=\"#e8e4df\" />\n      </mesh>\n\n      {/* Paintings with audio reactivity */}\n      {paintings.map(({ image, position, rotation, index }) => (\n        <WallPainting\n          key={`${image.src}-${index}`}\n          image={image}\n          position={position}\n          rotation={rotation}\n          size={frameSize}\n          index={index}\n          onHover={setHoveredIndex}\n          onClick={() => onImageClick?.(image, index)}\n          isHovered={hoveredIndex === index}\n          audioData={audioData}\n        />\n      ))}\n\n      {/* Benches */}\n      <mesh position={[0, 0.25, 0]}>\n        <boxGeometry args={[2, 0.5, 0.6]} />\n        <meshStandardMaterial color=\"#4a3f35\" />\n      </mesh>\n\n      {/* Player movement */}\n      <Player speed={walkSpeed} />\n\n      {/* First-person controls */}\n      <PointerLockControls\n        onLock={() => setIsLocked(true)}\n        onUnlock={() => setIsLocked(false)}\n      />\n    </>\n  );\n}\n\nfunction FallbackGallery({ images }: { images: GalleryImage[] }) {\n  return (\n    <div className=\"w-full h-full bg-gradient-to-b from-stone-100 to-stone-200 p-8 overflow-y-auto\">\n      <div className=\"max-w-4xl mx-auto\">\n        <h2 className=\"text-2xl font-serif text-stone-800 mb-6 text-center\">Gallery Exhibition</h2>\n        <div className=\"grid grid-cols-2 md:grid-cols-3 gap-6\">\n          {images.map((img, i) => (\n            <div key={i} className=\"bg-white p-4 shadow-lg\">\n              <img\n                src={img.src}\n                alt={img.alt || ''}\n                className=\"w-full h-40 object-cover\"\n              />\n              {img.alt && (\n                <p className=\"text-stone-600 text-sm mt-2 font-serif\">{img.alt}</p>\n              )}\n            </div>\n          ))}\n        </div>\n      </div>\n    </div>\n  );\n}\n\nexport default function RoomGallery({\n  images,\n  className = 'w-full h-[700px]',\n  roomWidth = 12,\n  roomHeight = 4,\n  roomDepth = 20,\n  frameSize = 1.8,\n  walkSpeed = 0.08,\n  onImageClick,\n  audioData,\n}: RoomGalleryProps) {\n  const [webglSupported, setWebglSupported] = useState(true);\n\n  useEffect(() => {\n    try {\n      const canvas = document.createElement('canvas');\n      if (!canvas.getContext('webgl') && !canvas.getContext('experimental-webgl')) {\n        setWebglSupported(false);\n      }\n    } catch {\n      setWebglSupported(false);\n    }\n  }, []);\n\n  if (!webglSupported) {\n    return (\n      <div className={className}>\n        <FallbackGallery images={images} />\n      </div>\n    );\n  }\n\n  return (\n    <div className={className}>\n      <Canvas\n        camera={{ position: [0, 1.6, -roomDepth / 2 + 2], fov: 75 }}\n        shadows\n        gl={{ antialias: true }}\n        style={{ background: '#1a1a1a' }}\n      >\n        <RoomScene\n          images={images}\n          roomWidth={roomWidth}\n          roomHeight={roomHeight}\n          roomDepth={roomDepth}\n          frameSize={frameSize}\n          walkSpeed={audioData?.enabled ? walkSpeed * (1 + audioData.energy * 0.5) : walkSpeed}\n          onImageClick={onImageClick}\n          audioData={audioData}\n        />\n      </Canvas>\n\n      {/* Instructions overlay */}\n      <div className=\"absolute bottom-4 left-1/2 -translate-x-1/2 bg-black/70 text-white px-4 py-2 rounded-lg text-sm\">\n        Click to look around | WASD or Arrow keys to walk\n      </div>\n    </div>\n  );\n}\n","import { Euler, Camera, Vector3 } from 'three'\nimport { EventDispatcher } from './EventDispatcher'\n\nconst _euler = /* @__PURE__ */ new Euler(0, 0, 0, 'YXZ')\nconst _vector = /* @__PURE__ */ new Vector3()\nconst _changeEvent = { type: 'change' }\nconst _lockEvent = { type: 'lock' }\nconst _unlockEvent = { type: 'unlock' }\nconst _MOUSE_SENSITIVITY = 0.002\nconst _PI_2 = Math.PI / 2\n\nexport interface PointerLockControlsEventMap {\n  /**\n   * Fires when the user moves the mouse.\n   */\n  change: {}\n\n  /**\n   * Fires when the pointer lock status is \"locked\" (in other words: the mouse is captured).\n   */\n  lock: {}\n\n  /**\n   * Fires when the pointer lock status is \"unlocked\" (in other words: the mouse is not captured anymore).\n   */\n  unlock: {}\n}\n\nclass PointerLockControls extends EventDispatcher<PointerLockControlsEventMap> {\n  public camera: Camera\n  public domElement?: HTMLElement\n  public isLocked: boolean\n  public minPolarAngle: number\n  public maxPolarAngle: number\n  public pointerSpeed: number\n\n  constructor(camera: Camera, domElement?: HTMLElement) {\n    super()\n\n    this.camera = camera\n    this.domElement = domElement\n    this.isLocked = false\n\n    // Set to constrain the pitch of the camera\n    // Range is 0 to Math.PI radians\n    this.minPolarAngle = 0 // radians\n    this.maxPolarAngle = Math.PI // radians\n\n    this.pointerSpeed = 1.0\n    if (domElement) this.connect(domElement)\n  }\n\n  private onMouseMove = (event: MouseEvent): void => {\n    if (!this.domElement || this.isLocked === false) return\n    _euler.setFromQuaternion(this.camera.quaternion)\n    _euler.y -= event.movementX * _MOUSE_SENSITIVITY * this.pointerSpeed\n    _euler.x -= event.movementY * _MOUSE_SENSITIVITY * this.pointerSpeed\n    _euler.x = Math.max(_PI_2 - this.maxPolarAngle, Math.min(_PI_2 - this.minPolarAngle, _euler.x))\n    this.camera.quaternion.setFromEuler(_euler)\n    // @ts-ignore\n    this.dispatchEvent(_changeEvent)\n  }\n\n  private onPointerlockChange = (): void => {\n    if (!this.domElement) return\n    if (this.domElement.ownerDocument.pointerLockElement === this.domElement) {\n      // @ts-ignore\n      this.dispatchEvent(_lockEvent)\n      this.isLocked = true\n    } else {\n      // @ts-ignore\n      this.dispatchEvent(_unlockEvent)\n      this.isLocked = false\n    }\n  }\n\n  private onPointerlockError = (): void => {\n    console.error('THREE.PointerLockControls: Unable to use Pointer Lock API')\n  }\n\n  public connect = (domElement: HTMLElement): void => {\n    this.domElement = domElement || this.domElement\n    if (!this.domElement) return\n    this.domElement.ownerDocument.addEventListener('mousemove', this.onMouseMove)\n    this.domElement.ownerDocument.addEventListener('pointerlockchange', this.onPointerlockChange)\n    this.domElement.ownerDocument.addEventListener('pointerlockerror', this.onPointerlockError)\n  }\n\n  public disconnect = (): void => {\n    if (!this.domElement) return\n    this.domElement.ownerDocument.removeEventListener('mousemove', this.onMouseMove)\n    this.domElement.ownerDocument.removeEventListener('pointerlockchange', this.onPointerlockChange)\n    this.domElement.ownerDocument.removeEventListener('pointerlockerror', this.onPointerlockError)\n  }\n\n  public dispose = (): void => {\n    this.disconnect()\n  }\n\n  public getObject = (): Camera => {\n    // retaining this method for backward compatibility\n    return this.camera\n  }\n\n  private direction = new Vector3(0, 0, -1)\n  public getDirection = (v: Vector3): Vector3 => {\n    return v.copy(this.direction).applyQuaternion(this.camera.quaternion)\n  }\n\n  public moveForward = (distance: number): void => {\n    // move forward parallel to the xz-plane\n    // assumes camera.up is y-up\n    _vector.setFromMatrixColumn(this.camera.matrix, 0)\n    _vector.crossVectors(this.camera.up, _vector)\n    this.camera.position.addScaledVector(_vector, distance)\n  }\n\n  public moveRight = (distance: number): void => {\n    _vector.setFromMatrixColumn(this.camera.matrix, 0)\n    this.camera.position.addScaledVector(_vector, distance)\n  }\n\n  public lock = (): void => {\n    if (this.domElement) this.domElement.requestPointerLock()\n  }\n\n  public unlock = (): void => {\n    if (this.domElement) this.domElement.ownerDocument.exitPointerLock()\n  }\n}\n\nexport { PointerLockControls }\n"],"names":[],"mappings":"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","ignoreList":[1,2,3,5]}