{"version":3,"sources":["../../../../src/app/agent/page.tsx","../../../../src/components/agent/AgentSidebar.tsx","../../../../src/components/agent/ContextBar.tsx","../../../../src/components/agent/CodePanel.tsx","../../../../src/components/agent/AgentChat.tsx","../../../../src/components/auth/GitHubAuthModal.tsx","../../../../src/components/auth/AgentAccessRestricted.tsx","../../../../src/hooks/useStreamingChat.ts","../../../../src/hooks/useAgentSandbox.ts"],"sourcesContent":["'use client';\n\nimport { useState, useCallback, useEffect, useMemo, useRef } from 'react';\nimport dynamic from 'next/dynamic';\nimport { motion, AnimatePresence } from 'framer-motion';\nimport { Menu, PanelLeftClose, PanelLeft, Code, Play, Square, Loader2 } from 'lucide-react';\nimport { cn } from '@/lib/utils';\nimport { useQuery } from '@/lib/openclaw/hooks';\nimport { useUser } from '@clerk/nextjs';\n\n// Components\nimport { AgentSidebar } from '@/components/agent/AgentSidebar';\nimport { ContextBar, ContextEntity, ViewDimension } from '@/components/agent/ContextBar';\nimport { CodePanel, CodePanelTab, FileNode, TerminalOutput } from '@/components/agent/CodePanel';\nimport { AgentChat, ChatMessage, MentionSuggestion } from '@/components/agent/AgentChat';\nimport { GitHubAuthModal } from '@/components/auth/GitHubAuthModal';\nimport { AgentAccessRestricted } from '@/components/auth/AgentAccessRestricted';\n\n// Contexts & Providers\nimport { SandboxProvider } from '@/contexts/SandboxContext';\n\n// Theme support\nimport '@/lib/themes/themes.css';\n\n// Hooks\nimport { useChatThreads } from '@/hooks/useChatThreads';\nimport { useStreamingChat } from '@/hooks/useStreamingChat';\nimport { useAgentSandbox } from '@/hooks/useAgentSandbox';\nimport type { FileInfo } from '@/lib/sandbox';\n\n// Import Convex API (userManagement may not be configured in all deployments)\nimport { api } from '@/lib/convex-shim';\n\n// Type-safe check for userManagement API\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\nconst getManagedUserQuery = (api as any)?.userManagement?.getManagedUserByClerkId ?? null;\n\n// =============================================================================\n// Sample Data (will be replaced with real data from Convex)\n// =============================================================================\n\nconst SAMPLE_MEMORY_STATS = {\n  episodic: 42,\n  semantic: 18,\n  working: 3,\n};\n\nconst SAMPLE_MENTIONS: MentionSuggestion[] = [\n  { id: 'proj-1', type: 'project', name: 'OpenClaw-OS', description: 'Professional agentic operating system' },\n  { id: 'proj-2', type: 'project', name: '8gent', description: 'Next-gen agent platform' },\n  { id: 'prd-1', type: 'prd', name: 'infinity-agent', description: 'PRD for coding agent integration' },\n  { id: 'ticket-1', type: 'ticket', name: 'ARC-001', description: 'Implement context bar component' },\n  { id: 'ticket-2', type: 'ticket', name: 'ARC-002', description: 'Add code panel with monaco editor' },\n  { id: 'file-1', type: 'file', name: 'agent/page.tsx', description: 'Main agent page component' },\n];\n\n// =============================================================================\n// Convert FileInfo to FileNode for tree view\n// =============================================================================\n\nfunction convertFilesToTree(files: FileInfo[]): FileNode[] {\n  const root: FileNode[] = [];\n  const pathMap = new Map<string, FileNode>();\n\n  // Sort files so directories come first\n  const sorted = [...files].sort((a, b) => {\n    if (a.type === 'directory' && b.type === 'file') return -1;\n    if (a.type === 'file' && b.type === 'directory') return 1;\n    return a.path.localeCompare(b.path);\n  });\n\n  for (const file of sorted) {\n    const parts = file.path.split('/').filter(Boolean);\n    const name = parts[parts.length - 1];\n    const parentPath = '/' + parts.slice(0, -1).join('/');\n\n    const node: FileNode = {\n      name,\n      path: file.path,\n      type: file.type === 'directory' ? 'folder' : 'file',\n      children: file.type === 'directory' ? [] : undefined,\n      language: file.type === 'file' ? detectLanguage(name) : undefined,\n    };\n\n    pathMap.set(file.path, node);\n\n    if (parts.length === 1 || parentPath === '/home/user' || parentPath === '/home') {\n      root.push(node);\n    } else {\n      const parent = pathMap.get(parentPath);\n      if (parent && parent.children) {\n        parent.children.push(node);\n      } else {\n        root.push(node);\n      }\n    }\n  }\n\n  return root;\n}\n\nfunction detectLanguage(filename: string): string {\n  const ext = filename.split('.').pop()?.toLowerCase();\n  const langMap: Record<string, string> = {\n    ts: 'typescript',\n    tsx: 'typescript',\n    js: 'javascript',\n    jsx: 'javascript',\n    json: 'json',\n    md: 'markdown',\n    css: 'css',\n    html: 'html',\n    py: 'python',\n  };\n  return langMap[ext || ''] || 'plaintext';\n}\n\n// =============================================================================\n// Auth error detection helpers\n// =============================================================================\n\nconst AUTH_ERROR_PATTERNS = [\n  'Authentication required',\n  'authentication required',\n  'Unauthorized',\n  'unauthorized',\n  'GitHub OAuth',\n  'OAuth',\n  'oauth',\n  'token expired',\n  'Token expired',\n  'invalid token',\n  'Invalid token',\n  'access denied',\n  'Access denied',\n  'not authenticated',\n  'Not authenticated',\n  'Status code 400', // Sandbox API returns 400 when auth is missing\n  'Status code 401',\n  'Status code 403',\n];\n\nfunction isAuthError(error: string | null): boolean {\n  if (!error) return false;\n  return AUTH_ERROR_PATTERNS.some((pattern) => error.includes(pattern));\n}\n\n// =============================================================================\n// Main Page Content (with sandbox context)\n// =============================================================================\n\n// =============================================================================\n// Owner Check Wrapper - Separates auth logic from main content\n// =============================================================================\n\nfunction OwnerGate({ children }: { children: React.ReactNode }) {\n  const { user, isLoaded: isClerkLoaded } = useUser();\n  const clerkId = user?.id;\n\n  // IMPORTANT: Always call useQuery with the same query reference to maintain hook stability\n  // If getManagedUserQuery is null, we pass 'skip' to skip the query entirely\n  const managedUser = useQuery(\n    getManagedUserQuery!,\n    getManagedUserQuery && clerkId ? { clerkId } : 'skip'\n  );\n\n  // Determine loading and owner status\n  const isLoading = !isClerkLoaded || (getManagedUserQuery && clerkId && managedUser === undefined);\n\n  // If no user management API configured, allow access (backwards compat)\n  // Otherwise, check if user is owner/admin\n  const isOwner = !getManagedUserQuery || managedUser?.role === 'owner' || managedUser?.role === 'admin';\n\n  // Check if user is signed in but not in the database\n  const isSignedInButNotInDb = isClerkLoaded && user && getManagedUserQuery && managedUser === null;\n\n  if (isLoading) {\n    return <AgentAccessRestricted isLoading />;\n  }\n\n  if (!isOwner) {\n    // Pass user info for the \"signed in but not owner\" case\n    return (\n      <AgentAccessRestricted\n        isSignedIn={!!user}\n        clerkId={clerkId}\n        userEmail={user?.primaryEmailAddress?.emailAddress}\n      />\n    );\n  }\n\n  return <>{children}</>;\n}\n\n// =============================================================================\n// Main Page Content (with sandbox context)\n// =============================================================================\n\nfunction AgentPageContent() {\n  // Auth modal state\n  const [isAuthModalOpen, setIsAuthModalOpen] = useState(false);\n  const [authErrorMessage, setAuthErrorMessage] = useState<string | undefined>();\n  const previousErrorRef = useRef<string | null>(null);\n\n  // Sidebar state\n  const [isSidebarOpen, setIsSidebarOpen] = useState(true);\n  const [isSidebarCollapsed, setIsSidebarCollapsed] = useState(false);\n\n  // Context state\n  const [contextChain, setContextChain] = useState<ContextEntity[]>([]);\n  const [currentView, setCurrentView] = useState<ViewDimension>('chat');\n\n  // Code panel state\n  const [isCodePanelVisible, setIsCodePanelVisible] = useState(false);\n  const [isCodePanelExpanded, setIsCodePanelExpanded] = useState(false);\n  const [activeCodeTab, setActiveCodeTab] = useState<CodePanelTab>('code');\n\n  // Chat state\n  const [mentionSuggestions, setMentionSuggestions] = useState<MentionSuggestion[]>([]);\n\n  // Sandbox hook\n  const sandbox = useAgentSandbox();\n\n  // Detect auth errors from sandbox and show modal\n  useEffect(() => {\n    const currentError = sandbox.error;\n\n    // Only trigger modal if error changed and is an auth error\n    if (currentError !== previousErrorRef.current && isAuthError(currentError)) {\n      setAuthErrorMessage(currentError || 'Authentication required');\n      setIsAuthModalOpen(true);\n    }\n\n    previousErrorRef.current = currentError;\n  }, [sandbox.error]);\n\n  // Also detect auth errors from terminal output\n  useEffect(() => {\n    const lastTerminalLine = sandbox.terminalOutput[sandbox.terminalOutput.length - 1];\n    if (lastTerminalLine?.type === 'error' && isAuthError(lastTerminalLine.content)) {\n      setAuthErrorMessage(lastTerminalLine.content);\n      setIsAuthModalOpen(true);\n    }\n  }, [sandbox.terminalOutput]);\n\n  // Convert sandbox files to tree structure (must be before early returns - hooks rule)\n  const fileTree = useMemo(() => convertFilesToTree(sandbox.files), [sandbox.files]);\n\n  // Convert terminal output to CodePanel format\n  const terminalOutput: TerminalOutput[] = useMemo(\n    () =>\n      sandbox.terminalOutput.map((line) => ({\n        id: line.id,\n        type: line.type === 'command' ? 'command' : line.type === 'error' ? 'error' : 'output',\n        content: line.content,\n        timestamp: line.timestamp,\n      })),\n    [sandbox.terminalOutput]\n  );\n\n  // Chat hooks (must be before early returns - hooks rule)\n  const {\n    threads,\n    activeThreadId,\n    createThread,\n    switchThread,\n    deleteThread,\n    ensureThread,\n  } = useChatThreads();\n\n  const {\n    messages: streamingMessages,\n    isStreaming,\n    sendMessage: sendStreamingMessage,\n    abortStream,\n  } = useStreamingChat({\n    onStreamStart: () => console.log('Stream started'),\n    onStreamEnd: () => console.log('Stream ended'),\n  });\n\n  // Convert streaming messages to ChatMessage format\n  const chatMessages: ChatMessage[] = useMemo(() => streamingMessages.map((m) => ({\n    id: m.id,\n    role: m.role,\n    content: m.content,\n    timestamp: m.timestamp,\n    isStreaming: m.isStreaming,\n  })), [streamingMessages]);\n\n  // Handle successful authentication\n  const handleAuthenticated = useCallback(() => {\n    setIsAuthModalOpen(false);\n    setAuthErrorMessage(undefined);\n    // Retry starting sandbox after auth\n    sandbox.startSandbox();\n  }, [sandbox]);\n\n  // Handle sending message\n  const handleSendMessage = useCallback(\n    (content: string, mentions?: ContextEntity[]) => {\n      // Ensure we have a thread\n      ensureThread();\n\n      // Add mentions to context chain if any\n      if (mentions && mentions.length > 0) {\n        setContextChain((prev) => {\n          const newChain = [...prev];\n          mentions.forEach((m) => {\n            if (!newChain.find((e) => e.id === m.id)) {\n              newChain.push(m);\n            }\n          });\n          return newChain;\n        });\n      }\n\n      // Build context info\n      let contextInfo = '';\n\n      // Add sandbox capabilities when connected\n      if (sandbox.isConnected) {\n        contextInfo += '\\n\\n[SANDBOX CONNECTED - You have full coding capabilities: clone repos with git, run terminal commands, create/edit files, install packages, run dev servers. Use the terminal below to execute commands.]';\n      }\n\n      // Add active context chain\n      if (contextChain.length > 0) {\n        contextInfo += `\\n\\n[Active Context: ${contextChain.map(c => `@${c.type}:${c.name}`).join(', ')}]`;\n      }\n\n      sendStreamingMessage(content + contextInfo);\n\n      // If the message contains code-related keywords, show code panel\n      const codeKeywords = ['code', 'implement', 'create', 'build', 'fix', 'debug', 'file', 'component', 'clone', 'repo', 'git'];\n      if (codeKeywords.some((kw) => content.toLowerCase().includes(kw))) {\n        setIsCodePanelVisible(true);\n      }\n    },\n    [ensureThread, sendStreamingMessage, contextChain, sandbox.isConnected]\n  );\n\n  // Handle mention search\n  const handleMentionSearch = useCallback((query: string) => {\n    const filtered = SAMPLE_MENTIONS.filter(\n      (m) =>\n        m.name.toLowerCase().includes(query.toLowerCase()) ||\n        m.description?.toLowerCase().includes(query.toLowerCase())\n    );\n    setMentionSuggestions(filtered);\n  }, []);\n\n  // Handle mention select\n  const handleMentionSelect = useCallback((mention: MentionSuggestion) => {\n    const entity: ContextEntity = {\n      id: mention.id,\n      type: mention.type,\n      name: mention.name,\n      description: mention.description,\n    };\n    setContextChain((prev) => {\n      if (prev.find((e) => e.id === entity.id)) return prev;\n      return [...prev, entity];\n    });\n  }, []);\n\n  // Handle context chain changes\n  const handleRemoveEntity = useCallback((entityId: string) => {\n    setContextChain((prev) => prev.filter((e) => e.id !== entityId));\n  }, []);\n\n  const handleClearContext = useCallback(() => {\n    setContextChain([]);\n  }, []);\n\n  // Handle file selection\n  const handleFileSelect = useCallback(\n    async (path: string) => {\n      if (sandbox.isConnected) {\n        try {\n          await sandbox.readFile(path);\n          setActiveCodeTab('code');\n        } catch (error) {\n          console.error('Failed to read file:', error);\n        }\n      }\n    },\n    [sandbox]\n  );\n\n  // Handle terminal command\n  const handleRunCommand = useCallback(\n    async (command: string) => {\n      if (sandbox.isConnected) {\n        await sandbox.runCommand(command);\n      }\n    },\n    [sandbox]\n  );\n\n  // Handle mobile sidebar toggle\n  const handleMobileSidebarToggle = useCallback(() => {\n    setIsSidebarOpen((prev) => !prev);\n  }, []);\n\n  // Handle desktop sidebar collapse\n  const handleDesktopSidebarToggle = useCallback(() => {\n    setIsSidebarCollapsed((prev) => !prev);\n  }, []);\n\n  // Close sidebar on mobile when clicking outside\n  useEffect(() => {\n    const handleResize = () => {\n      if (window.innerWidth >= 1024) {\n        setIsSidebarOpen(true);\n      }\n    };\n\n    window.addEventListener('resize', handleResize);\n    return () => window.removeEventListener('resize', handleResize);\n  }, []);\n\n  return (\n    <>\n      {/* GitHub Auth Modal - shown on auth errors for owner */}\n      <GitHubAuthModal\n        isOpen={isAuthModalOpen}\n        onClose={() => setIsAuthModalOpen(false)}\n        onAuthenticated={handleAuthenticated}\n        errorMessage={authErrorMessage}\n      />\n\n      <div\n        className=\"h-screen flex flex-col overflow-hidden\"\n        style={{\n          background: 'hsl(var(--theme-background))',\n          color: 'hsl(var(--theme-foreground))',\n          fontFamily: 'var(--theme-font)',\n        }}\n      >\n        {/* Main Layout */}\n        <div className=\"flex-1 flex overflow-hidden\">\n          {/* Sidebar */}\n          <AnimatePresence>\n            {(isSidebarOpen || (typeof window !== 'undefined' && window.innerWidth >= 1024)) &&\n              !isSidebarCollapsed && (\n                <AgentSidebar\n                  isOpen={isSidebarOpen}\n                  onClose={() => setIsSidebarOpen(false)}\n                  threads={threads}\n                  activeThreadId={activeThreadId}\n                  onNewThread={createThread}\n                  onSelectThread={switchThread}\n                  onDeleteThread={deleteThread}\n                  memoryStats={SAMPLE_MEMORY_STATS}\n                  recentMentions={contextChain.slice(-5).map((c) => ({\n                    id: c.id,\n                    type: c.type as 'project' | 'prd' | 'ticket' | 'file',\n                    name: c.name,\n                    timestamp: Date.now(),\n                  }))}\n                  onMentionClick={(mention) => {\n                    const entity = contextChain.find((e) => e.id === mention.id);\n                    if (entity) {\n                      console.log('Clicked mention:', entity);\n                    }\n                  }}\n                />\n              )}\n          </AnimatePresence>\n\n          {/* Main Content */}\n          <div className=\"flex-1 flex flex-col min-w-0\">\n            {/* Top Bar */}\n            <div\n              className=\"flex items-center gap-2 px-4 py-2\"\n              style={{\n                background: 'hsl(var(--theme-card))',\n                borderBottom: '1px solid hsl(var(--theme-border))',\n              }}\n            >\n              {/* Mobile menu button */}\n              <button\n                onClick={handleMobileSidebarToggle}\n                className=\"p-2 rounded-lg transition-colors lg:hidden\"\n                style={{ color: 'hsl(var(--theme-foreground))' }}\n                onMouseEnter={(e) => e.currentTarget.style.background = 'hsl(var(--theme-muted))'}\n                onMouseLeave={(e) => e.currentTarget.style.background = 'transparent'}\n              >\n                <Menu className=\"w-5 h-5\" />\n              </button>\n\n              {/* Desktop sidebar toggle */}\n              <button\n                onClick={handleDesktopSidebarToggle}\n                className=\"p-2 rounded-lg transition-colors hidden lg:flex\"\n                title={isSidebarCollapsed ? 'Show sidebar' : 'Hide sidebar'}\n                style={{ color: 'hsl(var(--theme-foreground))' }}\n                onMouseEnter={(e) => e.currentTarget.style.background = 'hsl(var(--theme-muted))'}\n                onMouseLeave={(e) => e.currentTarget.style.background = 'transparent'}\n              >\n                {isSidebarCollapsed ? (\n                  <PanelLeft className=\"w-5 h-5\" />\n                ) : (\n                  <PanelLeftClose className=\"w-5 h-5\" />\n                )}\n              </button>\n\n              {/* Title */}\n              <h1\n                className=\"text-lg font-semibold\"\n                style={{ color: 'hsl(var(--theme-foreground))' }}\n              >\n                ∞gent\n              </h1>\n\n              {/* Spacer */}\n              <div className=\"flex-1\" />\n\n              {/* Sandbox controls */}\n              <div className=\"flex items-center gap-2\">\n                {!sandbox.isConnected ? (\n                  <button\n                    onClick={sandbox.startSandbox}\n                    disabled={sandbox.isCreating}\n                    className={cn(\n                      'flex items-center gap-1.5 px-3 py-1.5 rounded-lg text-sm transition-colors',\n                      'disabled:opacity-50 disabled:cursor-not-allowed'\n                    )}\n                    style={{\n                      background: 'hsl(var(--theme-primary) / 0.2)',\n                      color: 'hsl(var(--theme-primary))',\n                    }}\n                    onMouseEnter={(e) => e.currentTarget.style.background = 'hsl(var(--theme-primary) / 0.3)'}\n                    onMouseLeave={(e) => e.currentTarget.style.background = 'hsl(var(--theme-primary) / 0.2)'}\n                  >\n                    {sandbox.isCreating ? (\n                      <>\n                        <Loader2 className=\"w-4 h-4 animate-spin\" />\n                        Starting...\n                      </>\n                    ) : (\n                      <>\n                        <Play className=\"w-4 h-4\" />\n                        Start Sandbox\n                      </>\n                    )}\n                  </button>\n                ) : (\n                  <button\n                    onClick={sandbox.stopSandbox}\n                    className=\"flex items-center gap-1.5 px-3 py-1.5 rounded-lg text-sm transition-colors\"\n                    style={{\n                      background: 'hsl(0 84% 60% / 0.2)',\n                      color: 'hsl(0 84% 60%)',\n                    }}\n                    onMouseEnter={(e) => e.currentTarget.style.background = 'hsl(0 84% 60% / 0.3)'}\n                    onMouseLeave={(e) => e.currentTarget.style.background = 'hsl(0 84% 60% / 0.2)'}\n                  >\n                    <Square className=\"w-4 h-4\" />\n                    Stop\n                  </button>\n                )}\n\n                {sandbox.isConnected && (\n                  <span className=\"text-xs font-medium\" style={{ color: 'hsl(142 70% 45%)' }}>● Connected</span>\n                )}\n              </div>\n\n              {/* Code panel toggle */}\n              <button\n                onClick={() => setIsCodePanelVisible((prev) => !prev)}\n                className=\"p-2 rounded-lg transition-colors\"\n                title={isCodePanelVisible ? 'Hide code panel' : 'Show code panel'}\n                style={{\n                  background: isCodePanelVisible ? 'hsl(var(--theme-primary) / 0.2)' : 'transparent',\n                  color: isCodePanelVisible ? 'hsl(var(--theme-primary))' : 'hsl(var(--theme-muted-foreground))',\n                }}\n                onMouseEnter={(e) => {\n                  if (!isCodePanelVisible) e.currentTarget.style.background = 'hsl(var(--theme-muted))';\n                }}\n                onMouseLeave={(e) => {\n                  if (!isCodePanelVisible) e.currentTarget.style.background = 'transparent';\n                }}\n              >\n                <Code className=\"w-5 h-5\" />\n              </button>\n            </div>\n\n            {/* Context Bar */}\n            <ContextBar\n              contextChain={contextChain}\n              currentView={currentView}\n              onViewChange={setCurrentView}\n              onEntityClick={(entity) => console.log('Entity clicked:', entity)}\n              onRemoveEntity={handleRemoveEntity}\n              onClearContext={handleClearContext}\n            />\n\n            {/* Chat Area */}\n            <div className=\"flex-1 min-h-0\">\n              <AgentChat\n                messages={chatMessages}\n                isStreaming={isStreaming}\n                onSendMessage={handleSendMessage}\n                onAbort={abortStream}\n                mentionSuggestions={mentionSuggestions}\n                onMentionSearch={handleMentionSearch}\n                onMentionSelect={handleMentionSelect}\n                isVoiceEnabled={true}\n              />\n            </div>\n\n            {/* Code Panel */}\n            <AnimatePresence>\n              {isCodePanelVisible && (\n                <CodePanel\n                  isVisible={isCodePanelVisible}\n                  isExpanded={isCodePanelExpanded}\n                  activeTab={activeCodeTab}\n                  onTabChange={setActiveCodeTab}\n                  onToggleExpanded={() => setIsCodePanelExpanded((prev) => !prev)}\n                  onClose={() => setIsCodePanelVisible(false)}\n                  code={sandbox.currentFile?.content || '// Select a file or start coding...'}\n                  language={sandbox.currentFile?.language || 'typescript'}\n                  currentFile={sandbox.currentFile?.path}\n                  onCodeChange={(code) => {\n                    if (sandbox.currentFile?.path) {\n                      sandbox.writeFile(sandbox.currentFile.path, code);\n                    }\n                  }}\n                  files={fileTree}\n                  onFileSelect={handleFileSelect}\n                  terminalOutput={terminalOutput}\n                  onRunCommand={handleRunCommand}\n                  isRunning={sandbox.isRunning}\n                  previewUrl={sandbox.previewUrl || undefined}\n                  onRefreshPreview={() => {\n                    if (sandbox.isConnected) {\n                      sandbox.startDevServer();\n                    }\n                  }}\n                />\n              )}\n            </AnimatePresence>\n          </div>\n        </div>\n      </div>\n    </>\n  );\n}\n\n// =============================================================================\n// Main Page Component with Provider\n// =============================================================================\n\nfunction AgentPage() {\n  return (\n    <OwnerGate>\n      <SandboxProvider>\n        <AgentPageContent />\n      </SandboxProvider>\n    </OwnerGate>\n  );\n}\n\n// Use dynamic import with SSR disabled to prevent pre-render errors\n// This is required because useUser needs ClerkProvider which is only available client-side\nexport default dynamic(() => Promise.resolve(AgentPage), {\n  ssr: false,\n  loading: () => <AgentAccessRestricted isLoading />,\n});\n","'use client';\n\nimport { motion, AnimatePresence } from 'framer-motion';\nimport {\n  Plus,\n  MessageSquare,\n  Trash2,\n  X,\n  Brain,\n  Database,\n  Clock,\n  ChevronRight,\n  Zap,\n  AtSign,\n  FileCode,\n  Folder,\n  FileText,\n} from 'lucide-react';\nimport { ChatThread } from '@/hooks/useChatThreads';\nimport { cn } from '@/lib/utils';\n\n// Import theme styles\nimport '@/lib/themes/themes.css';\n\n// =============================================================================\n// Types\n// =============================================================================\n\ninterface MemoryStats {\n  episodic: number;\n  semantic: number;\n  working: number;\n}\n\ninterface RecentMention {\n  id: string;\n  type: 'project' | 'prd' | 'ticket' | 'file';\n  name: string;\n  timestamp: number;\n}\n\ninterface ActiveTask {\n  id: string;\n  title: string;\n  status: 'pending' | 'running' | 'paused' | 'completed' | 'failed';\n  progress?: number;\n}\n\ninterface AgentSidebarProps {\n  isOpen: boolean;\n  onClose: () => void;\n  threads: ChatThread[];\n  activeThreadId: string | null;\n  onNewThread: () => void;\n  onSelectThread: (threadId: string) => void;\n  onDeleteThread: (threadId: string) => void;\n  memoryStats?: MemoryStats;\n  recentMentions?: RecentMention[];\n  activeTask?: ActiveTask | null;\n  onMentionClick?: (mention: RecentMention) => void;\n}\n\n// =============================================================================\n// Utility Functions\n// =============================================================================\n\nfunction formatTimeAgo(timestamp: number): string {\n  const now = Date.now();\n  const diff = now - timestamp;\n\n  const minutes = Math.floor(diff / 60000);\n  const hours = Math.floor(diff / 3600000);\n  const days = Math.floor(diff / 86400000);\n\n  if (minutes < 1) return 'Just now';\n  if (minutes < 60) return `${minutes}m ago`;\n  if (hours < 24) return `${hours}h ago`;\n  if (days < 7) return `${days}d ago`;\n\n  return new Date(timestamp).toLocaleDateString();\n}\n\nfunction getMentionIcon(type: RecentMention['type']) {\n  switch (type) {\n    case 'project':\n      return Folder;\n    case 'prd':\n      return FileText;\n    case 'ticket':\n      return FileCode;\n    case 'file':\n      return FileCode;\n    default:\n      return AtSign;\n  }\n}\n\nfunction getStatusColor(status: ActiveTask['status']) {\n  switch (status) {\n    case 'running':\n      return 'text-green-400';\n    case 'paused':\n      return 'text-yellow-400';\n    case 'failed':\n      return 'text-red-400';\n    case 'completed':\n      return 'text-blue-400';\n    default:\n      return 'text-muted-foreground';\n  }\n}\n\n// =============================================================================\n// Component\n// =============================================================================\n\nexport function AgentSidebar({\n  isOpen,\n  onClose,\n  threads,\n  activeThreadId,\n  onNewThread,\n  onSelectThread,\n  onDeleteThread,\n  memoryStats = { episodic: 0, semantic: 0, working: 0 },\n  recentMentions = [],\n  activeTask = null,\n  onMentionClick,\n}: AgentSidebarProps) {\n  return (\n    <AnimatePresence>\n      {isOpen && (\n        <>\n          {/* Backdrop - mobile only */}\n          <motion.div\n            initial={{ opacity: 0 }}\n            animate={{ opacity: 1 }}\n            exit={{ opacity: 0 }}\n            transition={{ duration: 0.2 }}\n            onClick={onClose}\n            className=\"fixed inset-0 bg-black/40 backdrop-blur-sm z-40 lg:hidden\"\n          />\n\n          {/* Sidebar */}\n          <motion.aside\n            initial={{ x: '-100%', opacity: 0 }}\n            animate={{ x: 0, opacity: 1 }}\n            exit={{ x: '-100%', opacity: 0 }}\n            transition={{ type: 'spring', damping: 30, stiffness: 300 }}\n            className={cn(\n              'fixed lg:relative inset-y-0 left-0 z-50 lg:z-auto',\n              'w-80 max-w-[85vw] lg:w-72 xl:w-80',\n              'flex flex-col',\n              'touch-none lg:touch-auto'\n            )}\n            style={{\n              paddingTop: 'env(safe-area-inset-top, 0px)',\n              paddingBottom: 'env(safe-area-inset-bottom, 0px)',\n              background: 'hsl(var(--theme-chat-sidebar-bg, var(--theme-card)))',\n              borderRight: '1px solid hsl(var(--theme-chat-sidebar-border, var(--theme-border)))',\n              fontFamily: 'var(--theme-font)',\n            }}\n          >\n            {/* Header */}\n            <div\n              className=\"flex items-center justify-between px-4 py-4\"\n              style={{ borderBottom: '1px solid hsl(var(--theme-border))' }}\n            >\n              <div className=\"flex items-center gap-2\">\n                <div\n                  className=\"w-8 h-8 rounded-lg flex items-center justify-center\"\n                  style={{ background: 'hsl(var(--theme-primary) / 0.2)' }}\n                >\n                  <Zap className=\"w-4 h-4\" style={{ color: 'hsl(var(--theme-primary))' }} />\n                </div>\n                <h2 className=\"text-lg font-semibold\" style={{ color: 'hsl(var(--theme-foreground))' }}>\n                  Agent\n                </h2>\n              </div>\n              <button\n                onClick={onClose}\n                className=\"p-2 rounded-full transition-colors lg:hidden\"\n                style={{ color: 'hsl(var(--theme-muted-foreground))' }}\n                onMouseEnter={(e) => e.currentTarget.style.background = 'hsl(var(--theme-muted))'}\n                onMouseLeave={(e) => e.currentTarget.style.background = 'transparent'}\n              >\n                <X className=\"w-5 h-5\" />\n              </button>\n            </div>\n\n            {/* New Chat Button */}\n            <div className=\"px-3 py-3\">\n              <button\n                onClick={() => {\n                  onNewThread();\n                  onClose();\n                }}\n                className=\"w-full flex items-center gap-3 px-4 py-3 rounded-xl transition-all\"\n                style={{\n                  background: 'hsl(var(--theme-primary))',\n                  color: 'hsl(var(--theme-primary-foreground))',\n                }}\n                onMouseEnter={(e) => e.currentTarget.style.opacity = '0.9'}\n                onMouseLeave={(e) => e.currentTarget.style.opacity = '1'}\n              >\n                <Plus className=\"w-5 h-5\" />\n                <span className=\"font-medium\">New session</span>\n              </button>\n            </div>\n\n            {/* Active Task (if any) */}\n            {activeTask && (\n              <div className=\"px-3 pb-2\">\n                <div className=\"px-3 py-2.5 rounded-lg bg-muted/50 border border-border\">\n                  <div className=\"flex items-center gap-2 mb-1\">\n                    <div className={cn('w-2 h-2 rounded-full',\n                      activeTask.status === 'running' && 'bg-green-400 animate-pulse',\n                      activeTask.status === 'paused' && 'bg-yellow-400',\n                      activeTask.status === 'completed' && 'bg-blue-400',\n                      activeTask.status === 'failed' && 'bg-red-400',\n                      activeTask.status === 'pending' && 'bg-muted-foreground'\n                    )} />\n                    <span className={cn('text-xs font-medium uppercase', getStatusColor(activeTask.status))}>\n                      {activeTask.status}\n                    </span>\n                  </div>\n                  <p className=\"text-sm text-foreground truncate\">{activeTask.title}</p>\n                  {activeTask.progress !== undefined && (\n                    <div className=\"mt-2 h-1 rounded-full bg-muted overflow-hidden\">\n                      <motion.div\n                        className=\"h-full bg-primary\"\n                        initial={{ width: 0 }}\n                        animate={{ width: `${activeTask.progress}%` }}\n                        transition={{ duration: 0.3 }}\n                      />\n                    </div>\n                  )}\n                </div>\n              </div>\n            )}\n\n            {/* Memory Indicator */}\n            <div className=\"px-3 pb-2\">\n              <div\n                className=\"px-3 py-2 rounded-lg\"\n                style={{ background: 'hsl(var(--theme-muted) / 0.3)' }}\n              >\n                <div className=\"flex items-center gap-2 mb-2\">\n                  <Brain className=\"w-4 h-4\" style={{ color: 'hsl(var(--theme-muted-foreground))' }} />\n                  <span\n                    className=\"text-xs font-medium uppercase tracking-wide\"\n                    style={{ color: 'hsl(var(--theme-muted-foreground))' }}\n                  >\n                    Memory\n                  </span>\n                </div>\n                <div className=\"grid grid-cols-3 gap-2\">\n                  <div className=\"text-center\">\n                    <div className=\"text-lg font-semibold\" style={{ color: 'hsl(var(--theme-foreground))' }}>{memoryStats.episodic}</div>\n                    <div className=\"text-[10px]\" style={{ color: 'hsl(var(--theme-muted-foreground))' }}>Episodic</div>\n                  </div>\n                  <div className=\"text-center\">\n                    <div className=\"text-lg font-semibold\" style={{ color: 'hsl(var(--theme-foreground))' }}>{memoryStats.semantic}</div>\n                    <div className=\"text-[10px]\" style={{ color: 'hsl(var(--theme-muted-foreground))' }}>Semantic</div>\n                  </div>\n                  <div className=\"text-center\">\n                    <div className=\"text-lg font-semibold\" style={{ color: 'hsl(var(--theme-foreground))' }}>{memoryStats.working}</div>\n                    <div className=\"text-[10px]\" style={{ color: 'hsl(var(--theme-muted-foreground))' }}>Working</div>\n                  </div>\n                </div>\n              </div>\n            </div>\n\n            {/* Recent @ Mentions */}\n            {recentMentions.length > 0 && (\n              <div className=\"px-3 pb-2\">\n                <div className=\"px-1 mb-2\">\n                  <span\n                    className=\"text-xs font-medium uppercase tracking-wide flex items-center gap-1.5\"\n                    style={{ color: 'hsl(var(--theme-muted-foreground))' }}\n                  >\n                    <AtSign className=\"w-3 h-3\" />\n                    Recent Mentions\n                  </span>\n                </div>\n                <div className=\"space-y-1\">\n                  {recentMentions.slice(0, 5).map((mention) => {\n                    const Icon = getMentionIcon(mention.type);\n                    return (\n                      <button\n                        key={mention.id}\n                        onClick={() => onMentionClick?.(mention)}\n                        className=\"w-full flex items-center gap-2 px-2 py-1.5 rounded-md transition-colors text-left\"\n                        onMouseEnter={(e) => e.currentTarget.style.background = 'hsl(var(--theme-muted))'}\n                        onMouseLeave={(e) => e.currentTarget.style.background = 'transparent'}\n                      >\n                        <Icon className=\"w-3.5 h-3.5 flex-shrink-0\" style={{ color: 'hsl(var(--theme-muted-foreground))' }} />\n                        <span className=\"text-sm truncate flex-1\" style={{ color: 'hsl(var(--theme-foreground))' }}>\n                          @{mention.name}\n                        </span>\n                        <ChevronRight className=\"w-3 h-3\" style={{ color: 'hsl(var(--theme-muted-foreground) / 0.5)' }} />\n                      </button>\n                    );\n                  })}\n                </div>\n              </div>\n            )}\n\n            {/* Thread List */}\n            <div className=\"flex-1 overflow-y-auto px-3 pb-3\">\n              <div className=\"px-1 mb-2\">\n                <span\n                  className=\"text-xs font-medium uppercase tracking-wide flex items-center gap-1.5\"\n                  style={{ color: 'hsl(var(--theme-muted-foreground))' }}\n                >\n                  <MessageSquare className=\"w-3 h-3\" />\n                  Sessions\n                </span>\n              </div>\n\n              {threads.length === 0 ? (\n                <div className=\"text-center py-8 px-4\">\n                  <MessageSquare className=\"w-12 h-12 mx-auto mb-3\" style={{ color: 'hsl(var(--theme-muted-foreground) / 0.3)' }} />\n                  <p className=\"text-sm\" style={{ color: 'hsl(var(--theme-muted-foreground))' }}>No sessions yet</p>\n                  <p className=\"text-xs mt-1\" style={{ color: 'hsl(var(--theme-muted-foreground) / 0.7)' }}>\n                    Start a new session to begin\n                  </p>\n                </div>\n              ) : (\n                <div className=\"space-y-1\">\n                  {threads.map((thread) => (\n                    <motion.div\n                      key={thread.id}\n                      layout\n                      initial={{ opacity: 0, y: 10 }}\n                      animate={{ opacity: 1, y: 0 }}\n                      className=\"group relative\"\n                    >\n                      <button\n                        onClick={() => {\n                          onSelectThread(thread.id);\n                          // Only close on mobile\n                          if (window.innerWidth < 1024) {\n                            onClose();\n                          }\n                        }}\n                        className=\"w-full text-left px-3 py-2.5 rounded-lg transition-all\"\n                        style={{\n                          background: thread.id === activeThreadId ? 'hsl(var(--theme-primary) / 0.1)' : 'transparent',\n                          borderLeft: thread.id === activeThreadId\n                            ? '2px solid hsl(var(--theme-chat-sidebar-active, var(--theme-primary)))'\n                            : '2px solid transparent',\n                        }}\n                        onMouseEnter={(e) => {\n                          if (thread.id !== activeThreadId) e.currentTarget.style.background = 'hsl(var(--theme-chat-sidebar-hover, var(--theme-muted)))';\n                        }}\n                        onMouseLeave={(e) => {\n                          if (thread.id !== activeThreadId) e.currentTarget.style.background = 'transparent';\n                        }}\n                      >\n                        <div className=\"flex items-start gap-2.5\">\n                          <MessageSquare\n                            className=\"w-4 h-4 mt-0.5 flex-shrink-0\"\n                            style={{\n                              color: thread.id === activeThreadId\n                                ? 'hsl(var(--theme-primary))'\n                                : 'hsl(var(--theme-muted-foreground))',\n                            }}\n                          />\n                          <div className=\"flex-1 min-w-0\">\n                            <p\n                              className=\"text-sm font-medium truncate\"\n                              style={{\n                                color: thread.id === activeThreadId\n                                  ? 'hsl(var(--theme-foreground))'\n                                  : 'hsl(var(--theme-muted-foreground))',\n                              }}\n                            >\n                              {thread.title}\n                            </p>\n                            <div className=\"flex items-center gap-2 mt-0.5\">\n                              <span className=\"text-[10px]\" style={{ color: 'hsl(var(--theme-muted-foreground) / 0.7)' }}>\n                                {thread.messages.length} msg{thread.messages.length !== 1 ? 's' : ''}\n                              </span>\n                              <span className=\"text-[10px]\" style={{ color: 'hsl(var(--theme-muted-foreground) / 0.5)' }}>·</span>\n                              <span className=\"text-[10px]\" style={{ color: 'hsl(var(--theme-muted-foreground) / 0.7)' }}>\n                                {formatTimeAgo(thread.lastModified)}\n                              </span>\n                            </div>\n                          </div>\n                        </div>\n                      </button>\n\n                      {/* Delete button (on hover) */}\n                      <button\n                        onClick={(e) => {\n                          e.stopPropagation();\n                          onDeleteThread(thread.id);\n                        }}\n                        className=\"absolute right-2 top-1/2 -translate-y-1/2 p-1.5 rounded-md opacity-0 group-hover:opacity-100 focus:opacity-100 transition-opacity\"\n                        aria-label=\"Delete session\"\n                        style={{ background: 'hsl(var(--theme-muted))' }}\n                        onMouseEnter={(e) => e.currentTarget.style.background = 'hsl(0 84% 60% / 0.2)'}\n                        onMouseLeave={(e) => e.currentTarget.style.background = 'hsl(var(--theme-muted))'}\n                      >\n                        <Trash2 className=\"w-3.5 h-3.5\" style={{ color: 'hsl(var(--theme-muted-foreground))' }} />\n                      </button>\n                    </motion.div>\n                  ))}\n                </div>\n              )}\n            </div>\n\n            {/* Footer */}\n            <div\n              className=\"px-4 py-3\"\n              style={{ borderTop: '1px solid hsl(var(--theme-border))' }}\n            >\n              <div className=\"flex items-center justify-between text-xs\" style={{ color: 'hsl(var(--theme-muted-foreground))' }}>\n                <span>{threads.length} session{threads.length !== 1 ? 's' : ''}</span>\n                <div className=\"flex items-center gap-1.5\">\n                  <Database className=\"w-3 h-3\" />\n                  <span>Convex</span>\n                </div>\n              </div>\n            </div>\n          </motion.aside>\n        </>\n      )}\n    </AnimatePresence>\n  );\n}\n\nexport default AgentSidebar;\n","'use client';\n\nimport { useState, useRef, useEffect } from 'react';\nimport { motion, AnimatePresence } from 'framer-motion';\nimport {\n  ChevronRight,\n  ChevronDown,\n  Folder,\n  FileText,\n  FileCode,\n  Ticket,\n  X,\n  Layers,\n  Eye,\n  Code,\n  Kanban,\n  BookOpen,\n} from 'lucide-react';\nimport { cn } from '@/lib/utils';\n\n// =============================================================================\n// Types\n// =============================================================================\n\nexport type ContextEntityType = 'project' | 'prd' | 'epic' | 'ticket' | 'file';\nexport type ViewDimension = 'chat' | 'code' | 'kanban' | 'docs';\n\nexport interface ContextEntity {\n  id: string;\n  type: ContextEntityType;\n  name: string;\n  description?: string;\n  status?: string;\n  metadata?: Record<string, unknown>;\n}\n\ninterface ContextBarProps {\n  contextChain: ContextEntity[];\n  currentView: ViewDimension;\n  onViewChange: (view: ViewDimension) => void;\n  onEntityClick: (entity: ContextEntity) => void;\n  onRemoveEntity: (entityId: string) => void;\n  onClearContext: () => void;\n  className?: string;\n}\n\n// =============================================================================\n// Config\n// =============================================================================\n\nconst ENTITY_CONFIG: Record<ContextEntityType, { icon: typeof Folder; color: string; label: string }> = {\n  project: { icon: Folder, color: 'text-blue-400', label: 'Project' },\n  prd: { icon: FileText, color: 'text-purple-400', label: 'PRD' },\n  epic: { icon: Layers, color: 'text-amber-400', label: 'Epic' },\n  ticket: { icon: Ticket, color: 'text-green-400', label: 'Ticket' },\n  file: { icon: FileCode, color: 'text-orange-400', label: 'File' },\n};\n\nconst VIEW_CONFIG: Record<ViewDimension, { icon: typeof Eye; label: string }> = {\n  chat: { icon: Eye, label: 'Chat' },\n  code: { icon: Code, label: 'Code' },\n  kanban: { icon: Kanban, label: 'Kanban' },\n  docs: { icon: BookOpen, label: 'Docs' },\n};\n\n// =============================================================================\n// Entity Chip Component\n// =============================================================================\n\ninterface EntityChipProps {\n  entity: ContextEntity;\n  isLast: boolean;\n  onClick: () => void;\n  onRemove: () => void;\n}\n\nfunction EntityChip({ entity, isLast, onClick, onRemove }: EntityChipProps) {\n  const [isExpanded, setIsExpanded] = useState(false);\n  const config = ENTITY_CONFIG[entity.type];\n  const Icon = config.icon;\n\n  return (\n    <div className=\"flex items-center\">\n      <motion.div\n        layout\n        className={cn(\n          'relative group flex items-center gap-1.5 px-2 py-1 rounded-md',\n          'transition-colors cursor-pointer',\n          isExpanded ? 'bg-muted' : 'hover:bg-muted/50'\n        )}\n        onClick={onClick}\n      >\n        <Icon className={cn('w-3.5 h-3.5', config.color)} />\n        <span className=\"text-sm text-foreground font-medium\">\n          @{entity.name}\n        </span>\n\n        {/* Status badge if present */}\n        {entity.status && (\n          <span className=\"text-[10px] px-1.5 py-0.5 rounded bg-muted text-muted-foreground uppercase\">\n            {entity.status}\n          </span>\n        )}\n\n        {/* Remove button on hover */}\n        <button\n          onClick={(e) => {\n            e.stopPropagation();\n            onRemove();\n          }}\n          className=\"absolute -right-1 -top-1 w-4 h-4 rounded-full bg-muted-foreground/20 flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity hover:bg-destructive/50\"\n        >\n          <X className=\"w-2.5 h-2.5 text-muted-foreground\" />\n        </button>\n\n        {/* Expanded details */}\n        <AnimatePresence>\n          {isExpanded && entity.description && (\n            <motion.div\n              initial={{ opacity: 0, y: -5 }}\n              animate={{ opacity: 1, y: 0 }}\n              exit={{ opacity: 0, y: -5 }}\n              className=\"absolute top-full left-0 mt-1 z-50 w-64 p-3 rounded-lg bg-popover border border-border shadow-lg\"\n              onClick={(e) => e.stopPropagation()}\n            >\n              <div className=\"flex items-center gap-2 mb-2\">\n                <Icon className={cn('w-4 h-4', config.color)} />\n                <span className=\"text-xs font-medium text-muted-foreground uppercase\">\n                  {config.label}\n                </span>\n              </div>\n              <p className=\"text-sm text-foreground font-medium mb-1\">\n                {entity.name}\n              </p>\n              <p className=\"text-xs text-muted-foreground line-clamp-3\">\n                {entity.description}\n              </p>\n            </motion.div>\n          )}\n        </AnimatePresence>\n      </motion.div>\n\n      {/* Arrow separator */}\n      {!isLast && (\n        <ChevronRight className=\"w-4 h-4 text-muted-foreground/50 mx-1 flex-shrink-0\" />\n      )}\n    </div>\n  );\n}\n\n// =============================================================================\n// View Switcher Component\n// =============================================================================\n\ninterface ViewSwitcherProps {\n  currentView: ViewDimension;\n  onViewChange: (view: ViewDimension) => void;\n}\n\nfunction ViewSwitcher({ currentView, onViewChange }: ViewSwitcherProps) {\n  const [isOpen, setIsOpen] = useState(false);\n  const dropdownRef = useRef<HTMLDivElement>(null);\n\n  const currentConfig = VIEW_CONFIG[currentView];\n  const CurrentIcon = currentConfig.icon;\n\n  // Close on click outside\n  useEffect(() => {\n    function handleClickOutside(event: MouseEvent) {\n      if (dropdownRef.current && !dropdownRef.current.contains(event.target as Node)) {\n        setIsOpen(false);\n      }\n    }\n\n    document.addEventListener('mousedown', handleClickOutside);\n    return () => document.removeEventListener('mousedown', handleClickOutside);\n  }, []);\n\n  return (\n    <div className=\"relative\" ref={dropdownRef}>\n      <button\n        onClick={() => setIsOpen(!isOpen)}\n        className={cn(\n          'flex items-center gap-2 px-3 py-1.5 rounded-md',\n          'text-sm font-medium transition-colors',\n          'bg-muted/50 hover:bg-muted text-foreground'\n        )}\n      >\n        <CurrentIcon className=\"w-4 h-4\" />\n        <span>{currentConfig.label}</span>\n        <ChevronDown className={cn(\n          'w-3.5 h-3.5 transition-transform',\n          isOpen && 'rotate-180'\n        )} />\n      </button>\n\n      <AnimatePresence>\n        {isOpen && (\n          <motion.div\n            initial={{ opacity: 0, y: -5 }}\n            animate={{ opacity: 1, y: 0 }}\n            exit={{ opacity: 0, y: -5 }}\n            className=\"absolute top-full right-0 mt-1 z-50 w-40 rounded-lg bg-popover border border-border shadow-lg overflow-hidden\"\n          >\n            {Object.entries(VIEW_CONFIG).map(([key, config]) => {\n              const Icon = config.icon;\n              const view = key as ViewDimension;\n              return (\n                <button\n                  key={key}\n                  onClick={() => {\n                    onViewChange(view);\n                    setIsOpen(false);\n                  }}\n                  className={cn(\n                    'w-full flex items-center gap-2 px-3 py-2 text-sm transition-colors',\n                    view === currentView\n                      ? 'bg-primary/10 text-primary'\n                      : 'hover:bg-muted text-foreground'\n                  )}\n                >\n                  <Icon className=\"w-4 h-4\" />\n                  <span>{config.label}</span>\n                </button>\n              );\n            })}\n          </motion.div>\n        )}\n      </AnimatePresence>\n    </div>\n  );\n}\n\n// =============================================================================\n// Main Component\n// =============================================================================\n\nexport function ContextBar({\n  contextChain,\n  currentView,\n  onViewChange,\n  onEntityClick,\n  onRemoveEntity,\n  onClearContext,\n  className,\n}: ContextBarProps) {\n  return (\n    <div\n      className={cn(\n        'flex items-center justify-between gap-4 px-4 py-2',\n        'bg-card/50 border-b border-border backdrop-blur-sm',\n        className\n      )}\n    >\n      {/* Context Chain */}\n      <div className=\"flex items-center gap-1 overflow-x-auto hide-scrollbar\">\n        {contextChain.length === 0 ? (\n          <span className=\"text-sm text-muted-foreground italic\">\n            No context selected - type @ to add\n          </span>\n        ) : (\n          <>\n            {contextChain.map((entity, index) => (\n              <EntityChip\n                key={entity.id}\n                entity={entity}\n                isLast={index === contextChain.length - 1}\n                onClick={() => onEntityClick(entity)}\n                onRemove={() => onRemoveEntity(entity.id)}\n              />\n            ))}\n\n            {/* Clear all button */}\n            {contextChain.length > 1 && (\n              <button\n                onClick={onClearContext}\n                className=\"ml-2 p-1 rounded hover:bg-muted transition-colors\"\n                title=\"Clear all context\"\n              >\n                <X className=\"w-4 h-4 text-muted-foreground\" />\n              </button>\n            )}\n          </>\n        )}\n      </div>\n\n      {/* View Switcher */}\n      <ViewSwitcher currentView={currentView} onViewChange={onViewChange} />\n    </div>\n  );\n}\n\nexport default ContextBar;\n","'use client';\n\nimport { useState, useRef, useEffect } from 'react';\nimport { motion, AnimatePresence } from 'framer-motion';\nimport {\n  Code,\n  FolderTree,\n  Terminal,\n  Eye,\n  ChevronUp,\n  ChevronDown,\n  X,\n  Maximize2,\n  Minimize2,\n  File,\n  Folder,\n  ChevronRight,\n  Play,\n  Copy,\n  Check,\n  RefreshCw,\n  ExternalLink,\n} from 'lucide-react';\nimport { cn } from '@/lib/utils';\n\n// =============================================================================\n// Types\n// =============================================================================\n\nexport type CodePanelTab = 'code' | 'files' | 'terminal' | 'preview';\n\nexport interface FileNode {\n  name: string;\n  path: string;\n  type: 'file' | 'folder';\n  children?: FileNode[];\n  language?: string;\n  isOpen?: boolean;\n}\n\nexport interface TerminalOutput {\n  id: string;\n  type: 'command' | 'output' | 'error';\n  content: string;\n  timestamp: number;\n}\n\ninterface CodePanelProps {\n  isVisible: boolean;\n  isExpanded: boolean;\n  activeTab: CodePanelTab;\n  onTabChange: (tab: CodePanelTab) => void;\n  onToggleExpanded: () => void;\n  onClose: () => void;\n  // Code editor props\n  code: string;\n  language: string;\n  currentFile?: string;\n  onCodeChange?: (code: string) => void;\n  // File tree props\n  files: FileNode[];\n  onFileSelect?: (path: string) => void;\n  // Terminal props\n  terminalOutput: TerminalOutput[];\n  onRunCommand?: (command: string) => void;\n  isRunning?: boolean;\n  // Preview props\n  previewUrl?: string;\n  onRefreshPreview?: () => void;\n}\n\n// =============================================================================\n// Tab Button Component\n// =============================================================================\n\ninterface TabButtonProps {\n  tab: CodePanelTab;\n  isActive: boolean;\n  onClick: () => void;\n  icon: typeof Code;\n  label: string;\n  badge?: number;\n}\n\nfunction TabButton({ tab, isActive, onClick, icon: Icon, label, badge }: TabButtonProps) {\n  return (\n    <button\n      onClick={onClick}\n      className={cn(\n        'flex items-center gap-2 px-3 py-2 text-sm font-medium transition-colors relative',\n        isActive\n          ? 'text-primary border-b-2 border-primary'\n          : 'text-muted-foreground hover:text-foreground'\n      )}\n    >\n      <Icon className=\"w-4 h-4\" />\n      <span className=\"hidden sm:inline\">{label}</span>\n      {badge !== undefined && badge > 0 && (\n        <span className=\"absolute -top-1 -right-1 w-4 h-4 rounded-full bg-primary text-primary-foreground text-[10px] flex items-center justify-center\">\n          {badge}\n        </span>\n      )}\n    </button>\n  );\n}\n\n// =============================================================================\n// File Tree Component\n// =============================================================================\n\ninterface FileTreeItemProps {\n  node: FileNode;\n  depth: number;\n  onSelect: (path: string) => void;\n  selectedPath?: string;\n}\n\nfunction FileTreeItem({ node, depth, onSelect, selectedPath }: FileTreeItemProps) {\n  const [isOpen, setIsOpen] = useState(node.isOpen ?? false);\n  const isSelected = selectedPath === node.path;\n\n  const handleClick = () => {\n    if (node.type === 'folder') {\n      setIsOpen(!isOpen);\n    } else {\n      onSelect(node.path);\n    }\n  };\n\n  return (\n    <div>\n      <button\n        onClick={handleClick}\n        className={cn(\n          'w-full flex items-center gap-1.5 px-2 py-1 text-sm transition-colors rounded',\n          isSelected ? 'bg-primary/20 text-primary' : 'hover:bg-muted text-foreground'\n        )}\n        style={{ paddingLeft: `${depth * 12 + 8}px` }}\n      >\n        {node.type === 'folder' ? (\n          <>\n            <ChevronRight\n              className={cn(\n                'w-3 h-3 text-muted-foreground transition-transform',\n                isOpen && 'rotate-90'\n              )}\n            />\n            <Folder className=\"w-4 h-4 text-amber-400\" />\n          </>\n        ) : (\n          <>\n            <span className=\"w-3\" />\n            <File className=\"w-4 h-4 text-blue-400\" />\n          </>\n        )}\n        <span className=\"truncate\">{node.name}</span>\n      </button>\n\n      {node.type === 'folder' && isOpen && node.children && (\n        <div>\n          {node.children.map((child) => (\n            <FileTreeItem\n              key={child.path}\n              node={child}\n              depth={depth + 1}\n              onSelect={onSelect}\n              selectedPath={selectedPath}\n            />\n          ))}\n        </div>\n      )}\n    </div>\n  );\n}\n\n// =============================================================================\n// Simple Code Editor Component\n// =============================================================================\n\ninterface CodeEditorProps {\n  code: string;\n  language: string;\n  onChange?: (code: string) => void;\n  readOnly?: boolean;\n}\n\nfunction CodeEditor({ code, language, onChange, readOnly = false }: CodeEditorProps) {\n  const [copied, setCopied] = useState(false);\n  const textareaRef = useRef<HTMLTextAreaElement>(null);\n\n  const handleCopy = async () => {\n    await navigator.clipboard.writeText(code);\n    setCopied(true);\n    setTimeout(() => setCopied(false), 2000);\n  };\n\n  // Line numbers\n  const lineCount = code.split('\\n').length;\n  const lineNumbers = Array.from({ length: lineCount }, (_, i) => i + 1);\n\n  return (\n    <div className=\"relative h-full flex flex-col bg-[#1e1e1e] rounded-lg overflow-hidden\">\n      {/* Toolbar */}\n      <div className=\"flex items-center justify-between px-3 py-2 border-b border-white/10\">\n        <span className=\"text-xs text-muted-foreground font-mono\">{language}</span>\n        <button\n          onClick={handleCopy}\n          className=\"p-1.5 rounded hover:bg-white/10 transition-colors\"\n          title=\"Copy code\"\n        >\n          {copied ? (\n            <Check className=\"w-4 h-4 text-green-400\" />\n          ) : (\n            <Copy className=\"w-4 h-4 text-muted-foreground\" />\n          )}\n        </button>\n      </div>\n\n      {/* Editor */}\n      <div className=\"flex-1 flex overflow-auto\">\n        {/* Line numbers */}\n        <div className=\"flex-shrink-0 px-3 py-2 text-right text-xs text-muted-foreground/50 font-mono select-none border-r border-white/5\">\n          {lineNumbers.map((n) => (\n            <div key={n} className=\"leading-6\">{n}</div>\n          ))}\n        </div>\n\n        {/* Code area */}\n        <div className=\"flex-1 relative\">\n          <textarea\n            ref={textareaRef}\n            value={code}\n            onChange={(e) => onChange?.(e.target.value)}\n            readOnly={readOnly}\n            className={cn(\n              'absolute inset-0 w-full h-full px-4 py-2 bg-transparent resize-none',\n              'font-mono text-sm text-white leading-6',\n              'focus:outline-none',\n              readOnly && 'cursor-default'\n            )}\n            spellCheck={false}\n          />\n        </div>\n      </div>\n    </div>\n  );\n}\n\n// =============================================================================\n// Terminal Component\n// =============================================================================\n\ninterface TerminalViewProps {\n  output: TerminalOutput[];\n  onRunCommand: (command: string) => void;\n  isRunning: boolean;\n}\n\nfunction TerminalView({ output, onRunCommand, isRunning }: TerminalViewProps) {\n  const [command, setCommand] = useState('');\n  const outputRef = useRef<HTMLDivElement>(null);\n\n  // Auto-scroll to bottom\n  useEffect(() => {\n    if (outputRef.current) {\n      outputRef.current.scrollTop = outputRef.current.scrollHeight;\n    }\n  }, [output]);\n\n  const handleSubmit = (e: React.FormEvent) => {\n    e.preventDefault();\n    if (command.trim() && !isRunning) {\n      onRunCommand(command.trim());\n      setCommand('');\n    }\n  };\n\n  return (\n    <div className=\"h-full flex flex-col bg-[#1e1e1e] rounded-lg overflow-hidden font-mono\">\n      {/* Output */}\n      <div ref={outputRef} className=\"flex-1 overflow-auto p-3 space-y-1\">\n        {output.length === 0 ? (\n          <div className=\"text-muted-foreground text-sm\">\n            Terminal ready. Type a command to get started.\n          </div>\n        ) : (\n          output.map((line) => (\n            <div\n              key={line.id}\n              className={cn(\n                'text-sm whitespace-pre-wrap',\n                line.type === 'command' && 'text-green-400',\n                line.type === 'output' && 'text-white/80',\n                line.type === 'error' && 'text-red-400'\n              )}\n            >\n              {line.type === 'command' && <span className=\"text-muted-foreground\">$ </span>}\n              {line.content}\n            </div>\n          ))\n        )}\n        {isRunning && (\n          <div className=\"flex items-center gap-2 text-muted-foreground text-sm\">\n            <div className=\"w-2 h-2 rounded-full bg-green-400 animate-pulse\" />\n            Running...\n          </div>\n        )}\n      </div>\n\n      {/* Input */}\n      <form onSubmit={handleSubmit} className=\"flex items-center gap-2 px-3 py-2 border-t border-white/10\">\n        <span className=\"text-green-400 text-sm\">$</span>\n        <input\n          type=\"text\"\n          value={command}\n          onChange={(e) => setCommand(e.target.value)}\n          disabled={isRunning}\n          className=\"flex-1 bg-transparent text-sm text-white focus:outline-none disabled:opacity-50\"\n          placeholder=\"Enter command...\"\n          autoCapitalize=\"off\"\n          autoCorrect=\"off\"\n          autoComplete=\"off\"\n          spellCheck={false}\n        />\n        <button\n          type=\"submit\"\n          disabled={!command.trim() || isRunning}\n          className=\"p-1.5 rounded hover:bg-white/10 transition-colors disabled:opacity-50\"\n        >\n          <Play className=\"w-4 h-4 text-green-400\" />\n        </button>\n      </form>\n    </div>\n  );\n}\n\n// =============================================================================\n// Preview Component\n// =============================================================================\n\ninterface PreviewViewProps {\n  url?: string;\n  onRefresh: () => void;\n}\n\nfunction PreviewView({ url, onRefresh }: PreviewViewProps) {\n  const [isLoading, setIsLoading] = useState(true);\n\n  if (!url) {\n    return (\n      <div className=\"h-full flex flex-col items-center justify-center bg-muted/20 rounded-lg\">\n        <Eye className=\"w-12 h-12 text-muted-foreground/30 mb-3\" />\n        <p className=\"text-sm text-muted-foreground\">No preview available</p>\n        <p className=\"text-xs text-muted-foreground/70 mt-1\">\n          Run a dev server to see the preview\n        </p>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"h-full flex flex-col bg-card rounded-lg overflow-hidden\">\n      {/* URL bar */}\n      <div className=\"flex items-center gap-2 px-3 py-2 border-b border-border\">\n        <button\n          onClick={onRefresh}\n          className=\"p-1.5 rounded hover:bg-muted transition-colors\"\n          title=\"Refresh\"\n        >\n          <RefreshCw className={cn('w-4 h-4 text-muted-foreground', isLoading && 'animate-spin')} />\n        </button>\n        <div className=\"flex-1 px-3 py-1.5 rounded bg-muted text-sm text-muted-foreground truncate\">\n          {url}\n        </div>\n        <a\n          href={url}\n          target=\"_blank\"\n          rel=\"noopener noreferrer\"\n          className=\"p-1.5 rounded hover:bg-muted transition-colors\"\n          title=\"Open in new tab\"\n        >\n          <ExternalLink className=\"w-4 h-4 text-muted-foreground\" />\n        </a>\n      </div>\n\n      {/* iframe */}\n      <div className=\"flex-1 relative\">\n        {isLoading && (\n          <div className=\"absolute inset-0 flex items-center justify-center bg-muted/50\">\n            <RefreshCw className=\"w-6 h-6 text-muted-foreground animate-spin\" />\n          </div>\n        )}\n        <iframe\n          src={url}\n          className=\"w-full h-full border-0\"\n          onLoad={() => setIsLoading(false)}\n          title=\"Preview\"\n        />\n      </div>\n    </div>\n  );\n}\n\n// =============================================================================\n// Main Component\n// =============================================================================\n\nexport function CodePanel({\n  isVisible,\n  isExpanded,\n  activeTab,\n  onTabChange,\n  onToggleExpanded,\n  onClose,\n  code,\n  language,\n  currentFile,\n  onCodeChange,\n  files,\n  onFileSelect,\n  terminalOutput,\n  onRunCommand,\n  isRunning = false,\n  previewUrl,\n  onRefreshPreview,\n}: CodePanelProps) {\n  if (!isVisible) return null;\n\n  return (\n    <motion.div\n      initial={{ y: '100%' }}\n      animate={{ y: 0 }}\n      exit={{ y: '100%' }}\n      transition={{ type: 'spring', damping: 30, stiffness: 300 }}\n      className={cn(\n        'bg-card border-t border-border flex flex-col',\n        isExpanded ? 'h-[70vh]' : 'h-[300px] md:h-[350px]'\n      )}\n    >\n      {/* Header */}\n      <div className=\"flex items-center justify-between px-4 border-b border-border\">\n        {/* Tabs */}\n        <div className=\"flex items-center gap-1\">\n          <TabButton\n            tab=\"code\"\n            isActive={activeTab === 'code'}\n            onClick={() => onTabChange('code')}\n            icon={Code}\n            label=\"Code\"\n          />\n          <TabButton\n            tab=\"files\"\n            isActive={activeTab === 'files'}\n            onClick={() => onTabChange('files')}\n            icon={FolderTree}\n            label=\"Files\"\n          />\n          <TabButton\n            tab=\"terminal\"\n            isActive={activeTab === 'terminal'}\n            onClick={() => onTabChange('terminal')}\n            icon={Terminal}\n            label=\"Terminal\"\n            badge={terminalOutput.filter((o) => o.type === 'error').length}\n          />\n          <TabButton\n            tab=\"preview\"\n            isActive={activeTab === 'preview'}\n            onClick={() => onTabChange('preview')}\n            icon={Eye}\n            label=\"Preview\"\n          />\n        </div>\n\n        {/* Controls */}\n        <div className=\"flex items-center gap-1\">\n          {currentFile && (\n            <span className=\"text-xs text-muted-foreground mr-2 hidden sm:block\">\n              {currentFile}\n            </span>\n          )}\n          <button\n            onClick={onToggleExpanded}\n            className=\"p-2 rounded hover:bg-muted transition-colors\"\n            title={isExpanded ? 'Minimize' : 'Maximize'}\n          >\n            {isExpanded ? (\n              <Minimize2 className=\"w-4 h-4 text-muted-foreground\" />\n            ) : (\n              <Maximize2 className=\"w-4 h-4 text-muted-foreground\" />\n            )}\n          </button>\n          <button\n            onClick={onClose}\n            className=\"p-2 rounded hover:bg-muted transition-colors\"\n            title=\"Close\"\n          >\n            <X className=\"w-4 h-4 text-muted-foreground\" />\n          </button>\n        </div>\n      </div>\n\n      {/* Content */}\n      <div className=\"flex-1 overflow-hidden p-3\">\n        <AnimatePresence mode=\"wait\">\n          {activeTab === 'code' && (\n            <motion.div\n              key=\"code\"\n              initial={{ opacity: 0 }}\n              animate={{ opacity: 1 }}\n              exit={{ opacity: 0 }}\n              className=\"h-full\"\n            >\n              <CodeEditor\n                code={code}\n                language={language}\n                onChange={onCodeChange}\n              />\n            </motion.div>\n          )}\n\n          {activeTab === 'files' && (\n            <motion.div\n              key=\"files\"\n              initial={{ opacity: 0 }}\n              animate={{ opacity: 1 }}\n              exit={{ opacity: 0 }}\n              className=\"h-full overflow-auto\"\n            >\n              <div className=\"space-y-0.5\">\n                {files.length === 0 ? (\n                  <div className=\"text-sm text-muted-foreground text-center py-8\">\n                    No files in workspace\n                  </div>\n                ) : (\n                  files.map((file) => (\n                    <FileTreeItem\n                      key={file.path}\n                      node={file}\n                      depth={0}\n                      onSelect={onFileSelect || (() => {})}\n                      selectedPath={currentFile}\n                    />\n                  ))\n                )}\n              </div>\n            </motion.div>\n          )}\n\n          {activeTab === 'terminal' && (\n            <motion.div\n              key=\"terminal\"\n              initial={{ opacity: 0 }}\n              animate={{ opacity: 1 }}\n              exit={{ opacity: 0 }}\n              className=\"h-full\"\n            >\n              <TerminalView\n                output={terminalOutput}\n                onRunCommand={onRunCommand || (() => {})}\n                isRunning={isRunning}\n              />\n            </motion.div>\n          )}\n\n          {activeTab === 'preview' && (\n            <motion.div\n              key=\"preview\"\n              initial={{ opacity: 0 }}\n              animate={{ opacity: 1 }}\n              exit={{ opacity: 0 }}\n              className=\"h-full\"\n            >\n              <PreviewView\n                url={previewUrl}\n                onRefresh={onRefreshPreview || (() => {})}\n              />\n            </motion.div>\n          )}\n        </AnimatePresence>\n      </div>\n    </motion.div>\n  );\n}\n\nexport default CodePanel;\n","'use client';\n\nimport { useState, useRef, useEffect, useCallback } from 'react';\nimport { motion, AnimatePresence } from 'framer-motion';\nimport {\n  Send,\n  Mic,\n  MicOff,\n  Loader2,\n  User,\n  AtSign,\n  Folder,\n  FileText,\n  FileCode,\n  Ticket,\n  ChevronRight,\n  Check,\n  X,\n  Sparkles,\n  StopCircle,\n  Paperclip,\n  Image as ImageIcon,\n  File,\n} from 'lucide-react';\nimport { useFileAttachment, FileAttachment } from '@/hooks/useFileAttachment';\nimport { ClawAIAvatar } from '@/components/claw-ai/ClawAIAvatar';\nimport { cn } from '@/lib/utils';\nimport { ContextEntity, ContextEntityType } from './ContextBar';\n\n// Import theme styles\nimport '@/lib/themes/themes.css';\n\n// =============================================================================\n// Types\n// =============================================================================\n\nexport interface ChatMessage {\n  id: string;\n  role: 'user' | 'assistant' | 'system';\n  content: string;\n  timestamp: Date;\n  isStreaming?: boolean;\n  toolCalls?: ToolCall[];\n  mentions?: ContextEntity[];\n}\n\nexport interface ToolCall {\n  id: string;\n  name: string;\n  status: 'pending' | 'executing' | 'complete' | 'error';\n  args?: Record<string, unknown>;\n  result?: {\n    success: boolean;\n    data?: Record<string, unknown>;\n    error?: string;\n  };\n}\n\nexport interface MentionSuggestion {\n  id: string;\n  type: ContextEntityType;\n  name: string;\n  description?: string;\n}\n\ninterface AgentChatProps {\n  messages: ChatMessage[];\n  isStreaming: boolean;\n  onSendMessage: (content: string, mentions?: ContextEntity[]) => void;\n  onAbort?: () => void;\n  mentionSuggestions?: MentionSuggestion[];\n  onMentionSearch?: (query: string) => void;\n  onMentionSelect?: (mention: MentionSuggestion) => void;\n  onVoiceInput?: (transcript: string) => void;\n  isVoiceEnabled?: boolean;\n  className?: string;\n}\n\n// =============================================================================\n// Entity Config\n// =============================================================================\n\nconst ENTITY_ICONS: Record<ContextEntityType, typeof Folder> = {\n  project: Folder,\n  prd: FileText,\n  epic: FileText,\n  ticket: Ticket,\n  file: FileCode,\n};\n\nconst ENTITY_COLORS: Record<ContextEntityType, string> = {\n  project: 'text-blue-400',\n  prd: 'text-purple-400',\n  epic: 'text-amber-400',\n  ticket: 'text-green-400',\n  file: 'text-orange-400',\n};\n\n// =============================================================================\n// Tool Execution Card\n// =============================================================================\n\ninterface ToolExecutionCardProps {\n  tool: ToolCall;\n}\n\nfunction ToolExecutionCard({ tool }: ToolExecutionCardProps) {\n  return (\n    <div\n      className=\"rounded-lg p-3\"\n      style={{\n        background: 'hsl(var(--theme-muted) / 0.5)',\n        border: '1px solid hsl(var(--theme-border))',\n      }}\n    >\n      <div className=\"flex items-center gap-2 mb-2\">\n        <div\n          className=\"w-6 h-6 rounded-md flex items-center justify-center\"\n          style={{\n            background:\n              tool.status === 'complete' && tool.result?.success\n                ? 'hsl(142 70% 45% / 0.2)'\n                : tool.status === 'complete' && !tool.result?.success\n                ? 'hsl(0 84% 60% / 0.2)'\n                : tool.status === 'executing'\n                ? 'hsl(var(--theme-primary) / 0.2)'\n                : 'hsl(var(--theme-muted))',\n          }}\n        >\n          {tool.status === 'executing' ? (\n            <Loader2 className=\"w-3.5 h-3.5 animate-spin\" style={{ color: 'hsl(var(--theme-primary))' }} />\n          ) : tool.status === 'complete' && tool.result?.success ? (\n            <Check className=\"w-3.5 h-3.5\" style={{ color: 'hsl(142 70% 45%)' }} />\n          ) : tool.status === 'complete' && !tool.result?.success ? (\n            <X className=\"w-3.5 h-3.5\" style={{ color: 'hsl(0 84% 60%)' }} />\n          ) : (\n            <Sparkles className=\"w-3.5 h-3.5\" style={{ color: 'hsl(var(--theme-muted-foreground))' }} />\n          )}\n        </div>\n        <span className=\"text-sm font-medium\" style={{ color: 'hsl(var(--theme-foreground))' }}>\n          {tool.name.replace(/_/g, ' ')}\n        </span>\n        {tool.status === 'executing' && (\n          <span className=\"text-xs animate-pulse\" style={{ color: 'hsl(var(--theme-muted-foreground))' }}>\n            Running...\n          </span>\n        )}\n      </div>\n\n      {/* Show result if complete */}\n      {tool.status === 'complete' && tool.result && (\n        <div className=\"mt-2 text-xs\">\n          {tool.result.success ? (\n            <div style={{ color: 'hsl(var(--theme-muted-foreground))' }}>\n              {tool.result.data && Object.keys(tool.result.data).length > 0 && (\n                <pre\n                  className=\"rounded p-2 overflow-auto max-h-24\"\n                  style={{ background: 'hsl(var(--theme-background))' }}\n                >\n                  {JSON.stringify(tool.result.data, null, 2)}\n                </pre>\n              )}\n            </div>\n          ) : (\n            <div style={{ color: 'hsl(0 84% 60%)' }}>\n              Error: {tool.result.error}\n            </div>\n          )}\n        </div>\n      )}\n    </div>\n  );\n}\n\n// =============================================================================\n// Entity Preview Card\n// =============================================================================\n\ninterface EntityPreviewProps {\n  entity: ContextEntity;\n}\n\nfunction EntityPreview({ entity }: EntityPreviewProps) {\n  const Icon = ENTITY_ICONS[entity.type];\n  const colorClass = ENTITY_COLORS[entity.type];\n\n  return (\n    <div\n      className=\"inline-flex items-center gap-1.5 px-2 py-1 rounded-md\"\n      style={{ background: 'hsl(var(--theme-muted))' }}\n    >\n      <Icon className={cn('w-3.5 h-3.5', colorClass)} />\n      <span className=\"text-sm font-medium\" style={{ color: 'hsl(var(--theme-foreground))' }}>\n        @{entity.name}\n      </span>\n    </div>\n  );\n}\n\n// =============================================================================\n// Message Bubble\n// =============================================================================\n\ninterface MessageBubbleProps {\n  message: ChatMessage;\n}\n\nfunction MessageBubble({ message }: MessageBubbleProps) {\n  const isUser = message.role === 'user';\n  const isSystem = message.role === 'system';\n\n  if (isSystem) {\n    return (\n      <div className=\"flex justify-center my-4\">\n        <div\n          className=\"px-3 py-1.5 rounded-full text-xs\"\n          style={{\n            background: 'hsl(var(--theme-muted))',\n            color: 'hsl(var(--theme-muted-foreground))',\n          }}\n        >\n          {message.content}\n        </div>\n      </div>\n    );\n  }\n\n  return (\n    <motion.div\n      initial={{ opacity: 0, y: 10 }}\n      animate={{ opacity: 1, y: 0 }}\n      className={cn('flex gap-3 mb-4', isUser && 'flex-row-reverse')}\n      style={{ gap: 'var(--theme-chat-message-gap, 0.75rem)' }}\n    >\n      {/* Avatar */}\n      {isUser ? (\n        <div\n          className=\"w-8 h-8 rounded-full flex items-center justify-center flex-shrink-0\"\n          style={{\n            background: 'hsl(var(--theme-chat-avatar-user, var(--theme-primary)))',\n          }}\n        >\n          <User className=\"w-4 h-4\" style={{ color: 'hsl(var(--theme-primary-foreground))' }} />\n        </div>\n      ) : (\n        <ClawAIAvatar size={32} isActive={message.isStreaming} />\n      )}\n\n      {/* Content */}\n      <div\n        className={cn('flex-1 space-y-2', isUser && 'flex flex-col items-end')}\n        style={{ maxWidth: 'var(--theme-chat-max-width, 85%)' }}\n      >\n        {/* Mentions */}\n        {message.mentions && message.mentions.length > 0 && (\n          <div className=\"flex flex-wrap gap-1.5 mb-1\">\n            {message.mentions.map((mention) => (\n              <EntityPreview key={mention.id} entity={mention} />\n            ))}\n          </div>\n        )}\n\n        {/* Message text */}\n        <div\n          className=\"px-4 py-2.5\"\n          style={{\n            background: isUser\n              ? 'var(--theme-chat-user-bg, hsl(var(--theme-primary)))'\n              : 'hsl(var(--theme-chat-assistant-bg, var(--theme-muted)))',\n            color: isUser\n              ? 'hsl(var(--theme-chat-user-fg, var(--theme-primary-foreground)))'\n              : 'hsl(var(--theme-chat-assistant-fg, var(--theme-foreground)))',\n            borderRadius: isUser\n              ? 'var(--theme-chat-bubble-radius, 1rem) var(--theme-chat-bubble-radius, 1rem) var(--theme-chat-bubble-radius-tail, 0.25rem) var(--theme-chat-bubble-radius, 1rem)'\n              : 'var(--theme-chat-bubble-radius-tail, 0.25rem) var(--theme-chat-bubble-radius, 1rem) var(--theme-chat-bubble-radius, 1rem) var(--theme-chat-bubble-radius, 1rem)',\n          }}\n        >\n          <p className=\"text-sm whitespace-pre-wrap\">\n            {message.content}\n            {message.isStreaming && (\n              <span className=\"inline-block w-1.5 h-4 ml-1 bg-current animate-pulse\" />\n            )}\n          </p>\n        </div>\n\n        {/* Tool calls */}\n        {message.toolCalls && message.toolCalls.length > 0 && (\n          <div className=\"space-y-2 w-full\">\n            {message.toolCalls.map((tool) => (\n              <ToolExecutionCard key={tool.id} tool={tool} />\n            ))}\n          </div>\n        )}\n\n        {/* Timestamp */}\n        <span className=\"text-[10px]\" style={{ color: 'hsl(var(--theme-muted-foreground) / 0.7)' }}>\n          {message.timestamp.toLocaleTimeString([], { hour: '2-digit', minute: '2-digit' })}\n        </span>\n      </div>\n    </motion.div>\n  );\n}\n\n// =============================================================================\n// Mention Autocomplete\n// =============================================================================\n\ninterface MentionAutocompleteProps {\n  suggestions: MentionSuggestion[];\n  selectedIndex: number;\n  onSelect: (suggestion: MentionSuggestion) => void;\n}\n\nfunction MentionAutocomplete({ suggestions, selectedIndex, onSelect }: MentionAutocompleteProps) {\n  if (suggestions.length === 0) return null;\n\n  return (\n    <motion.div\n      initial={{ opacity: 0, y: 10 }}\n      animate={{ opacity: 1, y: 0 }}\n      exit={{ opacity: 0, y: 10 }}\n      className=\"absolute bottom-full left-0 right-0 mb-2 rounded-lg shadow-lg overflow-hidden z-50\"\n      style={{\n        background: 'hsl(var(--theme-card))',\n        border: '1px solid hsl(var(--theme-border))',\n      }}\n    >\n      <div className=\"max-h-48 overflow-y-auto\">\n        {suggestions.map((suggestion, index) => {\n          const Icon = ENTITY_ICONS[suggestion.type];\n          const colorClass = ENTITY_COLORS[suggestion.type];\n\n          return (\n            <button\n              key={suggestion.id}\n              onClick={() => onSelect(suggestion)}\n              className=\"w-full flex items-center gap-3 px-3 py-2 transition-colors\"\n              style={{\n                background: index === selectedIndex ? 'hsl(var(--theme-muted))' : 'transparent',\n              }}\n              onMouseEnter={(e) => {\n                if (index !== selectedIndex) e.currentTarget.style.background = 'hsl(var(--theme-muted) / 0.5)';\n              }}\n              onMouseLeave={(e) => {\n                if (index !== selectedIndex) e.currentTarget.style.background = 'transparent';\n              }}\n            >\n              <Icon className={cn('w-4 h-4', colorClass)} />\n              <div className=\"flex-1 text-left\">\n                <p className=\"text-sm font-medium\" style={{ color: 'hsl(var(--theme-foreground))' }}>\n                  @{suggestion.name}\n                </p>\n                {suggestion.description && (\n                  <p className=\"text-xs truncate\" style={{ color: 'hsl(var(--theme-muted-foreground))' }}>\n                    {suggestion.description}\n                  </p>\n                )}\n              </div>\n              <span className=\"text-[10px] uppercase\" style={{ color: 'hsl(var(--theme-muted-foreground))' }}>\n                {suggestion.type}\n              </span>\n            </button>\n          );\n        })}\n      </div>\n    </motion.div>\n  );\n}\n\n// =============================================================================\n// Main Component\n// =============================================================================\n\nexport function AgentChat({\n  messages,\n  isStreaming,\n  onSendMessage,\n  onAbort,\n  mentionSuggestions = [],\n  onMentionSearch,\n  onMentionSelect,\n  onVoiceInput,\n  isVoiceEnabled = false,\n  className,\n}: AgentChatProps) {\n  const [input, setInput] = useState('');\n  const [showMentions, setShowMentions] = useState(false);\n  const [mentionQuery, setMentionQuery] = useState('');\n  const [selectedMentionIndex, setSelectedMentionIndex] = useState(0);\n  const [selectedMentions, setSelectedMentions] = useState<ContextEntity[]>([]);\n  const [isRecording, setIsRecording] = useState(false);\n\n  const messagesEndRef = useRef<HTMLDivElement>(null);\n  const inputRef = useRef<HTMLTextAreaElement>(null);\n\n  // File attachment support\n  const fileAttachment = useFileAttachment({\n    maxFiles: 5,\n    maxSizeBytes: 10 * 1024 * 1024, // 10MB\n    onError: (error) => console.error('[AgentChat] Attachment error:', error),\n  });\n\n  // Auto-scroll to bottom\n  useEffect(() => {\n    messagesEndRef.current?.scrollIntoView({ behavior: 'smooth' });\n  }, [messages]);\n\n  // Handle input change and @ detection\n  const handleInputChange = (value: string) => {\n    setInput(value);\n\n    // Check for @ mention\n    const lastAtIndex = value.lastIndexOf('@');\n    if (lastAtIndex !== -1) {\n      const afterAt = value.slice(lastAtIndex + 1);\n      // Check if we're still typing the mention (no space after @)\n      if (!afterAt.includes(' ') && afterAt.length <= 20) {\n        setMentionQuery(afterAt);\n        setShowMentions(true);\n        onMentionSearch?.(afterAt);\n        return;\n      }\n    }\n    setShowMentions(false);\n  };\n\n  // Handle mention selection\n  const handleMentionSelect = (suggestion: MentionSuggestion) => {\n    const lastAtIndex = input.lastIndexOf('@');\n    const newInput = input.slice(0, lastAtIndex) + `@${suggestion.name} `;\n    setInput(newInput);\n    setShowMentions(false);\n    setSelectedMentionIndex(0);\n\n    // Add to selected mentions\n    const entity: ContextEntity = {\n      id: suggestion.id,\n      type: suggestion.type,\n      name: suggestion.name,\n      description: suggestion.description,\n    };\n    setSelectedMentions((prev) => [...prev, entity]);\n\n    onMentionSelect?.(suggestion);\n    inputRef.current?.focus();\n  };\n\n  // Handle keyboard navigation in autocomplete\n  const handleKeyDown = (e: React.KeyboardEvent) => {\n    if (showMentions && mentionSuggestions.length > 0) {\n      if (e.key === 'ArrowDown') {\n        e.preventDefault();\n        setSelectedMentionIndex((prev) => (prev + 1) % mentionSuggestions.length);\n      } else if (e.key === 'ArrowUp') {\n        e.preventDefault();\n        setSelectedMentionIndex((prev) => (prev - 1 + mentionSuggestions.length) % mentionSuggestions.length);\n      } else if (e.key === 'Enter' && !e.shiftKey) {\n        e.preventDefault();\n        handleMentionSelect(mentionSuggestions[selectedMentionIndex]);\n      } else if (e.key === 'Escape') {\n        setShowMentions(false);\n      }\n    } else if (e.key === 'Enter' && !e.shiftKey) {\n      e.preventDefault();\n      handleSend();\n    }\n  };\n\n  // Handle send\n  const handleSend = () => {\n    const hasText = input.trim().length > 0;\n    const hasAttachments = fileAttachment.hasAttachments;\n\n    if ((!hasText && !hasAttachments) || isStreaming) return;\n\n    // Build message content including attachment info\n    let messageContent = input.trim();\n    if (fileAttachment.attachments.length > 0) {\n      const attachmentNames = fileAttachment.attachments.map(a => a.name).join(', ');\n      messageContent = messageContent\n        ? `${messageContent}\\n\\n[Attached: ${attachmentNames}]`\n        : `[Attached: ${attachmentNames}]`;\n    }\n\n    onSendMessage(messageContent || 'Please analyze the attached files.', selectedMentions);\n    setInput('');\n    setSelectedMentions([]);\n    fileAttachment.clearAttachments();\n  };\n\n  // Handle voice toggle\n  const handleVoiceToggle = () => {\n    if (isRecording) {\n      setIsRecording(false);\n      // Stop recording logic would go here\n    } else {\n      setIsRecording(true);\n      // Start recording logic would go here\n    }\n  };\n\n  // Auto-resize textarea\n  useEffect(() => {\n    if (inputRef.current) {\n      inputRef.current.style.height = 'auto';\n      inputRef.current.style.height = `${Math.min(inputRef.current.scrollHeight, 150)}px`;\n    }\n  }, [input]);\n\n  return (\n    <div\n      className={cn('flex flex-col h-full', className)}\n      style={{\n        background: 'hsl(var(--theme-background))',\n        fontFamily: 'var(--theme-font)',\n      }}\n    >\n      {/* Messages */}\n      <div className=\"flex-1 overflow-y-auto px-4 py-4\">\n        {messages.length === 0 ? (\n          <div className=\"h-full flex flex-col items-center justify-center text-center\">\n            <div className=\"mb-4\">\n              <ClawAIAvatar size={64} isActive={false} />\n            </div>\n            <h3 className=\"text-lg font-semibold mb-2\" style={{ color: 'hsl(var(--theme-foreground))' }}>\n              Start a conversation\n            </h3>\n            <p className=\"text-sm max-w-sm\" style={{ color: 'hsl(var(--theme-muted-foreground))' }}>\n              Ask me to help with code, design, or product work.\n              Use @ to reference projects, PRDs, or tickets.\n            </p>\n          </div>\n        ) : (\n          messages.map((message) => (\n            <MessageBubble key={message.id} message={message} />\n          ))\n        )}\n        <div ref={messagesEndRef} />\n      </div>\n\n      {/* Input Area */}\n      <div\n        className=\"p-4\"\n        style={{ borderTop: '1px solid hsl(var(--theme-border))' }}\n      >\n        {/* Selected mentions preview */}\n        {selectedMentions.length > 0 && (\n          <div className=\"flex flex-wrap gap-1.5 mb-2\">\n            {selectedMentions.map((mention) => (\n              <div\n                key={mention.id}\n                className=\"flex items-center gap-1 px-2 py-1 rounded-md\"\n                style={{ background: 'hsl(var(--theme-muted))' }}\n              >\n                <EntityPreview entity={mention} />\n                <button\n                  onClick={() => setSelectedMentions((prev) => prev.filter((m) => m.id !== mention.id))}\n                  className=\"p-0.5 rounded transition-colors\"\n                  style={{ color: 'hsl(var(--theme-muted-foreground))' }}\n                  onMouseEnter={(e) => e.currentTarget.style.background = 'hsl(var(--theme-muted-foreground) / 0.2)'}\n                  onMouseLeave={(e) => e.currentTarget.style.background = 'transparent'}\n                >\n                  <X className=\"w-3 h-3\" />\n                </button>\n              </div>\n            ))}\n          </div>\n        )}\n\n        {/* Hidden file input */}\n        <input\n          ref={fileAttachment.fileInputRef}\n          type=\"file\"\n          accept={fileAttachment.acceptedTypesString}\n          multiple\n          onChange={fileAttachment.handleFileInputChange}\n          className=\"hidden\"\n        />\n\n        {/* Attachment preview */}\n        <AnimatePresence>\n          {fileAttachment.hasAttachments && (\n            <motion.div\n              initial={{ opacity: 0, height: 0 }}\n              animate={{ opacity: 1, height: 'auto' }}\n              exit={{ opacity: 0, height: 0 }}\n              className=\"mb-2\"\n            >\n              <div\n                className=\"flex flex-wrap gap-2 p-2 rounded-lg\"\n                style={{\n                  background: 'hsl(var(--theme-muted) / 0.5)',\n                  border: '1px solid hsl(var(--theme-border) / 0.5)',\n                }}\n              >\n                {fileAttachment.attachments.map((attachment) => {\n                  const FileIcon = attachment.type.startsWith('image/') ? ImageIcon\n                    : attachment.type === 'application/pdf' || attachment.type.startsWith('text/') ? FileText\n                    : File;\n\n                  return (\n                    <div key={attachment.id} className=\"relative group\">\n                      {attachment.preview ? (\n                        <div className=\"relative w-16 h-16 rounded-lg overflow-hidden\">\n                          <img\n                            src={attachment.preview}\n                            alt={attachment.name}\n                            className=\"w-full h-full object-cover\"\n                          />\n                          <div className=\"absolute inset-0 bg-black/40 opacity-0 group-hover:opacity-100 transition-opacity\" />\n                        </div>\n                      ) : (\n                        <div\n                          className=\"w-16 h-16 rounded-lg flex flex-col items-center justify-center gap-1 p-1\"\n                          style={{ background: 'hsl(var(--theme-muted))' }}\n                        >\n                          <FileIcon className=\"w-5 h-5\" style={{ color: 'hsl(var(--theme-primary))' }} />\n                          <span\n                            className=\"text-[9px] truncate w-full text-center\"\n                            style={{ color: 'hsl(var(--theme-muted-foreground))' }}\n                          >\n                            {attachment.name.length > 10 ? `${attachment.name.slice(0, 8)}...` : attachment.name}\n                          </span>\n                        </div>\n                      )}\n\n                      <button\n                        type=\"button\"\n                        onClick={() => fileAttachment.removeAttachment(attachment.id)}\n                        className=\"absolute -top-1 -right-1 w-5 h-5 rounded-full flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity\"\n                        style={{ background: 'hsl(0 84% 60%)', color: 'white' }}\n                        aria-label={`Remove ${attachment.name}`}\n                      >\n                        <X className=\"w-3 h-3\" />\n                      </button>\n                    </div>\n                  );\n                })}\n              </div>\n            </motion.div>\n          )}\n        </AnimatePresence>\n\n        {/* Input container */}\n        <div className=\"relative\">\n          {/* Mention autocomplete */}\n          <AnimatePresence>\n            {showMentions && mentionSuggestions.length > 0 && (\n              <MentionAutocomplete\n                suggestions={mentionSuggestions}\n                selectedIndex={selectedMentionIndex}\n                onSelect={handleMentionSelect}\n              />\n            )}\n          </AnimatePresence>\n\n          {/* Input field */}\n          <div\n            className=\"flex items-end gap-2 rounded-xl p-2\"\n            style={{\n              background: 'hsl(var(--theme-chat-input-bg, var(--theme-muted)))',\n              border: '1px solid hsl(var(--theme-chat-input-border, var(--theme-border)) / 0.5)',\n            }}\n          >\n            {/* Attachment button */}\n            <button\n              onClick={fileAttachment.openFilePicker}\n              disabled={isStreaming}\n              className=\"p-2 rounded-lg transition-colors disabled:opacity-50\"\n              title=\"Attach file\"\n              style={{ color: 'hsl(var(--theme-muted-foreground))' }}\n              onMouseEnter={(e) => e.currentTarget.style.background = 'hsl(var(--theme-background))'}\n              onMouseLeave={(e) => e.currentTarget.style.background = 'transparent'}\n            >\n              <Paperclip className=\"w-5 h-5\" />\n            </button>\n\n            {/* @ mention button */}\n            <button\n              onClick={() => {\n                setInput((prev) => prev + '@');\n                setShowMentions(true);\n                onMentionSearch?.('');\n                inputRef.current?.focus();\n              }}\n              className=\"p-2 rounded-lg transition-colors\"\n              title=\"Add mention\"\n              style={{ color: 'hsl(var(--theme-muted-foreground))' }}\n              onMouseEnter={(e) => e.currentTarget.style.background = 'hsl(var(--theme-background))'}\n              onMouseLeave={(e) => e.currentTarget.style.background = 'transparent'}\n            >\n              <AtSign className=\"w-5 h-5\" />\n            </button>\n\n            {/* Text input */}\n            <textarea\n              ref={inputRef}\n              value={input}\n              onChange={(e) => handleInputChange(e.target.value)}\n              onKeyDown={handleKeyDown}\n              placeholder=\"Ask anything... (@ to mention)\"\n              rows={1}\n              className=\"flex-1 bg-transparent resize-none focus:outline-none text-sm py-2\"\n              style={{\n                maxHeight: '150px',\n                color: 'hsl(var(--theme-chat-input-fg, var(--theme-foreground)))',\n              }}\n            />\n\n            {/* Voice button */}\n            {isVoiceEnabled && (\n              <button\n                onClick={handleVoiceToggle}\n                className=\"p-2 rounded-lg transition-colors\"\n                title={isRecording ? 'Stop recording' : 'Voice input'}\n                style={{\n                  background: isRecording ? 'hsl(0 84% 60% / 0.2)' : 'transparent',\n                  color: isRecording ? 'hsl(0 84% 60%)' : 'hsl(var(--theme-muted-foreground))',\n                }}\n                onMouseEnter={(e) => {\n                  if (!isRecording) e.currentTarget.style.background = 'hsl(var(--theme-background))';\n                }}\n                onMouseLeave={(e) => {\n                  if (!isRecording) e.currentTarget.style.background = 'transparent';\n                }}\n              >\n                {isRecording ? (\n                  <MicOff className=\"w-5 h-5\" />\n                ) : (\n                  <Mic className=\"w-5 h-5\" />\n                )}\n              </button>\n            )}\n\n            {/* Send / Stop button */}\n            {isStreaming ? (\n              <button\n                onClick={onAbort}\n                className=\"p-2 rounded-lg transition-colors\"\n                title=\"Stop generating\"\n                style={{\n                  background: 'hsl(0 84% 60% / 0.2)',\n                  color: 'hsl(0 84% 60%)',\n                }}\n                onMouseEnter={(e) => e.currentTarget.style.background = 'hsl(0 84% 60% / 0.3)'}\n                onMouseLeave={(e) => e.currentTarget.style.background = 'hsl(0 84% 60% / 0.2)'}\n              >\n                <StopCircle className=\"w-5 h-5\" />\n              </button>\n            ) : (\n              <button\n                onClick={handleSend}\n                disabled={!input.trim() && !fileAttachment.hasAttachments}\n                className=\"p-2 rounded-lg transition-colors\"\n                title=\"Send message\"\n                style={{\n                  background: (input.trim() || fileAttachment.hasAttachments)\n                    ? 'hsl(var(--theme-chat-send-bg, var(--theme-primary)))'\n                    : 'hsl(var(--theme-chat-send-disabled-bg, var(--theme-muted-foreground) / 0.2))',\n                  color: (input.trim() || fileAttachment.hasAttachments)\n                    ? 'hsl(var(--theme-chat-send-fg, var(--theme-primary-foreground)))'\n                    : 'hsl(var(--theme-chat-send-disabled-fg, var(--theme-muted-foreground)))',\n                  cursor: (input.trim() || fileAttachment.hasAttachments) ? 'pointer' : 'not-allowed',\n                }}\n              >\n                <Send className=\"w-5 h-5\" />\n              </button>\n            )}\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n}\n\nexport default AgentChat;\n","'use client';\n\nimport { useState, useEffect, useCallback } from 'react';\nimport { motion, AnimatePresence } from 'framer-motion';\nimport { Github, X, Shield, Code2, Terminal, AlertTriangle, ExternalLink } from 'lucide-react';\nimport { useUser } from '@clerk/nextjs';\n\n// Check at module load time if Clerk is configured\nconst CLERK_CONFIGURED = typeof window !== 'undefined' &&\n  typeof process !== 'undefined' &&\n  !!process.env.NEXT_PUBLIC_CLERK_PUBLISHABLE_KEY;\n\ninterface GitHubAuthModalProps {\n  isOpen: boolean;\n  onClose: () => void;\n  onAuthenticated?: () => void;\n  errorMessage?: string;\n}\n\n/**\n * GitHubAuthModal - Prompts owner to authenticate via GitHub when sandbox auth fails\n *\n * This appears when:\n * - Sandbox returns \"Authentication required\" error\n * - Any GitHub OAuth related error occurs\n * - Only shown to the owner (verified via Clerk)\n *\n * If already signed in, directs user to connect GitHub in settings.\n * If not signed in, shows SignIn button.\n */\nexport function GitHubAuthModal({\n  isOpen,\n  onClose,\n  onAuthenticated,\n  errorMessage,\n}: GitHubAuthModalProps) {\n  const { user, isSignedIn } = useUser();\n  const [isHovering, setIsHovering] = useState(false);\n  const [SignInButtonComponent, setSignInButtonComponent] = useState<\n    React.ComponentType<{ mode: string; children: React.ReactNode }> | null\n  >(null);\n\n  // Check if user has GitHub connected\n  const hasGitHub = user?.externalAccounts?.some(\n    (account) => account.provider === 'github'\n  );\n\n  // Dynamically load Clerk SignInButton\n  useEffect(() => {\n    if (!CLERK_CONFIGURED || isSignedIn) {\n      return;\n    }\n\n    let isMounted = true;\n\n    const loadClerk = async () => {\n      try {\n        const clerk = await import('@clerk/nextjs');\n        if (isMounted) {\n          setSignInButtonComponent(\n            () => clerk.SignInButton as React.ComponentType<{ mode: string; children: React.ReactNode }>\n          );\n        }\n      } catch {\n        // Clerk failed to load\n      }\n    };\n\n    loadClerk();\n\n    return () => {\n      isMounted = false;\n    };\n  }, [isSignedIn]);\n\n  // Handle connecting GitHub for signed-in users\n  const handleConnectGitHub = useCallback(() => {\n    // Redirect to integrations settings page\n    window.location.href = '/settings/integrations';\n  }, []);\n\n  // If Clerk isn't configured, allow bypass\n  if (!CLERK_CONFIGURED && isOpen) {\n    onAuthenticated?.();\n    onClose();\n    return null;\n  }\n\n  return (\n    <AnimatePresence>\n      {isOpen && (\n        <>\n          {/* Backdrop */}\n          <motion.div\n            initial={{ opacity: 0 }}\n            animate={{ opacity: 1 }}\n            exit={{ opacity: 0 }}\n            className=\"fixed inset-0 z-50 bg-black/80 backdrop-blur-sm\"\n            onClick={onClose}\n          />\n\n          {/* Modal */}\n          <motion.div\n            initial={{ opacity: 0, scale: 0.95, y: 20 }}\n            animate={{ opacity: 1, scale: 1, y: 0 }}\n            exit={{ opacity: 0, scale: 0.95, y: 20 }}\n            transition={{ type: 'spring', stiffness: 300, damping: 30 }}\n            className=\"fixed inset-0 z-50 flex items-center justify-center p-4\"\n            onClick={(e) => e.stopPropagation()}\n          >\n            <div className=\"w-full max-w-md bg-gradient-to-b from-neutral-900 to-black rounded-3xl border border-white/10 overflow-hidden shadow-2xl\">\n              {/* Close button */}\n              <button\n                onClick={onClose}\n                className=\"absolute top-4 right-4 p-2 text-white/40 hover:text-white/80 transition-colors rounded-full hover:bg-white/5\"\n              >\n                <X className=\"w-5 h-5\" />\n              </button>\n\n              {/* Header */}\n              <div className=\"px-6 pt-8 pb-6 text-center\">\n                {/* Animated Orb */}\n                <motion.div\n                  className=\"w-20 h-20 mx-auto mb-4 relative\"\n                  animate={{\n                    boxShadow: isHovering\n                      ? [\n                          '0 0 30px rgba(34, 197, 94, 0.5)',\n                          '0 0 50px rgba(34, 197, 94, 0.7)',\n                          '0 0 30px rgba(34, 197, 94, 0.5)',\n                        ]\n                      : [\n                          '0 0 20px rgba(34, 197, 94, 0.3)',\n                          '0 0 30px rgba(34, 197, 94, 0.4)',\n                          '0 0 20px rgba(34, 197, 94, 0.3)',\n                        ],\n                  }}\n                  transition={{ duration: 2, repeat: Infinity }}\n                  style={{ borderRadius: '50%' }}\n                >\n                  <div className=\"w-full h-full rounded-full bg-gradient-to-br from-green-400 to-green-600 flex items-center justify-center\">\n                    <Github className=\"w-8 h-8 text-white\" />\n                  </div>\n                </motion.div>\n\n                {/* Error indicator */}\n                {errorMessage && (\n                  <div className=\"flex items-center justify-center gap-2 mb-4 px-3 py-2 rounded-lg bg-red-500/10 border border-red-500/20\">\n                    <AlertTriangle className=\"w-4 h-4 text-red-400\" />\n                    <span className=\"text-sm text-red-300\">{errorMessage}</span>\n                  </div>\n                )}\n\n                {/* Message */}\n                <h2 className=\"text-xl font-bold text-white mb-2\">\n                  GitHub Authentication Required\n                </h2>\n                <p className=\"text-white/50 text-sm leading-relaxed\">\n                  {isSignedIn && !hasGitHub\n                    ? 'Connect your GitHub account to enable sandbox features.'\n                    : 'To use the sandbox environment, you need to authenticate with GitHub. This enables secure code execution and repository access.'}\n                </p>\n              </div>\n\n              {/* Features */}\n              <div className=\"px-6 pb-6\">\n                <div className=\"bg-white/5 rounded-2xl p-4 space-y-3\">\n                  <div className=\"flex items-center gap-3 text-sm\">\n                    <div className=\"w-8 h-8 rounded-lg bg-white/10 flex items-center justify-center\">\n                      <Shield className=\"w-4 h-4 text-white/60\" />\n                    </div>\n                    <div>\n                      <p className=\"text-white/80\">Secure Sandbox Access</p>\n                      <p className=\"text-white/40 text-xs\">Run code in isolated cloud environments</p>\n                    </div>\n                  </div>\n                  <div className=\"flex items-center gap-3 text-sm\">\n                    <div className=\"w-8 h-8 rounded-lg bg-white/10 flex items-center justify-center\">\n                      <Code2 className=\"w-4 h-4 text-white/60\" />\n                    </div>\n                    <div>\n                      <p className=\"text-white/80\">Repository Integration</p>\n                      <p className=\"text-white/40 text-xs\">Clone, commit, and push to your repos</p>\n                    </div>\n                  </div>\n                  <div className=\"flex items-center gap-3 text-sm\">\n                    <div className=\"w-8 h-8 rounded-lg bg-white/10 flex items-center justify-center\">\n                      <Terminal className=\"w-4 h-4 text-white/60\" />\n                    </div>\n                    <div>\n                      <p className=\"text-white/80\">Full Terminal Access</p>\n                      <p className=\"text-white/40 text-xs\">Run commands and build projects</p>\n                    </div>\n                  </div>\n                </div>\n              </div>\n\n              {/* Action Button */}\n              <div className=\"px-6 pb-8\">\n                {isSignedIn ? (\n                  // User is signed in - direct to connect GitHub\n                  <button\n                    onClick={handleConnectGitHub}\n                    onMouseEnter={() => setIsHovering(true)}\n                    onMouseLeave={() => setIsHovering(false)}\n                    className=\"w-full flex items-center justify-center gap-3 px-6 py-4 rounded-2xl bg-gradient-to-r from-green-500 to-green-600 hover:from-green-400 hover:to-green-500 text-white font-semibold transition-all shadow-lg shadow-green-500/25\"\n                  >\n                    <Github className=\"w-5 h-5\" />\n                    <span>Connect GitHub Account</span>\n                    <ExternalLink className=\"w-4 h-4 opacity-60\" />\n                  </button>\n                ) : SignInButtonComponent ? (\n                  <SignInButtonComponent mode=\"modal\">\n                    <button\n                      onMouseEnter={() => setIsHovering(true)}\n                      onMouseLeave={() => setIsHovering(false)}\n                      className=\"w-full flex items-center justify-center gap-3 px-6 py-4 rounded-2xl bg-gradient-to-r from-green-500 to-green-600 hover:from-green-400 hover:to-green-500 text-white font-semibold transition-all shadow-lg shadow-green-500/25\"\n                    >\n                      <Github className=\"w-5 h-5\" />\n                      <span>Sign in with GitHub</span>\n                    </button>\n                  </SignInButtonComponent>\n                ) : (\n                  <button\n                    onClick={() => {\n                      onAuthenticated?.();\n                      onClose();\n                    }}\n                    className=\"w-full flex items-center justify-center gap-3 px-6 py-4 rounded-2xl bg-gradient-to-r from-green-500 to-green-600 hover:from-green-400 hover:to-green-500 text-white font-semibold transition-all shadow-lg shadow-green-500/25\"\n                  >\n                    <Github className=\"w-5 h-5\" />\n                    <span>Continue</span>\n                  </button>\n                )}\n\n                <p className=\"text-center text-white/30 text-xs mt-4\">\n                  {isSignedIn\n                    ? 'You\\'ll be redirected to connect your GitHub account'\n                    : 'Authentication is required for sandbox operations'}\n                </p>\n              </div>\n\n              {/* Cancel option */}\n              <div className=\"px-6 pb-6 text-center\">\n                <button\n                  onClick={onClose}\n                  className=\"text-white/40 hover:text-white/60 text-sm transition-colors\"\n                >\n                  Cancel and go back\n                </button>\n              </div>\n            </div>\n          </motion.div>\n        </>\n      )}\n    </AnimatePresence>\n  );\n}\n\nexport default GitHubAuthModal;\n","'use client';\n\nimport { useState, useEffect, useRef, useCallback } from 'react';\nimport { motion } from 'framer-motion';\nimport { Heart, ArrowLeft, Sparkles, Github, Volume2, VolumeX, Copy, Check, Database } from 'lucide-react';\nimport Link from 'next/link';\nimport Image from 'next/image';\nimport { SignInButton, SignedOut } from '@clerk/nextjs';\n\ninterface AgentAccessRestrictedProps {\n  isLoading?: boolean;\n  isSignedIn?: boolean;\n  clerkId?: string;\n  userEmail?: string;\n}\n\n// James's warm rejection messages\nconst JAMES_MESSAGES = [\n  \"Ah, here's the thing...\",\n  \"I'd love to let you into the workshop, truly I would. But this particular room is where I keep all the sharp tools and live wires.\",\n  \"The ∞gent can execute code, push to repos, and deploy to production. So I keep it locked up tight. Nothing personal, just being a responsible host.\",\n];\n\n// Full message for TTS (all messages combined)\nconst JAMES_FULL_MESSAGE = JAMES_MESSAGES.join(' ');\n\n// Try Eleven Labs first, fall back to OpenAI (same pattern as VoiceScreen)\nasync function generateSpeech(text: string): Promise<Blob> {\n  // Try Eleven Labs first\n  try {\n    const elevenLabsRes = await fetch('/api/tts/elevenlabs', {\n      method: 'POST',\n      headers: { 'Content-Type': 'application/json' },\n      body: JSON.stringify({\n        text,\n        stability: 0.5,\n        similarityBoost: 0.75,\n      }),\n    });\n\n    if (elevenLabsRes.ok) {\n      const blob = await elevenLabsRes.blob();\n      if (blob.size > 0) {\n        console.log('[AgentAccessRestricted] Using Eleven Labs TTS');\n        return blob;\n      }\n    }\n\n    // Check if we should fallback\n    const errorJson = await elevenLabsRes.json().catch(() => null);\n    if (errorJson?.fallback !== 'openai') {\n      throw new Error('Eleven Labs failed without fallback');\n    }\n  } catch (e) {\n    console.log('[AgentAccessRestricted] Eleven Labs unavailable, trying OpenAI:', e);\n  }\n\n  // Fallback to OpenAI\n  console.log('[AgentAccessRestricted] Using OpenAI TTS fallback');\n  const openaiRes = await fetch('/api/tts', {\n    method: 'POST',\n    headers: { 'Content-Type': 'application/json' },\n    body: JSON.stringify({\n      text,\n      voice: 'onyx', // Warm male voice\n      model: 'tts-1-hd',\n      speed: 1.0,\n    }),\n  });\n\n  if (!openaiRes.ok) {\n    throw new Error('Both TTS services failed');\n  }\n\n  return openaiRes.blob();\n}\n\n/**\n * AgentAccessRestricted - Claw AI gracefully declines access to non-owners\n *\n * The agent/sandbox feature is owner-only for security reasons:\n * - It can execute arbitrary code\n * - It has access to GitHub repositories\n * - It can deploy to Vercel\n *\n * But we do it with warmth and charm, as James would.\n */\nexport function AgentAccessRestricted({ isLoading, isSignedIn, clerkId, userEmail }: AgentAccessRestrictedProps) {\n  // Typewriter state (must be before any early returns - hooks rule)\n  const [currentMessageIndex, setCurrentMessageIndex] = useState(0);\n  const [displayedText, setDisplayedText] = useState('');\n  const [isTyping, setIsTyping] = useState(true);\n  const [showActions, setShowActions] = useState(false);\n  const [copied, setCopied] = useState(false);\n\n  // Audio state\n  const [isPlaying, setIsPlaying] = useState(false);\n  const [isMuted, setIsMuted] = useState(false);\n  const audioRef = useRef<HTMLAudioElement | null>(null);\n  const hasStartedAudio = useRef(false);\n\n  // Copy Clerk ID to clipboard\n  const copyClerkId = useCallback(() => {\n    if (clerkId) {\n      navigator.clipboard.writeText(clerkId);\n      setCopied(true);\n      setTimeout(() => setCopied(false), 2000);\n    }\n  }, [clerkId]);\n\n  // Cache key for the audio (static message, so we can cache it forever)\n  const AUDIO_CACHE_KEY = 'james_restricted_audio_v1';\n\n  // Generate and play TTS audio when component mounts (not loading)\n  // Uses localStorage cache to avoid regenerating on every visit\n  useEffect(() => {\n    if (isLoading || hasStartedAudio.current) return;\n    hasStartedAudio.current = true;\n\n    const loadAndPlayAudio = async () => {\n      try {\n        let audioUrl: string;\n\n        // Check cache first\n        const cachedAudio = localStorage.getItem(AUDIO_CACHE_KEY);\n        if (cachedAudio) {\n          console.log('[AgentAccessRestricted] Using cached audio');\n          audioUrl = cachedAudio;\n        } else {\n          console.log('[AgentAccessRestricted] Generating speech (will cache)...');\n          const audioBlob = await generateSpeech(JAMES_FULL_MESSAGE);\n\n          // Convert blob to base64 data URL for caching\n          const reader = new FileReader();\n          audioUrl = await new Promise((resolve) => {\n            reader.onloadend = () => resolve(reader.result as string);\n            reader.readAsDataURL(audioBlob);\n          });\n\n          // Cache the audio\n          try {\n            localStorage.setItem(AUDIO_CACHE_KEY, audioUrl);\n            console.log('[AgentAccessRestricted] Audio cached');\n          } catch (storageErr) {\n            console.warn('[AgentAccessRestricted] Could not cache audio:', storageErr);\n          }\n        }\n\n        const audio = new Audio(audioUrl);\n\n        audio.onended = () => {\n          setIsPlaying(false);\n          console.log('[AgentAccessRestricted] Audio ended');\n        };\n\n        audio.onerror = (e) => {\n          console.error('[AgentAccessRestricted] Audio error:', e);\n          setIsPlaying(false);\n          // Clear cache on error in case it's corrupted\n          localStorage.removeItem(AUDIO_CACHE_KEY);\n        };\n\n        audioRef.current = audio;\n\n        // Try to autoplay\n        try {\n          await audio.play();\n          setIsPlaying(true);\n          console.log('[AgentAccessRestricted] Audio playing');\n        } catch (playError) {\n          console.warn('[AgentAccessRestricted] Autoplay blocked:', playError);\n          // User will need to click to play\n        }\n      } catch (err) {\n        console.error('[AgentAccessRestricted] TTS error:', err);\n      }\n    };\n\n    loadAndPlayAudio();\n\n    return () => {\n      if (audioRef.current) {\n        audioRef.current.pause();\n        audioRef.current = null;\n      }\n    };\n  }, [isLoading]);\n\n  // Toggle mute\n  const toggleMute = useCallback(() => {\n    if (audioRef.current) {\n      if (isMuted) {\n        audioRef.current.muted = false;\n        setIsMuted(false);\n      } else {\n        audioRef.current.muted = true;\n        setIsMuted(true);\n      }\n    }\n  }, [isMuted]);\n\n  // Play audio if not already playing (for autoplay blocked scenario)\n  const handlePlayClick = useCallback(async () => {\n    if (audioRef.current && !isPlaying) {\n      try {\n        await audioRef.current.play();\n        setIsPlaying(true);\n      } catch (err) {\n        console.error('[AgentAccessRestricted] Play failed:', err);\n      }\n    }\n  }, [isPlaying]);\n\n  // Typewriter effect - types out each message, then moves to next\n  useEffect(() => {\n    // Don't run typewriter when loading\n    if (isLoading) return;\n\n    if (currentMessageIndex >= JAMES_MESSAGES.length) {\n      setIsTyping(false);\n      // Show actions after all messages are typed\n      const timer = setTimeout(() => setShowActions(true), 500);\n      return () => clearTimeout(timer);\n    }\n\n    const currentMessage = JAMES_MESSAGES[currentMessageIndex];\n    let charIndex = 0;\n    setDisplayedText('');\n    setIsTyping(true);\n\n    const typeInterval = setInterval(() => {\n      if (charIndex < currentMessage.length) {\n        setDisplayedText(currentMessage.slice(0, charIndex + 1));\n        charIndex++;\n      } else {\n        clearInterval(typeInterval);\n        // Pause before next message\n        setTimeout(() => {\n          setCurrentMessageIndex(prev => prev + 1);\n        }, currentMessageIndex === 0 ? 800 : 1200); // Shorter pause after title\n      }\n    }, 30); // 30ms per character, same as onboarding\n\n    return () => clearInterval(typeInterval);\n  }, [currentMessageIndex, isLoading]);\n\n  // Loading state\n  if (isLoading) {\n    return (\n      <div\n        className=\"min-h-screen flex items-center justify-center\"\n        style={{\n          background: 'hsl(var(--theme-background))',\n          color: 'hsl(var(--theme-foreground))',\n        }}\n      >\n        <motion.div\n          initial={{ opacity: 0 }}\n          animate={{ opacity: 1 }}\n          className=\"flex flex-col items-center gap-4\"\n        >\n          {/* James's avatar with gentle pulse */}\n          <motion.div\n            className=\"w-16 h-16 rounded-full overflow-hidden ring-4 ring-[hsl(var(--theme-primary)/0.3)]\"\n            animate={{\n              boxShadow: [\n                '0 0 20px hsl(var(--theme-primary) / 0.2)',\n                '0 0 40px hsl(var(--theme-primary) / 0.4)',\n                '0 0 20px hsl(var(--theme-primary) / 0.2)',\n              ],\n            }}\n            transition={{ duration: 2, repeat: Infinity }}\n          >\n            <Image\n              src=\"/openclaw-logo.png\"\n              alt=\"James\"\n              width={64}\n              height={64}\n              className=\"w-full h-full object-cover\"\n            />\n          </motion.div>\n          <p className=\"text-sm\" style={{ color: 'hsl(var(--theme-muted-foreground))' }}>\n            One moment...\n          </p>\n        </motion.div>\n      </div>\n    );\n  }\n\n  return (\n    <div\n      className=\"min-h-screen flex items-center justify-center p-4\"\n      style={{\n        background: 'hsl(var(--theme-background))',\n        color: 'hsl(var(--theme-foreground))',\n      }}\n    >\n      <motion.div\n        initial={{ opacity: 0, y: 20 }}\n        animate={{ opacity: 1, y: 0 }}\n        transition={{ duration: 0.5 }}\n        className=\"max-w-md w-full text-center\"\n      >\n        {/* James's Avatar with warm glow and speaking indicator */}\n        <div className=\"relative w-24 h-24 mx-auto mb-6\">\n          <motion.div\n            className=\"w-full h-full rounded-full overflow-hidden ring-4 ring-[hsl(var(--theme-primary)/0.3)]\"\n            initial={{ scale: 0.8 }}\n            animate={{\n              scale: 1,\n              boxShadow: isPlaying ? [\n                '0 0 20px hsl(var(--theme-primary) / 0.3)',\n                '0 0 40px hsl(var(--theme-primary) / 0.5)',\n                '0 0 20px hsl(var(--theme-primary) / 0.3)',\n              ] : [\n                '0 0 20px hsl(var(--theme-primary) / 0.2)',\n                '0 0 30px hsl(var(--theme-primary) / 0.3)',\n                '0 0 20px hsl(var(--theme-primary) / 0.2)',\n              ],\n            }}\n            transition={{\n              scale: { type: 'spring', stiffness: 200, delay: 0.1 },\n              boxShadow: { duration: isPlaying ? 1 : 3, repeat: Infinity }\n            }}\n          >\n            <Image\n              src=\"/openclaw-logo.png\"\n              alt=\"James\"\n              width={96}\n              height={96}\n              className=\"w-full h-full object-cover\"\n            />\n          </motion.div>\n\n          {/* Audio control button */}\n          <motion.button\n            onClick={isPlaying ? toggleMute : handlePlayClick}\n            className=\"absolute -bottom-1 -right-1 w-8 h-8 rounded-full flex items-center justify-center transition-colors\"\n            style={{\n              background: 'hsl(var(--theme-primary))',\n              color: 'white',\n            }}\n            whileHover={{ scale: 1.1 }}\n            whileTap={{ scale: 0.95 }}\n            initial={{ opacity: 0, scale: 0 }}\n            animate={{ opacity: 1, scale: 1 }}\n            transition={{ delay: 0.5 }}\n            title={isPlaying ? (isMuted ? 'Unmute' : 'Mute') : 'Play audio'}\n          >\n            {isPlaying ? (\n              isMuted ? <VolumeX className=\"w-4 h-4\" /> : <Volume2 className=\"w-4 h-4\" />\n            ) : (\n              <Volume2 className=\"w-4 h-4\" />\n            )}\n          </motion.button>\n\n          {/* Speaking indicator */}\n          {isPlaying && !isMuted && (\n            <motion.div\n              className=\"absolute -top-1 -right-1 flex gap-0.5\"\n              initial={{ opacity: 0 }}\n              animate={{ opacity: 1 }}\n            >\n              {[0, 0.1, 0.2].map((delay, i) => (\n                <motion.div\n                  key={i}\n                  className=\"w-1 rounded-full\"\n                  style={{ background: 'hsl(var(--theme-primary))' }}\n                  animate={{ height: [4, 12, 4] }}\n                  transition={{ duration: 0.4, repeat: Infinity, delay }}\n                />\n              ))}\n            </motion.div>\n          )}\n        </div>\n\n        {/* Streaming text display */}\n        <div className=\"min-h-[200px] flex flex-col justify-start\">\n          {/* Title (first message) */}\n          {currentMessageIndex >= 0 && (\n            <motion.h1\n              className=\"text-2xl font-bold mb-4\"\n              style={{ color: 'hsl(var(--theme-foreground))' }}\n              initial={{ opacity: 0 }}\n              animate={{ opacity: 1 }}\n            >\n              {currentMessageIndex === 0 ? (\n                <>\n                  {displayedText}\n                  {isTyping && (\n                    <motion.span\n                      animate={{ opacity: [1, 0] }}\n                      transition={{ duration: 0.5, repeat: Infinity }}\n                      className=\"inline-block w-0.5 h-6 bg-current ml-0.5 align-middle\"\n                    />\n                  )}\n                </>\n              ) : (\n                JAMES_MESSAGES[0]\n              )}\n            </motion.h1>\n          )}\n\n          {/* First paragraph */}\n          {currentMessageIndex >= 1 && (\n            <motion.p\n              className=\"text-base mb-4 leading-relaxed\"\n              style={{ color: 'hsl(var(--theme-muted-foreground))' }}\n              initial={{ opacity: 0 }}\n              animate={{ opacity: 1 }}\n            >\n              {currentMessageIndex === 1 ? (\n                <>\n                  {displayedText}\n                  {isTyping && (\n                    <motion.span\n                      animate={{ opacity: [1, 0] }}\n                      transition={{ duration: 0.5, repeat: Infinity }}\n                      className=\"inline-block w-0.5 h-5 bg-current ml-0.5 align-middle\"\n                    />\n                  )}\n                </>\n              ) : (\n                JAMES_MESSAGES[1]\n              )}\n            </motion.p>\n          )}\n\n          {/* Second paragraph */}\n          {currentMessageIndex >= 2 && (\n            <motion.p\n              className=\"text-base mb-6 leading-relaxed\"\n              style={{ color: 'hsl(var(--theme-muted-foreground))' }}\n              initial={{ opacity: 0 }}\n              animate={{ opacity: 1 }}\n            >\n              {currentMessageIndex === 2 ? (\n                <>\n                  {displayedText}\n                  {isTyping && (\n                    <motion.span\n                      animate={{ opacity: [1, 0] }}\n                      transition={{ duration: 0.5, repeat: Infinity }}\n                      className=\"inline-block w-0.5 h-5 bg-current ml-0.5 align-middle\"\n                    />\n                  )}\n                </>\n              ) : (\n                JAMES_MESSAGES[2]\n              )}\n            </motion.p>\n          )}\n        </div>\n\n        {/* Actions - only show after typing completes */}\n        {showActions && (\n          <>\n            {/* If signed in but not in database - show Clerk ID */}\n            {isSignedIn && clerkId ? (\n              <motion.div\n                className=\"mb-6 p-4 rounded-xl text-left\"\n                style={{ background: 'hsl(var(--theme-primary) / 0.1)' }}\n                initial={{ opacity: 0, y: 10 }}\n                animate={{ opacity: 1, y: 0 }}\n                transition={{ delay: 0.05 }}\n              >\n                <div className=\"flex items-center gap-2 mb-3\">\n                  <Database className=\"w-4 h-4\" style={{ color: 'hsl(var(--theme-primary))' }} />\n                  <span className=\"text-sm font-medium\" style={{ color: 'hsl(var(--theme-primary))' }}>\n                    Almost there! Run this in your terminal:\n                  </span>\n                </div>\n                <div className=\"mt-3 p-3 rounded-lg font-mono text-xs overflow-x-auto\" style={{ background: 'hsl(var(--theme-background))' }}>\n                  <code style={{ color: 'hsl(var(--theme-muted-foreground))' }}>\n                    npx convex run userManagement:seedOwner {`'{\"email\":\"${userEmail || 'your@email.com'}\",\"displayName\":\"Your Name\",\"clerkId\":\"${clerkId}\"}'`}\n                  </code>\n                </div>\n                <button\n                  onClick={() => {\n                    const cmd = `npx convex run userManagement:seedOwner '{\"email\":\"${userEmail || 'your@email.com'}\",\"displayName\":\"Your Name\",\"clerkId\":\"${clerkId}\"}'`;\n                    navigator.clipboard.writeText(cmd);\n                    setCopied(true);\n                    setTimeout(() => setCopied(false), 2000);\n                  }}\n                  className=\"mt-3 inline-flex items-center gap-2 px-4 py-2 rounded-lg text-sm font-medium transition-all hover:scale-[1.02]\"\n                  style={{\n                    background: 'hsl(var(--theme-primary))',\n                    color: 'white',\n                  }}\n                >\n                  {copied ? <Check className=\"w-4 h-4\" /> : <Copy className=\"w-4 h-4\" />}\n                  {copied ? 'Copied!' : 'Copy Command'}\n                </button>\n                <p className=\"mt-3 text-xs\" style={{ color: 'hsl(var(--theme-muted-foreground) / 0.7)' }}>\n                  This sets up owner permissions automatically. Refresh after running.\n                </p>\n              </motion.div>\n            ) : (\n              /* Sign in option for the owner */\n              <SignedOut>\n                <motion.div\n                  className=\"mb-6\"\n                  initial={{ opacity: 0, y: 10 }}\n                  animate={{ opacity: 1, y: 0 }}\n                  transition={{ delay: 0.05 }}\n                >\n                  <p\n                    className=\"text-sm mb-3\"\n                    style={{ color: 'hsl(var(--theme-muted-foreground))' }}\n                  >\n                    Wait, are you the owner?\n                  </p>\n                  <SignInButton mode=\"modal\">\n                    <button\n                      className=\"inline-flex items-center gap-2 px-6 py-3 rounded-xl font-medium transition-all hover:scale-[1.02] active:scale-[0.98]\"\n                      style={{\n                        background: 'hsl(142 70% 45%)',\n                        color: 'white',\n                      }}\n                    >\n                      <Github className=\"w-4 h-4\" />\n                      Sign in to prove it\n                    </button>\n                  </SignInButton>\n                </motion.div>\n              </SignedOut>\n            )}\n\n            {/* Divider */}\n            <motion.div\n              className=\"flex items-center gap-4 mb-6\"\n              initial={{ opacity: 0 }}\n              animate={{ opacity: 1 }}\n              transition={{ delay: 0.1 }}\n            >\n              <div className=\"flex-1 h-px\" style={{ background: 'hsl(var(--theme-border))' }} />\n              <span className=\"text-xs\" style={{ color: 'hsl(var(--theme-muted-foreground))' }}>or</span>\n              <div className=\"flex-1 h-px\" style={{ background: 'hsl(var(--theme-border))' }} />\n            </motion.div>\n\n            {/* Friendly note */}\n            <motion.div\n              className=\"flex items-center justify-center gap-2 mb-6 px-4 py-3 rounded-xl\"\n              style={{ background: 'hsl(var(--theme-primary) / 0.1)' }}\n              initial={{ opacity: 0, y: 10 }}\n              animate={{ opacity: 1, y: 0 }}\n              transition={{ delay: 0.15 }}\n            >\n              <Heart className=\"w-4 h-4\" style={{ color: 'hsl(var(--theme-primary))' }} />\n              <span className=\"text-sm\" style={{ color: 'hsl(var(--theme-primary))' }}>\n                Thanks for understanding\n              </span>\n            </motion.div>\n\n            {/* Back Button */}\n            <motion.div\n              initial={{ opacity: 0, y: 10 }}\n              animate={{ opacity: 1, y: 0 }}\n              transition={{ delay: 0.2 }}\n            >\n              <Link href=\"/\">\n                <motion.button\n                  whileHover={{ scale: 1.02 }}\n                  whileTap={{ scale: 0.98 }}\n                  className=\"inline-flex items-center gap-2 px-6 py-3 rounded-xl font-medium transition-colors\"\n                  style={{\n                    background: 'hsl(var(--theme-muted))',\n                    color: 'hsl(var(--theme-foreground))',\n                  }}\n                >\n                  <ArrowLeft className=\"w-4 h-4\" />\n                  Let&apos;s explore something else\n                </motion.button>\n              </Link>\n            </motion.div>\n\n            {/* Gentle suggestion */}\n            <motion.p\n              className=\"text-sm mt-8 flex items-center justify-center gap-2\"\n              style={{ color: 'hsl(var(--theme-muted-foreground) / 0.7)' }}\n              initial={{ opacity: 0 }}\n              animate={{ opacity: 1 }}\n              transition={{ delay: 0.3 }}\n            >\n              <Sparkles className=\"w-3 h-3\" />\n              Plenty of other interesting corners to discover\n              <Sparkles className=\"w-3 h-3\" />\n            </motion.p>\n          </>\n        )}\n      </motion.div>\n    </div>\n  );\n}\n\nexport default AgentAccessRestricted;\n","'use client';\n\nimport { useState, useCallback, useRef } from 'react';\n\n// ============================================================================\n// Types\n// ============================================================================\n\nexport type ToolStatus = 'pending' | 'executing' | 'complete' | 'error' | 'denied';\n\nexport interface ActiveToolCall {\n  id: string;\n  name: string;\n  status: ToolStatus;\n  result?: unknown;\n  error?: string;\n}\n\nexport interface ChatMessage {\n  id: string;\n  role: 'user' | 'assistant' | 'system';\n  content: string;\n  timestamp: Date;\n  isStreaming?: boolean;\n  /** Chain-of-thought reasoning (from local models like Ollama with thinking) */\n  thinking?: string;\n  /** Whether thinking is still being streamed */\n  isThinkingStreaming?: boolean;\n  /** Active tool calls for this message */\n  toolCalls?: ActiveToolCall[];\n}\n\nexport interface UseStreamingChatOptions {\n  /** Model to use (claude, opus, sonnet, default) */\n  model?: string;\n  /** Optional theme context to include in system prompt */\n  themeContext?: string;\n  /** Callback when streaming starts */\n  onStreamStart?: () => void;\n  /** Callback when streaming ends */\n  onStreamEnd?: () => void;\n  /** Callback on error */\n  onError?: (error: Error) => void;\n}\n\nexport interface UseStreamingChatReturn {\n  messages: ChatMessage[];\n  isStreaming: boolean;\n  error: string | null;\n  /** Currently active tool calls (from streaming message) */\n  activeToolCalls: ActiveToolCall[];\n  sendMessage: (content: string) => Promise<void>;\n  clearMessages: () => void;\n  setMessages: React.Dispatch<React.SetStateAction<ChatMessage[]>>;\n  abortStream: () => void;\n}\n\n// ============================================================================\n// Hook\n// ============================================================================\n\nexport function useStreamingChat(\n  options: UseStreamingChatOptions = {}\n): UseStreamingChatReturn {\n  const { model = 'default', themeContext, onStreamStart, onStreamEnd, onError } = options;\n\n  const [messages, setMessages] = useState<ChatMessage[]>([]);\n  const [isStreaming, setIsStreaming] = useState(false);\n  const [error, setError] = useState<string | null>(null);\n  const [activeToolCalls, setActiveToolCalls] = useState<ActiveToolCall[]>([]);\n  const abortControllerRef = useRef<AbortController | null>(null);\n\n  const generateId = () => `msg_${Date.now()}_${Math.random().toString(36).slice(2, 9)}`;\n\n  const sendMessage = useCallback(\n    async (content: string) => {\n      if (!content.trim() || isStreaming) return;\n\n      setError(null);\n\n      // Create user message\n      const userMessage: ChatMessage = {\n        id: generateId(),\n        role: 'user',\n        content: content.trim(),\n        timestamp: new Date(),\n      };\n\n      // Create placeholder for assistant response\n      const assistantMessage: ChatMessage = {\n        id: generateId(),\n        role: 'assistant',\n        content: '',\n        timestamp: new Date(),\n        isStreaming: true,\n        thinking: '',\n        isThinkingStreaming: false,\n      };\n\n      setMessages((prev) => [...prev, userMessage, assistantMessage]);\n      setIsStreaming(true);\n      onStreamStart?.();\n\n      // Create abort controller for this request\n      abortControllerRef.current = new AbortController();\n\n      try {\n        // Prepare messages for API (exclude the placeholder)\n        const apiMessages = [...messages, userMessage].map((m) => ({\n          role: m.role,\n          content: m.content,\n        }));\n\n        const response = await fetch('/api/chat/stream', {\n          method: 'POST',\n          headers: { 'Content-Type': 'application/json' },\n          body: JSON.stringify({\n            messages: apiMessages,\n            model,\n            themeContext,\n          }),\n          signal: abortControllerRef.current.signal,\n        });\n\n        if (!response.ok) {\n          const errorData = await response.json().catch(() => ({}));\n          throw new Error(errorData.error || 'Failed to get response');\n        }\n\n        const reader = response.body?.getReader();\n        if (!reader) {\n          throw new Error('No response body');\n        }\n\n        const decoder = new TextDecoder();\n        let accumulatedContent = '';\n        let accumulatedThinking = '';\n\n        while (true) {\n          const { done, value } = await reader.read();\n          if (done) break;\n\n          const chunk = decoder.decode(value, { stream: true });\n          const lines = chunk.split('\\n');\n\n          for (const line of lines) {\n            if (line.startsWith('data: ')) {\n              const data = line.slice(6);\n              if (data === '[DONE]') continue;\n\n              try {\n                const parsed = JSON.parse(data);\n\n                // Handle content (main response)\n                if (parsed.content) {\n                  accumulatedContent += parsed.content;\n                  // Update the assistant message with accumulated content\n                  setMessages((prev) =>\n                    prev.map((m) =>\n                      m.id === assistantMessage.id\n                        ? { ...m, content: accumulatedContent, isThinkingStreaming: false }\n                        : m\n                    )\n                  );\n                }\n\n                // Handle thinking/reasoning (chain of thought)\n                if (parsed.thinking) {\n                  accumulatedThinking += parsed.thinking;\n                  // Update the assistant message with accumulated thinking\n                  setMessages((prev) =>\n                    prev.map((m) =>\n                      m.id === assistantMessage.id\n                        ? { ...m, thinking: accumulatedThinking, isThinkingStreaming: true }\n                        : m\n                    )\n                  );\n                }\n\n                // Handle tool call start\n                if (parsed.toolCall) {\n                  const { id, name, status } = parsed.toolCall;\n                  setActiveToolCalls((prev) => {\n                    const existing = prev.find((tc) => tc.id === id);\n                    if (existing) {\n                      return prev.map((tc) =>\n                        tc.id === id ? { ...tc, status: status as ToolStatus } : tc\n                      );\n                    }\n                    return [...prev, { id, name, status: status as ToolStatus }];\n                  });\n                }\n\n                // Handle tool result\n                if (parsed.toolResult) {\n                  const { id, name, result } = parsed.toolResult;\n                  setActiveToolCalls((prev) =>\n                    prev.map((tc) =>\n                      tc.id === id ? { ...tc, status: 'complete' as ToolStatus, result } : tc\n                    )\n                  );\n                }\n\n                // Handle tool error\n                if (parsed.toolError) {\n                  const { id, error: toolError } = parsed.toolError;\n                  setActiveToolCalls((prev) =>\n                    prev.map((tc) =>\n                      tc.id === id ? { ...tc, status: 'error' as ToolStatus, error: toolError } : tc\n                    )\n                  );\n                }\n\n                // Handle tool denied (access control)\n                if (parsed.toolDenied) {\n                  const { name, reason } = parsed.toolDenied;\n                  const deniedId = `denied_${Date.now()}`;\n                  setActiveToolCalls((prev) => [\n                    ...prev,\n                    { id: deniedId, name, status: 'denied' as ToolStatus, error: reason },\n                  ]);\n                }\n              } catch {\n                // Skip invalid JSON\n              }\n            }\n          }\n        }\n\n        // Mark streaming as complete and attach tool calls to message\n        setActiveToolCalls((currentTools) => {\n          // Capture final tools before clearing\n          setMessages((prev) =>\n            prev.map((m) =>\n              m.id === assistantMessage.id\n                ? {\n                    ...m,\n                    isStreaming: false,\n                    isThinkingStreaming: false,\n                    toolCalls: currentTools.length > 0 ? [...currentTools] : undefined,\n                  }\n                : m\n            )\n          );\n          return []; // Clear active tool calls\n        });\n      } catch (err) {\n        if (err instanceof Error && err.name === 'AbortError') {\n          // Request was aborted, just mark streaming as complete\n          setMessages((prev) =>\n            prev.map((m) =>\n              m.id === assistantMessage.id\n                ? { ...m, isStreaming: false, content: m.content || 'Request cancelled.' }\n                : m\n            )\n          );\n        } else {\n          const errorMessage = err instanceof Error ? err.message : 'Unknown error';\n          setError(errorMessage);\n          onError?.(err instanceof Error ? err : new Error(errorMessage));\n\n          // Update the assistant message with error\n          setMessages((prev) =>\n            prev.map((m) =>\n              m.id === assistantMessage.id\n                ? {\n                    ...m,\n                    isStreaming: false,\n                    content: `Sorry, I encountered an error: ${errorMessage}. Please try again.`,\n                  }\n                : m\n            )\n          );\n        }\n      } finally {\n        setIsStreaming(false);\n        abortControllerRef.current = null;\n        onStreamEnd?.();\n      }\n    },\n    [messages, isStreaming, model, themeContext, onStreamStart, onStreamEnd, onError]\n  );\n\n  const clearMessages = useCallback(() => {\n    setMessages([]);\n    setError(null);\n    setActiveToolCalls([]);\n  }, []);\n\n  const abortStream = useCallback(() => {\n    if (abortControllerRef.current) {\n      abortControllerRef.current.abort();\n    }\n  }, []);\n\n  return {\n    messages,\n    isStreaming,\n    error,\n    activeToolCalls,\n    sendMessage,\n    clearMessages,\n    setMessages,\n    abortStream,\n  };\n}\n\nexport default useStreamingChat;\n","'use client';\n\nimport { useCallback, useState, useRef, useEffect } from 'react';\nimport { useSandboxContext, type LogEntry } from '@/contexts/SandboxContext';\nimport type { ToolAction } from '@/lib/claw-ai/tools';\nimport type { FileInfo, CommandState } from '@/lib/sandbox';\n\n// =============================================================================\n// Types\n// =============================================================================\n\nexport interface SandboxFile {\n  path: string;\n  content?: string;\n  language?: string;\n}\n\nexport interface AgentSandboxState {\n  // Sandbox status\n  isConnected: boolean;\n  isCreating: boolean;\n  sandboxId: string | null;\n  previewUrl: string | null;\n  error: string | null;\n\n  // Files\n  files: FileInfo[];\n  currentFile: SandboxFile | null;\n\n  // Terminal\n  terminalOutput: TerminalLine[];\n  isRunning: boolean;\n\n  // Git\n  gitStatus: GitStatus | null;\n}\n\nexport interface TerminalLine {\n  id: string;\n  type: 'command' | 'output' | 'error' | 'system';\n  content: string;\n  timestamp: number;\n}\n\nexport interface GitStatus {\n  branch: string;\n  modified: string[];\n  staged: string[];\n  untracked: string[];\n}\n\nexport interface UseAgentSandboxReturn extends AgentSandboxState {\n  // Sandbox lifecycle\n  startSandbox: () => Promise<void>;\n  stopSandbox: () => Promise<void>;\n\n  // Execute tool actions from AI\n  executeToolAction: (action: ToolAction) => Promise<void>;\n\n  // Manual operations\n  cloneRepository: (url: string, branch?: string) => Promise<void>;\n  readFile: (path: string) => Promise<string>;\n  writeFile: (path: string, content: string) => Promise<void>;\n  runCommand: (command: string) => Promise<CommandState>;\n  startDevServer: (command?: string, port?: number) => Promise<string>;\n  refreshFiles: () => Promise<void>;\n\n  // Logs\n  logs: LogEntry[];\n  clearLogs: () => void;\n}\n\n// =============================================================================\n// Helper: Detect language from file path\n// =============================================================================\n\nfunction detectLanguage(path: string): string {\n  const ext = path.split('.').pop()?.toLowerCase();\n  const langMap: Record<string, string> = {\n    ts: 'typescript',\n    tsx: 'typescript',\n    js: 'javascript',\n    jsx: 'javascript',\n    json: 'json',\n    md: 'markdown',\n    mdx: 'markdown',\n    css: 'css',\n    scss: 'scss',\n    html: 'html',\n    py: 'python',\n    rs: 'rust',\n    go: 'go',\n    sh: 'shell',\n    bash: 'shell',\n    yml: 'yaml',\n    yaml: 'yaml',\n    toml: 'toml',\n    sql: 'sql',\n  };\n  return langMap[ext || ''] || 'plaintext';\n}\n\n// =============================================================================\n// Hook\n// =============================================================================\n\nexport function useAgentSandbox(): UseAgentSandboxReturn {\n  const sandbox = useSandboxContext();\n\n  // Local state\n  const [currentFile, setCurrentFile] = useState<SandboxFile | null>(null);\n  const [terminalOutput, setTerminalOutput] = useState<TerminalLine[]>([]);\n  const [isRunning, setIsRunning] = useState(false);\n  const [gitStatus, setGitStatus] = useState<GitStatus | null>(null);\n\n  // Terminal output helper\n  const addTerminalLine = useCallback(\n    (type: TerminalLine['type'], content: string) => {\n      setTerminalOutput((prev) => [\n        ...prev,\n        {\n          id: `term_${Date.now()}_${Math.random().toString(36).slice(2)}`,\n          type,\n          content,\n          timestamp: Date.now(),\n        },\n      ]);\n    },\n    []\n  );\n\n  // Start sandbox\n  const startSandbox = useCallback(async () => {\n    try {\n      addTerminalLine('system', 'Starting sandbox environment...');\n      await sandbox.create({ timeout: 600000, ports: [3000, 5173, 8080] });\n      await sandbox.listFiles('.');\n      addTerminalLine('system', 'Sandbox ready!');\n    } catch (error) {\n      // Don't re-throw - let the error be handled by the auth modal detection\n      // The error is already in sandbox.error and terminal output\n      addTerminalLine('error', `Failed to start sandbox: ${error}`);\n    }\n  }, [sandbox, addTerminalLine]);\n\n  // Stop sandbox\n  const stopSandbox = useCallback(async () => {\n    try {\n      addTerminalLine('system', 'Terminating sandbox...');\n      await sandbox.terminate();\n      setCurrentFile(null);\n      setGitStatus(null);\n      addTerminalLine('system', 'Sandbox terminated');\n    } catch (error) {\n      addTerminalLine('error', `Failed to stop sandbox: ${error}`);\n    }\n  }, [sandbox, addTerminalLine]);\n\n  // Clone repository (uses GitHub auth from Clerk for private repos)\n  const cloneRepository = useCallback(\n    async (url: string, _branch?: string) => {\n      if (!sandbox.isConnected) {\n        await startSandbox();\n      }\n\n      addTerminalLine('command', `git clone ${url} (authenticated via GitHub)`);\n      setIsRunning(true);\n\n      try {\n        // Use the server-side cloneRepo which handles GitHub auth\n        const result = await sandbox.cloneRepo(url);\n\n        if (result.success) {\n          addTerminalLine('system', `Repository cloned to ${result.projectDir}`);\n          // Refresh file list\n          await sandbox.listFiles(result.projectDir || './project');\n        } else {\n          addTerminalLine('error', result.error || 'Failed to clone repository');\n        }\n      } catch (error) {\n        addTerminalLine('error', `Clone failed: ${error}`);\n      } finally {\n        setIsRunning(false);\n      }\n    },\n    [sandbox, startSandbox, addTerminalLine]\n  );\n\n  // Read file\n  const readFile = useCallback(\n    async (path: string): Promise<string> => {\n      const content = await sandbox.readFile(path);\n      setCurrentFile({\n        path,\n        content,\n        language: detectLanguage(path),\n      });\n      return content;\n    },\n    [sandbox]\n  );\n\n  // Write file\n  const writeFile = useCallback(\n    async (path: string, content: string) => {\n      await sandbox.writeFile(path, content);\n      addTerminalLine('system', `Wrote file: ${path}`);\n\n      // Update current file if it's the same\n      if (currentFile?.path === path) {\n        setCurrentFile({ ...currentFile, content });\n      }\n    },\n    [sandbox, currentFile, addTerminalLine]\n  );\n\n  // Run command\n  const runCommand = useCallback(\n    async (command: string) => {\n      addTerminalLine('command', `$ ${command}`);\n      setIsRunning(true);\n\n      try {\n        // Intercept git clone commands to use authenticated cloning\n        const gitCloneMatch = command.match(/^git\\s+clone\\s+(\\S+)(?:\\s+(\\S+))?$/i);\n        if (gitCloneMatch) {\n          const repoUrl = gitCloneMatch[1];\n          addTerminalLine('system', 'Using authenticated clone...');\n          addTerminalLine('system', `Fetching GitHub token and cloning ${repoUrl}...`);\n\n          try {\n            const cloneResult = await sandbox.cloneRepo(repoUrl);\n            console.log('[Clone] Result:', cloneResult);\n\n            if (cloneResult.success) {\n              addTerminalLine('output', `✓ Cloned successfully to ${cloneResult.projectDir}`);\n              addTerminalLine('system', 'Refreshing file list...');\n              // Refresh file list after clone\n              await sandbox.listFiles(cloneResult.projectDir);\n              addTerminalLine('output', 'Ready! Use \"ls\" to see files.');\n            } else {\n              addTerminalLine('error', `✗ Clone failed: ${cloneResult.error || 'Unknown error'}`);\n            }\n            // Return a CommandState-compatible object\n            return {\n              cmdId: `cmd_clone_${Date.now()}`,\n              command: 'git',\n              args: ['clone', repoUrl],\n              status: (cloneResult.success ? 'completed' : 'error') as 'completed' | 'error',\n              startedAt: Date.now(),\n              exitCode: cloneResult.success ? 0 : 1,\n              stdout: cloneResult.success ? `Cloned to ${cloneResult.projectDir}` : '',\n              stderr: cloneResult.error || '',\n            };\n          } catch (cloneError) {\n            console.error('[Clone] Error:', cloneError);\n            const errorMsg = cloneError instanceof Error ? cloneError.message : 'Clone failed';\n            addTerminalLine('error', `✗ ${errorMsg}`);\n            return {\n              cmdId: `cmd_clone_${Date.now()}`,\n              command: 'git',\n              args: ['clone', repoUrl],\n              status: 'error' as const,\n              startedAt: Date.now(),\n              exitCode: 1,\n              stdout: '',\n              stderr: errorMsg,\n            };\n          }\n        }\n\n        // Parse command and args\n        const parts = command.split(' ');\n        const cmd = parts[0];\n        const args = parts.slice(1);\n\n        const result = await sandbox.runCommand(cmd, args);\n\n        if (result.stdout) addTerminalLine('output', result.stdout);\n        if (result.stderr) addTerminalLine('error', result.stderr);\n\n        return result;\n      } finally {\n        setIsRunning(false);\n      }\n    },\n    [sandbox, addTerminalLine]\n  );\n\n  // Start dev server\n  const startDevServer = useCallback(\n    async (command: string = 'npm run dev', port: number = 3000): Promise<string> => {\n      addTerminalLine('command', `$ ${command}`);\n      setIsRunning(true);\n\n      try {\n        // Run dev command (don't wait for completion as it's a long-running process)\n        const parts = command.split(' ');\n        await sandbox.runCommand(parts[0], parts.slice(1), { wait: false });\n\n        // Wait a moment for server to start\n        await new Promise((resolve) => setTimeout(resolve, 3000));\n\n        // Get preview URL\n        const url = await sandbox.getPreviewUrl(port);\n        addTerminalLine('system', `Dev server started at ${url}`);\n        return url;\n      } finally {\n        setIsRunning(false);\n      }\n    },\n    [sandbox, addTerminalLine]\n  );\n\n  // Refresh files\n  const refreshFiles = useCallback(async () => {\n    if (sandbox.isConnected) {\n      await sandbox.listFiles();\n    }\n  }, [sandbox]);\n\n  // Execute tool action from AI\n  const executeToolAction = useCallback(\n    async (action: ToolAction) => {\n      const { type, payload } = action;\n\n      switch (type) {\n        case 'repo_cloned': {\n          const { url, branch } = payload as { url: string; branch?: string };\n          await cloneRepository(url, branch);\n          break;\n        }\n\n        case 'file_read': {\n          const { path } = payload as { path: string };\n          await readFile(path);\n          break;\n        }\n\n        case 'file_written': {\n          const { path, content } = payload as { path: string; content: string };\n          await writeFile(path, content);\n          break;\n        }\n\n        case 'command_executed': {\n          const { command } = payload as { command: string };\n          await runCommand(command);\n          break;\n        }\n\n        case 'server_started': {\n          const { command, port } = payload as { command?: string; port?: number };\n          await startDevServer(command, port);\n          break;\n        }\n\n        case 'preview_ready': {\n          const { port } = payload as { port?: number };\n          await sandbox.getPreviewUrl(port || 3000);\n          break;\n        }\n\n        case 'git_status': {\n          const result = await runCommand('git status --porcelain');\n          // Parse git status output\n          const lines = (result as { stdout?: string }).stdout?.split('\\n').filter(Boolean) || [];\n          const status: GitStatus = {\n            branch: 'main', // Would need to parse from git branch\n            modified: [],\n            staged: [],\n            untracked: [],\n          };\n          lines.forEach((line) => {\n            const code = line.substring(0, 2);\n            const file = line.substring(3);\n            if (code.includes('M')) status.modified.push(file);\n            if (code.includes('A')) status.staged.push(file);\n            if (code === '??') status.untracked.push(file);\n          });\n          setGitStatus(status);\n          break;\n        }\n\n        case 'git_diff': {\n          const { path } = payload as { path?: string };\n          await runCommand(path ? `git diff ${path}` : 'git diff');\n          break;\n        }\n\n        case 'git_committed': {\n          const { message } = payload as { message: string };\n          await runCommand(`git add -A && git commit -m \"${message}\"`);\n          break;\n        }\n\n        case 'git_pushed': {\n          const { branch } = payload as { branch?: string };\n          await runCommand(branch ? `git push origin ${branch}` : 'git push');\n          break;\n        }\n\n        case 'branch_created': {\n          const { name } = payload as { name: string };\n          await runCommand(`git checkout -b ${name}`);\n          break;\n        }\n\n        case 'directory_listed': {\n          const { path } = payload as { path?: string };\n          await sandbox.listFiles(path || '.');\n          break;\n        }\n\n        case 'files_searched': {\n          const { pattern, path: searchPath } = payload as { pattern: string; path?: string };\n          await runCommand(`grep -r \"${pattern}\" ${searchPath || '.'}`);\n          break;\n        }\n\n        default:\n          // Other actions handled elsewhere (Convex mutations, etc.)\n          console.log('Unhandled sandbox action:', type, payload);\n      }\n    },\n    [cloneRepository, readFile, writeFile, runCommand, startDevServer, sandbox]\n  );\n\n  return {\n    // Status\n    isConnected: sandbox.isConnected,\n    isCreating: sandbox.isCreating,\n    sandboxId: sandbox.state.sandboxId,\n    previewUrl: sandbox.state.previewUrl,\n    error: sandbox.error,\n\n    // Files\n    files: sandbox.state.files,\n    currentFile,\n\n    // Terminal\n    terminalOutput,\n    isRunning,\n\n    // Git\n    gitStatus,\n\n    // Actions\n    startSandbox,\n    stopSandbox,\n    executeToolAction,\n    cloneRepository,\n    readFile,\n    writeFile,\n    runCommand,\n    startDevServer,\n    refreshFiles,\n\n    // Logs\n    logs: sandbox.logs,\n    clearLogs: sandbox.clearLogs,\n  };\n}\n\nexport default useAgentSandbox;\n"],"names":[],"mappings":"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"}