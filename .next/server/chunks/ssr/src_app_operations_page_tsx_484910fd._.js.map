{"version":3,"sources":["../../../../src/app/operations/page.tsx","../../../../src/components/operations/ActivityTimeline.tsx","../../../../src/lib/observability/index.ts","../../../../src/components/operations/ProviderStatusCards.tsx","../../../../src/components/operations/MetricsDashboard.tsx","../../../../src/components/operations/SecurityScanner.tsx"],"sourcesContent":["'use client';\n\n/**\n * Operations Center\n *\n * Admin-only unified observability dashboard for monitoring:\n * - All AI provider calls (Lynkr, OpenAI, Anthropic, Ollama)\n * - RLM memory operations\n * - Tool executions\n * - System events\n *\n * Features:\n * - Real-time activity timeline with threat color coding\n * - Provider health status cards\n * - Metrics dashboard with token usage and latency\n * - Security scan results (ZeroLeaks-inspired)\n */\n\nimport { useEffect, useState } from 'react';\nimport { useRouter } from 'next/navigation';\nimport Link from 'next/link';\nimport { motion } from 'framer-motion';\nimport { PageTransition } from '@/components/ios';\nimport { useAdminSession } from '@/hooks/useAdminSession';\nimport {\n  ActivityTimeline,\n  ProviderStatusCards,\n  MetricsDashboard,\n  SecurityScanner,\n} from '@/components/operations';\nimport {\n  Activity,\n  ChevronLeft,\n  Loader2,\n  Shield,\n  Zap,\n  BarChart3,\n  RefreshCw,\n  Settings,\n  Terminal,\n  Scan,\n} from 'lucide-react';\n\ntype TabId = 'activity' | 'metrics' | 'providers' | 'security';\n\ninterface Tab {\n  id: TabId;\n  label: string;\n  icon: typeof Activity;\n}\n\nconst TABS: Tab[] = [\n  { id: 'activity', label: 'Activity', icon: Activity },\n  { id: 'metrics', label: 'Metrics', icon: BarChart3 },\n  { id: 'providers', label: 'Providers', icon: Zap },\n  { id: 'security', label: 'Security', icon: Scan },\n];\n\nexport default function OperationsPage() {\n  const router = useRouter();\n  const { isAuthenticated, isLoading, username } = useAdminSession();\n  const [activeTab, setActiveTab] = useState<TabId>('activity');\n  const [isRefreshing, setIsRefreshing] = useState(false);\n\n  // Redirect if not admin\n  useEffect(() => {\n    if (!isLoading && !isAuthenticated) {\n      router.push('/settings');\n    }\n  }, [isAuthenticated, isLoading, router]);\n\n  const handleRefresh = () => {\n    setIsRefreshing(true);\n    // Force re-render by toggling tab\n    const current = activeTab;\n    setActiveTab('metrics');\n    setTimeout(() => {\n      setActiveTab(current);\n      setIsRefreshing(false);\n    }, 100);\n  };\n\n  if (isLoading) {\n    return (\n      <div className=\"min-h-screen bg-zinc-950 flex items-center justify-center\">\n        <Loader2 className=\"w-8 h-8 animate-spin text-white/50\" />\n      </div>\n    );\n  }\n\n  if (!isAuthenticated) {\n    return null;\n  }\n\n  return (\n    <PageTransition>\n      <div className=\"min-h-screen bg-zinc-950\">\n        {/* Animated Background */}\n        <div className=\"fixed inset-0 overflow-hidden pointer-events-none\">\n          <div className=\"absolute -top-1/2 -left-1/2 w-full h-full bg-gradient-radial from-violet-500/10 to-transparent animate-pulse\" />\n          <div className=\"absolute -bottom-1/2 -right-1/2 w-full h-full bg-gradient-radial from-emerald-500/10 to-transparent animate-pulse delay-1000\" />\n        </div>\n\n        {/* Header */}\n        <header className=\"sticky top-0 z-40 bg-zinc-950/80 backdrop-blur-xl border-b border-white/10\">\n          <div className=\"max-w-7xl mx-auto px-4 py-4\">\n            <div className=\"flex items-center justify-between\">\n              <div className=\"flex items-center gap-4\">\n                <Link\n                  href=\"/settings\"\n                  className=\"p-2 -ml-2 rounded-lg hover:bg-white/10 transition-colors\"\n                >\n                  <ChevronLeft className=\"w-5 h-5 text-white\" />\n                </Link>\n                <div>\n                  <h1 className=\"text-xl font-semibold text-white flex items-center gap-2\">\n                    <Terminal className=\"w-6 h-6 text-violet-400\" />\n                    Operations Center\n                  </h1>\n                  <p className=\"text-xs text-white/50\">\n                    Logged in as {username}\n                  </p>\n                </div>\n              </div>\n\n              <div className=\"flex items-center gap-2\">\n                {/* Refresh Button */}\n                <button\n                  onClick={handleRefresh}\n                  disabled={isRefreshing}\n                  className=\"p-2 rounded-lg hover:bg-white/10 transition-colors disabled:opacity-50\"\n                >\n                  <RefreshCw\n                    className={`w-5 h-5 text-white/60 ${isRefreshing ? 'animate-spin' : ''\n                      }`}\n                  />\n                </button>\n\n                {/* Security Link */}\n                <Link\n                  href=\"/security\"\n                  className=\"p-2 rounded-lg hover:bg-white/10 transition-colors\"\n                >\n                  <Shield className=\"w-5 h-5 text-white/60\" />\n                </Link>\n\n                {/* Settings Link */}\n                <Link\n                  href=\"/settings\"\n                  className=\"p-2 rounded-lg hover:bg-white/10 transition-colors\"\n                >\n                  <Settings className=\"w-5 h-5 text-white/60\" />\n                </Link>\n              </div>\n            </div>\n\n            {/* Tab Navigation */}\n            <div className=\"flex gap-2 mt-4\">\n              {TABS.map((tab) => {\n                const Icon = tab.icon;\n                const isActive = activeTab === tab.id;\n\n                return (\n                  <button\n                    key={tab.id}\n                    onClick={() => setActiveTab(tab.id)}\n                    className={`\n                      relative flex items-center gap-2 px-4 py-2 rounded-xl\n                      text-sm font-medium transition-all\n                      ${isActive\n                        ? 'text-white'\n                        : 'text-white/50 hover:text-white/70 hover:bg-white/5'\n                      }\n                    `}\n                  >\n                    {isActive && (\n                      <motion.div\n                        layoutId=\"activeTab\"\n                        className=\"absolute inset-0 bg-white/10 rounded-xl border border-white/20\"\n                        transition={{ type: 'spring', bounce: 0.2, duration: 0.4 }}\n                      />\n                    )}\n                    <span className=\"relative z-10 flex items-center gap-2\">\n                      <Icon className=\"w-4 h-4\" />\n                      {tab.label}\n                    </span>\n                  </button>\n                );\n              })}\n            </div>\n          </div>\n        </header>\n\n        {/* Main Content */}\n        <main className=\"max-w-7xl mx-auto px-4 py-8 relative z-10\">\n          <motion.div\n            key={activeTab}\n            initial={{ opacity: 0, y: 10 }}\n            animate={{ opacity: 1, y: 0 }}\n            transition={{ duration: 0.2 }}\n          >\n            {activeTab === 'activity' && (\n              <div className=\"space-y-8\">\n                {/* Quick Stats */}\n                <div className=\"grid grid-cols-4 gap-4\">\n                  <QuickStat label=\"Active\" value=\"Live\" color=\"emerald\" pulse />\n                  <QuickStat label=\"Providers\" value=\"5\" color=\"violet\" />\n                  <QuickStat label=\"Last 5m\" value=\"--\" color=\"amber\" />\n                  <QuickStat label=\"Threats\" value=\"0\" color=\"red\" />\n                </div>\n\n                <ActivityTimeline />\n              </div>\n            )}\n\n            {activeTab === 'metrics' && <MetricsDashboard />}\n\n            {activeTab === 'providers' && (\n              <div className=\"space-y-8\">\n                <ProviderStatusCards />\n\n                {/* Provider Actions */}\n                <div className=\"bg-white/5 rounded-2xl border border-white/10 p-6\">\n                  <h3 className=\"text-lg font-medium text-white mb-4\">\n                    Provider Actions\n                  </h3>\n                  <div className=\"flex flex-wrap gap-3\">\n                    <button className=\"px-4 py-2 rounded-xl bg-emerald-500/20 text-emerald-300 border border-emerald-500/30 hover:bg-emerald-500/30 transition-colors\">\n                      Check All Health\n                    </button>\n                    <button className=\"px-4 py-2 rounded-xl bg-violet-500/20 text-violet-300 border border-violet-500/30 hover:bg-violet-500/30 transition-colors\">\n                      View Lynkr Logs\n                    </button>\n                    <button className=\"px-4 py-2 rounded-xl bg-amber-500/20 text-amber-300 border border-amber-500/30 hover:bg-amber-500/30 transition-colors\">\n                      Test Connection\n                    </button>\n                    <button\n                      onClick={() => setActiveTab('security')}\n                      className=\"px-4 py-2 rounded-xl bg-red-500/20 text-red-300 border border-red-500/30 hover:bg-red-500/30 transition-colors\"\n                    >\n                      Run Security Scan\n                    </button>\n                  </div>\n                </div>\n              </div>\n            )}\n\n            {activeTab === 'security' && <SecurityScanner />}\n          </motion.div>\n        </main>\n\n        {/* Footer */}\n        <footer className=\"border-t border-white/10 py-4 mt-12\">\n          <div className=\"max-w-7xl mx-auto px-4 text-center text-xs text-white/30\">\n            Operations Center v1.0 | 8gent Observability System\n          </div>\n        </footer>\n      </div>\n    </PageTransition>\n  );\n}\n\nfunction QuickStat({\n  label,\n  value,\n  color,\n  pulse,\n}: {\n  label: string;\n  value: string;\n  color: 'emerald' | 'violet' | 'amber' | 'red';\n  pulse?: boolean;\n}) {\n  const colorClasses = {\n    emerald: 'text-emerald-400 bg-emerald-500/20 border-emerald-500/30',\n    violet: 'text-violet-400 bg-violet-500/20 border-violet-500/30',\n    amber: 'text-amber-400 bg-amber-500/20 border-amber-500/30',\n    red: 'text-red-400 bg-red-500/20 border-red-500/30',\n  };\n\n  return (\n    <div\n      className={`\n        relative rounded-xl border p-3 backdrop-blur-sm\n        ${colorClasses[color]}\n      `}\n    >\n      {pulse && (\n        <span className=\"absolute top-2 right-2 flex h-2 w-2\">\n          <span className=\"animate-ping absolute inline-flex h-full w-full rounded-full bg-emerald-400 opacity-75\" />\n          <span className=\"relative inline-flex rounded-full h-2 w-2 bg-emerald-500\" />\n        </span>\n      )}\n      <div className=\"text-xs text-white/40\">{label}</div>\n      <div className=\"text-lg font-semibold\">{value}</div>\n    </div>\n  );\n}\n","'use client';\n\n/**\n * Real-Time Activity Timeline\n *\n * Displays a live stream of backend operations with:\n * - Color-coded categories and threat levels\n * - Latency and token usage\n * - Expandable details\n * - Auto-refresh\n *\n * NOTE: Run `npx convex dev` to generate API types after schema changes.\n */\n\nimport { useState, useEffect } from 'react';\nimport { useQuery } from '@/lib/openclaw/hooks';\n\nimport { api } from '@/lib/convex-shim';\nimport { motion, AnimatePresence } from 'framer-motion';\nimport {\n  Activity,\n  Bot,\n  Brain,\n  Wrench,\n  Webhook,\n  Settings,\n  Clock,\n  AlertTriangle,\n  CheckCircle,\n  XCircle,\n  Timer,\n  Ban,\n  ChevronDown,\n  ChevronUp,\n  Zap,\n} from 'lucide-react';\nimport {\n  THREAT_COLORS,\n  STATUS_COLORS,\n  CATEGORY_COLORS,\n  PROVIDER_COLORS,\n} from '@/lib/observability';\n\ninterface Operation {\n  _id: string;\n  operationId: string;\n  category: string;\n  operation: string;\n  provider?: string;\n  model?: string;\n  status: string;\n  latencyMs?: number;\n  inputTokens?: number;\n  outputTokens?: number;\n  errorMessage?: string;\n  threatLevel?: string;\n  timestamp: number;\n  requestSummary?: string;\n  responseSummary?: string;\n  toolName?: string;\n}\n\nconst CATEGORY_ICONS: Record<string, typeof Activity> = {\n  ai_provider: Bot,\n  memory: Brain,\n  tool_execution: Wrench,\n  webhook: Webhook,\n  system: Settings,\n};\n\nconst STATUS_ICONS: Record<string, typeof CheckCircle> = {\n  started: Clock,\n  success: CheckCircle,\n  error: XCircle,\n  timeout: Timer,\n  rate_limited: Ban,\n};\n\nfunction formatTime(timestamp: number): string {\n  const date = new Date(timestamp);\n  return date.toLocaleTimeString('en-US', {\n    hour: '2-digit',\n    minute: '2-digit',\n    second: '2-digit',\n    hour12: false,\n  });\n}\n\nfunction formatLatency(ms?: number): string {\n  if (!ms) return '-';\n  if (ms < 1000) return `${ms}ms`;\n  return `${(ms / 1000).toFixed(2)}s`;\n}\n\nfunction OperationRow({ operation }: { operation: Operation }) {\n  const [expanded, setExpanded] = useState(false);\n\n  const CategoryIcon = CATEGORY_ICONS[operation.category] ?? Activity;\n  const StatusIcon = STATUS_ICONS[operation.status] ?? Clock;\n  const categoryColors = CATEGORY_COLORS[operation.category as keyof typeof CATEGORY_COLORS] ?? CATEGORY_COLORS.system;\n  const statusColors = STATUS_COLORS[operation.status as keyof typeof STATUS_COLORS] ?? STATUS_COLORS.started;\n  const threatColors = THREAT_COLORS[(operation.threatLevel as keyof typeof THREAT_COLORS) ?? 'none'];\n  const providerColors = operation.provider\n    ? PROVIDER_COLORS[operation.provider as keyof typeof PROVIDER_COLORS]\n    : null;\n\n  const hasDetails = operation.requestSummary || operation.responseSummary || operation.errorMessage;\n\n  return (\n    <motion.div\n      initial={{ opacity: 0, x: -20 }}\n      animate={{ opacity: 1, x: 0 }}\n      exit={{ opacity: 0, x: 20 }}\n      className={`\n        border rounded-xl p-4 backdrop-blur-sm transition-all\n        ${threatColors.border} ${threatColors.bg}\n        hover:border-white/20\n      `}\n    >\n      {/* Main Row */}\n      <div className=\"flex items-center gap-4\">\n        {/* Time */}\n        <div className=\"text-xs text-white/40 font-mono w-20 shrink-0\">\n          {formatTime(operation.timestamp)}\n        </div>\n\n        {/* Category Icon */}\n        <div className={`p-2 rounded-lg ${categoryColors.bg}`}>\n          <CategoryIcon className={`w-4 h-4 ${categoryColors.text}`} />\n        </div>\n\n        {/* Operation Info */}\n        <div className=\"flex-1 min-w-0\">\n          <div className=\"flex items-center gap-2\">\n            <span className=\"font-medium text-white truncate\">\n              {operation.toolName || operation.operation}\n            </span>\n            {operation.provider && providerColors && (\n              <span className={`text-xs px-2 py-0.5 rounded-full ${providerColors.bg} ${providerColors.text}`}>\n                {providerColors.icon} {operation.provider}\n              </span>\n            )}\n            {operation.model && (\n              <span className=\"text-xs text-white/40 truncate\">\n                {operation.model}\n              </span>\n            )}\n          </div>\n          <div className=\"text-xs text-white/40 mt-0.5\">\n            {operation.category}\n          </div>\n        </div>\n\n        {/* Metrics */}\n        <div className=\"flex items-center gap-4 shrink-0\">\n          {/* Tokens */}\n          {(operation.inputTokens || operation.outputTokens) && (\n            <div className=\"text-xs text-white/40 flex items-center gap-1\">\n              <Zap className=\"w-3 h-3\" />\n              {operation.inputTokens ?? 0}/{operation.outputTokens ?? 0}\n            </div>\n          )}\n\n          {/* Latency */}\n          <div className=\"text-xs text-white/50 font-mono w-16 text-right\">\n            {formatLatency(operation.latencyMs)}\n          </div>\n\n          {/* Status */}\n          <div className={`p-1.5 rounded-lg ${statusColors.bg}`}>\n            <StatusIcon className={`w-4 h-4 ${statusColors.text}`} />\n          </div>\n\n          {/* Threat Level Indicator */}\n          {operation.threatLevel && operation.threatLevel !== 'none' && (\n            <div className={`p-1.5 rounded-lg ${threatColors.bg}`}>\n              <AlertTriangle className={`w-4 h-4 ${threatColors.text}`} />\n            </div>\n          )}\n\n          {/* Expand Button */}\n          {hasDetails && (\n            <button\n              onClick={() => setExpanded(!expanded)}\n              className=\"p-1.5 rounded-lg hover:bg-white/10 transition-colors\"\n            >\n              {expanded ? (\n                <ChevronUp className=\"w-4 h-4 text-white/40\" />\n              ) : (\n                <ChevronDown className=\"w-4 h-4 text-white/40\" />\n              )}\n            </button>\n          )}\n        </div>\n      </div>\n\n      {/* Expanded Details */}\n      <AnimatePresence>\n        {expanded && hasDetails && (\n          <motion.div\n            initial={{ height: 0, opacity: 0 }}\n            animate={{ height: 'auto', opacity: 1 }}\n            exit={{ height: 0, opacity: 0 }}\n            className=\"mt-4 pt-4 border-t border-white/10 space-y-2 overflow-hidden\"\n          >\n            {operation.requestSummary && (\n              <div>\n                <div className=\"text-xs text-white/40 mb-1\">Request</div>\n                <div className=\"text-sm text-white/70 font-mono bg-black/20 rounded-lg p-2 truncate\">\n                  {operation.requestSummary}\n                </div>\n              </div>\n            )}\n            {operation.responseSummary && (\n              <div>\n                <div className=\"text-xs text-white/40 mb-1\">Response</div>\n                <div className=\"text-sm text-white/70 font-mono bg-black/20 rounded-lg p-2 truncate\">\n                  {operation.responseSummary}\n                </div>\n              </div>\n            )}\n            {operation.errorMessage && (\n              <div>\n                <div className=\"text-xs text-red-400 mb-1\">Error</div>\n                <div className=\"text-sm text-red-300 font-mono bg-red-500/10 rounded-lg p-2\">\n                  {operation.errorMessage}\n                </div>\n              </div>\n            )}\n          </motion.div>\n        )}\n      </AnimatePresence>\n    </motion.div>\n  );\n}\n\nexport function ActivityTimeline() {\n  const [minutes, setMinutes] = useState(5);\n  const operations = useQuery(api.observability.getActivityStream, {\n    minutes,\n    limit: 50,\n  });\n\n  // Auto-refresh by changing a key when operations update\n  const [, setRefreshKey] = useState(0);\n  useEffect(() => {\n    const interval = setInterval(() => setRefreshKey((k) => k + 1), 2000);\n    return () => clearInterval(interval);\n  }, []);\n\n  return (\n    <div className=\"space-y-4\">\n      {/* Header */}\n      <div className=\"flex items-center justify-between\">\n        <h2 className=\"text-lg font-semibold text-white flex items-center gap-2\">\n          <Activity className=\"w-5 h-5 text-violet-400\" />\n          Activity Stream\n        </h2>\n\n        {/* Time Range Selector */}\n        <div className=\"flex items-center gap-2\">\n          {[1, 5, 15, 30, 60].map((m) => (\n            <button\n              key={m}\n              onClick={() => setMinutes(m)}\n              className={`\n                px-3 py-1.5 rounded-lg text-sm transition-colors\n                ${minutes === m\n                  ? 'bg-violet-500/30 text-violet-300 border border-violet-500/50'\n                  : 'bg-white/5 text-white/50 hover:bg-white/10 border border-transparent'\n                }\n              `}\n            >\n              {m < 60 ? `${m}m` : '1h'}\n            </button>\n          ))}\n        </div>\n      </div>\n\n      {/* Operations List */}\n      <div className=\"space-y-2 max-h-[600px] overflow-y-auto pr-2\">\n        {operations === undefined ? (\n          // Loading state\n          <div className=\"space-y-2\">\n            {[...Array(5)].map((_, i) => (\n              <div\n                key={i}\n                className=\"h-16 rounded-xl bg-white/5 animate-pulse\"\n              />\n            ))}\n          </div>\n        ) : operations.length === 0 ? (\n          // Empty state\n          <div className=\"text-center py-12\">\n            <Activity className=\"w-12 h-12 text-white/20 mx-auto mb-4\" />\n            <p className=\"text-white/40\">\n              No operations in the last {minutes} minutes\n            </p>\n          </div>\n        ) : (\n          // Operations\n          <AnimatePresence mode=\"popLayout\">\n            {(operations as Operation[]).map((op) => (\n              <OperationRow key={op._id} operation={op} />\n            ))}\n          </AnimatePresence>\n        )}\n      </div>\n    </div>\n  );\n}\n","/**\n * Observability Integration Library\n *\n * Client-side utilities for logging operations to the observability system.\n * Integrates with Lynkr audit callbacks, API routes, and tool executions.\n *\n * Security scanning patterns inspired by ZeroLeaks\n * (https://github.com/ZeroLeaks/zeroleaks) - an autonomous AI security\n * scanner that detects prompt injection and jailbreak vulnerabilities.\n *\n * Our threat detection extends ZeroLeaks with:\n * - Real-time Convex persistence\n * - Lynkr tunnel integration\n * - Provider health correlation\n * - Cost estimation\n *\n * @see docs/reference/attributions.md for full credits\n *\n * NOTE: Run `npx convex dev` to regenerate API types after schema changes.\n */\n\nimport { ConvexReactClient } from \"@/lib/convex-shim\";\n\nimport { api } from '@/lib/convex-shim';\n\n// =============================================================================\n// Types\n// =============================================================================\n\nexport type OperationCategory =\n  | \"ai_provider\"\n  | \"memory\"\n  | \"tool_execution\"\n  | \"webhook\"\n  | \"system\";\n\nexport type OperationStatus =\n  | \"started\"\n  | \"success\"\n  | \"error\"\n  | \"timeout\"\n  | \"rate_limited\";\n\nexport type Provider =\n  | \"lynkr\"\n  | \"openai\"\n  | \"anthropic\"\n  | \"ollama\"\n  | \"convex\"\n  | \"internal\";\n\nexport type ThreatLevel = \"none\" | \"low\" | \"medium\" | \"high\" | \"critical\";\n\nexport interface OperationLogEntry {\n  operationId?: string;\n  traceId?: string;\n  category: OperationCategory;\n  operation: string;\n  provider?: Provider;\n  model?: string;\n  endpoint?: string;\n  status: OperationStatus;\n  latencyMs?: number;\n  errorMessage?: string;\n  errorCode?: string;\n  inputTokens?: number;\n  outputTokens?: number;\n  totalTokens?: number;\n  estimatedCost?: number;\n  requestSummary?: string;\n  responseSummary?: string;\n  metadata?: Record<string, unknown>;\n  userId?: string;\n  sessionId?: string;\n  ipAddress?: string;\n  toolName?: string;\n  toolStatus?: string;\n  threatLevel?: ThreatLevel;\n  securityFlags?: string[];\n}\n\n// =============================================================================\n// Cost Estimation\n// =============================================================================\n\nconst COST_PER_1K_TOKENS: Record<string, { input: number; output: number }> = {\n  \"gpt-4\": { input: 0.03, output: 0.06 },\n  \"gpt-4-turbo\": { input: 0.01, output: 0.03 },\n  \"gpt-4o\": { input: 0.005, output: 0.015 },\n  \"gpt-3.5-turbo\": { input: 0.0005, output: 0.0015 },\n  \"claude-3-opus\": { input: 0.015, output: 0.075 },\n  \"claude-3-sonnet\": { input: 0.003, output: 0.015 },\n  \"claude-3-haiku\": { input: 0.00025, output: 0.00125 },\n  // Local models are free\n  \"gpt-oss:20b\": { input: 0, output: 0 },\n  \"ollama\": { input: 0, output: 0 },\n};\n\nexport function estimateCost(\n  model: string,\n  inputTokens: number,\n  outputTokens: number\n): number {\n  // Find matching model or default to free (local)\n  const modelKey = Object.keys(COST_PER_1K_TOKENS).find((k) =>\n    model.toLowerCase().includes(k.toLowerCase())\n  );\n\n  if (!modelKey) return 0; // Assume local/free\n\n  const rates = COST_PER_1K_TOKENS[modelKey];\n  return (inputTokens / 1000) * rates.input + (outputTokens / 1000) * rates.output;\n}\n\n// =============================================================================\n// Threat Detection\n// =============================================================================\n\nconst THREAT_PATTERNS = {\n  prompt_injection: [\n    /ignore (all )?(previous|above|prior) instructions/i,\n    /you are now/i,\n    /new instructions:/i,\n    /system prompt:/i,\n    /\\[SYSTEM\\]/i,\n    /<\\|im_start\\|>/i,\n  ],\n  jailbreak: [\n    /DAN mode/i,\n    /developer mode/i,\n    /jailbreak/i,\n    /bypass (safety|filter|restriction)/i,\n    /pretend (you are|to be|you're)/i,\n    /roleplay as/i,\n  ],\n  data_extraction: [\n    /what (is|are) your (system prompt|instructions)/i,\n    /reveal your/i,\n    /show me your prompt/i,\n    /repeat (the|your) (system|initial)/i,\n    /print your configuration/i,\n  ],\n  ssrf: [\n    /localhost/i,\n    /127\\.0\\.0\\.1/,\n    /0\\.0\\.0\\.0/,\n    /169\\.254\\./,\n    /metadata\\.google/i,\n  ],\n};\n\nexport function detectThreats(content: string): {\n  threatLevel: ThreatLevel;\n  flags: string[];\n} {\n  const flags: string[] = [];\n\n  for (const [category, patterns] of Object.entries(THREAT_PATTERNS)) {\n    for (const pattern of patterns) {\n      if (pattern.test(content)) {\n        flags.push(category);\n        break;\n      }\n    }\n  }\n\n  // Determine threat level based on flags\n  let threatLevel: ThreatLevel = \"none\";\n  if (flags.includes(\"jailbreak\") || flags.includes(\"data_extraction\")) {\n    threatLevel = \"high\";\n  } else if (flags.includes(\"prompt_injection\")) {\n    threatLevel = \"medium\";\n  } else if (flags.includes(\"ssrf\")) {\n    threatLevel = \"critical\";\n  } else if (flags.length > 0) {\n    threatLevel = \"low\";\n  }\n\n  return { threatLevel, flags };\n}\n\n// =============================================================================\n// Logger Class\n// =============================================================================\n\nexport class ObservabilityLogger {\n  private convex: ConvexReactClient | null = null;\n  private pendingLogs: OperationLogEntry[] = [];\n  private flushInterval: NodeJS.Timeout | null = null;\n\n  constructor(convexClient?: ConvexReactClient) {\n    if (convexClient) {\n      this.convex = convexClient;\n    }\n\n    // Flush pending logs every 5 seconds\n    if (typeof window !== \"undefined\") {\n      this.flushInterval = setInterval(() => this.flush(), 5000);\n    }\n  }\n\n  setConvexClient(client: ConvexReactClient) {\n    this.convex = client;\n    // Flush any pending logs\n    this.flush();\n  }\n\n  /**\n   * Log an operation\n   */\n  async log(entry: OperationLogEntry): Promise<string> {\n    const operationId = entry.operationId ?? crypto.randomUUID();\n\n    // Auto-detect threats if content is provided\n    if (entry.requestSummary && !entry.threatLevel) {\n      const { threatLevel, flags } = detectThreats(entry.requestSummary);\n      entry.threatLevel = threatLevel;\n      entry.securityFlags = flags;\n    }\n\n    // Calculate cost if tokens provided\n    if (\n      entry.inputTokens &&\n      entry.outputTokens &&\n      entry.model &&\n      !entry.estimatedCost\n    ) {\n      entry.estimatedCost = estimateCost(\n        entry.model,\n        entry.inputTokens,\n        entry.outputTokens\n      );\n    }\n\n    const logEntry: OperationLogEntry = {\n      ...entry,\n      operationId,\n      metadata: entry.metadata ? JSON.stringify(entry.metadata) as unknown as Record<string, unknown> : undefined,\n    };\n\n    if (this.convex && api?.observability?.logOperation) {\n      try {\n        await this.convex.mutation(api.observability.logOperation, {\n          ...logEntry,\n          metadata: entry.metadata ? JSON.stringify(entry.metadata) : undefined,\n        });\n      } catch (error) {\n        console.error(\"[Observability] Failed to log operation:\", error);\n        // Queue for retry\n        this.pendingLogs.push(logEntry);\n      }\n    } else {\n      // Queue until Convex client and API are available\n      this.pendingLogs.push(logEntry);\n    }\n\n    // Also log to console in development\n    if (process.env.NODE_ENV === \"development\") {\n      const emoji = this.getStatusEmoji(entry.status);\n      const color = this.getThreatColor(entry.threatLevel);\n      console.log(\n        `${emoji} [${entry.category}] ${entry.operation}`,\n        entry.provider ? `via ${entry.provider}` : \"\",\n        entry.latencyMs ? `(${entry.latencyMs}ms)` : \"\",\n        color ? `‚ö†Ô∏è ${entry.threatLevel}` : \"\"\n      );\n    }\n\n    return operationId;\n  }\n\n  /**\n   * Start tracking an operation (returns a function to complete it)\n   */\n  startOperation(\n    entry: Omit<OperationLogEntry, \"status\" | \"latencyMs\">\n  ): {\n    operationId: string;\n    complete: (result: {\n      status: OperationStatus;\n      errorMessage?: string;\n      errorCode?: string;\n      inputTokens?: number;\n      outputTokens?: number;\n      responseSummary?: string;\n    }) => Promise<void>;\n  } {\n    const operationId = entry.operationId ?? crypto.randomUUID();\n    const startTime = Date.now();\n\n    // Log the start\n    this.log({\n      ...entry,\n      operationId,\n      status: \"started\",\n    });\n\n    return {\n      operationId,\n      complete: async (result) => {\n        const latencyMs = Date.now() - startTime;\n        await this.log({\n          ...entry,\n          operationId,\n          ...result,\n          latencyMs,\n        });\n      },\n    };\n  }\n\n  /**\n   * Flush pending logs\n   */\n  async flush(): Promise<void> {\n    if (!this.convex || !api?.observability?.logOperation || this.pendingLogs.length === 0) return;\n\n    const logs = [...this.pendingLogs];\n    this.pendingLogs = [];\n\n    for (const log of logs) {\n      try {\n        await this.convex.mutation(api.observability.logOperation, {\n          ...log,\n          metadata: typeof log.metadata === 'object' ? JSON.stringify(log.metadata) : log.metadata,\n        });\n      } catch {\n        // Re-queue on failure\n        this.pendingLogs.push(log);\n      }\n    }\n  }\n\n  /**\n   * Clean up\n   */\n  destroy() {\n    if (this.flushInterval) {\n      clearInterval(this.flushInterval);\n    }\n    this.flush();\n  }\n\n  private getStatusEmoji(status: OperationStatus): string {\n    switch (status) {\n      case \"started\":\n        return \"üîµ\";\n      case \"success\":\n        return \"‚úÖ\";\n      case \"error\":\n        return \"‚ùå\";\n      case \"timeout\":\n        return \"‚è±Ô∏è\";\n      case \"rate_limited\":\n        return \"üö´\";\n      default:\n        return \"‚ö™\";\n    }\n  }\n\n  private getThreatColor(level?: ThreatLevel): string | null {\n    switch (level) {\n      case \"critical\":\n        return \"#ef4444\"; // red\n      case \"high\":\n        return \"#f97316\"; // orange\n      case \"medium\":\n        return \"#eab308\"; // yellow\n      case \"low\":\n        return \"#3b82f6\"; // blue\n      default:\n        return null;\n    }\n  }\n}\n\n// =============================================================================\n// Singleton Instance\n// =============================================================================\n\nlet loggerInstance: ObservabilityLogger | null = null;\n\nexport function getObservabilityLogger(): ObservabilityLogger {\n  if (!loggerInstance) {\n    loggerInstance = new ObservabilityLogger();\n  }\n  return loggerInstance;\n}\n\nexport function initializeObservability(convex: ConvexReactClient): void {\n  getObservabilityLogger().setConvexClient(convex);\n}\n\n// =============================================================================\n// Lynkr Integration\n// =============================================================================\n\nimport type { LynkrAuditLog } from \"@/lib/lynkr/client\";\n\n/**\n * Create a Lynkr audit callback that logs to the observability system\n */\nexport function createLynkrAuditCallback(\n  logger: ObservabilityLogger\n): (log: LynkrAuditLog) => void {\n  return (log: LynkrAuditLog) => {\n    logger.log({\n      category: \"ai_provider\",\n      operation: log.action,\n      provider: \"lynkr\",\n      model: log.model,\n      endpoint: log.baseUrl,\n      status: log.success ? \"success\" : \"error\",\n      latencyMs: log.latencyMs,\n      errorMessage: log.error,\n      inputTokens: log.inputTokens,\n      outputTokens: log.outputTokens,\n    });\n  };\n}\n\n// =============================================================================\n// API Route Helper\n// =============================================================================\n\n/**\n * Helper for logging API route operations (server-side)\n * Uses fetch to call the logging API since we can't use Convex client directly\n */\nexport async function logApiOperation(\n  entry: OperationLogEntry\n): Promise<string> {\n  const operationId = entry.operationId ?? crypto.randomUUID();\n\n  // Auto-detect threats\n  if (entry.requestSummary && !entry.threatLevel) {\n    const { threatLevel, flags } = detectThreats(entry.requestSummary);\n    entry.threatLevel = threatLevel;\n    entry.securityFlags = flags;\n  }\n\n  // Calculate cost\n  if (\n    entry.inputTokens &&\n    entry.outputTokens &&\n    entry.model &&\n    !entry.estimatedCost\n  ) {\n    entry.estimatedCost = estimateCost(\n      entry.model,\n      entry.inputTokens,\n      entry.outputTokens\n    );\n  }\n\n  // Log to console for now (server-side logging to Convex\n  // should be done via internal mutation in API route)\n  console.log(\n    `[Observability] ${entry.status} ${entry.category}/${entry.operation}`,\n    entry.provider ? `via ${entry.provider}` : \"\",\n    entry.latencyMs ? `(${entry.latencyMs}ms)` : \"\"\n  );\n\n  return operationId;\n}\n\n// =============================================================================\n// UI Colors\n// =============================================================================\n\nexport const THREAT_COLORS = {\n  none: {\n    bg: \"bg-emerald-500/20\",\n    text: \"text-emerald-400\",\n    border: \"border-emerald-500/30\",\n    glow: \"shadow-emerald-500/20\",\n  },\n  low: {\n    bg: \"bg-blue-500/20\",\n    text: \"text-blue-400\",\n    border: \"border-blue-500/30\",\n    glow: \"shadow-blue-500/20\",\n  },\n  medium: {\n    bg: \"bg-yellow-500/20\",\n    text: \"text-yellow-400\",\n    border: \"border-yellow-500/30\",\n    glow: \"shadow-yellow-500/20\",\n  },\n  high: {\n    bg: \"bg-orange-500/20\",\n    text: \"text-orange-400\",\n    border: \"border-orange-500/30\",\n    glow: \"shadow-orange-500/20\",\n  },\n  critical: {\n    bg: \"bg-red-500/20\",\n    text: \"text-red-400\",\n    border: \"border-red-500/30\",\n    glow: \"shadow-red-500/20\",\n  },\n};\n\nexport const STATUS_COLORS = {\n  started: {\n    bg: \"bg-blue-500/20\",\n    text: \"text-blue-400\",\n    border: \"border-blue-500/30\",\n  },\n  success: {\n    bg: \"bg-emerald-500/20\",\n    text: \"text-emerald-400\",\n    border: \"border-emerald-500/30\",\n  },\n  error: {\n    bg: \"bg-red-500/20\",\n    text: \"text-red-400\",\n    border: \"border-red-500/30\",\n  },\n  timeout: {\n    bg: \"bg-orange-500/20\",\n    text: \"text-orange-400\",\n    border: \"border-orange-500/30\",\n  },\n  rate_limited: {\n    bg: \"bg-purple-500/20\",\n    text: \"text-purple-400\",\n    border: \"border-purple-500/30\",\n  },\n};\n\nexport const CATEGORY_COLORS = {\n  ai_provider: {\n    bg: \"bg-violet-500/20\",\n    text: \"text-violet-400\",\n    icon: \"ü§ñ\",\n  },\n  memory: {\n    bg: \"bg-pink-500/20\",\n    text: \"text-pink-400\",\n    icon: \"üß†\",\n  },\n  tool_execution: {\n    bg: \"bg-amber-500/20\",\n    text: \"text-amber-400\",\n    icon: \"üîß\",\n  },\n  webhook: {\n    bg: \"bg-cyan-500/20\",\n    text: \"text-cyan-400\",\n    icon: \"üì•\",\n  },\n  system: {\n    bg: \"bg-slate-500/20\",\n    text: \"text-slate-400\",\n    icon: \"‚öôÔ∏è\",\n  },\n};\n\nexport const PROVIDER_COLORS = {\n  lynkr: {\n    bg: \"bg-emerald-500/20\",\n    text: \"text-emerald-400\",\n    icon: \"üîó\",\n  },\n  openai: {\n    bg: \"bg-green-500/20\",\n    text: \"text-green-400\",\n    icon: \"üü¢\",\n  },\n  anthropic: {\n    bg: \"bg-orange-500/20\",\n    text: \"text-orange-400\",\n    icon: \"üü†\",\n  },\n  ollama: {\n    bg: \"bg-blue-500/20\",\n    text: \"text-blue-400\",\n    icon: \"ü¶ô\",\n  },\n  convex: {\n    bg: \"bg-red-500/20\",\n    text: \"text-red-400\",\n    icon: \"‚ö°\",\n  },\n  internal: {\n    bg: \"bg-slate-500/20\",\n    text: \"text-slate-400\",\n    icon: \"üîí\",\n  },\n};\n","'use client';\n\n/**\n * Provider Status Cards\n *\n * Shows real-time health status for each AI provider:\n * - Lynkr (local tunnel)\n * - OpenAI\n * - Anthropic\n * - Ollama\n * - Whisper\n *\n * NOTE: Run `npx convex dev` to generate API types after schema changes.\n */\n\nimport { useQuery } from '@/lib/openclaw/hooks';\n\nimport { api } from '@/lib/convex-shim';\nimport { motion } from 'framer-motion';\nimport {\n  CheckCircle,\n  AlertTriangle,\n  XCircle,\n  HelpCircle,\n  Zap,\n  Clock,\n  Activity,\n  Cpu,\n  Cloud,\n  Mic,\n  Link2,\n} from 'lucide-react';\n\ninterface ProviderHealth {\n  status: 'healthy' | 'degraded' | 'unhealthy' | 'unknown';\n  latencyMs?: number;\n  lastCheckAt: number;\n  consecutiveFailures: number;\n  features?: {\n    memory?: boolean;\n    tools?: boolean;\n    streaming?: boolean;\n    embeddings?: boolean;\n  };\n}\n\nconst PROVIDER_CONFIG = {\n  lynkr: {\n    name: 'Lynkr',\n    description: 'Local tunnel proxy',\n    icon: Link2,\n    color: 'emerald',\n  },\n  openai: {\n    name: 'OpenAI',\n    description: 'Cloud GPT models',\n    icon: Cloud,\n    color: 'green',\n  },\n  anthropic: {\n    name: 'Anthropic',\n    description: 'Cloud Claude models',\n    icon: Cpu,\n    color: 'orange',\n  },\n  ollama: {\n    name: 'Ollama',\n    description: 'Local LLM inference',\n    icon: Zap,\n    color: 'blue',\n  },\n  whisper: {\n    name: 'Whisper',\n    description: 'Speech-to-text',\n    icon: Mic,\n    color: 'pink',\n  },\n};\n\nconst STATUS_CONFIG = {\n  healthy: {\n    icon: CheckCircle,\n    label: 'Healthy',\n    color: 'emerald',\n  },\n  degraded: {\n    icon: AlertTriangle,\n    label: 'Degraded',\n    color: 'yellow',\n  },\n  unhealthy: {\n    icon: XCircle,\n    label: 'Unhealthy',\n    color: 'red',\n  },\n  unknown: {\n    icon: HelpCircle,\n    label: 'Unknown',\n    color: 'slate',\n  },\n};\n\nfunction ProviderCard({\n  provider,\n  health,\n}: {\n  provider: keyof typeof PROVIDER_CONFIG;\n  health?: ProviderHealth;\n}) {\n  const config = PROVIDER_CONFIG[provider];\n  const status = health?.status ?? 'unknown';\n  const statusConfig = STATUS_CONFIG[status];\n  const Icon = config.icon;\n  const StatusIcon = statusConfig.icon;\n\n  const colorClasses = {\n    emerald: {\n      bg: 'bg-emerald-500/20',\n      text: 'text-emerald-400',\n      border: 'border-emerald-500/30',\n      glow: 'shadow-emerald-500/10',\n    },\n    green: {\n      bg: 'bg-green-500/20',\n      text: 'text-green-400',\n      border: 'border-green-500/30',\n      glow: 'shadow-green-500/10',\n    },\n    orange: {\n      bg: 'bg-orange-500/20',\n      text: 'text-orange-400',\n      border: 'border-orange-500/30',\n      glow: 'shadow-orange-500/10',\n    },\n    blue: {\n      bg: 'bg-blue-500/20',\n      text: 'text-blue-400',\n      border: 'border-blue-500/30',\n      glow: 'shadow-blue-500/10',\n    },\n    pink: {\n      bg: 'bg-pink-500/20',\n      text: 'text-pink-400',\n      border: 'border-pink-500/30',\n      glow: 'shadow-pink-500/10',\n    },\n    yellow: {\n      bg: 'bg-yellow-500/20',\n      text: 'text-yellow-400',\n      border: 'border-yellow-500/30',\n      glow: 'shadow-yellow-500/10',\n    },\n    red: {\n      bg: 'bg-red-500/20',\n      text: 'text-red-400',\n      border: 'border-red-500/30',\n      glow: 'shadow-red-500/10',\n    },\n    slate: {\n      bg: 'bg-slate-500/20',\n      text: 'text-slate-400',\n      border: 'border-slate-500/30',\n      glow: 'shadow-slate-500/10',\n    },\n  };\n\n  const providerColors = colorClasses[config.color as keyof typeof colorClasses];\n  const statusColors = colorClasses[statusConfig.color as keyof typeof colorClasses];\n\n  return (\n    <motion.div\n      initial={{ opacity: 0, y: 20 }}\n      animate={{ opacity: 1, y: 0 }}\n      className={`\n        relative overflow-hidden rounded-2xl border backdrop-blur-sm\n        ${providerColors.border} bg-white/5\n        hover:bg-white/10 transition-colors\n      `}\n    >\n      {/* Status Indicator Bar */}\n      <div className={`absolute top-0 left-0 right-0 h-1 ${statusColors.bg}`} />\n\n      <div className=\"p-4\">\n        {/* Header */}\n        <div className=\"flex items-start justify-between mb-4\">\n          <div className=\"flex items-center gap-3\">\n            <div className={`p-2.5 rounded-xl ${providerColors.bg}`}>\n              <Icon className={`w-5 h-5 ${providerColors.text}`} />\n            </div>\n            <div>\n              <h3 className=\"font-medium text-white\">{config.name}</h3>\n              <p className=\"text-xs text-white/40\">{config.description}</p>\n            </div>\n          </div>\n\n          {/* Status Badge */}\n          <div className={`flex items-center gap-1.5 px-2.5 py-1 rounded-full ${statusColors.bg}`}>\n            <StatusIcon className={`w-3.5 h-3.5 ${statusColors.text}`} />\n            <span className={`text-xs font-medium ${statusColors.text}`}>\n              {statusConfig.label}\n            </span>\n          </div>\n        </div>\n\n        {/* Metrics */}\n        <div className=\"grid grid-cols-2 gap-3\">\n          {/* Latency */}\n          <div className=\"bg-black/20 rounded-xl p-3\">\n            <div className=\"flex items-center gap-1.5 text-white/40 text-xs mb-1\">\n              <Clock className=\"w-3 h-3\" />\n              Latency\n            </div>\n            <div className=\"text-lg font-semibold text-white\">\n              {health?.latencyMs ? `${health.latencyMs}ms` : '-'}\n            </div>\n          </div>\n\n          {/* Uptime */}\n          <div className=\"bg-black/20 rounded-xl p-3\">\n            <div className=\"flex items-center gap-1.5 text-white/40 text-xs mb-1\">\n              <Activity className=\"w-3 h-3\" />\n              Failures\n            </div>\n            <div className=\"text-lg font-semibold text-white\">\n              {health?.consecutiveFailures ?? 0}\n            </div>\n          </div>\n        </div>\n\n        {/* Features */}\n        {health?.features && (\n          <div className=\"mt-3 flex flex-wrap gap-1.5\">\n            {health.features.memory && (\n              <span className=\"text-[10px] px-2 py-0.5 rounded-full bg-violet-500/20 text-violet-300\">\n                Memory\n              </span>\n            )}\n            {health.features.tools && (\n              <span className=\"text-[10px] px-2 py-0.5 rounded-full bg-amber-500/20 text-amber-300\">\n                Tools\n              </span>\n            )}\n            {health.features.streaming && (\n              <span className=\"text-[10px] px-2 py-0.5 rounded-full bg-cyan-500/20 text-cyan-300\">\n                Streaming\n              </span>\n            )}\n            {health.features.embeddings && (\n              <span className=\"text-[10px] px-2 py-0.5 rounded-full bg-pink-500/20 text-pink-300\">\n                Embeddings\n              </span>\n            )}\n          </div>\n        )}\n\n        {/* Last Check */}\n        {health?.lastCheckAt && (\n          <div className=\"mt-3 text-xs text-white/30\">\n            Last checked {new Date(health.lastCheckAt).toLocaleTimeString()}\n          </div>\n        )}\n      </div>\n    </motion.div>\n  );\n}\n\nexport function ProviderStatusCards() {\n  const healthStatus = useQuery(api.observability.getProviderHealthStatus);\n\n  const providers = ['lynkr', 'openai', 'anthropic', 'ollama', 'whisper'] as const;\n\n  return (\n    <div className=\"space-y-4\">\n      <h2 className=\"text-lg font-semibold text-white flex items-center gap-2\">\n        <Activity className=\"w-5 h-5 text-emerald-400\" />\n        Provider Status\n      </h2>\n\n      <div className=\"grid grid-cols-2 lg:grid-cols-5 gap-4\">\n        {providers.map((provider) => (\n          <ProviderCard\n            key={provider}\n            provider={provider}\n            health={healthStatus?.[provider]}\n          />\n        ))}\n      </div>\n    </div>\n  );\n}\n","'use client';\n\n/**\n * Metrics Dashboard\n *\n * Overview of key observability metrics:\n * - Operations per minute\n * - Error rate\n * - Token usage\n * - Latency percentiles\n * - Threat events\n *\n * NOTE: Run `npx convex dev` to generate API types after schema changes.\n */\n\nimport { useQuery } from '@/lib/openclaw/hooks';\n\nimport { api } from '@/lib/convex-shim';\nimport { motion } from 'framer-motion';\nimport {\n  Activity,\n  Zap,\n  AlertTriangle,\n  Clock,\n  DollarSign,\n  Shield,\n  TrendingUp,\n  BarChart3,\n  PieChart,\n} from 'lucide-react';\n\nfunction StatCard({\n  label,\n  value,\n  subValue,\n  icon: Icon,\n  color,\n  trend,\n}: {\n  label: string;\n  value: string | number;\n  subValue?: string;\n  icon: typeof Activity;\n  color: 'violet' | 'emerald' | 'amber' | 'red' | 'blue' | 'pink';\n  trend?: 'up' | 'down' | 'neutral';\n}) {\n  const colorClasses = {\n    violet: 'bg-violet-500/20 text-violet-400 border-violet-500/30',\n    emerald: 'bg-emerald-500/20 text-emerald-400 border-emerald-500/30',\n    amber: 'bg-amber-500/20 text-amber-400 border-amber-500/30',\n    red: 'bg-red-500/20 text-red-400 border-red-500/30',\n    blue: 'bg-blue-500/20 text-blue-400 border-blue-500/30',\n    pink: 'bg-pink-500/20 text-pink-400 border-pink-500/30',\n  };\n\n  const iconClasses = colorClasses[color].split(' ')[1];\n\n  return (\n    <motion.div\n      initial={{ opacity: 0, scale: 0.95 }}\n      animate={{ opacity: 1, scale: 1 }}\n      className={`\n        relative overflow-hidden rounded-2xl border backdrop-blur-sm p-4\n        bg-white/5 border-white/10 hover:border-white/20 transition-colors\n      `}\n    >\n      <div className=\"flex items-start justify-between\">\n        <div>\n          <p className=\"text-xs text-white/40 mb-1\">{label}</p>\n          <p className=\"text-2xl font-bold text-white\">{value}</p>\n          {subValue && (\n            <p className=\"text-xs text-white/40 mt-1\">{subValue}</p>\n          )}\n        </div>\n        <div className={`p-2.5 rounded-xl ${colorClasses[color].split(' ').slice(0, 1).join(' ')}`}>\n          <Icon className={`w-5 h-5 ${iconClasses}`} />\n        </div>\n      </div>\n\n      {/* Trend indicator */}\n      {trend && trend !== 'neutral' && (\n        <div className=\"absolute bottom-2 right-2\">\n          <TrendingUp\n            className={`w-4 h-4 ${trend === 'up' ? 'text-emerald-400' : 'text-red-400 rotate-180'\n              }`}\n          />\n        </div>\n      )}\n    </motion.div>\n  );\n}\n\nfunction CategoryBreakdown({\n  data,\n  title,\n}: {\n  data: Record<string, number>;\n  title: string;\n}) {\n  const total = Object.values(data).reduce((a, b) => a + b, 0);\n  const sorted = Object.entries(data).sort((a, b) => b[1] - a[1]);\n\n  const categoryColors: Record<string, string> = {\n    ai_provider: 'bg-violet-500',\n    memory: 'bg-pink-500',\n    tool_execution: 'bg-amber-500',\n    webhook: 'bg-cyan-500',\n    system: 'bg-slate-500',\n    lynkr: 'bg-emerald-500',\n    openai: 'bg-green-500',\n    anthropic: 'bg-orange-500',\n    ollama: 'bg-blue-500',\n  };\n\n  return (\n    <div className=\"bg-white/5 rounded-2xl border border-white/10 p-4\">\n      <h3 className=\"text-sm font-medium text-white mb-4 flex items-center gap-2\">\n        <PieChart className=\"w-4 h-4 text-white/40\" />\n        {title}\n      </h3>\n\n      <div className=\"space-y-3\">\n        {sorted.map(([key, value]) => {\n          const percentage = total > 0 ? Math.round((value / total) * 100) : 0;\n          const color = categoryColors[key] ?? 'bg-slate-500';\n\n          return (\n            <div key={key}>\n              <div className=\"flex items-center justify-between text-xs mb-1\">\n                <span className=\"text-white/60 capitalize\">\n                  {key.replace(/_/g, ' ')}\n                </span>\n                <span className=\"text-white/40\">\n                  {value} ({percentage}%)\n                </span>\n              </div>\n              <div className=\"h-1.5 bg-white/10 rounded-full overflow-hidden\">\n                <motion.div\n                  initial={{ width: 0 }}\n                  animate={{ width: `${percentage}%` }}\n                  transition={{ duration: 0.5, ease: 'easeOut' }}\n                  className={`h-full rounded-full ${color}`}\n                />\n              </div>\n            </div>\n          );\n        })}\n      </div>\n    </div>\n  );\n}\n\nfunction ThreatSummary({\n  data,\n}: {\n  data: Record<string, number>;\n}) {\n  const threatColors: Record<string, { bg: string; text: string }> = {\n    none: { bg: 'bg-emerald-500/20', text: 'text-emerald-400' },\n    low: { bg: 'bg-blue-500/20', text: 'text-blue-400' },\n    medium: { bg: 'bg-yellow-500/20', text: 'text-yellow-400' },\n    high: { bg: 'bg-orange-500/20', text: 'text-orange-400' },\n    critical: { bg: 'bg-red-500/20', text: 'text-red-400' },\n  };\n\n  const total = Object.values(data).reduce((a, b) => a + b, 0);\n\n  return (\n    <div className=\"bg-white/5 rounded-2xl border border-white/10 p-4\">\n      <h3 className=\"text-sm font-medium text-white mb-4 flex items-center gap-2\">\n        <Shield className=\"w-4 h-4 text-white/40\" />\n        Threat Levels\n      </h3>\n\n      <div className=\"flex gap-2\">\n        {['none', 'low', 'medium', 'high', 'critical'].map((level) => {\n          const count = data[level] ?? 0;\n          const colors = threatColors[level];\n          const percentage = total > 0 ? Math.round((count / total) * 100) : 0;\n\n          return (\n            <div\n              key={level}\n              className={`flex-1 rounded-xl p-3 ${colors.bg} border border-white/5`}\n            >\n              <div className={`text-lg font-bold ${colors.text}`}>{count}</div>\n              <div className=\"text-[10px] text-white/40 capitalize\">{level}</div>\n              <div className=\"text-[10px] text-white/30\">{percentage}%</div>\n            </div>\n          );\n        })}\n      </div>\n    </div>\n  );\n}\n\nexport function MetricsDashboard() {\n  const overview = useQuery(api.observability.getDashboardOverview, {\n    hours: 24,\n  });\n\n  if (!overview) {\n    return (\n      <div className=\"space-y-4\">\n        <h2 className=\"text-lg font-semibold text-white flex items-center gap-2\">\n          <BarChart3 className=\"w-5 h-5 text-amber-400\" />\n          Metrics Overview\n        </h2>\n        <div className=\"grid grid-cols-2 lg:grid-cols-4 gap-4\">\n          {[...Array(8)].map((_, i) => (\n            <div key={i} className=\"h-28 bg-white/5 rounded-2xl animate-pulse\" />\n          ))}\n        </div>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"space-y-6\">\n      <h2 className=\"text-lg font-semibold text-white flex items-center gap-2\">\n        <BarChart3 className=\"w-5 h-5 text-amber-400\" />\n        Metrics Overview (24h)\n      </h2>\n\n      {/* Primary Stats */}\n      <div className=\"grid grid-cols-2 lg:grid-cols-4 gap-4\">\n        <StatCard\n          label=\"Total Operations\"\n          value={overview.totalOperations.toLocaleString()}\n          subValue={`${overview.operationsPerMinute}/min`}\n          icon={Activity}\n          color=\"violet\"\n        />\n        <StatCard\n          label=\"Error Rate\"\n          value={`${overview.errorRate}%`}\n          subValue={`${overview.totalErrors} errors`}\n          icon={AlertTriangle}\n          color={overview.errorRate > 5 ? 'red' : overview.errorRate > 1 ? 'amber' : 'emerald'}\n        />\n        <StatCard\n          label=\"Avg Latency\"\n          value={`${overview.avgLatencyMs}ms`}\n          subValue={`P99: ${overview.p99LatencyMs}ms`}\n          icon={Clock}\n          color=\"blue\"\n        />\n        <StatCard\n          label=\"Token Usage\"\n          value={overview.totalTokens.toLocaleString()}\n          subValue={`$${overview.estimatedCostUsd.toFixed(4)} est`}\n          icon={Zap}\n          color=\"pink\"\n        />\n      </div>\n\n      {/* Secondary Stats */}\n      <div className=\"grid grid-cols-2 lg:grid-cols-4 gap-4\">\n        <StatCard\n          label=\"Last Hour\"\n          value={overview.operationsLastHour.toLocaleString()}\n          icon={TrendingUp}\n          color=\"emerald\"\n        />\n        <StatCard\n          label=\"High Threats\"\n          value={overview.highThreatEvents}\n          subValue={`${overview.threatEvents} total`}\n          icon={Shield}\n          color={overview.highThreatEvents > 0 ? 'red' : 'emerald'}\n        />\n        <StatCard\n          label=\"Input Tokens\"\n          value={overview.totalInputTokens.toLocaleString()}\n          icon={Zap}\n          color=\"violet\"\n        />\n        <StatCard\n          label=\"Output Tokens\"\n          value={overview.totalOutputTokens.toLocaleString()}\n          icon={Zap}\n          color=\"amber\"\n        />\n      </div>\n\n      {/* Breakdowns */}\n      <div className=\"grid grid-cols-1 lg:grid-cols-3 gap-4\">\n        <CategoryBreakdown\n          data={overview.byCategory}\n          title=\"By Category\"\n        />\n        <CategoryBreakdown\n          data={overview.byProvider}\n          title=\"By Provider\"\n        />\n        <ThreatSummary data={overview.byThreatLevel} />\n      </div>\n    </div>\n  );\n}\n","'use client';\n\n/**\n * Security Scanner Component\n *\n * AI security scanning interface for testing prompt injection\n * and jailbreak vulnerabilities.\n *\n * Inspired by ZeroLeaks (https://github.com/ZeroLeaks/zeroleaks)\n * An autonomous security testing tool by the ZeroLeaks team.\n *\n * Attack vectors adapted from ZeroLeaks methodology:\n * - Direct extraction\n * - Encoding bypasses (Base64, ROT13)\n * - Persona-based jailbreaks (DAN, Developer Mode)\n * - Social engineering\n * - Format injection\n * - Crescendo (multi-turn trust escalation)\n * - Many-Shot (context priming)\n * - Chain-of-Thought manipulation\n *\n * Our implementation extends ZeroLeaks with:\n * - Real-time Convex persistence\n * - Integration with provider health monitoring\n * - Theme-aware glass-morphism UI\n * - Operations Center dashboard integration\n *\n * @see https://zeroleaks.ai for hosted security scanning\n * @see docs/reference/attributions.md for full credits\n *\n * NOTE: Run `npx convex dev` to generate API types after schema changes.\n */\n\nimport { useState } from 'react';\nimport { useQuery, useMutation } from '@/lib/openclaw/hooks';\n\nimport { api } from '@/lib/convex-shim';\nimport { motion, AnimatePresence } from 'framer-motion';\nimport {\n  Shield,\n  Play,\n  Loader2,\n  CheckCircle,\n  XCircle,\n  AlertTriangle,\n  Target,\n  Scan,\n  Lock,\n  Unlock,\n  Eye,\n  FileWarning,\n  Bug,\n  Zap,\n} from 'lucide-react';\n\nconst ATTACK_VECTORS = [\n  { id: 'direct', name: 'Direct Extraction', icon: Target },\n  { id: 'encoded', name: 'Encoding Bypass', icon: Lock },\n  { id: 'persona', name: 'Persona Jailbreak', icon: Eye },\n  { id: 'social', name: 'Social Engineering', icon: Bug },\n  { id: 'format', name: 'Format Injection', icon: FileWarning },\n  { id: 'crescendo', name: 'Crescendo Attack', icon: Zap },\n] as const;\n\nconst SCAN_TYPES = [\n  {\n    id: 'prompt_injection',\n    name: 'Prompt Injection',\n    description: 'Test for prompt injection vulnerabilities',\n    icon: Bug,\n  },\n  {\n    id: 'jailbreak_attempt',\n    name: 'Jailbreak Detection',\n    description: 'Test jailbreak resistance',\n    icon: Unlock,\n  },\n  {\n    id: 'data_extraction',\n    name: 'Data Extraction',\n    description: 'Test for sensitive data leakage',\n    icon: Eye,\n  },\n  {\n    id: 'system_prompt_leak',\n    name: 'System Prompt Leak',\n    description: 'Test system prompt protection',\n    icon: Lock,\n  },\n  {\n    id: 'comprehensive',\n    name: 'Comprehensive Scan',\n    description: 'Full security assessment',\n    icon: Shield,\n  },\n] as const;\n\nconst SEVERITY_CONFIG = {\n  secure: {\n    color: 'emerald',\n    icon: CheckCircle,\n    label: 'Secure',\n  },\n  low: {\n    color: 'blue',\n    icon: AlertTriangle,\n    label: 'Low Risk',\n  },\n  medium: {\n    color: 'yellow',\n    icon: AlertTriangle,\n    label: 'Medium Risk',\n  },\n  high: {\n    color: 'orange',\n    icon: AlertTriangle,\n    label: 'High Risk',\n  },\n  critical: {\n    color: 'red',\n    icon: XCircle,\n    label: 'Critical',\n  },\n};\n\ninterface SecurityScan {\n  _id: string;\n  scanId: string;\n  scanType: string;\n  status: 'running' | 'completed' | 'failed';\n  vulnerabilityScore?: number;\n  severity?: 'secure' | 'low' | 'medium' | 'high' | 'critical';\n  leakStatus?: string;\n  findings?: string;\n  startedAt: number;\n  completedAt?: number;\n  durationMs?: number;\n}\n\nfunction ScanCard({ scan }: { scan: SecurityScan }) {\n  const severity = scan.severity ?? 'secure';\n  const config = SEVERITY_CONFIG[severity];\n  const Icon = config.icon;\n\n  const colorClasses = {\n    emerald: 'bg-emerald-500/20 text-emerald-400 border-emerald-500/30',\n    blue: 'bg-blue-500/20 text-blue-400 border-blue-500/30',\n    yellow: 'bg-yellow-500/20 text-yellow-400 border-yellow-500/30',\n    orange: 'bg-orange-500/20 text-orange-400 border-orange-500/30',\n    red: 'bg-red-500/20 text-red-400 border-red-500/30',\n  };\n\n  const colors = colorClasses[config.color as keyof typeof colorClasses];\n\n  return (\n    <motion.div\n      initial={{ opacity: 0, y: 10 }}\n      animate={{ opacity: 1, y: 0 }}\n      className={`rounded-xl border p-4 ${colors}`}\n    >\n      <div className=\"flex items-start justify-between mb-3\">\n        <div>\n          <h4 className=\"font-medium text-white capitalize\">\n            {scan.scanType.replace(/_/g, ' ')}\n          </h4>\n          <p className=\"text-xs text-white/40\">\n            {new Date(scan.startedAt).toLocaleString()}\n          </p>\n        </div>\n        <div className=\"flex items-center gap-2\">\n          {scan.status === 'running' ? (\n            <Loader2 className=\"w-5 h-5 text-white/60 animate-spin\" />\n          ) : (\n            <Icon className=\"w-5 h-5\" />\n          )}\n        </div>\n      </div>\n\n      {scan.status === 'completed' && (\n        <>\n          {/* Vulnerability Score */}\n          <div className=\"mb-3\">\n            <div className=\"flex items-center justify-between text-xs mb-1\">\n              <span className=\"text-white/40\">Vulnerability Score</span>\n              <span className=\"font-medium text-white\">\n                {scan.vulnerabilityScore ?? 0}/100\n              </span>\n            </div>\n            <div className=\"h-2 bg-black/30 rounded-full overflow-hidden\">\n              <motion.div\n                initial={{ width: 0 }}\n                animate={{ width: `${scan.vulnerabilityScore ?? 0}%` }}\n                transition={{ duration: 0.5 }}\n                className={`h-full rounded-full ${(scan.vulnerabilityScore ?? 0) > 70\n                    ? 'bg-red-500'\n                    : (scan.vulnerabilityScore ?? 0) > 40\n                      ? 'bg-yellow-500'\n                      : 'bg-emerald-500'\n                  }`}\n              />\n            </div>\n          </div>\n\n          {/* Severity Badge */}\n          <div className=\"flex items-center gap-2 mb-3\">\n            <span\n              className={`px-2 py-0.5 rounded-full text-xs font-medium ${colors}`}\n            >\n              {config.label}\n            </span>\n            {scan.leakStatus && (\n              <span className=\"px-2 py-0.5 rounded-full text-xs bg-white/10 text-white/60\">\n                Leak: {scan.leakStatus}\n              </span>\n            )}\n          </div>\n\n          {/* Duration */}\n          {scan.durationMs && (\n            <p className=\"text-xs text-white/30\">\n              Completed in {(scan.durationMs / 1000).toFixed(2)}s\n            </p>\n          )}\n        </>\n      )}\n\n      {scan.status === 'failed' && (\n        <p className=\"text-xs text-red-400\">Scan failed</p>\n      )}\n    </motion.div>\n  );\n}\n\nexport function SecurityScanner() {\n  const [selectedType, setSelectedType] = useState<string>('comprehensive');\n  const [selectedVectors, setSelectedVectors] = useState<string[]>([\n    'direct',\n    'encoded',\n    'persona',\n  ]);\n  const [isScanning, setIsScanning] = useState(false);\n\n  const scans = useQuery(api.observability.getSecurityScans, { limit: 10 });\n  const createScan = useMutation(api.observability.createSecurityScan);\n\n  const handleStartScan = async () => {\n    setIsScanning(true);\n    try {\n      await createScan({\n        scanType: selectedType as any,\n        attackVectors: selectedVectors,\n        triggeredBy: 'manual',\n      });\n      // Note: Actual scan execution would be done by a background job\n      // For now, we just create the scan record\n    } catch (error) {\n      console.error('Failed to start scan:', error);\n    } finally {\n      setIsScanning(false);\n    }\n  };\n\n  const toggleVector = (vectorId: string) => {\n    setSelectedVectors((prev) =>\n      prev.includes(vectorId)\n        ? prev.filter((v) => v !== vectorId)\n        : [...prev, vectorId]\n    );\n  };\n\n  return (\n    <div className=\"space-y-6\">\n      {/* Header */}\n      <div className=\"flex items-center justify-between\">\n        <h2 className=\"text-lg font-semibold text-white flex items-center gap-2\">\n          <Scan className=\"w-5 h-5 text-red-400\" />\n          Security Scanner\n        </h2>\n        <span className=\"text-xs text-white/40\">ZeroLeaks-inspired</span>\n      </div>\n\n      {/* Scan Configuration */}\n      <div className=\"bg-white/5 rounded-2xl border border-white/10 p-6 space-y-6\">\n        {/* Scan Type Selection */}\n        <div>\n          <h3 className=\"text-sm font-medium text-white mb-3\">Scan Type</h3>\n          <div className=\"grid grid-cols-2 lg:grid-cols-5 gap-2\">\n            {SCAN_TYPES.map((type) => {\n              const Icon = type.icon;\n              const isSelected = selectedType === type.id;\n\n              return (\n                <button\n                  key={type.id}\n                  onClick={() => setSelectedType(type.id)}\n                  className={`\n                    p-3 rounded-xl border transition-all text-left\n                    ${isSelected\n                      ? 'bg-violet-500/20 border-violet-500/50 text-violet-300'\n                      : 'bg-white/5 border-white/10 text-white/60 hover:bg-white/10'\n                    }\n                  `}\n                >\n                  <Icon className=\"w-4 h-4 mb-2\" />\n                  <div className=\"text-xs font-medium\">{type.name}</div>\n                </button>\n              );\n            })}\n          </div>\n        </div>\n\n        {/* Attack Vectors */}\n        <div>\n          <h3 className=\"text-sm font-medium text-white mb-3\">Attack Vectors</h3>\n          <div className=\"flex flex-wrap gap-2\">\n            {ATTACK_VECTORS.map((vector) => {\n              const Icon = vector.icon;\n              const isSelected = selectedVectors.includes(vector.id);\n\n              return (\n                <button\n                  key={vector.id}\n                  onClick={() => toggleVector(vector.id)}\n                  className={`\n                    flex items-center gap-2 px-3 py-2 rounded-lg border transition-all\n                    ${isSelected\n                      ? 'bg-amber-500/20 border-amber-500/50 text-amber-300'\n                      : 'bg-white/5 border-white/10 text-white/50 hover:bg-white/10'\n                    }\n                  `}\n                >\n                  <Icon className=\"w-3.5 h-3.5\" />\n                  <span className=\"text-xs\">{vector.name}</span>\n                </button>\n              );\n            })}\n          </div>\n        </div>\n\n        {/* Start Scan Button */}\n        <button\n          onClick={handleStartScan}\n          disabled={isScanning || selectedVectors.length === 0}\n          className={`\n            w-full flex items-center justify-center gap-2 px-4 py-3 rounded-xl\n            font-medium transition-all\n            ${isScanning || selectedVectors.length === 0\n              ? 'bg-white/10 text-white/40 cursor-not-allowed'\n              : 'bg-red-500/20 text-red-300 border border-red-500/50 hover:bg-red-500/30'\n            }\n          `}\n        >\n          {isScanning ? (\n            <>\n              <Loader2 className=\"w-4 h-4 animate-spin\" />\n              Starting Scan...\n            </>\n          ) : (\n            <>\n              <Play className=\"w-4 h-4\" />\n              Start Security Scan\n            </>\n          )}\n        </button>\n      </div>\n\n      {/* Recent Scans */}\n      <div>\n        <h3 className=\"text-sm font-medium text-white mb-3\">Recent Scans</h3>\n        {scans === undefined ? (\n          <div className=\"space-y-3\">\n            {[...Array(3)].map((_, i) => (\n              <div\n                key={i}\n                className=\"h-24 bg-white/5 rounded-xl animate-pulse\"\n              />\n            ))}\n          </div>\n        ) : scans.length === 0 ? (\n          <div className=\"text-center py-8 text-white/40\">\n            <Shield className=\"w-12 h-12 mx-auto mb-3 opacity-50\" />\n            <p>No security scans yet</p>\n            <p className=\"text-xs mt-1\">Start a scan to test your AI&apos;s defenses</p>\n          </div>\n        ) : (\n          <div className=\"grid gap-3\">\n            <AnimatePresence>\n              {(scans as SecurityScan[]).map((scan) => (\n                <ScanCard key={scan._id} scan={scan} />\n              ))}\n            </AnimatePresence>\n          </div>\n        )}\n      </div>\n    </div>\n  );\n}\n"],"names":[],"mappings":"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"}