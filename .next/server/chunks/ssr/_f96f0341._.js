module.exports=[597960,a=>{"use strict";let b=(0,a.i(627552).default)("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);a.s(["default",()=>b])},677409,a=>{"use strict";var b=a.i(597960);a.s(["ChevronLeft",()=>b.default])},327428,321982,a=>{"use strict";let b=(0,a.i(627552).default)("Eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);a.s(["default",()=>b],321982),a.s(["Eye",()=>b],327428)},944353,a=>{"use strict";let b=(0,a.i(627552).default)("Pen",[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]]);a.s(["default",()=>b])},882044,a=>{"use strict";let b=(0,a.i(627552).default)("EyeOff",[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]);a.s(["default",()=>b])},934,a=>{"use strict";var b=a.i(944353);a.s(["Edit2",()=>b.default])},324303,a=>{"use strict";var b=a.i(882044);a.s(["EyeOff",()=>b.default])},180969,a=>{"use strict";var b=a.i(330981);a.s(["Key",()=>b.default])},579212,a=>{"use strict";var b=a.i(863050);function c(){let[a,c]=(0,b.useState)({isAuthenticated:!1,isLoading:!0}),d=(0,b.useCallback)(async()=>{try{let a=await fetch("/api/auth/admin"),b=await a.json();c({isAuthenticated:b.isAuthenticated??!1,username:b.username,isLoading:!1})}catch{c({isAuthenticated:!1,isLoading:!1})}},[]);return(0,b.useEffect)(()=>{d()},[d]),{...a,refresh:d}}a.s(["useAdminSession",()=>c])},330981,a=>{"use strict";let b=(0,a.i(627552).default)("Key",[["path",{d:"m15.5 7.5 2.3 2.3a1 1 0 0 0 1.4 0l2.1-2.1a1 1 0 0 0 0-1.4L19 4",key:"g0fldk"}],["path",{d:"m21 2-9.6 9.6",key:"1j0ho8"}],["circle",{cx:"7.5",cy:"15.5",r:"5.5",key:"yqb3hr"}]]);a.s(["default",()=>b])},992520,a=>{"use strict";var b=a.i(499969),c=a.i(863050),d=a.i(925440),e=a.i(567031),f=a.i(278739),g=a.i(189198),h=a.i(233849),i=a.i(135981);a.i(617620);var j=a.i(617864),k=a.i(579212),l=a.i(677409),m=a.i(180969),n=a.i(128002),o=a.i(390341),p=a.i(934),q=a.i(327428),r=a.i(324303),s=a.i(885275),t=a.i(887080),u=a.i(662482),v=a.i(41783),w=a.i(371029);let x=i.api.passcodes;function y(){let a=(0,d.useRouter)(),{isAuthenticated:i,isLoading:y}=(0,k.useAdminSession)(),[z,A]=(0,c.useState)(null),[B,C]=(0,c.useState)(""),[D,E]=(0,c.useState)(!1),[F,G]=(0,c.useState)(!1),[H,I]=(0,c.useState)(""),[J,K]=(0,c.useState)(""),[L,M]=(0,c.useState)(null),N=(0,h.useQuery)(x.listProtectedAreas),O=(0,h.useMutation)(x.upsertProtectedArea),P=(0,h.useMutation)(x.deleteProtectedArea);(0,c.useEffect)(()=>{y||i||a.push("/settings")},[i,y,a]);let Q=async a=>{if(!B||6!==B.length||!/^\d+$/.test(B))return void M("Passcode must be exactly 6 digits");try{await O({slug:a,name:N?.find(b=>b.slug===a)?.name||a,passcode:B,isActive:!0}),A(null),C(""),M(null)}catch(a){M("Failed to update passcode")}},R=async()=>{if(!H.trim())return void M("Area name is required");if(!J.trim())return void M("Area slug is required");if(!B||6!==B.length||!/^\d+$/.test(B))return void M("Passcode must be exactly 6 digits");try{await O({slug:J.toLowerCase().replace(/\s+/g,"-"),name:H,passcode:B,isActive:!0}),G(!1),I(""),K(""),C(""),M(null)}catch(a){M("Failed to create area")}},S=async a=>{if(confirm("Are you sure you want to delete this protected area?"))try{await P({slug:a})}catch(a){M("Failed to delete area")}},T=async a=>{try{await O({slug:a.slug,name:a.name,isActive:!a.isActive})}catch(a){M("Failed to update area")}};return y?(0,b.jsx)("div",{className:"min-h-screen bg-zinc-950 flex items-center justify-center",children:(0,b.jsx)(u.Loader2,{className:"w-8 h-8 animate-spin text-white/50"})}):i?(0,b.jsx)(j.PageTransition,{children:(0,b.jsxs)("div",{className:"min-h-screen bg-zinc-950",children:[(0,b.jsx)("header",{className:"sticky top-0 z-40 bg-zinc-950/80 backdrop-blur-xl border-b border-white/10",children:(0,b.jsxs)("div",{className:"max-w-lg mx-auto px-4 py-4 flex items-center gap-4",children:[(0,b.jsx)(g.default,{href:"/settings",className:"p-2 -ml-2 rounded-lg hover:bg-white/10 transition-colors","aria-label":"Go back to settings",children:(0,b.jsx)(l.ChevronLeft,{className:"w-5 h-5 text-white"})}),(0,b.jsxs)("div",{className:"flex-1",children:[(0,b.jsx)("h1",{className:"text-xl font-semibold text-white",children:"Passcodes"}),(0,b.jsx)("p",{className:"text-xs text-white/50",children:"Manage protected area access"})]}),(0,b.jsx)("div",{className:"w-8 h-8 rounded-lg bg-gradient-to-br from-orange-500 to-red-600 flex items-center justify-center",children:(0,b.jsx)(m.Key,{className:"w-4 h-4 text-white"})})]})}),(0,b.jsxs)("main",{className:"max-w-lg mx-auto px-4 py-6",children:[(0,b.jsx)(f.AnimatePresence,{children:L&&(0,b.jsx)(e.motion.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},className:"mb-4 p-3 bg-red-500/10 border border-red-500/20 rounded-xl",children:(0,b.jsx)("p",{className:"text-sm text-red-400",children:L})})}),(0,b.jsx)("div",{className:"mb-6 p-4 rounded-xl bg-white/5 border border-white/10",children:(0,b.jsxs)("div",{className:"flex items-start gap-3",children:[(0,b.jsx)(w.Shield,{className:"w-5 h-5 text-orange-400 flex-shrink-0 mt-0.5"}),(0,b.jsx)("div",{children:(0,b.jsx)("p",{className:"text-sm text-white/70",children:"Protected areas require a 6-digit passcode to access. Each area can have its own unique passcode."})})]})}),(0,b.jsx)("div",{className:"space-y-3",children:void 0===N?(0,b.jsx)("div",{className:"flex justify-center py-8",children:(0,b.jsx)(u.Loader2,{className:"w-6 h-6 animate-spin text-white/50"})}):0===N.length?(0,b.jsxs)("div",{className:"text-center py-8",children:[(0,b.jsx)(v.Lock,{className:"w-12 h-12 mx-auto mb-3 text-white/20"}),(0,b.jsx)("p",{className:"text-white/50",children:"No protected areas yet"})]}):N.map(a=>(0,b.jsx)(e.motion.div,{layout:!0,className:"p-4 rounded-xl bg-white/5 border border-white/10",children:z===a.slug?(0,b.jsxs)("div",{className:"space-y-3",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsx)("span",{className:"text-white font-medium",children:a.name}),(0,b.jsx)("span",{className:"text-xs text-white/40 font-mono",children:a.slug})]}),(0,b.jsxs)("div",{className:"relative",children:[(0,b.jsx)("input",{type:D?"text":"password",value:B,onChange:a=>{C(a.target.value.replace(/\D/g,"").slice(0,6))},placeholder:"Enter 6-digit passcode",className:"w-full px-3 py-2 pr-10 bg-white/5 border border-white/20 rounded-lg text-white text-center text-lg tracking-[0.5em] font-mono placeholder:text-white/30 focus:outline-none focus:ring-2 focus:ring-orange-500/50",maxLength:6,inputMode:"numeric",autoFocus:!0}),(0,b.jsx)("button",{type:"button",onClick:()=>E(!D),className:"absolute right-2 top-1/2 -translate-y-1/2 p-1 text-white/40 hover:text-white/70",children:D?(0,b.jsx)(r.EyeOff,{className:"w-4 h-4"}):(0,b.jsx)(q.Eye,{className:"w-4 h-4"})})]}),(0,b.jsxs)("div",{className:"flex gap-2",children:[(0,b.jsxs)("button",{onClick:()=>Q(a.slug),disabled:6!==B.length,className:"flex-1 py-2 px-3 bg-orange-500 hover:bg-orange-600 disabled:bg-white/10 disabled:text-white/30 rounded-lg text-white text-sm font-medium transition-colors flex items-center justify-center gap-2",children:[(0,b.jsx)(s.Check,{className:"w-4 h-4"}),"Save"]}),(0,b.jsx)("button",{onClick:()=>{A(null),C(""),M(null)},className:"py-2 px-3 bg-white/10 hover:bg-white/20 rounded-lg text-white text-sm transition-colors",children:(0,b.jsx)(t.X,{className:"w-4 h-4"})})]})]}):(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[(0,b.jsx)("div",{className:`w-10 h-10 rounded-lg flex items-center justify-center ${a.isActive?"bg-gradient-to-br from-green-500 to-emerald-600":"bg-white/10"}`,children:(0,b.jsx)(v.Lock,{className:"w-5 h-5 text-white"})}),(0,b.jsxs)("div",{className:"flex-1",children:[(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)("span",{className:"text-white font-medium",children:a.name}),!a.isActive&&(0,b.jsx)("span",{className:"text-xs text-white/40 bg-white/10 px-2 py-0.5 rounded",children:"Disabled"})]}),(0,b.jsx)("span",{className:"text-xs text-white/40 font-mono",children:a.slug})]}),(0,b.jsxs)("div",{className:"flex items-center gap-1",children:[(0,b.jsx)("button",{onClick:()=>T(a),className:`p-2 rounded-lg transition-colors ${a.isActive?"text-green-400 hover:bg-green-500/10":"text-white/40 hover:bg-white/10"}`,title:a.isActive?"Disable":"Enable",children:a.isActive?(0,b.jsx)(s.Check,{className:"w-4 h-4"}):(0,b.jsx)(t.X,{className:"w-4 h-4"})}),(0,b.jsx)("button",{onClick:()=>{A(a.slug),C("")},className:"p-2 text-white/40 hover:text-white hover:bg-white/10 rounded-lg transition-colors",title:"Change passcode",children:(0,b.jsx)(p.Edit2,{className:"w-4 h-4"})}),(0,b.jsx)("button",{onClick:()=>S(a.slug),className:"p-2 text-white/40 hover:text-red-400 hover:bg-red-500/10 rounded-lg transition-colors",title:"Delete",children:(0,b.jsx)(o.Trash2,{className:"w-4 h-4"})})]})]})},a._id))}),(0,b.jsx)(f.AnimatePresence,{children:F?(0,b.jsxs)(e.motion.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:20},className:"mt-4 p-4 rounded-xl bg-white/5 border border-orange-500/30",children:[(0,b.jsx)("h3",{className:"text-white font-medium mb-3",children:"Create Protected Area"}),(0,b.jsxs)("div",{className:"space-y-3",children:[(0,b.jsx)("input",{type:"text",value:H,onChange:a=>I(a.target.value),placeholder:"Area name (e.g., Humans Search)",className:"w-full px-3 py-2 bg-white/5 border border-white/20 rounded-lg text-white placeholder:text-white/30 focus:outline-none focus:ring-2 focus:ring-orange-500/50"}),(0,b.jsx)("input",{type:"text",value:J,onChange:a=>K(a.target.value.toLowerCase().replace(/\s+/g,"-")),placeholder:"Slug (e.g., humans)",className:"w-full px-3 py-2 bg-white/5 border border-white/20 rounded-lg text-white font-mono placeholder:text-white/30 focus:outline-none focus:ring-2 focus:ring-orange-500/50"}),(0,b.jsxs)("div",{className:"relative",children:[(0,b.jsx)("input",{type:D?"text":"password",value:B,onChange:a=>{C(a.target.value.replace(/\D/g,"").slice(0,6))},placeholder:"6-digit passcode",className:"w-full px-3 py-2 pr-10 bg-white/5 border border-white/20 rounded-lg text-white text-center text-lg tracking-[0.5em] font-mono placeholder:text-white/30 focus:outline-none focus:ring-2 focus:ring-orange-500/50",maxLength:6,inputMode:"numeric"}),(0,b.jsx)("button",{type:"button",onClick:()=>E(!D),className:"absolute right-2 top-1/2 -translate-y-1/2 p-1 text-white/40 hover:text-white/70",children:D?(0,b.jsx)(r.EyeOff,{className:"w-4 h-4"}):(0,b.jsx)(q.Eye,{className:"w-4 h-4"})})]}),(0,b.jsxs)("div",{className:"flex gap-2",children:[(0,b.jsxs)("button",{onClick:R,disabled:!H.trim()||!J.trim()||6!==B.length,className:"flex-1 py-2 px-3 bg-orange-500 hover:bg-orange-600 disabled:bg-white/10 disabled:text-white/30 rounded-lg text-white text-sm font-medium transition-colors flex items-center justify-center gap-2",children:[(0,b.jsx)(s.Check,{className:"w-4 h-4"}),"Create"]}),(0,b.jsx)("button",{onClick:()=>{G(!1),I(""),K(""),C(""),M(null)},className:"py-2 px-3 bg-white/10 hover:bg-white/20 rounded-lg text-white text-sm transition-colors",children:"Cancel"})]})]})]}):(0,b.jsxs)(e.motion.button,{initial:{opacity:0},animate:{opacity:1},onClick:()=>G(!0),className:"mt-4 w-full py-3 px-4 rounded-xl bg-white/5 border border-dashed border-white/20 hover:bg-white/10 hover:border-white/30 text-white/60 hover:text-white transition-all flex items-center justify-center gap-2",children:[(0,b.jsx)(n.Plus,{className:"w-4 h-4"}),"Add Protected Area"]})}),(0,b.jsxs)("div",{className:"mt-6 p-4 rounded-xl bg-white/5 border border-white/10",children:[(0,b.jsx)("h3",{className:"text-sm font-medium text-white mb-2",children:"Suggested Areas"}),(0,b.jsx)("p",{className:"text-xs text-white/50 mb-3",children:"Click to quickly add a predefined protected area:"}),(0,b.jsx)("div",{className:"flex flex-wrap gap-2",children:["humans","studio","vault","calendar","prototyping"].map(a=>{let c=N?.some(b=>b.slug===a);return(0,b.jsxs)("button",{onClick:()=>{c||(G(!0),K(a),I(a.charAt(0).toUpperCase()+a.slice(1)))},disabled:c,className:`px-3 py-1.5 rounded-lg text-xs font-mono transition-colors ${c?"bg-green-500/10 text-green-400 cursor-default":"bg-white/5 text-white/60 hover:bg-white/10 hover:text-white"}`,children:[a,c&&(0,b.jsx)(s.Check,{className:"w-3 h-3 inline ml-1"})]},a)})})]})]})]})}):null}a.s(["default",()=>y])}];

//# sourceMappingURL=_f96f0341._.js.map