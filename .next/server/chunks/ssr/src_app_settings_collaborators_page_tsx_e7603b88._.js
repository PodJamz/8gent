module.exports=[299956,a=>{"use strict";var b=a.i(499969),c=a.i(863050),d=a.i(925440),e=a.i(567031),f=a.i(278739),g=a.i(189198),h=a.i(233849),i=a.i(135981);a.i(617620);var j=a.i(617864),k=a.i(579212),l=a.i(677409),m=a.i(894935),n=a.i(128002),o=a.i(390341),p=a.i(934),q=a.i(327428),r=a.i(324303),s=a.i(885275),t=a.i(887080),u=a.i(662482),v=a.i(847329);let w=i.api.passcodes,x=["ðŸ˜Ž","ðŸŽµ","ðŸŽ¸","ðŸŽ¹","ðŸŽ¤","ðŸŽ§","ðŸŽº","ðŸŽ·","ðŸ¥","ðŸŽ»","ðŸª•","ðŸŽ¼","ðŸ¦Š","ðŸ»","ðŸ¦","ðŸ¯","ðŸ¦„","ðŸŒŸ","âš¡","ðŸ”¥"],y=["from-orange-500 to-amber-500","from-blue-500 to-cyan-500","from-purple-500 to-pink-500","from-green-500 to-emerald-500","from-red-500 to-rose-500","from-indigo-500 to-violet-500","from-yellow-500 to-orange-500","from-teal-500 to-cyan-500"];function z(){let a=(0,d.useRouter)(),{isAuthenticated:i,isLoading:z}=(0,k.useAdminSession)(),[A,B]=(0,c.useState)(null),[C,D]=(0,c.useState)(""),[E,F]=(0,c.useState)(!1),[G,H]=(0,c.useState)(!1),[I,J]=(0,c.useState)(""),[K,L]=(0,c.useState)(""),[M,N]=(0,c.useState)("ðŸ˜Ž"),[O,P]=(0,c.useState)(y[0]),[Q,R]=(0,c.useState)(null),S=(0,h.useQuery)(w.listCollaboratorsAdmin),T=(0,h.useMutation)(w.upsertCollaborator),U=(0,h.useMutation)(w.deleteCollaborator),V=(0,h.useMutation)(w.seedCollaborators);(0,c.useEffect)(()=>{z||i||a.push("/settings")},[i,z,a]);let W=async()=>{if(!I.trim())return void R("Name is required");if(!K.trim())return void R("Slug is required");if(!C||6!==C.length||!/^\d+$/.test(C))return void R("Passcode must be exactly 6 digits");try{await T({slug:K.toLowerCase().replace(/\s+/g,"-"),displayName:I,avatarEmoji:M,avatarColor:O,passcode:C,isActive:!0,sortOrder:S?.length||0}),H(!1),_(),R(null)}catch(a){R("Failed to create collaborator")}},X=async a=>{if(!C||6!==C.length||!/^\d+$/.test(C))return void R("Passcode must be exactly 6 digits");try{await T({slug:a.slug,displayName:a.displayName,avatarEmoji:a.avatarEmoji,avatarColor:a.avatarColor,passcode:C,isActive:a.isActive,sortOrder:a.sortOrder}),B(null),D(""),R(null)}catch(a){R("Failed to update passcode")}},Y=async a=>{if(confirm("Are you sure you want to delete this collaborator?"))try{await U({slug:a})}catch(a){R("Failed to delete collaborator")}},Z=async a=>{try{await T({slug:a.slug,displayName:a.displayName,avatarEmoji:a.avatarEmoji,avatarColor:a.avatarColor,isActive:!a.isActive,sortOrder:a.sortOrder})}catch(a){R("Failed to update collaborator")}},$=async()=>{try{await V({}),R(null)}catch(a){R("Failed to seed collaborators")}},_=()=>{J(""),L(""),D(""),N("ðŸ˜Ž"),P(y[0])};return z?(0,b.jsx)("div",{className:"min-h-screen bg-zinc-950 flex items-center justify-center",children:(0,b.jsx)(u.Loader2,{className:"w-8 h-8 animate-spin text-white/50"})}):i?(0,b.jsx)(j.PageTransition,{children:(0,b.jsxs)("div",{className:"min-h-screen bg-zinc-950",children:[(0,b.jsx)("header",{className:"sticky top-0 z-40 bg-zinc-950/80 backdrop-blur-xl border-b border-white/10",children:(0,b.jsxs)("div",{className:"max-w-lg mx-auto px-4 py-4 flex items-center gap-4",children:[(0,b.jsx)(g.default,{href:"/settings",className:"p-2 -ml-2 rounded-lg hover:bg-white/10 transition-colors","aria-label":"Go back to settings",children:(0,b.jsx)(l.ChevronLeft,{className:"w-5 h-5 text-white"})}),(0,b.jsxs)("div",{className:"flex-1",children:[(0,b.jsx)("h1",{className:"text-xl font-semibold text-white",children:"iPod Collaborators"}),(0,b.jsx)("p",{className:"text-xs text-white/50",children:"Manage music sharing access"})]}),(0,b.jsx)("div",{className:"w-8 h-8 rounded-lg bg-gradient-to-br from-emerald-500 to-teal-600 flex items-center justify-center",children:(0,b.jsx)(m.Users,{className:"w-4 h-4 text-white"})})]})}),(0,b.jsxs)("main",{className:"max-w-lg mx-auto px-4 py-6",children:[(0,b.jsx)(f.AnimatePresence,{children:Q&&(0,b.jsx)(e.motion.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},className:"mb-4 p-3 bg-red-500/10 border border-red-500/20 rounded-xl",children:(0,b.jsx)("p",{className:"text-sm text-red-400",children:Q})})}),(0,b.jsx)("div",{className:"mb-6 p-4 rounded-xl bg-white/5 border border-white/10",children:(0,b.jsxs)("div",{className:"flex items-start gap-3",children:[(0,b.jsx)(v.Music,{className:"w-5 h-5 text-emerald-400 flex-shrink-0 mt-0.5"}),(0,b.jsx)("div",{children:(0,b.jsx)("p",{className:"text-sm text-white/70",children:"iPod collaborators can access private music playlists using their 6-digit passcode. Each collaborator has their own avatar that appears in the carousel."})})]})}),S?.length===0&&(0,b.jsxs)("button",{onClick:$,className:"mb-4 w-full py-3 px-4 rounded-xl bg-emerald-500/10 border border-emerald-500/30 hover:bg-emerald-500/20 text-emerald-400 transition-colors flex items-center justify-center gap-2",children:[(0,b.jsx)(m.Users,{className:"w-4 h-4"}),"Seed Default Collaborators (Owner, Team, Admins)"]}),(0,b.jsx)("div",{className:"space-y-3",children:void 0===S?(0,b.jsx)("div",{className:"flex justify-center py-8",children:(0,b.jsx)(u.Loader2,{className:"w-6 h-6 animate-spin text-white/50"})}):0===S.length?(0,b.jsxs)("div",{className:"text-center py-8",children:[(0,b.jsx)(m.Users,{className:"w-12 h-12 mx-auto mb-3 text-white/20"}),(0,b.jsx)("p",{className:"text-white/50",children:"No collaborators yet"})]}):S.map(a=>(0,b.jsx)(e.motion.div,{layout:!0,className:"p-4 rounded-xl bg-white/5 border border-white/10",children:A===a.slug?(0,b.jsxs)("div",{className:"space-y-3",children:[(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[(0,b.jsx)("div",{className:`w-12 h-12 rounded-full bg-gradient-to-br ${a.avatarColor} flex items-center justify-center text-2xl`,children:a.avatarEmoji}),(0,b.jsxs)("div",{children:[(0,b.jsx)("span",{className:"text-white font-medium",children:a.displayName}),(0,b.jsx)("p",{className:"text-xs text-white/40 font-mono",children:a.slug})]})]}),(0,b.jsxs)("div",{className:"relative",children:[(0,b.jsx)("input",{type:E?"text":"password",value:C,onChange:a=>{D(a.target.value.replace(/\D/g,"").slice(0,6))},placeholder:"Enter new 6-digit passcode",className:"w-full px-3 py-2 pr-10 bg-white/5 border border-white/20 rounded-lg text-white text-center text-lg tracking-[0.5em] font-mono placeholder:text-white/30 focus:outline-none focus:ring-2 focus:ring-emerald-500/50",maxLength:6,inputMode:"numeric",autoFocus:!0}),(0,b.jsx)("button",{type:"button",onClick:()=>F(!E),className:"absolute right-2 top-1/2 -translate-y-1/2 p-1 text-white/40 hover:text-white/70",children:E?(0,b.jsx)(r.EyeOff,{className:"w-4 h-4"}):(0,b.jsx)(q.Eye,{className:"w-4 h-4"})})]}),(0,b.jsxs)("div",{className:"flex gap-2",children:[(0,b.jsxs)("button",{onClick:()=>X(a),disabled:6!==C.length,className:"flex-1 py-2 px-3 bg-emerald-500 hover:bg-emerald-600 disabled:bg-white/10 disabled:text-white/30 rounded-lg text-white text-sm font-medium transition-colors flex items-center justify-center gap-2",children:[(0,b.jsx)(s.Check,{className:"w-4 h-4"}),"Update Passcode"]}),(0,b.jsx)("button",{onClick:()=>{B(null),D(""),R(null)},className:"py-2 px-3 bg-white/10 hover:bg-white/20 rounded-lg text-white text-sm transition-colors",children:(0,b.jsx)(t.X,{className:"w-4 h-4"})})]})]}):(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[(0,b.jsx)("div",{className:`w-12 h-12 rounded-full bg-gradient-to-br ${a.avatarColor} flex items-center justify-center text-2xl shadow-lg`,children:a.avatarEmoji}),(0,b.jsxs)("div",{className:"flex-1",children:[(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)("span",{className:"text-white font-medium",children:a.displayName}),!a.isActive&&(0,b.jsx)("span",{className:"text-xs text-white/40 bg-white/10 px-2 py-0.5 rounded",children:"Disabled"})]}),(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)("span",{className:"text-xs text-white/40 font-mono",children:a.slug}),a.lastAccessAt&&(0,b.jsxs)("span",{className:"text-xs text-white/30",children:["Last: ",new Date(a.lastAccessAt).toLocaleDateString()]})]})]}),(0,b.jsxs)("div",{className:"flex items-center gap-1",children:[(0,b.jsx)("button",{onClick:()=>Z(a),className:`p-2 rounded-lg transition-colors ${a.isActive?"text-green-400 hover:bg-green-500/10":"text-white/40 hover:bg-white/10"}`,title:a.isActive?"Disable":"Enable",children:a.isActive?(0,b.jsx)(s.Check,{className:"w-4 h-4"}):(0,b.jsx)(t.X,{className:"w-4 h-4"})}),(0,b.jsx)("button",{onClick:()=>{B(a.slug),D("")},className:"p-2 text-white/40 hover:text-white hover:bg-white/10 rounded-lg transition-colors",title:"Change passcode",children:(0,b.jsx)(p.Edit2,{className:"w-4 h-4"})}),(0,b.jsx)("button",{onClick:()=>Y(a.slug),className:"p-2 text-white/40 hover:text-red-400 hover:bg-red-500/10 rounded-lg transition-colors",title:"Delete",children:(0,b.jsx)(o.Trash2,{className:"w-4 h-4"})})]})]})},a._id))}),(0,b.jsx)(f.AnimatePresence,{children:G?(0,b.jsxs)(e.motion.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:20},className:"mt-4 p-4 rounded-xl bg-white/5 border border-emerald-500/30",children:[(0,b.jsx)("h3",{className:"text-white font-medium mb-3",children:"Add Collaborator"}),(0,b.jsxs)("div",{className:"space-y-3",children:[(0,b.jsx)("div",{className:"flex justify-center",children:(0,b.jsx)("div",{className:`w-16 h-16 rounded-full bg-gradient-to-br ${O} flex items-center justify-center text-3xl shadow-lg`,children:M})}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"text-xs text-white/50 mb-1 block",children:"Avatar Emoji"}),(0,b.jsx)("div",{className:"flex flex-wrap gap-1",children:x.map(a=>(0,b.jsx)("button",{onClick:()=>N(a),className:`w-8 h-8 rounded-lg text-lg transition-all ${M===a?"bg-white/20 ring-2 ring-emerald-500":"bg-white/5 hover:bg-white/10"}`,children:a},a))})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"text-xs text-white/50 mb-1 block",children:"Avatar Color"}),(0,b.jsx)("div",{className:"flex flex-wrap gap-2",children:y.map(a=>(0,b.jsx)("button",{onClick:()=>P(a),className:`w-8 h-8 rounded-full bg-gradient-to-br ${a} transition-all ${O===a?"ring-2 ring-white ring-offset-2 ring-offset-zinc-950":"opacity-60 hover:opacity-100"}`},a))})]}),(0,b.jsx)("input",{type:"text",value:I,onChange:a=>{J(a.target.value),L(a.target.value.toLowerCase().replace(/\s+/g,"-"))},placeholder:"Display name (e.g., Admin)",className:"w-full px-3 py-2 bg-white/5 border border-white/20 rounded-lg text-white placeholder:text-white/30 focus:outline-none focus:ring-2 focus:ring-emerald-500/50"}),(0,b.jsx)("input",{type:"text",value:K,onChange:a=>L(a.target.value.toLowerCase().replace(/\s+/g,"-")),placeholder:"Slug (e.g., admin)",className:"w-full px-3 py-2 bg-white/5 border border-white/20 rounded-lg text-white font-mono placeholder:text-white/30 focus:outline-none focus:ring-2 focus:ring-emerald-500/50"}),(0,b.jsxs)("div",{className:"relative",children:[(0,b.jsx)("input",{type:E?"text":"password",value:C,onChange:a=>{D(a.target.value.replace(/\D/g,"").slice(0,6))},placeholder:"6-digit passcode",className:"w-full px-3 py-2 pr-10 bg-white/5 border border-white/20 rounded-lg text-white text-center text-lg tracking-[0.5em] font-mono placeholder:text-white/30 focus:outline-none focus:ring-2 focus:ring-emerald-500/50",maxLength:6,inputMode:"numeric"}),(0,b.jsx)("button",{type:"button",onClick:()=>F(!E),className:"absolute right-2 top-1/2 -translate-y-1/2 p-1 text-white/40 hover:text-white/70",children:E?(0,b.jsx)(r.EyeOff,{className:"w-4 h-4"}):(0,b.jsx)(q.Eye,{className:"w-4 h-4"})})]}),(0,b.jsxs)("div",{className:"flex gap-2",children:[(0,b.jsxs)("button",{onClick:W,disabled:!I.trim()||!K.trim()||6!==C.length,className:"flex-1 py-2 px-3 bg-emerald-500 hover:bg-emerald-600 disabled:bg-white/10 disabled:text-white/30 rounded-lg text-white text-sm font-medium transition-colors flex items-center justify-center gap-2",children:[(0,b.jsx)(s.Check,{className:"w-4 h-4"}),"Add Collaborator"]}),(0,b.jsx)("button",{onClick:()=>{H(!1),_(),R(null)},className:"py-2 px-3 bg-white/10 hover:bg-white/20 rounded-lg text-white text-sm transition-colors",children:"Cancel"})]})]})]}):(0,b.jsxs)(e.motion.button,{initial:{opacity:0},animate:{opacity:1},onClick:()=>H(!0),className:"mt-4 w-full py-3 px-4 rounded-xl bg-white/5 border border-dashed border-white/20 hover:bg-white/10 hover:border-white/30 text-white/60 hover:text-white transition-all flex items-center justify-center gap-2",children:[(0,b.jsx)(n.Plus,{className:"w-4 h-4"}),"Add Collaborator"]})})]})]})}):null}a.s(["default",()=>z])}];

//# sourceMappingURL=src_app_settings_collaborators_page_tsx_e7603b88._.js.map