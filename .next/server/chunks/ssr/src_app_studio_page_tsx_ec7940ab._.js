module.exports=[887844,a=>{"use strict";var b=a.i(499969),c=a.i(729856),d=a.i(863050),e=a.i(567031),f=a.i(278739),g=a.i(794159),h=a.i(189198),i=a.i(597006),j=a.i(491538),k=a.i(436995),l=a.i(282902),m=a.i(588655),n=a.i(588040),o=a.i(113752),p=a.i(199490),q=a.i(342725),r=a.i(443305),s=a.i(422720),t=a.i(803410),u=a.i(847329),v=a.i(529973),w=a.i(970866),w=w,x=a.i(128002),y=a.i(906300),z=a.i(359572),z=z,A=a.i(334582),A=A,B=a.i(330790),C=a.i(120339),D=a.i(608831),E=a.i(227828),F=a.i(596682),G=a.i(292606),H=a.i(887080),I=a.i(662482),J=a.i(742926),K=a.i(915936),L=a.i(217484),M=a.i(311970),N=a.i(352219),O=a.i(748604),O=O,P=a.i(396217),P=P,Q=a.i(468563),R=a.i(712957),S=a.i(858025);a.i(617620);var T=a.i(617864);let U=["bg-violet-500","bg-cyan-500","bg-pink-500","bg-amber-500","bg-emerald-500","bg-rose-500","bg-blue-500","bg-orange-500","bg-indigo-500","bg-teal-500"],V={"bg-violet-500":"#8b5cf6","bg-cyan-500":"#06b6d4","bg-pink-500":"#ec4899","bg-amber-500":"#f59e0b","bg-emerald-500":"#10b981","bg-rose-500":"#f43f5e","bg-blue-500":"#3b82f6","bg-orange-500":"#f97316","bg-indigo-500":"#6366f1","bg-teal-500":"#14b8a6"};function W(){return`${Date.now()}-${Math.random().toString(36).slice(2,9)}`}function X(a="Untitled Project"){return{id:W(),name:a,bpm:120,timeSignature:[4,4],createdAt:Date.now(),updatedAt:Date.now(),tracks:[],loopStart:0,loopEnd:16,loopEnabled:!0}}function Y(a,b="audio",c){let d=U[c??Math.floor(Math.random()*U.length)];return{id:W(),name:a,type:b,color:d,volume:.8,pan:0,mute:!1,solo:!1,armed:!1,clips:[]}}function Z(a,b,c,d){return{id:W(),name:a,startBeat:b,lengthBeats:c,audioUrl:d,gain:1}}function $(a){let b=a.numberOfChannels,c=a.sampleRate,d=2*b,e=a.length*d,f=44+e,g=new ArrayBuffer(f),h=new DataView(g);_(h,0,"RIFF"),h.setUint32(4,f-8,!0),_(h,8,"WAVE"),_(h,12,"fmt "),h.setUint32(16,16,!0),h.setUint16(20,1,!0),h.setUint16(22,b,!0),h.setUint32(24,c,!0),h.setUint32(28,c*d,!0),h.setUint16(32,d,!0),h.setUint16(34,16,!0),_(h,36,"data"),h.setUint32(40,e,!0);let i=[];for(let c=0;c<b;c++)i.push(a.getChannelData(c));let j=44;for(let c=0;c<a.length;c++)for(let a=0;a<b;a++){let b=Math.max(-1,Math.min(1,i[a][c])),d=b<0?32768*b:32767*b;h.setInt16(j,d,!0),j+=2}return new Blob([g],{type:"audio/wav"})}function _(a,b,c){for(let d=0;d<c.length;d++)a.setUint8(b+d,c.charCodeAt(d))}let aa=null;async function ab(){return aa||(aa=a.A(654157).then(a=>a.default||a)),aa}async function ac(a,b={}){let{sampleRate:c=a.sampleRate,bitRate:d=192,channels:e=a.numberOfChannels}=b,f=new(await ab()).Mp3Encoder(Math.min(e,2),c,d),g=[],h=a.getChannelData(0),i=e>1?a.getChannelData(1):h,j=ad(h),k=ad(i),l=Math.ceil(j.length/1152);for(let a=0;a<l;a++){let b=1152*a,c=Math.min(b+1152,j.length),d=j.subarray(b,c),e=k.subarray(b,c),h=f.encodeBuffer(d,e);h.length>0&&g.push(h)}let m=f.flush();m.length>0&&g.push(m);let n=new Uint8Array(g.reduce((a,b)=>a+b.length,0)),o=0;for(let a of g)n.set(new Uint8Array(a.buffer,a.byteOffset,a.length),o),o+=a.length;return new Blob([n],{type:"audio/mp3"})}function ad(a){let b=new Int16Array(a.length);for(let c=0;c<a.length;c++){let d=Math.max(-1,Math.min(1,a[c]));b[c]=d<0?32768*d:32767*d}return b}process.env.NEXT_PUBLIC_STEM_API_ENDPOINT;var ae=a.i(217201),af=a.i(93016),ag=a.i(683560),ah=a.i(897690),ai=a.i(282763),aj=a.i(390341),ak=a.i(644469),al=a.i(131752),am=a.i(728660),an=a.i(456819),ao=a.i(368114),ap=a.i(233849),aq=a.i(135981);let ar={podcastIntro:{prompt:"upbeat professional podcast intro, modern electronic, clean production",duration:15,bpm:120,key:"C major"},lofi:{prompt:"lo-fi hip hop study beats, vinyl crackle, mellow piano, soft drums, rainy day mood",duration:120,bpm:85,key:"F major"},epicTrailer:{prompt:"cinematic orchestral trailer music, building tension, brass swells, timpani, heroic",duration:60,bpm:90,key:"D minor"},ambient:{prompt:"peaceful ambient soundscape, soft pads, nature sounds, meditation music",duration:180,bpm:60,key:"A minor"},edm:{prompt:"high energy EDM, festival drop, punchy kick, saw wave lead, side-chain compression",duration:180,bpm:128,key:"F minor"},acoustic:{prompt:"warm acoustic folk, fingerpicked guitar, soft vocals, campfire vibes",duration:120,bpm:100,key:"G major"}},as=["C major","C minor","C# major","C# minor","D major","D minor","D# major","D# minor","E major","E minor","F major","F minor","F# major","F# minor","G major","G minor","G# major","G# minor","A major","A minor","A# major","A# minor","B major","B minor","Bb major","Bb minor"],at=["4/4","3/4","6/8","2/4","5/4","7/8"],au=[{code:"en",label:"English"},{code:"zh",label:"Chinese"},{code:"ja",label:"Japanese"},{code:"ko",label:"Korean"},{code:"es",label:"Spanish"},{code:"fr",label:"French"},{code:"de",label:"German"},{code:"it",label:"Italian"},{code:"pt",label:"Portuguese"},{code:"ru",label:"Russian"},{code:"hi",label:"Hindi"},{code:"ar",label:"Arabic"},{code:"th",label:"Thai"},{code:"vi",label:"Vietnamese"},{code:"nl",label:"Dutch"},{code:"bn",label:"Bengali"}],av=["mp3","wav","flac"],aw=[{value:"text2music",label:"Text to Music"},{value:"cover",label:"Cover / Style Transfer"},{value:"repaint",label:"Repaint (Edit Section)"}];function ax({onAddToArrange:a,projectId:c,colors:h}){let i=(0,g.useReducedMotion)(),[j,m]=(0,d.useState)(""),[n,o]=(0,d.useState)(""),[p,q]=(0,d.useState)(!1),[r,s]=(0,d.useState)(30),[t,v]=(0,d.useState)(void 0),[w,y]=(0,d.useState)(void 0),[z,A]=(0,d.useState)("4/4"),[B,C]=(0,d.useState)(""),[D,E]=(0,d.useState)(""),[G,H]=(0,d.useState)("mp3"),[K,L]=(0,d.useState)("en"),[M,N]=(0,d.useState)(void 0),[O,P]=(0,d.useState)(.5),[Q,R]=(0,d.useState)(""),S=(0,d.useRef)(null),[T,U]=(0,d.useState)(!1),[V,W]=(0,d.useState)(!1),[X,Y]=(0,d.useState)(void 0),[Z,$]=(0,d.useState)(void 0),[_,aa]=(0,d.useState)(void 0),[ab,ac]=(0,d.useState)(1),[ad,ax]=(0,d.useState)("text2music"),{generate:ay,isGenerating:az,progress:aA,message:aB,error:aC,result:aD,reset:aE}=function(){let[a,b]=(0,d.useState)({status:"idle",progress:0,message:"",result:null,error:null}),c=(0,d.useRef)(null),e=(0,d.useRef)(null),f=(0,ap.useMutation)(aq.api.musicGeneration.createJob),g=(0,ap.useMutation)(aq.api.musicGeneration.startJob),h=(0,ap.useMutation)(aq.api.musicGeneration.completeJob),i=(0,ap.useMutation)(aq.api.musicGeneration.failJob),j=(0,d.useCallback)(async()=>{try{let a=await fetch("/api/music/generate",{method:"GET"});return await a.json()}catch{return{available:!1,reason:"Connection failed"}}},[]),k=(0,d.useCallback)(async a=>{c.current&&c.current.abort(),c.current=new AbortController,b({status:"generating",progress:0,message:"Starting music generation...",result:null,error:null});try{let d=null;try{e.current=d=await f({prompt:a.prompt,lyrics:a.lyrics,duration:a.duration||30,bpm:a.bpm,key:a.key,timeSignature:a.timeSignature,title:a.title}),await g({jobId:d})}catch(a){console.warn("[useMusicGeneration] Convex job creation failed (user may not be authenticated):",a)}let i=setInterval(()=>{b(a=>{var b;if("generating"!==a.status)return a;let c=Math.min(a.progress+15*Math.random(),90);return{...a,progress:c,message:(b=c)<20?"Initializing models...":b<40?"Processing prompt...":b<60?"Generating audio...":b<80?"Applying effects...":"Finalizing..."}})},2e3),j=await fetch("/api/music/generate",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({...a,action:"generate"}),signal:c.current.signal});if(clearInterval(i),!j.ok){let a=await j.json();throw Error(a.error||"Generation failed")}let k=await j.json();if(d&&k.audioUrl)try{await h({jobId:d,audioUrl:k.audioUrl,metadata:{actualBpm:k.metadata.bpm,actualKey:k.metadata.key,actualDuration:k.duration,model:k.metadata.model,lmModel:k.metadata.lmModel}})}catch(a){console.warn("[useMusicGeneration] Convex job completion failed:",a)}return b({status:"completed",progress:100,message:"Music generated successfully!",result:k,error:null}),k}catch(c){if(c instanceof Error&&"AbortError"===c.name)return b(a=>({...a,status:"idle",progress:0,message:"Generation cancelled"})),null;let a=c instanceof Error?c.message:"Generation failed";if(e.current)try{await i({jobId:e.current,error:a})}catch(a){console.warn("[useMusicGeneration] Convex job failure recording failed:",a)}return b({status:"error",progress:0,message:a,result:null,error:a}),null}},[f,g,h,i]),l=(0,d.useCallback)(async(a,c)=>{b({status:"analyzing",progress:50,message:"Analyzing audio...",result:null,error:null});try{let d=await fetch("/api/music/generate",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({action:"analyze",audioUrl:a,extract:c||["bpm","key","time_signature","caption"]})});if(!d.ok){let a=await d.json();throw Error(a.error||"Analysis failed")}let e=await d.json();return b({status:"completed",progress:100,message:"Analysis complete!",result:null,error:null}),e}catch(c){let a=c instanceof Error?c.message:"Analysis failed";return b({status:"error",progress:0,message:a,result:null,error:a}),null}},[]),m=(0,d.useCallback)(async(a,c)=>{b({status:"separating",progress:30,message:"Separating stems...",result:null,error:null});try{let d=await fetch("/api/music/generate",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({action:"separate",audioUrl:a,stems:c||["vocals","drums","bass","other"]})});if(!d.ok){let a=await d.json();throw Error(a.error||"Stem separation failed")}let e=await d.json();return b({status:"completed",progress:100,message:"Stems separated!",result:null,error:null}),e}catch(c){let a=c instanceof Error?c.message:"Stem separation failed";return b({status:"error",progress:0,message:a,result:null,error:a}),null}},[]),n=(0,d.useCallback)(()=>{c.current&&(c.current.abort(),c.current=null)},[]),o=(0,d.useCallback)(()=>{n(),b({status:"idle",progress:0,message:"",result:null,error:null})},[n]);return{...a,isGenerating:"generating"===a.status,isAnalyzing:"analyzing"===a.status,isSeparating:"separating"===a.status,isProcessing:["generating","analyzing","separating"].includes(a.status),generate:k,analyze:l,separateStems:m,checkAvailability:j,cancel:n,reset:o}}(),aF=c&&/^[a-z0-9]{16,}$/i.test(c),aG=(0,ap.useQuery)(aq.api.musicGeneration.getGeneratedTracks,{projectId:aF?c:void 0,limit:50}),aH=(0,ap.useMutation)(aq.api.musicGeneration.deleteTrack),aI=(aG||[]).map(a=>({_id:a._id,title:a.title,prompt:a.prompt,audioUrl:a.audioUrl,duration:a.duration,bpm:a.bpm,key:a.key,timeSignature:a.timeSignature,createdAt:a.createdAt})),[aJ,aK]=(0,d.useState)(null),aL=(0,d.useRef)(null),aM=void 0===aG,aN=(0,d.useCallback)(a=>{let b=ar[a];m(b.prompt),s(b.duration),v(b.bpm),y(b.key),E(a)},[]),aO=(0,d.useCallback)(a=>{let b=a.target.files?.[0];b&&(R(b.name),N(URL.createObjectURL(b)))},[]),aP=(0,d.useCallback)(async()=>{if(!j.trim())return;let a={prompt:j.trim(),lyrics:n.trim()||void 0,duration:r,bpm:t,key:w,timeSignature:z,title:B.trim()||void 0,format:G,vocalLanguage:K,referenceAudio:M,referenceStrength:M?O:void 0,thinking:V,inferenceSteps:X,guidanceScale:Z,seed:_,batchSize:ab>1?ab:void 0,taskType:"text2music"!==ad?ad:void 0,saveToJamz:!0,projectId:c};await ay(a)},[j,n,r,t,w,z,B,G,K,M,O,V,X,Z,_,ab,ad,c,ay]),aQ=(0,d.useCallback)(a=>{if(aJ===a._id)aL.current?.pause(),aK(null);else{aL.current&&aL.current.pause();let b=new Audio(a.audioUrl);b.onended=()=>aK(null),b.play(),aL.current=b,aK(a._id)}},[aJ]),aR=(0,d.useCallback)(b=>{a?.({audioUrl:b.audioUrl,title:b.title,duration:b.duration,bpm:b.bpm,key:b.key})},[a]),aS=(0,d.useCallback)(async a=>{aJ===a&&(aL.current?.pause(),aK(null));try{await aH({trackId:a})}catch(a){console.error("[GenerateView] Failed to delete track:",a)}},[aJ,aH]),aT=a=>a<60?`${a}s`:`${Math.floor(a/60)}m ${a%60}s`;return(0,b.jsxs)("div",{className:"flex-1 flex flex-col lg:flex-row gap-0 overflow-hidden",children:[(0,b.jsx)("div",{className:`flex-1 overflow-y-auto p-4 lg:p-6 border-r ${h.border}`,children:(0,b.jsxs)("div",{className:"max-w-xl mx-auto space-y-5",children:[(0,b.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,b.jsx)(J.Sparkles,{className:"w-5 h-5 text-purple-500"}),(0,b.jsx)("h2",{className:`text-base font-semibold ${h.text}`,children:"AI Music Generator"})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)("label",{className:`text-xs font-medium ${h.textMuted}`,children:"Quick Presets"}),(0,b.jsx)("div",{className:"flex flex-wrap gap-1.5",children:Object.keys(ar).map(a=>(0,b.jsx)("button",{onClick:()=>aN(a),disabled:az,className:(0,ao.cn)("px-2.5 py-1.5 text-xs rounded-lg transition-colors min-h-[32px] touch-manipulation","focus:outline-none focus:ring-2 focus:ring-purple-500",D===a?"bg-purple-600 text-white":`${h.card} ${h.textMuted} border ${h.border} hover:border-purple-500/50`),children:a.charAt(0).toUpperCase()+a.slice(1).replace(/([A-Z])/g," $1")},a))})]}),(0,b.jsxs)("div",{className:"space-y-1.5",children:[(0,b.jsx)("label",{htmlFor:"gen-prompt",className:`text-xs font-medium ${h.textMuted}`,children:"Style Description *"}),(0,b.jsx)("textarea",{id:"gen-prompt",placeholder:"Describe the music: genre, instruments, mood, production style...",value:j,onChange:a=>m(a.target.value),disabled:az,rows:3,className:`w-full px-3 py-2.5 ${h.card} border ${h.border} rounded-lg text-sm resize-none focus:outline-none focus:ring-2 focus:ring-purple-500 ${h.text} placeholder:${h.textFaint}`})]}),(0,b.jsxs)("div",{className:"space-y-1.5",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsx)("label",{className:`text-xs font-medium ${h.textMuted}`,children:"Lyrics"}),(0,b.jsx)("button",{onClick:()=>q(!p),disabled:az,className:`text-xs ${h.textFaint} hover:text-purple-400 transition-colors`,children:p?"Hide":"Add Lyrics"})]}),(0,b.jsx)(f.AnimatePresence,{children:p&&(0,b.jsxs)(e.motion.div,{initial:i?{opacity:1}:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:i?{opacity:0}:{opacity:0,height:0},className:"space-y-2",children:[(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)(al.Globe,{className:"w-3.5 h-3.5 text-purple-400"}),(0,b.jsx)("select",{value:K,onChange:a=>L(a.target.value),disabled:az,className:`text-xs px-2 py-1 ${h.card} border ${h.border} rounded-md ${h.text} focus:ring-2 focus:ring-purple-500`,"aria-label":"Vocal language",children:au.map(a=>(0,b.jsx)("option",{value:a.code,children:a.label},a.code))})]}),(0,b.jsx)("textarea",{placeholder:"[Verse]\nYour lyrics here...\n\n[Chorus]\nCatchy hook...\n\n[Instrumental] for no vocals",value:n,onChange:a=>o(a.target.value),disabled:az,rows:5,className:`w-full px-3 py-2.5 ${h.card} border ${h.border} rounded-lg font-mono text-xs resize-none focus:outline-none focus:ring-2 focus:ring-purple-500 ${h.text}`})]})})]}),(0,b.jsxs)("div",{className:"space-y-1.5",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsx)("label",{className:`text-xs font-medium ${h.textMuted}`,children:"Duration"}),(0,b.jsx)("span",{className:`text-xs tabular-nums ${h.textFaint}`,children:aT(r)})]}),(0,b.jsx)("input",{type:"range",value:r,onChange:a=>s(parseInt(a.target.value)),min:10,max:300,step:5,disabled:az,className:"w-full accent-purple-500","aria-label":"Duration"}),(0,b.jsxs)("div",{className:`flex justify-between text-[10px] ${h.textFaint}`,children:[(0,b.jsx)("span",{children:"10s"}),(0,b.jsx)("span",{children:"5 min"})]})]}),(0,b.jsxs)("div",{className:"grid grid-cols-2 sm:grid-cols-4 gap-3",children:[(0,b.jsxs)("div",{className:"space-y-1",children:[(0,b.jsx)("label",{htmlFor:"gen-bpm",className:`text-[10px] font-medium ${h.textMuted}`,children:"BPM"}),(0,b.jsx)("input",{id:"gen-bpm",type:"number",placeholder:"Auto",value:t??"",onChange:a=>v(a.target.value?parseInt(a.target.value):void 0),min:30,max:300,disabled:az,className:`w-full px-2 py-2 ${h.card} border ${h.border} rounded-lg text-xs ${h.text} focus:ring-2 focus:ring-purple-500 min-h-[36px]`})]}),(0,b.jsxs)("div",{className:"space-y-1",children:[(0,b.jsx)("label",{className:`text-[10px] font-medium ${h.textMuted}`,children:"Key"}),(0,b.jsxs)("select",{value:w??"",onChange:a=>y(a.target.value||void 0),disabled:az,className:`w-full px-2 py-2 ${h.card} border ${h.border} rounded-lg text-xs ${h.text} focus:ring-2 focus:ring-purple-500 min-h-[36px]`,"aria-label":"Key",children:[(0,b.jsx)("option",{value:"",children:"Auto"}),as.map(a=>(0,b.jsx)("option",{value:a,children:a},a))]})]}),(0,b.jsxs)("div",{className:"space-y-1",children:[(0,b.jsx)("label",{className:`text-[10px] font-medium ${h.textMuted}`,children:"Time Sig"}),(0,b.jsx)("select",{value:z,onChange:a=>A(a.target.value),disabled:az,className:`w-full px-2 py-2 ${h.card} border ${h.border} rounded-lg text-xs ${h.text} focus:ring-2 focus:ring-purple-500 min-h-[36px]`,"aria-label":"Time signature",children:at.map(a=>(0,b.jsx)("option",{value:a,children:a},a))})]}),(0,b.jsxs)("div",{className:"space-y-1",children:[(0,b.jsx)("label",{className:`text-[10px] font-medium ${h.textMuted}`,children:"Format"}),(0,b.jsx)("select",{value:G,onChange:a=>H(a.target.value),disabled:az,className:`w-full px-2 py-2 ${h.card} border ${h.border} rounded-lg text-xs ${h.text} focus:ring-2 focus:ring-purple-500 min-h-[36px]`,"aria-label":"Output format",children:av.map(a=>(0,b.jsx)("option",{value:a,children:a.toUpperCase()},a))})]})]}),(0,b.jsxs)("div",{className:"space-y-1.5",children:[(0,b.jsx)("label",{className:`text-xs font-medium ${h.textMuted}`,children:"Reference Audio (Style Transfer)"}),(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)("input",{ref:S,type:"file",accept:"audio/*",onChange:aO,className:"sr-only","aria-label":"Upload reference audio"}),(0,b.jsxs)("button",{onClick:()=>S.current?.click(),disabled:az,className:(0,ao.cn)("flex items-center gap-2 px-3 py-2 rounded-lg text-xs min-h-[36px] transition-colors touch-manipulation","focus:outline-none focus:ring-2 focus:ring-purple-500",`${h.card} border ${h.border} ${h.textMuted} hover:border-purple-500/50`),children:[(0,b.jsx)(F.Upload,{className:"w-3.5 h-3.5"}),Q||"Upload audio file"]}),M&&(0,b.jsx)("button",{onClick:()=>{N(void 0),R("")},className:`p-1.5 rounded ${h.textFaint} hover:text-red-400 transition-colors`,"aria-label":"Remove reference audio",children:(0,b.jsx)(af.XCircle,{className:"w-4 h-4"})})]}),M&&(0,b.jsxs)("div",{className:"space-y-1",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsx)("span",{className:`text-[10px] ${h.textFaint}`,children:"Style Strength"}),(0,b.jsxs)("span",{className:`text-[10px] tabular-nums ${h.textFaint}`,children:[Math.round(100*O),"%"]})]}),(0,b.jsx)("input",{type:"range",value:O,onChange:a=>P(parseFloat(a.target.value)),min:0,max:1,step:.05,disabled:az,className:"w-full accent-purple-500","aria-label":"Reference strength"})]})]}),(0,b.jsxs)("div",{className:"space-y-1.5",children:[(0,b.jsx)("label",{htmlFor:"gen-title",className:`text-xs font-medium ${h.textMuted}`,children:"Track Title"}),(0,b.jsx)("input",{id:"gen-title",type:"text",placeholder:"Optional title",value:B,onChange:a=>C(a.target.value),disabled:az,className:`w-full px-3 py-2 ${h.card} border ${h.border} rounded-lg text-sm ${h.text} focus:ring-2 focus:ring-purple-500 min-h-[36px]`})]}),(0,b.jsxs)("div",{className:`border ${h.border} rounded-lg overflow-hidden`,children:[(0,b.jsxs)("button",{onClick:()=>U(!T),className:(0,ao.cn)("w-full flex items-center justify-between px-3 py-2.5 text-xs font-medium min-h-[40px] transition-colors touch-manipulation","focus:outline-none focus:ring-2 focus:ring-purple-500 focus:ring-inset",`${h.card} ${h.textMuted} hover:${h.text}`),"aria-expanded":T,children:[(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)(ak.Settings2,{className:"w-3.5 h-3.5"}),"Advanced Settings"]}),T?(0,b.jsx)(ah.ChevronUp,{className:"w-3.5 h-3.5"}):(0,b.jsx)(ag.ChevronDown,{className:"w-3.5 h-3.5"})]}),(0,b.jsx)(f.AnimatePresence,{children:T&&(0,b.jsx)(e.motion.div,{initial:i?{opacity:1}:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:i?{opacity:0}:{opacity:0,height:0},className:`px-3 pb-3 space-y-3 border-t ${h.border}`,children:(0,b.jsxs)("div",{className:"pt-3 grid grid-cols-2 gap-3",children:[(0,b.jsxs)("div",{className:"space-y-1 col-span-2",children:[(0,b.jsx)("label",{className:`text-[10px] font-medium ${h.textMuted}`,children:"Task Type"}),(0,b.jsx)("select",{value:ad,onChange:a=>ax(a.target.value),disabled:az,className:`w-full px-2 py-2 ${h.card} border ${h.border} rounded-lg text-xs ${h.text} focus:ring-2 focus:ring-purple-500 min-h-[36px]`,"aria-label":"Task type",children:aw.map(a=>(0,b.jsx)("option",{value:a.value,children:a.label},a.value))})]}),(0,b.jsxs)("div",{className:"flex items-center gap-2 col-span-2",children:[(0,b.jsx)("input",{type:"checkbox",id:"gen-thinking",checked:V,onChange:a=>W(a.target.checked),disabled:az,className:"h-4 w-4 accent-purple-500 rounded"}),(0,b.jsx)("label",{htmlFor:"gen-thinking",className:`text-xs ${h.textMuted}`,children:"Thinking Mode (5Hz LM - higher quality, slower)"})]}),(0,b.jsxs)("div",{className:"space-y-1",children:[(0,b.jsx)("label",{className:`text-[10px] font-medium ${h.textMuted}`,children:"Steps"}),(0,b.jsx)("input",{type:"number",placeholder:"8",value:X??"",onChange:a=>Y(a.target.value?parseInt(a.target.value):void 0),min:1,max:200,disabled:az,className:`w-full px-2 py-2 ${h.card} border ${h.border} rounded-lg text-xs ${h.text} focus:ring-2 focus:ring-purple-500 min-h-[36px]`})]}),(0,b.jsxs)("div",{className:"space-y-1",children:[(0,b.jsx)("label",{className:`text-[10px] font-medium ${h.textMuted}`,children:"Guidance"}),(0,b.jsx)("input",{type:"number",placeholder:"7.0",value:Z??"",onChange:a=>$(a.target.value?parseFloat(a.target.value):void 0),step:.5,disabled:az,className:`w-full px-2 py-2 ${h.card} border ${h.border} rounded-lg text-xs ${h.text} focus:ring-2 focus:ring-purple-500 min-h-[36px]`})]}),(0,b.jsxs)("div",{className:"space-y-1",children:[(0,b.jsx)("label",{className:`text-[10px] font-medium ${h.textMuted}`,children:"Seed"}),(0,b.jsx)("input",{type:"number",placeholder:"Random",value:_??"",onChange:a=>aa(a.target.value?parseInt(a.target.value):void 0),disabled:az,className:`w-full px-2 py-2 ${h.card} border ${h.border} rounded-lg text-xs ${h.text} focus:ring-2 focus:ring-purple-500 min-h-[36px]`})]}),(0,b.jsxs)("div",{className:"space-y-1",children:[(0,b.jsx)("label",{htmlFor:"gen-batch",className:`text-[10px] font-medium ${h.textMuted}`,children:"Batch"}),(0,b.jsx)("input",{id:"gen-batch",type:"number",value:ab,onChange:a=>ac(Math.max(1,Math.min(8,parseInt(a.target.value)||1))),min:1,max:8,disabled:az,className:`w-full px-2 py-2 ${h.card} border ${h.border} rounded-lg text-xs ${h.text} focus:ring-2 focus:ring-purple-500 min-h-[36px]`})]})]})})})]}),az&&(0,b.jsxs)("div",{className:`rounded-lg border ${h.border} ${h.card} p-3 space-y-2`,children:[(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)(I.Loader2,{className:"h-4 w-4 animate-spin text-purple-500"}),(0,b.jsx)("span",{className:`text-xs font-medium ${h.text}`,children:aB})]}),(0,b.jsx)("div",{className:`h-1.5 ${h.bgTertiary} rounded-full overflow-hidden`,children:(0,b.jsx)(e.motion.div,{className:"h-full bg-purple-500 rounded-full",initial:{width:0},animate:{width:`${aA}%`},transition:{duration:.5}})})]}),aD&&!az&&(0,b.jsxs)("div",{className:"rounded-lg border border-green-500/30 bg-green-500/10 p-3 space-y-2",children:[(0,b.jsxs)("div",{className:"flex items-center gap-2 text-green-500",children:[(0,b.jsx)(ae.CheckCircle,{className:"h-4 w-4"}),(0,b.jsx)("span",{className:"text-xs font-medium",children:"Generated successfully"})]}),(0,b.jsx)("audio",{src:aD.audioUrl,controls:!0,className:"w-full h-8"})]}),aC&&(0,b.jsx)("div",{className:"rounded-lg border border-red-500/30 bg-red-500/10 p-3",children:(0,b.jsxs)("div",{className:"flex items-center gap-2 text-red-400",children:[(0,b.jsx)(af.XCircle,{className:"h-4 w-4"}),(0,b.jsx)("span",{className:"text-xs",children:aC})]})}),(0,b.jsx)("button",{onClick:aP,disabled:az||!j.trim(),className:(0,ao.cn)("w-full flex items-center justify-center gap-2 px-4 py-3 rounded-xl text-sm font-semibold transition-all min-h-[48px] touch-manipulation","focus:outline-none focus:ring-2 focus:ring-purple-500 focus:ring-offset-2",az||!j.trim()?"bg-purple-600/50 text-white/50 cursor-not-allowed":"bg-purple-600 text-white hover:bg-purple-700 active:scale-[0.98]"),children:az?(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(I.Loader2,{className:"w-4 h-4 animate-spin"}),"Generating..."]}):(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(am.Wand2,{className:"w-4 h-4"}),"Generate Music"]})})]})}),(0,b.jsxs)("div",{className:"flex-1 flex flex-col overflow-hidden lg:max-w-sm xl:max-w-md",children:[(0,b.jsxs)("div",{className:`flex items-center justify-between px-4 py-3 border-b ${h.border}`,children:[(0,b.jsx)("h3",{className:`text-xs font-semibold ${h.text} uppercase tracking-wider`,children:"Generated Tracks"}),(0,b.jsx)("span",{className:`text-[10px] ${h.textFaint} tabular-nums`,children:aM?"...":`${aI.length} tracks`})]}),(0,b.jsx)("div",{className:"flex-1 overflow-y-auto",children:aM?(0,b.jsxs)("div",{className:"flex flex-col items-center justify-center h-full p-8 text-center",children:[(0,b.jsx)("div",{className:`w-12 h-12 rounded-xl ${h.card} flex items-center justify-center mb-3`,children:(0,b.jsx)(an.RefreshCw,{className:`w-6 h-6 ${h.textFaint} animate-spin`})}),(0,b.jsx)("p",{className:`text-xs ${h.textFaint}`,children:"Loading your tracks..."})]}):0===aI.length?(0,b.jsxs)("div",{className:"flex flex-col items-center justify-center h-full p-8 text-center",children:[(0,b.jsx)("div",{className:`w-12 h-12 rounded-xl ${h.card} flex items-center justify-center mb-3`,children:(0,b.jsx)(u.Music,{className:`w-6 h-6 ${h.textFaint}`})}),(0,b.jsx)("p",{className:`text-xs ${h.textFaint} max-w-[200px]`,children:"Generated tracks will appear here. Use the form to create your first track."})]}):(0,b.jsx)("div",{className:"divide-y divide-white/5",children:aI.map(c=>(0,b.jsxs)("div",{className:(0,ao.cn)("px-4 py-3 flex items-start gap-3 transition-colors",`hover:${h.cardHover}`),children:[(0,b.jsx)("button",{onClick:()=>aQ(c),className:(0,ao.cn)("flex-shrink-0 w-9 h-9 rounded-lg flex items-center justify-center transition-colors touch-manipulation","focus:outline-none focus:ring-2 focus:ring-purple-500",aJ===c._id?"bg-purple-600 text-white":`${h.bgTertiary} ${h.textMuted} hover:text-purple-400`),"aria-label":aJ===c._id?"Pause":"Play",children:aJ===c._id?(0,b.jsx)(l.Pause,{className:"w-4 h-4"}):(0,b.jsx)(k.Play,{className:"w-4 h-4 ml-0.5"})}),(0,b.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,b.jsx)("p",{className:`text-xs font-medium ${h.text} truncate`,children:c.title}),(0,b.jsx)("p",{className:`text-[10px] ${h.textFaint} truncate mt-0.5`,children:c.prompt.slice(0,60)}),(0,b.jsxs)("div",{className:`flex items-center gap-2 mt-1 text-[10px] ${h.textFaint} tabular-nums`,children:[(0,b.jsxs)("span",{className:"flex items-center gap-0.5",children:[(0,b.jsx)(ai.Clock,{className:"w-3 h-3"}),aT(c.duration)]}),(0,b.jsxs)("span",{children:[c.bpm," BPM"]}),(0,b.jsx)("span",{children:c.key})]})]}),(0,b.jsxs)("div",{className:"flex flex-col gap-1 flex-shrink-0",children:[a&&(0,b.jsx)("button",{onClick:()=>aR(c),className:(0,ao.cn)("p-1.5 rounded-md transition-colors touch-manipulation","focus:outline-none focus:ring-2 focus:ring-cyan-500",`${h.textFaint} hover:text-cyan-400 hover:${h.cardHover}`),"aria-label":"Add to arrange view",title:"Add to Arrange",children:(0,b.jsx)(x.Plus,{className:"w-3.5 h-3.5"})}),(0,b.jsx)("button",{onClick:()=>aS(c._id),className:(0,ao.cn)("p-1.5 rounded-md transition-colors touch-manipulation","focus:outline-none focus:ring-2 focus:ring-red-500",`${h.textFaint} hover:text-red-400 hover:${h.cardHover}`),"aria-label":"Remove track",title:"Remove",children:(0,b.jsx)(aj.Trash2,{className:"w-3.5 h-3.5"})})]})]},c._id))})})]})]})}let ay=a=>{let[b,c]=(0,d.useState)(!1);return(0,d.useEffect)(()=>{let b=window.matchMedia(a);c(b.matches);let d=a=>c(a.matches);return b.addEventListener("change",d),()=>b.removeEventListener("change",d)},[a]),b},az=(0,d.memo)(function(){return(0,b.jsx)("a",{href:"#main-content",className:"sr-only focus:not-sr-only focus:absolute focus:top-4 focus:left-4 focus:z-[100] focus:px-4 focus:py-2 focus:bg-cyan-500 focus:text-white focus:rounded-lg focus:outline-none",children:"Skip to main content"})}),aA=[{icon:(0,b.jsx)(P.default,{className:"w-6 h-6"}),title:"Multi-Track Recording",description:"Layer unlimited tracks with professional-grade audio capture and real-time monitoring.",gradient:"from-cyan-500 to-teal-600"},{icon:(0,b.jsx)(G.Download,{className:"w-6 h-6"}),title:"Export to WAV & MP3",description:"Export your finished tracks in high-quality formats ready for sharing or distribution.",gradient:"from-emerald-500 to-green-600"},{icon:(0,b.jsx)(K.Scissors,{className:"w-6 h-6"}),title:"Stem Separation",description:"Isolate vocals, drums, bass, and more from any audio file using advanced processing.",gradient:"from-amber-500 to-orange-600"}],aB=[{icon:(0,b.jsx)(w.default,{className:"w-6 h-6"}),title:"AI-Powered Mixing",description:"Intelligent auto-mixing that learns your style and enhances your sound automatically.",gradient:"from-sky-500 to-blue-600"},{icon:(0,b.jsx)(z.default,{className:"w-6 h-6"}),title:"Virtual Instruments",description:"Play synthesizers, pianos, drums, and more, all directly in your browser.",gradient:"from-rose-500 to-pink-600"},{icon:(0,b.jsx)(Q.Layers,{className:"w-6 h-6"}),title:"Sample Library",description:"Thousands of royalty-free samples, loops, and one-shots at your fingertips.",gradient:"from-indigo-500 to-blue-600"},{icon:(0,b.jsx)(R.Zap,{className:"w-6 h-6"}),title:"Real-Time Collaboration",description:"Jam with friends anywhere in the world with zero-latency sync technology.",gradient:"from-yellow-500 to-amber-600"}];[...aA,...aB];let aC=(0,d.memo)(function({isDark:a,reducedMotion:d=!1}){return d?(0,b.jsx)("div",{className:"fixed inset-0 overflow-hidden pointer-events-none","aria-hidden":"true",children:(0,b.jsx)("div",{className:`absolute inset-0 ${a?"bg-gradient-to-br from-black via-zinc-950 to-black":"bg-gradient-to-br from-slate-100 via-white to-slate-100"}`})}):(0,b.jsxs)("div",{"aria-hidden":"true",className:"jsx-b37428a79e014570 fixed inset-0 overflow-hidden pointer-events-none",children:[(0,b.jsx)("div",{className:`jsx-b37428a79e014570 absolute inset-0 ${a?"bg-gradient-to-br from-black via-zinc-950 to-black":"bg-gradient-to-br from-slate-100 via-white to-slate-100"}`}),(0,b.jsx)("div",{style:{background:"radial-gradient(circle, rgba(6, 182, 212, 0.4) 0%, transparent 70%)",top:"10%",left:"10%"},className:"jsx-b37428a79e014570 absolute w-[300px] h-[300px] sm:w-[400px] sm:h-[400px] md:w-[600px] md:h-[600px] rounded-full opacity-20 will-change-transform animate-float-slow"}),(0,b.jsx)("div",{style:{background:"radial-gradient(circle, rgba(20, 184, 166, 0.35) 0%, transparent 70%)",bottom:"20%",right:"5%"},className:"jsx-b37428a79e014570 absolute w-[250px] h-[250px] sm:w-[350px] sm:h-[350px] md:w-[500px] md:h-[500px] rounded-full opacity-15 will-change-transform animate-float-slower"}),(0,b.jsx)("div",{style:{backgroundImage:`linear-gradient(${a?"rgba(255,255,255,0.1)":"rgba(0,0,0,0.1)"} 1px, transparent 1px), linear-gradient(90deg, ${a?"rgba(255,255,255,0.1)":"rgba(0,0,0,0.1)"} 1px, transparent 1px)`,backgroundSize:"64px 64px"},className:`jsx-b37428a79e014570 absolute inset-0 ${a?"opacity-[0.03]":"opacity-[0.05]"}`}),(0,b.jsx)(c.default,{id:"b37428a79e014570",children:"@keyframes float-slow{0%,to{transform:translate(0)scale(1)}50%{transform:translate(50px,25px)scale(1.1)}}@keyframes float-slower{0%,to{transform:translate(0)scale(1)}50%{transform:translate(-40px,-30px)scale(1.15)}}.animate-float-slow.jsx-b37428a79e014570{animation:20s ease-in-out infinite float-slow}.animate-float-slower.jsx-b37428a79e014570{animation:25s ease-in-out infinite float-slower}"})]})}),aD=(0,d.memo)(function({reducedMotion:a=!1}){let d=ay("(max-width: 640px)")?20:40;return a?(0,b.jsx)("div",{className:"flex items-end justify-center gap-1 h-24",role:"img","aria-label":"Audio waveform visualization",children:Array.from({length:d}).map((a,c)=>(0,b.jsx)("div",{className:"w-1 bg-gradient-to-t from-cyan-500 to-cyan-400 rounded-full",style:{height:`${30+(20*Math.sin(.3*c)+20)}%`}},c))}):(0,b.jsxs)("div",{role:"img","aria-label":"Animated audio waveform visualization",className:"jsx-9e40be128cba5176 flex items-end justify-center gap-0.5 sm:gap-1 h-16 sm:h-24",children:[Array.from({length:d}).map((a,c)=>(0,b.jsx)("div",{style:{animation:`waveform ${.5+c%5*.1}s ease-in-out infinite`,animationDelay:`${.02*c}s`,height:"30%"},className:"jsx-9e40be128cba5176 w-0.5 sm:w-1 bg-gradient-to-t from-cyan-500 to-cyan-400 rounded-full will-change-transform"},c)),(0,b.jsx)(c.default,{id:"9e40be128cba5176",children:"@keyframes waveform{0%,to{transform:scaleY(1)}50%{transform:scaleY(2.5)}}"})]})}),aE=(0,d.memo)(function({feature:a,index:c,colors:f,reducedMotion:g=!1,isComingSoon:h=!1}){let[i,j]=(0,d.useState)(!1),k=g?{initial:{opacity:1,y:0},animate:{opacity:1,y:0}}:{initial:{opacity:0,y:30},animate:{opacity:1,y:0,transition:{duration:.5,delay:.1+.1*c}}};return(0,b.jsx)(e.motion.article,{variants:k,initial:"initial",animate:"animate",onMouseEnter:()=>j(!0),onMouseLeave:()=>j(!1),onFocus:()=>j(!0),onBlur:()=>j(!1),className:"group relative",tabIndex:0,role:"article","aria-label":`${a.title}: ${a.description}${h?" (Coming Soon)":""}`,children:(0,b.jsxs)("div",{className:`relative overflow-hidden rounded-2xl p-4 sm:p-6 ${f.card} border ${f.border} backdrop-blur-xl transition-all duration-300 ease-out ${i?`${f.borderHover} shadow-2xl -translate-y-1`:""} focus-within:ring-2 focus-within:ring-cyan-500 ${h?"opacity-80":""}`,children:[(0,b.jsx)("div",{className:`absolute inset-0 bg-gradient-to-br ${a.gradient} opacity-0 group-hover:opacity-10 group-focus-within:opacity-10 transition-opacity duration-300`}),h&&(0,b.jsx)("div",{className:"absolute top-3 right-3 px-2 py-0.5 rounded-full bg-amber-500/20 border border-amber-500/30",children:(0,b.jsx)("span",{className:"text-amber-400 text-[10px] font-medium",children:"Soon"})}),(0,b.jsx)("div",{className:`w-10 h-10 sm:w-12 sm:h-12 rounded-xl mb-3 sm:mb-4 bg-gradient-to-br ${a.gradient} flex items-center justify-center text-white shadow-lg ${h?"grayscale-[30%]":""}`,"aria-hidden":"true",children:a.icon}),(0,b.jsx)("h3",{className:`text-base sm:text-lg font-bold ${f.text} mb-1 sm:mb-2`,children:a.title}),(0,b.jsx)("p",{className:`text-xs sm:text-sm ${f.textFaint} leading-relaxed`,children:a.description}),(0,b.jsx)("div",{className:`absolute bottom-0 left-0 right-0 h-0.5 bg-gradient-to-r ${a.gradient} transition-transform duration-300 origin-left ${i?"scale-x-100":"scale-x-0"}`,"aria-hidden":"true"})]})})}),aF=(0,d.memo)(function({colors:a,reducedMotion:f=!1}){let g=ay("(max-width: 640px)"),h=(0,d.useMemo)(()=>[{name:"Drums",color:"bg-cyan-500",width:"100%"},{name:"Bass",color:"bg-cyan-500",width:"85%"},{name:"Synth Lead",color:"bg-pink-500",width:"70%"},{name:"Vocals",color:"bg-amber-500",width:"60%"},{name:"FX",color:"bg-emerald-500",width:"45%"}],[]),i=g?30:60,j=(0,d.useMemo)(()=>h.map(()=>Array.from({length:i},()=>20+60*Math.random())),[h,i]);return(0,b.jsxs)(e.motion.div,{variants:f?{initial:{opacity:1,scale:1},animate:{opacity:1,scale:1}}:{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1,transition:{duration:.8,delay:.3}}},initial:"initial",animate:"animate",className:"relative w-full max-w-4xl mx-auto px-2 sm:px-0",role:"img","aria-label":"Digital Audio Workstation preview showing 5 audio tracks: Drums, Bass, Synth Lead, Vocals, and FX",children:[(0,b.jsxs)("div",{className:`jsx-44e47e2cc064fc28 rounded-xl sm:rounded-2xl overflow-hidden border ${a.border} ${a.isDark?"bg-black/50":"bg-white/80"} backdrop-blur-xl shadow-2xl`,children:[(0,b.jsxs)("div",{className:`jsx-44e47e2cc064fc28 flex items-center justify-between px-3 sm:px-4 py-2 sm:py-3 border-b ${a.border} ${a.card}`,children:[(0,b.jsxs)("div",{"aria-hidden":"true",className:"jsx-44e47e2cc064fc28 flex items-center gap-1.5 sm:gap-2",children:[(0,b.jsx)("div",{className:"jsx-44e47e2cc064fc28 w-2.5 h-2.5 sm:w-3 sm:h-3 rounded-full bg-red-500/80"}),(0,b.jsx)("div",{className:"jsx-44e47e2cc064fc28 w-2.5 h-2.5 sm:w-3 sm:h-3 rounded-full bg-yellow-500/80"}),(0,b.jsx)("div",{className:"jsx-44e47e2cc064fc28 w-2.5 h-2.5 sm:w-3 sm:h-3 rounded-full bg-green-500/80"})]}),(0,b.jsxs)("div",{className:"jsx-44e47e2cc064fc28 flex items-center gap-1.5 sm:gap-2",children:[(0,b.jsx)(O.default,{className:"w-3.5 h-3.5 sm:w-4 sm:h-4 text-cyan-400","aria-hidden":"true"}),(0,b.jsx)("span",{className:`jsx-44e47e2cc064fc28 text-xs sm:text-sm ${a.textMuted} font-medium`,children:"Jamz Studio"})]}),(0,b.jsx)("div",{className:"jsx-44e47e2cc064fc28 w-12 sm:w-16"})]}),(0,b.jsxs)("div",{className:`jsx-44e47e2cc064fc28 flex items-center justify-center gap-2 sm:gap-4 py-3 sm:py-4 border-b ${a.border} ${a.card}`,children:[(0,b.jsx)("button",{"aria-label":"Shuffle",tabIndex:-1,className:`jsx-44e47e2cc064fc28 p-1.5 sm:p-2 ${a.textFaint} hover:${a.text} transition-colors touch-manipulation`,children:(0,b.jsx)(L.Shuffle,{className:"w-3.5 h-3.5 sm:w-4 sm:h-4"})}),(0,b.jsx)("button",{"aria-label":"Previous track",tabIndex:-1,className:`jsx-44e47e2cc064fc28 p-1.5 sm:p-2 ${a.textMuted} hover:${a.text} transition-colors touch-manipulation`,children:(0,b.jsx)(o.SkipBack,{className:"w-4 h-4 sm:w-5 sm:h-5"})}),(0,b.jsx)("button",{"aria-label":"Play",tabIndex:-1,className:"jsx-44e47e2cc064fc28 p-2.5 sm:p-3 rounded-full bg-gradient-to-r from-cyan-500 to-cyan-500 text-white shadow-lg hover:shadow-cyan-500/25 transition-shadow touch-manipulation",children:(0,b.jsx)(k.Play,{className:"w-4 h-4 sm:w-5 sm:h-5"})}),(0,b.jsx)("button",{"aria-label":"Next track",tabIndex:-1,className:`jsx-44e47e2cc064fc28 p-1.5 sm:p-2 ${a.textMuted} hover:${a.text} transition-colors touch-manipulation`,children:(0,b.jsx)(p.SkipForward,{className:"w-4 h-4 sm:w-5 sm:h-5"})}),(0,b.jsx)("button",{"aria-label":"Repeat",tabIndex:-1,className:`jsx-44e47e2cc064fc28 p-1.5 sm:p-2 ${a.textFaint} hover:${a.text} transition-colors touch-manipulation`,children:(0,b.jsx)(q.Repeat,{className:"w-3.5 h-3.5 sm:w-4 sm:h-4"})})]}),(0,b.jsx)("div",{className:"jsx-44e47e2cc064fc28 p-2 sm:p-4 space-y-2 sm:space-y-3",children:h.map((c,d)=>(0,b.jsxs)("div",{style:{animationDelay:f?"0ms":`${500+100*d}ms`},className:`jsx-44e47e2cc064fc28 flex items-center gap-2 sm:gap-3 ${!f?"animate-fade-in":""}`,children:[(0,b.jsx)("div",{className:"jsx-44e47e2cc064fc28 w-16 sm:w-24 flex-shrink-0",children:(0,b.jsx)("div",{className:`jsx-44e47e2cc064fc28 text-[10px] sm:text-xs font-medium ${a.textMuted} truncate`,children:c.name})}),(0,b.jsxs)("div",{className:`jsx-44e47e2cc064fc28 flex-1 h-8 sm:h-10 rounded-md sm:rounded-lg ${a.card} overflow-hidden relative`,children:[(0,b.jsx)("div",{style:{width:c.width},className:`jsx-44e47e2cc064fc28 absolute inset-y-0 left-0 ${c.color} opacity-30 transition-all duration-1000`}),(0,b.jsx)("div",{className:"jsx-44e47e2cc064fc28 absolute inset-0 flex items-center px-1 sm:px-2 gap-px",children:j[d].map((a,d)=>(0,b.jsx)("div",{style:{height:`${a}%`},className:`jsx-44e47e2cc064fc28 w-0.5 sm:w-1 ${c.color} rounded-full opacity-60`},d))})]}),(0,b.jsx)("div",{className:"jsx-44e47e2cc064fc28 w-6 sm:w-8 flex-shrink-0",children:(0,b.jsx)(r.Volume2,{className:`w-3.5 h-3.5 sm:w-4 sm:h-4 ${a.textFaint}`,"aria-hidden":"true"})})]},c.name))}),(0,b.jsx)("div",{className:"jsx-44e47e2cc064fc28 px-2 sm:px-4 pb-3 sm:pb-4",children:(0,b.jsxs)("div",{className:`jsx-44e47e2cc064fc28 flex items-center gap-2 text-[10px] sm:text-xs ${a.textFaint}`,children:[(0,b.jsx)("span",{className:"jsx-44e47e2cc064fc28",children:"0:00"}),(0,b.jsx)("div",{role:"progressbar","aria-valuemin":0,"aria-valuemax":100,"aria-valuenow":35,className:`jsx-44e47e2cc064fc28 flex-1 h-1 ${a.bgTertiary} rounded-full overflow-hidden`,children:(0,b.jsx)("div",{style:{width:"35%"},className:`jsx-44e47e2cc064fc28 h-full bg-gradient-to-r from-cyan-500 to-teal-500 ${!f?"transition-all duration-[2000ms]":""}`})}),(0,b.jsx)("span",{className:"jsx-44e47e2cc064fc28",children:"3:45"})]})})]}),(0,b.jsx)(c.default,{id:"44e47e2cc064fc28",children:"@keyframes fade-in{0%{opacity:0;transform:translate(-20px)}to{opacity:1;transform:translate(0)}}.animate-fade-in.jsx-44e47e2cc064fc28{opacity:0;animation:.5s ease-out forwards fade-in}"})]})}),aG=(0,d.memo)(function({onEnterStudio:a,colors:c,reducedMotion:f=!1,themeClass:g=""}){let i=(0,d.useMemo)(()=>[{icon:(0,b.jsx)(z.default,{className:"w-6 h-6 sm:w-8 sm:h-8"}),name:"Piano",color:"from-sky-500 to-blue-600"},{icon:(0,b.jsx)(A.default,{className:"w-6 h-6 sm:w-8 sm:h-8"}),name:"Guitar",color:"from-amber-500 to-orange-600"},{icon:(0,b.jsx)(P.default,{className:"w-6 h-6 sm:w-8 sm:h-8"}),name:"Drums",color:"from-rose-500 to-pink-600"},{icon:(0,b.jsx)(t.Mic2,{className:"w-6 h-6 sm:w-8 sm:h-8"}),name:"Vocals",color:"from-cyan-500 to-teal-600"},{icon:(0,b.jsx)(B.Waves,{className:"w-6 h-6 sm:w-8 sm:h-8"}),name:"Synth",color:"from-emerald-500 to-green-600"},{icon:(0,b.jsx)(N.Radio,{className:"w-6 h-6 sm:w-8 sm:h-8"}),name:"Bass",color:"from-yellow-500 to-amber-600"}],[]),j=f?{initial:{opacity:1},animate:{opacity:1}}:{initial:{opacity:0,y:20},animate:{opacity:1,y:0}},l=f?{initial:{opacity:1,scale:1},animate:{opacity:1,scale:1}}:{initial:{opacity:0,scale:.5},animate:{opacity:1,scale:1}};return(0,b.jsxs)("main",{id:"main-content",className:`min-h-screen ${c.bg} ${c.text} relative ${g}`,role:"main",children:[(0,b.jsx)(aC,{isDark:c.isDark,reducedMotion:f}),(0,b.jsxs)("div",{className:"relative z-10",children:[(0,b.jsx)("nav",{className:`fixed top-0 left-0 right-0 z-50 px-4 py-3 ${c.bgSecondary}/80 backdrop-blur-xl border-b ${c.border}`,role:"navigation","aria-label":"Main navigation",children:(0,b.jsxs)("div",{className:"max-w-6xl mx-auto flex items-center justify-between",children:[(0,b.jsxs)(h.default,{href:"/",className:`flex items-center gap-2 px-3 py-2 rounded-xl ${c.card} border ${c.border} hover:border-cyan-500/50 transition-all group focus:outline-none focus:ring-2 focus:ring-cyan-500`,"aria-label":"Return to OpenClaw-OS home",children:[(0,b.jsx)(E.Home,{className:`w-4 h-4 ${c.textMuted} group-hover:text-cyan-400 transition-colors`}),(0,b.jsx)("span",{className:`text-sm font-medium ${c.textSecondary} group-hover:text-cyan-400 transition-colors hidden sm:inline`,children:"OpenClaw-OS"})]}),(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)("div",{className:"w-8 h-8 rounded-lg bg-gradient-to-br from-cyan-500 to-teal-500 flex items-center justify-center",children:(0,b.jsx)(v.Music4,{className:"w-4 h-4 text-white"})}),(0,b.jsx)("span",{className:`text-sm font-semibold ${c.text}`,children:"Jamz"})]}),(0,b.jsxs)("button",{onClick:a,className:"flex items-center gap-2 px-4 py-2 rounded-xl bg-gradient-to-r from-cyan-500 to-teal-500 text-white text-sm font-medium hover:shadow-lg hover:shadow-cyan-500/25 transition-all focus:outline-none focus:ring-2 focus:ring-cyan-500",children:[(0,b.jsx)(k.Play,{className:"w-4 h-4"}),(0,b.jsx)("span",{className:"hidden sm:inline",children:"Open Studio"})]})]})}),(0,b.jsxs)("section",{className:"min-h-screen flex flex-col items-center justify-center px-4 sm:px-6 lg:px-8 pt-20 sm:pt-24 pb-12 sm:pb-20","aria-labelledby":"hero-title",children:[(0,b.jsx)(e.motion.div,{variants:l,initial:"initial",animate:"animate",transition:f?{}:{duration:.6,type:"spring"},className:"mb-6 sm:mb-8",children:(0,b.jsxs)("div",{className:"relative",children:[(0,b.jsx)("div",{className:"w-16 h-16 sm:w-20 sm:h-20 md:w-24 md:h-24 rounded-2xl sm:rounded-3xl bg-gradient-to-br from-cyan-500 via-teal-500 to-emerald-500 flex items-center justify-center shadow-2xl shadow-cyan-500/30",role:"img","aria-label":"Jamz Studio logo",children:(0,b.jsx)(v.Music4,{className:"w-8 h-8 sm:w-10 sm:h-10 md:w-12 md:h-12 text-white"})}),(0,b.jsx)("div",{className:"absolute inset-0 rounded-2xl sm:rounded-3xl bg-gradient-to-br from-cyan-500 to-teal-500 blur-2xl opacity-40 -z-10","aria-hidden":"true"})]})}),(0,b.jsxs)(e.motion.div,{variants:j,initial:"initial",animate:"animate",transition:f?{}:{duration:.6,delay:.2},className:"text-center mb-4 sm:mb-6",children:[(0,b.jsx)("h1",{id:"hero-title",className:"text-5xl sm:text-6xl md:text-7xl lg:text-8xl font-black tracking-tighter mb-2 sm:mb-4",children:(0,b.jsx)("span",{className:"bg-gradient-to-r from-cyan-400 via-teal-400 to-emerald-400 bg-clip-text text-transparent",children:"Jamz"})}),(0,b.jsx)("p",{className:`text-lg sm:text-xl md:text-2xl ${c.textFaint} font-light`,children:"Music Studio"})]}),(0,b.jsx)(e.motion.p,{variants:j,initial:"initial",animate:"animate",transition:f?{}:{duration:.6,delay:.3},className:`text-base sm:text-lg md:text-xl ${c.textMuted} max-w-2xl text-center mb-6 sm:mb-8 leading-relaxed px-4`,children:"A professional-grade digital audio workstation in your browser. Create, mix, and master your music with AI-powered tools."}),(0,b.jsx)(e.motion.div,{variants:j,initial:"initial",animate:"animate",transition:f?{}:{duration:.6,delay:.4},className:"mb-8 sm:mb-12",children:(0,b.jsxs)("button",{onClick:a,className:"inline-flex items-center gap-2 px-6 sm:px-8 py-3 sm:py-4 rounded-full bg-gradient-to-r from-cyan-500 to-teal-500 text-white font-semibold hover:shadow-lg hover:shadow-cyan-500/25 transition-all hover:scale-105 focus:outline-none focus:ring-2 focus:ring-cyan-500 focus:ring-offset-2 focus:ring-offset-transparent min-h-[48px] touch-manipulation","aria-label":"Enter Jamz Studio",children:[(0,b.jsx)(J.Sparkles,{className:"w-4 h-4 sm:w-5 sm:h-5","aria-hidden":"true"}),(0,b.jsx)("span",{children:"Let's Jam"})]})}),(0,b.jsx)(e.motion.div,{variants:j,initial:"initial",animate:"animate",transition:f?{}:{duration:1,delay:.5},className:"w-full max-w-xs sm:max-w-md mb-12 sm:mb-16",children:(0,b.jsx)(aD,{reducedMotion:f})}),(0,b.jsx)(aF,{colors:c,reducedMotion:f})]}),(0,b.jsx)("section",{className:"px-4 sm:px-6 lg:px-8 py-16 sm:py-24","aria-labelledby":"features-title",children:(0,b.jsxs)("div",{className:"max-w-6xl mx-auto",children:[(0,b.jsxs)(e.motion.div,{initial:f?{opacity:1}:{opacity:0,y:20},whileInView:{opacity:1,y:0},viewport:{once:!0},transition:f?{}:{duration:.6},className:"text-center mb-10 sm:mb-16",children:[(0,b.jsxs)("h2",{id:"features-title",className:"text-2xl sm:text-3xl md:text-4xl font-bold mb-3 sm:mb-4",children:["Everything You Need to"," ",(0,b.jsx)("span",{className:"bg-gradient-to-r from-cyan-400 to-teal-400 bg-clip-text text-transparent",children:"Create"})]}),(0,b.jsx)("p",{className:`${c.textFaint} max-w-2xl mx-auto text-sm sm:text-base`,children:"Professional music production tools, reimagined for the modern creator."})]}),(0,b.jsxs)("div",{className:"mb-12 sm:mb-16",children:[(0,b.jsxs)(e.motion.div,{initial:f?{opacity:1}:{opacity:0,y:10},whileInView:{opacity:1,y:0},viewport:{once:!0},className:"flex items-center gap-3 mb-6",children:[(0,b.jsxs)("div",{className:"flex items-center gap-2 px-3 py-1.5 rounded-full bg-gradient-to-r from-emerald-500/20 to-teal-500/20 border border-emerald-500/30",children:[(0,b.jsx)("div",{className:"w-2 h-2 rounded-full bg-emerald-400 animate-pulse"}),(0,b.jsx)("span",{className:"text-emerald-400 text-sm font-medium",children:"Available Now"})]}),(0,b.jsx)("div",{className:`h-px flex-1 ${c.border}`})]}),(0,b.jsx)("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4 sm:gap-6",role:"list",children:aA.map((a,d)=>(0,b.jsx)(aE,{feature:a,index:d,colors:c,reducedMotion:f},a.title))})]}),(0,b.jsxs)("div",{children:[(0,b.jsxs)(e.motion.div,{initial:f?{opacity:1}:{opacity:0,y:10},whileInView:{opacity:1,y:0},viewport:{once:!0},className:"flex items-center gap-3 mb-6",children:[(0,b.jsxs)("div",{className:"flex items-center gap-2 px-3 py-1.5 rounded-full bg-gradient-to-r from-amber-500/20 to-orange-500/20 border border-amber-500/30",children:[(0,b.jsx)(J.Sparkles,{className:"w-3.5 h-3.5 text-amber-400"}),(0,b.jsx)("span",{className:"text-amber-400 text-sm font-medium",children:"Coming Soon"})]}),(0,b.jsx)("div",{className:`h-px flex-1 ${c.border}`})]}),(0,b.jsx)("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4 sm:gap-6",role:"list",children:aB.map((a,d)=>(0,b.jsx)(aE,{feature:a,index:d+3,colors:c,reducedMotion:f,isComingSoon:!0},a.title))})]})]})}),(0,b.jsx)("section",{className:"px-4 sm:px-6 lg:px-8 py-16 sm:py-24","aria-labelledby":"instruments-title",children:(0,b.jsxs)("div",{className:"max-w-4xl mx-auto",children:[(0,b.jsxs)(e.motion.div,{initial:f?{opacity:1}:{opacity:0,y:20},whileInView:{opacity:1,y:0},viewport:{once:!0},className:"text-center mb-8 sm:mb-12",children:[(0,b.jsx)("h2",{id:"instruments-title",className:"text-2xl sm:text-3xl font-bold mb-3 sm:mb-4",children:"Virtual Instruments"}),(0,b.jsx)("p",{className:`${c.textFaint} text-sm sm:text-base`,children:"Play any instrument, anywhere."})]}),(0,b.jsx)("div",{className:"grid grid-cols-3 sm:flex sm:flex-wrap sm:justify-center gap-4 sm:gap-6",role:"list",children:i.map((a,d)=>(0,b.jsxs)(e.motion.div,{initial:f?{opacity:1,scale:1}:{opacity:0,scale:.8},whileInView:{opacity:1,scale:1},viewport:{once:!0},transition:f?{}:{delay:.1*d},whileHover:f?{}:{scale:1.1,y:-5},className:"flex flex-col items-center gap-2 sm:gap-3",role:"listitem",children:[(0,b.jsx)("div",{className:`w-12 h-12 sm:w-14 sm:h-14 md:w-16 md:h-16 rounded-xl sm:rounded-2xl bg-gradient-to-br ${a.color} flex items-center justify-center text-white shadow-lg`,"aria-hidden":"true",children:a.icon}),(0,b.jsx)("span",{className:`text-xs sm:text-sm ${c.textFaint}`,children:a.name})]},a.name))})]})}),(0,b.jsx)("section",{className:"px-4 sm:px-6 lg:px-8 py-16 sm:py-24","aria-labelledby":"cta-title",children:(0,b.jsx)(e.motion.div,{initial:f?{opacity:1}:{opacity:0,y:20},whileInView:{opacity:1,y:0},viewport:{once:!0},className:"max-w-2xl mx-auto text-center",children:(0,b.jsxs)("div",{className:`p-6 sm:p-8 rounded-2xl sm:rounded-3xl ${c.card} border ${c.border} backdrop-blur-xl`,children:[(0,b.jsx)(M.Headphones,{className:"w-10 h-10 sm:w-12 sm:h-12 text-cyan-400 mx-auto mb-4 sm:mb-6","aria-hidden":"true"}),(0,b.jsx)("h2",{id:"cta-title",className:"text-xl sm:text-2xl font-bold mb-3 sm:mb-4",children:"Start Creating Today"}),(0,b.jsx)("p",{className:`${c.textFaint} mb-6 sm:mb-8 text-sm sm:text-base`,children:"Record, mix, and export your tracks directly in your browser. More features coming soon."}),(0,b.jsxs)("div",{className:"flex flex-col sm:flex-row gap-3 sm:gap-4 justify-center",children:[(0,b.jsxs)("button",{onClick:a,className:"inline-flex items-center justify-center gap-2 px-5 sm:px-6 py-2.5 sm:py-3 rounded-full bg-gradient-to-r from-cyan-500 to-teal-500 text-white font-medium hover:shadow-lg hover:shadow-cyan-500/25 transition-shadow focus:outline-none focus:ring-2 focus:ring-cyan-500 focus:ring-offset-2 min-h-[44px] touch-manipulation",children:[(0,b.jsx)(k.Play,{className:"w-4 h-4","aria-hidden":"true"}),"Open Studio"]}),(0,b.jsx)(h.default,{href:"/",className:`inline-flex items-center justify-center gap-2 px-5 sm:px-6 py-2.5 sm:py-3 rounded-full ${c.card} ${c.text} font-medium hover:opacity-80 transition-colors border ${c.border} focus:outline-none focus:ring-2 focus:ring-cyan-500 focus:ring-offset-2 min-h-[44px] touch-manipulation`,children:" Back to OpenClaw-OS"})]})]})})}),(0,b.jsx)("footer",{className:`px-4 sm:px-6 lg:px-8 py-6 sm:py-8 border-t ${c.border}`,role:"contentinfo",children:(0,b.jsx)("div",{className:"max-w-6xl mx-auto text-center",children:(0,b.jsxs)("p",{className:`text-xs sm:text-sm ${c.textFaint}`,children:["Design inspired by"," ",(0,b.jsx)("a",{href:"https://x.com/joelbqz",target:"_blank",rel:"noopener noreferrer",className:"text-cyan-400 hover:text-cyan-300 transition-colors underline underline-offset-2",children:"@joelbqz"})]})})})]})]})}),aH=(0,d.memo)(function({isPlaying:a,isRecording:c,currentBeat:d,bpm:e,loop:f,inputLevel:g,colors:h,onPlayPause:i,onStop:j,onRecord:o,onBpmChange:p,onLoopToggle:r}){return(0,b.jsxs)("div",{className:`flex items-center justify-center gap-2 sm:gap-4 py-2 sm:py-3 px-2 sm:px-4 border-b ${h.border} ${h.bgSecondary}`,role:"toolbar","aria-label":"Transport controls",children:[(0,b.jsx)("button",{onClick:j,className:`p-2 sm:p-2.5 rounded-lg ${h.card} ${h.textFaint} hover:${h.text} hover:${h.cardHover} transition-colors min-w-[40px] min-h-[40px] touch-manipulation focus:outline-none focus:ring-2 focus:ring-cyan-500`,"aria-label":"Stop",children:(0,b.jsx)(m.Square,{className:"w-4 h-4"})}),(0,b.jsx)("button",{onClick:i,className:`p-2.5 sm:p-3 rounded-full ${a?"bg-cyan-500":"bg-gradient-to-r from-cyan-500 to-cyan-500"} text-white shadow-lg transition-all min-w-[44px] min-h-[44px] touch-manipulation focus:outline-none focus:ring-2 focus:ring-cyan-500 focus:ring-offset-2`,"aria-label":a?"Pause":"Play","aria-pressed":a,children:a?(0,b.jsx)(l.Pause,{className:"w-4 h-4 sm:w-5 sm:h-5"}):(0,b.jsx)(k.Play,{className:"w-4 h-4 sm:w-5 sm:h-5"})}),(0,b.jsx)("button",{onClick:o,className:`p-2 sm:p-2.5 rounded-lg ${c?"bg-red-500 text-white":`${h.card} ${h.textFaint} hover:text-red-400`} transition-colors min-w-[40px] min-h-[40px] touch-manipulation focus:outline-none focus:ring-2 focus:ring-red-500 ${c?"animate-pulse":""}`,"aria-label":c?"Stop recording":"Start recording","aria-pressed":c,children:(0,b.jsx)(n.Circle,{className:"w-4 h-4"})}),(0,b.jsx)("div",{className:`w-px h-6 ${h.isDark?"bg-white/10":"bg-slate-200"} hidden sm:block`,"aria-hidden":"true"}),(0,b.jsxs)("div",{className:"hidden sm:flex items-center gap-2",children:[(0,b.jsx)("label",{htmlFor:"bpm-input",className:`text-xs ${h.textFaint}`,children:"BPM"}),(0,b.jsx)("input",{id:"bpm-input",type:"number",value:e,onChange:a=>p(Number(a.target.value)),min:40,max:300,className:`w-14 px-2 py-1 rounded ${h.card} ${h.text} text-sm text-center border ${h.border} focus:outline-none focus:border-cyan-500 focus:ring-1 focus:ring-cyan-500`,"aria-label":"Beats per minute"})]}),(0,b.jsx)("button",{onClick:r,className:`p-2 sm:p-2.5 rounded-lg ${f?"bg-cyan-500/20 text-cyan-400":`${h.card} ${h.textFaint}`} transition-colors min-w-[40px] min-h-[40px] touch-manipulation focus:outline-none focus:ring-2 focus:ring-cyan-500`,"aria-label":f?"Disable loop":"Enable loop","aria-pressed":f,children:(0,b.jsx)(q.Repeat,{className:"w-4 h-4"})}),(0,b.jsx)("div",{className:`text-xs sm:text-sm font-mono ${h.textMuted} min-w-[50px] text-center`,"aria-live":"polite","aria-label":"Current position",children:function(a,b=4){let c=Math.floor(a/b)+1,d=Math.floor(a%b)+1;return`${c}.${d}`}(d)})]})});function aI(){let{theme:a,resolvedTheme:c}=(0,i.useTheme)(),{theme:h}=(0,j.useDesignThemeSafe)(),k=(0,g.useReducedMotion)()??!1,l=(0,d.useMemo)(()=>{let a;return{bg:(a="dark"===c||void 0===c)?"bg-zinc-950":"bg-slate-50",bgSecondary:a?"bg-zinc-900":"bg-white",bgTertiary:a?"bg-zinc-800":"bg-slate-100",text:a?"text-white":"text-slate-900",textSecondary:a?"text-white/80":"text-slate-700",textMuted:a?"text-white/60":"text-slate-600",textFaint:a?"text-white/40":"text-slate-400",border:a?"border-white/10":"border-slate-200",borderHover:a?"border-white/20":"border-slate-300",card:a?"bg-white/5":"bg-white",cardHover:a?"bg-white/10":"bg-slate-50",isDark:a}},[a,c]),m=ay("(max-width: 640px)"),n=`theme-${h}`,[o,p]=(0,d.useState)(!1),[q,r]=(0,d.useState)(null),[t,v]=(0,d.useState)("arrange"),[z,A]=(0,d.useState)(1),[B,K]=(0,d.useState)(!1),[L,M]=(0,d.useState)(!1),[N,O]=(0,d.useState)(!1),[P,Q]=(0,d.useState)(!1),[R,W]=(0,d.useState)(!1),[_,aa]=(0,d.useState)(null),ab=function(a){let[b,c]=(0,d.useState)({isPlaying:!1,isRecording:!1,currentBeat:0,masterLevel:0,inputLevel:0}),e=(0,d.useRef)(null),f=(0,d.useRef)(null),g=(0,d.useRef)(null),h=(0,d.useRef)(new Map),i=(0,d.useRef)(new Map),j=(0,d.useRef)([]),k=(0,d.useRef)(0),l=(0,d.useRef)(0),m=(0,d.useRef)(null),n=(0,d.useRef)(null),o=(0,d.useRef)([]),p=(0,d.useRef)(null),q=(0,d.useRef)(null),r=(0,d.useRef)(new Map),s=(0,d.useCallback)(()=>{if(e.current)return e.current;let a=new AudioContext;e.current=a;let b=a.createGain();b.gain.value=.8,b.connect(a.destination),f.current=b;let c=a.createAnalyser();return c.fftSize=256,b.connect(c),g.current=c,a},[]),t=(0,d.useCallback)(async()=>{let a=s();return"suspended"===a.state&&await a.resume(),a},[s]),u=(0,d.useCallback)(async a=>{let b=r.current.get(a);if(b)return b;let c=await t(),d=await fetch(a),e=await d.arrayBuffer(),f=await c.decodeAudioData(e);return r.current.set(a,f),f},[t]),v=(0,d.useCallback)(async a=>{let b=await t(),c=await a.arrayBuffer();return await b.decodeAudioData(c)},[t]),w=(0,d.useCallback)((a,b=200)=>{let c=a.getChannelData(0),d=Math.floor(c.length/b),e=[];for(let a=0;a<b;a++){let b=0,f=a*d,g=Math.min(f+d,c.length);for(let a=f;a<g;a++){let d=Math.abs(c[a]);d>b&&(b=d)}e.push(b)}return e},[]),x=(0,d.useCallback)(a=>{let b=e.current;if(!b||!f.current)return null;let c=h.current.get(a.id),d=i.current.get(a.id);return c||(c=b.createGain(),d=b.createStereoPanner(),c.connect(d),d.connect(f.current),h.current.set(a.id,c),i.current.set(a.id,d)),c.gain.value=a.mute?0:a.volume,d&&(d.pan.value=a.pan),{gainNode:c,panNode:d}},[]),y=(0,d.useCallback)(async(a,b,c,d,f)=>{let g,h=e.current;if(!h)return;let i=x(b);if(!i)return;if(a.audioBuffer)g=a.audioBuffer;else if(a.audioUrl)try{g=await u(a.audioUrl)}catch(a){console.error("Failed to load audio:",a);return}if(!g)return;let k=(a.startBeat-d)/f*60,l=a.offset??0;if(k+g.duration<0)return;let m=h.createBufferSource();m.buffer=g;let n=h.createGain();n.gain.value=a.gain??1,m.connect(n),n.connect(i.gainNode);let o=Math.max(0,c+k);m.start(o,k<0?-k+l:l),j.current.push({source:m,clipId:a.id,trackId:b.id}),m.onended=()=>{j.current=j.current.filter(a=>a.source!==m)}},[x,u]),z=(0,d.useCallback)(()=>{j.current.forEach(({source:a})=>{try{a.stop()}catch(a){}}),j.current=[]},[]),A=(0,d.useCallback)(()=>{if(!e.current||!b.isPlaying||!a)return;let d=e.current,f=d.currentTime-k.current,h=l.current+f/60*a.bpm;if(a.loopEnabled&&h>=a.loopEnd?(l.current=a.loopStart,k.current=d.currentTime,z(),a.tracks.forEach(b=>{b.mute||b.clips.forEach(c=>{y(c,b,d.currentTime,a.loopStart,a.bpm)})}),c(b=>({...b,currentBeat:a.loopStart}))):c(a=>({...a,currentBeat:h})),g.current){let a=new Uint8Array(g.current.frequencyBinCount);g.current.getByteFrequencyData(a);let b=a.reduce((a,b)=>a+b,0)/a.length;c(a=>({...a,masterLevel:b/255}))}m.current=requestAnimationFrame(A)},[a,b.isPlaying,z,y]),B=(0,d.useCallback)(async d=>{if(!a)return;let e=await t();z();let f=d??b.currentBeat;l.current=f,k.current=e.currentTime,a.tracks.forEach(b=>{a.tracks.some(a=>a.solo)&&!b.solo||b.mute||b.clips.forEach(c=>{y(c,b,e.currentTime,f,a.bpm)})}),c(a=>({...a,isPlaying:!0,currentBeat:f})),m.current=requestAnimationFrame(A)},[a,b.currentBeat,t,z,y,A]),C=(0,d.useCallback)(()=>{z(),m.current&&cancelAnimationFrame(m.current),c(a=>({...a,isPlaying:!1}))},[z]),D=(0,d.useCallback)(()=>{C(),c(b=>({...b,currentBeat:a?.loopEnabled?a.loopStart:0}))},[C,a]),E=(0,d.useCallback)(a=>{b.isPlaying?B(a):c(b=>({...b,currentBeat:a}))},[b.isPlaying,B]),F=(0,d.useCallback)(async a=>{try{let a=await navigator.mediaDevices.getUserMedia({audio:!0});p.current=a;let d=await t(),e=d.createMediaStreamSource(a),f=d.createAnalyser();f.fftSize=256,e.connect(f),q.current=f;let g=new MediaRecorder(a,{mimeType:"audio/webm;codecs=opus"});o.current=[],g.ondataavailable=a=>{a.data.size>0&&o.current.push(a.data)},n.current=g,g.start(100),c(a=>({...a,isRecording:!0})),b.isPlaying||B()}catch(a){throw console.error("Failed to start recording:",a),a}},[t,b.isPlaying,B]),G=(0,d.useCallback)(async()=>new Promise(a=>{let b=n.current;b?(b.onstop=async()=>{let b=new Blob(o.current,{type:"audio/webm"}),c=e.current;if(c)try{let d=await b.arrayBuffer(),e=await c.decodeAudioData(d);a({blob:b,buffer:e})}catch(b){console.error("Failed to decode recording:",b),a(null)}else a(null);p.current&&(p.current.getTracks().forEach(a=>a.stop()),p.current=null),q.current=null,n.current=null,o.current=[]},b.stop(),c(a=>({...a,isRecording:!1}))):a(null)}),[]);(0,d.useEffect)(()=>{if(!b.isRecording||!q.current)return;let a=()=>{if(q.current){let a=new Uint8Array(q.current.frequencyBinCount);q.current.getByteFrequencyData(a);let b=a.reduce((a,b)=>a+b,0)/a.length;c(a=>({...a,inputLevel:b/255}))}b.isRecording&&requestAnimationFrame(a)};a()},[b.isRecording]);let H=(0,d.useCallback)(async(b="wav",c,d)=>{if(!a)return null;let e=c??0,f=((d??a.loopEnd)-e)/a.bpm*60,g=new OfflineAudioContext(2,Math.ceil(44100*f),44100),h=g.createGain();for(let b of(h.gain.value=.8,h.connect(g.destination),a.tracks)){if(a.tracks.some(a=>a.solo)&&!b.solo||b.mute)continue;let c=g.createGain();c.gain.value=b.volume;let d=g.createStereoPanner();for(let i of(d.pan.value=b.pan,c.connect(d),d.connect(h),b.clips)){let b;if(i.audioBuffer?b=i.audioBuffer:i.audioUrl&&(b=r.current.get(i.audioUrl)),!b)continue;let d=(i.startBeat-e)/a.bpm*60;if(d>=f||d+b.duration<=0)continue;let h=g.createBufferSource();h.buffer=b;let j=g.createGain();j.gain.value=i.gain??1,h.connect(j),j.connect(c);let k=Math.max(0,d),l=d<0?-d:0;h.start(k,l)}}let i=await g.startRendering();return $(i)},[a]),I=(0,d.useCallback)(async(b,c)=>{if(!a)return null;let d=new Map,e=b??0,f=((c??a.loopEnd)-e)/a.bpm*60;for(let b of a.tracks){if(0===b.clips.length)continue;let c=new OfflineAudioContext(2,Math.ceil(44100*f),44100),g=c.createGain();g.gain.value=b.volume;let h=c.createStereoPanner();for(let d of(h.pan.value=b.pan,g.connect(h),h.connect(c.destination),b.clips)){let b;if(d.audioBuffer?b=d.audioBuffer:d.audioUrl&&(b=r.current.get(d.audioUrl)),!b)continue;let h=(d.startBeat-e)/a.bpm*60;if(h>=f)continue;let i=c.createBufferSource();i.buffer=b;let j=c.createGain();j.gain.value=d.gain??1,i.connect(j),j.connect(g);let k=Math.max(0,h),l=h<0?-h:0;i.start(k,l)}let i=$(await c.startRendering());d.set(b.name,i)}return d},[a]);return(0,d.useEffect)(()=>()=>{z(),m.current&&cancelAnimationFrame(m.current),p.current&&p.current.getTracks().forEach(a=>a.stop()),e.current&&e.current.close()},[z]),{...b,play:B,pause:C,stop:D,seek:E,startRecording:F,stopRecording:G,loadAudio:u,loadAudioFromFile:v,generateWaveformPeaks:w,exportMix:H,exportStems:I,resumeAudioContext:t}}(q),ad=(0,d.useRef)(null);(0,d.useEffect)(()=>{Q(!0)},[]),(0,d.useEffect)(()=>{},[q]);let ae=(0,d.useCallback)((a,b="audio")=>{r(c=>{if(!c)return c;let d=Y(a,b,c.tracks.length);return{...c,tracks:[...c.tracks,d],updatedAt:Date.now()}})},[]),af=(0,d.useCallback)((a,b)=>{r(c=>c?{...c,tracks:c.tracks.map(c=>c.id===a?{...c,...b}:c),updatedAt:Date.now()}:c)},[]),ag=(0,d.useCallback)(()=>{q||r(X("Untitled")),p(!0),K(!0)},[q]),ah=(0,d.useCallback)(async a=>{if(q){O(!0);try{let b=await ab.exportMix(a,0,q.loopEnd);if(b){let c=URL.createObjectURL(b),d=document.createElement("a");d.href=c,d.download=`${q.name.replace(/[^a-z0-9]/gi,"_")}_mix.${a}`,d.click(),URL.revokeObjectURL(c)}}catch(a){console.error("Export failed:",a)}O(!1),M(!1)}},[q,ab]),ai=(0,d.useCallback)(async()=>{if(q)if(ab.isRecording){let a=await ab.stopRecording();if(a&&_){let b=await ac(a.buffer),c=URL.createObjectURL(b),d=Z(`Recording ${new Date().toLocaleTimeString()}`,0,Math.ceil(a.buffer.duration*q.bpm/60),c);r(a=>a?{...a,tracks:a.tracks.map(a=>a.id===_?{...a,clips:[...a.clips,d]}:a),updatedAt:Date.now()}:a)}aa(null)}else{let a=q.tracks.find(a=>a.armed)?.id;if(!a){let b=Y("Recording","audio",q.tracks.length);b.armed=!0,r(a=>a?{...a,tracks:[...a.tracks,b],updatedAt:Date.now()}:a),a=b.id}aa(a),await ab.startRecording(a)}},[q,ab,_]);if((0,d.useEffect)(()=>{let a=a=>{if(!["INPUT","TEXTAREA"].includes(a.target.tagName))switch(a.code){case"Space":a.preventDefault(),ab.isPlaying?ab.pause():ab.play();break;case"Escape":K(!1),M(!1),W(!1)}};return window.addEventListener("keydown",a),()=>window.removeEventListener("keydown",a)},[ab]),!P)return(0,b.jsx)("div",{className:"h-dvh flex items-center justify-center bg-zinc-950",children:(0,b.jsxs)("div",{className:"text-center",children:[(0,b.jsx)("div",{className:"w-12 h-12 rounded-xl bg-gradient-to-br from-cyan-500 to-cyan-500 flex items-center justify-center mx-auto mb-4",children:(0,b.jsx)(u.Music,{className:"w-6 h-6 text-white"})}),(0,b.jsx)("p",{className:"text-white/60 text-sm",children:"Loading Jamz Studio..."})]})});if(!o)return(0,b.jsxs)(T.PageTransition,{children:[(0,b.jsx)(az,{}),(0,b.jsx)(aG,{onEnterStudio:ag,colors:l,reducedMotion:k,themeClass:n})]});let aj=[{id:"arrange",label:"Arrange",icon:(0,b.jsx)(y.Grid3X3,{className:"w-4 h-4"})},{id:"mixer",label:"Mixer",icon:(0,b.jsx)(w.default,{className:"w-4 h-4"})},{id:"browser",label:"Generate",icon:(0,b.jsx)(J.Sparkles,{className:"w-4 h-4"})}];return(0,b.jsxs)(T.PageTransition,{children:[(0,b.jsx)(az,{}),(0,b.jsxs)("div",{className:`h-dvh flex flex-col ${l.bg} ${l.text} overflow-hidden ${n}`,children:[(0,b.jsx)("input",{ref:ad,type:"file",accept:"audio/*",className:"sr-only","aria-label":"Upload audio file"}),(0,b.jsxs)("header",{className:`flex items-center justify-between px-2 sm:px-4 py-2 ${l.bgSecondary} border-b ${l.border}`,role:"banner",children:[(0,b.jsxs)("div",{className:"flex items-center gap-2 sm:gap-3",children:[(0,b.jsx)("button",{onClick:()=>p(!1),className:`p-2 rounded-lg ${l.textFaint} hover:${l.text} hover:${l.cardHover} transition-colors min-w-[40px] min-h-[40px] touch-manipulation focus:outline-none focus:ring-2 focus:ring-cyan-500`,"aria-label":"Return to landing page",children:(0,b.jsx)(E.Home,{className:"w-4 h-4 sm:w-5 sm:h-5"})}),(0,b.jsx)("div",{className:`w-px h-6 ${l.isDark?"bg-white/10":"bg-slate-200"} hidden sm:block`,"aria-hidden":"true"}),(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)("div",{className:"w-7 h-7 sm:w-8 sm:h-8 rounded-lg bg-gradient-to-br from-cyan-500 to-cyan-500 flex items-center justify-center flex-shrink-0","aria-hidden":"true",children:(0,b.jsx)(u.Music,{className:"w-3.5 h-3.5 sm:w-4 sm:h-4 text-white"})}),(0,b.jsxs)("div",{className:"min-w-0",children:[(0,b.jsx)("h1",{className:`text-xs sm:text-sm font-semibold ${l.text} truncate max-w-[100px] sm:max-w-none`,children:q?.name||"Jamz Studio"}),(0,b.jsx)("p",{className:`text-[10px] ${l.textFaint} hidden sm:block`,children:q?`${q.tracks.length} tracks`:"No project"})]})]})]}),(0,b.jsx)("nav",{className:`hidden sm:flex items-center gap-1 p-1 ${l.bgTertiary} rounded-lg`,role:"tablist","aria-label":"View selection",children:aj.map(a=>(0,b.jsxs)("button",{onClick:()=>v(a.id),role:"tab","aria-selected":t===a.id,"aria-controls":`${a.id}-panel`,className:`flex items-center gap-2 px-3 py-1.5 rounded-md text-xs font-medium transition-colors min-h-[36px] touch-manipulation focus:outline-none focus:ring-2 focus:ring-cyan-500 ${t===a.id?"bg-cyan-500 text-white":`${l.textFaint} hover:${l.text} hover:${l.cardHover}`}`,children:[a.icon,(0,b.jsx)("span",{children:a.label})]},a.id))}),(0,b.jsxs)("div",{className:"flex items-center gap-1 sm:gap-2",children:[(0,b.jsx)("button",{onClick:()=>A(a=>Math.max(.5,a-.25)),className:`hidden sm:flex p-2 rounded-lg ${l.textFaint} hover:${l.text} hover:${l.cardHover} transition-colors min-w-[36px] min-h-[36px] items-center justify-center focus:outline-none focus:ring-2 focus:ring-cyan-500`,"aria-label":"Zoom out",children:(0,b.jsx)(D.ZoomOut,{className:"w-4 h-4"})}),(0,b.jsx)("button",{onClick:()=>A(a=>Math.min(2,a+.25)),className:`hidden sm:flex p-2 rounded-lg ${l.textFaint} hover:${l.text} hover:${l.cardHover} transition-colors min-w-[36px] min-h-[36px] items-center justify-center focus:outline-none focus:ring-2 focus:ring-cyan-500`,"aria-label":"Zoom in",children:(0,b.jsx)(C.ZoomIn,{className:"w-4 h-4"})}),(0,b.jsx)("div",{className:`w-px h-6 ${l.isDark?"bg-white/10":"bg-slate-200"} hidden sm:block`,"aria-hidden":"true"}),(0,b.jsxs)("button",{onClick:()=>v("browser"),className:`hidden sm:flex items-center gap-1.5 px-2.5 py-1.5 rounded-lg text-xs font-medium transition-colors min-h-[36px] touch-manipulation focus:outline-none focus:ring-2 focus:ring-purple-500 ${"browser"===t?"bg-purple-600 text-white":`${l.textFaint}`}`,"aria-label":"AI Generate music",children:[(0,b.jsx)(J.Sparkles,{className:"w-3.5 h-3.5"}),(0,b.jsx)("span",{children:"AI"})]}),(0,b.jsxs)("button",{onClick:()=>v("browser"),className:"flex items-center gap-1.5 sm:gap-2 px-2.5 sm:px-3 py-1.5 rounded-lg bg-purple-600 text-white text-xs sm:text-sm font-medium hover:bg-purple-700 transition-colors min-h-[36px] touch-manipulation focus:outline-none focus:ring-2 focus:ring-purple-500 focus:ring-offset-2","aria-label":"AI Generate music",children:[(0,b.jsx)(J.Sparkles,{className:"w-3.5 h-3.5 sm:w-4 sm:h-4"}),(0,b.jsx)("span",{className:"hidden sm:inline",children:"AI Generate"})]}),(0,b.jsxs)("button",{onClick:()=>M(!0),disabled:!q||0===q.tracks.length,className:"flex items-center gap-1.5 sm:gap-2 px-2.5 sm:px-3 py-1.5 rounded-lg bg-cyan-500 text-white text-xs sm:text-sm font-medium hover:bg-cyan-600 transition-colors disabled:opacity-50 disabled:cursor-not-allowed min-h-[36px] touch-manipulation focus:outline-none focus:ring-2 focus:ring-cyan-500 focus:ring-offset-2","aria-label":"Export project",children:[(0,b.jsx)(G.Download,{className:"w-3.5 h-3.5 sm:w-4 sm:h-4"}),(0,b.jsx)("span",{className:"hidden sm:inline",children:"Export"})]}),(0,b.jsx)("button",{onClick:()=>W(!R),className:`sm:hidden p-2 rounded-lg ${l.textFaint} hover:${l.text} transition-colors min-w-[40px] min-h-[40px] touch-manipulation focus:outline-none focus:ring-2 focus:ring-cyan-500`,"aria-label":"Open menu","aria-expanded":R,children:(0,b.jsx)(S.Menu,{className:"w-5 h-5"})})]})]}),(0,b.jsx)(f.AnimatePresence,{children:R&&m&&(0,b.jsx)(e.motion.div,{initial:k?{opacity:1}:{opacity:0,y:-10},animate:{opacity:1,y:0},exit:k?{opacity:0}:{opacity:0,y:-10},className:`sm:hidden absolute top-14 left-0 right-0 z-40 ${l.bgSecondary} border-b ${l.border} shadow-lg`,children:(0,b.jsx)("nav",{className:"p-2 space-y-1",role:"tablist","aria-label":"View selection",children:aj.map(a=>(0,b.jsxs)("button",{onClick:()=>{v(a.id),W(!1)},role:"tab","aria-selected":t===a.id,className:`w-full flex items-center gap-3 px-4 py-3 rounded-lg text-sm font-medium transition-colors touch-manipulation ${t===a.id?"bg-cyan-500 text-white":`${l.text} ${l.cardHover}`}`,children:[a.icon,(0,b.jsx)("span",{children:a.label})]},a.id))})})}),q&&(0,b.jsx)(aH,{isPlaying:ab.isPlaying,isRecording:ab.isRecording,currentBeat:ab.currentBeat,bpm:q.bpm,loop:q.loopEnabled,inputLevel:ab.inputLevel,colors:l,onPlayPause:()=>ab.isPlaying?ab.pause():ab.play(),onStop:ab.stop,onRecord:ai,onBpmChange:a=>r(b=>b?{...b,bpm:a}:b),onLoopToggle:()=>r(a=>a?{...a,loopEnabled:!a.loopEnabled}:a)}),(0,b.jsx)("main",{id:"main-content",className:"flex-1 flex overflow-hidden",role:"main","aria-label":"Studio workspace",children:(0,b.jsxs)(f.AnimatePresence,{mode:"wait",children:["arrange"===t&&q&&(0,b.jsxs)(e.motion.div,{id:"arrange-panel",role:"tabpanel","aria-labelledby":"arrange-tab",initial:k?{opacity:1}:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"flex-1 flex flex-col overflow-hidden",children:[(0,b.jsxs)("div",{className:`h-6 sm:h-8 flex-shrink-0 ${l.bgSecondary} border-b ${l.border} flex items-center px-2 sm:px-4`,role:"presentation","aria-hidden":"true",children:[(0,b.jsx)("div",{className:"w-20 sm:w-32 flex-shrink-0"}),(0,b.jsx)("div",{className:"flex-1 flex items-center overflow-hidden",children:Array.from({length:Math.ceil(16)}).map((a,c)=>(0,b.jsx)("div",{className:`flex-1 text-[8px] sm:text-[10px] ${l.textFaint}`,style:{minWidth:`${(m?60:100)*z}px`},children:c+1},c))})]}),(0,b.jsxs)("div",{className:"flex-1 overflow-auto",role:"list","aria-label":"Audio tracks",children:[q.tracks.map((a,c)=>(0,b.jsxs)("div",{className:`flex items-stretch border-b ${l.border} h-16 sm:h-20`,role:"listitem","aria-label":`Track ${c+1}: ${a.name}`,children:[(0,b.jsxs)("div",{className:`w-20 sm:w-32 flex-shrink-0 p-1.5 sm:p-2 ${l.bgSecondary} border-r ${l.border} flex flex-col justify-center`,children:[(0,b.jsx)("div",{className:`text-xs sm:text-sm font-medium ${l.text} truncate`,children:a.name}),(0,b.jsxs)("div",{className:"flex items-center gap-0.5 sm:gap-1 mt-1",children:[(0,b.jsx)("button",{onClick:()=>af(a.id,{mute:!a.mute}),className:`px-1 sm:px-1.5 py-0.5 text-[8px] sm:text-[10px] rounded min-w-[20px] sm:min-w-[24px] touch-manipulation focus:outline-none focus:ring-1 focus:ring-cyan-500 ${a.mute?"bg-yellow-500 text-black":`${l.bgTertiary} ${l.textFaint}`}`,"aria-label":`${a.mute?"Unmute":"Mute"} ${a.name}`,"aria-pressed":a.mute,children:"M"}),(0,b.jsx)("button",{onClick:()=>af(a.id,{solo:!a.solo}),className:`px-1 sm:px-1.5 py-0.5 text-[8px] sm:text-[10px] rounded min-w-[20px] sm:min-w-[24px] touch-manipulation focus:outline-none focus:ring-1 focus:ring-cyan-500 ${a.solo?"bg-cyan-500 text-black":`${l.bgTertiary} ${l.textFaint}`}`,"aria-label":`${a.solo?"Unsolo":"Solo"} ${a.name}`,"aria-pressed":a.solo,children:"S"}),(0,b.jsx)("button",{onClick:()=>af(a.id,{armed:!a.armed}),className:`px-1 sm:px-1.5 py-0.5 text-[8px] sm:text-[10px] rounded min-w-[20px] sm:min-w-[24px] touch-manipulation focus:outline-none focus:ring-1 focus:ring-red-500 ${a.armed?"bg-red-500 text-white":`${l.bgTertiary} ${l.textFaint}`}`,"aria-label":`${a.armed?"Disarm":"Arm"} ${a.name} for recording`,"aria-pressed":a.armed,children:"R"})]})]}),(0,b.jsx)("div",{className:`flex-1 ${l.bg} relative`,children:a.clips.map(c=>(0,b.jsxs)("div",{className:"absolute top-0.5 sm:top-1 bottom-0.5 sm:bottom-1 rounded-md sm:rounded-lg overflow-hidden",style:{left:`${c.startBeat/64*100}%`,width:`${c.lengthBeats/64*100}%`,backgroundColor:V[a.color]||"#8b5cf6"},role:"button",tabIndex:0,"aria-label":`Clip: ${c.name}`,children:[(0,b.jsx)("div",{className:`absolute inset-0 ${l.isDark?"bg-black/20":"bg-white/20"}`}),(0,b.jsx)("div",{className:`p-0.5 sm:p-1 text-[8px] sm:text-[10px] ${l.isDark?"text-white/80":"text-white"} truncate`,children:c.name})]},c.id))})]},a.id)),(0,b.jsxs)("button",{onClick:()=>ae(`Track ${(q?.tracks.length||0)+1}`),className:`w-full p-3 sm:p-4 ${l.card} border-b ${l.border} flex items-center justify-center gap-2 ${l.textFaint} hover:${l.text} hover:${l.cardHover} transition-colors min-h-[48px] touch-manipulation focus:outline-none focus:ring-2 focus:ring-cyan-500 focus:ring-inset`,"aria-label":"Add new track",children:[(0,b.jsx)(x.Plus,{className:"w-4 h-4"}),(0,b.jsx)("span",{className:"text-sm",children:"Add Track"})]})]})]},"arrange"),"mixer"===t&&q&&(0,b.jsx)(e.motion.div,{id:"mixer-panel",role:"tabpanel","aria-labelledby":"mixer-tab",initial:k?{opacity:1}:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"flex-1 flex items-end justify-start sm:justify-center gap-2 sm:gap-3 p-3 sm:p-6 overflow-x-auto",children:q.tracks.map(a=>(0,b.jsxs)("div",{className:`flex flex-col items-center p-2 sm:p-3 ${l.card} rounded-lg sm:rounded-xl border ${l.border} min-w-[60px] sm:min-w-[80px]`,role:"group","aria-label":`${a.name} mixer channel`,children:[(0,b.jsx)("div",{className:`text-[10px] sm:text-xs font-medium ${l.text} mb-2 sm:mb-3 truncate max-w-[50px] sm:max-w-[70px]`,children:a.name}),(0,b.jsxs)("div",{className:"relative h-24 sm:h-32 w-5 sm:w-6 mb-2 sm:mb-3",role:"slider","aria-label":`${a.name} volume`,"aria-valuenow":Math.round(100*a.volume),"aria-valuemin":0,"aria-valuemax":100,children:[(0,b.jsx)("div",{className:`absolute inset-0 ${l.bgTertiary} rounded-full`}),(0,b.jsx)("div",{className:"absolute bottom-0 left-0.5 right-0.5 sm:left-1 sm:right-1 rounded-full bg-gradient-to-t from-cyan-500 to-cyan-500",style:{height:`${100*a.volume}%`}})]}),(0,b.jsxs)("div",{className:`text-[8px] sm:text-[10px] font-mono ${l.textFaint} mb-1.5 sm:mb-2`,children:[Math.round((a.volume-1)*100)," dB"]}),(0,b.jsxs)("div",{className:"flex gap-0.5 sm:gap-1",children:[(0,b.jsx)("button",{onClick:()=>af(a.id,{mute:!a.mute}),className:`w-5 h-5 sm:w-6 sm:h-6 rounded text-[8px] sm:text-[10px] font-bold touch-manipulation focus:outline-none focus:ring-1 focus:ring-cyan-500 ${a.mute?"bg-yellow-500 text-black":`${l.bgTertiary} ${l.textFaint}`}`,"aria-label":`${a.mute?"Unmute":"Mute"} ${a.name}`,"aria-pressed":a.mute,children:"M"}),(0,b.jsx)("button",{onClick:()=>af(a.id,{solo:!a.solo}),className:`w-5 h-5 sm:w-6 sm:h-6 rounded text-[8px] sm:text-[10px] font-bold touch-manipulation focus:outline-none focus:ring-1 focus:ring-cyan-500 ${a.solo?"bg-cyan-500 text-black":`${l.bgTertiary} ${l.textFaint}`}`,"aria-label":`${a.solo?"Unsolo":"Solo"} ${a.name}`,"aria-pressed":a.solo,children:"S"})]})]},a.id))},"mixer"),"browser"===t&&(0,b.jsx)(e.motion.div,{id:"browser-panel",role:"tabpanel","aria-labelledby":"generate-tab",initial:k?{opacity:1}:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"flex-1 flex overflow-hidden",children:(0,b.jsx)(ax,{colors:l,projectId:q?.id,onAddToArrange:q?a=>{let b=q.tracks.length%U.length,c=Y(a.title,"audio",b),d=Z(a.title,0,a.duration/60*q.bpm);d.audioUrl=a.audioUrl,c.clips=[d],r(a=>a?{...a,tracks:[...a.tracks,c]}:a),v("arrange")}:void 0})},"generate"),!q&&"browser"!==t&&(0,b.jsx)(e.motion.div,{initial:k?{opacity:1}:{opacity:0},animate:{opacity:1},className:"flex-1 flex items-center justify-center p-4",children:(0,b.jsxs)("div",{className:"text-center",children:[(0,b.jsx)("div",{className:`w-12 h-12 sm:w-16 sm:h-16 mx-auto mb-3 sm:mb-4 rounded-xl sm:rounded-2xl ${l.card} flex items-center justify-center`,"aria-hidden":"true",children:(0,b.jsx)(u.Music,{className:`w-6 h-6 sm:w-8 sm:h-8 ${l.textFaint}`})}),(0,b.jsx)("p",{className:`${l.textFaint} text-xs sm:text-sm mb-3 sm:mb-4`,children:"No project open"}),(0,b.jsx)("button",{onClick:()=>K(!0),className:"px-4 py-2.5 bg-cyan-500 text-white rounded-lg text-sm font-medium hover:bg-cyan-600 transition-colors min-h-[44px] touch-manipulation focus:outline-none focus:ring-2 focus:ring-cyan-500 focus:ring-offset-2",children:"Start a Quick Jam"})]})})]})}),(0,b.jsxs)("footer",{className:`flex items-center justify-between px-2 sm:px-4 py-1.5 sm:py-2 ${l.bgSecondary} border-t ${l.border}`,role:"contentinfo",children:[(0,b.jsxs)("div",{className:`flex items-center gap-2 sm:gap-4 text-[8px] sm:text-[10px] ${l.textFaint}`,children:[(0,b.jsxs)("span",{className:"hidden sm:inline",children:["Zoom: ",Math.round(100*z),"%"]}),q&&(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)("span",{className:"hidden sm:inline","aria-hidden":"true",children:"|"}),(0,b.jsxs)("span",{children:[q.tracks.length," Tracks"]}),(0,b.jsx)("span",{"aria-hidden":"true",children:"|"}),(0,b.jsxs)("span",{children:[16," Bars"]})]})]}),(0,b.jsxs)("div",{className:`text-[8px] sm:text-[10px] ${l.textFaint}`,children:["Design by"," ",(0,b.jsx)("a",{href:"https://x.com/joelbqz",target:"_blank",rel:"noopener noreferrer",className:"text-cyan-400 hover:text-cyan-300 underline underline-offset-2",children:"@joelbqz"})]})]}),(0,b.jsx)(f.AnimatePresence,{children:B&&(0,b.jsx)(e.motion.div,{initial:k?{opacity:1}:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-50 flex items-center justify-center bg-black/80 backdrop-blur-sm p-4",role:"dialog","aria-modal":"true","aria-labelledby":"quickjam-title",children:(0,b.jsxs)(e.motion.div,{initial:k?{scale:1,y:0}:{scale:.9,y:20},animate:{scale:1,y:0},exit:k?{scale:1,y:0}:{scale:.9,y:20},className:`relative w-full max-w-sm sm:max-w-lg p-4 sm:p-6 ${l.bgSecondary} rounded-xl sm:rounded-2xl border ${l.border}`,children:[(0,b.jsx)("button",{onClick:()=>K(!1),className:`absolute top-3 right-3 sm:top-4 sm:right-4 p-2 ${l.textFaint} hover:${l.text} transition-colors min-w-[40px] min-h-[40px] touch-manipulation focus:outline-none focus:ring-2 focus:ring-cyan-500 rounded-lg`,"aria-label":"Close dialog",children:(0,b.jsx)(H.X,{className:"w-5 h-5"})}),(0,b.jsx)("h2",{id:"quickjam-title",className:`text-xl sm:text-2xl font-bold ${l.text} mb-2`,children:"Quick Jam"}),(0,b.jsx)("p",{className:`${l.textMuted} mb-4 sm:mb-6 text-sm`,children:"How would you like to start?"}),(0,b.jsx)("div",{className:"grid grid-cols-2 gap-2 sm:gap-4",children:[{id:"record",icon:(0,b.jsx)(s.Mic,{className:"w-6 h-6 sm:w-8 sm:h-8"}),title:"Record",desc:"Capture vocals",gradient:"from-red-500 to-rose-600"},{id:"upload",icon:(0,b.jsx)(F.Upload,{className:"w-6 h-6 sm:w-8 sm:h-8"}),title:"Upload",desc:"Import audio",gradient:"from-cyan-500 to-teal-600"},{id:"template",icon:(0,b.jsx)(u.Music,{className:"w-6 h-6 sm:w-8 sm:h-8"}),title:"Template",desc:"Start with loops",gradient:"from-cyan-500 to-blue-600"},{id:"ai-generate",icon:(0,b.jsx)(J.Sparkles,{className:"w-6 h-6 sm:w-8 sm:h-8"}),title:"AI Generate",desc:"Create with AI",gradient:"from-purple-500 to-violet-600"}].map(a=>(0,b.jsxs)("button",{onClick:()=>{q||r(X("ai-generate"===a.id?"AI Session":"Untitled")),K(!1),"ai-generate"===a.id&&v("browser")},className:`flex flex-col items-center p-2 sm:p-4 rounded-lg sm:rounded-xl ${l.card} border ${l.border} hover:${l.borderHover} transition-all hover:-translate-y-1 touch-manipulation focus:outline-none focus:ring-2 focus:ring-cyan-500 min-h-[100px] sm:min-h-[140px]`,"aria-label":`${a.title}: ${a.desc}`,children:[(0,b.jsx)("div",{className:`w-10 h-10 sm:w-16 sm:h-16 rounded-lg sm:rounded-xl bg-gradient-to-br ${a.gradient} flex items-center justify-center text-white mb-2 sm:mb-3`,"aria-hidden":"true",children:a.icon}),(0,b.jsx)("div",{className:`font-medium ${l.text} text-xs sm:text-base`,children:a.title}),(0,b.jsx)("div",{className:`text-[10px] sm:text-xs ${l.textFaint} hidden sm:block`,children:a.desc})]},a.id))})]})})}),(0,b.jsx)(f.AnimatePresence,{children:L&&(0,b.jsx)(e.motion.div,{initial:k?{opacity:1}:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-50 flex items-center justify-center bg-black/80 backdrop-blur-sm p-4",role:"dialog","aria-modal":"true","aria-labelledby":"export-title",children:(0,b.jsxs)(e.motion.div,{initial:k?{scale:1,y:0}:{scale:.9,y:20},animate:{scale:1,y:0},exit:k?{scale:1,y:0}:{scale:.9,y:20},className:`relative w-full max-w-sm sm:max-w-md p-4 sm:p-6 ${l.bgSecondary} rounded-xl sm:rounded-2xl border ${l.border}`,children:[(0,b.jsx)("button",{onClick:()=>M(!1),className:`absolute top-3 right-3 sm:top-4 sm:right-4 p-2 ${l.textFaint} hover:${l.text} transition-colors min-w-[40px] min-h-[40px] touch-manipulation focus:outline-none focus:ring-2 focus:ring-cyan-500 rounded-lg`,"aria-label":"Close dialog",children:(0,b.jsx)(H.X,{className:"w-5 h-5"})}),(0,b.jsx)("h2",{id:"export-title",className:`text-lg sm:text-xl font-bold ${l.text} mb-3 sm:mb-4`,children:"Export Project"}),(0,b.jsxs)("div",{className:"space-y-2 sm:space-y-3",children:[(0,b.jsxs)("button",{onClick:()=>ah("wav"),disabled:N,className:`w-full p-3 sm:p-4 rounded-lg sm:rounded-xl ${l.card} border ${l.border} hover:${l.borderHover} transition-colors text-left disabled:opacity-50 disabled:cursor-not-allowed min-h-[60px] touch-manipulation focus:outline-none focus:ring-2 focus:ring-cyan-500`,"aria-describedby":"wav-desc",children:[(0,b.jsx)("div",{className:`font-medium ${l.text} text-sm sm:text-base`,children:"WAV (Best Quality)"}),(0,b.jsx)("div",{id:"wav-desc",className:`text-xs sm:text-sm ${l.textFaint}`,children:"Lossless audio format"})]}),(0,b.jsxs)("button",{onClick:()=>ah("mp3"),disabled:N,className:`w-full p-3 sm:p-4 rounded-lg sm:rounded-xl ${l.card} border ${l.border} hover:${l.borderHover} transition-colors text-left disabled:opacity-50 disabled:cursor-not-allowed min-h-[60px] touch-manipulation focus:outline-none focus:ring-2 focus:ring-cyan-500`,"aria-describedby":"mp3-desc",children:[(0,b.jsx)("div",{className:`font-medium ${l.text} text-sm sm:text-base`,children:"MP3 (Compressed)"}),(0,b.jsx)("div",{id:"mp3-desc",className:`text-xs sm:text-sm ${l.textFaint}`,children:"Smaller file size, 192kbps"})]})]}),N&&(0,b.jsxs)("div",{className:`mt-3 sm:mt-4 flex items-center justify-center gap-2 ${l.textMuted}`,role:"status","aria-live":"polite",children:[(0,b.jsx)(I.Loader2,{className:"w-4 h-4 animate-spin","aria-hidden":"true"}),(0,b.jsx)("span",{className:"text-sm",children:"Exporting..."})]})]})})})]})]})}a.s(["default",()=>aI],887844)}];

//# sourceMappingURL=src_app_studio_page_tsx_ec7940ab._.js.map