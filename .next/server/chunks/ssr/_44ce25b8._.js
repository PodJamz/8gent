module.exports=[371029,413942,a=>{"use strict";let b=(0,a.i(627552).default)("Shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]]);a.s(["default",()=>b],413942),a.s(["Shield",()=>b],371029)},341010,a=>{"use strict";var b=a.i(955291);a.s(["LogIn",()=>b.default])},955291,a=>{"use strict";let b=(0,a.i(627552).default)("LogIn",[["path",{d:"M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4",key:"u53s6r"}],["polyline",{points:"10 17 15 12 10 7",key:"1ail0h"}],["line",{x1:"15",x2:"3",y1:"12",y2:"12",key:"v6grx8"}]]);a.s(["default",()=>b])},994433,a=>{"use strict";let b=(0,a.i(627552).default)("UserPlus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]]);a.s(["default",()=>b])},132581,a=>{"use strict";var b=a.i(994433);a.s(["UserPlus",()=>b.default])},434706,a=>{"use strict";let b=(0,a.i(627552).default)("Music2",[["circle",{cx:"8",cy:"18",r:"4",key:"1fc0mg"}],["path",{d:"M12 18V2l7 4",key:"g04rme"}]]);a.s(["default",()=>b])},353747,a=>{"use strict";var b=a.i(434706);a.s(["Music2",()=>b.default])},184898,a=>{"use strict";var b=a.i(499969),c=a.i(863050),d=a.i(925440),e=a.i(567031),f=a.i(278739),g=a.i(233849),h=a.i(135981),i=a.i(730676),j=a.i(374570),k=a.i(462304),l=a.i(662482),m=a.i(745682),n=a.i(217201),o=a.i(227828),p=a.i(924373),q=a.i(371029),r=a.i(90569),s=a.i(353747),t=a.i(368277),u=a.i(282763),v=a.i(132581),w=a.i(341010);function x(){var a;let x,y,z=(0,d.useParams)(),A=(0,d.useRouter)(),B=z.token,{user:C,isLoaded:D,isSignedIn:E}=(0,j.useUser)(),{isLoaded:F}=(0,k.useAuth)(),[G,H]=(0,c.useState)("loading"),[I,J]=(0,c.useState)(null),[K,L]=(0,c.useState)(!1),[M,N]=(0,c.useState)(null),O=(0,g.useQuery)(h.api.collaborators.getInviteByToken,{token:B}),P=(0,g.useMutation)(h.api.collaborators.acceptInvite);(0,c.useEffect)(()=>{if(void 0===O)return void H("loading");if(null===O)return void H("error");switch(J(O),O.status){case"pending":H("pending");break;case"accepted":H("accepted");break;case"expired":H("expired");break;case"revoked":H("revoked");break;default:H("error")}},[O]),(0,c.useEffect)(()=>{async function a(){"pending"===G&&E&&C?.primaryEmailAddress?.emailAddress&&I?.email&&!K&&(C.primaryEmailAddress.emailAddress.toLowerCase()===I.email.toLowerCase()?await Q():H("email_mismatch"))}D&&F&&a()},[G,E,C,I,D,F]);let Q=async()=>{if(!K){L(!0),N(null);try{let a=await P({token:B});a.success?(H("accepted"),setTimeout(()=>{A.push("/")},2e3)):N(a.error||"Failed to accept invite")}catch(a){N("An error occurred. Please try again.")}finally{L(!1)}}};return(0,b.jsxs)("div",{className:"min-h-screen bg-zinc-950 flex items-center justify-center p-6",children:[(0,b.jsx)("div",{className:"absolute inset-0 bg-gradient-to-br from-amber-900/20 via-zinc-950 to-zinc-950"}),(0,b.jsxs)(e.motion.div,{className:"relative z-10 max-w-md w-full",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.3},children:[(0,b.jsx)("div",{className:"bg-zinc-900/80 backdrop-blur-xl rounded-3xl border border-zinc-800 p-8",children:(0,b.jsxs)(f.AnimatePresence,{mode:"wait",children:["loading"===G&&(0,b.jsxs)(e.motion.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"text-center py-8",children:[(0,b.jsx)(l.Loader2,{className:"w-12 h-12 text-amber-400 animate-spin mx-auto mb-4"}),(0,b.jsx)("h1",{className:"text-white text-xl font-semibold mb-2",children:"Loading invite..."}),(0,b.jsx)("p",{className:"text-zinc-500 text-sm",children:"Please wait"})]},"loading"),"pending"===G&&I&&!E&&(0,b.jsxs)(e.motion.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},children:[(0,b.jsxs)("div",{className:"text-center mb-6",children:[(0,b.jsx)("div",{className:"w-16 h-16 bg-amber-500/20 rounded-full flex items-center justify-center mx-auto mb-4",children:(0,b.jsx)(p.Mail,{className:"w-8 h-8 text-amber-400"})}),(0,b.jsx)("h1",{className:"text-white text-xl font-semibold mb-2",children:"You're Invited!"}),(0,b.jsxs)("p",{className:"text-zinc-400 text-sm",children:[I.createdByName," has invited you to join 8gent"]})]}),(0,b.jsxs)("div",{className:"bg-zinc-800/50 rounded-xl p-4 mb-6 space-y-3",children:[(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[(0,b.jsx)(p.Mail,{className:"w-4 h-4 text-zinc-500"}),(0,b.jsx)("span",{className:"text-zinc-300 text-sm",children:I.email})]}),(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[(0,b.jsx)("span",{className:(a=>{switch(a){case"admin":return"text-amber-400";case"collaborator":return"text-blue-400";default:return"text-zinc-400"}})(I.role||"viewer"),children:"admin"===(I.role||"viewer")?(0,b.jsx)(q.Shield,{className:"w-5 h-5"}):(0,b.jsx)(r.User,{className:"w-5 h-5"})}),(0,b.jsxs)("span",{className:"text-zinc-300 text-sm capitalize",children:[I.role||"Viewer"," access"]})]}),I.expiresAt&&(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[(0,b.jsx)(u.Clock,{className:"w-4 h-4 text-zinc-500"}),(0,b.jsx)("span",{className:"text-zinc-400 text-sm",children:(x=new Date(a=I.expiresAt),(y=Math.ceil((a-new Date().getTime())/864e5))<=0?"Expired":1===y?"Expires tomorrow":y<=7?`Expires in ${y} days`:`Expires ${x.toLocaleDateString()}`)})]})]}),I.permissions&&(0,b.jsxs)("div",{className:"mb-6",children:[(0,b.jsx)("h3",{className:"text-zinc-400 text-xs uppercase tracking-wider mb-3",children:"Access Granted"}),(0,b.jsxs)("div",{className:"flex flex-wrap gap-2",children:[I.permissions.privateMusic&&(0,b.jsxs)("span",{className:"inline-flex items-center gap-1.5 px-2.5 py-1 bg-zinc-800 rounded-full text-xs text-zinc-300",children:[(0,b.jsx)(s.Music2,{className:"w-3 h-3"})," Private Music"]}),I.permissions.designCanvas&&(0,b.jsxs)("span",{className:"inline-flex items-center gap-1.5 px-2.5 py-1 bg-zinc-800 rounded-full text-xs text-zinc-300",children:[(0,b.jsx)(t.Palette,{className:"w-3 h-3"})," Design Canvas"]}),I.permissions.areas.length>0&&(0,b.jsxs)("span",{className:"inline-flex items-center gap-1.5 px-2.5 py-1 bg-zinc-800 rounded-full text-xs text-zinc-300",children:["+",I.permissions.areas.length," protected areas"]})]})]}),(0,b.jsxs)("div",{className:"space-y-3",children:[(0,b.jsx)(i.SignUpButton,{mode:"modal",forceRedirectUrl:`/invite/${B}`,children:(0,b.jsxs)("button",{className:"w-full flex items-center justify-center gap-2 bg-amber-500 hover:bg-amber-600 text-black font-medium py-3 px-6 rounded-full transition-colors",children:[(0,b.jsx)(v.UserPlus,{className:"w-4 h-4"}),"Sign Up to Accept"]})}),(0,b.jsx)(i.SignInButton,{mode:"modal",forceRedirectUrl:`/invite/${B}`,children:(0,b.jsxs)("button",{className:"w-full flex items-center justify-center gap-2 bg-zinc-800 hover:bg-zinc-700 text-white font-medium py-3 px-6 rounded-full transition-colors",children:[(0,b.jsx)(w.LogIn,{className:"w-4 h-4"}),"Already have an account? Sign In"]})})]})]},"pending"),"pending"===G&&E&&(0,b.jsxs)(e.motion.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"text-center py-8",children:[(0,b.jsx)(l.Loader2,{className:"w-12 h-12 text-amber-400 animate-spin mx-auto mb-4"}),(0,b.jsx)("h1",{className:"text-white text-xl font-semibold mb-2",children:"Accepting invite..."}),(0,b.jsx)("p",{className:"text-zinc-500 text-sm",children:"Setting up your access"})]},"processing"),"email_mismatch"===G&&I&&(0,b.jsxs)(e.motion.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},children:[(0,b.jsxs)("div",{className:"text-center mb-6",children:[(0,b.jsx)("div",{className:"w-16 h-16 bg-yellow-500/20 rounded-full flex items-center justify-center mx-auto mb-4",children:(0,b.jsx)(m.AlertCircle,{className:"w-8 h-8 text-yellow-400"})}),(0,b.jsx)("h1",{className:"text-white text-xl font-semibold mb-2",children:"Email Mismatch"}),(0,b.jsxs)("p",{className:"text-zinc-400 text-sm",children:["This invite is for ",(0,b.jsx)("span",{className:"text-white font-medium",children:I.email})]}),(0,b.jsxs)("p",{className:"text-zinc-500 text-sm mt-1",children:["You're signed in as"," ",(0,b.jsx)("span",{className:"text-white",children:C?.primaryEmailAddress?.emailAddress})]})]}),(0,b.jsxs)("div",{className:"space-y-3",children:[(0,b.jsx)(i.SignInButton,{mode:"modal",forceRedirectUrl:`/invite/${B}`,children:(0,b.jsxs)("button",{className:"w-full flex items-center justify-center gap-2 bg-amber-500 hover:bg-amber-600 text-black font-medium py-3 px-6 rounded-full transition-colors",children:[(0,b.jsx)(w.LogIn,{className:"w-4 h-4"}),"Sign in with ",I.email]})}),(0,b.jsxs)("button",{onClick:()=>A.push("/"),className:"w-full flex items-center justify-center gap-2 bg-zinc-800 hover:bg-zinc-700 text-white font-medium py-3 px-6 rounded-full transition-colors",children:[(0,b.jsx)(o.Home,{className:"w-4 h-4"}),"Go to 8gent"]})]})]},"mismatch"),"accepted"===G&&(0,b.jsxs)(e.motion.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"text-center",children:[(0,b.jsx)("div",{className:"w-16 h-16 bg-green-500/20 rounded-full flex items-center justify-center mx-auto mb-4",children:(0,b.jsx)(n.CheckCircle,{className:"w-8 h-8 text-green-400"})}),(0,b.jsx)("h1",{className:"text-white text-xl font-semibold mb-2",children:"Welcome to 8gent!"}),(0,b.jsx)("p",{className:"text-zinc-400 text-sm mb-6",children:"Your access has been set up. Redirecting you now..."}),(0,b.jsxs)("button",{onClick:()=>A.push("/"),className:"w-full flex items-center justify-center gap-2 bg-amber-500 hover:bg-amber-600 text-black font-medium py-3 px-6 rounded-full transition-colors",children:[(0,b.jsx)(o.Home,{className:"w-4 h-4"}),"Go to 8gent"]})]},"accepted"),"expired"===G&&(0,b.jsxs)(e.motion.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"text-center",children:[(0,b.jsx)("div",{className:"w-16 h-16 bg-yellow-500/20 rounded-full flex items-center justify-center mx-auto mb-4",children:(0,b.jsx)(u.Clock,{className:"w-8 h-8 text-yellow-400"})}),(0,b.jsx)("h1",{className:"text-white text-xl font-semibold mb-2",children:"Invite Expired"}),(0,b.jsx)("p",{className:"text-zinc-400 text-sm mb-6",children:"This invite link has expired. Please contact the person who invited you to request a new one."}),(0,b.jsxs)("button",{onClick:()=>A.push("/"),className:"w-full flex items-center justify-center gap-2 bg-zinc-800 hover:bg-zinc-700 text-white font-medium py-3 px-6 rounded-full transition-colors",children:[(0,b.jsx)(o.Home,{className:"w-4 h-4"}),"Go to 8gent"]})]},"expired"),"revoked"===G&&(0,b.jsxs)(e.motion.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"text-center",children:[(0,b.jsx)("div",{className:"w-16 h-16 bg-red-500/20 rounded-full flex items-center justify-center mx-auto mb-4",children:(0,b.jsx)(m.AlertCircle,{className:"w-8 h-8 text-red-400"})}),(0,b.jsx)("h1",{className:"text-white text-xl font-semibold mb-2",children:"Invite Revoked"}),(0,b.jsx)("p",{className:"text-zinc-400 text-sm mb-6",children:"This invite has been revoked. Please contact the person who invited you for assistance."}),(0,b.jsxs)("button",{onClick:()=>A.push("/"),className:"w-full flex items-center justify-center gap-2 bg-zinc-800 hover:bg-zinc-700 text-white font-medium py-3 px-6 rounded-full transition-colors",children:[(0,b.jsx)(o.Home,{className:"w-4 h-4"}),"Go to 8gent"]})]},"revoked"),"error"===G&&(0,b.jsxs)(e.motion.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"text-center",children:[(0,b.jsx)("div",{className:"w-16 h-16 bg-red-500/20 rounded-full flex items-center justify-center mx-auto mb-4",children:(0,b.jsx)(m.AlertCircle,{className:"w-8 h-8 text-red-400"})}),(0,b.jsx)("h1",{className:"text-white text-xl font-semibold mb-2",children:"Invite Not Found"}),(0,b.jsx)("p",{className:"text-zinc-400 text-sm mb-6",children:M||"This invite link doesn't exist or is invalid."}),(0,b.jsxs)("button",{onClick:()=>A.push("/"),className:"w-full flex items-center justify-center gap-2 bg-zinc-800 hover:bg-zinc-700 text-white font-medium py-3 px-6 rounded-full transition-colors",children:[(0,b.jsx)(o.Home,{className:"w-4 h-4"}),"Go to 8gent"]})]},"error")]})}),(0,b.jsx)("p",{className:"text-center text-zinc-600 text-xs mt-4",children:"8gent - Personal Operating System"})]})]})}a.s(["default",()=>x])}];

//# sourceMappingURL=_44ce25b8._.js.map